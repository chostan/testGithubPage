(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"00b4":function(e,t,n){"use strict";n("ac1f");var r=n("23e7"),i=n("da84"),o=n("c65b"),a=n("e330"),s=n("1626"),c=n("861d"),u=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),l=i.Error,d=a(/./.test);r({target:"RegExp",proto:!0,forced:!u},{test:function(e){var t=this.exec;if(!s(t))return d(this,e);var n=o(t,this,e);if(null!==n&&!c(n))throw new l("RegExp exec method returned something other than an Object or null");return!!n}})},"00ee":function(e,t,n){var r=n("b622"),i=r("toStringTag"),o={};o[i]="z",e.exports="[object z]"===String(o)},"01b4":function(e,t){var n=function(){this.head=null,this.tail=null};n.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},e.exports=n},"0366":function(e,t,n){var r=n("e330"),i=n("59ed"),o=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?o(e,t):function(){return e.apply(t,arguments)}}},"04b0":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("7a23"),i=n("fe7e"),o=n("f691"),a=n("8da3"),s=n("4a89"),c=n("b1d2"),u=n("1f4d"),l=n("7f9b"),[d,p]=Object(i["a"])("dropdown-menu"),f={overlay:o["g"],zIndex:o["f"],duration:Object(o["c"])(.2),direction:Object(o["e"])("down"),activeColor:String,closeOnClickOutside:o["g"],closeOnClickOverlay:o["g"]},h=Symbol(d);t["b"]=Object(r["n"])({name:d,props:f,setup(e,t){var{slots:n}=t,i=Object(u["a"])(),o=Object(r["K"])(),d=Object(r["K"])(),f=Object(r["K"])(0),{children:g,linkChildren:v}=Object(l["f"])(h),m=Object(l["n"])(o),_=Object(r["e"])(()=>g.some(e=>e.state.showWrapper)),y=Object(r["e"])(()=>{if(_.value&&Object(a["b"])(e.zIndex))return{zIndex:+e.zIndex+1}}),b=()=>{e.closeOnClickOutside&&g.forEach(e=>{e.toggle(!1)})},I=()=>{if(d.value){var t=Object(l["m"])(d);"down"===e.direction?f.value=t.bottom:f.value=s["j"].value-t.top}},T=()=>{_.value&&I()},C=e=>{g.forEach((t,n)=>{n===e?(I(),t.toggle()):t.state.showPopup&&t.toggle(!1,{immediate:!0})})},S=(t,n)=>{var{showPopup:o}=t.state,{disabled:a,titleClass:s}=t;return Object(r["m"])("div",{id:i+"-"+n,role:"button",tabindex:a?void 0:0,class:[p("item",{disabled:a}),{[c["i"]]:!a}],onClick:()=>{a||C(n)}},[Object(r["m"])("span",{class:[p("title",{down:o===("down"===e.direction),active:o}),s],style:{color:o?e.activeColor:""}},[Object(r["m"])("div",{class:"van-ellipsis"},[t.renderTitle()])])])};return v({id:i,props:e,offset:f}),Object(l["g"])(o,b),Object(l["j"])("scroll",T,{target:m}),()=>Object(r["m"])("div",{ref:o,class:p()},[Object(r["m"])("div",{ref:d,style:y.value,class:p("bar",{opened:_.value})},[g.map(S)]),null==n.default?void 0:n.default()])}})},"04d1":function(e,t,n){var r=n("342f"),i=r.match(/firefox\/(\d+)/i);e.exports=!!i&&+i[1]},"0538":function(e,t,n){"use strict";var r=n("da84"),i=n("e330"),o=n("59ed"),a=n("861d"),s=n("1a2d"),c=n("f36a"),u=r.Function,l=i([].concat),d=i([].join),p={},f=function(e,t,n){if(!s(p,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";p[t]=u("C,a","return new C("+d(r,",")+")")}return p[t](e,n)};e.exports=u.bind||function(e){var t=o(this),n=t.prototype,r=c(arguments,1),i=function(){var n=l(r,c(arguments));return this instanceof i?f(t,n.length,n):t.apply(e,n)};return a(n)&&(i.prototype=n),i}},"057f":function(e,t,n){var r=n("c6b6"),i=n("fc6a"),o=n("241c").f,a=n("4dae"),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(e){try{return o(e)}catch(t){return a(s)}};e.exports.f=function(e){return s&&"Window"==r(e)?c(e):o(i(e))}},"0653":function(e,t,n){"use strict";n("68ef"),n("5c56")},"06c5":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("fb6a"),n("d3b7"),n("b0c0"),n("a630"),n("3ca3"),n("ac1f"),n("00b4");var r=n("6b75");function i(e,t){if(e){if("string"===typeof e)return Object(r["a"])(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r["a"])(e,t):void 0}}},"06cf":function(e,t,n){var r=n("83ab"),i=n("c65b"),o=n("d1e7"),a=n("5c6c"),s=n("fc6a"),c=n("a04b"),u=n("1a2d"),l=n("0cfb"),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=s(e),t=c(t),l)try{return d(e,t)}catch(n){}if(u(e,t))return a(!i(o.f,e,t),e[t])}},"07fa":function(e,t,n){var r=n("50c4");e.exports=function(e){return r(e.length)}},"09d3":function(e,t,n){"use strict";n("68ef"),n("aec8")},"09fe":function(e,t,n){},"0a06":function(e,t,n){"use strict";var r=n("c532"),i=n("30b5"),o=n("f6b4"),a=n("5270"),s=n("4a7b"),c=n("848b"),u=c.validators;function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e){"string"===typeof e?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=s(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&c.assertOptions(t,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var n=[],r=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var i,o=[];if(this.interceptors.response.forEach((function(e){o.push(e.fulfilled,e.rejected)})),!r){var l=[a,void 0];Array.prototype.unshift.apply(l,n),l=l.concat(o),i=Promise.resolve(e);while(l.length)i=i.then(l.shift(),l.shift());return i}var d=e;while(n.length){var p=n.shift(),f=n.shift();try{d=p(d)}catch(h){f(h);break}}try{i=a(d)}catch(h){return Promise.reject(h)}while(o.length)i=i.then(o.shift(),o.shift());return i},l.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=l},"0a6e":function(e,t,n){},"0a7d":function(e,t,n){"use strict";var r=n("c199"),i=n("3c2b"),o=Object(r["a"])(i["b"]);t["a"]=o},"0b33":function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f344"),s=n("f691"),c=n("2033"),u=n("7f9b"),l=n("1f4d"),d=n("4eda"),p=n("b070"),f=n("80f6"),h=n("2bb1"),[g,v]=Object(o["a"])("tab"),m=Object(a["a"])({},p["b"],{dot:Boolean,name:s["f"],badge:s["f"],title:String,disabled:Boolean,titleClass:s["h"],titleStyle:[String,Object],showZeroBadge:s["g"]}),_=Object(i["n"])({name:g,props:m,setup(e,t){var{slots:n}=t,r=Object(l["a"])(),o=Object(i["K"])(!1),{parent:a,index:s}=Object(u["l"])(c["a"]);if(a){var p=()=>{var t;return null!=(t=e.name)?t:s.value},g=()=>{o.value=!0,a.props.lazyRender&&Object(i["u"])(()=>{a.onRendered(p(),e.title)})},m=Object(i["e"])(()=>{var e=p()===a.currentName.value;return e&&!o.value&&g(),e});return Object(i["X"])(()=>e.title,()=>{a.setLine(),a.scrollIntoView()}),Object(i["H"])(f["a"],m),()=>{var e=a.id+"-"+s.value,{animated:t,swipeable:c,scrollspy:u,lazyRender:l}=a.props;if(n.default||t){var p=u||m.value;if(t||c)return Object(i["m"])(h["a"],{id:r,role:"tabpanel",class:v("panel-wrapper",{inactive:!m.value}),tabindex:m.value?0:-1,"aria-hidden":!m.value,"aria-labelledby":e},{default:()=>[Object(i["m"])("div",{class:v("panel")},[null==n.default?void 0:n.default()])]});var f=o.value||u||!l,g=f?null==n.default?void 0:n.default():null;return Object(d["a"])({id:r}),Object(i["ab"])(Object(i["m"])("div",{id:r,role:"tabpanel",class:v("panel"),tabindex:p?0:-1,"aria-labelledby":e},[g]),[[i["W"],p]])}}}}}),y=Object(r["a"])(_);t["b"]=y},"0b42":function(e,t,n){var r=n("da84"),i=n("e8b5"),o=n("68ee"),a=n("861d"),s=n("b622"),c=s("species"),u=r.Array;e.exports=function(e){var t;return i(e)&&(t=e.constructor,o(t)&&(t===u||i(t.prototype))?t=void 0:a(t)&&(t=t[c],null===t&&(t=void 0))),void 0===t?u:t}},"0cb2":function(e,t,n){var r=n("e330"),i=n("7b0b"),o=Math.floor,a=r("".charAt),s=r("".replace),c=r("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,r,d,p){var f=n+e.length,h=r.length,g=l;return void 0!==d&&(d=i(d),g=u),s(p,g,(function(i,s){var u;switch(a(s,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,n);case"'":return c(t,f);case"<":u=d[c(s,1,-1)];break;default:var l=+s;if(0===l)return i;if(l>h){var p=o(l/10);return 0===p?i:p<=h?void 0===r[p-1]?a(s,1):r[p-1]+a(s,1):i}u=r[l-1]}return void 0===u?"":u}))}},"0cc8":function(e,t,n){"use strict";n("68ef"),n("ae9e")},"0cfb":function(e,t,n){var r=n("83ab"),i=n("d039"),o=n("cc12");e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},"0d03":function(e,t,n){var r=n("e330"),i=n("6eeb"),o=Date.prototype,a="Invalid Date",s="toString",c=r(o[s]),u=r(o.getTime);String(new Date(NaN))!=a&&i(o,s,(function(){var e=u(this);return e===e?c(this):a}))},"0d51":function(e,t,n){var r=n("da84"),i=r.String;e.exports=function(e){try{return i(e)}catch(t){return"Object"}}},"0df6":function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},"0ec5":function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("75ad"),n("e15d")},1075:function(e,t,n){"use strict";n("68ef"),n("4fbc")},"107c":function(e,t,n){var r=n("d039"),i=n("da84"),o=i.RegExp;e.exports=r((function(){var e=o("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},"10d1":function(e,t,n){"use strict";var r,i=n("da84"),o=n("e330"),a=n("e2cc"),s=n("f183"),c=n("6d61"),u=n("acac"),l=n("861d"),d=n("4fad"),p=n("69f3").enforce,f=n("7f9a"),h=!i.ActiveXObject&&"ActiveXObject"in i,g=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},v=c("WeakMap",g,u);if(f&&h){r=u.getConstructor(g,"WeakMap",!0),s.enable();var m=v.prototype,_=o(m["delete"]),y=o(m.has),b=o(m.get),I=o(m.set);a(m,{delete:function(e){if(l(e)&&!d(e)){var t=p(this);return t.frozen||(t.frozen=new r),_(this,e)||t.frozen["delete"](e)}return _(this,e)},has:function(e){if(l(e)&&!d(e)){var t=p(this);return t.frozen||(t.frozen=new r),y(this,e)||t.frozen.has(e)}return y(this,e)},get:function(e){if(l(e)&&!d(e)){var t=p(this);return t.frozen||(t.frozen=new r),y(this,e)?b(this,e):t.frozen.get(e)}return b(this,e)},set:function(e,t){if(l(e)&&!d(e)){var n=p(this);n.frozen||(n.frozen=new r),y(this,e)?I(this,e,t):n.frozen.set(e,t)}else I(this,e,t);return this}})}},1146:function(e,t,n){},1157:function(e,t,n){var r,i;
/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */(function(t,n){"use strict";"object"===typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)})("undefined"!==typeof window?window:this,(function(n,o){"use strict";var a=[],s=Object.getPrototypeOf,c=a.slice,u=a.flat?function(e){return a.flat.call(e)}:function(e){return a.concat.apply([],e)},l=a.push,d=a.indexOf,p={},f=p.toString,h=p.hasOwnProperty,g=h.toString,v=g.call(Object),m={},_=function(e){return"function"===typeof e&&"number"!==typeof e.nodeType&&"function"!==typeof e.item},y=function(e){return null!=e&&e===e.window},b=n.document,I={type:!0,src:!0,nonce:!0,noModule:!0};function T(e,t,n){n=n||b;var r,i,o=n.createElement("script");if(o.text=e,t)for(r in I)i=t[r]||t.getAttribute&&t.getAttribute(r),i&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function C(e){return null==e?e+"":"object"===typeof e||"function"===typeof e?p[f.call(e)]||"object":typeof e}var S="3.6.0",E=function(e,t){return new E.fn.init(e,t)};function M(e){var t=!!e&&"length"in e&&e.length,n=C(e);return!_(e)&&!y(e)&&("array"===n||0===t||"number"===typeof t&&t>0&&t-1 in e)}E.fn=E.prototype={jquery:S,constructor:E,length:0,toArray:function(){return c.call(this)},get:function(e){return null==e?c.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=E.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return E.each(this,e)},map:function(e){return this.pushStack(E.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(c.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(E.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:a.sort,splice:a.splice},E.extend=E.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,c=arguments.length,u=!1;for("boolean"===typeof a&&(u=a,a=arguments[s]||{},s++),"object"===typeof a||_(a)||(a={}),s===c&&(a=this,s--);s<c;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(u&&r&&(E.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||E.isPlainObject(n)?n:{},i=!1,a[t]=E.extend(u,o,r)):void 0!==r&&(a[t]=r));return a},E.extend({expando:"jQuery"+(S+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==f.call(e))&&(t=s(e),!t||(n=h.call(t,"constructor")&&t.constructor,"function"===typeof n&&g.call(n)===v))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){T(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(M(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?E.merge(n,"string"===typeof e?[e]:e):l.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:d.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;o<a;o++)r=!t(e[o],o),r!==s&&i.push(e[o]);return i},map:function(e,t,n){var r,i,o=0,a=[];if(M(e))for(r=e.length;o<r;o++)i=t(e[o],o,n),null!=i&&a.push(i);else for(o in e)i=t(e[o],o,n),null!=i&&a.push(i);return u(a)},guid:1,support:m}),"function"===typeof Symbol&&(E.fn[Symbol.iterator]=a[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){p["[object "+t+"]"]=t.toLowerCase()}));var k=
/*!
 * Sizzle CSS Selector Engine v2.3.6
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2021-02-16
 */
function(e){var t,n,r,i,o,a,s,c,u,l,d,p,f,h,g,v,m,_,y,b="sizzle"+1*new Date,I=e.document,T=0,C=0,S=ce(),E=ce(),M=ce(),k=ce(),w=function(e,t){return e===t&&(d=!0),0},O={}.hasOwnProperty,D=[],A=D.pop,R=D.push,x=D.push,L=D.slice,N=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",U="(?:\\\\[\\da-fA-F]{1,6}"+j+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",G="\\["+j+"*("+U+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+U+"))|)"+j+"*\\]",V=":("+U+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+G+")*)|.*)\\)|)",F=new RegExp(j+"+","g"),B=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),q=new RegExp("^"+j+"*,"+j+"*"),H=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),z=new RegExp(j+"|>"),K=new RegExp(V),W=new RegExp("^"+U+"$"),Y={ID:new RegExp("^#("+U+")"),CLASS:new RegExp("^\\.("+U+")"),TAG:new RegExp("^("+U+"|[*])"),ATTR:new RegExp("^"+G),PSEUDO:new RegExp("^"+V),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},J=/HTML$/i,$=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+j+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){p()},ae=be((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{x.apply(D=L.call(I.childNodes),I.childNodes),D[I.childNodes.length].nodeType}catch(ke){x={apply:D.length?function(e,t){R.apply(e,L.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(e,t,r,i){var o,s,u,l,d,h,m,_=t&&t.ownerDocument,I=t?t.nodeType:9;if(r=r||[],"string"!==typeof e||!e||1!==I&&9!==I&&11!==I)return r;if(!i&&(p(t),t=t||f,g)){if(11!==I&&(d=Q.exec(e)))if(o=d[1]){if(9===I){if(!(u=t.getElementById(o)))return r;if(u.id===o)return r.push(u),r}else if(_&&(u=_.getElementById(o))&&y(t,u)&&u.id===o)return r.push(u),r}else{if(d[2])return x.apply(r,t.getElementsByTagName(e)),r;if((o=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return x.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!k[e+" "]&&(!v||!v.test(e))&&(1!==I||"object"!==t.nodeName.toLowerCase())){if(m=e,_=t,1===I&&(z.test(e)||H.test(e))){_=ee.test(e)&&me(t.parentNode)||t,_===t&&n.scope||((l=t.getAttribute("id"))?l=l.replace(re,ie):t.setAttribute("id",l=b)),h=a(e),s=h.length;while(s--)h[s]=(l?"#"+l:":scope")+" "+ye(h[s]);m=h.join(",")}try{return x.apply(r,_.querySelectorAll(m)),r}catch(T){k(e,!0)}finally{l===b&&t.removeAttribute("id")}}}return c(e.replace(B,"$1"),t,r,i)}function ce(){var e=[];function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}return t}function ue(e){return e[b]=!0,e}function le(e){var t=f.createElement("fieldset");try{return!!e(t)}catch(ke){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function de(e,t){var n=e.split("|"),i=n.length;while(i--)r.attrHandle[n[i]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function he(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ge(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ve(e){return ue((function(t){return t=+t,ue((function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function me(e){return e&&"undefined"!==typeof e.getElementsByTagName&&e}for(t in n=se.support={},o=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!J.test(t||n&&n.nodeName||"HTML")},p=se.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:I;return a!=f&&9===a.nodeType&&a.documentElement?(f=a,h=f.documentElement,g=!o(f),I!=f&&(i=f.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",oe,!1):i.attachEvent&&i.attachEvent("onunload",oe)),n.scope=le((function(e){return h.appendChild(e).appendChild(f.createElement("div")),"undefined"!==typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.attributes=le((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=le((function(e){return e.appendChild(f.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=Z.test(f.getElementsByClassName),n.getById=le((function(e){return h.appendChild(e).id=b,!f.getElementsByName||!f.getElementsByName(b).length})),n.getById?(r.filter["ID"]=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find["ID"]=function(e,t){if("undefined"!==typeof t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter["ID"]=function(e){var t=e.replace(te,ne);return function(e){var n="undefined"!==typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find["ID"]=function(e,t){if("undefined"!==typeof t.getElementById&&g){var n,r,i,o=t.getElementById(e);if(o){if(n=o.getAttributeNode("id"),n&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if(n=o.getAttributeNode("id"),n&&n.value===e)return[o]}return[]}}),r.find["TAG"]=n.getElementsByTagName?function(e,t){return"undefined"!==typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},r.find["CLASS"]=n.getElementsByClassName&&function(e,t){if("undefined"!==typeof t.getElementsByClassName&&g)return t.getElementsByClassName(e)},m=[],v=[],(n.qsa=Z.test(f.querySelectorAll))&&(le((function(e){var t;h.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+j+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+j+"*(?:value|"+P+")"),e.querySelectorAll("[id~="+b+"-]").length||v.push("~="),t=f.createElement("input"),t.setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+j+"*name"+j+"*="+j+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")})),le((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=f.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+j+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")}))),(n.matchesSelector=Z.test(_=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&le((function(e){n.disconnectedMatch=_.call(e,"*"),_.call(e,"[s!='']:x"),m.push("!=",V)})),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),t=Z.test(h.compareDocumentPosition),y=t||Z.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},w=t?function(e,t){if(e===t)return d=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==f||e.ownerDocument==I&&y(I,e)?-1:t==f||t.ownerDocument==I&&y(I,t)?1:l?N(l,e)-N(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==f?-1:t==f?1:i?-1:o?1:l?N(l,e)-N(l,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==I?-1:s[r]==I?1:0},f):f},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(p(e),n.matchesSelector&&g&&!k[t+" "]&&(!m||!m.test(t))&&(!v||!v.test(t)))try{var r=_.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(ke){k(t,!0)}return se(t,f,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!=f&&p(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=f&&p(e);var i=r.attrHandle[t.toLowerCase()],o=i&&O.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],i=0,o=0;if(d=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(w),d){while(t=e[o++])t===e[o]&&(i=r.push(o));while(i--)e.splice(r[i],1)}return l=null,e},i=se.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"===typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},r=se.selectors={cacheLength:50,createPseudo:ue,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Y["CHILD"].test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&K.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&S(e,(function(e){return t.test("string"===typeof e.className&&e.className||"undefined"!==typeof e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=se.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(F," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,c){var u,l,d,p,f,h,g=o!==a?"nextSibling":"previousSibling",v=t.parentNode,m=s&&t.nodeName.toLowerCase(),_=!c&&!s,y=!1;if(v){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===m:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?v.firstChild:v.lastChild],a&&_){p=v,d=p[b]||(p[b]={}),l=d[p.uniqueID]||(d[p.uniqueID]={}),u=l[e]||[],f=u[0]===T&&u[1],y=f&&u[2],p=f&&v.childNodes[f];while(p=++f&&p&&p[g]||(y=f=0)||h.pop())if(1===p.nodeType&&++y&&p===t){l[e]=[T,f,y];break}}else if(_&&(p=t,d=p[b]||(p[b]={}),l=d[p.uniqueID]||(d[p.uniqueID]={}),u=l[e]||[],f=u[0]===T&&u[1],y=f),!1===y)while(p=++f&&p&&p[g]||(y=f=0)||h.pop())if((s?p.nodeName.toLowerCase()===m:1===p.nodeType)&&++y&&(_&&(d=p[b]||(p[b]={}),l=d[p.uniqueID]||(d[p.uniqueID]={}),l[e]=[T,y]),p===t))break;return y-=i,y===r||y%r===0&&y/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ue((function(e,n){var r,o=i(e,t),a=o.length;while(a--)r=N(e,o[a]),e[r]=!(n[r]=o[a])})):function(e){return i(e,0,n)}):i}},pseudos:{not:ue((function(e){var t=[],n=[],r=s(e.replace(B,"$1"));return r[b]?ue((function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))})):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}})),has:ue((function(e){return function(t){return se(e,t).length>0}})),contains:ue((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||i(t)).indexOf(e)>-1}})),lang:ue((function(e){return W.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos["empty"](e)},header:function(e){return X.test(e.nodeName)},input:function(e){return $.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve((function(){return[0]})),last:ve((function(e,t){return[t-1]})),eq:ve((function(e,t,n){return[n<0?n+t:n]})),even:ve((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ve((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ve((function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:ve((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}},r.pseudos["nth"]=r.pseudos["eq"],{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=he(t);function _e(){}function ye(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=C++;return t.first?function(t,n,i){while(t=t[r])if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,c){var u,l,d,p=[T,s];if(c){while(t=t[r])if((1===t.nodeType||a)&&e(t,n,c))return!0}else while(t=t[r])if(1===t.nodeType||a)if(d=t[b]||(t[b]={}),l=d[t.uniqueID]||(d[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((u=l[o])&&u[0]===T&&u[1]===s)return p[2]=u[2];if(l[o]=p,p[2]=e(t,n,c))return!0}return!1}}function Ie(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function Te(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}function Ce(e,t,n,r,i){for(var o,a=[],s=0,c=e.length,u=null!=t;s<c;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),u&&t.push(s)));return a}function Se(e,t,n,r,i,o){return r&&!r[b]&&(r=Se(r)),i&&!i[b]&&(i=Se(i,o)),ue((function(o,a,s,c){var u,l,d,p=[],f=[],h=a.length,g=o||Te(t||"*",s.nodeType?[s]:s,[]),v=!e||!o&&t?g:Ce(g,p,e,s,c),m=n?i||(o?e:h||r)?[]:a:v;if(n&&n(v,m,s,c),r){u=Ce(m,f),r(u,[],s,c),l=u.length;while(l--)(d=u[l])&&(m[f[l]]=!(v[f[l]]=d))}if(o){if(i||e){if(i){u=[],l=m.length;while(l--)(d=m[l])&&u.push(v[l]=d);i(null,m=[],u,c)}l=m.length;while(l--)(d=m[l])&&(u=i?N(o,d):p[l])>-1&&(o[u]=!(a[u]=d))}}else m=Ce(m===a?m.splice(h,m.length):m),i?i(null,a,m,c):x.apply(a,m)}))}function Ee(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],c=a?1:0,l=be((function(e){return e===t}),s,!0),d=be((function(e){return N(t,e)>-1}),s,!0),p=[function(e,n,r){var i=!a&&(r||n!==u)||((t=n).nodeType?l(e,n,r):d(e,n,r));return t=null,i}];c<o;c++)if(n=r.relative[e[c].type])p=[be(Ie(p),n)];else{if(n=r.filter[e[c].type].apply(null,e[c].matches),n[b]){for(i=++c;i<o;i++)if(r.relative[e[i].type])break;return Se(c>1&&Ie(p),c>1&&ye(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(B,"$1"),n,c<i&&Ee(e.slice(c,i)),i<o&&Ee(e=e.slice(i)),i<o&&ye(e))}p.push(n)}return Ie(p)}function Me(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,c,l){var d,h,v,m=0,_="0",y=o&&[],b=[],I=u,C=o||i&&r.find["TAG"]("*",l),S=T+=null==I?1:Math.random()||.1,E=C.length;for(l&&(u=a==f||a||l);_!==E&&null!=(d=C[_]);_++){if(i&&d){h=0,a||d.ownerDocument==f||(p(d),s=!g);while(v=e[h++])if(v(d,a||f,s)){c.push(d);break}l&&(T=S)}n&&((d=!v&&d)&&m--,o&&y.push(d))}if(m+=_,n&&_!==m){h=0;while(v=t[h++])v(y,b,a,s);if(o){if(m>0)while(_--)y[_]||b[_]||(b[_]=A.call(c));b=Ce(b)}x.apply(c,b),l&&!o&&b.length>0&&m+t.length>1&&se.uniqueSort(c)}return l&&(T=S,u=I),y};return n?ue(o):o}return _e.prototype=r.filters=r.pseudos,r.setFilters=new _e,a=se.tokenize=function(e,t){var n,i,o,a,s,c,u,l=E[e+" "];if(l)return t?0:l.slice(0);s=e,c=[],u=r.preFilter;while(s){for(a in n&&!(i=q.exec(s))||(i&&(s=s.slice(i[0].length)||s),c.push(o=[])),n=!1,(i=H.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(B," ")}),s=s.slice(n.length)),r.filter)!(i=Y[a].exec(s))||u[a]&&!(i=u[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):E(e,c).slice(0)},s=se.compile=function(e,t){var n,r=[],i=[],o=M[e+" "];if(!o){t||(t=a(e)),n=t.length;while(n--)o=Ee(t[n]),o[b]?r.push(o):i.push(o);o=M(e,Me(i,r)),o.selector=e}return o},c=se.select=function(e,t,n,i){var o,c,u,l,d,p="function"===typeof e&&e,f=!i&&a(e=p.selector||e);if(n=n||[],1===f.length){if(c=f[0]=f[0].slice(0),c.length>2&&"ID"===(u=c[0]).type&&9===t.nodeType&&g&&r.relative[c[1].type]){if(t=(r.find["ID"](u.matches[0].replace(te,ne),t)||[])[0],!t)return n;p&&(t=t.parentNode),e=e.slice(c.shift().value.length)}o=Y["needsContext"].test(e)?0:c.length;while(o--){if(u=c[o],r.relative[l=u.type])break;if((d=r.find[l])&&(i=d(u.matches[0].replace(te,ne),ee.test(c[0].type)&&me(t.parentNode)||t))){if(c.splice(o,1),e=i.length&&ye(c),!e)return x.apply(n,i),n;break}}}return(p||s(e,f))(i,t,!g,n,!t||ee.test(e)&&me(t.parentNode)||t),n},n.sortStable=b.split("").sort(w).join("")===b,n.detectDuplicates=!!d,p(),n.sortDetached=le((function(e){return 1&e.compareDocumentPosition(f.createElement("fieldset"))})),le((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||de("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&le((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||de("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),le((function(e){return null==e.getAttribute("disabled")}))||de(P,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),se}(n);E.find=k,E.expr=k.selectors,E.expr[":"]=E.expr.pseudos,E.uniqueSort=E.unique=k.uniqueSort,E.text=k.getText,E.isXMLDoc=k.isXML,E.contains=k.contains,E.escapeSelector=k.escape;var w=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&E(e).is(n))break;r.push(e)}return r},O=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},D=E.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var R=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function x(e,t,n){return _(t)?E.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?E.grep(e,(function(e){return e===t!==n})):"string"!==typeof t?E.grep(e,(function(e){return d.call(t,e)>-1!==n})):E.filter(t,e,n)}E.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?E.find.matchesSelector(r,e)?[r]:[]:E.find.matches(e,E.grep(t,(function(e){return 1===e.nodeType})))},E.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!==typeof e)return this.pushStack(E(e).filter((function(){for(t=0;t<r;t++)if(E.contains(i[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)E.find(e,i[t],n);return r>1?E.uniqueSort(n):n},filter:function(e){return this.pushStack(x(this,e||[],!1))},not:function(e){return this.pushStack(x(this,e||[],!0))},is:function(e){return!!x(this,"string"===typeof e&&D.test(e)?E(e):e||[],!1).length}});var L,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,P=E.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||L,"string"===typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:N.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof E?t[0]:t,E.merge(this,E.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:b,!0)),R.test(r[1])&&E.isPlainObject(t))for(r in t)_(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=b.getElementById(r[2]),i&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):_(e)?void 0!==n.ready?n.ready(e):e(E):E.makeArray(e,this)};P.prototype=E.fn,L=E(b);var j=/^(?:parents|prev(?:Until|All))/,U={children:!0,contents:!0,next:!0,prev:!0};function G(e,t){while((e=e[t])&&1!==e.nodeType);return e}E.fn.extend({has:function(e){var t=E(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(E.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!==typeof e&&E(e);if(!D.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&E.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?E.uniqueSort(o):o)},index:function(e){return e?"string"===typeof e?d.call(E(e),this[0]):d.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),E.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return w(e,"parentNode")},parentsUntil:function(e,t,n){return w(e,"parentNode",n)},next:function(e){return G(e,"nextSibling")},prev:function(e){return G(e,"previousSibling")},nextAll:function(e){return w(e,"nextSibling")},prevAll:function(e){return w(e,"previousSibling")},nextUntil:function(e,t,n){return w(e,"nextSibling",n)},prevUntil:function(e,t,n){return w(e,"previousSibling",n)},siblings:function(e){return O((e.parentNode||{}).firstChild,e)},children:function(e){return O(e.firstChild)},contents:function(e){return null!=e.contentDocument&&s(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),E.merge([],e.childNodes))}},(function(e,t){E.fn[e]=function(n,r){var i=E.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"===typeof r&&(i=E.filter(r,i)),this.length>1&&(U[e]||E.uniqueSort(i),j.test(e)&&i.reverse()),this.pushStack(i)}}));var V=/[^\x20\t\r\n\f]+/g;function F(e){var t={};return E.each(e.match(V)||[],(function(e,n){t[n]=!0})),t}function B(e){return e}function q(e){throw e}function H(e,t,n,r){var i;try{e&&_(i=e.promise)?i.call(e).done(t).fail(n):e&&_(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}E.Callbacks=function(e){e="string"===typeof e?F(e):E.extend({},e);var t,n,r,i,o=[],a=[],s=-1,c=function(){for(i=i||e.once,r=t=!0;a.length;s=-1){n=a.shift();while(++s<o.length)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1)}e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},u={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){E.each(n,(function(n,r){_(r)?e.unique&&u.has(r)||o.push(r):r&&r.length&&"string"!==C(r)&&t(r)}))}(arguments),n&&!t&&c()),this},remove:function(){return E.each(arguments,(function(e,t){var n;while((n=E.inArray(t,o,n))>-1)o.splice(n,1),n<=s&&s--})),this},has:function(e){return e?E.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=n||[],n=[e,n.slice?n.slice():n],a.push(n),t||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},E.extend({Deferred:function(e){var t=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return E.Deferred((function(n){E.each(t,(function(t,r){var i=_(e[r[4]])&&e[r[4]];o[r[1]]((function(){var e=i&&i.apply(this,arguments);e&&_(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(e,r,i){var o=0;function a(e,t,r,i){return function(){var s=this,c=arguments,u=function(){var n,u;if(!(e<o)){if(n=r.apply(s,c),n===t.promise())throw new TypeError("Thenable self-resolution");u=n&&("object"===typeof n||"function"===typeof n)&&n.then,_(u)?i?u.call(n,a(o,t,B,i),a(o,t,q,i)):(o++,u.call(n,a(o,t,B,i),a(o,t,q,i),a(o,t,B,t.notifyWith))):(r!==B&&(s=void 0,c=[n]),(i||t.resolveWith)(s,c))}},l=i?u:function(){try{u()}catch(n){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(n,l.stackTrace),e+1>=o&&(r!==q&&(s=void 0,c=[n]),t.rejectWith(s,c))}};e?l():(E.Deferred.getStackHook&&(l.stackTrace=E.Deferred.getStackHook()),n.setTimeout(l))}}return E.Deferred((function(n){t[0][3].add(a(0,n,_(i)?i:B,n.notifyWith)),t[1][3].add(a(0,n,_(e)?e:B)),t[2][3].add(a(0,n,_(r)?r:q))})).promise()},promise:function(e){return null!=e?E.extend(e,i):i}},o={};return E.each(t,(function(e,n){var a=n[2],s=n[5];i[n[1]]=a.add,s&&a.add((function(){r=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=a.fireWith})),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=c.call(arguments),o=E.Deferred(),a=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?c.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(H(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||_(i[n]&&i[n].then)))return o.then();while(n--)H(i[n],a(n),o.reject);return o.promise()}});var z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&z.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},E.readyException=function(e){n.setTimeout((function(){throw e}))};var K=E.Deferred();function W(){b.removeEventListener("DOMContentLoaded",W),n.removeEventListener("load",W),E.ready()}E.fn.ready=function(e){return K.then(e).catch((function(e){E.readyException(e)})),this},E.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==e&&--E.readyWait>0||K.resolveWith(b,[E]))}}),E.ready.then=K.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?n.setTimeout(E.ready):(b.addEventListener("DOMContentLoaded",W),n.addEventListener("load",W));var Y=function(e,t,n,r,i,o,a){var s=0,c=e.length,u=null==n;if("object"===C(n))for(s in i=!0,n)Y(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,_(r)||(a=!0),u&&(a?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(E(e),n)})),t))for(;s<c;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:u?t.call(e):c?t(e[0],n):o},J=/^-ms-/,$=/-([a-z])/g;function X(e,t){return t.toUpperCase()}function Z(e){return e.replace(J,"ms-").replace($,X)}var Q=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function ee(){this.expando=E.expando+ee.uid++}ee.uid=1,ee.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Q(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"===typeof t)i[Z(t)]=n;else for(r in t)i[Z(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][Z(t)]},access:function(e,t,n){return void 0===t||t&&"string"===typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){Array.isArray(t)?t=t.map(Z):(t=Z(t),t=t in r?[t]:t.match(V)||[]),n=t.length;while(n--)delete r[t[n]]}(void 0===t||E.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!E.isEmptyObject(t)}};var te=new ee,ne=new ee,re=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ie=/[A-Z]/g;function oe(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:re.test(e)?JSON.parse(e):e)}function ae(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ie,"-$&").toLowerCase(),n=e.getAttribute(r),"string"===typeof n){try{n=oe(n)}catch(i){}ne.set(e,t,n)}else n=void 0;return n}E.extend({hasData:function(e){return ne.hasData(e)||te.hasData(e)},data:function(e,t,n){return ne.access(e,t,n)},removeData:function(e,t){ne.remove(e,t)},_data:function(e,t,n){return te.access(e,t,n)},_removeData:function(e,t){te.remove(e,t)}}),E.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=ne.get(o),1===o.nodeType&&!te.get(o,"hasDataAttrs"))){n=a.length;while(n--)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=Z(r.slice(5)),ae(o,r,i[r])));te.set(o,"hasDataAttrs",!0)}return i}return"object"===typeof e?this.each((function(){ne.set(this,e)})):Y(this,(function(t){var n;if(o&&void 0===t)return n=ne.get(o,e),void 0!==n?n:(n=ae(o,e),void 0!==n?n:void 0);this.each((function(){ne.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){ne.remove(this,e)}))}}),E.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=te.get(e,t),n&&(!r||Array.isArray(n)?r=te.access(e,t,E.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=E.queue(e,t),r=n.length,i=n.shift(),o=E._queueHooks(e,t),a=function(){E.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return te.get(e,n)||te.access(e,n,{empty:E.Callbacks("once memory").add((function(){te.remove(e,[t+"queue",n])}))})}}),E.fn.extend({queue:function(e,t){var n=2;return"string"!==typeof e&&(t=e,e="fx",n--),arguments.length<n?E.queue(this[0],e):void 0===t?this:this.each((function(){var n=E.queue(this,e,t);E._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&E.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){E.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=E.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!==typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)n=te.get(o[a],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var se=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ce=new RegExp("^(?:([+-])=|)("+se+")([a-z%]*)$","i"),ue=["Top","Right","Bottom","Left"],le=b.documentElement,de=function(e){return E.contains(e.ownerDocument,e)},pe={composed:!0};le.getRootNode&&(de=function(e){return E.contains(e.ownerDocument,e)||e.getRootNode(pe)===e.ownerDocument});var fe=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&de(e)&&"none"===E.css(e,"display")};function he(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return E.css(e,t,"")},c=s(),u=n&&n[3]||(E.cssNumber[t]?"":"px"),l=e.nodeType&&(E.cssNumber[t]||"px"!==u&&+c)&&ce.exec(E.css(e,t));if(l&&l[3]!==u){c/=2,u=u||l[3],l=+c||1;while(a--)E.style(e,t,l+u),(1-o)*(1-(o=s()/c||.5))<=0&&(a=0),l/=o;l*=2,E.style(e,t,l+u),n=n||[]}return n&&(l=+l||+c||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=l,r.end=i)),i}var ge={};function ve(e){var t,n=e.ownerDocument,r=e.nodeName,i=ge[r];return i||(t=n.body.appendChild(n.createElement(r)),i=E.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),ge[r]=i,i)}function me(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)r=e[o],r.style&&(n=r.style.display,t?("none"===n&&(i[o]=te.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&fe(r)&&(i[o]=ve(r))):"none"!==n&&(i[o]="none",te.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}E.fn.extend({show:function(){return me(this,!0)},hide:function(){return me(this)},toggle:function(e){return"boolean"===typeof e?e?this.show():this.hide():this.each((function(){fe(this)?E(this).show():E(this).hide()}))}});var _e=/^(?:checkbox|radio)$/i,ye=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,be=/^$|^module$|\/(?:java|ecma)script/i;(function(){var e=b.createDocumentFragment(),t=e.appendChild(b.createElement("div")),n=b.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),m.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,t.innerHTML="<option></option>",m.option=!!t.lastChild})();var Ie={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Te(e,t){var n;return n="undefined"!==typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!==typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?E.merge([e],n):n}function Ce(e,t){for(var n=0,r=e.length;n<r;n++)te.set(e[n],"globalEval",!t||te.get(t[n],"globalEval"))}Ie.tbody=Ie.tfoot=Ie.colgroup=Ie.caption=Ie.thead,Ie.th=Ie.td,m.option||(Ie.optgroup=Ie.option=[1,"<select multiple='multiple'>","</select>"]);var Se=/<|&#?\w+;/;function Ee(e,t,n,r,i){for(var o,a,s,c,u,l,d=t.createDocumentFragment(),p=[],f=0,h=e.length;f<h;f++)if(o=e[f],o||0===o)if("object"===C(o))E.merge(p,o.nodeType?[o]:o);else if(Se.test(o)){a=a||d.appendChild(t.createElement("div")),s=(ye.exec(o)||["",""])[1].toLowerCase(),c=Ie[s]||Ie._default,a.innerHTML=c[1]+E.htmlPrefilter(o)+c[2],l=c[0];while(l--)a=a.lastChild;E.merge(p,a.childNodes),a=d.firstChild,a.textContent=""}else p.push(t.createTextNode(o));d.textContent="",f=0;while(o=p[f++])if(r&&E.inArray(o,r)>-1)i&&i.push(o);else if(u=de(o),a=Te(d.appendChild(o),"script"),u&&Ce(a),n){l=0;while(o=a[l++])be.test(o.type||"")&&n.push(o)}return d}var Me=/^([^.]*)(?:\.(.+)|)/;function ke(){return!0}function we(){return!1}function Oe(e,t){return e===De()===("focus"===t)}function De(){try{return b.activeElement}catch(e){}}function Ae(e,t,n,r,i,o){var a,s;if("object"===typeof t){for(s in"string"!==typeof n&&(r=r||n,n=void 0),t)Ae(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"===typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=we;else if(!i)return e;return 1===o&&(a=i,i=function(e){return E().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=E.guid++)),e.each((function(){E.event.add(this,t,i,r,n)}))}function Re(e,t,n){n?(te.set(e,t,!1),E.event.add(e,t,{namespace:!1,handler:function(e){var r,i,o=te.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(E.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=c.call(arguments),te.set(this,t,o),r=n(this,t),this[t](),i=te.get(this,t),o!==i||r?te.set(this,t,!1):i={},o!==i)return e.stopImmediatePropagation(),e.preventDefault(),i&&i.value}else o.length&&(te.set(this,t,{value:E.event.trigger(E.extend(o[0],E.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===te.get(e,t)&&E.event.add(e,t,ke)}E.event={global:{},add:function(e,t,n,r,i){var o,a,s,c,u,l,d,p,f,h,g,v=te.get(e);if(Q(e)){n.handler&&(o=n,n=o.handler,i=o.selector),i&&E.find.matchesSelector(le,i),n.guid||(n.guid=E.guid++),(c=v.events)||(c=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(t){return"undefined"!==typeof E&&E.event.triggered!==t.type?E.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(V)||[""],u=t.length;while(u--)s=Me.exec(t[u])||[],f=g=s[1],h=(s[2]||"").split(".").sort(),f&&(d=E.event.special[f]||{},f=(i?d.delegateType:d.bindType)||f,d=E.event.special[f]||{},l=E.extend({type:f,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&E.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=c[f])||(p=c[f]=[],p.delegateCount=0,d.setup&&!1!==d.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(f,a)),d.add&&(d.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,l):p.push(l),E.event.global[f]=!0)}},remove:function(e,t,n,r,i){var o,a,s,c,u,l,d,p,f,h,g,v=te.hasData(e)&&te.get(e);if(v&&(c=v.events)){t=(t||"").match(V)||[""],u=t.length;while(u--)if(s=Me.exec(t[u])||[],f=g=s[1],h=(s[2]||"").split(".").sort(),f){d=E.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,p=c[f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)l=p[o],!i&&g!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(p.splice(o,1),l.selector&&p.delegateCount--,d.remove&&d.remove.call(e,l));a&&!p.length&&(d.teardown&&!1!==d.teardown.call(e,h,v.handle)||E.removeEvent(e,f,v.handle),delete c[f])}else for(f in c)E.event.remove(e,f+t[u],n,r,!0);E.isEmptyObject(c)&&te.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),c=E.event.fix(e),u=(te.get(this,"events")||Object.create(null))[c.type]||[],l=E.event.special[c.type]||{};for(s[0]=c,t=1;t<arguments.length;t++)s[t]=arguments[t];if(c.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,c)){a=E.event.handlers.call(this,c,u),t=0;while((i=a[t++])&&!c.isPropagationStopped()){c.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!c.isImmediatePropagationStopped())c.rnamespace&&!1!==o.namespace&&!c.rnamespace.test(o.namespace)||(c.handleObj=o,c.data=o.data,r=((E.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s),void 0!==r&&!1===(c.result=r)&&(c.preventDefault(),c.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,c),c.result}},handlers:function(e,t){var n,r,i,o,a,s=[],c=t.delegateCount,u=e.target;if(c&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(o=[],a={},n=0;n<c;n++)r=t[n],i=r.selector+" ",void 0===a[i]&&(a[i]=r.needsContext?E(i,this).index(u)>-1:E.find(i,this,null,[u]).length),a[i]&&o.push(r);o.length&&s.push({elem:u,handlers:o})}return u=this,c<t.length&&s.push({elem:u,handlers:t.slice(c)}),s},addProp:function(e,t){Object.defineProperty(E.Event.prototype,e,{enumerable:!0,configurable:!0,get:_(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[E.expando]?e:new E.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return _e.test(t.type)&&t.click&&A(t,"input")&&Re(t,"click",ke),!1},trigger:function(e){var t=this||e;return _e.test(t.type)&&t.click&&A(t,"input")&&Re(t,"click"),!0},_default:function(e){var t=e.target;return _e.test(t.type)&&t.click&&A(t,"input")&&te.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},E.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},E.Event=function(e,t){if(!(this instanceof E.Event))return new E.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ke:we,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&E.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:we,isPropagationStopped:we,isImmediatePropagationStopped:we,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ke,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ke,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ke,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},(function(e,t){E.event.special[e]={setup:function(){return Re(this,e,Oe),!1},trigger:function(){return Re(this,e),!0},_default:function(){return!0},delegateType:t}})),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){E.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||E.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}})),E.fn.extend({on:function(e,t,n,r){return Ae(this,e,t,n,r)},one:function(e,t,n,r){return Ae(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,E(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!==typeof t||(n=t,t=void 0),!1===n&&(n=we),this.each((function(){E.event.remove(this,e,n,t)}))}});var xe=/<script|<style|<link/i,Le=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Pe(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&E(e).children("tbody")[0]||e}function je(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ue(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ge(e,t){var n,r,i,o,a,s,c;if(1===t.nodeType){if(te.hasData(e)&&(o=te.get(e),c=o.events,c))for(i in te.remove(t,"handle events"),c)for(n=0,r=c[i].length;n<r;n++)E.event.add(t,i,c[i][n]);ne.hasData(e)&&(a=ne.access(e),s=E.extend({},a),ne.set(t,s))}}function Ve(e,t){var n=t.nodeName.toLowerCase();"input"===n&&_e.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Fe(e,t,n,r){t=u(t);var i,o,a,s,c,l,d=0,p=e.length,f=p-1,h=t[0],g=_(h);if(g||p>1&&"string"===typeof h&&!m.checkClone&&Le.test(h))return e.each((function(i){var o=e.eq(i);g&&(t[0]=h.call(this,i,o.html())),Fe(o,t,n,r)}));if(p&&(i=Ee(t,e[0].ownerDocument,!1,e,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(a=E.map(Te(i,"script"),je),s=a.length;d<p;d++)c=i,d!==f&&(c=E.clone(c,!0,!0),s&&E.merge(a,Te(c,"script"))),n.call(e[d],c,d);if(s)for(l=a[a.length-1].ownerDocument,E.map(a,Ue),d=0;d<s;d++)c=a[d],be.test(c.type||"")&&!te.access(c,"globalEval")&&E.contains(l,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?E._evalUrl&&!c.noModule&&E._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},l):T(c.textContent.replace(Ne,""),c,l))}return e}function Be(e,t,n){for(var r,i=t?E.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||E.cleanData(Te(r)),r.parentNode&&(n&&de(r)&&Ce(Te(r,"script")),r.parentNode.removeChild(r));return e}E.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),c=de(e);if(!m.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!E.isXMLDoc(e))for(a=Te(s),o=Te(e),r=0,i=o.length;r<i;r++)Ve(o[r],a[r]);if(t)if(n)for(o=o||Te(e),a=a||Te(s),r=0,i=o.length;r<i;r++)Ge(o[r],a[r]);else Ge(e,s);return a=Te(s,"script"),a.length>0&&Ce(a,!c&&Te(e,"script")),s},cleanData:function(e){for(var t,n,r,i=E.event.special,o=0;void 0!==(n=e[o]);o++)if(Q(n)){if(t=n[te.expando]){if(t.events)for(r in t.events)i[r]?E.event.remove(n,r):E.removeEvent(n,r,t.handle);n[te.expando]=void 0}n[ne.expando]&&(n[ne.expando]=void 0)}}}),E.fn.extend({detach:function(e){return Be(this,e,!0)},remove:function(e){return Be(this,e)},text:function(e){return Y(this,(function(e){return void 0===e?E.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Fe(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Pe(this,e);t.appendChild(e)}}))},prepend:function(){return Fe(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Pe(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Fe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Fe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(E.cleanData(Te(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return E.clone(this,e,t)}))},html:function(e){return Y(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"===typeof e&&!xe.test(e)&&!Ie[(ye.exec(e)||["",""])[1].toLowerCase()]){e=E.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},1===t.nodeType&&(E.cleanData(Te(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Fe(this,arguments,(function(t){var n=this.parentNode;E.inArray(this,e)<0&&(E.cleanData(Te(this)),n&&n.replaceChild(t,this))}),e)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){E.fn[e]=function(e){for(var n,r=[],i=E(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),E(i[a])[t](n),l.apply(r,n.get());return this.pushStack(r)}}));var qe=new RegExp("^("+se+")(?!px)[a-z%]+$","i"),He=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},ze=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ke=new RegExp(ue.join("|"),"i");function We(e,t,n){var r,i,o,a,s=e.style;return n=n||He(e),n&&(a=n.getPropertyValue(t)||n[t],""!==a||de(e)||(a=E.style(e,t)),!m.pixelBoxStyles()&&qe.test(a)&&Ke.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Ye(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}(function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",le.appendChild(u).appendChild(l);var e=n.getComputedStyle(l);r="1%"!==e.top,c=12===t(e.marginLeft),l.style.right="60%",a=36===t(e.right),i=36===t(e.width),l.style.position="absolute",o=12===t(l.offsetWidth/3),le.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var r,i,o,a,s,c,u=b.createElement("div"),l=b.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===l.style.backgroundClip,E.extend(m,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),c},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,t,r,i;return null==s&&(e=b.createElement("table"),t=b.createElement("tr"),r=b.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",r.style.height="9px",r.style.display="block",le.appendChild(e).appendChild(t).appendChild(r),i=n.getComputedStyle(t),s=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===t.offsetHeight,le.removeChild(e)),s}}))})();var Je=["Webkit","Moz","ms"],$e=b.createElement("div").style,Xe={};function Ze(e){var t=e[0].toUpperCase()+e.slice(1),n=Je.length;while(n--)if(e=Je[n]+t,e in $e)return e}function Qe(e){var t=E.cssProps[e]||Xe[e];return t||(e in $e?e:Xe[e]=Ze(e)||e)}var et=/^(none|table(?!-c[ea]).+)/,tt=/^--/,nt={position:"absolute",visibility:"hidden",display:"block"},rt={letterSpacing:"0",fontWeight:"400"};function it(e,t,n){var r=ce.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function ot(e,t,n,r,i,o){var a="width"===t?1:0,s=0,c=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(c+=E.css(e,n+ue[a],!0,i)),r?("content"===n&&(c-=E.css(e,"padding"+ue[a],!0,i)),"margin"!==n&&(c-=E.css(e,"border"+ue[a]+"Width",!0,i))):(c+=E.css(e,"padding"+ue[a],!0,i),"padding"!==n?c+=E.css(e,"border"+ue[a]+"Width",!0,i):s+=E.css(e,"border"+ue[a]+"Width",!0,i));return!r&&o>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-c-s-.5))||0),c}function at(e,t,n){var r=He(e),i=!m.boxSizingReliable()||n,o=i&&"border-box"===E.css(e,"boxSizing",!1,r),a=o,s=We(e,t,r),c="offset"+t[0].toUpperCase()+t.slice(1);if(qe.test(s)){if(!n)return s;s="auto"}return(!m.boxSizingReliable()&&o||!m.reliableTrDimensions()&&A(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===E.css(e,"display",!1,r))&&e.getClientRects().length&&(o="border-box"===E.css(e,"boxSizing",!1,r),a=c in e,a&&(s=e[c])),s=parseFloat(s)||0,s+ot(e,t,n||(o?"border":"content"),a,r,s)+"px"}function st(e,t,n,r,i){return new st.prototype.init(e,t,n,r,i)}E.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=Z(t),c=tt.test(t),u=e.style;if(c||(t=Qe(s)),a=E.cssHooks[t]||E.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:u[t];o=typeof n,"string"===o&&(i=ce.exec(n))&&i[1]&&(n=he(e,t,i),o="number"),null!=n&&n===n&&("number"!==o||c||(n+=i&&i[3]||(E.cssNumber[s]?"":"px")),m.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(c?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,r){var i,o,a,s=Z(t),c=tt.test(t);return c||(t=Qe(s)),a=E.cssHooks[t]||E.cssHooks[s],a&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=We(e,t,r)),"normal"===i&&t in rt&&(i=rt[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),E.each(["height","width"],(function(e,t){E.cssHooks[t]={get:function(e,n,r){if(n)return!et.test(E.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?at(e,t,r):ze(e,nt,(function(){return at(e,t,r)}))},set:function(e,n,r){var i,o=He(e),a=!m.scrollboxSize()&&"absolute"===o.position,s=a||r,c=s&&"border-box"===E.css(e,"boxSizing",!1,o),u=r?ot(e,t,r,c,o):0;return c&&a&&(u-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-ot(e,t,"border",!1,o)-.5)),u&&(i=ce.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=E.css(e,t)),it(e,n,u)}}})),E.cssHooks.marginLeft=Ye(m.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-ze(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),E.each({margin:"",padding:"",border:"Width"},(function(e,t){E.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"===typeof n?n.split(" "):[n];r<4;r++)i[e+ue[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(E.cssHooks[e+t].set=it)})),E.fn.extend({css:function(e,t){return Y(this,(function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=He(e),i=t.length;a<i;a++)o[t[a]]=E.css(e,t[a],!1,r);return o}return void 0!==n?E.style(e,t,n):E.css(e,t)}),e,t,arguments.length>1)}}),E.Tween=st,st.prototype={constructor:st,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||E.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(E.cssNumber[n]?"":"px")},cur:function(){var e=st.propHooks[this.prop];return e&&e.get?e.get(this):st.propHooks._default.get(this)},run:function(e){var t,n=st.propHooks[this.prop];return this.options.duration?this.pos=t=E.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):st.propHooks._default.set(this),this}},st.prototype.init.prototype=st.prototype,st.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=E.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){E.fx.step[e.prop]?E.fx.step[e.prop](e):1!==e.elem.nodeType||!E.cssHooks[e.prop]&&null==e.elem.style[Qe(e.prop)]?e.elem[e.prop]=e.now:E.style(e.elem,e.prop,e.now+e.unit)}}},st.propHooks.scrollTop=st.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},E.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},E.fx=st.prototype.init,E.fx.step={};var ct,ut,lt=/^(?:toggle|show|hide)$/,dt=/queueHooks$/;function pt(){ut&&(!1===b.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(pt):n.setTimeout(pt,E.fx.interval),E.fx.tick())}function ft(){return n.setTimeout((function(){ct=void 0})),ct=Date.now()}function ht(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)n=ue[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function gt(e,t,n){for(var r,i=(_t.tweeners[t]||[]).concat(_t.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function vt(e,t,n){var r,i,o,a,s,c,u,l,d="width"in t||"height"in t,p=this,f={},h=e.style,g=e.nodeType&&fe(e),v=te.get(e,"fxshow");for(r in n.queue||(a=E._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always((function(){p.always((function(){a.unqueued--,E.queue(e,"fx").length||a.empty.fire()}))}))),t)if(i=t[r],lt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}f[r]=v&&v[r]||E.style(e,r)}if(c=!E.isEmptyObject(t),c||!E.isEmptyObject(f))for(r in d&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],u=v&&v.display,null==u&&(u=te.get(e,"display")),l=E.css(e,"display"),"none"===l&&(u?l=u:(me([e],!0),u=e.style.display||u,l=E.css(e,"display"),me([e]))),("inline"===l||"inline-block"===l&&null!=u)&&"none"===E.css(e,"float")&&(c||(p.done((function(){h.display=u})),null==u&&(l=h.display,u="none"===l?"":l)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always((function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}))),c=!1,f)c||(v?"hidden"in v&&(g=v.hidden):v=te.access(e,"fxshow",{display:u}),o&&(v.hidden=!g),g&&me([e],!0),p.done((function(){for(r in g||me([e]),te.remove(e,"fxshow"),f)E.style(e,r,f[r])}))),c=gt(g?v[r]:0,r,p),r in v||(v[r]=c.start,g&&(c.end=c.start,c.start=0))}function mt(e,t){var n,r,i,o,a;for(n in e)if(r=Z(n),i=t[r],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=E.cssHooks[r],a&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}function _t(e,t,n){var r,i,o=0,a=_t.prefilters.length,s=E.Deferred().always((function(){delete c.elem})),c=function(){if(i)return!1;for(var t=ct||ft(),n=Math.max(0,u.startTime+u.duration-t),r=n/u.duration||0,o=1-r,a=0,c=u.tweens.length;a<c;a++)u.tweens[a].run(o);return s.notifyWith(e,[u,o,n]),o<1&&c?n:(c||s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:E.extend({},t),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},n),originalProperties:t,originalOptions:n,startTime:ct||ft(),duration:n.duration,tweens:[],createTween:function(t,n){var r=E.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),l=u.props;for(mt(l,u.opts.specialEasing);o<a;o++)if(r=_t.prefilters[o].call(u,e,l,u.opts),r)return _(r.stop)&&(E._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return E.map(l,gt,u),_(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),E.fx.timer(E.extend(c,{elem:e,anim:u,queue:u.opts.queue})),u}E.Animation=E.extend(_t,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return he(n.elem,e,ce.exec(t),n),n}]},tweener:function(e,t){_(e)?(t=e,e=["*"]):e=e.match(V);for(var n,r=0,i=e.length;r<i;r++)n=e[r],_t.tweeners[n]=_t.tweeners[n]||[],_t.tweeners[n].unshift(t)},prefilters:[vt],prefilter:function(e,t){t?_t.prefilters.unshift(e):_t.prefilters.push(e)}}),E.speed=function(e,t,n){var r=e&&"object"===typeof e?E.extend({},e):{complete:n||!n&&t||_(e)&&e,duration:e,easing:n&&t||t&&!_(t)&&t};return E.fx.off?r.duration=0:"number"!==typeof r.duration&&(r.duration in E.fx.speeds?r.duration=E.fx.speeds[r.duration]:r.duration=E.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){_(r.old)&&r.old.call(this),r.queue&&E.dequeue(this,r.queue)},r},E.fn.extend({fadeTo:function(e,t,n,r){return this.filter(fe).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=E.isEmptyObject(e),o=E.speed(t,n,r),a=function(){var t=_t(this,E.extend({},e),o);(i||te.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!==typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",o=E.timers,a=te.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&dt.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||E.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=te.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=E.timers,a=r?r.length:0;for(n.finish=!0,E.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),E.each(["toggle","show","hide"],(function(e,t){var n=E.fn[t];E.fn[t]=function(e,r,i){return null==e||"boolean"===typeof e?n.apply(this,arguments):this.animate(ht(t,!0),e,r,i)}})),E.each({slideDown:ht("show"),slideUp:ht("hide"),slideToggle:ht("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){E.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),E.timers=[],E.fx.tick=function(){var e,t=0,n=E.timers;for(ct=Date.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||E.fx.stop(),ct=void 0},E.fx.timer=function(e){E.timers.push(e),E.fx.start()},E.fx.interval=13,E.fx.start=function(){ut||(ut=!0,pt())},E.fx.stop=function(){ut=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(e,t){return e=E.fx&&E.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,r){var i=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(i)}}))},function(){var e=b.createElement("input"),t=b.createElement("select"),n=t.appendChild(b.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=n.selected,e=b.createElement("input"),e.value="t",e.type="radio",m.radioValue="t"===e.value}();var yt,bt=E.expr.attrHandle;E.fn.extend({attr:function(e,t){return Y(this,E.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){E.removeAttr(this,e)}))}}),E.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"===typeof e.getAttribute?E.prop(e,t,n):(1===o&&E.isXMLDoc(e)||(i=E.attrHooks[t.toLowerCase()]||(E.expr.match.bool.test(t)?yt:void 0)),void 0!==n?null===n?void E.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=E.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(V);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),yt={set:function(e,t,n){return!1===t?E.removeAttr(e,n):e.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=bt[t]||E.find.attr;bt[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=bt[a],bt[a]=i,i=null!=n(e,t,r)?a:null,bt[a]=o),i}}));var It=/^(?:input|select|textarea|button)$/i,Tt=/^(?:a|area)$/i;function Ct(e){var t=e.match(V)||[];return t.join(" ")}function St(e){return e.getAttribute&&e.getAttribute("class")||""}function Et(e){return Array.isArray(e)?e:"string"===typeof e&&e.match(V)||[]}E.fn.extend({prop:function(e,t){return Y(this,E.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[E.propFix[e]||e]}))}}),E.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&E.isXMLDoc(e)||(t=E.propFix[t]||t,i=E.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=E.find.attr(e,"tabindex");return t?parseInt(t,10):It.test(e.nodeName)||Tt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(E.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){E.propFix[this.toLowerCase()]=this})),E.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,c=0;if(_(e))return this.each((function(t){E(this).addClass(e.call(this,t,St(this)))}));if(t=Et(e),t.length)while(n=this[c++])if(i=St(n),r=1===n.nodeType&&" "+Ct(i)+" ",r){a=0;while(o=t[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");s=Ct(r),i!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,c=0;if(_(e))return this.each((function(t){E(this).removeClass(e.call(this,t,St(this)))}));if(!arguments.length)return this.attr("class","");if(t=Et(e),t.length)while(n=this[c++])if(i=St(n),r=1===n.nodeType&&" "+Ct(i)+" ",r){a=0;while(o=t[a++])while(r.indexOf(" "+o+" ")>-1)r=r.replace(" "+o+" "," ");s=Ct(r),i!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"===typeof t&&r?t?this.addClass(e):this.removeClass(e):_(e)?this.each((function(n){E(this).toggleClass(e.call(this,n,St(this),t),t)})):this.each((function(){var t,i,o,a;if(r){i=0,o=E(this),a=Et(e);while(t=a[i++])o.hasClass(t)?o.removeClass(t):o.addClass(t)}else void 0!==e&&"boolean"!==n||(t=St(this),t&&te.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":te.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&(" "+Ct(St(n))+" ").indexOf(t)>-1)return!0;return!1}});var Mt=/\r/g;E.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=_(e),this.each((function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,E(this).val()):e,null==i?i="":"number"===typeof i?i+="":Array.isArray(i)&&(i=E.map(i,(function(e){return null==e?"":e+""}))),t=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=E.valHooks[i.type]||E.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"===typeof n?n.replace(Mt,""):null==n?"":n)):void 0}}),E.extend({valHooks:{option:{get:function(e){var t=E.find.attr(e,"value");return null!=t?t:Ct(E.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],c=a?o+1:i.length;for(r=o<0?c:a?o:0;r<c;r++)if(n=i[r],(n.selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=E(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=E.makeArray(t),a=i.length;while(a--)r=i[a],(r.selected=E.inArray(E.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),E.each(["radio","checkbox"],(function(){E.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=E.inArray(E(e).val(),t)>-1}},m.checkOn||(E.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),m.focusin="onfocusin"in n;var kt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};E.extend(E.event,{trigger:function(e,t,r,i){var o,a,s,c,u,l,d,p,f=[r||b],g=h.call(e,"type")?e.type:e,v=h.call(e,"namespace")?e.namespace.split("."):[];if(a=p=s=r=r||b,3!==r.nodeType&&8!==r.nodeType&&!kt.test(g+E.event.triggered)&&(g.indexOf(".")>-1&&(v=g.split("."),g=v.shift(),v.sort()),u=g.indexOf(":")<0&&"on"+g,e=e[E.expando]?e:new E.Event(g,"object"===typeof e&&e),e.isTrigger=i?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:E.makeArray(t,[e]),d=E.event.special[g]||{},i||!d.trigger||!1!==d.trigger.apply(r,t))){if(!i&&!d.noBubble&&!y(r)){for(c=d.delegateType||g,kt.test(c+g)||(a=a.parentNode);a;a=a.parentNode)f.push(a),s=a;s===(r.ownerDocument||b)&&f.push(s.defaultView||s.parentWindow||n)}o=0;while((a=f[o++])&&!e.isPropagationStopped())p=a,e.type=o>1?c:d.bindType||g,l=(te.get(a,"events")||Object.create(null))[e.type]&&te.get(a,"handle"),l&&l.apply(a,t),l=u&&a[u],l&&l.apply&&Q(a)&&(e.result=l.apply(a,t),!1===e.result&&e.preventDefault());return e.type=g,i||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(f.pop(),t)||!Q(r)||u&&_(r[g])&&!y(r)&&(s=r[u],s&&(r[u]=null),E.event.triggered=g,e.isPropagationStopped()&&p.addEventListener(g,wt),r[g](),e.isPropagationStopped()&&p.removeEventListener(g,wt),E.event.triggered=void 0,s&&(r[u]=s)),e.result}},simulate:function(e,t,n){var r=E.extend(new E.Event,n,{type:e,isSimulated:!0});E.event.trigger(r,null,t)}}),E.fn.extend({trigger:function(e,t){return this.each((function(){E.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return E.event.trigger(e,t,n,!0)}}),m.focusin||E.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){E.event.simulate(t,e.target,E.event.fix(e))};E.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=te.access(r,t);i||r.addEventListener(e,n,!0),te.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=te.access(r,t)-1;i?te.access(r,t,i):(r.removeEventListener(e,n,!0),te.remove(r,t))}}}));var Ot=n.location,Dt={guid:Date.now()},At=/\?/;E.parseXML=function(e){var t,r;if(!e||"string"!==typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(i){}return r=t&&t.getElementsByTagName("parsererror")[0],t&&!r||E.error("Invalid XML: "+(r?E.map(r.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var Rt=/\[\]$/,xt=/\r?\n/g,Lt=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;function Pt(e,t,n,r){var i;if(Array.isArray(t))E.each(t,(function(t,i){n||Rt.test(e)?r(e,i):Pt(e+"["+("object"===typeof i&&null!=i?t:"")+"]",i,n,r)}));else if(n||"object"!==C(t))r(e,t);else for(i in t)Pt(e+"["+i+"]",t[i],n,r)}E.param=function(e,t){var n,r=[],i=function(e,t){var n=_(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!E.isPlainObject(e))E.each(e,(function(){i(this.name,this.value)}));else for(n in e)Pt(n,e[n],t,i);return r.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=E.prop(this,"elements");return e?E.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!E(this).is(":disabled")&&Nt.test(this.nodeName)&&!Lt.test(e)&&(this.checked||!_e.test(e))})).map((function(e,t){var n=E(this).val();return null==n?null:Array.isArray(n)?E.map(n,(function(e){return{name:t.name,value:e.replace(xt,"\r\n")}})):{name:t.name,value:n.replace(xt,"\r\n")}})).get()}});var jt=/%20/g,Ut=/#.*$/,Gt=/([?&])_=[^&]*/,Vt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ft=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Bt=/^(?:GET|HEAD)$/,qt=/^\/\//,Ht={},zt={},Kt="*/".concat("*"),Wt=b.createElement("a");function Yt(e){return function(t,n){"string"!==typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(V)||[];if(_(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Jt(e,t,n,r){var i={},o=e===zt;function a(s){var c;return i[s]=!0,E.each(e[s]||[],(function(e,s){var u=s(t,n,r);return"string"!==typeof u||o||i[u]?o?!(c=u):void 0:(t.dataTypes.unshift(u),a(u),!1)})),c}return a(t.dataTypes[0])||!i["*"]&&a("*")}function $t(e,t){var n,r,i=E.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&E.extend(!0,e,r),e}function Xt(e,t,n){var r,i,o,a,s=e.contents,c=e.dataTypes;while("*"===c[0])c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){c.unshift(i);break}if(c[0]in n)o=c[0];else{for(i in n){if(!c[0]||e.converters[i+" "+c[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==c[0]&&c.unshift(o),n[o]}function Zt(e,t,n,r){var i,o,a,s,c,u={},l=e.dataTypes.slice();if(l[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];o=l.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=l.shift(),o)if("*"===o)o=c;else if("*"!==c&&c!==o){if(a=u[c+" "+o]||u["* "+o],!a)for(i in u)if(s=i.split(" "),s[1]===o&&(a=u[c+" "+s[0]]||u["* "+s[0]],a)){!0===a?a=u[i]:!0!==u[i]&&(o=s[0],l.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}Wt.href=Ot.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ot.href,type:"GET",isLocal:Ft.test(Ot.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?$t($t(e,E.ajaxSettings),t):$t(E.ajaxSettings,e)},ajaxPrefilter:Yt(Ht),ajaxTransport:Yt(zt),ajax:function(e,t){"object"===typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,a,s,c,u,l,d,p,f=E.ajaxSetup({},t),h=f.context||f,g=f.context&&(h.nodeType||h.jquery)?E(h):E.event,v=E.Deferred(),m=E.Callbacks("once memory"),_=f.statusCode||{},y={},I={},T="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(u){if(!a){a={};while(t=Vt.exec(o))a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(e,t){return null==u&&(e=I[e.toLowerCase()]=I[e.toLowerCase()]||e,y[e]=t),this},overrideMimeType:function(e){return null==u&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)C.always(e[C.status]);else for(t in e)_[t]=[_[t],e[t]];return this},abort:function(e){var t=e||T;return r&&r.abort(t),S(0,t),this}};if(v.promise(C),f.url=((e||f.url||Ot.href)+"").replace(qt,Ot.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(V)||[""],null==f.crossDomain){c=b.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=Wt.protocol+"//"+Wt.host!==c.protocol+"//"+c.host}catch(M){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!==typeof f.data&&(f.data=E.param(f.data,f.traditional)),Jt(Ht,f,t,C),u)return C;for(d in l=E.event&&f.global,l&&0===E.active++&&E.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Bt.test(f.type),i=f.url.replace(Ut,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(jt,"+")):(p=f.url.slice(i.length),f.data&&(f.processData||"string"===typeof f.data)&&(i+=(At.test(i)?"&":"?")+f.data,delete f.data),!1===f.cache&&(i=i.replace(Gt,"$1"),p=(At.test(i)?"&":"?")+"_="+Dt.guid+++p),f.url=i+p),f.ifModified&&(E.lastModified[i]&&C.setRequestHeader("If-Modified-Since",E.lastModified[i]),E.etag[i]&&C.setRequestHeader("If-None-Match",E.etag[i])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&C.setRequestHeader("Content-Type",f.contentType),C.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Kt+"; q=0.01":""):f.accepts["*"]),f.headers)C.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(!1===f.beforeSend.call(h,C,f)||u))return C.abort();if(T="abort",m.add(f.complete),C.done(f.success),C.fail(f.error),r=Jt(zt,f,t,C),r){if(C.readyState=1,l&&g.trigger("ajaxSend",[C,f]),u)return C;f.async&&f.timeout>0&&(s=n.setTimeout((function(){C.abort("timeout")}),f.timeout));try{u=!1,r.send(y,S)}catch(M){if(u)throw M;S(-1,M)}}else S(-1,"No Transport");function S(e,t,a,c){var d,p,y,b,I,T=t;u||(u=!0,s&&n.clearTimeout(s),r=void 0,o=c||"",C.readyState=e>0?4:0,d=e>=200&&e<300||304===e,a&&(b=Xt(f,C,a)),!d&&E.inArray("script",f.dataTypes)>-1&&E.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),b=Zt(f,b,C,d),d?(f.ifModified&&(I=C.getResponseHeader("Last-Modified"),I&&(E.lastModified[i]=I),I=C.getResponseHeader("etag"),I&&(E.etag[i]=I)),204===e||"HEAD"===f.type?T="nocontent":304===e?T="notmodified":(T=b.state,p=b.data,y=b.error,d=!y)):(y=T,!e&&T||(T="error",e<0&&(e=0))),C.status=e,C.statusText=(t||T)+"",d?v.resolveWith(h,[p,T,C]):v.rejectWith(h,[C,T,y]),C.statusCode(_),_=void 0,l&&g.trigger(d?"ajaxSuccess":"ajaxError",[C,f,d?p:y]),m.fireWith(h,[C,T]),l&&(g.trigger("ajaxComplete",[C,f]),--E.active||E.event.trigger("ajaxStop")))}return C},getJSON:function(e,t,n){return E.get(e,t,n,"json")},getScript:function(e,t){return E.get(e,void 0,t,"script")}}),E.each(["get","post"],(function(e,t){E[t]=function(e,n,r,i){return _(n)&&(i=i||r,r=n,n=void 0),E.ajax(E.extend({url:e,type:t,dataType:i,data:n,success:r},E.isPlainObject(e)&&e))}})),E.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),E._evalUrl=function(e,t,n){return E.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){E.globalEval(e,t,n)}})},E.fn.extend({wrapAll:function(e){var t;return this[0]&&(_(e)&&(e=e.call(this[0])),t=E(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return _(e)?this.each((function(t){E(this).wrapInner(e.call(this,t))})):this.each((function(){var t=E(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=_(e);return this.each((function(n){E(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){E(this).replaceWith(this.childNodes)})),this}}),E.expr.pseudos.hidden=function(e){return!E.expr.pseudos.visible(e)},E.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Qt={0:200,1223:204},en=E.ajaxSettings.xhr();m.cors=!!en&&"withCredentials"in en,m.ajax=en=!!en,E.ajaxTransport((function(e){var t,r;if(m.cors||en&&!e.crossDomain)return{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);t=function(e){return function(){t&&(t=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!==typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Qt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!==typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),r=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout((function(){t&&r()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(c){if(t)throw c}},abort:function(){t&&t()}}})),E.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return E.globalEval(e),e}}}),E.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),E.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=E("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),b.head.appendChild(t[0])},abort:function(){n&&n()}}}));var tn=[],nn=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=tn.pop()||E.expando+"_"+Dt.guid++;return this[e]=!0,e}}),E.ajaxPrefilter("json jsonp",(function(e,t,r){var i,o,a,s=!1!==e.jsonp&&(nn.test(e.url)?"url":"string"===typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=_(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(nn,"$1"+i):!1!==e.jsonp&&(e.url+=(At.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||E.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=n[i],n[i]=function(){a=arguments},r.always((function(){void 0===o?E(n).removeProp(i):n[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,tn.push(i)),a&&_(o)&&o(a[0]),a=o=void 0})),"script"})),m.createHTMLDocument=function(){var e=b.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),E.parseHTML=function(e,t,n){return"string"!==typeof e?[]:("boolean"===typeof t&&(n=t,t=!1),t||(m.createHTMLDocument?(t=b.implementation.createHTMLDocument(""),r=t.createElement("base"),r.href=b.location.href,t.head.appendChild(r)):t=b),i=R.exec(e),o=!n&&[],i?[t.createElement(i[1])]:(i=Ee([e],t,o),o&&o.length&&E(o).remove(),E.merge([],i.childNodes)));var r,i,o},E.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=Ct(e.slice(s)),e=e.slice(0,s)),_(t)?(n=t,t=void 0):t&&"object"===typeof t&&(i="POST"),a.length>0&&E.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){o=arguments,a.html(r?E("<div>").append(E.parseHTML(e)).find(r):e)})).always(n&&function(e,t){a.each((function(){n.apply(this,o||[e.responseText,t,e])}))}),this},E.expr.pseudos.animated=function(e){return E.grep(E.timers,(function(t){return e===t.elem})).length},E.offset={setOffset:function(e,t,n){var r,i,o,a,s,c,u,l=E.css(e,"position"),d=E(e),p={};"static"===l&&(e.style.position="relative"),s=d.offset(),o=E.css(e,"top"),c=E.css(e,"left"),u=("absolute"===l||"fixed"===l)&&(o+c).indexOf("auto")>-1,u?(r=d.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(c)||0),_(t)&&(t=t.call(e,n,E.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+i),"using"in t?t.using.call(e,p):d.css(p)}},E.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){E.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===E.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===E.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&(i=E(e).offset(),i.top+=E.css(e,"borderTopWidth",!0),i.left+=E.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-E.css(r,"marginTop",!0),left:t.left-i.left-E.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){var e=this.offsetParent;while(e&&"static"===E.css(e,"position"))e=e.offsetParent;return e||le}))}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;E.fn[e]=function(r){return Y(this,(function(e,r,i){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i}),e,r,arguments.length)}})),E.each(["top","left"],(function(e,t){E.cssHooks[t]=Ye(m.pixelPosition,(function(e,n){if(n)return n=We(e,t),qe.test(n)?E(e).position()[t]+"px":n}))})),E.each({Height:"height",Width:"width"},(function(e,t){E.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){E.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!==typeof i),s=n||(!0===i||!0===o?"margin":"border");return Y(this,(function(t,n,i){var o;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?E.css(t,n,s):E.style(t,n,i,s)}),t,a?i:void 0,a)}}))})),E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){E.fn[t]=function(e){return this.on(t,e)}})),E.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){E.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var rn=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;E.proxy=function(e,t){var n,r,i;if("string"===typeof t&&(n=e[t],t=e,e=n),_(e))return r=c.call(arguments,2),i=function(){return e.apply(t||this,r.concat(c.call(arguments)))},i.guid=e.guid=e.guid||E.guid++,i},E.holdReady=function(e){e?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=A,E.isFunction=_,E.isWindow=y,E.camelCase=Z,E.type=C,E.now=Date.now,E.isNumeric=function(e){var t=E.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},E.trim=function(e){return null==e?"":(e+"").replace(rn,"")},r=[],i=function(){return E}.apply(t,r),void 0===i||(e.exports=i);var on=n.jQuery,an=n.$;return E.noConflict=function(e){return n.$===E&&(n.$=an),e&&n.jQuery===E&&(n.jQuery=on),E},"undefined"===typeof o&&(n.jQuery=n.$=E),E}))},1276:function(e,t,n){"use strict";var r=n("2ba4"),i=n("c65b"),o=n("e330"),a=n("d784"),s=n("44e7"),c=n("825a"),u=n("1d80"),l=n("4840"),d=n("8aa5"),p=n("50c4"),f=n("577e"),h=n("dc4a"),g=n("4dae"),v=n("14c3"),m=n("9263"),_=n("9f7f"),y=n("d039"),b=_.UNSUPPORTED_Y,I=4294967295,T=Math.min,C=[].push,S=o(/./.exec),E=o(C),M=o("".slice),k=!y((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));a("split",(function(e,t,n){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var o=f(u(this)),a=void 0===n?I:n>>>0;if(0===a)return[];if(void 0===e)return[o];if(!s(e))return i(t,o,e,a);var c,l,d,p=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),v=0,_=new RegExp(e.source,h+"g");while(c=i(m,_,o)){if(l=_.lastIndex,l>v&&(E(p,M(o,v,c.index)),c.length>1&&c.index<o.length&&r(C,p,g(c,1)),d=c[0].length,v=l,p.length>=a))break;_.lastIndex===c.index&&_.lastIndex++}return v===o.length?!d&&S(_,"")||E(p,""):E(p,M(o,v)),p.length>a?g(p,0,a):p}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:i(t,this,e,n)}:t,[function(t,n){var r=u(this),a=void 0==t?void 0:h(t,e);return a?i(a,t,r,n):i(o,f(r),t,n)},function(e,r){var i=c(this),a=f(e),s=n(o,i,a,r,o!==t);if(s.done)return s.value;var u=l(i,RegExp),h=i.unicode,g=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(b?"g":"y"),m=new u(b?"^(?:"+i.source+")":i,g),_=void 0===r?I:r>>>0;if(0===_)return[];if(0===a.length)return null===v(m,a)?[a]:[];var y=0,C=0,S=[];while(C<a.length){m.lastIndex=b?0:C;var k,w=v(m,b?M(a,C):a);if(null===w||(k=T(p(m.lastIndex+(b?C:0)),a.length))===y)C=d(a,C,h);else{if(E(S,M(a,y,C)),S.length===_)return S;for(var O=1;O<=w.length-1;O++)if(E(S,w[O]),S.length===_)return S;C=y=k}}return E(S,M(a,y)),S}]}),!k,b)},"13d5":function(e,t,n){"use strict";var r=n("23e7"),i=n("d58f").left,o=n("a640"),a=n("2d00"),s=n("605d"),c=o("reduce"),u=!s&&a>79&&a<83;r({target:"Array",proto:!0,forced:!c||u},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},"14c3":function(e,t,n){var r=n("da84"),i=n("c65b"),o=n("825a"),a=n("1626"),s=n("c6b6"),c=n("9263"),u=r.TypeError;e.exports=function(e,t){var n=e.exec;if(a(n)){var r=i(n,e,t);return null!==r&&o(r),r}if("RegExp"===s(e))return i(c,e,t);throw u("RegExp#exec called on incompatible receiver")}},"159b":function(e,t,n){var r=n("da84"),i=n("fdbc"),o=n("785a"),a=n("17c2"),s=n("9112"),c=function(e){if(e&&e.forEach!==a)try{s(e,"forEach",a)}catch(t){e.forEach=a}};for(var u in i)i[u]&&c(r[u]&&r[u].prototype);c(o)},1626:function(e,t){e.exports=function(e){return"function"==typeof e}},1703:function(e,t,n){},"17c2":function(e,t,n){"use strict";var r=n("b727").forEach,i=n("a640"),o=i("forEach");e.exports=o?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"19aa":function(e,t,n){var r=n("da84"),i=n("3a9b"),o=r.TypeError;e.exports=function(e,t){if(i(t,e))return e;throw o("Incorrect invocation")}},"1a04":function(e,t,n){},"1a2d":function(e,t,n){var r=n("e330"),i=n("7b0b"),o=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},"1be4":function(e,t,n){var r=n("d066");e.exports=r("document","documentElement")},"1bf2":function(e,t,n){var r=n("23e7"),i=n("56ef");r({target:"Reflect",stat:!0},{ownKeys:i})},"1c51":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n("7a23"),i=Symbol();function o(e){var t=Object(r["q"])(i,null);t&&Object(r["X"])(t,t=>{t&&e()})}},"1c7e":function(e,t,n){var r=n("b622"),i=r("iterator"),o=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){o=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(c){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(c){}return n}},"1cdc":function(e,t,n){var r=n("342f");e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},"1d1c":function(e,t,n){var r=n("23e7"),i=n("83ab"),o=n("37e8");r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperties:o})},"1d2b":function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},"1d80":function(e,t,n){var r=n("da84"),i=r.TypeError;e.exports=function(e){if(void 0==e)throw i("Can't call method on "+e);return e}},"1d82":function(e,t,n){},"1da1":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("d3b7");function r(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,c,"next",e)}function c(e){r(a,i,o,s,c,"throw",e)}s(void 0)}))}}},"1da4":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var r=n("7a23"),i=n("f344"),o=n("4eda");function a(){var e=Object(r["J"])({show:!1}),t=t=>{e.show=t},n=n=>{Object(i["a"])(e,n,{transitionAppear:!0}),t(!0)},a=()=>t(!1);return Object(o["a"])({open:n,close:a,toggle:t}),{open:n,close:a,state:e,toggle:t}}function s(e){var t=Object(r["f"])(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}},"1dde":function(e,t,n){var r=n("d039"),i=n("b622"),o=n("2d00"),a=i("species");e.exports=function(e){return o>=51||!r((function(){var t=[],n=t.constructor={};return n[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"1e52":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("7f9b"),i=n("7a23"),o=e=>{var t=Object(i["K"])();return Object(i["C"])(()=>Object(i["u"])(()=>{t.value=Object(r["m"])(e).height})),t}},"1f4d":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("7a23"),i=0;function o(){var e=Object(r["o"])(),{name:t="unknown"}=(null==e?void 0:e.type)||{};return t+"-"+ ++i}},"1f87":function(e,t,n){"use strict";n("68ef"),n("1d82")},2033:function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var r=n("7a23"),i=n("fe7e"),o=n("f691"),a=n("8405"),s=n("4a89"),c=n("8da3"),u=n("7e3e"),l=n("f344"),d=n("b1d2"),p=n("7f9b");function f(e,t,n){var r=0,i=e.scrollLeft,o=0===n?1:Math.round(1e3*n/16);function a(){e.scrollLeft+=(t-i)/o,++r<o&&Object(p["e"])(a)}a()}function h(e,t,n,r){var i=Object(s["c"])(e),o=i<t,a=0===n?1:Math.round(1e3*n/16),c=(t-i)/a;function u(){i+=c,(o&&i>t||!o&&i<t)&&(i=t),Object(s["h"])(e,i),o&&i<t||!o&&i>t?Object(p["e"])(u):r&&Object(p["e"])(r)}u()}var g=n("1f4d"),v=n("b070"),m=n("8217"),_=n("4eda"),y=n("1c51"),b=n("3104"),I=n("471a"),[T,C]=Object(i["a"])("tab"),S=Object(r["n"])({name:T,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:o["f"],isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,renderTitle:Function,inactiveColor:String,showZeroBadge:o["g"]},setup(e){var t=Object(r["e"])(()=>{var t={},{type:n,color:r,disabled:i,isActive:o,activeColor:a,inactiveColor:s}=e,c="card"===n;r&&c&&(t.borderColor=r,i||(o?t.backgroundColor=r:t.color=r));var u=o?a:s;return u&&(t.color=u),t}),n=()=>{var t=Object(r["m"])("span",{class:C("text",{ellipsis:!e.scrollable})},[e.renderTitle?e.renderTitle():e.title]);return e.dot||Object(c["b"])(e.badge)&&""!==e.badge?Object(r["m"])(I["a"],{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[t]}):t};return()=>Object(r["m"])("div",{id:e.id,role:"tab",class:[C({active:e.isActive,disabled:e.disabled})],style:t.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[n()])}}),E=n("5596"),[M,k]=Object(i["a"])("tabs"),w=Object(r["n"])({name:M,props:{count:Object(o["d"])(Number),inited:Boolean,animated:Boolean,duration:Object(o["d"])(o["f"]),swipeable:Boolean,lazyRender:Boolean,currentIndex:Object(o["d"])(Number)},emits:["change"],setup(e,t){var{emit:n,slots:i}=t,o=Object(r["K"])(),a=e=>n("change",e),s=()=>{var t=null==i.default?void 0:i.default();return e.animated||e.swipeable?Object(r["m"])(E["a"],{ref:o,loop:!1,class:k("track"),duration:1e3*+e.duration,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:a},{default:()=>[t]}):t},c=t=>{var n=o.value;n&&n.state.active!==t&&n.swipeTo(t,{immediate:!e.inited})};return Object(r["X"])(()=>e.currentIndex,c),Object(r["C"])(()=>{c(e.currentIndex)}),()=>Object(r["m"])("div",{class:k("content",{animated:e.animated||e.swipeable})},[s()])}}),[O,D]=Object(i["a"])("tabs"),A={type:Object(o["e"])("line"),color:String,border:Boolean,sticky:Boolean,active:Object(o["c"])(0),duration:Object(o["c"])(.3),animated:Boolean,ellipsis:o["g"],swipeable:Boolean,scrollspy:Boolean,offsetTop:Object(o["c"])(0),background:String,lazyRender:o["g"],lineWidth:o["f"],lineHeight:o["f"],beforeChange:Function,swipeThreshold:Object(o["c"])(5),titleActiveColor:String,titleInactiveColor:String},R=Symbol(O);t["b"]=Object(r["n"])({name:O,props:A,emits:["click","change","scroll","disabled","rendered","click-tab","update:active"],setup(e,t){var n,i,o,{emit:I,slots:T}=t,C=Object(r["K"])(),E=Object(r["K"])(),M=Object(r["K"])(),k=Object(g["a"])(),O=Object(p["n"])(C),[A,x]=Object(m["a"])(),{children:L,linkChildren:N}=Object(p["f"])(R),P=Object(r["J"])({inited:!1,position:"",lineStyle:{},currentIndex:-1}),j=Object(r["e"])(()=>L.length>e.swipeThreshold||!e.ellipsis),U=Object(r["e"])(()=>({borderColor:e.color,background:e.background})),G=(e,t)=>{var n;return null!=(n=e.name)?n:t},V=Object(r["e"])(()=>{var e=L[P.currentIndex];if(e)return G(e,P.currentIndex)}),F=Object(r["e"])(()=>Object(a["i"])(e.offsetTop)),B=Object(r["e"])(()=>e.sticky?F.value+n:0),q=t=>{var n=E.value,r=A.value;if(j.value&&n&&r&&r[P.currentIndex]){var i=r[P.currentIndex].$el,o=i.offsetLeft-(n.offsetWidth-i.offsetWidth)/2;f(n,o,t?0:+e.duration)}},H=()=>{var t=P.inited;Object(r["u"])(()=>{var n=A.value;if(n&&n[P.currentIndex]&&"line"===e.type&&!Object(s["d"])(C.value)){var r=n[P.currentIndex].$el,{lineWidth:i,lineHeight:o}=e,u=r.offsetLeft+r.offsetWidth/2,l={width:Object(a["a"])(i),backgroundColor:e.color,transform:"translateX("+u+"px) translateX(-50%)"};if(t&&(l.transitionDuration=e.duration+"s"),Object(c["b"])(o)){var d=Object(a["a"])(o);l.height=d,l.borderRadius=d}P.lineStyle=l}})},z=e=>{var t=e<P.currentIndex?-1:1;while(e>=0&&e<L.length){if(!L[e].disabled)return e;e+=t}},K=t=>{var n=z(t);if(Object(c["b"])(n)){var r=L[n],i=G(r,n),o=null!==P.currentIndex;P.currentIndex=n,i!==e.active&&(I("update:active",i),o&&I("change",i,r.title))}},W=e=>{var t=L.find((t,n)=>G(t,n)===e),n=t?L.indexOf(t):0;K(n)},Y=function(t){if(void 0===t&&(t=!1),e.scrollspy){var n=L[P.currentIndex].$el;if(n&&O.value){var r=Object(s["a"])(n,O.value)-B.value;i=!0,h(O.value,r,t?0:+e.duration,()=>{i=!1})}}},J=(t,n,r)=>{var{title:i,disabled:o}=L[n],a=G(L[n],n);o?I("disabled",a,i):(Object(u["a"])(e.beforeChange,{args:[a],done:()=>{K(n),Y()}}),I("click",a,i),Object(v["a"])(t)),I("click-tab",{name:a,title:i,event:r,disabled:o})},$=e=>{o=e.isFixed,I("scroll",e)},X=e=>{Object(r["u"])(()=>{W(e),Y(!0)})},Z=()=>{for(var e=0;e<L.length;e++){var{top:t}=Object(p["m"])(L[e].$el);if(t>B.value)return 0===e?0:e-1}return L.length-1},Q=()=>{if(e.scrollspy&&!i){var t=Z();K(t)}},ee=()=>L.map((t,n)=>Object(r["m"])(S,Object(r["t"])({id:k+"-"+n,ref:x(n),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,isActive:n===P.currentIndex,controls:t.id,scrollable:j.value,renderTitle:t.$slots.title,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:e=>J(t,n,e)},Object(l["e"])(t,["dot","badge","title","disabled","showZeroBadge"])),null)),te=()=>{var t,n,{type:i,border:o}=e;return Object(r["m"])("div",{ref:M,class:[D("wrap",{scrollable:j.value}),{[d["f"]]:"line"===i&&o}]},[Object(r["m"])("div",{ref:E,role:"tablist",class:D("nav",[i,{complete:j.value}]),style:U.value,"aria-orientation":"horizontal"},[null==(t=T["nav-left"])?void 0:t.call(T),ee(),"line"===i&&Object(r["m"])("div",{class:D("line"),style:P.lineStyle},null),null==(n=T["nav-right"])?void 0:n.call(T)])])};Object(r["X"])([()=>e.color,s["k"]],H),Object(r["X"])(()=>e.active,e=>{e!==V.value&&W(e)}),Object(r["X"])(()=>L.length,()=>{P.inited&&(W(e.active),H(),Object(r["u"])(()=>{q(!0)}))}),Object(r["X"])(()=>P.currentIndex,()=>{q(),H(),o&&!e.scrollspy&&Object(s["g"])(Math.ceil(Object(s["a"])(C.value)-F.value))});var ne=()=>{W(e.active),Object(r["u"])(()=>{P.inited=!0,M.value&&(n=Object(p["m"])(M.value).height),q(!0)})},re=(e,t)=>I("rendered",e,t);return Object(_["a"])({resize:H,scrollTo:X}),Object(r["x"])(H),Object(y["b"])(H),Object(p["d"])(ne),Object(p["j"])("scroll",Q,{target:O}),N({id:k,props:e,setLine:H,onRendered:re,currentName:V,scrollIntoView:q}),()=>{var t,n;return Object(r["m"])("div",{ref:C,class:D([e.type])},[e.sticky?Object(r["m"])(b["a"],{container:C.value,offsetTop:F.value,onScroll:$},{default:()=>[te(),null==(t=T["nav-bottom"])?void 0:t.call(T)]}):[te(),null==(n=T["nav-bottom"])?void 0:n.call(T)],Object(r["m"])(w,{count:L.length,inited:P.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:P.currentIndex,onChange:K},{default:()=>[null==T.default?void 0:T.default()]})])}}})},"21ab":function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f344"),s=n("f691"),c=n("8405"),u=n("b1d2"),l=n("be93"),d=n("7f9b"),p=n("b070"),f=n("ad06"),h=n("471a"),[g,v]=Object(o["a"])("grid-item"),m=Object(a["a"])({},p["b"],{dot:Boolean,text:String,icon:String,badge:s["f"],iconColor:String,iconPrefix:String}),_=Object(i["n"])({name:g,props:m,setup(e,t){var{slots:n}=t,{parent:r,index:o}=Object(d["l"])(l["a"]),a=Object(p["c"])();if(r){var s=Object(i["e"])(()=>{var{square:e,gutter:t,columnNum:n}=r.props,i=100/+n+"%",a={flexBasis:i};if(e)a.paddingTop=i;else if(t){var s=Object(c["a"])(t);a.paddingRight=s,o.value>=n&&(a.marginTop=s)}return a}),g=Object(i["e"])(()=>{var{square:e,gutter:t}=r.props;if(e&&t){var n=Object(c["a"])(t);return{right:n,bottom:n,height:"auto"}}}),m=()=>n.icon?Object(i["m"])(h["a"],{dot:e.dot,content:e.badge},{default:n.icon}):e.icon?Object(i["m"])(f["a"],{dot:e.dot,name:e.icon,size:r.props.iconSize,badge:e.badge,class:v("icon"),classPrefix:e.iconPrefix,color:e.iconColor},null):void 0,_=()=>n.text?n.text():e.text?Object(i["m"])("span",{class:v("text")},[e.text]):void 0,y=()=>n.default?n.default():[m(),_()];return()=>{var{center:e,border:t,square:n,gutter:o,reverse:c,direction:l,clickable:d}=r.props,p=[v("content",[l,{center:e,square:n,reverse:c,clickable:d,surround:t&&o}]),{[u["a"]]:t}];return Object(i["m"])("div",{class:[v({square:n})],style:s.value},[Object(i["m"])("div",{role:d?"button":void 0,class:p,style:g.value,tabindex:d?0:void 0,onClick:a},[y()])])}}}}),y=Object(r["a"])(_);t["a"]=y},2221:function(e,t,n){},2241:function(e,t,n){"use strict";var r,i=n("7a23"),o=n("f344"),a=n("c199"),s=n("1da4"),c=n("fe7e"),u=n("f691"),l=n("7e3e"),d=n("8da3"),p=n("b1d2"),f=n("8405"),h=n("f827"),g=n("e41f"),v=n("b650"),m=n("7f9b"),[_,y]=Object(c["a"])("action-bar"),b=Symbol(_),I={safeAreaInsetBottom:u["g"]},T=Object(i["n"])({name:_,props:I,setup(e,t){var{slots:n}=t,{linkChildren:r}=Object(m["f"])(b);return r(),()=>Object(i["m"])("div",{class:[y(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[null==n.default?void 0:n.default()])}}),C=Object(a["a"])(T),S=n("4eda"),E=n("b070"),[M,k]=Object(c["a"])("action-bar-button"),w=Object(o["a"])({},E["b"],{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean}),O=Object(i["n"])({name:M,props:w,setup(e,t){var{slots:n}=t,r=Object(E["c"])(),{parent:o,index:a}=Object(m["l"])(b),s=Object(i["e"])(()=>{if(o){var e=o.children[a.value-1];return!(e&&"isButton"in e)}}),c=Object(i["e"])(()=>{if(o){var e=o.children[a.value+1];return!(e&&"isButton"in e)}});return Object(S["a"])({isButton:!0}),()=>{var{type:t,icon:o,text:a,color:u,loading:l,disabled:d}=e;return Object(i["m"])(v["a"],{class:k([t,{last:c.value,first:s.value}]),size:"large",type:t,icon:o,color:u,loading:l,disabled:d,onClick:r},{default:()=>[n.default?n.default():a]})}}}),D=Object(a["a"])(O),[A,R,x]=Object(c["a"])("dialog"),L=Object(o["a"])({},h["b"],{title:String,theme:String,width:u["f"],message:[String,Function],callback:Function,allowHtml:Boolean,className:u["h"],transition:Object(u["e"])("van-dialog-bounce"),messageAlign:String,closeOnPopstate:u["g"],showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,confirmButtonText:String,confirmButtonColor:String,showConfirmButton:u["g"],closeOnClickOverlay:Boolean}),N=[...h["a"],"transition","closeOnPopstate"],P=Object(i["n"])({name:A,props:L,emits:["confirm","cancel","update:show"],setup(e,t){var{emit:n,slots:r}=t,a=Object(i["J"])({confirm:!1,cancel:!1}),s=e=>n("update:show",e),c=t=>{s(!1),null==e.callback||e.callback(t)},u=t=>()=>{e.show&&(n(t),e.beforeClose?(a[t]=!0,Object(l["a"])(e.beforeClose,{args:[t],done(){c(t),a[t]=!1},canceled(){a[t]=!1}})):c(t))},h=u("cancel"),m=u("confirm"),_=()=>{var t=r.title?r.title():e.title;if(t)return Object(i["m"])("div",{class:R("header",{isolated:!e.message&&!r.default})},[t])},y=t=>{var{message:n,allowHtml:r,messageAlign:o}=e,a=R("message",{"has-title":t,[o]:o}),s=Object(d["c"])(n)?n():n;return r&&"string"===typeof s?Object(i["m"])("div",{class:a,innerHTML:s},null):Object(i["m"])("div",{class:a},[s])},b=()=>{if(r.default)return Object(i["m"])("div",{class:R("content")},[r.default()]);var{title:t,message:n,allowHtml:o}=e;if(n){var a=!(!t&&!r.title);return Object(i["m"])("div",{key:o?1:0,class:R("content",{isolated:!a})},[y(a)])}},I=()=>Object(i["m"])("div",{class:[p["e"],R("footer")]},[e.showCancelButton&&Object(i["m"])(v["a"],{size:"large",text:e.cancelButtonText||x("cancel"),class:R("cancel"),style:{color:e.cancelButtonColor},loading:a.cancel,onClick:h},null),e.showConfirmButton&&Object(i["m"])(v["a"],{size:"large",text:e.confirmButtonText||x("confirm"),class:[R("confirm"),{[p["c"]]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:a.confirm,onClick:m},null)]),T=()=>Object(i["m"])(C,{class:R("footer")},{default:()=>[e.showCancelButton&&Object(i["m"])(D,{type:"warning",text:e.cancelButtonText||x("cancel"),class:R("cancel"),color:e.cancelButtonColor,loading:a.cancel,onClick:h},null),e.showConfirmButton&&Object(i["m"])(D,{type:"danger",text:e.confirmButtonText||x("confirm"),class:R("confirm"),color:e.confirmButtonColor,loading:a.confirm,onClick:m},null)]}),S=()=>r.footer?r.footer():"round-button"===e.theme?T():I();return()=>{var{width:t,title:n,theme:r,message:a,className:c}=e;return Object(i["m"])(g["a"],Object(i["t"])({role:"dialog",class:[R([r]),c],style:{width:Object(f["a"])(t)},"aria-labelledby":n||a,"onUpdate:show":s},Object(o["e"])(e,N)),{default:()=>[_(),b(),S()]})}}});function j(){var e={setup(){var{state:e,toggle:t}=Object(s["b"])();return()=>Object(i["m"])(P,Object(i["t"])(e,{"onUpdate:show":t}),null)}};({instance:r}=Object(s["a"])(e))}function U(e){return o["c"]?new Promise((t,n)=>{r||j(),r.open(Object(o["a"])({},U.currentOptions,e,{callback:e=>{("confirm"===e?t:n)(e)}}))}):Promise.resolve()}U.defaultOptions={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,confirmButtonText:"",confirmButtonColor:null,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1},U.currentOptions=Object(o["a"])({},U.defaultOptions),U.alert=U,U.confirm=e=>U(Object(o["a"])({showCancelButton:!0},e)),U.close=()=>{r&&r.toggle(!1)},U.setDefaultOptions=e=>{Object(o["a"])(U.currentOptions,e)},U.resetDefaultOptions=()=>{U.currentOptions=Object(o["a"])({},U.defaultOptions)},U.Component=Object(a["a"])(P),U.install=e=>{e.use(U.Component),e.config.globalProperties.$dialog=U};t["a"]=U},2266:function(e,t,n){var r=n("da84"),i=n("0366"),o=n("c65b"),a=n("825a"),s=n("0d51"),c=n("e95a"),u=n("07fa"),l=n("3a9b"),d=n("9a1f"),p=n("35a1"),f=n("2a62"),h=r.TypeError,g=function(e,t){this.stopped=e,this.result=t},v=g.prototype;e.exports=function(e,t,n){var r,m,_,y,b,I,T,C=n&&n.that,S=!(!n||!n.AS_ENTRIES),E=!(!n||!n.IS_ITERATOR),M=!(!n||!n.INTERRUPTED),k=i(t,C),w=function(e){return r&&f(r,"normal",e),new g(!0,e)},O=function(e){return S?(a(e),M?k(e[0],e[1],w):k(e[0],e[1])):M?k(e,w):k(e)};if(E)r=e;else{if(m=p(e),!m)throw h(s(e)+" is not iterable");if(c(m)){for(_=0,y=u(e);y>_;_++)if(b=O(e[_]),b&&l(v,b))return b;return new g(!1)}r=d(e,m)}I=r.next;while(!(T=o(I,r)).done){try{b=O(T.value)}catch(D){f(r,"throw",D)}if("object"==typeof b&&b&&l(v,b))return b}return new g(!1)}},2381:function(e,t,n){},"23cb":function(e,t,n){var r=n("5926"),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},"23e7":function(e,t,n){var r=n("da84"),i=n("06cf").f,o=n("9112"),a=n("6eeb"),s=n("ce4e"),c=n("e893"),u=n("94ca");e.exports=function(e,t){var n,l,d,p,f,h,g=e.target,v=e.global,m=e.stat;if(l=v?r:m?r[g]||s(g,{}):(r[g]||{}).prototype,l)for(d in t){if(f=t[d],e.noTargetGet?(h=i(l,d),p=h&&h.value):p=l[d],n=u(v?d:g+(m?".":"#")+d,e.forced),!n&&void 0!==p){if(typeof f==typeof p)continue;c(f,p)}(e.sham||p&&p.sham)&&o(f,"sham",!0),a(l,d,f,e)}}},"241c":function(e,t,n){var r=n("ca84"),i=n("7839"),o=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},2444:function(e,t,n){"use strict";(function(t){var r=n("c532"),i=n("c8af"),o=n("387f"),a={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function c(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof t&&"[object process]"===Object.prototype.toString.call(t))&&(e=n("b50d")),e}function u(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}var l={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:c(),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(s(t,"application/json"),u(e)):e}],transformResponse:[function(e){var t=this.transitional||l.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,a=!n&&"json"===this.responseType;if(a||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(a){if("SyntaxError"===s.name)throw o(s,this,"E_JSON_PARSE");throw s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){l.headers[e]=r.merge(a)})),e.exports=l}).call(this,n("4362"))},2532:function(e,t,n){"use strict";var r=n("23e7"),i=n("e330"),o=n("5a34"),a=n("1d80"),s=n("577e"),c=n("ab13"),u=i("".indexOf);r({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~u(s(a(this)),s(o(e)),arguments.length>1?arguments[1]:void 0)}})},2626:function(e,t,n){"use strict";var r=n("d066"),i=n("9bf2"),o=n("b622"),a=n("83ab"),s=o("species");e.exports=function(e){var t=r(e),n=i.f;a&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},"277d":function(e,t,n){var r=n("23e7"),i=n("e8b5");r({target:"Array",stat:!0},{isArray:i})},2830:function(e,t,n){"use strict";var r=n("c199"),i=n("be93"),o=Object(r["a"])(i["b"]);t["a"]=o},2909:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("277d");var r=n("6b75");function i(e){if(Array.isArray(e))return Object(r["a"])(e)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function o(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var a=n("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){return i(e)||o(e)||Object(a["a"])(e)||s()}},2994:function(e,t,n){"use strict";n("68ef"),n("e3b3"),n("c0c2")},"2a62":function(e,t,n){var r=n("c65b"),i=n("825a"),o=n("dc4a");e.exports=function(e,t,n){var a,s;i(e);try{if(a=o(e,"return"),!a){if("throw"===t)throw n;return n}a=r(a,e)}catch(c){s=!0,a=c}if("throw"===t)throw n;if(s)throw a;return i(a),n}},"2a84":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("7a23"),i=n("fe7e"),o=n("f691"),a=n("7f9b"),[s,c]=Object(i["a"])("steps"),u={active:Object(o["c"])(0),direction:Object(o["e"])("horizontal"),activeIcon:Object(o["e"])("checked"),iconPrefix:String,finishIcon:String,activeColor:String,inactiveIcon:String,inactiveColor:String},l=Symbol(s);t["b"]=Object(r["n"])({name:s,props:u,emits:["click-step"],setup(e,t){var{emit:n,slots:i}=t,{linkChildren:o}=Object(a["f"])(l),s=e=>n("click-step",e);return o({props:e,onClickStep:s}),()=>Object(r["m"])("div",{class:c([e.direction])},[Object(r["m"])("div",{class:c("items")},[null==i.default?void 0:i.default()])])}})},"2b28":function(e,t,n){"use strict";n("68ef"),n("7c7f")},"2ba4":function(e,t){var n=Function.prototype,r=n.apply,i=n.bind,o=n.call;e.exports="object"==typeof Reflect&&Reflect.apply||(i?o.bind(r):function(){return o.apply(r,arguments)})},"2bb1":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("fe86"),s=n("7f9b"),c=n("4eda"),[u,l]=Object(o["a"])("swipe-item"),d=Object(i["n"])({name:u,setup(e,t){var n,{slots:r}=t,o=Object(i["J"])({offset:0,inited:!1,mounted:!1}),{parent:u,index:d}=Object(s["l"])(a["a"]);if(u){var p=Object(i["e"])(()=>{var e={},{vertical:t}=u.props;return u.size.value&&(e[t?"height":"width"]=u.size.value+"px"),o.offset&&(e.transform="translate"+(t?"Y":"X")+"("+o.offset+"px)"),e}),f=Object(i["e"])(()=>{var{loop:e,lazyRender:t}=u.props;if(!t||n)return!0;if(!o.mounted)return!1;var r=u.activeIndicator.value,i=u.count.value-1,a=0===r&&e?i:r-1,s=r===i&&e?0:r+1;return n=d.value===r||d.value===a||d.value===s,n}),h=e=>{o.offset=e};return Object(i["C"])(()=>{Object(i["u"])(()=>{o.mounted=!0})}),Object(c["a"])({setOffset:h}),()=>Object(i["m"])("div",{class:l(),style:p.value},[f.value?null==r.default?void 0:r.default():null])}}}),p=Object(r["a"])(d);t["b"]=p},"2bdd":function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("4a89"),c=n("7f9b"),u=n("4eda"),l=n("80f6"),d=n("543e"),[p,f,h]=Object(o["a"])("list"),g={error:Boolean,offset:Object(a["c"])(300),loading:Boolean,finished:Boolean,errorText:String,direction:Object(a["e"])("down"),loadingText:String,finishedText:String,immediateCheck:a["g"]},v=Object(i["n"])({name:p,props:g,emits:["load","update:error","update:loading"],setup(e,t){var{emit:n,slots:r}=t,o=Object(i["K"])(!1),a=Object(i["K"])(),p=Object(i["K"])(),g=Object(l["b"])(),v=Object(c["n"])(a),m=()=>{Object(i["u"])(()=>{if(!(o.value||e.finished||e.error||!1===(null==g?void 0:g.value))){var{offset:t,direction:r}=e,i=Object(c["m"])(v);if(i.height&&!Object(s["d"])(a)){var u=!1,l=Object(c["m"])(p);u="up"===r?i.top-l.top<=t:l.bottom-i.bottom<=t,u&&(o.value=!0,n("update:loading",!0),n("load"))}}})},_=()=>{if(e.finished){var t=r.finished?r.finished():e.finishedText;if(t)return Object(i["m"])("div",{class:f("finished-text")},[t])}},y=()=>{n("update:error",!1),m()},b=()=>{if(e.error){var t=r.error?r.error():e.errorText;if(t)return Object(i["m"])("div",{role:"button",class:f("error-text"),tabindex:0,onClick:y},[t])}},I=()=>{if(o.value&&!e.finished)return Object(i["m"])("div",{class:f("loading")},[r.loading?r.loading():Object(i["m"])(d["a"],{class:f("loading-icon")},{default:()=>[e.loadingText||h("loading")]})])};return Object(i["X"])(()=>[e.loading,e.finished,e.error],m),g&&Object(i["X"])(g,e=>{e&&m()}),Object(i["E"])(()=>{o.value=e.loading}),Object(i["C"])(()=>{e.immediateCheck&&m()}),Object(u["a"])({check:m}),Object(c["j"])("scroll",m,{target:v}),()=>{var t=null==r.default?void 0:r.default(),n=Object(i["m"])("div",{ref:p,class:f("placeholder")},null);return Object(i["m"])("div",{ref:a,role:"feed",class:f(),"aria-busy":o.value},["down"===e.direction?t:n,I(),_(),b(),"up"===e.direction?t:n])}}}),m=Object(r["a"])(v);t["a"]=m},"2cf4":function(e,t,n){var r,i,o,a,s=n("da84"),c=n("2ba4"),u=n("0366"),l=n("1626"),d=n("1a2d"),p=n("d039"),f=n("1be4"),h=n("f36a"),g=n("cc12"),v=n("1cdc"),m=n("605d"),_=s.setImmediate,y=s.clearImmediate,b=s.process,I=s.Dispatch,T=s.Function,C=s.MessageChannel,S=s.String,E=0,M={},k="onreadystatechange";try{r=s.location}catch(R){}var w=function(e){if(d(M,e)){var t=M[e];delete M[e],t()}},O=function(e){return function(){w(e)}},D=function(e){w(e.data)},A=function(e){s.postMessage(S(e),r.protocol+"//"+r.host)};_&&y||(_=function(e){var t=h(arguments,1);return M[++E]=function(){c(l(e)?e:T(e),void 0,t)},i(E),E},y=function(e){delete M[e]},m?i=function(e){b.nextTick(O(e))}:I&&I.now?i=function(e){I.now(O(e))}:C&&!v?(o=new C,a=o.port2,o.port1.onmessage=D,i=u(a.postMessage,a)):s.addEventListener&&l(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!p(A)?(i=A,s.addEventListener("message",D,!1)):i=k in g("script")?function(e){f.appendChild(g("script"))[k]=function(){f.removeChild(this),w(e)}}:function(e){setTimeout(O(e),0)}),e.exports={set:_,clear:y}},"2d00":function(e,t,n){var r,i,o=n("da84"),a=n("342f"),s=o.process,c=o.Deno,u=s&&s.versions||c&&c.version,l=u&&u.v8;l&&(r=l.split("."),i=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&a&&(r=a.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/),r&&(i=+r[1]))),e.exports=i},"2d6d":function(e,t,n){"use strict";var r=n("c199"),i=n("04b0"),o=Object(r["a"])(i["b"]);t["a"]=o},"2d83":function(e,t,n){"use strict";var r=n("387f");e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},"2e67":function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},"2ed4":function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f344"),s=n("f691"),c=n("8da3"),u=n("5531"),l=n("7f9b"),d=n("b070"),p=n("ad06"),f=n("471a"),[h,g]=Object(o["a"])("tabbar-item"),v=Object(a["a"])({},d["b"],{dot:Boolean,icon:String,name:s["f"],badge:s["f"],iconPrefix:String}),m=Object(i["n"])({name:h,props:v,emits:["click"],setup(e,t){var{emit:n,slots:r}=t,o=Object(d["c"])(),a=Object(i["o"])().proxy,{parent:s,index:h}=Object(l["l"])(u["a"]);if(s){var v=Object(i["e"])(()=>{var t,{route:n,modelValue:r}=s.props;if(n&&"$route"in a){var{$route:i}=a,{to:o}=e,u=Object(c["f"])(o)?o:{path:o};return!!i.matched.find(e=>{var t="path"in u&&u.path===e.path,n="name"in u&&u.name===e.name;return t||n})}return(null!=(t=e.name)?t:h.value)===r}),m=t=>{var r;v.value||s.setActive(null!=(r=e.name)?r:h.value,o);n("click",t)},_=()=>r.icon?r.icon({active:v.value}):e.icon?Object(i["m"])(p["a"],{name:e.icon,classPrefix:e.iconPrefix},null):void 0;return()=>{var{dot:t,badge:n}=e,{activeColor:o,inactiveColor:a}=s.props,c=v.value?o:a;return Object(i["m"])("div",{role:"tab",class:g({active:v.value}),style:{color:c},tabindex:0,"aria-selected":v.value,onClick:m},[Object(i["m"])(f["a"],{dot:t,content:n,class:g("icon")},{default:_}),Object(i["m"])("div",{class:g("text")},[null==r.default?void 0:r.default({active:v.value})])])}}}}),_=Object(r["a"])(m);t["a"]=_},"2fcb":function(e,t,n){},"30b5":function(e,t,n){"use strict";var r=n("c532");function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},3104:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("8405"),c=n("f344"),u=n("4a89"),l=n("7f9b");function d(e,t){if(c["c"]&&window.IntersectionObserver){var n=new IntersectionObserver(e=>{t(e[0].intersectionRatio>0)},{root:document.body}),r=()=>{e.value&&n.observe(e.value)},o=()=>{e.value&&n.unobserve(e.value)};Object(i["B"])(o),Object(i["z"])(o),Object(l["d"])(r)}}var[p,f]=Object(o["a"])("sticky"),h={zIndex:a["f"],position:Object(a["e"])("top"),container:Object,offsetTop:Object(a["c"])(0),offsetBottom:Object(a["c"])(0)},g=Object(i["n"])({name:p,props:h,emits:["scroll","change"],setup(e,t){var{emit:n,slots:r}=t,o=Object(i["K"])(),a=Object(l["n"])(o),p=Object(i["J"])({fixed:!1,width:0,height:0,transform:0}),h=Object(i["e"])(()=>Object(s["i"])("top"===e.position?e.offsetTop:e.offsetBottom)),g=Object(i["e"])(()=>{var{fixed:e,height:t,width:n}=p;if(e)return{width:n+"px",height:t+"px"}}),v=Object(i["e"])(()=>{if(p.fixed){var t=Object(c["a"])(Object(s["f"])(e.zIndex),{width:p.width+"px",height:p.height+"px",[e.position]:h.value+"px"});return p.transform&&(t.transform="translate3d(0, "+p.transform+"px, 0)"),t}}),m=e=>n("scroll",{scrollTop:e,isFixed:p.fixed}),_=()=>{if(o.value&&!Object(u["d"])(o)){var{container:t,position:n}=e,r=Object(l["m"])(o),i=Object(u["c"])(window);if(p.width=r.width,p.height=r.height,"top"===n)if(t){var a=Object(l["m"])(t),s=a.bottom-h.value-p.height;p.fixed=h.value>r.top&&a.bottom>0,p.transform=s<0?s:0}else p.fixed=h.value>r.top;else{var{clientHeight:c}=document.documentElement;if(t){var d=Object(l["m"])(t),f=c-d.top-h.value-p.height;p.fixed=c-h.value<r.bottom&&c>d.top,p.transform=f<0?-f:0}else p.fixed=c-h.value<r.bottom}m(i)}};return Object(i["X"])(()=>p.fixed,e=>n("change",e)),Object(l["j"])("scroll",_,{target:a}),d(o,_),()=>Object(i["m"])("div",{ref:o,style:g.value},[Object(i["m"])("div",{class:f({fixed:p.fixed}),style:v.value},[null==r.default?void 0:r.default()])])}}),v=Object(r["a"])(g);t["b"]=v},"342f":function(e,t,n){var r=n("d066");e.exports=r("navigator","userAgent")||""},"34e9":function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("b1d2"),[c,u]=Object(o["a"])("cell-group"),l={title:String,inset:Boolean,border:a["g"]},d=Object(i["n"])({name:c,inheritAttrs:!1,props:l,setup(e,t){var{slots:n,attrs:r}=t,o=()=>Object(i["m"])("div",Object(i["t"])({class:[u({inset:e.inset}),{[s["f"]]:e.border&&!e.inset}]},r),[null==n.default?void 0:n.default()]),a=()=>Object(i["m"])("div",{class:u("title",{inset:e.inset})},[n.title?n.title():e.title]);return()=>e.title||n.title?Object(i["m"])(i["a"],null,[a(),o()]):o()}}),p=Object(r["a"])(d);t["a"]=p},"35a1":function(e,t,n){var r=n("f5df"),i=n("dc4a"),o=n("3f8c"),a=n("b622"),s=a("iterator");e.exports=function(e){if(void 0!=e)return i(e,s)||i(e,"@@iterator")||o[r(e)]}},3653:function(e,t,n){!function(t,r){e.exports=r(n("5781"),n("595e"),n("e23e"),n("b3bc"))}(window,(function(e,t,n,r){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=30)}([function(e,t,n){"use strict";n.r(t);var r=n(6),i=n(1);let o=0;const a=new Map;function s(){const e=new Date;return`TUICallEngine ${e.toLocaleTimeString("en-US",{hour12:!1})}.${function(e){let t;switch(e.toString().length){case 1:t="00"+e;break;case 2:t="0"+e;break;default:t=e}return t}(e.getMilliseconds())}:`}const c={_data:[],_length:0,_visible:!1,arguments2String(e){let t;if(1===e.length)t=s()+e[0];else{t=s();for(let n=0,{length:r}=e;n<r;n++)Object(i.isArrayOrObject)(e[n])?Object(i.isInstanceOfError)(e[n])?t+=Object(i.stringifyError)(e[n]):t+=JSON.stringify(e[n]):t+=e[n],t+=" "}return t},debug(){if(o<=-1){const e=this.arguments2String(arguments);c.record(e,"debug"),r.a.debug(e)}},log(){if(o<=0){const e=this.arguments2String(arguments);c.record(e,"log"),r.a.log(e)}},info(){if(o<=1){const e=this.arguments2String(arguments);c.record(e,"info"),r.a.info(e)}},warn(){if(o<=2){const e=this.arguments2String(arguments);c.record(e,"warn"),r.a.warn(e)}},error(){if(o<=3){const e=this.arguments2String(arguments);c.record(e,"error"),r.a.error(e)}},time(e){a.set(e,i.TimeUtil.now())},timeEnd(e){if(a.has(e)){const t=i.TimeUtil.now()-a.get(e);return a.delete(e),t}return r.a.warn(`未找到对应label: ${e}, 请在调用 logger.timeEnd 前，调用 logger.time`),0},setLevel(e){e<4&&r.a.log(`${s()}set level from ${o} to ${e}`),o=e},getLevel:()=>o,record(e,t){1100===c._length&&(c._data.splice(0,100),c._length=1e3),c._length++,c._data.push(`${e} [${t}] \n`)},getLog:()=>c._data};t.default=c},function(e,t,n){"use strict";n.r(t),n.d(t,"isMap",(function(){return o})),n.d(t,"isSet",(function(){return a})),n.d(t,"isFile",(function(){return s})),n.d(t,"isNumber",(function(){return c})),n.d(t,"isString",(function(){return u})),n.d(t,"isObject",(function(){return l})),n.d(t,"isBoolean",(function(){return d})),n.d(t,"isPlainObject",(function(){return p})),n.d(t,"isArray",(function(){return f})),n.d(t,"isUndefined",(function(){return h})),n.d(t,"isNativeClass",(function(){return v})),n.d(t,"isArrayOrObject",(function(){return m})),n.d(t,"isFunction",(function(){return _})),n.d(t,"isInstanceOfError",(function(){return y})),n.d(t,"getType",(function(){return b})),n.d(t,"TimeUtil",(function(){return T})),n.d(t,"stringifyError",(function(){return C})),n.d(t,"map2String",(function(){return S})),n.d(t,"randomString",(function(){return k})),n.d(t,"isValidType",(function(){return w})),n.d(t,"mapKeys",(function(){return O})),n.d(t,"mapValues",(function(){return D})),n.d(t,"generateRandomRoomID",(function(){return A})),n.d(t,"formatDuration",(function(){return x})),n.d(t,"compareVersion",(function(){return L})),n.d(t,"date2ISOString",(function(){return N})),n.d(t,"getHostType",(function(){return P}));var r=n(10),i=n(2);const o=function(e){return b(e)===i.NAME.MAP},a=function(e){return b(e)===i.NAME.SET},s=function(e){return b(e)===i.NAME.FILE},c=function(e){return null!==e&&(typeof e===i.NAME.NUMBER&&!isNaN(e-0)||typeof e===i.NAME.OBJECT&&e.constructor===Number)},u=function(e){return typeof e===i.NAME.STRING},l=function(e){return null!==e&&typeof e===i.NAME.OBJECT},d=function(e){return typeof e===i.NAME.BOOLEAN},p=function(e){if(typeof e!==i.NAME.OBJECT||null===e)return!1;const t=Object.getPrototypeOf(e);if(null===t)return!0;let n=t;for(;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n},f=function(e){return typeof Array.isArray===i.NAME.FUNCTION?Array.isArray(e):b(e)===i.NAME.ARRAY},h=function(e){return typeof e===i.NAME.UNDEFINED},g=/^class\s/,v=function(e){return typeof e===i.NAME.FUNCTION&&g.test(e.toString())},m=function(e){return f(e)||l(e)},_=function(e){return typeof e===i.NAME.FUNCTION},y=function(e){return e instanceof Error},b=function(e){return Object.prototype.toString.call(e).match(/^\[object (.*)\]$/)[1].toLowerCase()};let I=0;Date.now||(Date.now=function(){return(new Date).getTime()});const T={now(){0===I&&(I=Date.now()-1);const e=Date.now()-I;return e>4294967295?(I+=4294967295,Date.now()-I):e},utc:()=>Math.round(Date.now()/1e3)},C=function(e){return JSON.stringify(e,["message","code"])},S=function(e){if(!o(e))return"not a map!!!";let t="";for(const[n,r]of e.entries()){if(o(r))return`[k=${n} -> ${S(r)}`;t+=`[k=${n} v=${r}] `}return t},E="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",M=E.length,k=function(){let e="";for(let t=32;t>0;--t)e+=E[Math.floor(Math.random()*M)];return e},w=function(e,t){for(const n in e)if(e[n]===t)return!0;return!1};function O(e,t){const n={};return Object.keys(e).forEach(r=>{n[t(e[r],r)]=e[r]}),n}function D(e,t){const n={};return Object.keys(e).forEach(r=>{n[r]=t(e[r],r)}),n}function A(){return Math.round(1e8*Math.random())}function R(e){return e<10?"0"+e:e}function x(e){if(e<60)return"00:00:"+R(e);if(e<3600){const t=parseInt(e/60),n=e-60*t;return`00:${R(t)}:${R(n)}`}const t=parseInt(e/3600),n=e-3600*t,r=parseInt(n/60),i=n-60*r;return`${R(t)}:${R(r)}:${R(i)}`}function L(e,t){e=e.split("."),t=t.split(".");const n=Math.max(e.length,t.length);for(;e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(let r=0;r<n;r++){const n=parseInt(e[r]),i=parseInt(t[r]);if(n>i)return 1;if(n<i)return-1}return 0}const N=function(){const e=new Date,t=e.toISOString(),n=e.getTimezoneOffset()/60;let r="";return r=n<0?n>-10?"+0"+Math.abs(100*n):"+"+Math.abs(100*n):n>=10?"-"+100*n:"-0"+100*n,t.replace("Z",r)};function P(){let e="unknown";return r.IS_MAC&&(e="mac"),r.IS_WIN&&(e="windows"),r.IS_IOS&&(e="ios"),r.IS_ANDROID&&(e="android"),e}},function(e,t,n){"use strict";n.r(t),n.d(t,"mainUrl",(function(){return r})),n.d(t,"backupUrl",(function(){return i})),n.d(t,"Mode",(function(){return o})),n.d(t,"Role",(function(){return a})),n.d(t,"VIDEO_STAT_BIT",(function(){return s})),n.d(t,"AUDIO_STAT_BIT",(function(){return c})),n.d(t,"AUDIO_MUTE_BIT",(function(){return u})),n.d(t,"VIDEO_MUTE_BIT",(function(){return l})),n.d(t,"VIDEO_MUTED_MASK",(function(){return d})),n.d(t,"AUX_VIDEO_MUTED_MASK",(function(){return p})),n.d(t,"AUDIO_MUTED_MASK",(function(){return f})),n.d(t,"MAIN_STREAM_MSID",(function(){return h})),n.d(t,"AUX_STREAM_MSID",(function(){return g})),n.d(t,"StreamType",(function(){return v})),n.d(t,"TRTC_QUALITY_UNKNOWN",(function(){return m})),n.d(t,"TRTC_QUALITY_EXCELLENT",(function(){return _})),n.d(t,"TRTC_QUALITY_GOOD",(function(){return y})),n.d(t,"TRTC_QUALITY_POOR",(function(){return b})),n.d(t,"TRTC_QUALITY_BAD",(function(){return I})),n.d(t,"TRTC_QUALITY_VBAD",(function(){return T})),n.d(t,"TRTC_QUALITY_DISCONNECTED",(function(){return C})),n.d(t,"DTLS_STATE_UNKNOWN",(function(){return S})),n.d(t,"SuccessRate",(function(){return E})),n.d(t,"MTA_API_PENDING",(function(){return M})),n.d(t,"MTA_API_SUCCESS",(function(){return k})),n.d(t,"ConnectionState",(function(){return w})),n.d(t,"UPLINK_RECONNECTION_COUNT",(function(){return O})),n.d(t,"DOWNLINK_RECONNECTION_COUNT",(function(){return D})),n.d(t,"SIGNAL_RECONNECTION_COUNT",(function(){return A})),n.d(t,"KIBANA_EVENT",(function(){return R})),n.d(t,"SIGNAL_PING_TIMEOUT",(function(){return x})),n.d(t,"SIGNAL_PING_PONG_INTERVAL",(function(){return L})),n.d(t,"INNER_EVENT",(function(){return N})),n.d(t,"AI_NOISE_REDUCE_ASSETS_PATH",(function(){return P})),n.d(t,"NAME",(function(){return j}));const r="wss://qcloud.rtc.qq.com:8687",i="wss://bk.rtc.qq.com:8687",o={RTC:1,LIVE:2},a={HOST:20,AUDIENCE:21},s=1,c=8,u=64,l=16,d=1,p=2,f=4,h="5Y2wZK8nANNAoVw6dSAHVjNxrD1ObBM2kBPV",g="224d130c-7b5c-415b-aaa2-79c2eb5a6df2",v={NONE:0,AUDIO:1,MAIN:2,AUX:7},m=0,_=1,y=2,b=3,I=4,T=5,C=6,S="unknown",E={JOIN:"join",PUBLISH:"publish",UNPUBLISH:"unpublish",LOCAL_STREAM_INITIALIZE:"local_stream_initialize",SUBSCRIBE:"subscribe",UNSUBSCRIBE:"unsubscibe",UPLINK_CONNECTION:"uplink_connection",UPLINK_RECONNECTION:"uplink_reconnection",DOWNLINK_CONNECTION:"downlink_connection",DOWNLINK_RECONNECTION:"downlink_reconnection",SIGNAL_CONNECTION:"signal_connection",SIGNAL_RECONNECTION:"signal_reconnection",UPDATE_STREAM:"update_stream"},M="pending",k="success",w={CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected"},O=30,D=30,A=30,R={SDK_CONSTRUCT:"sdkConstruct",SDK_LOGIN:"sdkLogin",DELTA_JOIN:"delta-join",REJOIN:"rejoin",LEAVE:"leave",DELTA_LEAVE:"delta-leave",PUBLISH:"publish",DELTA_PUBLISH:"delta-publish",UNPUBLISH:"unpublish",SUBSCRIBE:"subscribe",UNSUBSCRIBE:"unsubscribe",UPLINK_CONNECTION:"uplink-connection",UPLINK_RECONNECTION:"uplink-reconnection",DOWNLINK_CONNECTION:"downlink-connection",DOWNLINK_RECONNECTION:"downlink-reconnection",ON_TRACK:"ontrack",SET_LOCAL_DESCRIPTION:"setLocalDescription",SET_REMOTE_DESCRIPTION:"setRemoteDescription",ICE_CONNECTION_STATE:"iceConnectionState",LOCAL_STREAM_INITIALIZE:"stream-initialize",SIGNAL_CONNECTION:"websocketConnectionState",SIGNAL_RECONNECTION:"websocketReconnectionState",UPDATE_STREAM:"update-stream",RECOVER_SUBSCRIPTION:"recover-subscription"},x=6e3,L=1e4,N={SET_REMOTE_OFFER_FINISHED:"set-remote-offer-finished"},P="https://web.sdk.qcloud.com/trtc/webrtc/download/aiNoiseReduce/",j={DEFAULT:"default",BOOLEAN:"boolean",STRING:"string",NUMBER:"number",OBJECT:"object",ARRAY:"array",FUNCTION:"function",FILE:"file",MAP:"map",SET:"set",UNDEFINED:"undefined",VIDEO:"video",AUDIO:"audio",ON_ERROR:"onError",MAIN:"main",RTC:"rtc",LIVE:"live",SMALL:"small",BIG:"big",AUXILIARY:"auxiliary",INVITER:"inviter",INVITEE:"invitee",VIDEO_INPUT:"videoinput",AUDIO_INPUT:"audioinput",LOCAL:"local",REMOTE:"remote",TRTC:"TRTC",WEB:"web",NORMAL:"normal",REJECT:"reject",IGNORE:"ignore",TIMEOUT:"timeout",CANCEL:"cancel",BUSYLINE:"busyline",UNKNOWN:"unknown",SINGLE_CALL:"SingleCall",GROUP_CALL:"groupCall",CALLER:"caller",CALLEE:"callee",COVER:"cover",CONTAIN:"contain",FILL:"fill"}},function(e,t,n){"use strict";var r=n(18),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===i.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:c,isUndefined:a,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:u,isStream:function(e){return s(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function e(){var t={};function n(n,r){c(t[r])&&c(n)?t[r]=e(t[r],n):c(n)?t[r]=e({},n):o(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],n);return t},extend:function(e,t,n){return l(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={UNKNOWN:65535,NO_SDK_APPID:2e3,NO_ACCOUNT_TYPE:2001,NO_IDENTIFIER:2002,NO_USER_SIG:2003,NO_TINY_ID:2022,NO_A2KEY:2023,USER_NOT_LOGGED_IN:2024,NO_NETWORK:2805,FAILURE_SWITCH_TO_AUDIO:60001,FAILURE_SWITCH_TO_VIDEO:60002,NOT_MICROPHONE_LIST:60003,NOT_CAMERA_LIST:60004,NOT_MEDIA_ACCESS:60005,NOT_SUPPORT:60006,ERROR_PACKAGE_NOT_PURCHASED:-1001,ERROR_PACKAGE_NOT_SUPPORTED:-1002,ERROR_TIM_VERSION_OUTDATED:-1003,ERROR_PERMISSION_DENIED:-1101,ERROR_GET_DEVICE_LIST_FAIL:-1102,ERROR_INIT_FAIL:-1201,ERROR_PARAM_INVALID:-1202,ERROR_REQUEST_REFUSED:-1203,ERROR_REQUEST_REPEATED:-1204,ERROR_SCENE_NOT_SUPPORTED:-1205,ERROR_SIGNALING_SEND_FAIL:-1401,ERROR_INVALID_INVITEID:8010,ERROR_INVALID_SEND_FAIL:20003,ERROR_HTTP:3e4}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_CN_MESSAGE=t.ERROR_MESSAGE=void 0,t.ERROR_MESSAGE={NO_SDK_APPID:"无 SDKAppID",NO_ACCOUNT_TYPE:"无 accountType",NO_IDENTIFIER:"无 userID",NO_USER_SIG:"无 userSig",NO_NETWORK:"未连接到网络",FAILURE_SWITCH_TO_AUDIO:"switch to audio call error",FAILURE_SWITCH_TO_VIDEO:"switch to video call error",NOT_MICROPHONE_LIST:"No microphone or microphone permission denied",NOT_CAMERA_LIST:"No camera or camera permission denied",ERROR_NULL:"success",ERROR_PACKAGE_NOT_PURCHASED:"You do not currently have TUICallKit package, please open the free experience in the console or purchase the official package",ERROR_PACKAGE_NOT_SUPPORTED:'The package you purchased does not support this ability. You can refer to "Activate TRTC and IM": https://www.tencentcloud.com/document/product/647/50993#step-1.-activate-trtc-and-im',ERROR_TIM_VERSION_OUTDATED:"TIM SDK version is too old, Please upgrade version",ERROR_PERMISSION_DENIED:"camera permission refused / microphone permission refused. You can perform the trtc capability test at https://web.sdk.qcloud.com/trtc/webrtc/demo/detect/index.html to check whether the current environment supports audio and video calls",ERROR_GET_DEVICE_LIST_FAIL:"Failed to get device list",ERROR_INIT_FAIL:"init or login is not complete, this API needs to be used after init. To solve the problem, please go to: https://cloud.tencent.com/document/product/647/78769#3a61f42b-e06f-49af-88bf-362d40025887",ERROR_REQUEST_REFUSED:"The API is support use in the state of. To solve the problem, please go to: https://cloud.tencent.com/document/product/647/78769#5e65043d-e3dc-4bd3-8220-3ac7694dfa42",ERROR_REQUEST_REPEATED:"The current method is being executed, please do not call it repeatedly",ERROR_REQUEST_REPEATED_SWITCH:"Consistent with the current call type, please do not switch repeatedly",ERROR_SCENE_NOT_SUPPORTED:"In the current call scene, this function is not supported",ERROR_SIGNALING_SEND_FAIL:"signaling failed to send",ERROR_INVALID_INVITEID:"inviteID is invalid or invitation has been processed. To solve the problem, please go to: https://cloud.tencent.com/document/product/647/84363#e97ea97b-7812-42ed-89b7-2a3840ac0e3f",ERROR_INVALID_SEND_FAIL:"Invalid sender or receiver identifier! To solve the problem, please go to: https://cloud.tencent.com/document/product/647/84363#661be1b0-f649-4199-a343-958c3f4f4bbb",ERROR_PARAM_INVALID:"invalid paramete",ERROR_HTTP:"The current page is detected to be using the http protocol. To ensure smooth access and experience of all functions of TUICallEngine SDK for production environment users, please use the https protocol to access the audio and video application page. More Info: https://web.sdk.qcloud.com/trtc/webrtc/doc/en/tutorial-05-info-browser.html#h2-3",NOT_SUPPORT:"The current page does not have webRTC capability. You can perform the trtc capability test at https://web.sdk.qcloud.com/trtc/webrtc/demo/detect/index.html to check whether the current environment supports audio and video calls"},t.ERROR_CN_MESSAGE={NO_SDK_APPID:"无 SDKAppID",NO_ACCOUNT_TYPE:"无帐户类型",NO_IDENTIFIER:"无 userID",NO_USER_SIG:"无 userSig",NO_NETWORK:"未连接到网络",FAILURE_SWITCH_TO_AUDIO:"切换语音通话失败",FAILURE_SWITCH_TO_VIDEO:"切换视频通话失败",NOT_MICROPHONE_LIST:"没有麦克风权限",NOT_CAMERA_LIST:"没有摄像头权限",ERROR_NULL:"成功",ERROR_PACKAGE_NOT_PURCHASED:"您目前没有 TUICallKit 包，请在控制台开启免费体验或购买官方包",ERROR_PACKAGE_NOT_SUPPORTED:"您购买的套餐不支持该功能。可参考开通方式：https://cloud.tencent.com/document/product/647/84363#ff45b4ad-f605-42b8-a0af-b2397c8f3e1a",ERROR_TIM_VERSION_OUTDATED:"TIM SDK 版本太旧,请升级版本",ERROR_PERMISSION_DENIED:"摄像头/麦克风权限被拒绝，可以前往: https://web.sdk.qcloud.com/trtc/webrtc/demo/detect/index.html 进行 trtc 能力测试，查看当前环境是否支持音视频通话",ERROR_GET_DEVICE_LIST_FAIL:"获取设备列表失败",ERROR_INIT_FAIL:"TUICallEngine 初始化登录未完成，需要在 init 或 login 完成后使用此 API 。解决方案请前往: https://cloud.tencent.com/document/product/647/78769#3a61f42b-e06f-49af-88bf-362d40025887",ERROR_REQUEST_REFUSED:"当前通话状态无法使用该 API。解决方案请前往: https://cloud.tencent.com/document/product/647/78769#5e65043d-e3dc-4bd3-8220-3ac7694dfa42",ERROR_REQUEST_REPEATED:"当前方法正在执行中，请勿重复调用",ERROR_REQUEST_REPEATED_SWITCH:"与当前通话类型一致，请勿重复切换",ERROR_SCENE_NOT_SUPPORTED:"当前通话场景不支持该功能",ERROR_SIGNALING_SEND_FAIL:"信令发送失败",ERROR_INVALID_INVITEID:"inviteID 无效或邀请已处理。解决方案请前往: https://cloud.tencent.com/document/product/647/84363#e97ea97b-7812-42ed-89b7-2a3840ac0e3f ",ERROR_INVALID_SEND_FAIL:"消息发送方或接收方 UserID 无效或不存在。解决方案请前往: https://cloud.tencent.com/document/product/647/84363#661be1b0-f649-4199-a343-958c3f4f4bbb ",ERROR_PARAM_INVALID:"参数错误",ERROR_HTTP:"检测到当前页面正处于 http 协议下，为确保生产环境用户顺畅接入和体验 TUICallEngine SDK 的全部功能，请使用 https 协议访问音视频应用页面。详情请前往：https://web.sdk.qcloud.com/trtc/webrtc/doc/zh-cn/tutorial-05-info-browser.html#h2-3",NOT_SUPPORT:"当前页面不具备 webRTC 能力。可以前往: https://web.sdk.qcloud.com/trtc/webrtc/demo/detect/index.html 进行 trtc 能力测试，查看当前环境是否支持音视频通话"}},function(e,t,n){"use strict";(function(e){let n,r;n="undefined"!=typeof console?console:void 0!==e&&e.console?e.console:"undefined"!=typeof window&&window.console?window.console:{};const i=function(){},o=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];let{length:a}=o;for(;a--;)r=o[a],console[r]||(n[r]=i);n.methods=o,t.a=n}).call(this,n(34))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEVICEID_TYPE=t.DEVICE_TYPE=t.CALL_EXPERMENTEL_API_TYPE=t.MODE_TYPE=t.VALID_VIDEO_PROFILE_LIST=t.BUSINESS_ID=t.ACTION_TYPE=t.CALL_ROLE=t.CALL_STATUS=t.CMD_TYPE=t.CMD_TYPE_LIST=t.CALL_TYPE=void 0;var r=n(13);!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.AUDIO_CALL=1]="AUDIO_CALL",e[e.VIDEO_CALL=2]="VIDEO_CALL"}(t.CALL_TYPE||(t.CALL_TYPE={})),t.CMD_TYPE_LIST=["","audioCall","videoCall"],function(e){e.AUDIO_CALL="audioCall",e.VIDEO_CALL="videoCall",e.HANG_UP="hangup",e.SWITCH_TO_AUDIO="switchToAudio",e.SWITCH_TO_AUDIO_CALL="switch_to_audio_call",e.SWITCH_TO_VIDEO="switchToVideo"}(t.CMD_TYPE||(t.CMD_TYPE={})),function(e){e.IDLE="idle",e.CALLING="calling",e.CONNECTED="connected"}(t.CALL_STATUS||(t.CALL_STATUS={})),function(e){e.UNKNOWN="",e.INVITER="inviter",e.INVITEE="invitee"}(t.CALL_ROLE||(t.CALL_ROLE={})),function(e){e[e.INVITE=1]="INVITE",e[e.CANCEL_INVITE=2]="CANCEL_INVITE",e[e.ACCEPT_INVITE=3]="ACCEPT_INVITE",e[e.REJECT_INVITE=4]="REJECT_INVITE",e[e.INVITE_TIMEOUT=5]="INVITE_TIMEOUT"}(t.ACTION_TYPE||(t.ACTION_TYPE={})),function(e){e[e.SIGNAL=1]="SIGNAL"}(t.BUSINESS_ID||(t.BUSINESS_ID={})),t.VALID_VIDEO_PROFILE_LIST=Object.keys(r.TUICommonDefine.VideoEncoderParams),function(e){e.AUDIO="audio",e.VIDEO="video"}(t.MODE_TYPE||(t.MODE_TYPE={})),function(e){e[e.BASE=Math.pow(2,16)]="BASE",e[e.PRO=Math.pow(2,17)]="PRO",e[e.ULTIMATE=Math.pow(2,18)]="ULTIMATE"}(t.CALL_EXPERMENTEL_API_TYPE||(t.CALL_EXPERMENTEL_API_TYPE={})),function(e){e.AUDIO="audio",e.VIDEO="video",e.CAMERA="camera",e.MICROPHONES="microphones"}(t.DEVICE_TYPE||(t.DEVICE_TYPE={})),function(e){e.audio="microphoneId",e.video="cameraId"}(t.DEVICEID_TYPE||(t.DEVICEID_TYPE={}))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),a=n(5),s=function(e){function t(t){var n=t.message,r=t.code,i=void 0===r?o.default.UNKNOWN:r,s=e.call(this,n+" "+function(e){for(var t in a.ERROR_CN_MESSAGE)if(o.default[t]===e)return a.ERROR_CN_MESSAGE[t];return"UNKNOWN"}(i)+" <"+function(e){for(var t in o.default)if(o.default[t]===e)return t;return"UNKNOWN"}(i)+": "+i+">")||this;return s.code=i,s.name="TUICallEngineError",s.message_=n,s}return i(t,e),t.prototype.getCode=function(){return this.code},t}(Error);t.default=s},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(0),o=n(4),a=n.n(o),s=n(5);class c{constructor(e){this.sdkappid="",this.version="",this.userid="",this.platform="",this.useragent="",this.method=e,this.codeint=1,this.calltype=1,this.talktime=0,this.message="",this.text="",this.startts=Date.now(),this.endts=0,this.timespan=0,this.time="",this.networktype="",this.host=Object(r.getHostType)()}static bindController(e){c.prototype._eventStatController=e}setCommonInfo(e){const{SDKAppID:t,version:n,userID:i,platform:o,scene:a}=e;this.sdkappid=t,this.version=""+n,this.userid=i,this.platform=o,this.scene=a,this.time=Object(r.date2ISOString)(),this.startts&&this.endts&&!this.timespan&&(this.timespan=Math.abs(this.endts-this.startts))}setEnd(e=!1){this.endts=Date.now(),e?this._eventStatController.pushIn(this):setTimeout(()=>{this._eventStatController.pushIn(this)},0)}setError(e,t,n){return this.setNetworkType(n),t?(e.code&&this.setCode(e.code),e.message&&this.setMessage(e.message)):(this.setCode(a.a.NO_NETWORK),this.setMessage(s.ERROR_MESSAGE.NO_NETWORK)),this}setCode(e){return"ECONNABORTED"===e&&(this.codeint=103),Object(r.isNumber)(e)?this.codeint=e:i.default.warn("SSOLogData.setCode value not a number, please check!",e,typeof e),this}setMessage(e){return Object(r.isString)(e)?(this.message=e,this):this}setText(e){return Object(r.isNumber)(e)?this.text=e.toString():Object(r.isString)(e)&&(this.text=e),this}setTalkTime(e){return this.talktime=e,this}setMessageType(e){return this.msgType=e,this}setCallType(e){return this.calltype=e,this}setNetworkType(e){return Object(r.isUndefined)(e)?i.default.warn("SSOLogData.setNetworkType value is undefined, please check!"):this.networktype=e,this}}t.default=c},function(e,t,n){"use strict";n.r(t),n.d(t,"IN_Browser",(function(){return r})),n.d(t,"IN_WXMiniProgram",(function(){return i})),n.d(t,"USER_AGENT",(function(){return o})),n.d(t,"IS_IPAD",(function(){return c})),n.d(t,"IS_IPHONE",(function(){return u})),n.d(t,"IS_IPOD",(function(){return l})),n.d(t,"IS_IOS",(function(){return d})),n.d(t,"IOS_VERSION",(function(){return p})),n.d(t,"IS_ANDROID",(function(){return f})),n.d(t,"ANDROID_VERSION",(function(){return h})),n.d(t,"IS_OLD_ANDROID",(function(){return g})),n.d(t,"IS_NATIVE_ANDROID",(function(){return v})),n.d(t,"IS_FIREFOX",(function(){return m})),n.d(t,"FIREFOX_VERSION",(function(){return _})),n.d(t,"IS_EDGE",(function(){return y})),n.d(t,"IS_EDG",(function(){return b})),n.d(t,"EDG_VERSION",(function(){return I})),n.d(t,"IS_CHROME",(function(){return T})),n.d(t,"CHROME_MAJOR_VERSION",(function(){return C})),n.d(t,"CHROME_VERSION",(function(){return S})),n.d(t,"IS_IE8",(function(){return E})),n.d(t,"IE_VERSION",(function(){return M})),n.d(t,"IS_SAFARI",(function(){return k})),n.d(t,"IS_ANY_SAFARI",(function(){return w})),n.d(t,"SAFARI_VERSION",(function(){return O})),n.d(t,"IS_TBS",(function(){return D})),n.d(t,"TBS_VERSION",(function(){return A})),n.d(t,"IS_MQQB",(function(){return R})),n.d(t,"IS_QQB",(function(){return x})),n.d(t,"IS_WECHAT",(function(){return L})),n.d(t,"IS_WIN",(function(){return N})),n.d(t,"IS_MAC",(function(){return P})),n.d(t,"IS_LINUX",(function(){return j})),n.d(t,"IS_WX",(function(){return U})),n.d(t,"IS_UCBROWSER",(function(){return G})),n.d(t,"IS_MIUIBROWSER",(function(){return V})),n.d(t,"IS_HUAWEIBROWSER",(function(){return F})),n.d(t,"BROWSER_VERSION",(function(){return B})),n.d(t,"IS_LOCAL",(function(){return q}));const r="undefined"!=typeof window,i="undefined"!=typeof wx,o=window.navigator&&window.navigator.userAgent||"",a=/AppleWebKit\/([\d.]+)/i.exec(o),s=a?parseFloat(a.pop()):null,c=/iPad/i.test(o),u=/iPhone/i.test(o)&&!c,l=/iPod/i.test(o),d=u||c||l,p=function(){const e=o.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),f=/Android/i.test(o),h=function(){const e=o.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(`${e[1]}.${e[2]}`):t||null}(),g=f&&/webkit/i.test(o)&&h<2.3,v=f&&h<5&&s<537,m=/Firefox/i.test(o),_=function(){const e=o.match(/Firefox\/(\d+)/);return e&&e[1]?parseFloat(e[1]):null}(),y=/Edge\//i.test(o),b=/Edg\//i.test(o),I=function(){const e=o.match(/Edg\/(\d+)/);return e&&e[1]?parseFloat(e[1]):null}(),T=!y&&/Chrome/i.test(o),C=function(){const e=o.match(/Chrome\/(\d+)/);return e&&e[1]?parseFloat(e[1]):null}(),S=function(){const e=o.match(/Chrome\/([\d.]+)/);return e&&e[1]?e[1]:null}(),E=/MSIE\s8\.0/.test(o),M=function(){const e=/MSIE\s(\d+)\.\d/.exec(o);let t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(o)&&/rv:11.0/.test(o)&&(t=11),t}(),k=/Safari/i.test(o)&&!T&&!f&&!y,w=k||d,O=function(){const e=o.match(/Version\/([\d.]+)/);return e&&e[1]?e[1]:null}(),D=/TBS\/\d+/i.test(o),A=function(){const e=o.match(/TBS\/(\d+)/i);if(e&&e[1])return e[1]}(),R=!D&&/MQQBrowser\/\d+/i.test(o),x=!D&&/ QQBrowser\/\d+/i.test(o),L=/(micromessenger|webbrowser)/i.test(o),N=/Windows/i.test(o),P=/MAC OS X/i.test(o),j=/Linux/i.test(o),U=/MicroMessenger/i.test(o),G=/UCBrowser/i.test(o),V=/MiuiBrowser/i.test(o),F=/HuaweiBrowser/i.test(o),B=T?"Chrome/"+S:k?"Safari/"+O:"NotSupportedBrowser",q="file:"===location.protocol||"localhost"===location.hostname||/^\d+\.\d+\.\d+\.\d+$/.test(location.hostname)},function(e,t,n){"use strict";n.r(t),t.default={SDK_CONSTRUCT:"sdkConstruct",SDK_READY:"sdkReady",SDK_NOT_READY:"sdkNotReady",LOGIN:"login",LOGOUT:"logout",CALL:"call",GROUP_CALL:"groupCall",ACCEPT:"accept",REJECT:"reject",HANGUP:"hangup",START_REMOTE_VIEW:"startRemoteView",STOP_REMOTE_VIEW:"stopRemoteView",START_LOCAL_VIEW:"startLocalView",STOP_LOCAL_VIEW:"stopLocalView",OPEN_CAMERA:"openCamera",CLOSE_CAMERA:"closeCamera",SET_MIC_MUTE:"setMicMute",SET_VIDEO_QUALITY:"setVideoQuality",SWITCH_TO_AUDIO_CALL:"switchToAudioCall",SWITCH_TO_VIDEO_CALL:"switchToVideoCall",CHANGE_CALL_STATUS:"changeCallStatus",TALK_TIME:"talktime",ERROR:"error",INVITED:"invited",GROUP_CALL_INVITEE_LIST_UPDATE:"group_call_invitee_list_update",USER_ENTER:"user_enter",USER_LEAVE:"user_leave",NO_RESP:"no_resp",LINE_BUSY:"line_busy",CALLING_CANCEL:"calling_cancel",KICKED_OUT:"kicked_out",CALLING_TIMEOUT:"calling_timeout",CALLING_END:"calling_end",USER_VIDEO_AVAILABLE:"user_video_available",USER_AUDIO_AVAILABLE:"user_audio_available",USER_VOICE_VOLUME:"user_voice_volume",CALL_TYPE_CHANGED:"call_type_changed",DEVICED_UPDATED:"deviced_updated",QUALITY_REPORT:"quality_report"}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return h}));var r=n(0),i=n(1);class o{constructor(){this._table="timweb-trtccalling",this._report=[]}pushIn(e){r.default.debug("SSOLogBody.pushIn",this._report.length,e),this._report.push(e)}backfill(e){Object(i.isArray)(e)&&0!==e.length&&(r.default.debug("SSOLogBody.backfill",this._report.length,e.length),this._report.unshift(...e))}getLogsNumInMemory(){return this._report.length}isEmpty(){return 0===this._report.length}_reset(){this._report.length=0,this._report=[]}getTable(){return this._table}getLogsInMemory(){const e=this._report.slice();return this._reset(),e}}var a=n(9),s=n(16),c=n(28),u=n.n(c);const l={CURRENT:{COMMON:"https://webim.tim.qq.com"},PRODUCTION:{COMMON:"https://webim.tim.qq.com"},OVERSEA_PRODUCTION:{COMMON:"https://api.im.qcloud.com"},SANDBOX:{COMMON:"https://events.tim.qq.com"},TEST:{COMMON:"https://test.tim.qq.com"}},d={IM_OPEN_STAT:"imopenstat"},p={TIM_WEB_TRTCCALLING_REPORT:"tweb_trtccalling_report"},f={imopenstat:"v4"};class h{constructor(){this.TAG="trtccalling-ssolog-event",this._reportBody=new o,this._version=s.version||"",this.MIN_THRESHOLD=20,this.MAX_THRESHOLD=100,this.WAITING_TIME=6e4,this.INTERVAL=2e4,this._timerID=0,this._resetLastReportTime(),this._startReportTimer(),this._retryCount=0,this.MAX_RETRY_COUNT=3}reportAtOnce(){r.default.debug("EventStatController.reportAtOnce"),this._report()}pushIn(e){e instanceof a.default&&(e.setCommonInfo({SDKAppID:Number(sessionStorage.getItem("sdkAppId")),version:this._version,userID:sessionStorage.getItem("userId")}),this._reportBody.pushIn(e),this._report())}_resetLastReportTime(){this._lastReportTime=Date.now()}_startReportTimer(){this._timerID=setInterval(()=>{Date.now()<this._lastReportTime+this.WAITING_TIME||this._reportBody.isEmpty()||this._report()},this.INTERVAL)}_stopReportTimer(){this._timerID>0&&(clearInterval(this._timerID),this._timerID=0)}_report(){if(this._reportBody.isEmpty())return;const e=Math.ceil(+new Date/1e3),t=sessionStorage.getItem("sdkAppId"),n=this._reportBody.getLogsInMemory(),o={table:this._reportBody.getTable(),report:n},a=`${l.CURRENT.COMMON}/${f.imopenstat}/${d.IM_OPEN_STAT}/${p.TIM_WEB_TRTCCALLING_REPORT}/?sdkappid=${t}&reqtime=${e}`;u.a.post(a,JSON.stringify(o)).then(()=>{this._resetLastReportTime(),this._retryCount>0&&(r.default.debug("EventStatController.report retry success"),this._retryCount=0)}).catch(e=>{r.default.warn("EventStatController.report, error:"+Object(i.stringifyError)(e)),this._reportBody.backfill(n),this._reportBody.getLogsNumInMemory()>this.MAX_THRESHOLD||this._retryCount===this.MAX_RETRY_COUNT||0===this._timerID?this._retryCount=0:this._retryCount+=1})}reset(){r.default.log("EventStatController.reset"),this._stopReportTimer(),this._report()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TUICommonDefine=t.TUICallType=void 0,t.TUICallType={AUDIO_CALL:1,VIDEO_CALL:2,DEVCIED_CAMERA:"camera",DEVCIED_MICROPHONES:"microphones"},t.TUICommonDefine={VideoEncoderParams:{"120p":"120p","120p_2":"120p_2","180p":"180p","180p_2":"180p_2","240p":"240p","360p":"360p","360p_2":"360p_2","480p":"480p","480p_2":"480p_2","720p":"720p","1080p":"1080p","1440p":"1440p","4K":"4K"}}},function(e,t,n){"use strict";(function(t){var r=n(3),i=n(42),o=n(20),a={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c,u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(c=n(21)),c),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(s(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,a=!n&&"json"===this.responseType;if(a||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(a){if("SyntaxError"===e.name)throw o(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){u.headers[e]=r.merge(a)})),e.exports=u}).call(this,n(41))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TUICallEvent=void 0,t.TUICallEvent={ERROR:"onError",SDK_READY:"sdkReady",INVITED:"onInvited",USER_ACCEPT:"onUserAccept",USER_ENTER:"onUserEnter",USER_LEAVE:"onUserLeave",REJECT:"onReject",NO_RESP:"onNoResp",LINE_BUSY:"onLineBusy",CALLING_CANCEL:"onCallingCancel",KICKED_OUT:"onKickedOut",CALLING_TIMEOUT:"onCallingTimeout",CALL_END:"onCallEnd",CALLING_END:"onCallEnd",USER_VIDEO_AVAILABLE:"onUserVideoAvailable",USER_AUDIO_AVAILABLE:"onUserAudioAvailable",USER_VOICE_VOLUME:"onUserVoiceVolume",GROUP_CALL_INVITEE_LIST_UPDATE:"onGroupCallInviteeListUpdate",CALL_TYPE_CHANGED:"onCallTypeChanged",DEVICED_UPDATED:"onDeviceUpdated",MESSAGE_SENT_BY_ME:"onMessageSentByMe"}},function(e){e.exports=JSON.parse('{"name":"tuicall-engine-webrtc","version":"1.3.7","description":"腾讯云 tuicall-engine-webrtc","main":"index","private":true,"dependencies":{"axios":"^0.21.0","dayjs":"^1.11.7","EventEmitter":"^1.0.0","rtc-ai-denoiser":"^1.1.3","tim-js-sdk":"^2.26.2","trtc-js-sdk":"^4.15.3","tsignaling":"^1.0.5","tuicall-engine-webrtc":"^1.3.4"},"devDependencies":{"@babel/preset-typescript":"^7.12.7","@tencent/eslint-config-tencent":"^0.16.1","@typescript-eslint/eslint-plugin":"^4.33.0","@typescript-eslint/parser":"^4.33.0","docdash-blue":"^1.1.9","eslint":"^7.27.0","eslint-config-google":"^0.14.0","eslint-plugin-prettier":"^4.0.0","fs-extra":"^9.0.1","jsdoc":"^3.6.11","prettier":"^2.5.0","pretty":"^2.0.0","replace":"^1.2.2","rimraf":"^4.1.2","ts-loader":"^8.4.0","typescript":"^3.9.7","watch":"^1.0.2","webpack":"^4.44.1","webpack-cli":"^3.3.12"},"scripts":{"watch":"watch \'npm run build_withcopy3\' src","dev":"npm run watch","build":"webpack --config webpack.config.js","build_withcopy":"npm run build && cp dist/npm/tuicall-engine-webrtc.js ../../github/TUICalling/Web/node_modules/tuicall-engine-webrtc/tuicall-engine-webrtc.js","build_withcopy2":"npm run build && cp dist/npm/tuicall-engine-webrtc.js ../sdk/trtc-calling-webrtc-demo/node_modules/tuicall-engine-webrtc/tuicall-engine-webrtc.js","build_withcopy3":"npm run build && cp dist/npm/tuicall-engine-webrtc.js ./example-js/tuicall-engine-webrtc.js","build:package":"node build/package-bundle.js","lint":"./node_modules/.bin/eslint ./src; exit 0","fix":"./node_modules/.bin/eslint --fix ./src; exit 0","prerelease":"npm run lint && npm run build && npm run doc && npm run build:package","doc":"npm run doc:clean && tsc  --target ESNEXT && npm run doc:build","doc:build":"npm run changelog && npm run main && ./node_modules/.bin/jsdoc -c build/jsdoc/jsdoc.json && node ./build/jsdoc/fix-doc.js","doc:clean":"node ./build/jsdoc/clean-doc.js","changelog":"cp CHANGELOG.md build/jsdoc/tutorials/20-CHANGELOG.md","main":"cp README.md build/jsdoc/main.md"},"repository":{"type":"git","url":"git@git.code.oa.com:TRDCWeb/trtc-calling-webrtc.git"},"author":"Tencent Cloud Terminal R&D Center","license":"ISC"}')},function(t,n){t.exports=e},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(3);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(3),i=n(43),o=n(44),a=n(19),s=n(45),c=n(48),u=n(49),l=n(22);e.exports=function(e){return new Promise((function(t,n){var d=e.data,p=e.headers,f=e.responseType;r.isFormData(d)&&delete p["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var g=e.auth.username||"",v=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";p.Authorization="Basic "+btoa(g+":"+v)}var m=s(e.baseURL,e.url);function _(){if(h){var r="getAllResponseHeaders"in h?c(h.getAllResponseHeaders()):null,o={data:f&&"text"!==f&&"json"!==f?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:r,config:e,request:h};i(t,n,o),h=null}}if(h.open(e.method.toUpperCase(),a(m,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,"onloadend"in h?h.onloadend=_:h.onreadystatechange=function(){h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))&&setTimeout(_)},h.onabort=function(){h&&(n(l("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){n(l("Network Error",e,null,h)),h=null},h.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var y=(e.withCredentials||u(m))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;y&&(p[e.xsrfHeaderName]=y)}"setRequestHeader"in h&&r.forEach(p,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete p[t]:h.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),f&&"json"!==f&&(h.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){h&&(h.abort(),n(e),h=null)})),d||(d=null),h.send(d)}))}},function(e,t,n){"use strict";var r=n(20);e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";var r=n(3);e.exports=function(e,t){t=t||{};var n={},i=["url","method","data"],o=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function c(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function u(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=c(void 0,e[i])):n[i]=c(e[i],t[i])}r.forEach(i,(function(e){r.isUndefined(t[e])||(n[e]=c(void 0,t[e]))})),r.forEach(o,u),r.forEach(a,(function(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=c(void 0,e[i])):n[i]=c(void 0,t[i])})),r.forEach(s,(function(r){r in t?n[r]=c(e[r],t[r]):r in e&&(n[r]=c(void 0,e[r]))}));var l=i.concat(o).concat(a).concat(s),d=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===l.indexOf(e)}));return r.forEach(d,u),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.validateBusiness=t.businessValidate=void 0;var o=n(8),a=n(4),s=n(5),c=n(7);function u(e,t,n){return r(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.tim.callExperimentalAPI("isCommercialAbilityEnabled",e)];case 1:if(r.sent().data.enabled)return[2,t.apply(this,n)];try{e===c.CALL_EXPERMENTEL_API_TYPE.BASE&&(this._callDataReport.setCodeAndMessage(a.default.ERROR_PACKAGE_NOT_SUPPORTED,s.ERROR_MESSAGE.ERROR_PACKAGE_NOT_SUPPORTED),this._callDataReport.uploadToKibana())}catch(e){console.warn("base ability check failed, userId:"+this.getUserID()+", error: "+e)}throw new o.default({message:s.ERROR_MESSAGE.ERROR_PACKAGE_NOT_SUPPORTED,code:a.default.ERROR_PACKAGE_NOT_SUPPORTED});case 2:throw 2905===r.sent().code?new o.default({message:s.ERROR_MESSAGE.ERROR_TIM_VERSION_OUTDATED+" >= 2.21.2",code:a.default.ERROR_TIM_VERSION_OUTDATED}):new o.default({message:s.ERROR_MESSAGE.ERROR_PACKAGE_NOT_SUPPORTED,code:a.default.ERROR_PACKAGE_NOT_SUPPORTED});case 3:return[2]}}))}))}t.businessValidate=function(e){return function(t,n,o){var a=o.value;return o.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return r(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,u.call(this,e,a,t)];case 1:return[2,n.sent()];case 2:throw n.sent();case 3:return[2]}}))}))},o}},t.validateBusiness=function(e,t){return r(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.callExperimentalAPI("isCommercialAbilityEnabled",t)];case 1:if((n=r.sent()).data.enabled)return[2,Promise.resolve(n.data.enabled)];throw new o.default({message:s.ERROR_MESSAGE.ERROR_PACKAGE_NOT_SUPPORTED,code:a.default.ERROR_PACKAGE_NOT_SUPPORTED});case 2:throw 2905===r.sent().code?new o.default({message:s.ERROR_MESSAGE.ERROR_TIM_VERSION_OUTDATED+" >= 2.21.2",code:a.default.ERROR_TIM_VERSION_OUTDATED}):new o.default({message:s.ERROR_MESSAGE.ERROR_PACKAGE_NOT_SUPPORTED,code:a.default.ERROR_PACKAGE_NOT_SUPPORTED});case 3:return[2]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.API_STATUS=t.VALIDATE_TYPR=void 0,function(e){e.NUMBER="number",e.STRING="string",e.FUNCTION="function",e.OBJECT="object",e.ARRAY="array",e.BOOLEAN="boolean"}(t.VALIDATE_TYPR||(t.VALIDATE_TYPR={})),function(e){e.ADD="add",e.DEL="del"}(t.API_STATUS||(t.API_STATUS={}))},function(e,t,n){e.exports=n(36)},function(e,t,n){e.exports=function(){"use strict";var e=6e4,t=36e5,n="millisecond",r="second",i="minute",o="hour",a="day",s="week",c="month",u="quarter",l="year",d="date",p="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},v=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},m={s:v,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+v(r,2,"0")+":"+v(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,c),o=n-i<0,a=t.clone().add(r+(o?-1:1),c);return+(-(r+(n-i)/(o?i-a:a-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:l,w:s,d:a,D:d,h:o,m:i,s:r,ms:n,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},_="en",y={};y[_]=g;var b=function(e){return e instanceof S},I=function e(t,n,r){var i;if(!t)return _;if("string"==typeof t){var o=t.toLowerCase();y[o]&&(i=o),n&&(y[o]=n,i=o);var a=t.split("-");if(!i&&a.length>1)return e(a[0])}else{var s=t.name;y[s]=t,i=s}return!r&&i&&(_=i),i||!r&&_},T=function(e,t){if(b(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new S(n)},C=m;C.l=I,C.i=b,C.w=function(e,t){return T(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var S=function(){function g(e){this.$L=I(e.locale,null,!0),this.parse(e)}var v=g.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(C.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(f);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return C},v.isValid=function(){return!(this.$d.toString()===p)},v.isSame=function(e,t){var n=T(e);return this.startOf(t)<=n&&n<=this.endOf(t)},v.isAfter=function(e,t){return T(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<T(e)},v.$g=function(e,t,n){return C.u(e)?this[t]:this.set(n,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var n=this,u=!!C.u(t)||t,p=C.p(e),f=function(e,t){var r=C.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return u?r:r.endOf(a)},h=function(e,t){return C.w(n.toDate()[e].apply(n.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},g=this.$W,v=this.$M,m=this.$D,_="set"+(this.$u?"UTC":"");switch(p){case l:return u?f(1,0):f(31,11);case c:return u?f(1,v):f(0,v+1);case s:var y=this.$locale().weekStart||0,b=(g<y?g+7:g)-y;return f(u?m-b:m+(6-b),v);case a:case d:return h(_+"Hours",0);case o:return h(_+"Minutes",1);case i:return h(_+"Seconds",2);case r:return h(_+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var s,u=C.p(e),p="set"+(this.$u?"UTC":""),f=(s={},s[a]=p+"Date",s[d]=p+"Date",s[c]=p+"Month",s[l]=p+"FullYear",s[o]=p+"Hours",s[i]=p+"Minutes",s[r]=p+"Seconds",s[n]=p+"Milliseconds",s)[u],h=u===a?this.$D+(t-this.$W):t;if(u===c||u===l){var g=this.clone().set(d,1);g.$d[f](h),g.init(),this.$d=g.set(d,Math.min(this.$D,g.daysInMonth())).$d}else f&&this.$d[f](h);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[C.p(e)]()},v.add=function(n,u){var d,p=this;n=Number(n);var f=C.p(u),h=function(e){var t=T(p);return C.w(t.date(t.date()+Math.round(e*n)),p)};if(f===c)return this.set(c,this.$M+n);if(f===l)return this.set(l,this.$y+n);if(f===a)return h(1);if(f===s)return h(7);var g=(d={},d[i]=e,d[o]=t,d[r]=1e3,d)[f]||1,v=this.$d.getTime()+n*g;return C.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=C.z(this),o=this.$H,a=this.$m,s=this.$M,c=n.weekdays,u=n.months,l=function(e,n,i,o){return e&&(e[n]||e(t,r))||i[n].slice(0,o)},d=function(e){return C.s(o%12||12,e,"0")},f=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},g={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:C.s(s+1,2,"0"),MMM:l(n.monthsShort,s,u,3),MMMM:l(u,s),D:this.$D,DD:C.s(this.$D,2,"0"),d:String(this.$W),dd:l(n.weekdaysMin,this.$W,c,2),ddd:l(n.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(o),HH:C.s(o,2,"0"),h:d(1),hh:d(2),a:f(o,a,!0),A:f(o,a,!1),m:String(a),mm:C.s(a,2,"0"),s:String(this.$s),ss:C.s(this.$s,2,"0"),SSS:C.s(this.$ms,3,"0"),Z:i};return r.replace(h,(function(e,t){return t||g[e]||i.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(n,d,p){var f,h=C.p(d),g=T(n),v=(g.utcOffset()-this.utcOffset())*e,m=this-g,_=C.m(this,g);return _=(f={},f[l]=_/12,f[c]=_,f[u]=_/3,f[s]=(m-v)/6048e5,f[a]=(m-v)/864e5,f[o]=m/t,f[i]=m/e,f[r]=m/1e3,f)[h]||m,p?_:C.a(_)},v.daysInMonth=function(){return this.endOf(c).$D},v.$locale=function(){return y[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=I(e,t,!0);return r&&(n.$L=r),n},v.clone=function(){return C.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},g}(),E=S.prototype;return T.prototype=E,[["$ms",n],["$s",r],["$m",i],["$H",o],["$W",a],["$M",c],["$y",l],["$D",d]].forEach((function(e){E[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),T.extend=function(e,t){return e.$i||(e(t,S,T),e.$i=!0),T},T.locale=I,T.isDayjs=b,T.unix=function(e){return T(1e3*e)},T.en=y[_],T.Ls=y,T.p={},T}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31),i=n(15),o=n(13);t.default={TUICallEngine:r.default,TUICallEvent:i.TUICallEvent,TUICallType:o.TUICallType}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},c=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0});var u=n(32),l=n(1),d=n(33),p=n(17),f=n(56),h=n(57),g=n(59),v=n(9),m=n(11),_=n(12),y=n(10),b=n(60),I=n(0),T=n(7),C=n(8),S=n(4),E=n(5),M=n(2),k=n(61),w=n(68),O=p,D=f,A=n(16),R="TUICallEngine",x=function(){function e(e){this._permission={audio:!1,video:!1},this._sdkAppID=e.SDKAppID,this._isLogin=!1,this._trtcClient=null,this._userID="",this._userSig="",this._switchCallModeStatus=!0,this._timExternal=!1,this._inviterInviteID={},this._audioVideoSwitchIdList=[],this._acceptedUserObject={},this._callTimeout=30,this._callStatus=T.CALL_STATUS.IDLE,this._callType=T.CALL_TYPE.UNKNOWN,this._roomID=0,this._isInviter=!1,this._isGroupCall=!1,this._groupCallStatus=!1,this._inviteeList=[],this._unHandledInviteeList=[],this._handledInviteeList=[],sessionStorage.setItem("sdkAppId",""+this._sdkAppID),this._localViewId="",this._netMonitor=new b.default,this._outerEmitter=new u.default,this._delegate=new g.default(this._outerEmitter),this._callDataReport=new w.CallDataReport({version:A.version,sdkAppId:e.SDKAppID}),this._dataReportObserver=new w.TUICallEngineObserver(this._outerEmitter,this._callDataReport),this._connectStartTime=0,e.tim&&(this._timExternal=!0),this.tim=e.tim||D.create(e),this._tsignalingClient=new h.default(this,r(r({tim:this.tim},e),{isRejectNotifyAll:!0})),this._quality="480p",this._playOptions={mirror:!1,muted:!0,objectFit:M.NAME.COVER};var t=new v.default(m.default.SDK_CONSTRUCT);this._eventStatController=new _.default,v.default.bindController(this._eventStatController),t.setText("version="+A.version+"-ua="+y.USER_AGENT).setEnd(),I.default.info(R+" SDK Version:"+A.version+", SDKAppID:"+e.SDKAppID+", UserAgent:"+y.USER_AGENT)}return e.prototype.getDevicePermission=function(){return this._permission},e.prototype.setDevicePermission=function(e,t){this._permission[e]=t},e.prototype.getTrtcClient=function(){var e;return null===(e=this._trtcClient)||void 0===e?void 0:e.getClient()},e.prototype.getUserID=function(){return this._userID},e.prototype.setRoomID=function(e){this._roomID=e},e.prototype.getRoomID=function(){return this._roomID},e.prototype.getCallType=function(){return this._callType},e.prototype.setCallType=function(e){this._callType=e},e.prototype.isInviter=function(){return this._isInviter},e.prototype.setConnectStartTime=function(e){this._connectStartTime=e},e.prototype.getConnectStartTime=function(){return this._connectStartTime},e.prototype.getInviteeList=function(){return this._inviteeList},e.prototype.setInviteeList=function(e){this._inviteeList=c(e)},e.prototype.getCallDataReport=function(){return this._callDataReport},e.prototype.getUnHandledInviteeList=function(){return this._unHandledInviteeList||[]},e.prototype.setUnHandledInviteeList=function(e){this._unHandledInviteeList=c(e),I.default.log(R+".setUnHandledInviteeList",this._unHandledInviteeList)},e.prototype.addUnHandledInviteeList=function(e){var t=this;void 0===e&&(e=[]),0!==e.length&&e.forEach((function(e){-1===t._unHandledInviteeList.indexOf(e)&&t._unHandledInviteeList.push(e)}))},e.prototype.deleteUnHandledInviteeList=function(e){var t=this;void 0===e&&(e=[]),0!==e.length&&e.forEach((function(e){t._unHandledInviteeList=t._unHandledInviteeList.filter((function(t){return t!==e}))}))},e.prototype.getHandledInviteeList=function(){return this._handledInviteeList||[]},e.prototype.setHandledInviteeList=function(e){this._handledInviteeList=c(e),I.default.log(R+".setHandledInviteeList",this._handledInviteeList)},e.prototype.addHandledInviteeList=function(e){var t=this;void 0===e&&(e=[]),0!==e.length&&e.forEach((function(e){-1===t._handledInviteeList.indexOf(e)&&t._handledInviteeList.push(e)}))},e.prototype.deleteHandledInviteeList=function(e){var t=this;void 0===e&&(e=[]),0!==e.length&&e.forEach((function(e){t._handledInviteeList=t._handledInviteeList.filter((function(t){return t!==e}))}))},e.prototype.isGroupCall=function(){return this._isGroupCall},e.prototype.setIsGroupCall=function(e){this._isGroupCall=e},e.prototype.getGroupID=function(){return this._groupID},e.prototype.setGroupID=function(e){this._groupID=e},e.prototype.setPlayOptions=function(e){void 0===e&&(e={}),this._playOptions=r(r({},this._playOptions),e)},e.prototype.getPlayOptions=function(){return this._playOptions||{}},e.prototype.addAcceptedUserList=function(e,t){var n=this;if(0!==t.length)if(e)0===(this._acceptedUserObject[e]||[]).length?this._acceptedUserObject[e]=t:t.forEach((function(t){-1===n._acceptedUserObject[e].indexOf(t)&&n._acceptedUserObject[e].push(t)}));else for(var r=this.getInviterInviteIdList(),i=function(e){var i=r[e],a=o.getInviterInviteIdUserList(i),s=t.filter((function(e){return-1!==a.indexOf(e)}));0===(o._acceptedUserObject[i]||[]).length?o._acceptedUserObject[i]=s:s.forEach((function(e){-1===n._acceptedUserObject[i].indexOf(e)&&n._acceptedUserObject[i].push(e)}))},o=this,a=0;a<r.length;a++)i(a)},e.prototype.getAcceptedUserList=function(e){return this._acceptedUserObject[e]||[]},e.createInstance=function(t){return e.instance||(e.instance=new e(t)),e.instance},e.prototype.destroyInstance=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return this._isLogin?[4,this.logout()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this._callDataReport.reset(),this._dataReportObserver.removeLister(),e.instance=null,[2]}}))}))},e.prototype.setLogLevel=function(e){I.default.setLevel(e),this._tsignalingClient.setLogLevel(e),O.Logger.setLogLevel(1)},e.prototype.on=function(e,t,n){this._outerEmitter.on(e,t,n||this)},e.prototype.off=function(e,t,n){this._outerEmitter.off(e,t,n||this)},e.prototype.init=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){return[2,this.login(e)]}))}))},e.prototype.login=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i,o;return s(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),I.default.debug(R+".login - params:",e),this._netMonitor.start(),t=e.userID,n=e.userSig,r=e.assetsPath,this._userID=t,this._callDataReport.setUserID(t),this._userSig=n,this._trtcClient=new d.default({sdkAppID:this._sdkAppID,userID:t,userSig:n,tuiCallEngine:this,assetsPath:r}),sessionStorage.setItem("userId",""+this._userID),[4,this._tsignalingClient.login({userID:t,userSig:n})];case 1:return i=a.sent(),this._isLogin=!0,this._setInterfaceUpLoad(m.default.LOGIN).setText("userId: "+this._userID+" login succeeded, assetsPath: "+r).setEnd(),[2,i];case 2:throw o=a.sent(),this._setInterfaceUpLoad(m.default.LOGIN).setText("userId: "+this._userID+" login failed, error: "+o).setEnd(),new Error(R+".login - userId: "+this._userID+" login failed, error: "+o+" ");case 3:return[2]}}))}))},e.prototype.logout=function(){return a(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:I.default.debug(R+".logout"),this._setInterfaceUpLoad(m.default.LOGOUT).setText("userId: "+this._userID+" logout").setEnd(),this._userID="",this._userSig="",t.label=1;case 1:return t.trys.push([1,5,,6]),[4,this._resetTUICallEngine()];case 2:return t.sent(),this._trtcClient=null,this._isLogin=!1,this._timExternal?[3,4]:[4,this._tsignalingClient.logout()];case 3:t.sent(),t.label=4;case 4:return[2,!0];case 5:throw e=t.sent(),new Error(R+".logout failed, error: "+e+" ");case 6:return[2]}}))}))},e.prototype.call=function(e){return a(this,void 0,void 0,(function(){var t,n,i,o,a,c,u,d,p,f;return s(this,(function(s){switch(s.label){case 0:I.default.log(R+".call - params:",e),this._callDataReport.setAbilityBit(!0),this._callDataReport.setCallScene(M.NAME.SINGLE_CALL),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._trtcClient.getMediaDevicesAuth({audio:!0})];case 2:return s.sent(),[3,4];case 3:throw t=s.sent(),this._delegate.onError(S.default.NOT_MEDIA_ACCESS,JSON.stringify(t)),this._callDataReport.setCodeAndMessage(S.default.NOT_MEDIA_ACCESS,JSON.stringify(t)),this._callDataReport.uploadToKibana(),new Error(R+".call failed. error: "+t);case 4:if(n=e.userID,i=e.type,o=e.offlinePushInfo,a=e.roomID,c=e.timeout,this.getUserID()===n)throw I.default.log(R+".call failed. Called id can't be yourself. userId:"+this.getUserID()+", inviteeId:"+n),new Error(R+".call failed. Called id can't be yourself. userId:"+this.getUserID()+", inviteeId:"+n);this._callStatus=T.CALL_STATUS.CALLING,this._callType=i,this._isInviter=!0,this._inviterID=this._userID,this._inviteeID=n,this._isGroupCall=!1,this._groupID="",this._roomID=a||l.generateRandomRoomID(),this._callTimeout=c||this._callTimeout,I.default.info("roomID:"+this._roomID),s.label=5;case 5:return s.trys.push([5,11,,13]),[4,this._trtcClient.join(this._roomID)];case 6:return s.sent(),this._callDataReport.setEnterRoomTime((new Date).getTime()),this._tsignalingClient.setTSignalingIsJoined(!0),u=this._callDataReport.getCallData(),u=r(r({},u),{roomID:this._roomID,callRole:T.CALL_ROLE.INVITER,callType:this._callType,inviteeList:[n]}),this._callDataReport.setCallData(u),[4,this._tsignalingClient.invite({userID:n,type:i,roomID:this._roomID,timeout:this._callTimeout,offlinePushInfo:o,userIDList:[n]})];case 7:return d=s.sent(),this._callDataReport.setSendSignalingTime((new Date).getTime()),this.setHandledInviteeList([this._userID]),this.setUnHandledInviteeList([n]),p="callType: "+(i+1)+",\n        conversationType: "+d.data.message.conversationType+", \n        userId:{ "+d.data.message.from+" } invite userId:{ "+d.data.message.to+" }",0!==d.code?[3,8]:(this.addInviterInviteId(d.inviteID,[this._userID,n]),this._callDataReport.setInviteID(d.inviteID),this._setInterfaceUpLoad(m.default.CALL).setCallType(i+1).setText(p+" succeeded").setEnd(),[3,10]);case 8:return this._callDataReport.setCodeAndMessage(d.code,d.message),this._callDataReport.uploadToKibana(),this._setInterfaceUpLoad(m.default.CALL).setCallType(i+1).setText(p+" failed").setEnd(),[4,this._resetTUICallEngine()];case 9:s.sent(),s.label=10;case 10:return[2,d];case 11:return(f=s.sent()).getCode?this._callDataReport.setCodeAndMessage(f.getCode(),f.message):this._callDataReport.setCodeAndMessage(S.default.UNKNOWN,JSON.stringify(f)),this._callDataReport.uploadToKibana(),[4,this._resetTUICallEngine()];case 12:throw s.sent(),new C.default({message:R+"<call>: failed "+f.message,code:f.code});case 13:return[2]}}))}))},e.prototype.addAudioVideoSwitchIdList=function(e){e&&this._audioVideoSwitchIdList.push(e)},e.prototype.getAudioVideoSwitchIdList=function(){return this._audioVideoSwitchIdList||[]},e.prototype.addInviterInviteId=function(e,t){0!==t.length&&(0===(this._inviterInviteID[e]||[]).length?this._inviterInviteID[e]=t:this._inviterInviteID[e]=c(this._inviterInviteID[e],t))},e.prototype.getInviterInviteIdList=function(){return Object.keys(this._inviterInviteID||{})},e.prototype.getTotalInviterInviteIdList=function(){var e=this.getInviterInviteIdList();return c(this._audioVideoSwitchIdList,e)},e.prototype.getInviterInviteIdUserList=function(e){return this._inviterInviteID[e]||[]},e.prototype._setInterfaceUpLoad=function(e){return I.default.time(e),new v.default(e)},e.prototype.getInviterID=function(){return this._inviterID},e.prototype.setInviterID=function(e){this._inviterID=e},e.prototype.groupCall=function(e){var t;return a(this,void 0,void 0,(function(){var n,r,i,o,a,u,d,p,f,h;return s(this,(function(s){switch(s.label){case 0:if(0===(null===(t=null==e?void 0:e.userIDList)||void 0===t?void 0:t.length))throw new C.default({message:R+"<groupCall>: userIDList don'\t empty ",code:S.default.ERROR_PARAM_INVALID});if(this._groupCallStatus)throw new Error(R+".groupCall - CALL_STATUS: "+this._callStatus);this._groupCallStatus=!0,I.default.debug(R+".groupCall - params:",e),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._trtcClient.getMediaDevicesAuth({audio:!0})];case 2:return s.sent(),[3,4];case 3:throw n=s.sent(),this._delegate.onError(S.default.NOT_MEDIA_ACCESS,JSON.stringify(n)),new Error(R+".groupCall failed. error: "+n);case 4:if(r=e.userIDList,i=e.type,o=e.groupID,a=e.offlinePushInfo,u=e.roomID,d=e.timeout,-1!==(r=c(r)).indexOf(this.getUserID()))throw I.default.log(R+".groupCall failed. Called list can't contain yourself. userId:"+this.getUserID()+", inviteeIdList:"+r),new Error(R+".groupCall failed. Called list can't contain yourself. userId:"+this.getUserID()+", inviteeIdList:"+r);this._callType=i,this._isInviter=!0,this._isGroupCall=!0,this._inviterID=this._userID,this._groupID=o||"",this.setInviteeList(r),this.setHandledInviteeList([this._userID]),this.setUnHandledInviteeList(r),this._roomID||(this._roomID=u||l.generateRandomRoomID(),this._callStatus=T.CALL_STATUS.CALLING),this._callTimeout=d||this._callTimeout,this._callDataReport.setCallScene(M.NAME.GROUP_CALL),s.label=5;case 5:return s.trys.push([5,8,,10]),[4,this._trtcClient.join(this._roomID)];case 6:return s.sent(),this._tsignalingClient.setTSignalingIsJoined(!0),[4,this._tsignalingClient.inviteInGroup({groupID:this._groupID,userIDList:r,type:i,roomID:this._roomID,timeout:this._callTimeout,offlinePushInfo:a})];case 7:return p=s.sent(),I.default.log("groupCall res",p),o&&(f="callType: "+(i+1)+",\n        conversationType: "+p.data.message.conversationType+",\n        userId:{ "+p.data.message.from+" } invite { "+p.data.message.to+": "+r+" }",0===p.code?(this.addInviterInviteId(p.inviteID,c([this._userID],r)),this._setInterfaceUpLoad(m.default.GROUP_CALL).setCallType(i+1).setText(f+"  succeeded").setEnd()):this._setInterfaceUpLoad(m.default.GROUP_CALL).setCallType(i+1).setText(f+"  failed").setEnd()),this._groupCallStatus=!1,[2,p];case 8:return h=s.sent(),[4,this._resetTUICallEngine()];case 9:throw s.sent(),new C.default({message:R+"<groupCall>: failed "+h.message,code:h.code});case 10:return[2]}}))}))},e.prototype.joinInGroupCall=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i,o;return s(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this._trtcClient.getMediaDevicesAuth({audio:!0})];case 1:return a.sent(),[3,3];case 2:throw t=a.sent(),new Error(R+".joinInGroupCall failed, error: "+t);case 3:return a.trys.push([3,5,,7]),n=e.roomID,r=e.type,i=e.groupID,this._callType=r,this._groupID=i,this._roomID=n,this._isGroupCall=!0,this._isInviter=!1,this.addHandledInviteeList([this.getUserID()]),this.changeCallStatus(T.CALL_STATUS.CALLING),[4,this._trtcClient.join(n)];case 4:return a.sent(),I.default.log(R+".joinInGroupCall roomID:"+n+",type:"+r+",userID:"+this.getUserID()),[3,7];case 5:return o=a.sent(),[4,this._resetTUICallEngine()];case 6:throw a.sent(),new Error(R+".joinInGroupCall failed error: "+o);case 7:return[2]}}))}))},e.prototype.inviteUser=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i,o,a,u,l,d,p,f,h=this;return s(this,(function(s){switch(s.label){case 0:if(!this.isGroupCall())throw I.default.error(R+".inviteUser failed - groupID:"+this._groupID+", roomID:"+this._roomID+", type:"+this._callType),new Error(R+".inviteUser failed - groupID:"+this._groupID+", roomID:"+this._roomID+", type:"+this._callType);if(!this.isInviter()&&this._callStatus!==T.CALL_STATUS.CONNECTED)throw I.default.error(R+".inviteUser failed - current status:"+this._callStatus+" not support"),new Error(R+".inviteUser failed - current status:"+this._callStatus+" not support");if(t=e.userIDList,n=void 0===t?[]:t,r=e.offlinePushInfo,0===n.length)throw I.default.error(R+".inviteUser failed - userIDList is empty"),new Error(R+".inviteUser failed - userIDList is empty");if(i=this.getHandledInviteeList(),o=this.getUnHandledInviteeList(),a=c(i,o),0===(u=n.filter((function(e){return-1===a.indexOf(e)}))).length)return I.default.error(R+".inviteUser failed - userIDList in call list. userIDList:"+JSON.stringify(n)+", call list:"+JSON.stringify(a)),[2,Promise.reject(R+".inviteUser failed - userIDList in call list. userIDList:"+JSON.stringify(n)+", call list:"+JSON.stringify(a))];n=u,s.label=1;case 1:return s.trys.push([1,3,,4]),l=this._handledInviteeList.filter((function(e){return e!==h._userID})),[4,this._tsignalingClient.inviteInGroup({groupID:this._groupID,userIDList:n,type:this._callType,roomID:this._roomID,timeout:this._callTimeout,inCallUserIDs:c(this._unHandledInviteeList,l),offlinePushInfo:r})];case 2:return d=s.sent(),I.default.log("inviteUser res",d),p="callType: "+(this._callType+1)+",\n      conversationType: "+d.data.message.conversationType+",\n      userId:{ "+d.data.message.from+" } invite { "+d.data.message.to+": "+n+" }",0===d.code?(this.addUnHandledInviteeList(n),this.addInviterInviteId(d.inviteID,c([this._userID],n)),this._setInterfaceUpLoad(m.default.GROUP_CALL).setCallType(this._callType+1).setText(p+"  succeeded").setEnd()):this._setInterfaceUpLoad(m.default.GROUP_CALL).setCallType(this._callType+1).setText(p+"  failed").setEnd(),[2,d];case 3:throw f=s.sent(),new Error(R+".inviteUser failed, userId:"+this.getUserID()+", inviteeIdList:"+n+", error: "+f);case 4:return[2]}}))}))},e.prototype.accept=function(){return a(this,void 0,void 0,(function(){var e,t,n,i,o,a,c,u,l,d,p;return s(this,(function(s){switch(s.label){case 0:if(I.default.debug(R+".accept"),this.getCallStatus()===T.CALL_STATUS.CONNECTED)return I.default.warn(R+".accept - already connected, avoid repeat accept"),[2];if(!this._tsignalingClient.getInviteData())return I.default.warn(R+".accept - there are no calls to accept"),[2];this._callDataReport.setCallAcceptTime((new Date).getTime()),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,this._trtcClient.getMediaDevicesAuth({audio:!0})];case 2:return s.sent().audio?[3,4]:[4,this._resetTUICallEngine()];case 3:s.sent(),s.label=4;case 4:return[3,6];case 5:throw e=s.sent(),this.isGroupCall()&&(this._callDataReport.setCodeAndMessage(S.default.NOT_MEDIA_ACCESS,JSON.stringify(e)),this._callDataReport.uploadToKibana()),new Error(R+".accept failed, error: "+e);case 6:t=this._tsignalingClient.getInviteData(),n=t.inviteID,i=t.inviteData,o=i.roomID,a=i.callType,I.default.debug(R+".accept - params","inviteID: "+n+",callType: "+a+",roomID: "+o+"."),this._callType=a,this._callStatus=T.CALL_STATUS.CALLING,console.log("accept roomId: "+o),c={},s.label=7;case 7:return s.trys.push([7,9,,11]),this._callDataReport.setEnterRoomTime((new Date).getTime()),[4,this._trtcClient.join(o)];case 8:return c=s.sent(),this.addHandledInviteeList([this.getUserID()]),this.deleteUnHandledInviteeList([this.getUserID()]),this.addAcceptedUserList(n,[this.getUserID()]),this._tsignalingClient.setInviteData(null),this.changeCallStatus(T.CALL_STATUS.CONNECTED),[3,11];case 9:return u=s.sent(),this.isGroupCall()||(u.getCode?this._callDataReport.setCodeAndMessage(u.getCode(),u.message):this._callDataReport.setCodeAndMessage(S.default.UNKNOWN,JSON.stringify(u)),this._callDataReport.uploadToKibana()),[4,this._resetTUICallEngine()];case 10:throw s.sent(),new Error(R+".accept failed, error: "+u);case 11:c=r(r({},c),{roomID:o,callType:a}),s.label=12;case 12:return s.trys.push([12,14,,16]),[4,this._tsignalingClient.accept({inviteID:n,callType:a})];case 13:return l=s.sent(),p="callType: "+(a+1)+",\n      conversationType: "+l.data.message.conversationType+",\n      userId:{ "+this._userID+" } accept userId:{ "+l.data.message.to+" } succeeded",this._setInterfaceUpLoad(m.default.ACCEPT).setCallType(a+1).setText(""+p).setEnd(),[3,16];case 14:return d=s.sent(),I.default.error(d),[4,this._resetTUICallEngine()];case 15:throw s.sent(),p="callType: "+(a+1)+",\n      conversationType: "+l.data.message.conversationType+",\n      userId:{ "+this._userID+" } accept userId:{ "+l.data.message.to+" } failed",this._setInterfaceUpLoad(m.default.ACCEPT).setCallType(a+1).setText(""+p).setEnd(),this.isGroupCall()||(this._callDataReport.setCodeAndMessage(S.default.UNKNOWN,JSON.stringify(d)),this._callDataReport.uploadToKibana()),new C.default({message:R+"<accept>: failed "+d.message,code:d.code});case 16:return this.isGroupCall()&&(p="callType: "+(a+1)+",\n      conversationType: "+l.data.message.conversationType+",\n      userId:{ "+this._userID+" } accept userId:{ "+l.data.message.to+" } succeeded",this._setInterfaceUpLoad(m.default.ACCEPT).setCallType(a+1).setText(p).setEnd()),[2,r(r({},c),l)]}}))}))},e.prototype.reject=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,c;return s(this,(function(s){switch(s.label){case 0:if(!this._tsignalingClient.getInviteData())return I.default.warn(R+".reject - there are no calls to reject"),[2];e=this._callStatus===T.CALL_STATUS.CONNECTED,t=this._tsignalingClient.getInviteData(),n=t.inviteID,r=t.inviteData,i=r.callType,I.default.warn(R+".reject - params","inviteID: "+n+",callType: "+i+",isBusy: "+e+"."),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,this._tsignalingClient.reject({inviteID:n,callType:i,isBusy:e})];case 2:return o=s.sent(),a="callType: "+(i+1)+",\n      conversationType: "+o.data.message.conversationType+",\n      userId:{ "+this._userID+" } reject userId:{ "+o.data.message.to+" } succeeded",this._setInterfaceUpLoad(m.default.REJECT).setCallType(i+1).setText(a).setEnd(),e?[3,4]:[4,this._resetTUICallEngine()];case 3:s.sent(),this._delegate.onCallingCancel(this._userID),s.label=4;case 4:return[2,o];case 5:throw c=s.sent(),new C.default({message:R+"<reject>: failed "+c.message,code:c.code});case 6:return[2]}}))}))},e.prototype.hangup=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,u,l,d,p,f,h,g,v,_,y,b,C;return s(this,(function(S){switch(S.label){case 0:if(I.default.warn(R+". - callStatus:"+this._callStatus+" _inviterInviteID:"+JSON.stringify(this._acceptedUserObject)),this._callStatus===T.CALL_STATUS.IDLE)throw new Error(R+".hangup failed. current status:"+this._callStatus);if(this._callStatus===T.CALL_STATUS.CALLING&&0===this.getInviterInviteIdList().length)throw new Error(R+".call/groupCall incomplete。please wait cancel");if(e=this.isGroupCall(),t=this.isInviter(),n=this.getUserID(),r=Math.round((Date.now()-this.getConnectStartTime())/1e3),i=this.getCallType(),a=this.getInviterInviteIdList(),this._callStatus!==T.CALL_STATUS.CONNECTED)return[3,8];S.label=1;case 1:return S.trys.push([1,5,,7]),[4,this._trtcClient.leave()];case 2:return S.sent(),0!==a.length?[3,4]:(p=this.generateCallEndData({callMediaType:i,totalTime:r}),this._delegate.onCallEnd(p),[4,this._resetTUICallEngine()]);case 3:S.sent(),S.label=4;case 4:return[3,7];case 5:return u=S.sent(),[4,this._resetTUICallEngine()];case 6:throw S.sent(),new Error(u);case 7:this._setInterfaceUpLoad(m.default.REJECT).setText("userId: "+this._userID+" hangup succeeded").setEnd(),S.label=8;case 8:l=this.getHandledInviteeList(),d=this.getUnHandledInviteeList(),S.label=9;case 9:return S.trys.push([9,31,,32]),e?[3,16]:(p=this.generateCallEndData(),t?1!==d.length?[3,11]:[4,this._cancel()]:[3,13]);case 10:return o=S.sent(),this._delegate.onCallingCancel(n),[3,12];case 11:this._delegate.onCallEnd(p),S.label=12;case 12:return[3,14];case 13:this._delegate.onCallEnd(p),S.label=14;case 14:return[4,this._resetTUICallEngine()];case 15:return S.sent(),[3,30];case 16:return f=this.getCallStatus(),h={callType:i,userIDList:c(l.filter((function(e){return e!==n})),d),callEnd:r},t?f!==T.CALL_STATUS.CALLING?[3,19]:[4,this._cancel(this.getInviterInviteIdList())]:[3,24];case 17:return o=S.sent(),[4,this._resetTUICallEngine()];case 18:S.sent(),this._delegate.onCallingCancel(n),S.label=19;case 19:if(f!==T.CALL_STATUS.CONNECTED)return[3,23];g=function(e){var t,r,i,u,p,f;return s(this,(function(s){switch(s.label){case 0:return t=a[e],r=v.getInviterInviteIdUserList(t),(i=v.getAcceptedUserList(t)).length>0?(u=i.filter((function(e){return-1!==l.indexOf(e)})),p=r.filter((function(e){return-1!==d.indexOf(e)})),h.userIDList=c(u,p).filter((function(e){return e!==n})),I.default.warn("inviter emit hangup signal, notify userIDList:"+JSON.stringify(h.userIDList)),[4,v._tsignalingClient.hangup(h)]):[3,2];case 1:return o=s.sent(),[3,4];case 2:return f=v.getUnHandledInviteeList(),r.filter((function(e){return-1!==f.indexOf(e)})).length>0?(I.default.warn("inviter emit cancel signal, userIdList:"+r),[4,v._cancel([t])]):[3,4];case 3:o=s.sent(),s.label=4;case 4:return[2]}}))},v=this,b=0,S.label=20;case 20:return b<a.length?[5,g(b)]:[3,23];case 21:S.sent(),S.label=22;case 22:return b++,[3,20];case 23:return[3,28];case 24:_=function(e){var t,r,i,u,p,f;return s(this,(function(s){switch(s.label){case 0:return t=a[e],r=y.getInviterInviteIdUserList(t),(i=y.getAcceptedUserList(t)).length>0?(u=i.filter((function(e){return-1!==l.indexOf(e)})),p=r.filter((function(e){return-1!==d.indexOf(e)})),h.userIDList=c(u,p).filter((function(e){return e!==n})),I.default.warn("invitee emit hangup signal, notify userIDList:"+JSON.stringify(h.userIDList)),[4,y._tsignalingClient.hangup(h)]):[3,2];case 1:return o=s.sent(),[3,4];case 2:return f=y.getUnHandledInviteeList(),r.filter((function(e){return-1!==f.indexOf(e)})).length>0?(I.default.warn("invitee emit cancel signal, inviteID:"+t),[4,y._cancel([t])]):[3,4];case 3:o=s.sent(),s.label=4;case 4:return[2]}}))},y=this,b=0,S.label=25;case 25:return b<a.length?[5,_(b)]:[3,28];case 26:S.sent(),S.label=27;case 27:return b++,[3,25];case 28:return[4,this._resetTUICallEngine()];case 29:S.sent(),S.label=30;case 30:return[2,o];case 31:throw C=S.sent(),I.default.warn(R+".hangup failed, error: "+C),new Error(R+".hangup failed, error: "+C);case 32:return[2]}}))}))},e.prototype._cancel=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i,o,a;return s(this,(function(s){switch(s.label){case 0:I.default.log("_cancel _inviterInviteID",this._inviterInviteID),t=[],s.label=1;case 1:s.trys.push([1,6,,7]),0===(e||[]).length&&(e=this.getInviterInviteIdList().slice(0,1)),n=0,s.label=2;case 2:return n<e.length?(r=e[n],[4,this._tsignalingClient.cancel({inviteID:r})]):[3,5];case 3:i=s.sent(),t.push(i),s.label=4;case 4:return n++,[3,2];case 5:return[3,7];case 6:throw o=s.sent(),new C.default({message:R+"<_cancel>: failed "+o.message,code:o.code});case 7:return a="cancel "+JSON.stringify(t)+" succeeded",I.default.log(R+"._cancel "+a),this._setInterfaceUpLoad(m.default.CALLING_CANCEL).setText(a).setEnd(),[2,t]}}))}))},e.prototype.startRemoteView=function(e){return a(this,void 0,void 0,(function(){var t,n,r;return s(this,(function(i){return I.default.debug(R+".startRemoteView - params:",e),t=e.userID,n=e.videoViewDomID,r=e.options,this._setInterfaceUpLoad(m.default.START_REMOTE_VIEW).setText("remote userId:{ "+t+" } startRemoveView succeeded").setEnd(),[2,this._trtcClient.playRemoteVideo({videoViewDomID:n,userID:t,options:r})]}))}))},e.prototype.stopRemoteView=function(e){return a(this,void 0,void 0,(function(){var t;return s(this,(function(n){return I.default.debug(R+".stopRemoteView - params:",e),t=e.userID,this._setInterfaceUpLoad(m.default.STOP_REMOTE_VIEW).setText("remote userId:{ "+t+" } stopRemoveView succeeded").setEnd(),[2,this._trtcClient.stopRemoteVideo({userID:t})]}))}))},e.prototype.startLocalView=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i;return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),I.default.debug(R+".startLocalView - params:",e),t=e.userID,n=e.videoViewDomID,r=e.options,this._localViewId=n,this._setInterfaceUpLoad(m.default.START_LOCAL_VIEW).setText("remote userId:{ "+t+" } startLocalView succeeded").setEnd(),[4,this._trtcClient.playLocalVideo({videoViewDomID:n,userID:t,options:r})];case 1:return o.sent(),[3,3];case 2:throw i=o.sent(),new Error(R+".startLocalView failed. error: "+i);case 3:return[2]}}))}))},e.prototype.stopLocalView=function(e){return a(this,void 0,void 0,(function(){var t;return s(this,(function(n){return I.default.debug(R+".stopLocalView - params:",e),t=e.userID,this._localViewId="",this._setInterfaceUpLoad(m.default.STOP_LOCAL_VIEW).setText("remote userId:{ "+t+" } stopLocalView succeeded").setEnd(),[2,this._trtcClient.stopLocalVideo()]}))}))},e.prototype.openCamera=function(e){return a(this,void 0,void 0,(function(){var t,n,r;return s(this,(function(i){switch(i.label){case 0:if(i.trys.push([0,3,,4]),t=e,!e){if(!this._localViewId)return I.default.error(R+".openCamera failed. error: A DOM parameter is required to render the camera data"),[2];I.default.warn(R+".openCamera warning. warn: A DOM parameter is required to render the camera data. "+R+".startLocalView() will be deprecated soon."),t=this._localViewId}return[4,this._trtcClient.getMediaDevicesAuth({video:!0,isThrowVideoError:!0})];case 1:return i.sent(),n={videoViewDomID:t,userID:this.getUserID()},[4,this._trtcClient.playLocalVideo(n)];case 2:return i.sent(),[3,4];case 3:throw r=i.sent(),I.default.error(R+".openCamera failed. error: "+r),new Error(R+".openCamera failed. error: "+r);case 4:return[2]}}))}))},e.prototype.closeCamera=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){try{return this._setInterfaceUpLoad(m.default.CLOSE_CAMERA).setText("close camera").setEnd(),[2,this._trtcClient.stopLocalVideo()]}catch(e){throw new Error(R+".closeCamera failed. error: "+e)}return[2]}))}))},e.prototype.openMicrophone=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){return this._setInterfaceUpLoad(m.default.SET_MIC_MUTE).setText("openMicrophone").setEnd(),[2,this._trtcClient.unMuteLocalAudio()]}))}))},e.prototype.closeMicrophone=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){return this._setInterfaceUpLoad(m.default.SET_MIC_MUTE).setText("closeMicrophone").setEnd(),[2,this._trtcClient.muteLocalAudio()]}))}))},e.prototype.setVideoQuality=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return I.default.debug(R+".setVideoQuality - quality:"+JSON.stringify(e)),e===this.getVideoQuality()?(I.default.warn(R+".setVideoQuality failed - profile not change"),[2]):(this._setInterfaceUpLoad(m.default.SET_VIDEO_QUALITY).setText("setVideoQuality: "+JSON.stringify(e)).setEnd(),this._quality=e,this._trtcClient?[4,this._trtcClient._setVideoProfile(this._trtcClient.getLocalStream(),e)]:[3,2]);case 1:t.sent(),t.label=2;case 2:return this.isInviter()?[4,this._trtcClient]:[3,6];case 3:return t.sent()?[4,this._trtcClient._setVideoProfile(this._trtcClient.getDisplayLocalStream(),e)]:[3,5];case 4:t.sent(),t.label=5;case 5:t.label=6;case 6:return[2]}}))}))},e.prototype.getVideoQuality=function(){return this._quality},e.prototype.setVideoRenderParams=function(e){return a(this,void 0,void 0,(function(){var t,n,r;return s(this,(function(i){switch(i.label){case 0:return t=e.objectFit,n=e.muted,r=e.mirror,this.setPlayOptions({objectFit:t,muted:n,mirror:r}),this._trtcClient?[4,this._trtcClient._setVideoRenderParams(e)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},e.prototype.switchCallMediaType=function(e){return a(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:if(this._callType===e)throw new C.default({message:R+"<switchCallMediaType>: "+E.ERROR_MESSAGE.ERROR_REQUEST_REPEATED_SWITCH,code:S.default.ERROR_REQUEST_REPEATED});if(!this._switchCallModeStatus)throw new Error(R+" audio and video call switching.");I.default.log(R+".switchCallMediaType",this._inviterID,this._inviteeID),this._setInterfaceUpLoad(m.default.SWITCH_TO_AUDIO_CALL).setText("switchCallMediaType").setEnd(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this._tsignalingClient.switchCallMode({userID:this._isInviter?this._inviteeID:this._inviterID,callType:this._callType,roomID:this._roomID,timeout:this._callTimeout,mode:e===T.CALL_TYPE.AUDIO_CALL?T.MODE_TYPE.AUDIO:T.MODE_TYPE.VIDEO})];case 2:return n.sent(),this.setSwitchCallModeStatus(!1),[3,4];case 3:throw t=n.sent(),new Error(R+".switchCallMediaType failed, error: "+t);case 4:return[2]}}))}))},e.prototype.setSwitchCallModeStatus=function(e){this._switchCallModeStatus=e},e.prototype.getSwitchCallModeStatus=function(){return this._switchCallModeStatus},e.prototype.getDeviceList=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:if(e!==T.DEVICE_TYPE.CAMERA)return[3,5];t.label=1;case 1:return t.trys.push([1,4,,5]),[4,this._trtcClient.getMediaDevicesAuth({video:!0,isThrowVideoError:!0})];case 2:return t.sent(),[4,O.getCameras()];case 3:return[2,t.sent()];case 4:throw t.sent(),new C.default({message:R+"<getDeviceList>: "+E.ERROR_MESSAGE.ERROR_PERMISSION_DENIED,code:S.default.ERROR_PERMISSION_DENIED});case 5:if(e!==T.DEVICE_TYPE.MICROPHONES)return[3,10];t.label=6;case 6:return t.trys.push([6,9,,10]),[4,this._trtcClient.getMediaDevicesAuth({audio:!0})];case 7:return t.sent(),[4,O.getMicrophones()];case 8:return[2,t.sent()];case 9:throw t.sent(),new C.default({message:R+"<getDeviceList>: "+E.ERROR_MESSAGE.ERROR_PERMISSION_DENIED,code:S.default.ERROR_PERMISSION_DENIED});case 10:return[2]}}))}))},e.prototype.switchDevice=function(e){return a(this,void 0,void 0,(function(){var t,n;return s(this,(function(r){return t=e.deviceType,n=e.deviceId,I.default.debug(R+".switchDevice -params: deviceType:"+t+",deviceID:"+n),[2,this._trtcClient.switchDevice(t,n)]}))}))},e.prototype.setSelfInfo=function(e){return a(this,void 0,void 0,(function(){var t,n,r;return s(this,(function(i){return t=e.nickName,n=e.avatar,r={nick:t,avatar:n},!t&&delete r.nick,!n&&delete r.avatar,I.default.log(R+".setSelfInfo -params: nickName:"+r.nick+",avatar:"+r.avatar),[2,this.tim.updateMyProfile(r)]}))}))},e.prototype.generateCallEndData=function(e){var t=e||{},n=t.roomId,r=t.callMediaType,i=t.callRole,o=t.totalTime,a=t.userId;return n=n||this.getRoomID(),r=r||this.getCallType(),i||(i=this.isInviter()?T.CALL_ROLE.INVITER:T.CALL_ROLE.INVITEE),{roomID:n,callMediaType:r,callRole:i,totalTime:o=l.isUndefined(o)?Math.round((Date.now()-this.getConnectStartTime())/1e3):o,userID:a=a||this.getUserID()}},e.prototype.enableAIVoice=function(e){var t;return a(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return this._trtcClient?[4,null===(t=this._trtcClient)||void 0===t?void 0:t.enableAIVoice(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},e.prototype._resetTUICallEngine=function(){var e;return a(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return I.default.debug(R+"._resetTUICallEngine"),this._roomID=0,this._isInviter=!1,this._isGroupCall=!1,this.setSwitchCallModeStatus(!0),this._groupID="",this._callStatus=T.CALL_STATUS.IDLE,this._inviteeList=[],this._unHandledInviteeList=[],this._handledInviteeList=[],this._inviterInviteID={},this._audioVideoSwitchIdList=[],this._acceptedUserObject={},this._connectStartTime=0,this._switchCallModeStatus=!0,this._localViewId="",[4,null===(e=this._trtcClient)||void 0===e?void 0:e.reset()];case 1:return n.sent(),this._tsignalingClient.setInviteData(null),this._tsignalingClient.resetJoined(),(t=document.getElementById("_trtc_calling_layer"))&&(t.innerHTML=""),[2]}}))}))},e.prototype.getCallStatus=function(){return this._callStatus},e.prototype.changeCallStatus=function(e){this._callStatus!==e&&(I.default.debug(R+".changeCallStatus from "+this._callStatus+" to "+e),this._setInterfaceUpLoad(m.default.CHANGE_CALL_STATUS).setText("changeCallStatus from "+this._callStatus+" to "+e).setEnd(),this._callStatus=e)},e.prototype.extractCallingInfoFromMessage=function(e){if(!e)return"";if("TIMCustomElem"!==e.type)return"";var t=JSON.parse(e.payload.data);if(I.default.debug(R+".extractCallingInfoFromMessage - signalingData:",e.payload.data),t.businessID!==T.BUSINESS_ID.SIGNAL)return"";switch(t.actionType){case T.ACTION_TYPE.INVITE:var n=JSON.parse(t.data);return n.call_end>0?"结束通话，通话时长："+l.formatDuration(n.call_end):0!==n.call_end&&n.room_id?"发起通话":"结束群聊";case T.ACTION_TYPE.CANCEL_INVITE:return"取消通话";case T.ACTION_TYPE.ACCEPT_INVITE:return"已接听";case T.ACTION_TYPE.REJECT_INVITE:return"拒绝通话";case T.ACTION_TYPE.INVITE_TIMEOUT:return"无应答";default:return""}},e.CALL_TYPE=T.CALL_TYPE,i([k.paramValidate(k.VALIDATE_PARAMS.login),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",Promise)],e.prototype,"init",null),i([k.paramValidate(k.VALIDATE_PARAMS.login),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",Promise)],e.prototype,"login",null),i([k.avoidRepeatedCall(),k.paramValidate(k.VALIDATE_PARAMS.call),k.statusValidate({init:!0,callStatus:[T.CALL_STATUS.IDLE]}),k.businessValidate(T.CALL_EXPERMENTEL_API_TYPE.BASE),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",Promise)],e.prototype,"call",null),i([k.avoidRepeatedCall(),k.paramValidate(k.VALIDATE_PARAMS.groupCall),k.statusValidate({init:!0,callStatus:[T.CALL_STATUS.IDLE]}),k.businessValidate(T.CALL_EXPERMENTEL_API_TYPE.PRO),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",Promise)],e.prototype,"groupCall",null),i([k.paramValidate(k.VALIDATE_PARAMS.joinInGroupCall),k.statusValidate({init:!0,callStatus:[T.CALL_STATUS.IDLE]}),k.businessValidate(T.CALL_EXPERMENTEL_API_TYPE.PRO),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",Promise)],e.prototype,"joinInGroupCall",null),i([k.paramValidate(k.VALIDATE_PARAMS.inviteUser),k.statusValidate({init:!0,callStatus:[T.CALL_STATUS.CALLING,T.CALL_STATUS.CONNECTED]}),k.businessValidate(T.CALL_EXPERMENTEL_API_TYPE.PRO),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",Promise)],e.prototype,"inviteUser",null),i([k.avoidRepeatedCall(),k.statusValidate({init:!0,callStatus:[T.CALL_STATUS.CALLING]}),o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",Promise)],e.prototype,"accept",null),i([k.avoidRepeatedCall(),k.statusValidate({init:!0,callStatus:[T.CALL_STATUS.CALLING]}),o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",Promise)],e.prototype,"reject",null),i([k.avoidRepeatedCall(),k.statusValidate({init:!0,callStatus:[T.CALL_STATUS.CALLING,T.CALL_STATUS.CONNECTED]}),o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",Promise)],e.prototype,"hangup",null),i([k.paramValidate(k.VALIDATE_PARAMS.startRemoteView),k.statusValidate({init:!0,callStatus:[T.CALL_STATUS.CONNECTED]}),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",Promise)],e.prototype,"startRemoteView",null),i([k.paramValidate(k.VALIDATE_PARAMS.stopRemoteView),k.statusValidate({init:!0,callStatus:[T.CALL_STATUS.CONNECTED]}),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",Promise)],e.prototype,"stopRemoteView",null),i([k.paramValidate(k.VALIDATE_PARAMS.startLocalView),k.statusValidate({init:!0,callStatus:[T.CALL_STATUS.CALLING,T.CALL_STATUS.CONNECTED]}),k.apiCallQueue(),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",Promise)],e.prototype,"startLocalView",null),i([k.paramValidate(k.VALIDATE_PARAMS.stopLocalView),k.statusValidate({init:!0,callStatus:[T.CALL_STATUS.CALLING,T.CALL_STATUS.CONNECTED]}),k.apiCallQueue(),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",Promise)],e.prototype,"stopLocalView",null),i([k.statusValidate({init:!0,callStatus:[T.CALL_STATUS.CALLING,T.CALL_STATUS.CONNECTED]}),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",Promise)],e.prototype,"openCamera",null),i([k.statusValidate({init:!0,callStatus:[T.CALL_STATUS.CALLING,T.CALL_STATUS.CONNECTED]}),o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",Promise)],e.prototype,"closeCamera",null),i([k.statusValidate({init:!0,callStatus:[T.CALL_STATUS.CALLING,T.CALL_STATUS.CONNECTED]}),o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",Promise)],e.prototype,"openMicrophone",null),i([k.statusValidate({init:!0,callStatus:[T.CALL_STATUS.CALLING,T.CALL_STATUS.CONNECTED]}),o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",Promise)],e.prototype,"closeMicrophone",null),i([k.paramValidate(k.VALIDATE_PARAMS.setVideoQuality),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",Promise)],e.prototype,"setVideoQuality",null),i([k.paramValidate(k.VALIDATE_PARAMS.setVideoRenderParams),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",Promise)],e.prototype,"setVideoRenderParams",null),i([k.paramValidate(k.VALIDATE_PARAMS.switchCallMediaType),k.statusValidate({init:!0,callStatus:[T.CALL_STATUS.CONNECTED,T.CALL_STATUS.CALLING],scene:!0}),o("design:type",Function),o("design:paramtypes",[Number]),o("design:returntype",Promise)],e.prototype,"switchCallMediaType",null),i([k.paramValidate(k.VALIDATE_PARAMS.getDeviceList),k.statusValidate({init:!0}),o("design:type",Function),o("design:paramtypes",[String]),o("design:returntype",Promise)],e.prototype,"getDeviceList",null),i([k.paramValidate(k.VALIDATE_PARAMS.switchDevice),k.statusValidate({init:!0,callStatus:[T.CALL_STATUS.CALLING,T.CALL_STATUS.CONNECTED]}),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",Promise)],e.prototype,"switchDevice",null),i([k.paramValidate(k.VALIDATE_PARAMS.setSelfInfo),k.statusValidate({init:!0}),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",Promise)],e.prototype,"setSelfInfo",null),i([k.statusValidate({init:!0}),o("design:type",Function),o("design:paramtypes",[Boolean]),o("design:returntype",Promise)],e.prototype,"enableAIVoice",null),i([k.paramValidate(k.VALIDATE_PARAMS.createInstance),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],e,"createInstance",null),e}();t.default=x},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));const r=Function.prototype.apply,i=new WeakMap;function o(e){return i.has(e)||i.set(e,{}),i.get(e)}class a{constructor(e=null,t=console){const n=o(this);return n._events=new Set,n._callbacks={},n._console=t,n._maxListeners=null===e?null:parseInt(e,10),this}_addCallback(e,t,n,r){return this._getCallbacks(e).push({callback:t,context:n,weight:r}),this._getCallbacks(e).sort((e,t)=>e.weight>t.weight),this}_getCallbacks(e){return o(this)._callbacks[e]}_getCallbackIndex(e,t){return this._has(e)?this._getCallbacks(e).findIndex(e=>e.callback===t):null}_achieveMaxListener(e){return null!==o(this)._maxListeners&&o(this)._maxListeners<=this.listenersNumber(e)}_callbackIsExists(e,t,n){const r=this._getCallbackIndex(e,t),i=-1!==r?this._getCallbacks(e)[r]:void 0;return-1!==r&&i&&i.context===n}_has(e){return o(this)._events.has(e)}on(e,t,n=null,r=1){const i=o(this);if("function"!=typeof t)throw new TypeError(t+" is not a function");return this._has(e)?(this._achieveMaxListener(e)&&i._console.warn(`Max listeners (${i._maxListeners}) for event "${e}" is reached!`),this._callbackIsExists(...arguments)&&i._console.warn(`Event "${e}" already has the callback ${t}.`)):(i._events.add(e),i._callbacks[e]=[]),this._addCallback(...arguments),this}once(e,t,n=null,i=1){const o=(...i)=>(this.off(e,o),r.call(t,n,i));return this.on(e,o,n,i)}off(e,t=null){const n=o(this);let r;return this._has(e)&&(null===t?(n._events.delete(e),n._callbacks[e]=null):(r=this._getCallbackIndex(e,t),-1!==r&&(n._callbacks[e].splice(r,1),this.off(...arguments)))),this}emit(e,...t){return this._has(e)&&this._getCallbacks(e).forEach(e=>r.call(e.callback,e.context,t)),this}clear(){const e=o(this);return e._events.clear(),e._callbacks={},this}listenersNumber(e){return this._has(e)?this._getCallbacks(e).length:null}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0});var a=n(17),s=n(0),c=n(35),u=n(7),l=n(1),d=n(9),p=n(11),f=n(12),h=n(8),g=n(4),v=n(5),m=n(7),_=n(55),y=n(26),b=n(2),I=n(2),T="TRTCClient",C=a,S=function(){function e(e){var t,n=this;this._sdkAppID=e.sdkAppID,this._userID=e.userID,this._userSig=e.userSig,this._tuiCallEngine=e.tuiCallEngine,this._videoAvailableMap=new Map,this._isJoined=!1,this._isPublished=!1,this._unpublishing=!1,this._localStream=null,this._remoteStreams=[],this._userIdDomMap=new Map,this._device={video:null,audio:null,microphoneList:[],cameraList:[]},this._prevDevices=[],this._displayLocalStream=null,this._isMuteAudioVideo=!1,this._assetsPath=e.assetsPath,this._eventStatController=new f.default,d.default.bindController(this._eventStatController),this._isAiNoiseSuppress=!0;var r=C.VERSION;l.compareVersion(r,"4.7.0")>=0?C.checkSystemRequirements().then((function(e){if(!e.result)throw n._tuiCallEngine._delegate.onError(g.default.NOT_SUPPORT,JSON.stringify(e)),new h.default({message:v.ERROR_MESSAGE.NOT_SUPPORT+" "+JSON.stringify(e),code:g.default.NOT_SUPPORT})})):C.checkSystemRequirements().then((function(e){if(!e)throw n._tuiCallEngine._delegate.onError(g.default.NOT_SUPPORT,e),new h.default({message:v.ERROR_MESSAGE.NOT_SUPPORT+" "+JSON.stringify(e),code:g.default.NOT_SUPPORT})})),this._frameWorkType=32,l.compareVersion(r,"4.15.1")>=0?(this._frameWorkType=30,this._component=14,((null===(t=null===window||void 0===window?void 0:window.localStorage)||void 0===t?void 0:t.getItem("_isTIMCallKit"))||(null===window||void 0===window?void 0:window._isTIMCallKit))&&(this._component=15)):this._component=3,this.init()}return e.prototype.init=function(){this._client=C.createClient({mode:I.NAME.RTC,sdkAppId:this._sdkAppID,userId:this._userID,userSig:this._userSig,frameWorkType:this._frameWorkType,component:this._component}),this.handleEvents()},e.prototype.getClient=function(){return this._client},e.prototype.getRemoteStreams=function(){return this._remoteStreams},e.prototype.getLocalStream=function(){return this._localStream},e.prototype.getDisplayLocalStream=function(){return this._displayLocalStream},e.prototype.getMicrophoneList=function(){return r(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return[4,C.getMicrophones()];case 1:return e=t.sent(),this._device.microphoneList=e,[2]}}))}))},e.prototype.getCamerasList=function(){return r(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return[4,C.getCameras()];case 1:return e=t.sent(),this._device.cameraList=e,[2]}}))}))},e.prototype.getDevices=function(e){return r(this,void 0,void 0,(function(){var t=this;return i(this,(function(n){switch(n.label){case 0:return[4,this.getMicrophoneList()];case 1:return n.sent(),0!==this._device.microphoneList.length?[3,3]:[4,this._tuiCallEngine._resetTUICallEngine()];case 2:return n.sent(),this._tuiCallEngine._delegate.onError(g.default.NOT_MICROPHONE_LIST,v.ERROR_MESSAGE.NOT_MICROPHONE_LIST),[2];case 3:return this._device.audio=JSON.parse(JSON.stringify(this._device.microphoneList[0])),e===u.CALL_TYPE.VIDEO_CALL&&this._tuiCallEngine.getDevicePermission().video?[4,this.getCamerasList()]:[3,5];case 4:n.sent(),this._device.video=JSON.parse(JSON.stringify(this._device.cameraList[0])),n.label=5;case 5:return this._prevDevices.length>0||(this._prevDevices=o(this._device.microphoneList,this._device.cameraList),navigator.mediaDevices.addEventListener("devicechange",(function(){return r(t,void 0,void 0,(function(){var e,t,n,r,a,s=this;return i(this,(function(i){switch(i.label){case 0:return[4,C.getMicrophones()];case 1:return e=i.sent(),[4,C.getCameras()];case 2:return t=i.sent(),n=o(e,t),this.setDevcies(n),r=n.filter((function(e){return s._prevDevices.findIndex((function(t){var n=t.deviceId;return e.deviceId===n}))<0})),a=this._prevDevices.filter((function(e){return n.findIndex((function(t){var n=t.deviceId;return e.deviceId===n}))<0})),r.length>0&&this.handleDevices(r),a.length>0&&this.handleDevicesRemoved(a),this._tuiCallEngine._delegate.onDeviceUpdated(this._device.microphoneList,this._device.cameraList,this._device.audio,this._device.video),this._prevDevices=n,[2]}}))}))}))),[2]}}))}))},e.prototype.setDevcies=function(e){this._device.microphoneList=e.filter((function(e){return e.kind===I.NAME.AUDIO_INPUT}))||[],this._device.cameraList=e.filter((function(e){return e.kind===I.NAME.VIDEO_INPUT}))||[]},e.prototype.handleDevices=function(e,t){var n=this;e.forEach((function(e){e.kind===I.NAME.AUDIO_INPUT?n.switchDevice(u.DEVICE_TYPE.AUDIO,e.deviceId):e.kind===I.NAME.VIDEO_INPUT&&t&&n.switchDevice(u.DEVICE_TYPE.VIDEO,e.deviceId)}))},e.prototype.handleDevicesRemoved=function(e){var t=this;e.forEach((function(e){e.kind===I.NAME.AUDIO_INPUT?t.isCurrentMicrophoneRemoved(e.deviceId)&&t.handleDevices(t._prevDevices):e.kind===I.NAME.VIDEO_INPUT&&t.isCurrentCameraRemoved(e.deviceId)&&t.handleDevices(t._prevDevices,!0)}))},e.prototype.isCurrentMicrophoneRemoved=function(e){var t=this._localStream.getAudioTrack();return!(!t||t.getSettings().deviceId!==e)},e.prototype.isCurrentCameraRemoved=function(e){var t=this._localStream.getVideoTrack();return!(!t||t.getSettings().deviceId!==e)},e.prototype.switchDevice=function(e,t){return r(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return s.default.log(T+".switchDevice - params: deviceType:"+e+",deviceID:"+t),this._localStream?[4,this._localStream.switchDevice(e,t)]:[3,2];case 1:r.sent(),r.label=2;case 2:return this._displayLocalStream?[4,this._displayLocalStream.switchDevice(e,t)]:[3,4];case 3:r.sent(),r.label=4;case 4:return n={deviceType:e,deviceId:t},this._device[e]=n,this._tuiCallEngine._delegate.onDeviceUpdated(this._device.microphoneList,this._device.cameraList,this._device.audio,this._device.video),[2]}}))}))},e.prototype.join=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o;return i(this,(function(i){switch(i.label){case 0:return(t=this.getCallType())!==u.CALL_TYPE.VIDEO_CALL||this._tuiCallEngine.getDevicePermission().video?[3,2]:[4,this.getMediaDevicesAuth({video:!0})];case 1:i.sent(),i.label=2;case 2:return[4,this.getDevices(t)];case 3:if(i.sent(),this._isJoined)return s.default.warn(T+".join - duplicate RtcClient.join() observed"),[2];i.label=4;case 4:return i.trys.push([4,6,,7]),[4,this._client.join({roomId:e})];case 5:return i.sent(),this._isJoined=!0,s.default.log(T+".join - join room success, callType:"+t),[3,7];case 6:throw n=i.sent(),s.default.error(T+".join - join room failed! "+n),new Error(T+".join - join room failed! "+n);case 7:return this._tuiCallEngine.getCallStatus()===u.CALL_STATUS.IDLE?(s.default.warn(T+".join - early hangup"),[2,this._tuiCallEngine.hangup()]):(r={audio:!0,video:!1,userId:this._userID},t===u.CALL_TYPE.VIDEO_CALL&&this._tuiCallEngine.getDevicePermission().video&&(r.video=!0),this._localStream=C.createStream(r),[4,this._setVideoProfile(this._localStream)]);case 8:i.sent(),i.label=9;case 9:return i.trys.push([9,19,,20]),[4,this._localStream.initialize()];case 10:return i.sent(),this._tuiCallEngine.tim?[4,this._addAiNoiseReduce(this._tuiCallEngine.tim)]:[3,12];case 11:i.sent(),i.label=12;case 12:return s.default.log(T+".join - initialize local stream success"),this._localStream.on("player-state-changed",(function(e){s.default.log(T+".join - local stream "+e.type+" player is "+e.state)})),[4,this.publish()];case 13:return i.sent(),this._tuiCallEngine.isInviter()?[4,null==this?void 0:this.muteLocalVideo()]:[3,18];case 14:return i.sent(),[4,null==this?void 0:this.muteLocalAudio()];case 15:return i.sent(),this._displayLocalStream=C.createStream(r),[4,this._setVideoProfile(this._displayLocalStream)];case 16:return i.sent(),[4,this._displayLocalStream.initialize()];case 17:i.sent(),this._isMuteAudioVideo=!0,i.label=18;case 18:return s.default.log(T+".publish success"),this._joinedTimestamp=new Date,[2,{audio:r.audio,video:r.video,userId:r.userId}];case 19:throw o=i.sent(),s.default.error(T+".join - failed to initialize local stream - "+o),new h.default({message:T+"<join>: "+v.ERROR_MESSAGE.ERROR_PERMISSION_DENIED,code:g.default.ERROR_PERMISSION_DENIED});case 20:return[2]}}))}))},e.prototype._addAiNoiseReduce=function(e){return r(this,void 0,void 0,(function(){var t,n,r;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,6,,7]),[4,y.validateBusiness(e,m.CALL_EXPERMENTEL_API_TYPE.PRO)];case 1:return t=i.sent(),s.default.info(T+"._addAiNoiseReduce - aiNoiseReduceSupport."+t),t&&_?(this._assetsPath||s.default.warn(T+"._addAiNoiseReduce - please pass validate assetsPath"),this._aiNoiseSuppression=new _({assetsPath:this._assetsPath||b.AI_NOISE_REDUCE_ASSETS_PATH}),n=this,[4,this._aiNoiseSuppression.createProcessor({sdkAppId:this._sdkAppID,userId:this._userID,userSig:this._userSig})]):[3,5];case 2:return n._aiNoiseSuppressionProcessor=i.sent(),[4,this._aiNoiseSuppressionProcessor.process(this._localStream)];case 3:return i.sent(),[4,this.enableAIVoice(this._isAiNoiseSuppress)];case 4:i.sent(),i.label=5;case 5:return[3,7];case 6:return r=i.sent(),s.default.warn(T+"._addAiNoiseReduce - error."+r),[3,7];case 7:return[2]}}))}))},e.prototype.playLocalVideo=function(e){var t,n;return r(this,void 0,void 0,(function(){var r,o,a,c,u,l,d,p,f;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,13,,14]),s.default.debug(T+".playLocalVideo - params:",e),r=e.videoViewDomID,o=e.userID,a=e.options,c=void 0===a?this._tuiCallEngine.getPlayOptions():a,this._tuiCallEngine.setPlayOptions(c),u={userId:o,video:!0,audio:!1,screenAudio:!1},l=r,typeof r===I.NAME.STRING&&(l=document.getElementById(r)),this._userIdDomMap.set(o,l),this._tuiCallEngine.isInviter()?!this._displayLocalStream||this._displayLocalStream.hasVideo()?[3,5]:(d=null==C?void 0:C.createStream(u),[4,this._setVideoProfile(d)]):[3,7];case 1:return i.sent(),[4,d.initialize()];case 2:return i.sent(),p=d.getVideoTrack(),p?[4,this._displayLocalStream.addTrack(p)]:[3,4];case 3:i.sent(),i.label=4;case 4:i.label=5;case 5:return[4,null===(t=null==this?void 0:this._displayLocalStream)||void 0===t?void 0:t.play(l,c)];case 6:i.sent(),i.label=7;case 7:return!this._localStream||this._localStream.hasVideo()?[3,9]:(p=this._localStream.getVideoTrack(),[4,this.addTrack(p)]);case 8:i.sent(),i.label=9;case 9:return this._tuiCallEngine.isInviter()?[3,12]:l?[4,null===(n=null==this?void 0:this._localStream)||void 0===n?void 0:n.play(l,c)]:[3,11];case 10:i.sent(),i.label=11;case 11:i.label=12;case 12:return[3,14];case 13:throw f=i.sent(),s.default.error(T+".playLocalVideo - failed, error:"+f),new Error(T+".playLocalVideo - failed, error:"+f);case 14:return[2]}}))}))},e.prototype.stopLocalVideo=function(){return r(this,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,8,,9]),this._tuiCallEngine.isInviter()?[4,this.stopLocalPlayStreamTrack(I.NAME.VIDEO)]:[3,2];case 1:n.sent(),n.label=2;case 2:return this._localStream?this._localStream.hasAudio()?(e=this._localStream.getVideoTrack())?[4,this._localStream.removeTrack(e)]:[3,4]:[3,5]:[3,7];case 3:n.sent(),e.stop(),n.label=4;case 4:return[3,7];case 5:return[4,this.unpublish()];case 6:n.sent(),this._localStream.stop(),this._localStream.close(),this._localStream=null,this._userIdDomMap.delete(this._tuiCallEngine.getUserID()),n.label=7;case 7:return[3,9];case 8:throw t=n.sent(),s.default.error(T+".stopLocalVideo - failed to play local video "+t),new Error(T+".stopLocalVideo - failed to play local video "+t);case 9:return[2]}}))}))},e.prototype.playRemoteVideo=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o,a,c,u;return i(this,(function(i){switch(i.label){case 0:s.default.debug(T+".playRemoteVideo - params:",e),t=e.videoViewDomID,n=e.userID,r=e.options,o=void 0===r?this._tuiCallEngine.getPlayOptions():r,a=t,typeof t===I.NAME.STRING&&(a=document.getElementById(t)),this._userIdDomMap.set(n,a),i.label=1;case 1:if(i.trys.push([1,3,,4]),!(c=this._remoteStreams.find((function(e){return e.getUserId()===n}))))throw new Error("currentRemoteUserStream is empty");if(!a)throw new Error("domID is empty");return[4,null==c?void 0:c.play(a,o)];case 2:return i.sent(),[3,4];case 3:throw u=i.sent(),s.default.error(T+".playRemoteVideo - failed to play remote video reason: "+u),new Error(T+".playRemoteVideo - failed to play remote video reason: "+u);case 4:return[2]}}))}))},e.prototype.stopRemoteVideo=function(e){return r(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){s.default.debug(T+".stopRemoteVideo - params:",e),t=e.userID;try{(n=this._remoteStreams.find((function(e){return e.getUserId()===t})))&&n.hasVideo()&&n.getVideoTrack().stop()}catch(e){throw s.default.error(T+".stopRemoteVideo - failed to stop remote video "+e),new Error(T+".stopRemoteVideo - failed to stop remote video "+e)}return[2]}))}))},e.prototype.getCallType=function(){return this._tuiCallEngine.getCallType()},e.prototype.leave=function(){var e,t,n;return r(this,void 0,void 0,(function(){var r;return i(this,(function(i){switch(i.label){case 0:return s.default.log(T+"-leave._isJoined:"+this._isJoined),s.default.log(T+"-leave._localStream:"+this._localStream),this._isJoined?[4,this.unpublish()]:(s.default.warn(T+".leave - please join() firstly"),[2]);case 1:return i.sent(),this._tuiCallEngine.getCallDataReport().setExitRoomTime((new Date).getTime()),[4,this._client.leave()];case 2:return i.sent(),this._isJoined=!1,this._isPublished=!1,null===(e=null==this?void 0:this._localStream)||void 0===e||e.close(),null===(t=null==this?void 0:this._displayLocalStream)||void 0===t||t.close(),this._localStream=null,this._remoteStreams=[],this._userIdDomMap.clear(),this._displayLocalStream=null,this._videoAvailableMap.clear(),this._isMuteAudioVideo=!1,this._leaveTimestamp=new Date,this._client.enableAudioVolumeEvaluation(-1),null===(n=null==this?void 0:this._aiNoiseSuppressionProcessor)||void 0===n||n.destroy(),this._aiNoiseSuppressionProcessor=null,this._isAiNoiseSuppress=!0,r=Math.floor((this._leaveTimestamp-this._joinedTimestamp)/1e3),new d.default(p.default.TALK_TIME).setTalkTime(r).setText("talkTime record").setEnd(),[2]}}))}))},e.prototype.publish=function(){return r(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:if(!this._isJoined)return s.default.warn(T+".publish - please join() firstly"),[2];if(this._isPublished)return s.default.warn(T+".publish - duplicate RtcClient.publish() observed"),[2];if(this._tuiCallEngine.getCallStatus()===u.CALL_STATUS.IDLE)return s.default.warn(T+".join - early hangup"),this._tuiCallEngine.hangup(),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._client.publish(this._localStream)];case 2:return t.sent(),s.default.log(T+".publish - success"),[3,4];case 3:return e=t.sent(),s.default.error(T+".publish - failed to publish local stream "+e),this._isPublished=!1,[3,4];case 4:return this._isPublished=!0,[2]}}))}))},e.prototype.unpublish=function(){return r(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return this._isPublished?this._localStream?this._unpublishing?(s.default.log(T+".unpublish - _unpublishing"),[2]):(this._unpublishing=!0,[4,this._client.unpublish(this._localStream)]):(s.default.warn(T+".unpublish - RtcClient._localStream is null"),[2]):(s.default.warn(T+".unpublish - RtcClient.unpublish() called but not published yet"),[2]);case 1:return e.sent(),s.default.log(T+".unpublish - complete"),this._unpublishing=!1,this._isPublished=!1,[2]}}))}))},e.prototype.playAudioStream=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o;return i(this,(function(i){return t=e.getUserId(),n="_trtc_calling_audio_call-"+t,(r=document.getElementById("_trtc_calling_layer"))||((r=document.createElement("div")).setAttribute("id","_trtc_calling_layer"),r.style.display="none",document.body.appendChild(r)),(o=document.createElement("div")).setAttribute("id",n),r.appendChild(o),e&&(e.play(n),e.on("error",(function(t){if(16451===t.getCode()){var n=document.createElement("button");n.onclick=function(){s.default.log(T+".remoteStream - resume"),e.resume()},n.style.display="none",document.body.appendChild(n);var r=setTimeout((function(){n.click(),clearTimeout(r),document.body.removeChild(n)}),0)}}))),[2]}))}))},e.prototype.delegateVideoAvailableState=function(e,t){e&&this._videoAvailableMap.get(e)!==t&&(this._videoAvailableMap.set(e,t),this._tuiCallEngine._delegate.onUserVideoAvailable({userID:e,isVideoAvailable:t}))},e.prototype.querySubscribeSuccess=function(e){return void 0!==this._videoAvailableMap.get(e)},e.prototype.handleEvents=function(){var e=this;this._client.on("error",(function(t){s.default.error(T+".handleEvents - client on error "+t);var n=t.getCode(),r=JSON.stringify({name:I.NAME.TRTC,error:t});e._tuiCallEngine._delegate.onError(n,r)})),this._client.on("client-banned",(function(t){return r(e,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return s.default.error(T+".handleEvents - client has been banned for "+t),this._tuiCallEngine.getCallStatus()===u.CALL_STATUS.CONNECTED&&(e=this._tuiCallEngine.generateCallEndData(),this._tuiCallEngine._delegate.onCallEnd(e)),this._tuiCallEngine.getCallStatus()!==u.CALL_STATUS.CALLING?[3,2]:(this._tuiCallEngine._delegate.onCallingCancel(this._tuiCallEngine.getUserID()),[4,this._tuiCallEngine._cancel()]);case 1:n.sent(),n.label=2;case 2:return[4,this._tuiCallEngine._resetTUICallEngine()];case 3:return n.sent(),[2]}}))}))})),this._client.on("peer-join",(function(t){return r(e,void 0,void 0,(function(){var e,n,r;return i(this,(function(i){switch(i.label){case 0:return e=t.userId,this._localStream&&this._isPublished&&this._tuiCallEngine.isInviter()&&this._isMuteAudioVideo?[4,this.unMuteLocalVideo()]:[3,3];case 1:return i.sent(),[4,this.unMuteLocalAudio()];case 2:i.sent(),this._isMuteAudioVideo=!1,i.label=3;case 3:return s.default.log(T+".handleEvents - peer-join "+e),this._tuiCallEngine.getConnectStartTime()||(this._tuiCallEngine.setConnectStartTime(Date.now()),this._client.enableAudioVolumeEvaluation(1e3)),this._tuiCallEngine._delegate.onUserEnter(e),n=this._tuiCallEngine.isGroupCall(),this._tuiCallEngine.addHandledInviteeList([e]),this._tuiCallEngine.deleteUnHandledInviteeList([e]),this._tuiCallEngine.addAcceptedUserList(null,[e]),this._tuiCallEngine.changeCallStatus(u.CALL_STATUS.CONNECTED),n&&(r=this._tuiCallEngine.getHandledInviteeList(),this._tuiCallEngine._delegate.onGroupCallInviteeListUpdate(r)),[2]}}))}))})),this._client.on("peer-leave",(function(t){return r(e,void 0,void 0,(function(){var e,n,r,o,a,c,l,d;return i(this,(function(i){switch(i.label){case 0:return this._tuiCallEngine.getCallStatus()===u.CALL_STATUS.IDLE?[2]:(e=t.userId,s.default.log(T+".handleEvents - peer-leave:"+e),n=this._tuiCallEngine.isGroupCall(),this._tuiCallEngine.deleteHandledInviteeList([e]),this._videoAvailableMap.delete(e),this._tuiCallEngine._delegate.onUserLeave(e),n?(r=this._tuiCallEngine.getHandledInviteeList(),o=this._tuiCallEngine.getUnHandledInviteeList(),0!==r.length&&this._tuiCallEngine._delegate.onGroupCallInviteeListUpdate(r),a=this._tuiCallEngine.getUserID(),1!==r.length||r[0]!==a||0!==o.length?[3,2]:(c=this._tuiCallEngine.generateCallEndData(),this._tuiCallEngine._delegate.onCallEnd(c),[4,this._tuiCallEngine._resetTUICallEngine()])):[3,3]);case 1:i.sent(),i.label=2;case 2:return[3,6];case 3:return l=this._tuiCallEngine.getHandledInviteeList(),d={callType:this._tuiCallEngine.getCallType(),userIDList:[e],callEnd:Math.round((Date.now()-this._tuiCallEngine.getConnectStartTime())/1e3)},1!==l.length?[3,6]:[4,this._tuiCallEngine._tsignalingClient.hangup(d)];case 4:return i.sent(),[4,this._tuiCallEngine._resetTUICallEngine()];case 5:i.sent(),i.label=6;case 6:return[2]}}))}))})),this._client.on("stream-added",(function(t){return r(e,void 0,void 0,(function(){var e,n,r,o,a,c;return i(this,(function(i){switch(i.label){case 0:e=t.stream,n=e.getId(),r=e.getUserId(),s.default.log(T+".handleEvents - remote stream added, userID:"+r+" streamID:"+n+" type:"+e.getType()),i.label=1;case 1:return i.trys.push([1,3,,5]),[4,this._client.subscribe(e)];case 2:return i.sent(),[3,5];case 3:return o=i.sent(),a=o.getCode(),c=JSON.stringify({name:"TRTC",error:o}),[4,this._tuiCallEngine._resetTUICallEngine()];case 4:return i.sent(),this._tuiCallEngine._delegate.onError(a,c),[3,5];case 5:return[2]}}))}))})),this._client.on("stream-subscribed",(function(t){return r(e,void 0,void 0,(function(){var e,n;return i(this,(function(r){return e=t.stream,n=e.getUserId(),s.default.log(T+".handleEvents - stream subscribed, _remoteStreams:"+this._remoteStreams+", userID:"+n),this._remoteStreams.push(e),this.delegateVideoAvailableState(n,!0),this.getCallType()===u.CALL_TYPE.AUDIO_CALL&&this.playAudioStream(e),[2]}))}))})),this._client.on("stream-removed",(function(t){var n=t.stream,r=n.getId(),i=n.getUserId(),o="_trtc_calling_audio_call-"+i;if(s.default.log(T+".handleEvents - remote stream-removed, streamID:"+r+" type:"+n.getType()),e._tuiCallEngine._delegate.onUserAudioAvailable({userID:i,isAudioAvailable:!1}),e._tuiCallEngine._delegate.onUserVideoAvailable({userID:i,isVideoAvailable:!1}),n.stop(),n.close(),e._remoteStreams=e._remoteStreams.filter((function(e){return e.getId()!==r})),e.getCallType()===u.CALL_TYPE.AUDIO_CALL){var a=document.getElementById("_trtc_calling_layer"),c=document.getElementById(o);a&&c&&a.removeChild(c)}e._videoAvailableMap.delete(i)})),this._client.on("stream-updated",(function(t){var n=t.stream,r=n.getUserId(),i=n.getType(),o=n.hasAudio(),a=n.hasVideo();s.default.log(T+".handleEvents - stream-updated, type:"+i+" hasAudio:"+o+" hasVideo:"+a),e.querySubscribeSuccess(r)&&e.delegateVideoAvailableState(r,!!a)})),this._client.on("mute-audio",(function(t){s.default.debug(T+".handleEvents - "+t.userId+" mute audio"),e._tuiCallEngine._delegate.onUserAudioAvailable({userID:t.userId,isAudioAvailable:!1})})),this._client.on("unmute-audio",(function(t){s.default.debug(T+".handleEvents - "+t.userId+" unmute audio"),e._tuiCallEngine._delegate.onUserAudioAvailable({userID:t.userId,isAudioAvailable:!0})})),this._client.on("mute-video",(function(t){s.default.debug(T+".handleEvents - "+t.userId+" mute video"),e.querySubscribeSuccess(t.userId)&&e.delegateVideoAvailableState(t.userId,!1)})),this._client.on("unmute-video",(function(t){s.default.debug(T+".handleEvents - "+t.userId+" unmute video"),e.querySubscribeSuccess(t.userId)&&e.delegateVideoAvailableState(t.userId,!0)})),this._client.on("audio-volume",(function(t){s.default.debug(T+".handleEvents - "+t+" audio volume"),e._tuiCallEngine._delegate.onUserVoiceVolume(t.result)})),this._client.on("connection-state-changed",(function(e){s.default.log(T+".handleEvents - RtcClient state changed from "+e.prevState+" to "+e.state)}))},e.prototype.muteLocalVideo=function(){var e;return r(this,void 0,void 0,(function(){return i(this,(function(t){return[2,null===(e=this._localStream)||void 0===e?void 0:e.muteVideo()]}))}))},e.prototype.unMuteLocalVideo=function(){var e;return r(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:if(t=this._localStream.getVideoTrack())return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.addTrack(t)];case 2:return n.sent(),[2,!0];case 3:return n.sent(),s.default.warn(T+".unMuteLocalVideo - add video track failed"),[3,4];case 4:return[3,6];case 5:return[2,null===(e=this._localStream)||void 0===e?void 0:e.unmuteVideo()];case 6:return[2]}}))}))},e.prototype.muteLocalAudio=function(){var e,t;return r(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,null===(e=this._displayLocalStream)||void 0===e?void 0:e.muteAudio()];case 1:return n.sent(),[4,null===(t=this._localStream)||void 0===t?void 0:t.muteAudio()];case 2:return n.sent(),[2]}}))}))},e.prototype.unMuteLocalAudio=function(){var e,t;return r(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,null===(e=this._displayLocalStream)||void 0===e?void 0:e.unmuteAudio()];case 1:return n.sent(),[4,null===(t=this._localStream)||void 0===t?void 0:t.unmuteAudio()];case 2:return n.sent(),[2]}}))}))},e.prototype.switchCallMode=function(e){return r(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:switch(s.default.log(T+".switchCallMode - type",e),t=this._localStream.getVideoTrack(),e){case u.CALL_TYPE.VIDEO_CALL:return[3,1];case u.CALL_TYPE.AUDIO_CALL:return[3,5]}return[3,9];case 1:return n.trys.push([1,3,,4]),[4,this.stopLocalPlayStreamTrack(I.NAME.VIDEO)];case 2:return n.sent(),this.removeTrack(t),this._tuiCallEngine.setCallType(u.CALL_TYPE.AUDIO_CALL),this._tuiCallEngine.setSwitchCallModeStatus(!0),this._tuiCallEngine._delegate.onCallTypeChanged(u.CALL_TYPE.VIDEO_CALL,u.CALL_TYPE.AUDIO_CALL),[3,4];case 3:return n.sent(),this._tuiCallEngine._delegate.onError(g.default.FAILURE_SWITCH_TO_AUDIO,v.ERROR_MESSAGE.FAILURE_SWITCH_TO_AUDIO),[3,4];case 4:return[3,9];case 5:return n.trys.push([5,7,,8]),[4,this.addTrack(t)];case 6:return n.sent(),this._tuiCallEngine.setCallType(u.CALL_TYPE.VIDEO_CALL),this._tuiCallEngine.setSwitchCallModeStatus(!0),this._tuiCallEngine._delegate.onCallTypeChanged(u.CALL_TYPE.AUDIO_CALL,u.CALL_TYPE.VIDEO_CALL),[3,8];case 7:return n.sent(),this._tuiCallEngine._delegate.onError(g.default.FAILURE_SWITCH_TO_VIDEO,v.ERROR_MESSAGE.FAILURE_SWITCH_TO_VIDEO),[3,8];case 8:return[3,9];case 9:return[2]}}))}))},e.prototype.removeTrack=function(e){return r(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:if(s.default.log(T+".removeTrack ",!!e),!e)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this._localStream.removeTrack(e)];case 2:return n.sent(),e.stop(),[3,4];case 3:throw t=n.sent(),s.default.error(T+".removeTrack - failed to removeTrack local stream "+t),new Error(t);case 4:return[2]}}))}))},e.prototype.addTrack=function(e){var t;return r(this,void 0,void 0,(function(){var n,r,o;return i(this,(function(i){switch(i.label){case 0:return s.default.log(T+".addTrack ",!e),e?[3,7]:(n=C.createStream({userId:this._tuiCallEngine.getUserID(),audio:!1,video:!0}),[4,this._setVideoProfile(n)]);case 1:return i.sent(),[4,n.initialize()];case 2:i.sent(),r=n.getVideoTrack(),i.label=3;case 3:return i.trys.push([3,6,,7]),r?[4,null===(t=this._localStream)||void 0===t?void 0:t.addTrack(r)]:[3,5];case 4:i.sent(),i.label=5;case 5:return[3,7];case 6:throw o=i.sent(),s.default.error(T+".addTrack - failed to addTrack local stream "+o),new Error(o);case 7:return[2]}}))}))},e.prototype.reset=function(){return r(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return this._isJoined?[4,this.leave()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.getMediaDevicesAuth=function(e){return r(this,void 0,void 0,(function(){var t,n,r;return i(this,(function(i){switch(i.label){case 0:if(!c.checkProtocols())throw new h.default({message:""+v.ERROR_MESSAGE.ERROR_HTTP,code:g.default.ERROR_HTTP});if(!e.audio)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia({audio:!0,video:!1})];case 2:return n=i.sent(),this.releaseStream(n),this._tuiCallEngine.setDevicePermission(u.DEVICE_TYPE.AUDIO,!0),[3,4];case 3:throw t=i.sent(),this._tuiCallEngine.setDevicePermission(u.DEVICE_TYPE.AUDIO,!1),new Error(t);case 4:if(!e.video)return[3,8];i.label=5;case 5:return i.trys.push([5,7,,8]),[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 6:return n=i.sent(),this.releaseStream(n),this._tuiCallEngine.setDevicePermission(u.DEVICE_TYPE.VIDEO,!0),[3,8];case 7:if(r=i.sent(),this._tuiCallEngine.setDevicePermission(u.DEVICE_TYPE.VIDEO,!1),s.default.error(T+".getMediaDevicesAuth - failed to get user video steam - "+r),e.isThrowVideoError)throw new Error(r);return[3,8];case 8:return[2,this._tuiCallEngine.getDevicePermission()]}}))}))},e.prototype.enableAIVoice=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this._isAiNoiseSuppress=e,this._aiNoiseSuppressionProcessor?(s.default.info(T+".enableAIVoice "+e),e?[4,this._aiNoiseSuppressionProcessor.enable()]:[3,2]):[2];case 1:return t.sent(),[3,4];case 2:return[4,this._aiNoiseSuppressionProcessor.disable()];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))},e.prototype.releaseStream=function(e){for(var t=e.getTracks(),n=0;n<t.length;n++)t[n].stop()},e.prototype.stopLocalPlayStreamTrack=function(e){return r(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return this._displayLocalStream?e!==I.NAME.VIDEO?[3,4]:this._displayLocalStream.hasAudio()?(t=this._displayLocalStream.getVideoTrack())?[4,this._displayLocalStream.removeTrack(t)]:[3,2]:[3,3]:[3,5];case 1:r.sent(),t.stop(),r.label=2;case 2:return[3,4];case 3:this._displayLocalStream.stop(),this._displayLocalStream.close(),this._displayLocalStream=null,r.label=4;case 4:e===I.NAME.AUDIO&&(this._displayLocalStream.hasVideo()?(n=this._displayLocalStream.getAudioTrack())&&(this.muteLocalAudio(),n.stop()):(this._displayLocalStream.stop(),this._displayLocalStream.close(),this._displayLocalStream=null)),r.label=5;case 5:return[2]}}))}))},e.prototype._setVideoProfile=function(e,t){return r(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,7]),e?(t=t||this._tuiCallEngine.getVideoQuality(),e?[4,e.setVideoProfile(t)]:[3,2]):(s.default.warn(T+"._setVideoProfile - stream is empty"),[2]);case 1:r.sent(),r.label=2;case 2:return[3,7];case 3:return"OverconstrainedError"!==r.sent().name?[3,5]:(console.error("当前摄像头不支持该 profile"),[4,(n=C.createStream({video:!0,audio:!1})).initialize()]);case 4:return r.sent(),this._localStream.replaceTrack(n.getVideoTrack()),[3,6];case 5:console.error("当前浏览器不支持动态调用该接口"),r.label=6;case 6:return[3,7];case 7:return[2]}}))}))},e.prototype._setVideoRenderParams=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o,a,c,u,d,p,f,h,g,v;return i(this,(function(m){switch(m.label){case 0:return m.trys.push([0,14,,15]),n=(t=e||{}).userID,r=t.objectFit,o=void 0===r?"":r,n&&!this._userIdDomMap.has(n)?(s.default.warn(T+"._setVideoRenderParams - failed the userID: "+n+" does not have a play node"),[2]):(a={},o!==I.NAME.CONTAIN&&o!==I.NAME.COVER&&o!==I.NAME.FILL||(a.objectFit=e.objectFit),l.isBoolean(e.muted)&&(a.muted=e.muted),l.isBoolean(e.mirror)&&(a.mirror=e.mirror),this._tuiCallEngine.setPlayOptions(a),a=this._tuiCallEngine.getPlayOptions(),c=this._tuiCallEngine.getUserID(),n!==c&&n?[3,6]:(h=this._userIdDomMap.get(c),this._tuiCallEngine.isInviter()?this._displayLocalStream?[4,this._displayLocalStream.play(h,a)]:[3,2]:[3,3]));case 1:m.sent(),m.label=2;case 2:return[3,6];case 3:return this._localStream?[4,this._localStream.play(h,a)]:[3,5];case 4:m.sent(),m.label=5;case 5:m.label=6;case 6:if(n)return[3,10];u=(u=Array.from(this._userIdDomMap,(function(e){return e[0]}))).filter((function(e){return e!==c})),d=function(e){var t,n;return i(this,(function(r){switch(r.label){case 0:return t=p._userIdDomMap.get(u[e]),n=p._remoteStreams.find((function(t){return t.getUserId()===u[e]})),n?[4,n.play(t,a)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))},p=this,f=0,m.label=7;case 7:return f<u.length?[5,d(f)]:[3,10];case 8:m.sent(),m.label=9;case 9:return f++,[3,7];case 10:return n&&n!==c?(h=this._userIdDomMap.get(n),g=this._remoteStreams.find((function(e){return e.getUserId()===n})),g?[4,g.play(h,a)]:[3,12]):[3,13];case 11:m.sent(),m.label=12;case 12:m.label=13;case 13:return[3,15];case 14:return v=m.sent(),s.default.warn(T+"._setVideoRenderParams - failed call stream.play error: "+v),[3,15];case 15:return[2]}}))}))},e}();t.default=S},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkProtocols=void 0,t.checkProtocols=function(){if(!window)return!1;if(!window.location)return!1;var e=window.location,t=e.protocol,n=e.hostname;return"http:"!==t||"localhost"===n||"127.0.0.1"===n}},function(e,t,n){"use strict";var r=n(3),i=n(18),o=n(37),a=n(24);function s(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var c=s(n(14));c.Axios=o,c.create=function(e){return s(a(c.defaults,e))},c.Cancel=n(25),c.CancelToken=n(52),c.isCancel=n(23),c.all=function(e){return Promise.all(e)},c.spread=n(53),c.isAxiosError=n(54),e.exports=c,e.exports.default=c},function(e,t,n){"use strict";var r=n(3),i=n(19),o=n(38),a=n(39),s=n(24),c=n(50),u=c.validators;function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&c.assertOptions(t,{silentJSONParsing:u.transitional(u.boolean,"1.0.0"),forcedJSONParsing:u.transitional(u.boolean,"1.0.0"),clarifyTimeoutError:u.transitional(u.boolean,"1.0.0")},!1);var n=[],r=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var i,o=[];if(this.interceptors.response.forEach((function(e){o.push(e.fulfilled,e.rejected)})),!r){var l=[a,void 0];for(Array.prototype.unshift.apply(l,n),l=l.concat(o),i=Promise.resolve(e);l.length;)i=i.then(l.shift(),l.shift());return i}for(var d=e;n.length;){var p=n.shift(),f=n.shift();try{d=p(d)}catch(e){f(e);break}}try{i=a(d)}catch(e){return Promise.reject(e)}for(;o.length;)i=i.then(o.shift(),o.shift());return i},l.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=l},function(e,t,n){"use strict";var r=n(3);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,n){"use strict";var r=n(3),i=n(40),o=n(23),a=n(14);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(s(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(3),i=n(14);e.exports=function(e,t,n){var o=this||i;return r.forEach(n,(function(n){e=n.call(o,e,t)})),e}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,d=-1;function p(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&f())}function f(){if(!l){var e=s(p);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||s(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(3);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(22);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";var r=n(3);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(46),i=n(47);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(3),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},function(e,t,n){"use strict";var r=n(3);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(51),i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={},a=r.version.split(".");function s(e,t){for(var n=t?t.split("."):a,r=e.split("."),i=0;i<3;i++){if(n[i]>r[i])return!0;if(n[i]<r[i])return!1}return!1}i.transitional=function(e,t,n){var i=t&&s(t);function a(e,t){return"[Axios v"+r.version+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new Error(a(r," has been removed in "+t));return i&&!o[r]&&(o[r]=!0,console.warn(a(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={isOlderVersion:s,assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],a=t[o];if(a){var s=e[o],c=void 0===s||a(s,o,e);if(!0!==c)throw new TypeError("option "+o+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:i}},function(e){e.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},function(e,t,n){"use strict";var r=n(25);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0});var c=n(58),u=n(0),l=n(7),d="TSignalClient",p=n(2),f=function(){function e(e,t){this._tuiCallEngine=e,this._tsignaling=new c(t),this._tsignalingReady=!1,this._joined=!1,this._newInvitationData=null,this._resolveMap=new Map,this.initEvents()}return e.prototype.setTSignalingIsJoined=function(e){this._joined=e},e.prototype.getTSignalingIsJoined=function(){return this._joined},e.prototype.setLogLevel=function(e){this._tsignaling.setLogLevel(e)},e.prototype.initEvents=function(){var e=this._tsignaling;e.on(c.EVENT.SDK_READY,this.onSdkReady,this),e.on(c.EVENT.SDK_NOT_READY,this.onSdkNotReady,this),e.on(c.EVENT.NEW_INVITATION_RECEIVED,this.onNewInvitationReceived,this),e.on(c.EVENT.INVITEE_ACCEPTED,this.onInviteeAccepted,this),e.on(c.EVENT.INVITEE_REJECTED,this.onInviteeRejected,this),e.on(c.EVENT.INVITATION_CANCELLED,this.onInvitationCancelled,this),e.on(c.EVENT.INVITATION_TIMEOUT,this.onInvitationTimeout,this),e.on(c.EVENT.KICKED_OUT,this.onKickedOut,this),e.on(c.EVENT.NET_STATE_CHANGE,this.onNetStateChange,this),c.EVENT.MESSAGE_SENT_BY_ME&&e.on(c.EVENT.MESSAGE_SENT_BY_ME,this.onMessageSentByMe,this)},e.prototype.onSdkReady=function(e){this._tsignalingReady=!0,this._tuiCallEngine._delegate.onSdkReady(e);var t=this._resolveMap.get("login");t&&(t.resolve(t.value),this._resolveMap.delete("login"))},e.prototype.onSdkNotReady=function(){this._tsignalingReady=!1},e.prototype.onNewInvitationReceived=function(e){var t,n;return i(this,void 0,void 0,(function(){var r,i,a,s,c,p,f,h,g,v;return o(this,(function(o){switch(o.label){case 0:return r=this._tuiCallEngine.getCallStatus(),u.default.log(d+".onNewInvitationReceived - params:",e,"currentCallStatus:"+r),i=e.data,a=i.inviter,s=i.inviteeList,c=i.data,p=i.inviteID,f=i.groupID,(h=JSON.parse(c)).room_id||(h.room_id=null===(t=null==h?void 0:h.data)||void 0===t?void 0:t.room_id),this._tuiCallEngine.getUserID()===a?[2]:(v={inviter:a,inviteeList:s,inviteID:p,isGroupCall:g=!!f,inviteData:h,groupID:f,currentCallStatus:r,inCallUserIDs:(null==h?void 0:h.inCallUserIDs)||[]},(null===(n=null==h?void 0:h.data)||void 0===n?void 0:n.cmd)!==l.CMD_TYPE.HANG_UP?[3,2]:(u.default.log(d+".hangup - params:",a,h,this._tuiCallEngine.getHandledInviteeList(),this._tuiCallEngine.getUnHandledInviteeList(),r,g),r===l.CALL_STATUS.IDLE?[2]:[4,this.handleHangupSignal(v)]));case 1:return o.sent(),[2];case 2:return!f&&this.judgeSwitchCallMode(h)?(r!==l.CALL_STATUS.IDLE&&this._tuiCallEngine.getRoomID()===h.room_id&&(this.handleSwitchCallMode(p,h),this._tuiCallEngine.addAudioVideoSwitchIdList(p)),[2]):r!==l.CALL_STATUS.IDLE?(this.reject({inviteID:p,callType:h.call_type,isBusy:!0}),[2]):(this.handleInvitedSignal(v),[2])}}))}))},e.prototype.handleHangupSignal=function(e){return i(this,void 0,void 0,(function(){var t,n,r,i,a,s,c,u,d;return o(this,(function(o){switch(o.label){case 0:if(t=e.inviter,n=e.inviteData,r=e.currentCallStatus,i=e.inviteeList,a=this._tuiCallEngine.isGroupCall(),s=this._tuiCallEngine.isInviter(),r===l.CALL_STATUS.CALLING){if(u=this._tuiCallEngine.getHandledInviteeList(),-1!==(d=this._tuiCallEngine.getUnHandledInviteeList()).indexOf(t)&&this._tuiCallEngine.deleteUnHandledInviteeList([t]),-1===u.indexOf(t))return[2]}else if(this._tuiCallEngine.deleteHandledInviteeList([t]),-1===(u=this._tuiCallEngine.getHandledInviteeList()).indexOf(t)&&u.length>1)return[2];return c=this._tuiCallEngine.generateCallEndData({totalTime:n.call_end||0}),a?[3,2]:[4,this._tuiCallEngine._resetTUICallEngine()];case 1:return o.sent(),this._tuiCallEngine._delegate.onCallEnd(c),[3,10];case 2:return this._tuiCallEngine.deleteHandledInviteeList([t]),u=this._tuiCallEngine.getHandledInviteeList(),d=this._tuiCallEngine.getUnHandledInviteeList(),s?1!==u.length||0!==d.length?[3,4]:[4,this._tuiCallEngine._resetTUICallEngine()]:[3,5];case 3:o.sent(),this._tuiCallEngine._delegate.onCallEnd(c),o.label=4;case 4:return[3,10];case 5:return r!==l.CALL_STATUS.CALLING?[3,8]:(-1!==i.indexOf(this._tuiCallEngine.getUserID())&&this._tuiCallEngine._delegate.onUserLeave(t),0!==u.length||1!==d.length?[3,7]:[4,this._tuiCallEngine._resetTUICallEngine()]);case 6:o.sent(),this._tuiCallEngine._delegate.onCallingCancel(t),o.label=7;case 7:return[3,10];case 8:return 1!==u.length||0!==d.length?[3,10]:[4,this._tuiCallEngine._resetTUICallEngine()];case 9:o.sent(),this._tuiCallEngine._delegate.onCallEnd(c),o.label=10;case 10:return[2]}}))}))},e.prototype.handleInvitedSignal=function(e){return i(this,void 0,void 0,(function(){var t,n,i,a,c,u,d,f,h,g;return o(this,(function(o){return t=e.inviter,n=e.inviteeList,i=e.isGroupCall,a=e.groupID,c=e.inviteID,u=e.inviteData,d=e.inCallUserIDs,f=void 0===d?[]:d,this._tuiCallEngine.changeCallStatus(l.CALL_STATUS.CALLING),this._tuiCallEngine.setInviterID(t),this._tuiCallEngine.setInviteeList(n),this._tuiCallEngine.setRoomID(u.room_id),this._tuiCallEngine.addUnHandledInviteeList(s(n,f)),this._tuiCallEngine.addHandledInviteeList([t]),this._tuiCallEngine.addAcceptedUserList(c,[t]),i&&(this._tuiCallEngine.setIsGroupCall(i),this._tuiCallEngine.setGroupID(a)),this._tuiCallEngine.addInviterInviteId(c,s([t],n)),h=f.filter((function(e){return-1===n.indexOf(e)})),this._newInvitationData={sponsor:t,userIDList:s(n,h),isFromGroup:i,inviteID:c,groupID:a,inviteData:{version:u.version,callType:u.call_type,roomID:u.room_id}},g=this._tuiCallEngine.getCallDataReport().getCallData(),g=r(r({},g),{roomID:u.room_id,inviteID:c,callRole:l.CALL_ROLE.INVITEE,callType:u.call_type,inviteeList:n,callScene:a?p.NAME.GROUP_CALL:p.NAME.SINGLE_CALL}),this._tuiCallEngine.getCallDataReport().setCallData(g),this._tuiCallEngine._delegate.onInvited(this._newInvitationData),[2]}))}))},e.prototype.getInviteData=function(){return this._newInvitationData},e.prototype.setInviteData=function(e){this._newInvitationData=e},e.prototype.handleSwitchCallMode=function(e,t){var n={inviteID:e,callType:t.call_type,switch_to_audio_call:null},r={cmd:l.CMD_TYPE.SWITCH_TO_VIDEO};t.call_type===l.CALL_TYPE.VIDEO_CALL?(n.switch_to_audio_call=l.CMD_TYPE.SWITCH_TO_AUDIO_CALL,r.cmd=l.CMD_TYPE.SWITCH_TO_AUDIO):delete n.switch_to_audio_call;var i=this._tuiCallEngine.getCallStatus();if(this.accept(n,r),i===l.CALL_STATUS.CALLING){var o=t.call_type===l.CALL_TYPE.VIDEO_CALL?l.CALL_TYPE.AUDIO_CALL:l.CALL_TYPE.VIDEO_CALL;this._tuiCallEngine._delegate.onCallTypeChanged(t.call_type,o),this._newInvitationData.inviteData.callType=o,this._tuiCallEngine.setSwitchCallModeStatus(!1)}else i===l.CALL_STATUS.CONNECTED&&(this._tuiCallEngine.setSwitchCallModeStatus(!1),this._tuiCallEngine._trtcClient.switchCallMode(this._tuiCallEngine.getCallType()))},e.prototype.judgeSwitchCallMode=function(e){var t=e.switch_to_audio_call&&e.switch_to_audio_call===l.CMD_TYPE.SWITCH_TO_AUDIO_CALL||e.data&&e.data.cmd===l.CMD_TYPE.SWITCH_TO_AUDIO||e.data&&e.data.cmd===l.CMD_TYPE.SWITCH_TO_VIDEO;return u.default.log(d+".switchCallMode:",e,"isSwitchCallMode-"+t),t},e.prototype.onInviteeAccepted=function(e){return i(this,void 0,void 0,(function(){var t,n,r,i;return o(this,(function(o){switch(o.label){case 0:return u.default.log(d+".onInviteeAccepted - params:",e),t=JSON.parse(e.data.data),n=e.data.invitee,r=e.data.inviteID,-1===this._tuiCallEngine.getTotalInviterInviteIdList().indexOf(r)?[2]:this._tuiCallEngine.isGroupCall()||!this.judgeSwitchCallMode(t)||this._tuiCallEngine.getSwitchCallModeStatus()?(i=this._tuiCallEngine.getCallStatus(),n!==this._tuiCallEngine.getUserID()||i!==l.CALL_STATUS.CALLING?[3,2]:[4,this._tuiCallEngine._resetTUICallEngine()]):(this._tuiCallEngine._trtcClient.switchCallMode(this._tuiCallEngine.getCallType()),[2]);case 1:return o.sent(),this._tuiCallEngine._delegate.onCallingCancel(n),[2];case 2:return this._tuiCallEngine.isInviter()&&this._tuiCallEngine.changeCallStatus(l.CALL_STATUS.CONNECTED),this._tuiCallEngine._delegate.onUserAccept(n),this._tuiCallEngine.addHandledInviteeList([n]),this._tuiCallEngine.deleteUnHandledInviteeList([n]),this._tuiCallEngine.addAcceptedUserList(r,[n]),[2]}}))}))},e.prototype.onInviteeRejected=function(e){var t;return i(this,void 0,void 0,(function(){var n,r,i,a,s,c,p,f,h,g,v;return o(this,(function(o){switch(o.label){case 0:return u.default.log(d+".onInviteeRejected - params:",e),n=e.data.inviteID,this._tuiCallEngine.isGroupCall()||this._tuiCallEngine.getSwitchCallModeStatus()||-1===this._tuiCallEngine.getAudioVideoSwitchIdList().indexOf(n)?(r=e.data.invitee,i=e.data.inviter,a=this._tuiCallEngine.getUserID(),s=this._tuiCallEngine.getCallStatus(),c=JSON.parse(e.data.data),s===l.CALL_STATUS.IDLE?[2]:-1===this._tuiCallEngine.getInviterInviteIdList().indexOf(n)?(this._tuiCallEngine.deleteUnHandledInviteeList([r]),[2]):a!==r||s!==l.CALL_STATUS.CALLING?[3,2]:[4,this._tuiCallEngine._resetTUICallEngine()]):(u.default.log(d+".onInviteeRejected - Audio and video switching is not available"),this._tuiCallEngine.setSwitchCallModeStatus(!0),[2]);case 1:return o.sent(),this._tuiCallEngine._delegate.onCallingCancel(r),[2];case 2:return p=this._tuiCallEngine.isGroupCall(),f=this._tuiCallEngine.isInviter(),this._tuiCallEngine.deleteUnHandledInviteeList([r]),h=this._tuiCallEngine.getUnHandledInviteeList(),g=this._tuiCallEngine.getHandledInviteeList(),s===l.CALL_STATUS.CONNECTED&&-1!==g.indexOf(r)?[2]:"line_busy"===c.line_busy||""===c.line_busy||(null===(t=null==c?void 0:c.data)||void 0===t?void 0:t.message)&&"lineBusy"===c.data.message?p?[3,4]:[4,this._tuiCallEngine._resetTUICallEngine()]:[3,7];case 3:return o.sent(),this._tuiCallEngine._delegate.onCallingCancel(r),[3,6];case 4:return 0!==h.length||1!==g.length?[3,6]:[4,this._tuiCallEngine._resetTUICallEngine()];case 5:o.sent(),this._tuiCallEngine._delegate.onCallingCancel(r),o.label=6;case 6:return i===this._tuiCallEngine.getInviterID()&&this._tuiCallEngine._delegate.onLineBusy(r),[3,18];case 7:return p?[3,9]:[4,this._tuiCallEngine._resetTUICallEngine()];case 8:return o.sent(),this._tuiCallEngine._delegate.onCallingCancel(r),this._tuiCallEngine._delegate.onReject(r),[3,18];case 9:return s!==l.CALL_STATUS.CALLING?[3,15]:f?0!==h.length||1!==g.length?[3,11]:[4,this._tuiCallEngine._resetTUICallEngine()]:[3,12];case 10:o.sent(),this._tuiCallEngine._delegate.onCallingCancel(r),o.label=11;case 11:return[3,14];case 12:return 1!==h.length||0!==g.length?[3,14]:[4,this._tuiCallEngine._resetTUICallEngine()];case 13:o.sent(),this._tuiCallEngine._delegate.onCallingCancel(r),o.label=14;case 14:return[3,17];case 15:return 0!==h.length||1!==g.length?[3,17]:(v=this._tuiCallEngine.generateCallEndData({userId:r}),[4,this._tuiCallEngine._resetTUICallEngine()]);case 16:o.sent(),this._tuiCallEngine._delegate.onCallEnd(v),o.label=17;case 17:this._tuiCallEngine._delegate.onReject(r),o.label=18;case 18:return[2]}}))}))},e.prototype.onInvitationCancelled=function(e){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return u.default.log(d+".onInvitationCancelled - params:",e),-1===this._tuiCallEngine.getInviterInviteIdList().indexOf(e.data.inviteID)||this._tuiCallEngine.getCallStatus()===l.CALL_STATUS.CONNECTED?[2]:[4,this._tuiCallEngine._resetTUICallEngine()];case 1:return t.sent(),this._tuiCallEngine._delegate.onCallingCancel(this._tuiCallEngine.getUserID()),[2]}}))}))},e.prototype.onInvitationTimeout=function(e){var t;return i(this,void 0,void 0,(function(){var n,r,i,a,s,c,p,f,h,g,v,m;return o(this,(function(o){switch(o.label){case 0:return n=e.data,r=n.inviter,i=n.inviteeList,a=void 0===i?[]:i,s=n.inviteID,c=this._tuiCallEngine.getUserID(),p=this._tuiCallEngine.isGroupCall(),f=this._tuiCallEngine.isInviter(),h=this._tuiCallEngine.getCallStatus(),this._tuiCallEngine.deleteUnHandledInviteeList(a),u.default.log(d+".onInvitationTimeout - params:",e,"currentUserID:"+c+" isInviter:"+f+" isGroupCall:"+p+" currentCallStatus:"+h+" inviteID:"+(null===(t=null==this?void 0:this._newInvitationData)||void 0===t?void 0:t.inviteID)),-1===this._tuiCallEngine.getInviterInviteIdList().indexOf(s)||h===l.CALL_STATUS.IDLE?[2]:(g=this._tuiCallEngine.getHandledInviteeList(),v=this._tuiCallEngine.getUnHandledInviteeList(),p?[3,2]:[4,this._tuiCallEngine._resetTUICallEngine()]);case 1:return o.sent(),f?(this._tuiCallEngine._delegate.onCallingCancel(a[0]),this._tuiCallEngine._delegate.onNoResp(r,a)):this._tuiCallEngine._delegate.onCallingCancel(a[0]||""),[3,11];case 2:return h!==l.CALL_STATUS.CALLING?[3,9]:f?0!==v.length?[3,4]:[4,this._tuiCallEngine._resetTUICallEngine()]:[3,5];case 3:o.sent(),this._tuiCallEngine._delegate.onCallingCancel(a.join(",")),o.label=4;case 4:return this._tuiCallEngine._delegate.onNoResp(r,a),[3,8];case 5:return-1!==a.indexOf(c)?[3,6]:(this._tuiCallEngine._delegate.onNoResp(r,a),[3,8]);case 6:return[4,this._tuiCallEngine._resetTUICallEngine()];case 7:o.sent(),this._tuiCallEngine._delegate.onCallingCancel(c),o.label=8;case 8:return[3,11];case 9:return this._tuiCallEngine._delegate.onNoResp(r,a),1!==g.length||0!==v.length?[3,11]:(m=this._tuiCallEngine.generateCallEndData(),[4,this._tuiCallEngine._resetTUICallEngine()]);case 10:o.sent(),this._tuiCallEngine._delegate.onCallEnd(m),o.label=11;case 11:return[2]}}))}))},e.prototype.onKickedOut=function(){return i(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return u.default.log(d+".onKickedOut"),[4,this._tuiCallEngine._resetTUICallEngine()];case 1:return e.sent(),this._tuiCallEngine._delegate.onKickedOut(),[2]}}))}))},e.prototype.onNetStateChange=function(){u.default.debug(d+".onNetStateChange")},e.prototype.onMessageSentByMe=function(e){this._tuiCallEngine._delegate.onMessageSentByMe(e)},e.prototype.login=function(e){return i(this,void 0,void 0,(function(){var t=this;return o(this,(function(n){return[2,new Promise((function(n,r){t._tsignaling.login(e).then((function(e){var r;if(null===(r=e.data)||void 0===r?void 0:r.repeatLogin)return u.default.warn(d+".login - success: The TIM login status has been inherited into Call. IM 登录状态已成功被 Call 继承。"),void n();t._resolveMap.set("login",{resolve:n,value:e})})).catch((function(e){r(e)}))}))]}))}))},e.prototype.logout=function(){return i(this,void 0,void 0,(function(){return o(this,(function(e){return this._joined=!1,[2,this._tsignaling.logout()]}))}))},e.prototype.invite=function(e){return i(this,void 0,void 0,(function(){var t,n,i,a,s,c,u;return o(this,(function(o){switch(o.label){case 0:return t=e.userID,n=e.type,i=e.roomID,a=e.timeout,s=e.offlinePushInfo,c=e.userIDList,[4,this._tsignaling.invite({userID:t,data:JSON.stringify(this.handleNewSignaling({version:0,call_type:n,room_id:i},{userIDs:c})),timeout:a,offlinePushInfo:s})];case 1:return u=o.sent(),[2,r(r({},u),{roomID:i,userID:t})]}}))}))},e.prototype.inviteInGroup=function(e){return i(this,void 0,void 0,(function(){var t,n,i,a,s,c,u,l;return o(this,(function(o){switch(o.label){case 0:return t=e.groupID,n=e.userIDList,i=e.roomID,a=e.type,s=e.timeout,c=e.offlinePushInfo,u=e.inCallUserIDs,[4,this._tsignaling.inviteInGroup({groupID:t,inviteeList:n,data:JSON.stringify(this.handleNewSignaling({version:0,call_type:a,room_id:i,inCallUserIDs:u})),timeout:s,offlinePushInfo:c})];case 1:return l=o.sent(),[2,r(r({},l),{roomID:i,groupID:t})]}}))}))},e.prototype.hangup=function(e){return i(this,void 0,void 0,(function(){var t,n,r,i,a,s,c,p;return o(this,(function(o){switch(o.label){case 0:return u.default.log(d+".hangup - params:",e),t=e.userIDList,n=e.callType,r=e.callEnd,a={version:0,call_type:n,call_end:i=void 0===r?0:r},s={cmd:l.CMD_TYPE.HANG_UP},c=JSON.stringify(this.handleNewSignaling(a,s)),this._tuiCallEngine.isGroupCall()&&this._tuiCallEngine.getGroupID()?[4,this._tsignaling.inviteInGroup({inviteeList:t,groupID:this._tuiCallEngine.getGroupID(),data:c,timeout:0})]:[3,2];case 1:return o.sent(),[3,4];case 2:return[4,this._tsignaling.invite({userID:t[0],data:c,timeout:0})];case 3:o.sent(),o.label=4;case 4:return this._joined=!1,p=this._tuiCallEngine.generateCallEndData({callMediaType:n,totalTime:i}),this._tuiCallEngine._delegate.onCallEnd(p),[2]}}))}))},e.prototype.accept=function(e,t){return i(this,void 0,void 0,(function(){var n,i,s;return o(this,(function(o){switch(o.label){case 0:return n=e.inviteID,i=e.callType,s=a(e,["inviteID","callType"]),[4,this._tsignaling.accept({inviteID:n,data:JSON.stringify(this.handleNewSignaling(r({version:0,call_type:i},s),t))})];case 1:return[2,o.sent()]}}))}))},e.prototype.reject=function(e){return i(this,void 0,void 0,(function(){var t,n,r,i;return o(this,(function(o){return t=e.inviteID,n=e.callType,r=e.isBusy,i={version:0,call_type:n},r&&(i.line_busy="line_busy"),[2,this._tsignaling.reject({inviteID:t,data:JSON.stringify(this.handleNewSignaling(i,{message:r?"lineBusy":""}))})]}))}))},e.prototype.cancel=function(e){return i(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){return t=e.inviteID,n=JSON.stringify(this.handleNewSignaling({version:4,businessID:"av_call",call_type:this._tuiCallEngine.getCallType()})),[2,this._tsignaling.cancel({inviteID:t,data:n})]}))}))},e.prototype.resetJoined=function(){this._joined=!1},e.prototype.switchCallMode=function(e){return i(this,void 0,void 0,(function(){var t,n,r,i,a,s,c,u;return o(this,(function(o){switch(o.label){case 0:return t=e.userID,n=e.callType,r=e.roomID,i=e.timeout,a=e.mode,s={version:0,call_type:n,room_id:r,switch_to_audio_call:null},c={cmd:l.CMD_TYPE.SWITCH_TO_VIDEO},a===l.MODE_TYPE.AUDIO?(s.switch_to_audio_call=l.CMD_TYPE.SWITCH_TO_AUDIO_CALL,c.cmd=l.CMD_TYPE.SWITCH_TO_AUDIO):delete s.switch_to_audio_call,[4,this._tsignaling.invite({userID:t,data:JSON.stringify(this.handleNewSignaling(s,c)),timeout:i})];case 1:return(u=o.sent()).inviteID&&this._tuiCallEngine.addAudioVideoSwitchIdList(u.inviteID),[2]}}))}))},e.prototype.handleNewSignaling=function(e,t){return r(r({extraInfo:""},e),{version:4,businessID:"av_call",platform:"Web",data:r({cmd:l.CMD_TYPE_LIST[e.call_type],room_id:e.room_id,message:""},t)})},e}();t.default=f},function(e,t){e.exports=r},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(15),o=n(0),a=n(9),s=n(11),c=n(12),u="TUICallObserver",l=function(){function e(e){this._eventEmitter=e,this._eventStatController=new c.default,a.default.bindController(this._eventStatController)}return e.prototype._setInterfaceUpLoad=function(e){return o.default.time(e),new a.default(e)},e.prototype.onError=function(e,t){o.default.debug(u+".onError code:"+e+" msg:"+t),this._eventEmitter.emit(i.TUICallEvent.ERROR,{code:e,msg:t}),this._setInterfaceUpLoad(s.default.ERROR).setText("").setEnd()},e.prototype.onSdkReady=function(e){o.default.debug(u+".onSdkReady params:"+e),this._eventEmitter.emit(i.TUICallEvent.SDK_READY,e),this._setInterfaceUpLoad(s.default.SDK_READY).setText("").setEnd()},e.prototype.onInvited=function(e){o.default.debug(u+".onInvited params:",e);var t=e.sponsor,n=e.userIDList,r=e.isFromGroup,a=e.inviteData,c=e.inviteID;this._eventEmitter.emit(i.TUICallEvent.INVITED,{sponsor:t,userIDList:n,isFromGroup:r,inviteData:a,inviteID:c}),this._setInterfaceUpLoad(s.default.INVITED).setText("TUICallEvent.INVITED emitted").setEnd()},e.prototype.onUserAccept=function(e){o.default.debug(u+".onUserAccept userID:"+e),this._eventEmitter.emit(i.TUICallEvent.USER_ACCEPT,{userID:e})},e.prototype.onUserEnter=function(e){o.default.debug(u+".onUserEnter userID:"+e),this._eventEmitter.emit(i.TUICallEvent.USER_ENTER,{userID:e}),this._setInterfaceUpLoad(s.default.USER_ENTER).setText("TUICallEvent.USER_ENTER emitted").setEnd()},e.prototype.onUserLeave=function(e){o.default.debug(u+".onUserLeave userID:"+e),this._eventEmitter.emit(i.TUICallEvent.USER_LEAVE,{userID:e}),this._setInterfaceUpLoad(s.default.USER_LEAVE).setText("TUICallEvent.USER_LEAVE emitted").setEnd()},e.prototype.onReject=function(e){o.default.debug(u+".onReject userID:"+e),this._eventEmitter.emit(i.TUICallEvent.REJECT,{userID:e}),this._setInterfaceUpLoad(s.default.REJECT).setText("TUICallEvent.REJECT emitted").setEnd()},e.prototype.onNoResp=function(e,t){o.default.debug(u+".onNoResp userIDList:",e,t),this._eventEmitter.emit(i.TUICallEvent.NO_RESP,{sponsor:e,userIDList:t}),this._setInterfaceUpLoad(s.default.NO_RESP).setText("TUICallEvent.NO_RESP emitted").setEnd()},e.prototype.onLineBusy=function(e){o.default.debug(u+".onLineBusy userID:"+e),this._eventEmitter.emit(i.TUICallEvent.LINE_BUSY,{userID:e}),this._setInterfaceUpLoad(s.default.LINE_BUSY).setText("TUICallEvent.LINE_BUSY emitted").setEnd()},e.prototype.onCallingCancel=function(e){void 0===e&&(e=""),o.default.debug(u+".onCallingCancel ",e),this._eventEmitter.emit(i.TUICallEvent.CALLING_CANCEL,{userID:e}),this._setInterfaceUpLoad(s.default.CALLING_CANCEL).setText("TUICallEvent.CALLING_CANCEL emitted").setEnd()},e.prototype.onKickedOut=function(){o.default.debug(u+".onKickedOut"),this._eventEmitter.emit(i.TUICallEvent.KICKED_OUT,{}),this._setInterfaceUpLoad(s.default.KICKED_OUT).setText("TUICallEvent.KICKED_OUT emitted").setEnd()},e.prototype.onCallingTimeout=function(e,t){o.default.debug(u+".onCallingTimeout userIDList:",t),this._eventEmitter.emit(i.TUICallEvent.CALLING_TIMEOUT,{sponsor:e,userIDList:t}),this._setInterfaceUpLoad(s.default.CALLING_TIMEOUT).setText("TUICallEvent.CALLING_TIMEOUT emitted").setEnd()},e.prototype.onCallEnd=function(e){o.default.debug(u+".onCallEnd params:"+e),this._eventEmitter.emit(i.TUICallEvent.CALLING_END,r(r({},e),{callEnd:e.totalTime})),this._setInterfaceUpLoad(s.default.CALLING_END).setText("TUICallEvent.CALLING_END emitted").setEnd()},e.prototype.onUserVideoAvailable=function(e){o.default.debug(u+".onUserVideoAvailable params:",e);var t=e.userID,n=e.isVideoAvailable;this._eventEmitter.emit(i.TUICallEvent.USER_VIDEO_AVAILABLE,{userID:t,isVideoAvailable:n});var r="TUICallEvent.USER_VIDEO_AVAILABLE emitted, userID: "+t+", video: "+n;this._setInterfaceUpLoad(s.default.USER_VIDEO_AVAILABLE).setText(r).setEnd()},e.prototype.onUserAudioAvailable=function(e){o.default.debug(u+".onUserAudioAvailable params:",e);var t=e.userID,n=e.isAudioAvailable;this._eventEmitter.emit(i.TUICallEvent.USER_AUDIO_AVAILABLE,{userID:t,isAudioAvailable:n});var r="TUICallEvent.USER_AUDIO_AVAILABLE emitted, userID: "+t+", mic: "+n;this._setInterfaceUpLoad(s.default.USER_AUDIO_AVAILABLE).setText(r).setEnd()},e.prototype.onUserVoiceVolume=function(e){this._eventEmitter.emit(i.TUICallEvent.USER_VOICE_VOLUME,{volumeMap:e}),this._setInterfaceUpLoad(s.default.USER_VOICE_VOLUME).setText("TUICallEvent.USER_VOICE_VOLUME emitted").setEnd()},e.prototype.onGroupCallInviteeListUpdate=function(e){this._eventEmitter.emit(i.TUICallEvent.GROUP_CALL_INVITEE_LIST_UPDATE,{userIDList:e}),this._setInterfaceUpLoad(s.default.GROUP_CALL_INVITEE_LIST_UPDATE).setText("TUICallEvent.GROUP_CALL_INVITEE_LIST_UPDATE emitted").setEnd()},e.prototype.onCallTypeChanged=function(e,t){this._eventEmitter.emit(i.TUICallEvent.CALL_TYPE_CHANGED,{oldCallType:e,newCallType:t}),this._setInterfaceUpLoad(s.default.CALL_TYPE_CHANGED).setText("TUICallEvent.CALL_TYPE_CHANGED "+t).setEnd()},e.prototype.onDeviceUpdated=function(e,t,n,r){this._eventEmitter.emit(i.TUICallEvent.DEVICED_UPDATED,{microphoneList:e,cameraList:t,currentMicrophone:n,currentCamera:r}),this._setInterfaceUpLoad(s.default.DEVICED_UPDATED).setText("TUICallEvent.GROUP_CALL_INVITEE_LIST_UPDATE emitted").setEnd()},e.prototype.onMessageSentByMe=function(e){this._eventEmitter.emit(i.TUICallEvent.MESSAGE_SENT_BY_ME,e)},e}();t.default=l},function(e,t,n){"use strict";n.r(t);var r=n(0);const i="none",o="online",a=function(){let e=window.location.protocol;return["http:","https:"].indexOf(e)<0&&(e="http:"),e};t.default=class{constructor(){this._networkType="",this.maxWaitTime=3e3}start(){this._networkType=o}_onNetworkStatusChange(e){this._networkType=e.networkType,e.isConnected?r.default.info("NetMonitor networkType:"+e.networkType):r.default.warn("NetMonitor no network, please check!")}probe(){return new Promise(e=>{if(window&&window.fetch)fetch(`${a()}//webim-1252463788.file.myqcloud.com/assets/test/speed.xml?random=${Math.random()}`).then(t=>{t.ok?e([!0,o]):e([!1,i])}).catch(()=>{e([!1,i])});else{const t=new XMLHttpRequest,n=setTimeout(()=>{r.default.warn("NetMonitor fetch timeout. Probably no network, please check!"),t.abort(),this._networkType=i,e([!1,i])},this.maxWaitTime);t.onreadystatechange=function(){4===t.readyState&&(clearTimeout(n),200===t.status||304===t.status?(this._networkType=o,e([!0,o])):(r.default.warn(`NetMonitor fetch status:${t.status}. Probably no network, please check!`),this._networkType=i,e([!1,i])))},t.open("GET",`${a()}//webim-1252463788.file.myqcloud.com/assets/test/speed.xml?random=${Math.random()}`),t.send()}})}getNetworkType(){return this._networkType}reset(){this._networkType=""}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apiCallQueue=t.avoidRepeatedCall=t.statusValidate=t.deviceValidate=t.businessValidate=t.paramValidate=t.API_STATUS=t.VALIDATE_PARAMS=void 0;var r=n(62);Object.defineProperty(t,"VALIDATE_PARAMS",{enumerable:!0,get:function(){return r.VALIDATE_PARAMS}});var i=n(27);Object.defineProperty(t,"API_STATUS",{enumerable:!0,get:function(){return i.API_STATUS}});var o=n(63);Object.defineProperty(t,"paramValidate",{enumerable:!0,get:function(){return o.paramValidate}});var a=n(26);Object.defineProperty(t,"businessValidate",{enumerable:!0,get:function(){return a.businessValidate}});var s=n(64);Object.defineProperty(t,"deviceValidate",{enumerable:!0,get:function(){return s.deviceValidate}});var c=n(65);Object.defineProperty(t,"statusValidate",{enumerable:!0,get:function(){return c.statusValidate}});var u=n(66);Object.defineProperty(t,"avoidRepeatedCall",{enumerable:!0,get:function(){return u.avoidRepeatedCall}});var l=n(67);Object.defineProperty(t,"apiCallQueue",{enumerable:!0,get:function(){return l.apiCallQueue}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VALIDATE_PARAMS=void 0;var r=n(27),i=n(13),o=n(2);t.VALIDATE_PARAMS={createInstance:{SDKAppID:{required:!0,rules:[r.VALIDATE_TYPR.NUMBER],allowEmpty:!1},tim:{required:!1,rules:[r.VALIDATE_TYPR.OBJECT],allowEmpty:!0}},login:{userID:{required:!0,rules:[r.VALIDATE_TYPR.STRING],allowEmpty:!1},userSig:{required:!0,rules:[r.VALIDATE_TYPR.STRING],allowEmpty:!1}},call:{userID:{required:!0,rules:[r.VALIDATE_TYPR.STRING],allowEmpty:!1},type:{required:!0,rules:[r.VALIDATE_TYPR.NUMBER],range:[1,2],allowEmpty:!1},timeout:{required:!1,rules:[r.VALIDATE_TYPR.NUMBER],allowEmpty:!1}},groupCall:{userIDList:{required:!0,rules:[r.VALIDATE_TYPR.ARRAY],allowEmpty:!1},type:{required:!0,rules:[r.VALIDATE_TYPR.NUMBER],range:[1,2],allowEmpty:!1},groupID:{required:!0,rules:[r.VALIDATE_TYPR.STRING],allowEmpty:!1},timeout:{required:!1,rules:[r.VALIDATE_TYPR.NUMBER],allowEmpty:!1}},joinInGroupCall:{type:{required:!0,rules:[r.VALIDATE_TYPR.NUMBER],range:[1,2],allowEmpty:!1},groupID:{required:!0,rules:[r.VALIDATE_TYPR.STRING],allowEmpty:!1},roomID:{required:!0,rules:[r.VALIDATE_TYPR.NUMBER],allowEmpty:!1}},inviteUser:{userIDList:{required:!0,rules:[r.VALIDATE_TYPR.ARRAY],allowEmpty:!1}},startRemoteView:{userID:{required:!0,rules:[r.VALIDATE_TYPR.STRING],allowEmpty:!1},videoViewDomID:{required:!0,rules:[r.VALIDATE_TYPR.STRING],allowEmpty:!1}},stopRemoteView:{userID:{required:!0,rules:[r.VALIDATE_TYPR.STRING],allowEmpty:!1}},startLocalView:{userID:{required:!0,rules:[r.VALIDATE_TYPR.STRING],allowEmpty:!1},videoViewDomID:{required:!0,rules:[r.VALIDATE_TYPR.STRING],allowEmpty:!1}},stopLocalView:{userID:{required:!0,rules:[r.VALIDATE_TYPR.STRING],allowEmpty:!1}},switchDevice:{deviceType:{required:!0,rules:[r.VALIDATE_TYPR.STRING],allowEmpty:!1},deviceId:{required:!0,rules:[r.VALIDATE_TYPR.STRING],allowEmpty:!1}},setVideoQuality:[{key:"profile",required:!0,rules:[r.VALIDATE_TYPR.STRING,r.VALIDATE_TYPR.OBJECT],range:Object.keys(i.TUICommonDefine.VideoEncoderParams),allowEmpty:!1}],switchCallMediaType:[{key:"newMediaType",required:!0,rules:[r.VALIDATE_TYPR.NUMBER],range:[1,2],allowEmpty:!1}],getDeviceList:[{key:"deviceType",required:!0,rules:[r.VALIDATE_TYPR.STRING],range:["camera","microphones"],allowEmpty:!1}],setSelfInfo:{nickName:{required:!1,rules:[r.VALIDATE_TYPR.STRING],allowEmpty:!1},avatar:{required:!1,rules:[r.VALIDATE_TYPR.STRING],allowEmpty:!1}},setVideoRenderParams:{objectFit:{require:!1,rules:[r.VALIDATE_TYPR.STRING],range:[o.NAME.CONTAIN,o.NAME.COVER,o.NAME.FILL],allowEmpty:!1},muted:{require:!1,rules:[r.VALIDATE_TYPR.BOOLEAN],allowEmpty:!1},mirror:{require:!1,rules:[r.VALIDATE_TYPR.BOOLEAN],allowEmpty:!1}}}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.paramValidate=void 0;var i=n(1),o=n(8),a=n(4);function s(e,t,n){try{if(i.isArray(e))for(var o=0;o<e.length;o++)c.call(this,r(r({},e[o]),{value:t[o],name:n}));else for(var a in e)c.call(this,r(r({},e[a]),{value:t[0][a],name:n,key:a}))}catch(e){throw e}}function c(e){var t=e.required,n=e.rules,r=e.range,s=e.value,c=e.allowEmpty,u=e.name,l=e.key;if(t&&!c||s){if(!s)throw new o.default({message:"API<"+u+">: "+l+" is blank",code:a.default.ERROR_PARAM_INVALID});var d="";if(!n.some((function(e){return e===i.getType(s)}))){for(var p=0;p<n.length;p++){var f=n[p];d+=(f=f.replace(f[0],f[0].toUpperCase()))+"/"}throw d=d.substring(0,d.length-1),new o.default({message:"API<"+u+">: "+l+" must is "+d,code:a.default.ERROR_PARAM_INVALID})}if(r&&-1===r.indexOf(s))throw new o.default({message:"API<"+u+">: "+l+" error, only be "+r,code:a.default.ERROR_PARAM_INVALID})}}t.paramValidate=function(e){return function(t,n,r){var i=r.value;return r.value=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return s.call(this,e,t,n),i.apply(this,t)},r}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.deviceValidate=void 0;var o=n(8),a=n(4),s=n(5);function c(e,t,n){return r(this,void 0,void 0,(function(){var r,c;return i(this,(function(i){switch(i.label){case 0:if(this._permission[n])return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._trtcClient.getMediaDevicesAuth((c={},c[n]=!0,c.isThrowVideoError=!0,c))];case 2:return i.sent(),[3,4];case 3:throw r=i.sent(),this._delegate.onError(a.default.NOT_MEDIA_ACCESS,JSON.stringify(r)),new o.default({message:"<doValidate>: "+s.ERROR_MESSAGE.ERROR_PERMISSION_DENIED,code:a.default.ERROR_PERMISSION_DENIED});case 4:return e.apply(this,t),[2]}}))}))}t.deviceValidate=function(e){return function(t,n,o){var a=o.value;return o.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return r(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,c.call(this,a,t,e)];case 1:return[2,n.sent()];case 2:throw n.sent();case 3:return[2]}}))}))},o}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.statusValidate=void 0;var r=n(8),i=n(4),o=n(5);function a(e,t,n){var a;if((null==e?void 0:e.init)&&!this._isLogin)throw new r.default({message:"API<"+n+">: "+o.ERROR_MESSAGE.ERROR_INIT_FAIL,code:i.default.ERROR_INIT_FAIL});if(-1===(null===(a=null==e?void 0:e.callStatus)||void 0===a?void 0:a.indexOf(this._callStatus)))throw new r.default({message:"API<"+n+">: "+o.ERROR_MESSAGE.ERROR_REQUEST_REFUSED+" "+e.callStatus.join("/"),code:i.default.ERROR_REQUEST_REFUSED});if((null==e?void 0:e.scene)&&this._isGroupCall)throw new r.default({message:"API<"+n+">: "+o.ERROR_MESSAGE.ERROR_SCENE_NOT_SUPPORTED,code:i.default.ERROR_SCENE_NOT_SUPPORTED})}t.statusValidate=function(e){return function(t,n,r){var i=r.value;return r.value=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return a.call(this,e,t,n),i.apply(this,t)},r}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.avoidRepeatedCall=void 0,t.avoidRepeatedCall=function(){return function(e,t,n){var o=n.value,a=new Set;return n.value=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return r(this,void 0,void 0,(function(){var n,r;return i(this,(function(i){switch(i.label){case 0:if(a.has(this))throw new Error("previous "+t+"() is ongoing, please avoid repeated calls");i.label=1;case 1:return i.trys.push([1,3,,4]),a.add(this),[4,o.apply(this,e)];case 2:return n=i.sent(),a.delete(this),[2,n];case 3:throw r=i.sent(),a.delete(this),r;case 4:return[2]}}))}))},n}}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.apiCallQueue=void 0;var i=new WeakMap;t.apiCallQueue=function(){return function(e,t,n){var o=n.value,a=function(e){var t=e.fn,n=e.args,o=e.context,s=e.resolve,c=e.reject;t.apply(o,n).then(s,c).finally((function(){var e=i.get(o);e.shift(),e[0]&&a(r({},e[0]))}))};return n.value=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new Promise((function(n,r){if(i.has(e)){var s=i.get(e),c=s.length;s.push({fn:o,args:t,context:e,resolve:n,reject:r}),0===c&&a({fn:o,args:t,context:e,resolve:n,reject:r})}else i.set(e,[{fn:o,args:t,context:e,resolve:n,reject:r}]),a({fn:o,args:t,context:e,resolve:n,reject:r})}))},n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TUICallEngineObserver=t.CallDataReport=void 0;var r=n(7),i=n(15),o=n(9),a=n(11),s=n(12),c=n(2),u=n(69),l=n(1),d=function(){function e(e){this._eventStatController=new s.default,o.default.bindController(this._eventStatController),this.initializeCallData(e),this._ssoLog=new o.default(a.default.QUALITY_REPORT)}return e.prototype.setCallData=function(e){this._callData=e},e.prototype.getCallData=function(){return this._callData},e.prototype.setInviteID=function(e){this._callData.inviteID=e},e.prototype.setTotalTime=function(e){this._callData.totalTime=e},e.prototype.setAbilityBit=function(e){this._callData.abilityBit=!!e},e.prototype.setEnterRoomTime=function(e){this._callData.enterRoomTime=u.convertTimeStampToString(e)},e.prototype.setSendSignalingTime=function(e){this._callData.sendSignalingTime=u.convertTimeStampToString(e)},e.prototype.setCallAcceptTime=function(e){this._callData.callAcceptTime=u.convertTimeStampToString(e)},e.prototype.setExitRoomTime=function(e){this._callData.exitRoomTime=u.convertTimeStampToString(e)},e.prototype.setCallEndTime=function(e){this._callData.callEndTime=e},e.prototype.setCodeAndMessage=function(e,t){this._callData.code=e||0,this._callData.message=t||""},e.prototype.setCallScene=function(e){this._callData.callScene=e||""},e.prototype.getResult=function(){return this._callData.result},e.prototype.setResult=function(e){this._callData.result=e||""},e.prototype.setUserID=function(e){this._callData.userID=e||""},e.prototype._callTypeMapping=function(e){var t=c.NAME.UNKNOWN;switch(e){case r.CALL_TYPE.AUDIO_CALL:t=c.NAME.AUDIO;break;case r.CALL_TYPE.VIDEO_CALL:t=c.NAME.VIDEO}return t},e.prototype._callRoleMapping=function(e){var t=e;return t===r.CALL_ROLE.INVITER?t=c.NAME.CALLER:t===r.CALL_ROLE.INVITEE&&(t=c.NAME.CALLEE),t},e.prototype.packageCallDataToKibana=function(){var e=this._callTypeMapping(this._callData.callType),t=this._callRoleMapping(this._callData.callRole);return"CallData{version='"+this._callData.version+", platform="+this._callData.platform+", framework="+this._callData.framework+", sdk_app_id="+this._callData.sdkAppId+", user_id="+this._callData.userID+", room_id="+this._callData.roomID+", invite_id="+this._callData.inviteID+", invitee_list="+this._callData.inviteeList+", media_type="+e+", role="+t+", call_scene="+this._callData.callScene+", result="+this._callData.result+", total_time="+this._callData.totalTime+", total_score="+this._callData.totalScore+", ability_bit="+this._callData.abilityBit+", enter_room="+this._callData.enterRoomTime+", send_signaling="+this._callData.sendSignalingTime+", call_accept="+this._callData.callAcceptTime+", exit_room="+this._callData.exitRoomTime+", call_end="+this._callData.callEndTime+", code="+this._callData.code+", message="+this._callData.message+", network="+this._callData.network+", audio="+this._callData.audio+", video="+this._callData.video+"}"},e.prototype.initializeCallData=function(e){var t=e||{},n=t.version,i=void 0===n?"":n,o=t.sdkAppId,a=void 0===o?0:o,s=t.userID,u=void 0===s?"":s,d=l.getHostType();this._callData={version:i,platform:d,framework:c.NAME.WEB,sdkAppId:a,userID:u,roomID:0,inviteID:"",callRole:r.CALL_ROLE.UNKNOWN,callScene:"",callType:r.CALL_TYPE.UNKNOWN,inviteeList:[],result:c.NAME.UNKNOWN,totalTime:0,totalScore:0,code:0,message:"",abilityBit:!1,enterRoomTime:"",sendSignalingTime:"",callAcceptTime:"",exitRoomTime:"",callEndTime:"",network:0,audio:0,video:0}},e.prototype.reset=function(){this.initializeCallData(),this._ssoLog=null},e.prototype.clearCallDataAfterUpload=function(){var e=this.getCallData(),t=e.version,n=e.sdkAppId,r=e.userID;this.initializeCallData({version:t,sdkAppId:n,userID:r})},e.prototype.uploadToKibana=function(){try{this._ssoLog.setText(this.packageCallDataToKibana()).setEnd(),this.clearCallDataAfterUpload()}catch(e){}},e}();t.CallDataReport=d;var p=function(){function e(e,t){this._eventEmitter=e,this._callDataReport=t,this.registerListener()}return e.prototype.registerListener=function(){this._eventEmitter.on(i.TUICallEvent.CALLING_END,this.onCallEnd.bind(this)),this._eventEmitter.on(i.TUICallEvent.CALLING_CANCEL,this.onCallingCancel.bind(this)),this._eventEmitter.on(i.TUICallEvent.NO_RESP,this.onNoResponse.bind(this)),this._eventEmitter.on(i.TUICallEvent.LINE_BUSY,this.onLineBusy.bind(this)),this._eventEmitter.on(i.TUICallEvent.REJECT,this.onReject.bind(this))},e.prototype.removeLister=function(){this._eventEmitter.off(i.TUICallEvent.CALLING_END,this.onCallEnd.bind(this)),this._eventEmitter.off(i.TUICallEvent.CALLING_CANCEL,this.onCallingCancel.bind(this)),this._eventEmitter.off(i.TUICallEvent.NO_RESP,this.onNoResponse.bind(this)),this._eventEmitter.off(i.TUICallEvent.LINE_BUSY,this.onLineBusy.bind(this)),this._eventEmitter.off(i.TUICallEvent.REJECT,this.onReject.bind(this))},e.prototype.onCallEnd=function(e){var t=e.totalTime,n=void 0===t?0:t;this._callDataReport.setTotalTime(n),this._callDataReport.setResult(c.NAME.NORMAL),this._callDataReport.setCodeAndMessage(),this._callDataReport.uploadToKibana()},e.prototype.onCallingCancel=function(){this._callDataReport.getResult()||this._callDataReport.setResult(c.NAME.CANCEL),this._callDataReport.setCodeAndMessage(),this._callDataReport.uploadToKibana()},e.prototype.onNoResponse=function(){this._callDataReport.setResult(c.NAME.TIMEOUT)},e.prototype.onLineBusy=function(){this._callDataReport.setResult(c.NAME.BUSYLINE)},e.prototype.onReject=function(){this._callDataReport.setResult(c.NAME.REJECT)},e}();t.TUICallEngineObserver=p},function(e,t,n){"use strict";n.r(t),n.d(t,"setBaseTime",(function(){return c})),n.d(t,"getCurrentTime",(function(){return u})),n.d(t,"getTimestamp",(function(){return l})),n.d(t,"convertTimeStampToString",(function(){return d}));var r=n(0),i=n(29),o=n.n(i);let a=(new Date).getTime(),s=0;const c=function(e){a=e,s=a-(new Date).getTime();const t=new Date;t.setTime(e),r.default.info("baseTime from server: "+t+" offset: "+s)},u=function(){return(new Date).getTime()+s},l=function(){const e=new Date;return e.setTime(u()),e.toLocaleString()},d=e=>e<=0?"":o()(e).format("YYYY-MM-DD HH:mm:ss")}]).default}))},3743:function(e,t,n){},"37e8":function(e,t,n){var r=n("83ab"),i=n("9bf2"),o=n("825a"),a=n("fc6a"),s=n("df75");e.exports=r?Object.defineProperties:function(e,t){o(e);var n,r=a(t),c=s(t),u=c.length,l=0;while(u>l)i.f(e,n=c[l++],r[n]);return e}},"387f":function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},"38d5":function(e,t,n){"use strict";n("68ef")},3934:function(e,t,n){"use strict";var r=n("c532");e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return function(){return!0}}()},"39d1":function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("4a89"),c=n("8405"),u=n("7f9b"),l=n("8217"),d=n("cdd8"),p=n("ad06"),[f,h]=Object(o["a"])("rate");function g(e,t,n,r){if(e>=t)return{status:"full",value:1};if(e+.5>=t&&n&&!r)return{status:"half",value:.5};if(e+1>=t&&n&&r){var i=Math.pow(10,10);return{status:"half",value:Math.round((e-t+1)*i)/i}}return{status:"void",value:0}}var v={size:a["f"],icon:Object(a["e"])("star"),color:String,count:Object(a["c"])(5),gutter:a["f"],readonly:Boolean,disabled:Boolean,voidIcon:Object(a["e"])("star-o"),allowHalf:Boolean,voidColor:String,touchable:a["g"],iconPrefix:String,modelValue:Object(a["b"])(0),disabledColor:String},m=Object(i["n"])({name:f,props:v,emits:["change","update:modelValue"],setup(e,t){var n,{emit:r}=t,o=Object(d["a"])(),[a,f]=Object(l["a"])(),v=()=>e.readonly||e.disabled||!e.touchable,m=Object(i["e"])(()=>Array(+e.count).fill("").map((t,n)=>g(e.modelValue,n+1,e.allowHalf,e.readonly))),_=()=>{var t=a.value.map(u["m"]);n=[],t.forEach((t,r)=>{e.allowHalf?n.push({score:r+.5,left:t.left},{score:r+1,left:t.left+t.width/2}):n.push({score:r+1,left:t.left})})},y=t=>{for(var r=n.length-1;r>0;r--)if(t>n[r].left)return n[r].score;return e.allowHalf?.5:1},b=t=>{e.disabled||e.readonly||t===e.modelValue||(r("update:modelValue",t),r("change",t))},I=e=>{v()||(o.start(e),_())},T=e=>{if(!v()&&(o.move(e),o.isHorizontal())){var{clientX:t}=e.touches[0];Object(s["e"])(e),b(y(t))}},C=(t,n)=>{var r,{icon:o,size:a,color:s,count:u,gutter:l,voidIcon:d,disabled:g,voidColor:v,allowHalf:m,iconPrefix:I,disabledColor:T}=e,C=n+1,S="full"===t.status,E="void"===t.status,M=m&&t.value>0&&t.value<1;l&&C!==+u&&(r={paddingRight:Object(c["a"])(l)});var k=e=>{_(),b(m?y(e.clientX):C)};return Object(i["m"])("div",{key:n,ref:f(n),role:"radio",style:r,class:h("item"),tabindex:g?void 0:0,"aria-setsize":u,"aria-posinset":C,"aria-checked":!E,onClick:k},[Object(i["m"])(p["a"],{size:a,name:S?o:d,class:h("icon",{disabled:g,full:S}),color:g?T:S?s:v,classPrefix:I},null),M&&Object(i["m"])(p["a"],{size:a,style:{width:t.value+"em"},name:E?d:o,class:h("icon",["half",{disabled:g,full:!E}]),color:g?T:E?v:s,classPrefix:I},null)])};return Object(u["i"])(()=>e.modelValue),()=>Object(i["m"])("div",{role:"radiogroup",class:h({readonly:e.readonly,disabled:e.disabled}),tabindex:e.disabled?void 0:0,"aria-disabled":e.disabled,"aria-readonly":e.readonly,onTouchstart:I,onTouchmove:T},[m.value.map(C)])}}),_=Object(r["a"])(m);t["a"]=_},"3a9b":function(e,t,n){var r=n("e330");e.exports=r({}.isPrototypeOf)},"3acc":function(e,t,n){"use strict";var r=n("c199"),i=n("9896"),o=Object(r["a"])(i["b"]);t["a"]=o},"3b42":function(e,t,n){},"3bbe":function(e,t,n){var r=n("da84"),i=n("1626"),o=r.String,a=r.TypeError;e.exports=function(e){if("object"==typeof e||i(e))return e;throw a("Can't set "+o(e)+" as a prototype")}},"3c2b":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("7a23"),i=n("fe7e"),o=n("f691"),a=n("8405"),[s,c]=Object(i["a"])("config-provider"),u=Symbol(s),l={tag:Object(o["e"])("div"),themeVars:Object,iconPrefix:String};function d(e){var t={};return Object.keys(e).forEach(n=>{t["--van-"+Object(a["g"])(n)]=e[n]}),t}t["b"]=Object(r["n"])({name:s,props:l,setup(e,t){var{slots:n}=t,i=Object(r["e"])(()=>{if(e.themeVars)return d(e.themeVars)});return Object(r["H"])(u,e),()=>Object(r["m"])(e.tag,{class:c(),style:i.value},{default:()=>[null==n.default?void 0:n.default()]})}})},"3c32":function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("0a6e"),n("2381")},"3c71":function(e,t,n){},"3ca3":function(e,t,n){"use strict";var r=n("6547").charAt,i=n("577e"),o=n("69f3"),a=n("7dd0"),s="String Iterator",c=o.set,u=o.getterFor(s);a(String,"String",(function(e){c(this,{type:s,string:i(e),index:0})}),(function(){var e,t=u(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},"3df5":function(e,t,n){"use strict";n("68ef"),n("75ad")},"3e39":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("7a23"),i=n("f691"),o=n("f344"),a=n("8405"),s=n("ad06"),c={name:i["h"],shape:Object(i["e"])("round"),disabled:Boolean,iconSize:i["f"],modelValue:i["h"],checkedColor:String,labelPosition:String,labelDisabled:Boolean};t["b"]=Object(r["n"])({props:Object(o["a"])({},c,{bem:Object(i["d"])(Function),role:String,parent:Object,checked:Boolean,bindGroup:i["g"]}),emits:["click","toggle"],setup(e,t){var{emit:n,slots:i}=t,o=Object(r["K"])(),c=t=>{if(e.parent&&e.bindGroup)return e.parent.props[t]},u=Object(r["e"])(()=>c("disabled")||e.disabled),l=Object(r["e"])(()=>c("direction")),d=Object(r["e"])(()=>{var t=e.checkedColor||c("checkedColor");if(t&&e.checked&&!u.value)return{borderColor:t,backgroundColor:t}}),p=t=>{var{target:r}=t,i=o.value,a=i===r||(null==i?void 0:i.contains(r));u.value||!a&&e.labelDisabled||n("toggle"),n("click",t)},f=()=>{var{bem:t,shape:n,checked:l}=e,p=e.iconSize||c("iconSize");return Object(r["m"])("div",{ref:o,class:t("icon",[n,{disabled:u.value,checked:l}]),style:{fontSize:Object(a["a"])(p)}},[i.icon?i.icon({checked:l,disabled:u.value}):Object(r["m"])(s["a"],{name:"success",style:d.value},null)])},h=()=>{if(i.default)return Object(r["m"])("span",{class:e.bem("label",[e.labelPosition,{disabled:u.value}])},[i.default()])};return()=>{var t="left"===e.labelPosition?[h(),f()]:[f(),h()];return Object(r["m"])("div",{role:e.role,class:e.bem([{disabled:u.value,"label-disabled":e.labelDisabled},l.value]),tabindex:u.value?void 0:0,"aria-checked":e.checked,onClick:p},[t])}}})},"3f4e":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("abc5");const i="devtools-plugin:setup",o="plugin:settings:set";class a{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const n={};if(e.settings)for(const o in e.settings){const t=e.settings[o];n[o]=t.defaultValue}const r="__vue-devtools-plugin-settings__"+e.id;let i=Object.assign({},n);try{const e=localStorage.getItem(r),t=JSON.parse(e);Object.assign(i,t)}catch(a){}this.fallbacks={getSettings(){return i},setSettings(e){try{localStorage.setItem(r,JSON.stringify(e))}catch(a){}i=e}},t&&t.on(o,(e,t)=>{e===this.plugin.id&&this.fallbacks.setSettings(t)}),this.proxiedOn=new Proxy({},{get:(e,t)=>this.target?this.target.on[t]:(...e)=>{this.onQueue.push({method:t,args:e})}}),this.proxiedTarget=new Proxy({},{get:(e,t)=>this.target?this.target[t]:"on"===t?this.proxiedOn:Object.keys(this.fallbacks).includes(t)?(...e)=>(this.targetQueue.push({method:t,args:e,resolve:()=>{}}),this.fallbacks[t](...e)):(...e)=>new Promise(n=>{this.targetQueue.push({method:t,args:e,resolve:n})})})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function s(e,t){const n=Object(r["b"])(),o=Object(r["a"])(),s=r["c"]&&e.enableEarlyProxy;if(!o||!n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&s){const r=s?new a(e,o):null,i=n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[];i.push({pluginDescriptor:e,setupFn:t,proxy:r}),r&&t(r.proxiedTarget)}else o.emit(i,e,t)}},"3f8c":function(e,t){e.exports={}},4056:function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("09fe")},"408a":function(e,t,n){var r=n("e330");e.exports=r(1..valueOf)},"40db":function(e,t,n){},4127:function(e,t,n){"use strict";var r=n("d233"),i=n("b313"),o={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},a=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(e){return a.call(e)},skipNulls:!1,strictNullHandling:!1},c=function e(t,n,i,o,a,c,u,l,d,p,f,h){var g=t;if("function"===typeof u)g=u(n,g);else if(g instanceof Date)g=p(g);else if(null===g){if(o)return c&&!h?c(n,s.encoder):n;g=""}if("string"===typeof g||"number"===typeof g||"boolean"===typeof g||r.isBuffer(g)){if(c){var v=h?n:c(n,s.encoder);return[f(v)+"="+f(c(g,s.encoder))]}return[f(n)+"="+f(String(g))]}var m,_=[];if("undefined"===typeof g)return _;if(Array.isArray(u))m=u;else{var y=Object.keys(g);m=l?y.sort(l):y}for(var b=0;b<m.length;++b){var I=m[b];a&&null===g[I]||(_=Array.isArray(g)?_.concat(e(g[I],i(n,I),i,o,a,c,u,l,d,p,f,h)):_.concat(e(g[I],n+(d?"."+I:"["+I+"]"),i,o,a,c,u,l,d,p,f,h)))}return _};e.exports=function(e,t){var n=e,a=t?r.assign({},t):{};if(null!==a.encoder&&void 0!==a.encoder&&"function"!==typeof a.encoder)throw new TypeError("Encoder has to be a function.");var u="undefined"===typeof a.delimiter?s.delimiter:a.delimiter,l="boolean"===typeof a.strictNullHandling?a.strictNullHandling:s.strictNullHandling,d="boolean"===typeof a.skipNulls?a.skipNulls:s.skipNulls,p="boolean"===typeof a.encode?a.encode:s.encode,f="function"===typeof a.encoder?a.encoder:s.encoder,h="function"===typeof a.sort?a.sort:null,g="undefined"!==typeof a.allowDots&&a.allowDots,v="function"===typeof a.serializeDate?a.serializeDate:s.serializeDate,m="boolean"===typeof a.encodeValuesOnly?a.encodeValuesOnly:s.encodeValuesOnly;if("undefined"===typeof a.format)a.format=i["default"];else if(!Object.prototype.hasOwnProperty.call(i.formatters,a.format))throw new TypeError("Unknown format option provided.");var _,y,b=i.formatters[a.format];"function"===typeof a.filter?(y=a.filter,n=y("",n)):Array.isArray(a.filter)&&(y=a.filter,_=y);var I,T=[];if("object"!==typeof n||null===n)return"";I=a.arrayFormat in o?a.arrayFormat:"indices"in a?a.indices?"indices":"repeat":"indices";var C=o[I];_||(_=Object.keys(n)),h&&_.sort(h);for(var S=0;S<_.length;++S){var E=_[S];d&&null===n[E]||(T=T.concat(c(n[E],E,C,l,d,p?f:null,y,h,g,v,b,m)))}var M=T.join(u),k=!0===a.addQueryPrefix?"?":"";return M.length>0?k+M:""}},4142:function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("8199")},"414a":function(e,t,n){"use strict";n("68ef"),n("40db")},4160:function(e,t,n){"use strict";var r=n("23e7"),i=n("17c2");r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"417e":function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f344"),s=n("f691"),c=n("9896"),u=n("7f9b"),l=n("4eda"),d=n("3e39"),[p,f]=Object(o["a"])("checkbox"),h=Object(a["a"])({},d["a"],{bindGroup:s["g"]}),g=Object(i["n"])({name:p,props:h,emits:["change","update:modelValue"],setup(e,t){var{emit:n,slots:r}=t,{parent:o}=Object(u["l"])(c["a"]),s=t=>{var{name:n}=e,{max:r,modelValue:i}=o.props,a=i.slice();if(t){var s=r&&a.length>=r;s||a.includes(n)||(a.push(n),e.bindGroup&&o.updateValue(a))}else{var c=a.indexOf(n);-1!==c&&(a.splice(c,1),e.bindGroup&&o.updateValue(a))}},p=Object(i["e"])(()=>o&&e.bindGroup?-1!==o.props.modelValue.indexOf(e.name):!!e.modelValue),h=function(t){void 0===t&&(t=!p.value),o&&e.bindGroup?s(t):n("update:modelValue",t)};return Object(i["X"])(()=>e.modelValue,e=>n("change",e)),Object(l["a"])({toggle:h,props:e,checked:p}),Object(u["i"])(()=>e.modelValue),()=>Object(i["m"])(d["b"],Object(i["t"])({bem:f,role:"checkbox",parent:o,checked:p.value,onToggle:h},e),Object(a["e"])(r,["default","icon"]))}}),v=Object(r["a"])(g);t["a"]=v},"428f":function(e,t,n){var r=n("da84");e.exports=r},4328:function(e,t,n){"use strict";var r=n("4127"),i=n("9e6a"),o=n("b313");e.exports={formats:o,parse:i,stringify:r}},4362:function(e,t,n){t.nextTick=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),setTimeout((function(){e.apply(null,t)}),0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,r="/";t.cwd=function(){return r},t.chdir=function(t){e||(e=n("df7c")),r=e.resolve(t,r)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},4467:function(e,t,n){"use strict";n("68ef"),n("2221")},"44ad":function(e,t,n){var r=n("da84"),i=n("e330"),o=n("d039"),a=n("c6b6"),s=r.Object,c=i("".split);e.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?c(e,""):s(e)}:s},"44bf":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("8405"),c=n("8da3"),u=n("f344"),l=n("ad06"),[d,p]=Object(o["a"])("image"),f={src:String,alt:String,fit:String,round:Boolean,width:a["f"],height:a["f"],radius:a["f"],lazyLoad:Boolean,iconSize:a["f"],showError:a["g"],errorIcon:Object(a["e"])("photo-fail"),iconPrefix:String,showLoading:a["g"],loadingIcon:Object(a["e"])("photo")},h=Object(i["n"])({name:d,props:f,emits:["load","error"],setup(e,t){var{emit:n,slots:r}=t,o=Object(i["K"])(!1),a=Object(i["K"])(!0),d=Object(i["K"])(),{$Lazyload:f}=Object(i["o"])().proxy,h=Object(i["e"])(()=>{var t={width:Object(s["a"])(e.width),height:Object(s["a"])(e.height)};return Object(c["b"])(e.radius)&&(t.overflow="hidden",t.borderRadius=Object(s["a"])(e.radius)),t});Object(i["X"])(()=>e.src,()=>{o.value=!1,a.value=!0});var g=e=>{a.value=!1,n("load",e)},v=e=>{o.value=!0,a.value=!1,n("error",e)},m=(t,n,r)=>r?r():Object(i["m"])(l["a"],{name:t,size:e.iconSize,class:n,classPrefix:e.iconPrefix},null),_=()=>a.value&&e.showLoading?Object(i["m"])("div",{class:p("loading")},[m(e.loadingIcon,p("loading-icon"),r.loading)]):o.value&&e.showError?Object(i["m"])("div",{class:p("error")},[m(e.errorIcon,p("error-icon"),r.error)]):void 0,y=()=>{if(!o.value&&e.src){var t={alt:e.alt,class:p("img"),style:{objectFit:e.fit}};return e.lazyLoad?Object(i["ab"])(Object(i["m"])("img",Object(i["t"])({ref:d},t),null),[[Object(i["O"])("lazy"),e.src]]):Object(i["m"])("img",Object(i["t"])({src:e.src,onLoad:g,onError:v},t),null)}},b=e=>{var{el:t}=e;t===d.value&&a.value&&g()},I=e=>{var{el:t}=e;t!==d.value||o.value||v()};return f&&u["c"]&&(f.$on("loaded",b),f.$on("error",I),Object(i["z"])(()=>{f.$off("loaded",b),f.$off("error",I)})),()=>Object(i["m"])("div",{class:p({round:e.round}),style:h.value},[y(),_(),null==r.default?void 0:r.default()])}}),g=Object(r["a"])(h);t["b"]=g},"44d2":function(e,t,n){var r=n("b622"),i=n("7c73"),o=n("9bf2"),a=r("unscopables"),s=Array.prototype;void 0==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},"44de":function(e,t,n){var r=n("da84");e.exports=function(e,t){var n=r.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}},"44e7":function(e,t,n){var r=n("861d"),i=n("c6b6"),o=n("b622"),a=o("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==i(e))}},4582:function(e,t,n){"use strict";n("68ef")},"467f":function(e,t,n){"use strict";var r=n("2d83");e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},"46de":function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("ae9e"),n("8270"),n("786d"),n("b807"),n("f319"),n("be81")},"471a":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("8da3"),c=n("8405"),[u,l]=Object(o["a"])("badge"),d={dot:Boolean,max:a["f"],tag:Object(a["e"])("div"),color:String,offset:Array,content:a["f"],showZero:a["g"],position:Object(a["e"])("top-right")},p=Object(i["n"])({name:u,props:d,setup(e,t){var{slots:n}=t,r=()=>{if(n.content)return!0;var{content:t,showZero:r}=e;return Object(s["b"])(t)&&""!==t&&(r||0!==t)},o=()=>{var{dot:t,max:i,content:o}=e;if(!t&&r())return n.content?n.content():Object(s["b"])(i)&&Object(s["e"])(o)&&+o>i?i+"+":o},a=Object(i["e"])(()=>{var t={background:e.color};if(e.offset){var[r,i]=e.offset;n.default?(t.top=Object(c["a"])(i),t.right="number"===typeof r?Object(c["a"])(-r):r.startsWith("-")?r.replace("-",""):"-"+r):(t.marginTop=Object(c["a"])(i),t.marginLeft=Object(c["a"])(r))}return t}),u=()=>{if(r()||e.dot)return Object(i["m"])("div",{class:l([e.position,{dot:e.dot,fixed:!!n.default}]),style:a.value},[o()])};return()=>{if(n.default){var{tag:t}=e;return Object(i["m"])(t,{class:l("wrapper")},{default:()=>[n.default(),u()]})}return u()}}}),f=Object(r["a"])(p)},"473d":function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("f691"),a=n("8da3"),s=n("4a89"),c=n("f344"),u=n("fe7e"),[l,d,p]=Object(u["a"])("calendar"),f=e=>p("monthTitle",e.getFullYear(),e.getMonth()+1);function h(e,t){var n=e.getFullYear(),r=t.getFullYear();if(n===r){var i=e.getMonth(),o=t.getMonth();return i===o?0:i>o?1:-1}return n>r?1:-1}function g(e,t){var n=h(e,t);if(0===n){var r=e.getDate(),i=t.getDate();return r===i?0:r>i?1:-1}return n}var v=e=>new Date(e),m=e=>Array.isArray(e)?e.map(v):v(e);function _(e,t){var n=v(e);return n.setDate(n.getDate()+t),n}var y=e=>_(e,-1),b=e=>_(e,1),I=()=>{var e=new Date;return e.setHours(0,0,0,0),e};function T(e){var t=e[0].getTime(),n=e[1].getTime();return(n-t)/864e5+1}var C=n("7f9b"),S=n("8217"),E=n("4eda"),M=n("e41f"),k=n("b650"),w=n("626a"),O=n("8405"),D=n("96b0"),A=n("1e52"),[R]=Object(u["a"])("calendar-day"),x=Object(i["n"])({name:R,props:{item:Object(o["d"])(Object),color:String,index:Number,offset:Object(o["b"])(0),rowHeight:String},emits:["click"],setup(e,t){var{emit:n,slots:r}=t,o=Object(i["e"])(()=>{var{item:t,index:n,color:r,offset:i,rowHeight:o}=e,a={height:o};if("placeholder"===t.type)return a.width="100%",a;if(0===n&&(a.marginLeft=100*i/7+"%"),r)switch(t.type){case"end":case"start":case"start-end":case"multiple-middle":case"multiple-selected":a.background=r;break;case"middle":a.color=r;break}return a}),a=()=>{"disabled"!==e.item.type&&n("click",e.item)},s=()=>{var{topInfo:t}=e.item;if(t||r["top-info"])return Object(i["m"])("div",{class:d("top-info")},[r["top-info"]?r["top-info"](e.item):t])},c=()=>{var{bottomInfo:t}=e.item;if(t||r["bottom-info"])return Object(i["m"])("div",{class:d("bottom-info")},[r["bottom-info"]?r["bottom-info"](e.item):t])},u=()=>{var{item:t,color:n,rowHeight:r}=e,{type:o,text:a}=t,u=[s(),a,c()];return"selected"===o?Object(i["m"])("div",{class:d("selected-day"),style:{width:r,height:r,background:n}},[u]):u};return()=>{var{type:t,className:n}=e.item;return"placeholder"===t?Object(i["m"])("div",{class:d("day"),style:o.value},null):Object(i["m"])("div",{role:"gridcell",style:o.value,class:[d("day",t),n],tabindex:"disabled"===t?void 0:-1,onClick:a},[u()])}}}),[L]=Object(u["a"])("calendar-month"),N={date:Object(o["d"])(Date),type:String,color:String,minDate:Object(o["d"])(Date),maxDate:Object(o["d"])(Date),showMark:Boolean,rowHeight:o["f"],formatter:Function,lazyRender:Boolean,currentDate:[Date,Array],allowSameDay:Boolean,showSubtitle:Boolean,showMonthTitle:Boolean,firstDayOfWeek:Number},P=Object(i["n"])({name:L,props:N,emits:["click","update-height"],setup(e,t){var{emit:n,slots:r}=t,[o,a]=Object(C["o"])(),u=Object(i["K"])(),l=Object(i["K"])(),h=Object(A["a"])(l),v=Object(i["e"])(()=>f(e.date)),m=Object(i["e"])(()=>Object(O["a"])(e.rowHeight)),_=Object(i["e"])(()=>{var t=e.date.getDay();return e.firstDayOfWeek?(t+7-e.firstDayOfWeek)%7:t}),I=Object(i["e"])(()=>Object(D["a"])(e.date.getFullYear(),e.date.getMonth()+1)),T=Object(i["e"])(()=>o.value||!e.lazyRender),S=()=>v.value,M=t=>{var n=t=>e.currentDate.some(e=>0===g(e,t));if(n(t)){var r=y(t),i=b(t),o=n(r),a=n(i);return o&&a?"multiple-middle":o?"end":a?"start":"multiple-selected"}return""},k=t=>{var[n,r]=e.currentDate;if(!n)return"";var i=g(t,n);if(!r)return 0===i?"start":"";var o=g(t,r);return e.allowSameDay&&0===i&&0===o?"start-end":0===i?"start":0===o?"end":i>0&&o<0?"middle":""},w=t=>{var{type:n,minDate:r,maxDate:i,currentDate:o}=e;if(g(t,r)<0||g(t,i)>0)return"disabled";if(null===o)return"";if(Array.isArray(o)){if("multiple"===n)return M(t);if("range"===n)return k(t)}else if("single"===n)return 0===g(t,o)?"selected":"";return""},R=t=>{if("range"===e.type){if("start"===t||"end"===t)return p(t);if("start-end"===t)return p("startEnd")}},L=()=>{if(e.showMonthTitle)return Object(i["m"])("div",{class:d("month-title")},[v.value])},N=()=>{if(e.showMark&&T.value)return Object(i["m"])("div",{class:d("month-mark")},[e.date.getMonth()+1])},P=Object(i["e"])(()=>{var e=Math.ceil((I.value+_.value)/7);return Array(e).fill({type:"placeholder"})}),j=Object(i["e"])(()=>{for(var t=[],n=e.date.getFullYear(),r=e.date.getMonth(),i=1;i<=I.value;i++){var o=new Date(n,r,i),a=w(o),s={date:o,type:a,text:i,bottomInfo:R(a)};e.formatter&&(s=e.formatter(s)),t.push(s)}return t}),U=Object(i["e"])(()=>j.value.filter(e=>"disabled"===e.type)),G=(e,t)=>{if(u.value){var n=Object(C["m"])(u.value),r=P.value.length,i=Math.ceil((t.getDate()+_.value)/7),o=(i-1)*n.height/r;Object(s["h"])(e,n.top+o+e.scrollTop-Object(C["m"])(e).top)}},V=(t,o)=>Object(i["m"])(x,{item:t,index:o,color:e.color,offset:_.value,rowHeight:m.value,onClick:e=>n("click",e)},Object(c["e"])(r,["top-info","bottom-info"])),F=()=>Object(i["m"])("div",{ref:u,role:"grid",class:d("days")},[N(),(T.value?j:P).value.map(V)]);return Object(E["a"])({getTitle:S,getHeight:()=>h.value,setVisible:a,scrollToDate:G,disabledDays:U}),()=>Object(i["m"])("div",{class:d("month"),ref:l},[L(),F()])}}),[j]=Object(u["a"])("calendar-header"),U=Object(i["n"])({name:j,props:{title:String,subtitle:String,showTitle:Boolean,showSubtitle:Boolean,firstDayOfWeek:Number},emits:["click-subtitle"],setup(e,t){var{slots:n,emit:r}=t,o=()=>{if(e.showTitle){var t=e.title||p("title"),r=n.title?n.title():t;return Object(i["m"])("div",{class:d("header-title")},[r])}},a=e=>r("click-subtitle",e),s=()=>{if(e.showSubtitle){var t=n.subtitle?n.subtitle():e.subtitle;return Object(i["m"])("div",{class:d("header-subtitle"),onClick:a},[t])}},c=()=>{var{firstDayOfWeek:t}=e,n=p("weekdays"),r=[...n.slice(t,7),...n.slice(0,t)];return Object(i["m"])("div",{class:d("weekdays")},[r.map(e=>Object(i["m"])("span",{class:d("weekday")},[e]))])};return()=>Object(i["m"])("div",{class:d("header")},[o(),s(),c()])}}),G={show:Boolean,type:Object(o["e"])("single"),title:String,color:String,round:o["g"],readonly:Boolean,poppable:o["g"],maxRange:Object(o["c"])(null),position:Object(o["e"])("bottom"),teleport:[String,Object],showMark:o["g"],showTitle:o["g"],formatter:Function,rowHeight:o["f"],confirmText:String,rangePrompt:String,lazyRender:o["g"],showConfirm:o["g"],defaultDate:[Date,Array],allowSameDay:Boolean,showSubtitle:o["g"],closeOnPopstate:o["g"],showRangePrompt:o["g"],confirmDisabledText:String,closeOnClickOverlay:o["g"],safeAreaInsetBottom:o["g"],minDate:{type:Date,validator:a["a"],default:I},maxDate:{type:Date,validator:a["a"],default:()=>{var e=I();return new Date(e.getFullYear(),e.getMonth()+6,e.getDate())}},firstDayOfWeek:{type:o["f"],default:0,validator:e=>e>=0&&e<=6}},V=Object(i["n"])({name:l,props:G,emits:["select","confirm","unselect","month-show","over-range","update:show","click-subtitle"],setup(e,t){var n,{emit:r,slots:o}=t,a=function(t,n,r){return void 0===n&&(n=e.minDate),void 0===r&&(r=e.maxDate),-1===g(t,n)?n:1===g(t,r)?r:t},u=function(t){void 0===t&&(t=e.defaultDate);var{type:n,minDate:r,maxDate:i}=e;if(null===t)return t;var o=I();if("range"===n){Array.isArray(t)||(t=[]);var s=a(t[0]||o,r,y(i)),c=a(t[1]||o,b(r));return[s,c]}return"multiple"===n?Array.isArray(t)?t.map(e=>a(e)):[a(o)]:(t&&!Array.isArray(t)||(t=o),a(t))},l=Object(i["K"])(),f=Object(i["K"])(""),O=Object(i["K"])(u()),[D,A]=Object(S["a"])(),R=Object(i["e"])(()=>e.firstDayOfWeek?+e.firstDayOfWeek%7:0),x=Object(i["e"])(()=>{var t=[],n=new Date(e.minDate);n.setDate(1);do{t.push(new Date(n)),n.setMonth(n.getMonth()+1)}while(1!==h(n,e.maxDate));return t}),L=Object(i["e"])(()=>{if(O.value){if("range"===e.type)return!O.value[0]||!O.value[1];if("multiple"===e.type)return!O.value.length}return!O.value}),N=()=>{var e=Object(s["c"])(l.value),t=e+n,i=x.value.map((e,t)=>D.value[t].getHeight()),o=i.reduce((e,t)=>e+t,0);if(!(t>o&&e>0)){for(var a,c=0,u=[-1,-1],d=0;d<x.value.length;d++){var p=D.value[d],h=c<=t&&c+i[d]>=e;h&&(u[1]=d,a||(a=p,u[0]=d),D.value[d].showed||(D.value[d].showed=!0,r("month-show",{date:p.date,title:p.getTitle()}))),c+=i[d]}x.value.forEach((e,t)=>{var n=t>=u[0]-1&&t<=u[1]+1;D.value[t].setVisible(n)}),a&&(f.value=a.getTitle())}},j=e=>{Object(C["e"])(()=>{x.value.some((t,n)=>0===h(t,e)&&(l.value&&D.value[n].scrollToDate(l.value,e),!0)),N()})},G=()=>{if(!e.poppable||e.show)if(O.value){var t="single"===e.type?O.value:O.value[0];j(t)}else Object(C["e"])(N)},V=()=>{e.poppable&&!e.show||Object(C["e"])(()=>{n=Math.floor(Object(C["m"])(l).height),G()})},F=function(e){void 0===e&&(e=u()),O.value=e,G()},B=t=>{var{maxRange:n,rangePrompt:i,showRangePrompt:o}=e;return!(n&&T(t)>n)||(o&&Object(w["a"])(i||p("rangePrompt",n)),r("over-range"),!1)},q=()=>{var e;return r("confirm",null!=(e=O.value)?e:m(O.value))},H=(t,n)=>{var i=e=>{O.value=e,r("select",m(e))};if(n&&"range"===e.type){var o=B(t);if(!o)return void i([t[0],_(t[0],+e.maxRange-1)])}i(t),n&&!e.showConfirm&&q()},z=(e,t,n)=>{var r;return null==(r=e.find(e=>-1===g(t,e.date)&&-1===g(e.date,n)))?void 0:r.date},K=Object(i["e"])(()=>D.value.reduce((e,t)=>{var n,r;return e.push(...null!=(n=null==(r=t.disabledDays)?void 0:r.value)?n:[]),e},[])),W=t=>{if(!e.readonly&&t.date){var{date:n}=t,{type:i}=e;if("range"===i){if(!O.value)return void H([n]);var[o,a]=O.value;if(o&&!a){var s=g(n,o);if(1===s){var c=z(K.value,o,n);c?H([o,y(c)]):H([o,n],!0)}else-1===s?H([n]):e.allowSameDay&&H([n,n],!0)}else H([n])}else if("multiple"===i){if(!O.value)return void H([n]);var u=O.value,l=u.findIndex(e=>0===g(e,n));if(-1!==l){var[d]=u.splice(l,1);r("unselect",v(d))}else e.maxRange&&u.length>=e.maxRange?Object(w["a"])(e.rangePrompt||p("rangePrompt",e.maxRange)):H([...u,n])}else H(n,!0)}},Y=e=>r("update:show",e),J=(t,n)=>{var r=0!==n||!e.showSubtitle;return Object(i["m"])(P,Object(i["t"])({ref:A(n),date:t,currentDate:O.value,showMonthTitle:r,firstDayOfWeek:R.value},Object(c["e"])(e,["type","color","minDate","maxDate","showMark","formatter","rowHeight","lazyRender","showSubtitle","allowSameDay"]),{onClick:W}),Object(c["e"])(o,["top-info","bottom-info"]))},$=()=>{if(o.footer)return o.footer();if(e.showConfirm){var t=o["confirm-text"],n=L.value,r=n?e.confirmDisabledText:e.confirmText;return Object(i["m"])(k["a"],{round:!0,block:!0,type:"danger",color:e.color,class:d("confirm"),disabled:n,nativeType:"button",onClick:q},{default:()=>[t?t({disabled:n}):r||p("confirm")]})}},X=()=>Object(i["m"])("div",{class:[d("footer"),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[$()]),Z=()=>Object(i["m"])("div",{class:d()},[Object(i["m"])(U,{title:e.title,subtitle:f.value,showTitle:e.showTitle,showSubtitle:e.showSubtitle,firstDayOfWeek:R.value,"onClick-subtitle":e=>r("click-subtitle",e)},Object(c["e"])(o,["title","subtitle"])),Object(i["m"])("div",{ref:l,class:d("body"),onScroll:N},[x.value.map(J)]),X()]);return Object(i["X"])(()=>e.show,V),Object(i["X"])(()=>[e.type,e.minDate,e.maxDate],()=>F(u(O.value))),Object(i["X"])(()=>e.defaultDate,(function(e){void 0===e&&(e=null),O.value=e,G()})),Object(E["a"])({reset:F,scrollToDate:j}),Object(C["d"])(V),()=>e.poppable?Object(i["m"])(M["a"],{show:e.show,class:d("popup"),round:e.round,position:e.position,closeable:e.showTitle||e.showSubtitle,teleport:e.teleport,closeOnPopstate:e.closeOnPopstate,closeOnClickOverlay:e.closeOnClickOverlay,"onUpdate:show":Y},{default:Z}):Z()}}),F=Object(r["a"])(V);t["a"]=F},4795:function(e,t,n){var r=n("23e7"),i=n("da84"),o=n("2ba4"),a=n("1626"),s=n("342f"),c=n("f36a"),u=/MSIE .\./.test(s),l=i.Function,d=function(e){return function(t,n){var r=arguments.length>2,i=r?c(arguments,2):void 0;return e(r?function(){o(a(t)?t:l(t),this,i)}:t,n)}};r({global:!0,bind:!0,forced:u},{setTimeout:d(i.setTimeout),setInterval:d(i.setInterval)})},"480b":function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("9ee3")},4840:function(e,t,n){var r=n("825a"),i=n("5087"),o=n("b622"),a=o("species");e.exports=function(e,t){var n,o=r(e).constructor;return void 0===o||void 0==(n=r(o)[a])?t:i(n)}},"485a":function(e,t,n){var r=n("da84"),i=n("c65b"),o=n("1626"),a=n("861d"),s=r.TypeError;e.exports=function(e,t){var n,r;if("string"===t&&o(n=e.toString)&&!a(r=i(n,e)))return r;if(o(n=e.valueOf)&&!a(r=i(n,e)))return r;if("string"!==t&&o(n=e.toString)&&!a(r=i(n,e)))return r;throw s("Can't convert object to primitive value")}},4930:function(e,t,n){var r=n("2d00"),i=n("d039");e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},"498a":function(e,t,n){"use strict";var r=n("23e7"),i=n("58a8").trim,o=n("c8d2");r({target:"String",proto:!0,forced:o("trim")},{trim:function(){return i(this)}})},"4a22":function(e,t,n){},"4a7b":function(e,t,n){"use strict";var r=n("c532");e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function o(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function a(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function c(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var u={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=u[e]||o,i=t(e);r.isUndefined(i)&&t!==c||(n[e]=i)})),n}},"4a89":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"h",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"f",(function(){return p})),n.d(t,"i",(function(){return f})),n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return g})),n.d(t,"k",(function(){return v})),n.d(t,"j",(function(){return m}));var r=n("7f9b"),i=n("7a23"),o=n("8da3");function a(e){var t="scrollTop"in e?e.scrollTop:e.pageYOffset;return Math.max(t,0)}function s(e,t){"scrollTop"in e?e.scrollTop=t:e.scrollTo(e.scrollX,t)}function c(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function u(e){s(window,e),s(document.body,e)}function l(e,t){if(e===window)return 0;var n=t?a(t):c();return Object(r["m"])(e).top+n}var d=Object(o["d"])();function p(){d&&u(c())}var f=e=>e.stopPropagation();function h(e,t){("boolean"!==typeof e.cancelable||e.cancelable)&&e.preventDefault(),t&&f(e)}function g(e){var t=Object(i["U"])(e);if(!t)return!1;var n=window.getComputedStyle(t),r="none"===n.display,o=null===t.offsetParent&&"fixed"!==n.position;return r||o}var{width:v,height:m}=Object(r["p"])()},"4b0a":function(e,t,n){"use strict";n("68ef"),n("8270"),n("786d")},"4d48":function(e,t,n){"use strict";n("68ef"),n("bf60")},"4d64":function(e,t,n){var r=n("fc6a"),i=n("23cb"),o=n("07fa"),a=function(e){return function(t,n,a){var s,c=r(t),u=o(c),l=i(a,u);if(e&&n!=n){while(u>l)if(s=c[l++],s!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},"4d75":function(e,t,n){},"4dae":function(e,t,n){var r=n("da84"),i=n("23cb"),o=n("07fa"),a=n("8418"),s=r.Array,c=Math.max;e.exports=function(e,t,n){for(var r=o(e),u=i(t,r),l=i(void 0===n?r:n,r),d=s(c(l-u,0)),p=0;u<l;u++,p++)a(d,p,e[u]);return d.length=p,d}},"4ddd":function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("dc1b"),n("2381"),n("dde9")},"4de4":function(e,t,n){"use strict";var r=n("23e7"),i=n("b727").filter,o=n("1dde"),a=o("filter");r({target:"Array",proto:!0,forced:!a},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(e,t,n){"use strict";var r=n("da84"),i=n("0366"),o=n("c65b"),a=n("7b0b"),s=n("9bdd"),c=n("e95a"),u=n("68ee"),l=n("07fa"),d=n("8418"),p=n("9a1f"),f=n("35a1"),h=r.Array;e.exports=function(e){var t=a(e),n=u(this),r=arguments.length,g=r>1?arguments[1]:void 0,v=void 0!==g;v&&(g=i(g,r>2?arguments[2]:void 0));var m,_,y,b,I,T,C=f(t),S=0;if(!C||this==h&&c(C))for(m=l(t),_=n?new this(m):h(m);m>S;S++)T=v?g(t[S],S):t[S],d(_,S,T);else for(b=p(t,C),I=b.next,_=n?new this:[];!(y=o(I,b)).done;S++)T=v?s(b,g,[y.value,S],!0):y.value,d(_,S,T);return _.length=S,_}},"4e82":function(e,t,n){"use strict";var r=n("23e7"),i=n("e330"),o=n("59ed"),a=n("7b0b"),s=n("07fa"),c=n("577e"),u=n("d039"),l=n("addb"),d=n("a640"),p=n("04d1"),f=n("d998"),h=n("2d00"),g=n("512c"),v=[],m=i(v.sort),_=i(v.push),y=u((function(){v.sort(void 0)})),b=u((function(){v.sort(null)})),I=d("sort"),T=!u((function(){if(h)return h<70;if(!(p&&p>3)){if(f)return!0;if(g)return g<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)v.push({k:t+r,v:n})}for(v.sort((function(e,t){return t.v-e.v})),r=0;r<v.length;r++)t=v[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}})),C=y||!b||!I||!T,S=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:c(t)>c(n)?1:-1}};r({target:"Array",proto:!0,forced:C},{sort:function(e){void 0!==e&&o(e);var t=a(this);if(T)return void 0===e?m(t):m(t,e);var n,r,i=[],c=s(t);for(r=0;r<c;r++)r in t&&_(i,t[r]);l(i,S(e)),n=i.length,r=0;while(r<n)t[r]=i[r++];while(r<c)delete t[r++];return t}})},"4ec9":function(e,t,n){"use strict";var r=n("6d61"),i=n("6566");r("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},"4eda":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("7a23"),i=n("f344");function o(e){var t=Object(r["o"])();t&&Object(i["a"])(t.proxy,e)}},"4fad":function(e,t,n){var r=n("d039"),i=n("861d"),o=n("c6b6"),a=n("d86b"),s=Object.isExtensible,c=r((function(){s(1)}));e.exports=c||a?function(e){return!!i(e)&&((!a||"ArrayBuffer"!=o(e))&&(!s||s(e)))}:s},"4fbc":function(e,t,n){},"504b":function(e,t,n){},5087:function(e,t,n){var r=n("da84"),i=n("68ee"),o=n("0d51"),a=r.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not a constructor")}},"50c4":function(e,t,n){var r=n("5926"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},"510b":function(e,t,n){"use strict";var r=n("c199"),i=n("2a84"),o=Object(r["a"])(i["b"]);t["a"]=o},"512c":function(e,t,n){var r=n("342f"),i=r.match(/AppleWebKit\/(\d+)\./);e.exports=!!i&&+i[1]},5246:function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("8a0b")},5270:function(e,t,n){"use strict";var r=n("c532"),i=n("c401"),o=n("2e67"),a=n("2444"),s=n("7a77");function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s("canceled")}e.exports=function(e){c(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]}));var t=e.adapter||a.adapter;return t(e).then((function(t){return c(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(c(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},5319:function(e,t,n){"use strict";var r=n("2ba4"),i=n("c65b"),o=n("e330"),a=n("d784"),s=n("d039"),c=n("825a"),u=n("1626"),l=n("5926"),d=n("50c4"),p=n("577e"),f=n("1d80"),h=n("8aa5"),g=n("dc4a"),v=n("0cb2"),m=n("14c3"),_=n("b622"),y=_("replace"),b=Math.max,I=Math.min,T=o([].concat),C=o([].push),S=o("".indexOf),E=o("".slice),M=function(e){return void 0===e?e:String(e)},k=function(){return"$0"==="a".replace(/./,"$0")}(),w=function(){return!!/./[y]&&""===/./[y]("a","$0")}(),O=!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));a("replace",(function(e,t,n){var o=w?"$":"$0";return[function(e,n){var r=f(this),o=void 0==e?void 0:g(e,y);return o?i(o,e,r,n):i(t,p(r),e,n)},function(e,i){var a=c(this),s=p(e);if("string"==typeof i&&-1===S(i,o)&&-1===S(i,"$<")){var f=n(t,a,s,i);if(f.done)return f.value}var g=u(i);g||(i=p(i));var _=a.global;if(_){var y=a.unicode;a.lastIndex=0}var k=[];while(1){var w=m(a,s);if(null===w)break;if(C(k,w),!_)break;var O=p(w[0]);""===O&&(a.lastIndex=h(s,d(a.lastIndex),y))}for(var D="",A=0,R=0;R<k.length;R++){w=k[R];for(var x=p(w[0]),L=b(I(l(w.index),s.length),0),N=[],P=1;P<w.length;P++)C(N,M(w[P]));var j=w.groups;if(g){var U=T([x],N,L,s);void 0!==j&&C(U,j);var G=p(r(i,void 0,U))}else G=v(x,s,L,N,j,i);L>=A&&(D+=E(s,A,L)+G,A=L+x.length)}return D+E(s,A)}]}),!O||!k||w)},"537a":function(e,t,n){"use strict";n("68ef"),n("9312")},"53ca":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}},"543e":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("f344"),c=n("8405"),[u,l]=Object(o["a"])("loading"),d=Array(12).fill(null).map((e,t)=>Object(i["m"])("i",{class:l("line",String(t+1))},null)),p=Object(i["m"])("svg",{class:l("circular"),viewBox:"25 25 50 50"},[Object(i["m"])("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),f={size:a["f"],type:Object(a["e"])("circular"),color:String,vertical:Boolean,textSize:a["f"],textColor:String},h=Object(i["n"])({name:u,props:f,setup(e,t){var{slots:n}=t,r=Object(i["e"])(()=>Object(s["a"])({color:e.color},Object(c["e"])(e.size))),o=()=>{var t;if(n.default)return Object(i["m"])("span",{class:l("text"),style:{fontSize:Object(c["a"])(e.textSize),color:null!=(t=e.textColor)?t:e.color}},[n.default()])};return()=>{var{type:t,vertical:n}=e;return Object(i["m"])("div",{class:l([t,{vertical:n}])},[Object(i["m"])("span",{class:l("spinner",t),style:r.value},["spinner"===t?d:p]),o()])}}}),g=Object(r["a"])(h);t["b"]=g},5502:function(e,t,n){"use strict";n.d(t,"a",(function(){return $})),n.d(t,"b",(function(){return a}));var r=n("7a23"),i=n("3f4e"),o="store";function a(e){return void 0===e&&(e=null),Object(r["q"])(null!==e?e:o)}function s(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function c(e){return null!==e&&"object"===typeof e}function u(e){return e&&"function"===typeof e.then}function l(e,t){if(!e)throw new Error("[vuex] "+t)}function d(e,t){return function(){return e(t)}}function p(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function f(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;g(e,n,[],e._modules.root,!0),h(e,n,t)}function h(e,t,n){var i=e._state;e.getters={},e._makeLocalGettersCache=Object.create(null);var o=e._wrappedGetters,a={};s(o,(function(t,n){a[n]=d(t,e),Object.defineProperty(e.getters,n,{get:function(){return a[n]()},enumerable:!0})})),e._state=Object(r["J"])({data:t}),e.strict&&I(e),i&&n&&e._withCommit((function(){i.data=null}))}function g(e,t,n,r,i){var o=!n.length,a=e._modules.getNamespace(n);if(r.namespaced&&(e._modulesNamespaceMap[a]&&console.error("[vuex] duplicate namespace "+a+" for the namespaced module "+n.join("/")),e._modulesNamespaceMap[a]=r),!o&&!i){var s=T(t,n.slice(0,-1)),c=n[n.length-1];e._withCommit((function(){c in s&&console.warn('[vuex] state field "'+c+'" was overridden by a module with the same name at "'+n.join(".")+'"'),s[c]=r.state}))}var u=r.context=v(e,a,n);r.forEachMutation((function(t,n){var r=a+n;_(e,r,t,u)})),r.forEachAction((function(t,n){var r=t.root?n:a+n,i=t.handler||t;y(e,r,i,u)})),r.forEachGetter((function(t,n){var r=a+n;b(e,r,t,u)})),r.forEachChild((function(r,o){g(e,t,n.concat(o),r,i)}))}function v(e,t,n){var r=""===t,i={dispatch:r?e.dispatch:function(n,r,i){var o=C(n,r,i),a=o.payload,s=o.options,c=o.type;if(s&&s.root||(c=t+c,e._actions[c]))return e.dispatch(c,a);console.error("[vuex] unknown local action type: "+o.type+", global type: "+c)},commit:r?e.commit:function(n,r,i){var o=C(n,r,i),a=o.payload,s=o.options,c=o.type;s&&s.root||(c=t+c,e._mutations[c])?e.commit(c,a,s):console.error("[vuex] unknown local mutation type: "+o.type+", global type: "+c)}};return Object.defineProperties(i,{getters:{get:r?function(){return e.getters}:function(){return m(e,t)}},state:{get:function(){return T(e.state,n)}}}),i}function m(e,t){if(!e._makeLocalGettersCache[t]){var n={},r=t.length;Object.keys(e.getters).forEach((function(i){if(i.slice(0,r)===t){var o=i.slice(r);Object.defineProperty(n,o,{get:function(){return e.getters[i]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function _(e,t,n,r){var i=e._mutations[t]||(e._mutations[t]=[]);i.push((function(t){n.call(e,r.state,t)}))}function y(e,t,n,r){var i=e._actions[t]||(e._actions[t]=[]);i.push((function(t){var i=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},t);return u(i)||(i=Promise.resolve(i)),e._devtoolHook?i.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):i}))}function b(e,t,n,r){e._wrappedGetters[t]?console.error("[vuex] duplicate getter key: "+t):e._wrappedGetters[t]=function(e){return n(r.state,r.getters,e.state,e.getters)}}function I(e){Object(r["X"])((function(){return e._state.data}),(function(){l(e._committing,"do not mutate vuex store state outside mutation handlers.")}),{deep:!0,flush:"sync"})}function T(e,t){return t.reduce((function(e,t){return e[t]}),e)}function C(e,t,n){return c(e)&&e.type&&(n=t,t=e,e=e.type),l("string"===typeof e,"expects string as the type, but found "+typeof e+"."),{type:e,payload:t,options:n}}var S="vuex bindings",E="vuex:mutations",M="vuex:actions",k="vuex",w=0;function O(e,t){Object(i["a"])({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[S]},(function(n){n.addTimelineLayer({id:E,label:"Vuex Mutations",color:D}),n.addTimelineLayer({id:M,label:"Vuex Actions",color:D}),n.addInspector({id:k,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree((function(n){if(n.app===e&&n.inspectorId===k)if(n.filter){var r=[];P(r,t._modules.root,n.filter,""),n.rootNodes=r}else n.rootNodes=[N(t._modules.root,"")]})),n.on.getInspectorState((function(n){if(n.app===e&&n.inspectorId===k){var r=n.nodeId;m(t,r),n.state=j(G(t._modules,r),"root"===r?t.getters:t._makeLocalGettersCache,r)}})),n.on.editInspectorState((function(n){if(n.app===e&&n.inspectorId===k){var r=n.nodeId,i=n.path;"root"!==r&&(i=r.split("/").filter(Boolean).concat(i)),t._withCommit((function(){n.set(t._state.data,i,n.state.value)}))}})),t.subscribe((function(e,t){var r={};e.payload&&(r.payload=e.payload),r.state=t,n.notifyComponentUpdate(),n.sendInspectorTree(k),n.sendInspectorState(k),n.addTimelineEvent({layerId:E,event:{time:Date.now(),title:e.type,data:r}})})),t.subscribeAction({before:function(e,t){var r={};e.payload&&(r.payload=e.payload),e._id=w++,e._time=Date.now(),r.state=t,n.addTimelineEvent({layerId:M,event:{time:e._time,title:e.type,groupId:e._id,subtitle:"start",data:r}})},after:function(e,t){var r={},i=Date.now()-e._time;r.duration={_custom:{type:"duration",display:i+"ms",tooltip:"Action duration",value:i}},e.payload&&(r.payload=e.payload),r.state=t,n.addTimelineEvent({layerId:M,event:{time:Date.now(),title:e.type,groupId:e._id,subtitle:"end",data:r}})}})}))}var D=8702998,A=6710886,R=16777215,x={label:"namespaced",textColor:R,backgroundColor:A};function L(e){return e&&"root"!==e?e.split("/").slice(-2,-1)[0]:"Root"}function N(e,t){return{id:t||"root",label:L(t),tags:e.namespaced?[x]:[],children:Object.keys(e._children).map((function(n){return N(e._children[n],t+n+"/")}))}}function P(e,t,n,r){r.includes(n)&&e.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:t.namespaced?[x]:[]}),Object.keys(t._children).forEach((function(i){P(e,t._children[i],n,r+i+"/")}))}function j(e,t,n){t="root"===n?t:t[n];var r=Object.keys(t),i={state:Object.keys(e.state).map((function(t){return{key:t,editable:!0,value:e.state[t]}}))};if(r.length){var o=U(t);i.getters=Object.keys(o).map((function(e){return{key:e.endsWith("/")?L(e):e,editable:!1,value:V((function(){return o[e]}))}}))}return i}function U(e){var t={};return Object.keys(e).forEach((function(n){var r=n.split("/");if(r.length>1){var i=t,o=r.pop();r.forEach((function(e){i[e]||(i[e]={_custom:{value:{},display:e,tooltip:"Module",abstract:!0}}),i=i[e]._custom.value})),i[o]=V((function(){return e[n]}))}else t[n]=V((function(){return e[n]}))})),t}function G(e,t){var n=t.split("/").filter((function(e){return e}));return n.reduce((function(e,r,i){var o=e[r];if(!o)throw new Error('Missing module "'+r+'" for path "'+t+'".');return i===n.length-1?o:o._children}),"root"===t?e:e.root._children)}function V(e){try{return e()}catch(t){return t}}var F=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"===typeof n?n():n)||{}},B={namespaced:{configurable:!0}};B.namespaced.get=function(){return!!this._rawModule.namespaced},F.prototype.addChild=function(e,t){this._children[e]=t},F.prototype.removeChild=function(e){delete this._children[e]},F.prototype.getChild=function(e){return this._children[e]},F.prototype.hasChild=function(e){return e in this._children},F.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},F.prototype.forEachChild=function(e){s(this._children,e)},F.prototype.forEachGetter=function(e){this._rawModule.getters&&s(this._rawModule.getters,e)},F.prototype.forEachAction=function(e){this._rawModule.actions&&s(this._rawModule.actions,e)},F.prototype.forEachMutation=function(e){this._rawModule.mutations&&s(this._rawModule.mutations,e)},Object.defineProperties(F.prototype,B);var q=function(e){this.register([],e,!1)};function H(e,t,n){if(Y(e,n),t.update(n),n.modules)for(var r in n.modules){if(!t.getChild(r))return void console.warn("[vuex] trying to add a new module '"+r+"' on hot reloading, manual reload is needed");H(e.concat(r),t.getChild(r),n.modules[r])}}q.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},q.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return t=t.getChild(n),e+(t.namespaced?n+"/":"")}),"")},q.prototype.update=function(e){H([],this.root,e)},q.prototype.register=function(e,t,n){var r=this;void 0===n&&(n=!0),Y(e,t);var i=new F(t,n);if(0===e.length)this.root=i;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],i)}t.modules&&s(t.modules,(function(t,i){r.register(e.concat(i),t,n)}))},q.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1],r=t.getChild(n);r?r.runtime&&t.removeChild(n):console.warn("[vuex] trying to unregister module '"+n+"', which is not registered")},q.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return!!t&&t.hasChild(n)};var z={assert:function(e){return"function"===typeof e},expected:"function"},K={assert:function(e){return"function"===typeof e||"object"===typeof e&&"function"===typeof e.handler},expected:'function or object with "handler" function'},W={getters:z,mutations:z,actions:K};function Y(e,t){Object.keys(W).forEach((function(n){if(t[n]){var r=W[n];s(t[n],(function(t,i){l(r.assert(t),J(e,n,i,t,r.expected))}))}}))}function J(e,t,n,r,i){var o=t+" should be "+i+' but "'+t+"."+n+'"';return e.length>0&&(o+=' in module "'+e.join(".")+'"'),o+=" is "+JSON.stringify(r)+".",o}function $(e){return new X(e)}var X=function e(t){var n=this;void 0===t&&(t={}),l("undefined"!==typeof Promise,"vuex requires a Promise polyfill in this browser."),l(this instanceof e,"store must be called with the new operator.");var r=t.plugins;void 0===r&&(r=[]);var i=t.strict;void 0===i&&(i=!1);var o=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new q(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=o;var a=this,s=this,c=s.dispatch,u=s.commit;this.dispatch=function(e,t){return c.call(a,e,t)},this.commit=function(e,t,n){return u.call(a,e,t,n)},this.strict=i;var d=this._modules.root.state;g(this,d,[],this._modules.root),h(this,d),r.forEach((function(e){return e(n)}))},Z={state:{configurable:!0}};X.prototype.install=function(e,t){e.provide(t||o,this),e.config.globalProperties.$store=this;var n=void 0===this._devtools||this._devtools;n&&O(e,this)},Z.state.get=function(){return this._state.data},Z.state.set=function(e){l(!1,"use store.replaceState() to explicit replace store state.")},X.prototype.commit=function(e,t,n){var r=this,i=C(e,t,n),o=i.type,a=i.payload,s=i.options,c={type:o,payload:a},u=this._mutations[o];u?(this._withCommit((function(){u.forEach((function(e){e(a)}))})),this._subscribers.slice().forEach((function(e){return e(c,r.state)})),s&&s.silent&&console.warn("[vuex] mutation type: "+o+". Silent option has been removed. Use the filter functionality in the vue-devtools")):console.error("[vuex] unknown mutation type: "+o)},X.prototype.dispatch=function(e,t){var n=this,r=C(e,t),i=r.type,o=r.payload,a={type:i,payload:o},s=this._actions[i];if(s){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(a,n.state)}))}catch(u){console.warn("[vuex] error in before action subscribers: "),console.error(u)}var c=s.length>1?Promise.all(s.map((function(e){return e(o)}))):s[0](o);return new Promise((function(e,t){c.then((function(t){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(a,n.state)}))}catch(u){console.warn("[vuex] error in after action subscribers: "),console.error(u)}e(t)}),(function(e){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(a,n.state,e)}))}catch(u){console.warn("[vuex] error in error action subscribers: "),console.error(u)}t(e)}))}))}console.error("[vuex] unknown action type: "+i)},X.prototype.subscribe=function(e,t){return p(e,this._subscribers,t)},X.prototype.subscribeAction=function(e,t){var n="function"===typeof e?{before:e}:e;return p(n,this._actionSubscribers,t)},X.prototype.watch=function(e,t,n){var i=this;return l("function"===typeof e,"store.watch only accepts a function."),Object(r["X"])((function(){return e(i.state,i.getters)}),t,Object.assign({},n))},X.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._state.data=e}))},X.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"===typeof e&&(e=[e]),l(Array.isArray(e),"module path must be a string or an Array."),l(e.length>0,"cannot register the root module by using registerModule."),this._modules.register(e,t),g(this,this.state,e,this._modules.get(e),n.preserveState),h(this,this.state)},X.prototype.unregisterModule=function(e){var t=this;"string"===typeof e&&(e=[e]),l(Array.isArray(e),"module path must be a string or an Array."),this._modules.unregister(e),this._withCommit((function(){var n=T(t.state,e.slice(0,-1));delete n[e[e.length-1]]})),f(this)},X.prototype.hasModule=function(e){return"string"===typeof e&&(e=[e]),l(Array.isArray(e),"module path must be a string or an Array."),this._modules.isRegistered(e)},X.prototype.hotUpdate=function(e){this._modules.update(e),f(this,!0)},X.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(X.prototype,Z);te((function(e,t){var n={};return ee(t)||console.error("[vuex] mapState: mapper parameter must be either an Array or an Object"),Q(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var r=ne(this.$store,"mapState",e);if(!r)return;t=r.context.state,n=r.context.getters}return"function"===typeof i?i.call(this,t,n):t[i]},n[r].vuex=!0})),n})),te((function(e,t){var n={};return ee(t)||console.error("[vuex] mapMutations: mapper parameter must be either an Array or an Object"),Q(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var r=this.$store.commit;if(e){var o=ne(this.$store,"mapMutations",e);if(!o)return;r=o.context.commit}return"function"===typeof i?i.apply(this,[r].concat(t)):r.apply(this.$store,[i].concat(t))}})),n})),te((function(e,t){var n={};return ee(t)||console.error("[vuex] mapGetters: mapper parameter must be either an Array or an Object"),Q(t).forEach((function(t){var r=t.key,i=t.val;i=e+i,n[r]=function(){if(!e||ne(this.$store,"mapGetters",e)){if(i in this.$store.getters)return this.$store.getters[i];console.error("[vuex] unknown getter: "+i)}},n[r].vuex=!0})),n})),te((function(e,t){var n={};return ee(t)||console.error("[vuex] mapActions: mapper parameter must be either an Array or an Object"),Q(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var r=this.$store.dispatch;if(e){var o=ne(this.$store,"mapActions",e);if(!o)return;r=o.context.dispatch}return"function"===typeof i?i.apply(this,[r].concat(t)):r.apply(this.$store,[i].concat(t))}})),n}));function Q(e){return ee(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function ee(e){return Array.isArray(e)||c(e)}function te(e){return function(t,n){return"string"!==typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function ne(e,t,n){var r=e._modulesNamespaceMap[n];return r||console.error("[vuex] module namespace not found in "+t+"(): "+n),r}},5530:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("b64b"),n("a4d3"),n("4de4"),n("d3b7"),n("e439"),n("4160"),n("159b"),n("dbb4"),n("1d1c"),n("7a82");var r=n("ade3");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},5531:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("7a23"),i=n("fe7e"),o=n("f691"),a=n("8405"),s=n("b1d2"),c=n("7e3e"),u=n("7f9b"),l=n("f9ae"),[d,p]=Object(i["a"])("tabbar"),f={route:Boolean,fixed:o["g"],border:o["g"],zIndex:o["f"],placeholder:Boolean,activeColor:String,beforeChange:Function,inactiveColor:String,modelValue:Object(o["c"])(0),safeAreaInsetBottom:{type:Boolean,default:null}},h=Symbol(d);t["b"]=Object(r["n"])({name:d,props:f,emits:["change","update:modelValue"],setup(e,t){var{emit:n,slots:i}=t,o=Object(r["K"])(),{linkChildren:d}=Object(u["f"])(h),f=Object(l["a"])(o,p),g=()=>{var t;return null!=(t=e.safeAreaInsetBottom)?t:e.fixed},v=()=>{var{fixed:t,zIndex:n,border:c}=e;return Object(r["m"])("div",{ref:o,role:"tablist",style:Object(a["f"])(n),class:[p({fixed:t}),{[s["f"]]:c,"van-safe-area-bottom":g()}]},[null==i.default?void 0:i.default()])},m=(t,r)=>{Object(c["a"])(e.beforeChange,{args:[t],done(){n("update:modelValue",t),n("change",t),r()}})};return d({props:e,setActive:m}),()=>e.fixed&&e.placeholder?f(v):v()}})},5596:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("c199"),i=n("fe86"),o=Object(r["a"])(i["b"]);t["b"]=o},5642:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("7a23"),i=n("fe7e"),o=n("f691"),a=n("7f9b"),[s,c]=Object(i["a"])("radio-group"),u={disabled:Boolean,iconSize:o["f"],direction:String,modelValue:o["h"],checkedColor:String},l=Symbol(s);t["b"]=Object(r["n"])({name:s,props:u,emits:["change","update:modelValue"],setup(e,t){var{emit:n,slots:i}=t,{linkChildren:o}=Object(a["f"])(l),s=e=>n("update:modelValue",e);return Object(r["X"])(()=>e.modelValue,e=>n("change",e)),o({props:e,updateValue:s}),Object(a["i"])(()=>e.modelValue),()=>Object(r["m"])("div",{class:c([e.direction]),role:"radiogroup"},[null==i.default?void 0:i.default()])}})},"565f":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("c199"),i=n("d1ba"),o=Object(r["a"])(i["a"]);t["b"]=o},5692:function(e,t,n){var r=n("c430"),i=n("c6cd");(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.20.1",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"56b6":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("7a23"),i=n("fe7e"),o=n("f691"),a=n("7f9b"),[s,c]=Object(i["a"])("row"),u=Symbol(s),l={tag:Object(o["e"])("div"),wrap:o["g"],align:String,gutter:Object(o["c"])(0),justify:String};t["b"]=Object(r["n"])({name:s,props:l,setup(e,t){var{slots:n}=t,{children:i,linkChildren:o}=Object(a["f"])(u),s=Object(r["e"])(()=>{var e=[[]],t=0;return i.forEach((n,r)=>{t+=Number(n.span),t>24?(e.push([r]),t-=24):e[e.length-1].push(r)}),e}),l=Object(r["e"])(()=>{var t=Number(e.gutter),n=[];return t?(s.value.forEach(e=>{var r=t*(e.length-1)/e.length;e.forEach((e,i)=>{if(0===i)n.push({right:r});else{var o=t-n[e-1].right,a=r-o;n.push({left:o,right:a})}})}),n):n});return o({spaces:l}),()=>{var{tag:t,wrap:i,align:o,justify:a}=e;return Object(r["m"])(t,{class:c({["align-"+o]:o,["justify-"+a]:a,nowrap:!i})},{default:()=>[null==n.default?void 0:n.default()]})}}})},"56ef":function(e,t,n){var r=n("d066"),i=n("e330"),o=n("241c"),a=n("7418"),s=n("825a"),c=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(s(e)),n=a.f;return n?c(t,n(e)):t}},"577e":function(e,t,n){var r=n("da84"),i=n("f5df"),o=r.String;e.exports=function(e){if("Symbol"===i(e))throw TypeError("Cannot convert a Symbol value to a string");return o(e)}},5781:function(e,t,n){(function(t){!function(t,n){e.exports=n()}(0,(function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function r(){r=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(w){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,o=Object.create(i.prototype),a=new S(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return M()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=I(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(w){return{type:"throw",arg:w}}}e.wrap=u;var d={};function p(){}function f(){}function h(){}var g={};c(g,o,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(E([])));m&&m!==t&&n.call(m,o)&&(g=m);var _=h.prototype=p.prototype=Object.create(g);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function r(i,o,a,s){var c=l(e[i],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var i;this._invoke=function(e,n){function o(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(o,o):o()}}function I(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return f.prototype=h,c(_,"constructor",h),c(h,"constructor",f),f.displayName=c(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},y(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new b(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(_),c(_,s,"Generator"),c(_,o,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=E,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,c,"next",e)}function c(e){o(a,r,i,s,c,"throw",e)}s(void 0)}))}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function g(e,t,n){return g=h()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&f(i,n.prototype),i},g.apply(null,arguments)}function v(e){var t="function"==typeof Map?new Map:void 0;return v=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return g(e,arguments,p(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,e)},v(e)}function m(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){var t=h();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=y(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},b.apply(this,arguments)}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||C(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=C(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function M(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{},w=function(e){return e&&e.Math==Math&&e},O=w("object"==typeof globalThis&&globalThis)||w("object"==typeof window&&window)||w("object"==typeof self&&self)||w("object"==typeof k&&k)||function(){return this}()||Function("return this")(),D={},A=function(e){try{return!!e()}catch(n){return!0}},R=!A((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),x=!A((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),L=x,N=Function.prototype.call,P=L?N.bind(N):function(){return N.apply(N,arguments)},j={},U={}.propertyIsEnumerable,G=Object.getOwnPropertyDescriptor,V=G&&!U.call({1:2},1);j.f=V?function(e){var t=G(this,e);return!!t&&t.enumerable}:U;var F,B,q=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},H=x,z=Function.prototype,K=z.call,W=H&&z.bind.bind(K,K),Y=function(e){return H?W(e):function(){return K.apply(e,arguments)}},J=Y,$=J({}.toString),X=J("".slice),Z=function(e){return X($(e),8,-1)},Q=Z,ee=Y,te=function(e){if("Function"===Q(e))return ee(e)},ne=A,re=Z,ie=Object,oe=te("".split),ae=ne((function(){return!ie("z").propertyIsEnumerable(0)}))?function(e){return"String"==re(e)?oe(e,""):ie(e)}:ie,se=function(e){return null==e},ce=se,ue=TypeError,le=function(e){if(ce(e))throw ue("Can't call method on "+e);return e},de=ae,pe=le,fe=function(e){return de(pe(e))},he="object"==typeof document&&document.all,ge={all:he,IS_HTMLDDA:void 0===he&&void 0!==he},ve=ge.all,me=ge.IS_HTMLDDA?function(e){return"function"==typeof e||e===ve}:function(e){return"function"==typeof e},_e=me,ye=ge.all,be=ge.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:_e(e)||e===ye}:function(e){return"object"==typeof e?null!==e:_e(e)},Ie=O,Te=me,Ce=function(e){return Te(e)?e:void 0},Se=function(e,t){return arguments.length<2?Ce(Ie[e]):Ie[e]&&Ie[e][t]},Ee=te({}.isPrototypeOf),Me=Se("navigator","userAgent")||"",ke=O,we=Me,Oe=ke.process,De=ke.Deno,Ae=Oe&&Oe.versions||De&&De.version,Re=Ae&&Ae.v8;Re&&(B=(F=Re.split("."))[0]>0&&F[0]<4?1:+(F[0]+F[1])),!B&&we&&(!(F=we.match(/Edge\/(\d+)/))||F[1]>=74)&&(F=we.match(/Chrome\/(\d+)/))&&(B=+F[1]);var xe=B,Le=xe,Ne=A,Pe=!!Object.getOwnPropertySymbols&&!Ne((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Le&&Le<41})),je=Pe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ue=Se,Ge=me,Ve=Ee,Fe=Object,Be=je?function(e){return"symbol"==typeof e}:function(e){var t=Ue("Symbol");return Ge(t)&&Ve(t.prototype,Fe(e))},qe=String,He=function(e){try{return qe(e)}catch(n){return"Object"}},ze=me,Ke=He,We=TypeError,Ye=function(e){if(ze(e))return e;throw We(Ke(e)+" is not a function")},Je=Ye,$e=se,Xe=function(e,t){var n=e[t];return $e(n)?void 0:Je(n)},Ze=P,Qe=me,et=be,tt=TypeError,nt={exports:{}},rt=O,it=Object.defineProperty,ot=function(e,t){try{it(rt,e,{value:t,configurable:!0,writable:!0})}catch(r){rt[e]=t}return t},at=ot,st="__core-js_shared__",ct=O[st]||at(st,{}),ut=ct;(nt.exports=function(e,t){return ut[e]||(ut[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.25.5",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"});var lt=le,dt=Object,pt=function(e){return dt(lt(e))},ft=pt,ht=te({}.hasOwnProperty),gt=Object.hasOwn||function(e,t){return ht(ft(e),t)},vt=te,mt=0,_t=Math.random(),yt=vt(1..toString),bt=function(e){return"Symbol("+(void 0===e?"":e)+")_"+yt(++mt+_t,36)},It=O,Tt=nt.exports,Ct=gt,St=bt,Et=Pe,Mt=je,kt=Tt("wks"),wt=It.Symbol,Ot=wt&&wt.for,Dt=Mt?wt:wt&&wt.withoutSetter||St,At=function(e){if(!Ct(kt,e)||!Et&&"string"!=typeof kt[e]){var t="Symbol."+e;Et&&Ct(wt,e)?kt[e]=wt[e]:kt[e]=Mt&&Ot?Ot(t):Dt(t)}return kt[e]},Rt=P,xt=be,Lt=Be,Nt=Xe,Pt=function(e,t){var n,r;if("string"===t&&Qe(n=e.toString)&&!et(r=Ze(n,e)))return r;if(Qe(n=e.valueOf)&&!et(r=Ze(n,e)))return r;if("string"!==t&&Qe(n=e.toString)&&!et(r=Ze(n,e)))return r;throw tt("Can't convert object to primitive value")},jt=TypeError,Ut=At("toPrimitive"),Gt=function(e,t){if(!xt(e)||Lt(e))return e;var n,r=Nt(e,Ut);if(r){if(void 0===t&&(t="default"),n=Rt(r,e,t),!xt(n)||Lt(n))return n;throw jt("Can't convert object to primitive value")}return void 0===t&&(t="number"),Pt(e,t)},Vt=Gt,Ft=Be,Bt=function(e){var t=Vt(e,"string");return Ft(t)?t:t+""},qt=be,Ht=O.document,zt=qt(Ht)&&qt(Ht.createElement),Kt=function(e){return zt?Ht.createElement(e):{}},Wt=Kt,Yt=!R&&!A((function(){return 7!=Object.defineProperty(Wt("div"),"a",{get:function(){return 7}}).a})),Jt=R,$t=P,Xt=j,Zt=q,Qt=fe,en=Bt,tn=gt,nn=Yt,rn=Object.getOwnPropertyDescriptor;D.f=Jt?rn:function(e,t){if(e=Qt(e),t=en(t),nn)try{return rn(e,t)}catch(r){}if(tn(e,t))return Zt(!$t(Xt.f,e,t),e[t])};var on={},an=R&&A((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),sn=be,cn=String,un=TypeError,ln=function(e){if(sn(e))return e;throw un(cn(e)+" is not an object")},dn=R,pn=Yt,fn=an,hn=ln,gn=Bt,vn=TypeError,mn=Object.defineProperty,_n=Object.getOwnPropertyDescriptor,yn="enumerable",bn="configurable",In="writable";on.f=dn?fn?function(e,t,n){if(hn(e),t=gn(t),hn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&In in n&&!n.writable){var r=_n(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:bn in n?n.configurable:r.configurable,enumerable:yn in n?n.enumerable:r.enumerable,writable:!1})}return mn(e,t,n)}:mn:function(e,t,n){if(hn(e),t=gn(t),hn(n),pn)try{return mn(e,t,n)}catch(i){}if("get"in n||"set"in n)throw vn("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var Tn=on,Cn=q,Sn=R?function(e,t,n){return Tn.f(e,t,Cn(1,n))}:function(e,t,n){return e[t]=n,e},En={exports:{}},Mn=R,kn=gt,wn=Function.prototype,On=Mn&&Object.getOwnPropertyDescriptor,Dn=kn(wn,"name"),An={EXISTS:Dn,PROPER:Dn&&"something"===function(){}.name,CONFIGURABLE:Dn&&(!Mn||Mn&&On(wn,"name").configurable)},Rn=me,xn=ct,Ln=te(Function.toString);Rn(xn.inspectSource)||(xn.inspectSource=function(e){return Ln(e)});var Nn,Pn,jn,Un=xn.inspectSource,Gn=me,Vn=O.WeakMap,Fn=Gn(Vn)&&/native code/.test(String(Vn)),Bn=nt.exports,qn=bt,Hn=Bn("keys"),zn=function(e){return Hn[e]||(Hn[e]=qn(e))},Kn={},Wn=Fn,Yn=O,Jn=be,$n=Sn,Xn=gt,Zn=ct,Qn=zn,er=Kn,tr="Object already initialized",nr=Yn.TypeError,rr=Yn.WeakMap;if(Wn||Zn.state){var ir=Zn.state||(Zn.state=new rr);ir.get=ir.get,ir.has=ir.has,ir.set=ir.set,Nn=function(e,t){if(ir.has(e))throw nr(tr);return t.facade=e,ir.set(e,t),t},Pn=function(e){return ir.get(e)||{}},jn=function(e){return ir.has(e)}}else{var or=Qn("state");er[or]=!0,Nn=function(e,t){if(Xn(e,or))throw nr(tr);return t.facade=e,$n(e,or,t),t},Pn=function(e){return Xn(e,or)?e[or]:{}},jn=function(e){return Xn(e,or)}}var ar={set:Nn,get:Pn,has:jn,enforce:function(e){return jn(e)?Pn(e):Nn(e,{})},getterFor:function(e){return function(t){var n;if(!Jn(t)||(n=Pn(t)).type!==e)throw nr("Incompatible receiver, "+e+" required");return n}}},sr=A,cr=me,ur=gt,lr=R,dr=An.CONFIGURABLE,pr=Un,fr=ar.enforce,hr=ar.get,gr=Object.defineProperty,vr=lr&&!sr((function(){return 8!==gr((function(){}),"length",{value:8}).length})),mr=String(String).split("String"),_r=En.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!ur(e,"name")||dr&&e.name!==t)&&(lr?gr(e,"name",{value:t,configurable:!0}):e.name=t),vr&&n&&ur(n,"arity")&&e.length!==n.arity&&gr(e,"length",{value:n.arity});try{n&&ur(n,"constructor")&&n.constructor?lr&&gr(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(o){}var r=fr(e);return ur(r,"source")||(r.source=mr.join("string"==typeof t?t:"")),e};Function.prototype.toString=_r((function(){return cr(this)&&hr(this).source||pr(this)}),"toString");var yr=me,br=on,Ir=En.exports,Tr=ot,Cr=function(e,t,n,r){r||(r={});var i=r.enumerable,o=void 0!==r.name?r.name:t;if(yr(n)&&Ir(n,o,r),r.global)i?e[t]=n:Tr(t,n);else{try{r.unsafe?e[t]&&(i=!0):delete e[t]}catch(s){}i?e[t]=n:br.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e},Sr={},Er=Math.ceil,Mr=Math.floor,kr=Math.trunc||function(e){var t=+e;return(t>0?Mr:Er)(t)},wr=function(e){var t=+e;return t!=t||0===t?0:kr(t)},Or=wr,Dr=Math.max,Ar=Math.min,Rr=function(e,t){var n=Or(e);return n<0?Dr(n+t,0):Ar(n,t)},xr=wr,Lr=Math.min,Nr=function(e){return e>0?Lr(xr(e),9007199254740991):0},Pr=Nr,jr=function(e){return Pr(e.length)},Ur=fe,Gr=Rr,Vr=jr,Fr=function(e){return function(t,n,r){var i,o=Ur(t),a=Vr(o),s=Gr(r,a);if(e&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}},Br={includes:Fr(!0),indexOf:Fr(!1)},qr=gt,Hr=fe,zr=Br.indexOf,Kr=Kn,Wr=te([].push),Yr=function(e,t){var n,r=Hr(e),i=0,o=[];for(n in r)!qr(Kr,n)&&qr(r,n)&&Wr(o,n);for(;t.length>i;)qr(r,n=t[i++])&&(~zr(o,n)||Wr(o,n));return o},Jr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],$r=Yr,Xr=Jr.concat("length","prototype");Sr.f=Object.getOwnPropertyNames||function(e){return $r(e,Xr)};var Zr={};Zr.f=Object.getOwnPropertySymbols;var Qr=Se,ei=Sr,ti=Zr,ni=ln,ri=te([].concat),ii=Qr("Reflect","ownKeys")||function(e){var t=ei.f(ni(e)),n=ti.f;return n?ri(t,n(e)):t},oi=gt,ai=ii,si=D,ci=on,ui=A,li=me,di=/#|\.prototype\./,pi=function(e,t){var n=hi[fi(e)];return n==vi||n!=gi&&(li(t)?ui(t):!!t)},fi=pi.normalize=function(e){return String(e).replace(di,".").toLowerCase()},hi=pi.data={},gi=pi.NATIVE="N",vi=pi.POLYFILL="P",mi=pi,_i=O,yi=D.f,bi=Sn,Ii=Cr,Ti=ot,Ci=function(e,t,n){for(var r=ai(t),i=ci.f,o=si.f,a=0;a<r.length;a++){var s=r[a];oi(e,s)||n&&oi(n,s)||i(e,s,o(t,s))}},Si=mi,Ei=function(e,t){var n,r,i,o,a,s=e.target,c=e.global,u=e.stat;if(n=c?_i:u?_i[s]||Ti(s,{}):(_i[s]||{}).prototype)for(r in t){if(o=t[r],i=e.dontCallGetSet?(a=yi(n,r))&&a.value:n[r],!Si(c?r:s+(u?".":"#")+r,e.forced)&&void 0!==i){if(typeof o==typeof i)continue;Ci(o,i)}(e.sham||i&&i.sham)&&bi(o,"sham",!0),Ii(n,r,o,e)}},Mi=Ye,ki=x,wi=te(te.bind),Oi=function(e,t){return Mi(e),void 0===t?e:ki?wi(e,t):function(){return e.apply(t,arguments)}},Di=Z,Ai=Array.isArray||function(e){return"Array"==Di(e)},Ri={};Ri[At("toStringTag")]="z";var xi="[object z]"===String(Ri),Li=xi,Ni=me,Pi=Z,ji=At("toStringTag"),Ui=Object,Gi="Arguments"==Pi(function(){return arguments}()),Vi=Li?Pi:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Ui(e),ji))?n:Gi?Pi(t):"Object"==(r=Pi(t))&&Ni(t.callee)?"Arguments":r},Fi=te,Bi=A,qi=me,Hi=Vi,zi=Un,Ki=function(){},Wi=[],Yi=Se("Reflect","construct"),Ji=/^\s*(?:class|function)\b/,$i=Fi(Ji.exec),Xi=!Ji.exec(Ki),Zi=function(e){if(!qi(e))return!1;try{return Yi(Ki,Wi,e),!0}catch(n){return!1}},Qi=function(e){if(!qi(e))return!1;switch(Hi(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Xi||!!$i(Ji,zi(e))}catch(n){return!0}};Qi.sham=!0;var eo=!Yi||Bi((function(){var e;return Zi(Zi.call)||!Zi(Object)||!Zi((function(){e=!0}))||e}))?Qi:Zi,to=Ai,no=eo,ro=be,io=At("species"),oo=Array,ao=function(e){var t;return to(e)&&(t=e.constructor,(no(t)&&(t===oo||to(t.prototype))||ro(t)&&null===(t=t[io]))&&(t=void 0)),void 0===t?oo:t},so=function(e,t){return new(ao(e))(0===t?0:t)},co=Oi,uo=ae,lo=pt,po=jr,fo=so,ho=te([].push),go=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,a=7==e,s=5==e||o;return function(c,u,l,d){for(var p,f,h=lo(c),g=uo(h),v=co(u,l),m=po(g),_=0,y=d||fo,b=t?y(c,m):n||a?y(c,0):void 0;m>_;_++)if((s||_ in g)&&(f=v(p=g[_],_,h),e))if(t)b[_]=f;else if(f)switch(e){case 3:return!0;case 5:return p;case 6:return _;case 2:ho(b,p)}else switch(e){case 4:return!1;case 7:ho(b,p)}return o?-1:r||i?i:b}},vo={forEach:go(0),map:go(1),filter:go(2),some:go(3),every:go(4),find:go(5),findIndex:go(6),filterReject:go(7)},mo=A,_o=xe,yo=At("species"),bo=function(e){return _o>=51||!mo((function(){var t=[];return(t.constructor={})[yo]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Io=vo.map;Ei({target:"Array",proto:!0,forced:!bo("map")},{map:function(e){return Io(this,e,arguments.length>1?arguments[1]:void 0)}});var To=vo.filter;Ei({target:"Array",proto:!0,forced:!bo("filter")},{filter:function(e){return To(this,e,arguments.length>1?arguments[1]:void 0)}});var Co=Vi,So=xi?{}.toString:function(){return"[object "+Co(this)+"]"};xi||Cr(Object.prototype,"toString",So,{unsafe:!0});var Eo=Ei,Mo=A,ko=fe,wo=D.f,Oo=R,Do=Mo((function(){wo(1)}));Eo({target:"Object",stat:!0,forced:!Oo||Do,sham:!Oo},{getOwnPropertyDescriptor:function(e,t){return wo(ko(e),t)}});let Ao=!0,Ro=!0;function xo(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function Lo(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);const o=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])};const o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function No(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Ao=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Po(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Ro=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function jo(){if("object"==typeof window){if(Ao)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function Uo(e,t){Ro&&console.warn(e+" is deprecated, please use "+t+" instead.")}function Go(e){return"[object Object]"===Object.prototype.toString.call(e)}function Vo(e){return Go(e)?Object.keys(e).reduce((function(t,n){const r=Go(e[n]),i=r?Vo(e[n]):e[n],o=r&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,{[n]:i})}),{}):e}function Fo(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?Fo(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(t=>{Fo(e,e.get(t),n)})}))}function Bo(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const o=[];return e.forEach(e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),o.forEach(t=>{e.forEach(n=>{n.type===r&&n.trackId===t.id&&Fo(e,n,i)})}),i}const qo=jo;function Ho(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach(n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[i("min",n)]=r.ideal,t.optional.push(e),e={},e[i("max",n)]=r.ideal,t.optional.push(e)):(e[i("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach(e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])})}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let o=e.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});const a=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||a)){let t;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?t=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then(n=>{let a=(n=n.filter(e=>"videoinput"===e.kind)).find(e=>t.some(t=>e.label.toLowerCase().includes(t)));return!a&&n.length&&t.includes("back")&&(a=n[n.length-1]),a&&(e.video.deviceId=o.exact?{exact:a.deviceId}:{ideal:a.deviceId}),e.video=r(e.video),qo("chrome: "+JSON.stringify(e)),i(e)})}e.video=r(e.video)}return qo("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,e=>{n.webkitGetUserMedia(e,t,e=>{r&&r(o(e))})})}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return i(t,t=>e(t).then(e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(e=>{e.stop()}),new DOMException("","NotFoundError");return e},e=>Promise.reject(o(e))))}}}function zo(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Ko(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.track.id):{track:n.track};const i=new Event("track");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}),t.stream.getTracks().forEach(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.id):{track:n};const i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Lo(e,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function Wo(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach(e=>{this._senders.push(t(this,e))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach(e=>{const t=this._senders.find(t=>t.track===e);t&&this._senders.splice(this._senders.indexOf(t),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Yo(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const i=function(e){const t={};return e.result().forEach(e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(t=>{n[t]=e.stat(t)}),t[n.id]=n}),t},o=function(e){return new Map(Object.keys(e).map(t=>[t,e[t]]))};if(arguments.length>=2){const r=function(e){n(o(i(e)))};return t.apply(this,[r,e])}return new Promise((e,n)=>{t.apply(this,[function(t){e(o(i(t)))},n])}).then(n,r)}}function Jo(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>Bo(t,e.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),Lo(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>Bo(t,e.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach(n=>{n.track===e&&(t?r=!0:t=n)}),this.getReceivers().forEach(t=>(t.track===e&&(n?r=!0:n=t),t.track===e)),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function $o(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(e=>this._shimmedLocalStreams[e][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")});const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter(e=>-1===t.indexOf(e));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]}),i.apply(this,arguments)}}function Xo(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return $o(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(e=>this._reverseStreams[e.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const i=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:n})}function a(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find(e=>e===t))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const i=this.getSenders().find(e=>e.track===t);if(i)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find(e=>e.track===t)},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=o(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then(e=>o(this,e))}};e.RTCPeerConnection.prototype[t]=r[t]}));const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=a(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=c.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach(n=>{this._streams[n].getTracks().find(t=>e.track===t)&&(t=this._streams[n])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Zo(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}))}function Qo(e,t){Lo(e,"negotiationneeded",e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e})}var ea=Object.freeze({__proto__:null,shimMediaStream:zo,shimOnTrack:Ko,shimGetSendersWithDtmf:Wo,shimGetStats:Yo,shimSenderReceiverGetStats:Jo,shimAddTrackRemoveTrackWithNative:$o,shimAddTrackRemoveTrack:Xo,shimPeerConnection:Zo,fixNegotiationNeeded:Qo,shimGetUserMedia:Ho,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then(t=>{const r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}),ta={exports:{}};!function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},t.getDescription=function(e){var n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){var n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((function(e){return 0===e.indexOf(n)}))},t.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){var r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substr(12),password:i.substr(10)}:null},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" "),i=3;i<r.length;i++){var o=r[i],a=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){var s=t.parseRtpMap(a),c=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(s.parameters=c.length?t.parseFmtp(c[0]):{},s.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),n.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(s.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((function(e){n.headerExtensions.push(t.parseExtmap(e))})),n},t.writeRtpDescription=function(e,n){var r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=n.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((function(e){r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));var i=0;return n.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),r+="a=rtcp-mux\r\n",n.headerExtensions&&n.headerExtensions.forEach((function(e){r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){var n,r=[],i=t.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=s.length>0&&s[0].ssrc,u=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(n=u[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&n&&(t.rtx={ssrc:n}),r.push(t),o&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},r.push(t))}})),0===r.length&&c&&r.push({ssrc:c});var l=t.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=l}))),r},t.parseRtcpParameters=function(e){var n={},r=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);var i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;var o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.parseMsid=function(e){var n,r=t.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(n=r[0].substr(7).split(" "))[0],track:n[1]};var i=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(n=i[0].value.split(" "))[0],track:n[1]}:void 0},t.parseSctpDescription=function(e){var n,r=t.parseMLine(e),i=t.matchPrefix(e,"a=max-message-size:");i.length>0&&(n=parseInt(i[0].substr(19),10)),isNaN(n)&&(n=65536);var o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:r.fmt,maxMessageSize:n};if(t.matchPrefix(e,"a=sctpmap:").length>0){var a=t.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:n}}},t.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){var i=void 0!==n?n:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,n,r,i){var o=t.writeRtpDescription(e.kind,n);if(o+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var a="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),o},t.getDirection=function(e,n){for(var r=t.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){var n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var n=t.splitLines(e),r=0;r<n.length;r++)if(n[r].length<2||"="!==n[r].charAt(1))return!1;return!0},e.exports=t}(ta);var na=ta.exports,ra=ta.exports;function ia(e,t,n,r,i){var o=ra.writeRtpDescription(e.kind,t);if(o+=ra.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=ra.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),o+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var s="msid:"+(r?r.id:"-")+" "+a+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+ra.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+ra.localCName+"\r\n"),o}function oa(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},i=function(e,t,n,i){var o=r(e.parameters.apt,n),a=r(t.parameters.apt,i);return o&&a&&o.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach((function(r){for(var o=0;o<t.codecs.length;o++){var a=t.codecs[o];if(r.name.toLowerCase()===a.name.toLowerCase()&&r.clockRate===a.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&a.parameters.apt&&!i(r,a,e.codecs,t.codecs))continue;(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(r.numChannels,a.numChannels),n.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}})),n}function aa(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function sa(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function ca(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}var ua=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function r(t,n,r,i){var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=i,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var i=function(n){var r=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){r[e]=i[e].bind(i)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw ca("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof r;return i&&(r=[r]),r=r.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)})),delete e.url,e.urls=i?r[0]:r,!!r.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var o=n.iceCandidatePoolSize;o>0;o--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=ra.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(i.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(i.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),i.prototype.onicecandidate=null,i.prototype.onaddstream=null,i.prototype.ontrack=null,i.prototype.onremovestream=null,i.prototype.onsignalingstatechange=null,i.prototype.oniceconnectionstatechange=null,i.prototype.onconnectionstatechange=null,i.prototype.onicegatheringstatechange=null,i.prototype.onnegotiationneeded=null,i.prototype.ondatachannel=null,i.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},i.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},i.prototype.getConfiguration=function(){return this._config},i.prototype.getLocalStreams=function(){return this.localStreams},i.prototype.getRemoteStreams=function(){return this.remoteStreams},i.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();r.iceTransport=i.iceTransport,r.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(r),r},i.prototype.addTrack=function(t,n){if(this._isClosed)throw ca("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(e){return e.track===t})))throw ca("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(r=this.transceivers[i]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},i.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){n.addTrack(e,r)}))}},i.prototype.removeTrack=function(t){if(this._isClosed)throw ca("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw ca("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},i.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},i.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},i.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},i.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;i.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},i.prototype._gather=function(t,n){var r=this,i=this.transceivers[n].iceGatherer;if(!i.onlocalcandidate){var o=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),i.onlocalcandidate=function(e){if(!(r.usingBundle&&n>0)){var o=new Event("icecandidate");o.candidate={sdpMid:t,sdpMLineIndex:n};var a=e.candidate,s=!a||0===Object.keys(a).length;if(s)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),a.component=1,a.ufrag=i.getLocalParameters().usernameFragment;var c=ra.writeCandidate(a);o.candidate=Object.assign(o.candidate,ra.parseCandidate(c)),o.candidate.candidate=c,o.candidate.toJSON=function(){return{candidate:o.candidate.candidate,sdpMid:o.candidate.sdpMid,sdpMLineIndex:o.candidate.sdpMLineIndex,usernameFragment:o.candidate.usernameFragment}}}var u=ra.getMediaSections(r._localDescription.sdp);u[o.candidate.sdpMLineIndex]+=s?"a=end-of-candidates\r\n":"a="+o.candidate.candidate+"\r\n",r._localDescription.sdp=ra.getDescription(r._localDescription.sdp)+u.join("");var l=r.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==r.iceGatheringState&&(r.iceGatheringState="gathering",r._emitGatheringStateChange()),s||r._dispatchEvent("icecandidate",o),l&&(r._dispatchEvent("icecandidate",new Event("icecandidate")),r.iceGatheringState="complete",r._emitGatheringStateChange())}},e.setTimeout((function(){o.forEach((function(e){i.onlocalcandidate(e)}))}),0)}},i.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},i.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},i.prototype._transceive=function(e,n,r){var i=oa(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:ra.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),r&&e.rtpReceiver&&i.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?i.encodings=e.recvEncodingParameters:i.encodings=[{}],i.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(i.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},i.prototype.setLocalDescription=function(e){var t,n,r=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(ca("TypeError",'Unsupported type "'+e.type+'"'));if(!aa("setLocalDescription",e.type,r.signalingState)||r._isClosed)return Promise.reject(ca("InvalidStateError","Can not set local "+e.type+" in state "+r.signalingState));if("offer"===e.type)t=ra.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=ra.parseRtpParameters(e);r.transceivers[t].localCapabilities=n})),r.transceivers.forEach((function(e,t){r._gather(e.mid,t)}));else if("answer"===e.type){t=ra.splitSections(r._remoteDescription.sdp),n=t.shift();var i=ra.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var o=r.transceivers[t],a=o.iceGatherer,s=o.iceTransport,c=o.dtlsTransport,u=o.localCapabilities,l=o.remoteCapabilities;if((!ra.isRejected(e)||0!==ra.matchPrefix(e,"a=bundle-only").length)&&!o.rejected){var d=ra.getIceParameters(e,n),p=ra.getDtlsParameters(e,n);i&&(p.role="server"),r.usingBundle&&0!==t||(r._gather(o.mid,t),"new"===s.state&&s.start(a,d,i?"controlling":"controlled"),"new"===c.state&&c.start(p));var f=oa(u,l);r._transceive(o,f.codecs.length>0,!1)}}))}return r._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?r._updateSignalingState("have-local-offer"):r._updateSignalingState("stable"),Promise.resolve()},i.prototype.setRemoteDescription=function(i){var o=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(ca("TypeError",'Unsupported type "'+i.type+'"'));if(!aa("setRemoteDescription",i.type,o.signalingState)||o._isClosed)return Promise.reject(ca("InvalidStateError","Can not set remote "+i.type+" in state "+o.signalingState));var a={};o.remoteStreams.forEach((function(e){a[e.id]=e}));var s=[],c=ra.splitSections(i.sdp),u=c.shift(),l=ra.matchPrefix(u,"a=ice-lite").length>0,d=ra.matchPrefix(u,"a=group:BUNDLE ").length>0;o.usingBundle=d;var p=ra.matchPrefix(u,"a=ice-options:")[0];return o.canTrickleIceCandidates=!!p&&p.substr(14).split(" ").indexOf("trickle")>=0,c.forEach((function(r,c){var p=ra.splitLines(r),f=ra.getKind(r),h=ra.isRejected(r)&&0===ra.matchPrefix(r,"a=bundle-only").length,g=p[0].substr(2).split(" ")[2],v=ra.getDirection(r,u),m=ra.parseMsid(r),_=ra.getMid(r)||ra.generateIdentifier();if(h||"application"===f&&("DTLS/SCTP"===g||"UDP/DTLS/SCTP"===g))o.transceivers[c]={mid:_,kind:f,protocol:g,rejected:!0};else{var y,b,I,T,C,S,E,M,k;!h&&o.transceivers[c]&&o.transceivers[c].rejected&&(o.transceivers[c]=o._createTransceiver(f,!0));var w,O,D=ra.parseRtpParameters(r);h||(w=ra.getIceParameters(r,u),(O=ra.getDtlsParameters(r,u)).role="client"),E=ra.parseRtpEncodingParameters(r);var A=ra.parseRtcpParameters(r),R=ra.matchPrefix(r,"a=end-of-candidates",u).length>0,x=ra.matchPrefix(r,"a=candidate:").map((function(e){return ra.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===i.type||"answer"===i.type)&&!h&&d&&c>0&&o.transceivers[c]&&(o._disposeIceAndDtlsTransports(c),o.transceivers[c].iceGatherer=o.transceivers[0].iceGatherer,o.transceivers[c].iceTransport=o.transceivers[0].iceTransport,o.transceivers[c].dtlsTransport=o.transceivers[0].dtlsTransport,o.transceivers[c].rtpSender&&o.transceivers[c].rtpSender.setTransport(o.transceivers[0].dtlsTransport),o.transceivers[c].rtpReceiver&&o.transceivers[c].rtpReceiver.setTransport(o.transceivers[0].dtlsTransport)),"offer"!==i.type||h)"answer"!==i.type||h||(b=(y=o.transceivers[c]).iceGatherer,I=y.iceTransport,T=y.dtlsTransport,C=y.rtpReceiver,S=y.sendEncodingParameters,M=y.localCapabilities,o.transceivers[c].recvEncodingParameters=E,o.transceivers[c].remoteCapabilities=D,o.transceivers[c].rtcpParameters=A,x.length&&"new"===I.state&&(!l&&!R||d&&0!==c?x.forEach((function(e){sa(y.iceTransport,e)})):I.setRemoteCandidates(x)),d&&0!==c||("new"===I.state&&I.start(b,w,"controlling"),"new"===T.state&&T.start(O)),!oa(y.localCapabilities,y.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&y.sendEncodingParameters[0].rtx&&delete y.sendEncodingParameters[0].rtx,o._transceive(y,"sendrecv"===v||"recvonly"===v,"sendrecv"===v||"sendonly"===v),!C||"sendrecv"!==v&&"sendonly"!==v?delete y.rtpReceiver:(k=C.track,m?(a[m.stream]||(a[m.stream]=new e.MediaStream),n(k,a[m.stream]),s.push([k,C,a[m.stream]])):(a.default||(a.default=new e.MediaStream),n(k,a.default),s.push([k,C,a.default]))));else{(y=o.transceivers[c]||o._createTransceiver(f)).mid=_,y.iceGatherer||(y.iceGatherer=o._createIceGatherer(c,d)),x.length&&"new"===y.iceTransport.state&&(!R||d&&0!==c?x.forEach((function(e){sa(y.iceTransport,e)})):y.iceTransport.setRemoteCandidates(x)),M=e.RTCRtpReceiver.getCapabilities(f),t<15019&&(M.codecs=M.codecs.filter((function(e){return"rtx"!==e.name}))),S=y.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var L,N=!1;"sendrecv"===v||"sendonly"===v?(N=!y.rtpReceiver,C=y.rtpReceiver||new e.RTCRtpReceiver(y.dtlsTransport,f),N&&(k=C.track,m&&"-"===m.stream||(m?(a[m.stream]||(a[m.stream]=new e.MediaStream,Object.defineProperty(a[m.stream],"id",{get:function(){return m.stream}})),Object.defineProperty(k,"id",{get:function(){return m.track}}),L=a[m.stream]):(a.default||(a.default=new e.MediaStream),L=a.default)),L&&(n(k,L),y.associatedRemoteMediaStreams.push(L)),s.push([k,C,L]))):y.rtpReceiver&&y.rtpReceiver.track&&(y.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===y.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),y.associatedRemoteMediaStreams=[]),y.localCapabilities=M,y.remoteCapabilities=D,y.rtpReceiver=C,y.rtcpParameters=A,y.sendEncodingParameters=S,y.recvEncodingParameters=E,o._transceive(o.transceivers[c],!1,N)}}})),void 0===o._dtlsRole&&(o._dtlsRole="offer"===i.type?"active":"passive"),o._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?o._updateSignalingState("have-remote-offer"):o._updateSignalingState("stable"),Object.keys(a).forEach((function(t){var n=a[t];if(n.getTracks().length){if(-1===o.remoteStreams.indexOf(n)){o.remoteStreams.push(n);var i=new Event("addstream");i.stream=n,e.setTimeout((function(){o._dispatchEvent("addstream",i)}))}s.forEach((function(e){var t=e[0],i=e[1];n.id===e[2].id&&r(o,t,i,[n])}))}})),s.forEach((function(e){e[2]||r(o,e[0],e[1],[])})),e.setTimeout((function(){o&&o.transceivers&&o.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},i.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},i.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},i.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},i.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},i.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},i.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(ca("InvalidStateError","Can not call createOffer after close"));var r=n.transceivers.filter((function(e){return"audio"===e.kind})).length,i=n.transceivers.filter((function(e){return"video"===e.kind})).length,o=arguments[0];if(o){if(o.mandatory||o.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==o.offerToReceiveAudio&&(r=!0===o.offerToReceiveAudio?1:!1===o.offerToReceiveAudio?0:o.offerToReceiveAudio),void 0!==o.offerToReceiveVideo&&(i=!0===o.offerToReceiveVideo?1:!1===o.offerToReceiveVideo?0:o.offerToReceiveVideo)}for(n.transceivers.forEach((function(e){"audio"===e.kind?--r<0&&(e.wantReceive=!1):"video"===e.kind&&--i<0&&(e.wantReceive=!1)}));r>0||i>0;)r>0&&(n._createTransceiver("audio"),r--),i>0&&(n._createTransceiver("video"),i--);var a=ra.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(r,i){var o=r.track,a=r.kind,s=r.mid||ra.generateIdentifier();r.mid=s,r.iceGatherer||(r.iceGatherer=n._createIceGatherer(i,n.usingBundle));var c=e.RTCRtpSender.getCapabilities(a);t<15019&&(c.codecs=c.codecs.filter((function(e){return"rtx"!==e.name}))),c.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),r.remoteCapabilities&&r.remoteCapabilities.codecs&&r.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),c.headerExtensions.forEach((function(e){(r.remoteCapabilities&&r.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var u=r.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];o&&t>=15019&&"video"===a&&!u[0].rtx&&(u[0].rtx={ssrc:u[0].ssrc+1}),r.wantReceive&&(r.rtpReceiver=new e.RTCRtpReceiver(r.dtlsTransport,a)),r.localCapabilities=c,r.sendEncodingParameters=u})),"max-compat"!==n._config.bundlePolicy&&(a+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),a+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){a+=ia(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),a+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,a+="a="+ra.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(a+="a=end-of-candidates\r\n"))}));var s=new e.RTCSessionDescription({type:"offer",sdp:a});return Promise.resolve(s)},i.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(ca("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(ca("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var r=ra.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(r+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),r+="a=ice-options:trickle\r\n";var i=ra.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,o){if(!(o+1>i)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?r+="m=application 0 DTLS/SCTP 5000\r\n":r+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?r+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(r+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(r+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var a;e.stream&&("audio"===e.kind?a=e.stream.getAudioTracks()[0]:"video"===e.kind&&(a=e.stream.getVideoTracks()[0]),a&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var s=oa(e.localCapabilities,e.remoteCapabilities);!s.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,r+=ia(e,s,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(r+="a=rtcp-rsize\r\n")}}));var o=new e.RTCSessionDescription({type:"answer",sdp:r});return Promise.resolve(o)},i.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(r,i){if(!n._remoteDescription)return i(ca("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var o=e.sdpMLineIndex;if(e.sdpMid)for(var a=0;a<n.transceivers.length;a++)if(n.transceivers[a].mid===e.sdpMid){o=a;break}var s=n.transceivers[o];if(!s)return i(ca("OperationError","Can not add ICE candidate"));if(s.rejected)return r();var c=Object.keys(e.candidate).length>0?ra.parseCandidate(e.candidate):{};if("tcp"===c.protocol&&(0===c.port||9===c.port))return r();if(c.component&&1!==c.component)return r();if((0===o||o>0&&s.iceTransport!==n.transceivers[0].iceTransport)&&!sa(s.iceTransport,c))return i(ca("OperationError","Can not add ICE candidate"));var u=e.candidate.trim();0===u.indexOf("a=")&&(u=u.substr(2)),(t=ra.getMediaSections(n._remoteDescription.sdp))[o]+="a="+(c.type?u:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=ra.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var l=0;l<n.transceivers.length&&(n.transceivers[l].rejected||(n.transceivers[l].iceTransport.addRemoteCandidate({}),(t=ra.getMediaSections(n._remoteDescription.sdp))[l]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=ra.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));l++);r()}))},i.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw ca("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),Promise.all(r).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])})),t}))}}}));var o=["createOffer","createAnswer"];return o.forEach((function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(o=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),i};function la(e){const t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch(e=>Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e)))}}function da(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function pa(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);const n=new Event("enabled");n.enabled=e,this.dispatchEvent(n)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const n=ua(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){let n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(e=>{if(e&&(e.urls||e.url)){let t=e.urls||e.url;e.url&&!e.urls&&Uo("RTCIceServer.url","RTCIceServer.urls");const r="string"==typeof t;return r&&(t=[t]),t=t.filter(e=>{if(0===e.indexOf("stun:"))return!1;const t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n}),delete e.url,e.urls=r?t[0]:t,!!t.length}})}(e.iceServers,t.version),jo("ICE servers after filtering:",e.iceServers)),new n(e)},e.RTCPeerConnection.prototype=n.prototype}function fa(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}var ha=Object.freeze({__proto__:null,shimPeerConnection:pa,shimReplaceTrack:fa,shimGetUserMedia:la,shimGetDisplayMedia:da});function ga(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){Uo("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function va(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ma(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,o]=arguments;return r.apply(this,[e||null]).then(e=>{if(t.version<53&&!i)try{e.forEach(e=>{e.type=n[e.type]||e.type})}catch(r){if("TypeError"!==r.name)throw r;e.forEach((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))})}return e}).then(i,o)}}function _a(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function ya(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),Lo(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function ba(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){Uo("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)})})}function Ia(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Ta(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach(e=>{if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(n).then(()=>{delete t.sendEncodings}).catch(()=>{delete t.sendEncodings})))}return r})}function Ca(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function Sa(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function Ea(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}var Ma=Object.freeze({__proto__:null,shimOnTrack:va,shimPeerConnection:ma,shimSenderGetStats:_a,shimReceiverGetStats:ya,shimRemoveStream:ba,shimRTCDataChannel:Ia,shimAddTransceiver:Ta,shimGetParameters:Ca,shimCreateOffer:Sa,shimCreateAnswer:Ea,shimGetUserMedia:ga,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}});function ka(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(n=>t.call(this,n,e)),e.getVideoTracks().forEach(n=>t.call(this,n,e))},e.RTCPeerConnection.prototype.addTrack=function(e,...n){return n&&n.forEach(e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach(e=>{n.includes(e.track)&&this.removeTrack(e)})})}}function wa(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach(e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)})}),t.apply(e,arguments)}}}function Oa(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};let s=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){const r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=s}function Da(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(Aa(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function Aa(e){return e&&void 0!==e.video?Object.assign({},e,{video:Vo(e.video)}):e}function Ra(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(Uo("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function xa(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function La(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find(e=>"audio"===e.receiver.track.kind);!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find(e=>"video"===e.receiver.track.kind);!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}}function Na(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var Pa=Object.freeze({__proto__:null,shimLocalStreamsAPI:ka,shimRemoteStreamsAPI:wa,shimCallbacksAPI:Oa,shimGetUserMedia:Da,shimConstraints:Aa,shimRTCIceServerUrls:Ra,shimTrackEventTransceiver:xa,shimCreateOfferLegacy:La,shimAudioContext:Na});function ja(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),r=na.parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,Lo(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function Ua(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=function(e){if(!e||!e.sdp)return!1;const t=na.splitSections(e.sdp);return t.shift(),t.some(e=>{const t=na.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})},r=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n},i=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},o=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const i=na.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const e=r(arguments[0]),t=i(e),n=o(arguments[0],e);let a;a=0===t&&0===n?Number.POSITIVE_INFINITY:0===t||0===n?Math.max(t,n):Math.min(t,n);const s={};Object.defineProperty(s,"maxMessageSize",{get:()=>a}),this._sctp=s}return a.apply(this,arguments)}}function Ga(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},Lo(e,"datachannel",e=>(t(e.channel,e.target),e))}function Va(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function Fa(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter(e=>"a=extmap-allow-mixed"!==e.trim()).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function Ba(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}var qa=Object.freeze({__proto__:null,shimRTCIceCandidate:ja,shimMaxMessageSize:Ua,shimSendThrowTypeError:Ga,shimConnectionState:Va,removeExtmapAllowMixed:Fa,shimAddIceCandidateNullOrEmpty:Ba});!function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const n=jo,r=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=xo(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=xo(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=xo(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=xo(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),i={browserDetails:r,commonShim:qa,extractVersion:xo,disableLog:No,disableWarnings:Po};switch(r.browser){case"chrome":if(!ea||!Zo||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(null===r.version)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=ea,Ba(e,r),Ho(e,r),zo(e),Zo(e,r),Ko(e),Xo(e,r),Wo(e),Yo(e),Jo(e),Qo(e,r),ja(e),Va(e),Ua(e,r),Ga(e),Fa(e,r);break;case"firefox":if(!Ma||!ma||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=Ma,Ba(e,r),ga(e,r),ma(e,r),va(e),ba(e),_a(e),ya(e),Ia(e),Ta(e),Ca(e),Sa(e),Ea(e),ja(e),Va(e),Ua(e,r),Ga(e);break;case"edge":if(!ha||!pa||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),i;n("adapter.js shimming edge."),i.browserShim=ha,la(e),da(e),pa(e,r),fa(e),Ua(e,r),Ga(e);break;case"safari":if(!Pa||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=Pa,Ba(e,r),Ra(e),La(e),Oa(e),ka(e),wa(e),xa(e),Da(e),Na(e),ja(e),Ua(e,r),Ga(e),Fa(e,r);break;default:n("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});var Ha="4.15.6",za={},Ka=Yr,Wa=Jr,Ya=Object.keys||function(e){return Ka(e,Wa)},Ja=R,$a=an,Xa=on,Za=ln,Qa=fe,es=Ya;za.f=Ja&&!$a?Object.defineProperties:function(e,t){Za(e);for(var n,r=Qa(t),i=es(t),o=i.length,a=0;o>a;)Xa.f(e,n=i[a++],r[n]);return e};var ts,ns=Se("document","documentElement"),rs=ln,is=za,os=Jr,as=Kn,ss=ns,cs=Kt,us=zn("IE_PROTO"),ls=function(){},ds=function(e){return"<script>"+e+"<\/script>"},ps=function(e){e.write(ds("")),e.close();var t=e.parentWindow.Object;return e=null,t},fs=function(){try{ts=new ActiveXObject("htmlfile")}catch(i){}var e,t;fs="undefined"!=typeof document?document.domain&&ts?ps(ts):((t=cs("iframe")).style.display="none",ss.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(ds("document.F=Object")),e.close(),e.F):ps(ts);for(var n=os.length;n--;)delete fs.prototype[os[n]];return fs()};as[us]=!0;var hs=Object.create||function(e,t){var n;return null!==e?(ls.prototype=rs(e),n=new ls,ls.prototype=null,n[us]=e):n=fs(),void 0===t?n:is.f(n,t)},gs=At,vs=hs,ms=on.f,_s=gs("unscopables"),ys=Array.prototype;null==ys[_s]&&ms(ys,_s,{configurable:!0,value:vs(null)});var bs,Is,Ts,Cs=function(e){ys[_s][e]=!0},Ss={},Es=!A((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Ms=gt,ks=me,ws=pt,Os=Es,Ds=zn("IE_PROTO"),As=Object,Rs=As.prototype,xs=Os?As.getPrototypeOf:function(e){var t=ws(e);if(Ms(t,Ds))return t[Ds];var n=t.constructor;return ks(n)&&t instanceof n?n.prototype:t instanceof As?Rs:null},Ls=A,Ns=me,Ps=be,js=xs,Us=Cr,Gs=At("iterator"),Vs=!1;[].keys&&("next"in(Ts=[].keys())?(Is=js(js(Ts)))!==Object.prototype&&(bs=Is):Vs=!0);var Fs=!Ps(bs)||Ls((function(){var e={};return bs[Gs].call(e)!==e}));Fs&&(bs={}),Ns(bs[Gs])||Us(bs,Gs,(function(){return this}));var Bs={IteratorPrototype:bs,BUGGY_SAFARI_ITERATORS:Vs},qs=on.f,Hs=gt,zs=At("toStringTag"),Ks=function(e,t,n){e&&!n&&(e=e.prototype),e&&!Hs(e,zs)&&qs(e,zs,{configurable:!0,value:t})},Ws=Bs.IteratorPrototype,Ys=hs,Js=q,$s=Ks,Xs=Ss,Zs=function(){return this},Qs=function(e,t,n,r){var i=t+" Iterator";return e.prototype=Ys(Ws,{next:Js(+!r,n)}),$s(e,i,!1),Xs[i]=Zs,e},ec=me,tc=String,nc=TypeError,rc=te,ic=ln,oc=function(e){if("object"==typeof e||ec(e))return e;throw nc("Can't set "+tc(e)+" as a prototype")},ac=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=rc(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(i){}return function(n,r){return ic(n),oc(r),t?e(n,r):n.__proto__=r,n}}():void 0),sc=Ei,cc=P,uc=me,lc=Qs,dc=xs,pc=ac,fc=Ks,hc=Sn,gc=Cr,vc=Ss,mc=An.PROPER,_c=An.CONFIGURABLE,yc=Bs.IteratorPrototype,bc=Bs.BUGGY_SAFARI_ITERATORS,Ic=At("iterator"),Tc="keys",Cc="values",Sc="entries",Ec=function(){return this},Mc=function(e,t,n,r,i,o,a){lc(n,t,r);var s,c,u,l=function(e){if(e===i&&g)return g;if(!bc&&e in f)return f[e];switch(e){case Tc:case Cc:case Sc:return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",p=!1,f=e.prototype,h=f[Ic]||f["@@iterator"]||i&&f[i],g=!bc&&h||l(i),v="Array"==t&&f.entries||h;if(v&&(s=dc(v.call(new e)))!==Object.prototype&&s.next&&(dc(s)!==yc&&(pc?pc(s,yc):uc(s[Ic])||gc(s,Ic,Ec)),fc(s,d,!0)),mc&&i==Cc&&h&&h.name!==Cc&&(_c?hc(f,"name",Cc):(p=!0,g=function(){return cc(h,this)})),i)if(c={values:l(Cc),keys:o?g:l(Tc),entries:l(Sc)},a)for(u in c)(bc||p||!(u in f))&&gc(f,u,c[u]);else sc({target:t,proto:!0,forced:bc||p},c);return f[Ic]!==g&&gc(f,Ic,g,{name:i}),vc[t]=g,c},kc=function(e,t){return{value:e,done:t}},wc=fe,Oc=Cs,Dc=Ss,Ac=ar,Rc=on.f,xc=Mc,Lc=kc,Nc=R,Pc="Array Iterator",jc=Ac.set,Uc=Ac.getterFor(Pc),Gc=xc(Array,"Array",(function(e,t){jc(this,{type:Pc,target:wc(e),index:0,kind:t})}),(function(){var e=Uc(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,Lc(void 0,!0)):Lc("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)}),"values"),Vc=Dc.Arguments=Dc.Array;if(Oc("keys"),Oc("values"),Oc("entries"),Nc&&"values"!==Vc.name)try{Rc(Vc,"name",{value:"values"})}catch(uY){}var Fc={exports:{}},Bc={},qc=Bt,Hc=on,zc=q,Kc=function(e,t,n){var r=qc(t);r in e?Hc.f(e,r,zc(0,n)):e[r]=n},Wc=Rr,Yc=jr,Jc=Kc,$c=Array,Xc=Math.max,Zc=function(e,t,n){for(var r=Yc(e),i=Wc(t,r),o=Wc(void 0===n?r:n,r),a=$c(Xc(o-i,0)),s=0;i<o;i++,s++)Jc(a,s,e[i]);return a.length=s,a},Qc=Z,eu=fe,tu=Sr.f,nu=Zc,ru="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Bc.f=function(e){return ru&&"Window"==Qc(e)?function(e){try{return tu(e)}catch(uY){return nu(ru)}}(e):tu(eu(e))};var iu=A((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})),ou=A,au=be,su=Z,cu=iu,uu=Object.isExtensible,lu=ou((function(){uu(1)}))||cu?function(e){return!!au(e)&&(!cu||"ArrayBuffer"!=su(e))&&(!uu||uu(e))}:uu,du=!A((function(){return Object.isExtensible(Object.preventExtensions({}))})),pu=Ei,fu=te,hu=Kn,gu=be,vu=gt,mu=on.f,_u=Sr,yu=Bc,bu=lu,Iu=du,Tu=!1,Cu=bt("meta"),Su=0,Eu=function(e){mu(e,Cu,{value:{objectID:"O"+Su++,weakData:{}}})},Mu=Fc.exports={enable:function(){Mu.enable=function(){},Tu=!0;var e=_u.f,t=fu([].splice),n={};n[Cu]=1,e(n).length&&(_u.f=function(n){for(var r=e(n),i=0,o=r.length;i<o;i++)if(r[i]===Cu){t(r,i,1);break}return r},pu({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:yu.f}))},fastKey:function(e,t){if(!gu(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!vu(e,Cu)){if(!bu(e))return"F";if(!t)return"E";Eu(e)}return e[Cu].objectID},getWeakData:function(e,t){if(!vu(e,Cu)){if(!bu(e))return!0;if(!t)return!1;Eu(e)}return e[Cu].weakData},onFreeze:function(e){return Iu&&Tu&&bu(e)&&!vu(e,Cu)&&Eu(e),e}};hu[Cu]=!0;var ku=Ss,wu=At("iterator"),Ou=Array.prototype,Du=function(e){return void 0!==e&&(ku.Array===e||Ou[wu]===e)},Au=Vi,Ru=Xe,xu=se,Lu=Ss,Nu=At("iterator"),Pu=function(e){if(!xu(e))return Ru(e,Nu)||Ru(e,"@@iterator")||Lu[Au(e)]},ju=P,Uu=Ye,Gu=ln,Vu=He,Fu=Pu,Bu=TypeError,qu=function(e,t){var n=arguments.length<2?Fu(e):t;if(Uu(n))return Gu(ju(n,e));throw Bu(Vu(e)+" is not iterable")},Hu=P,zu=ln,Ku=Xe,Wu=function(e,t,n){var r,i;zu(e);try{if(!(r=Ku(e,"return"))){if("throw"===t)throw n;return n}r=Hu(r,e)}catch(uY){i=!0,r=uY}if("throw"===t)throw n;if(i)throw r;return zu(r),n},Yu=Oi,Ju=P,$u=ln,Xu=He,Zu=Du,Qu=jr,el=Ee,tl=qu,nl=Pu,rl=Wu,il=TypeError,ol=function(e,t){this.stopped=e,this.result=t},al=ol.prototype,sl=function(e,t,n){var r,i,o,a,s,c,u,l=n&&n.that,d=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_RECORD),f=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),g=Yu(t,l),v=function(e){return r&&rl(r,"normal",e),new ol(!0,e)},m=function(e){return d?($u(e),h?g(e[0],e[1],v):g(e[0],e[1])):h?g(e,v):g(e)};if(p)r=e.iterator;else if(f)r=e;else{if(!(i=nl(e)))throw il(Xu(e)+" is not iterable");if(Zu(i)){for(o=0,a=Qu(e);a>o;o++)if((s=m(e[o]))&&el(al,s))return s;return new ol(!1)}r=tl(e,i)}for(c=p?e.next:r.next;!(u=Ju(c,r)).done;){try{s=m(u.value)}catch(uY){rl(r,"throw",uY)}if("object"==typeof s&&s&&el(al,s))return s}return new ol(!1)},cl=Ee,ul=TypeError,ll=function(e,t){if(cl(t,e))return e;throw ul("Incorrect invocation")},dl=At("iterator"),pl=!1;try{var fl=0,hl={next:function(){return{done:!!fl++}},return:function(){pl=!0}};hl[dl]=function(){return this},Array.from(hl,(function(){throw 2}))}catch(uY){}var gl=function(e,t){if(!t&&!pl)return!1;var n=!1;try{var r={};r[dl]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(uY){}return n},vl=me,ml=be,_l=ac,yl=function(e,t,n){var r,i;return _l&&vl(r=t.constructor)&&r!==n&&ml(i=r.prototype)&&i!==n.prototype&&_l(e,i),e},bl=Ei,Il=O,Tl=te,Cl=mi,Sl=Cr,El=Fc.exports,Ml=sl,kl=ll,wl=me,Ol=se,Dl=be,Al=A,Rl=gl,xl=Ks,Ll=yl,Nl=function(e,t,n){var r=-1!==e.indexOf("Map"),i=-1!==e.indexOf("Weak"),o=r?"set":"add",a=Il[e],s=a&&a.prototype,c=a,u={},l=function(e){var t=Tl(s[e]);Sl(s,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!Dl(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return i&&!Dl(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!Dl(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(Cl(e,!wl(a)||!(i||s.forEach&&!Al((function(){(new a).entries().next()})))))c=n.getConstructor(t,e,r,o),El.enable();else if(Cl(e,!0)){var d=new c,p=d[o](i?{}:-0,1)!=d,f=Al((function(){d.has(1)})),h=Rl((function(e){new a(e)})),g=!i&&Al((function(){for(var e=new a,t=5;t--;)e[o](t,t);return!e.has(-0)}));h||((c=t((function(e,t){kl(e,s);var n=Ll(new a,e,c);return Ol(t)||Ml(t,n[o],{that:n,AS_ENTRIES:r}),n}))).prototype=s,s.constructor=c),(f||g)&&(l("delete"),l("has"),r&&l("get")),(g||p)&&l(o),i&&s.clear&&delete s.clear}return u[e]=c,bl({global:!0,constructor:!0,forced:c!=a},u),xl(c,e),i||n.setStrong(c,e,r),c},Pl=Cr,jl=function(e,t,n){for(var r in t)Pl(e,r,t[r],n);return e},Ul=Se,Gl=on,Vl=R,Fl=At("species"),Bl=function(e){var t=Ul(e),n=Gl.f;Vl&&t&&!t[Fl]&&n(t,Fl,{configurable:!0,get:function(){return this}})},ql=on.f,Hl=hs,zl=jl,Kl=Oi,Wl=ll,Yl=se,Jl=sl,$l=Mc,Xl=kc,Zl=Bl,Ql=R,ed=Fc.exports.fastKey,td=ar.set,nd=ar.getterFor,rd={getConstructor:function(e,t,n,r){var i=e((function(e,i){Wl(e,o),td(e,{type:t,index:Hl(null),first:void 0,last:void 0,size:0}),Ql||(e.size=0),Yl(i)||Jl(i,e[r],{that:e,AS_ENTRIES:n})})),o=i.prototype,a=nd(t),s=function(e,t,n){var r,i,o=a(e),s=c(e,t);return s?s.value=n:(o.last=s={index:i=ed(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=s),r&&(r.next=s),Ql?o.size++:e.size++,"F"!==i&&(o.index[i]=s)),e},c=function(e,t){var n,r=a(e),i=ed(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return zl(o,{clear:function(){for(var e=a(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,Ql?e.size=0:this.size=0},delete:function(e){var t=this,n=a(t),r=c(t,e);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),Ql?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=a(this),r=Kl(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!c(this,e)}}),zl(o,n?{get:function(e){var t=c(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),Ql&&ql(o,"size",{get:function(){return a(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=nd(t),o=nd(r);$l(e,t,(function(e,t){td(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?Xl("keys"==t?n.key:"values"==t?n.value:[n.key,n.value],!1):(e.target=void 0,Xl(void 0,!0))}),n?"entries":"values",!n,!0),Zl(t)}};Nl("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),rd);var id=Vi,od=String,ad=function(e){if("Symbol"===id(e))throw TypeError("Cannot convert a Symbol value to a string");return od(e)},sd=te,cd=wr,ud=ad,ld=le,dd=sd("".charAt),pd=sd("".charCodeAt),fd=sd("".slice),hd=function(e){return function(t,n){var r,i,o=ud(ld(t)),a=cd(n),s=o.length;return a<0||a>=s?e?"":void 0:(r=pd(o,a))<55296||r>56319||a+1===s||(i=pd(o,a+1))<56320||i>57343?e?dd(o,a):r:e?fd(o,a,a+2):i-56320+(r-55296<<10)+65536}},gd={codeAt:hd(!1),charAt:hd(!0)},vd=gd.charAt,md=ad,_d=ar,yd=Mc,bd=kc,Id="String Iterator",Td=_d.set,Cd=_d.getterFor(Id);yd(String,"String",(function(e){Td(this,{type:Id,string:md(e),index:0})}),(function(){var e,t=Cd(this),n=t.string,r=t.index;return r>=n.length?bd(void 0,!0):(e=vd(n,r),t.index+=e.length,bd(e,!1))}));var Sd={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Ed=Kt("span").classList,Md=Ed&&Ed.constructor&&Ed.constructor.prototype,kd=Md===Object.prototype?void 0:Md,wd=O,Od=Sd,Dd=kd,Ad=Gc,Rd=Sn,xd=At,Ld=xd("iterator"),Nd=xd("toStringTag"),Pd=Ad.values,jd=function(e,t){if(e){if(e[Ld]!==Pd)try{Rd(e,Ld,Pd)}catch(uY){e[Ld]=Pd}if(e[Nd]||Rd(e,Nd,t),Od[t])for(var n in Ad)if(e[n]!==Ad[n])try{Rd(e,n,Ad[n])}catch(uY){e[n]=Ad[n]}}};for(var Ud in Od)jd(wd[Ud]&&wd[Ud].prototype,Ud);jd(Dd,"DOMTokenList");var Gd=x,Vd=Function.prototype,Fd=Vd.apply,Bd=Vd.call,qd="object"==typeof Reflect&&Reflect.apply||(Gd?Bd.bind(Fd):function(){return Bd.apply(Fd,arguments)}),Hd=te([].slice),zd=TypeError,Kd=function(e,t){if(e<t)throw zd("Not enough arguments");return e},Wd=O,Yd=qd,Jd=me,$d=Hd,Xd=Kd,Zd=/MSIE .\./.test(Me),Qd=Wd.Function,ep=function(e){return Zd?function(t,n){var r=Xd(arguments.length,1)>2,i=Jd(t)?t:Qd(t),o=r?$d(arguments,2):void 0;return e(r?function(){Yd(i,this,o)}:i,n)}:e},tp={setTimeout:ep(Wd.setTimeout),setInterval:ep(Wd.setInterval)},np=tp.setInterval;Ei({global:!0,bind:!0,forced:O.setInterval!==np},{setInterval:np});var rp=tp.setTimeout;Ei({global:!0,bind:!0,forced:O.setTimeout!==rp},{setTimeout:rp}),Nl("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),rd);var ip=R,op=Ai,ap=TypeError,sp=Object.getOwnPropertyDescriptor,cp=ip&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(uY){return uY instanceof TypeError}}(),up=TypeError,lp=function(e){if(e>9007199254740991)throw up("Maximum allowed index exceeded");return e},dp=He,pp=TypeError,fp=function(e,t){if(!delete e[t])throw pp("Cannot delete property "+dp(t)+" of "+dp(e))},hp=Ei,gp=pt,vp=Rr,mp=wr,_p=jr,yp=cp?function(e,t){if(op(e)&&!sp(e,"length").writable)throw ap("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},bp=lp,Ip=so,Tp=Kc,Cp=fp,Sp=bo("splice"),Ep=Math.max,Mp=Math.min;hp({target:"Array",proto:!0,forced:!Sp},{splice:function(e,t){var n,r,i,o,a,s,c=gp(this),u=_p(c),l=vp(e,u),d=arguments.length;for(0===d?n=r=0:1===d?(n=0,r=u-l):(n=d-2,r=Mp(Ep(mp(t),0),u-l)),bp(u+n-r),i=Ip(c,r),o=0;o<r;o++)(a=l+o)in c&&Tp(i,o,c[a]);if(i.length=r,n<r){for(o=l;o<u-r;o++)s=o+n,(a=o+r)in c?c[s]=c[a]:Cp(c,s);for(o=u;o>u-r+n;o--)Cp(c,o-1)}else if(n>r)for(o=u-r;o>l;o--)s=o+n-1,(a=o+r-1)in c?c[s]=c[a]:Cp(c,s);for(o=0;o<n;o++)c[o+l]=arguments[o+2];return yp(c,u-r+n),i}});var kp=A,wp=function(e,t){var n=[][e];return!!n&&kp((function(){n.call(null,t||function(){return 1},1)}))},Op=vo.forEach,Dp=wp("forEach")?[].forEach:function(e){return Op(this,e,arguments.length>1?arguments[1]:void 0)};Ei({target:"Array",proto:!0,forced:[].forEach!=Dp},{forEach:Dp});var Ap=O,Rp=Sd,xp=kd,Lp=Dp,Np=Sn,Pp=function(e){if(e&&e.forEach!==Lp)try{Np(e,"forEach",Lp)}catch(uY){e.forEach=Lp}};for(var jp in Rp)Rp[jp]&&Pp(Ap[jp]&&Ap[jp].prototype);Pp(xp);var Up=Ei,Gp=ae,Vp=fe,Fp=wp,Bp=te([].join),qp=Gp!=Object,Hp=Fp("join",",");Up({target:"Array",proto:!0,forced:qp||!Hp},{join:function(e){return Bp(Vp(this),void 0===e?",":e)}});var zp=Ei,Kp=A,Wp=Ai,Yp=be,Jp=pt,$p=jr,Xp=lp,Zp=Kc,Qp=so,ef=bo,tf=xe,nf=At("isConcatSpreadable"),rf=tf>=51||!Kp((function(){var e=[];return e[nf]=!1,e.concat()[0]!==e})),of=ef("concat"),af=function(e){if(!Yp(e))return!1;var t=e[nf];return void 0!==t?!!t:Wp(e)};zp({target:"Array",proto:!0,arity:1,forced:!rf||!of},{concat:function(e){var t,n,r,i,o,a=Jp(this),s=Qp(a,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(af(o=-1===t?a:arguments[t]))for(i=$p(o),Xp(c+i),n=0;n<i;n++,c++)n in o&&Zp(s,c,o[n]);else Xp(c+1),Zp(s,c++,o);return s.length=c,s}});var sf=te,cf=Cr,uf=Date.prototype,lf="Invalid Date",df="toString",pf=sf(uf.toString),ff=sf(uf.getTime);String(new Date(NaN))!=lf&&cf(uf,df,(function(){var e=ff(this);return e==e?pf(this):lf}));var hf=wr,gf=ad,vf=le,mf=RangeError,_f=function(e){var t=gf(vf(this)),n="",r=hf(e);if(r<0||1/0==r)throw mf("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n},yf=te,bf=Nr,If=ad,Tf=le,Cf=yf(_f),Sf=yf("".slice),Ef=Math.ceil,Mf=function(e){return function(t,n,r){var i,o,a=If(Tf(t)),s=bf(n),c=a.length,u=void 0===r?" ":If(r);return s<=c||""==u?a:((o=Cf(u,Ef((i=s-c)/u.length))).length>i&&(o=Sf(o,0,i)),e?a+o:o+a)}},kf={start:Mf(!1),end:Mf(!0)},wf=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(Me),Of=kf.start;Ei({target:"String",proto:!0,forced:wf},{padStart:function(e){return Of(this,e,arguments.length>1?arguments[1]:void 0)}});var Df=ln,Af=function(){var e=Df(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},Rf=A,xf=O.RegExp,Lf=Rf((function(){var e=xf("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),Nf=Lf||Rf((function(){return!xf("a","y").sticky})),Pf={BROKEN_CARET:Lf||Rf((function(){var e=xf("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),MISSED_STICKY:Nf,UNSUPPORTED_Y:Lf},jf=A,Uf=O.RegExp,Gf=jf((function(){var e=Uf(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),Vf=A,Ff=O.RegExp,Bf=Vf((function(){var e=Ff("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),qf=P,Hf=te,zf=ad,Kf=Af,Wf=Pf,Yf=nt.exports,Jf=hs,$f=ar.get,Xf=Gf,Zf=Bf,Qf=Yf("native-string-replace",String.prototype.replace),eh=RegExp.prototype.exec,th=eh,nh=Hf("".charAt),rh=Hf("".indexOf),ih=Hf("".replace),oh=Hf("".slice),ah=function(){var e=/a/,t=/b*/g;return qf(eh,e,"a"),qf(eh,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),sh=Wf.BROKEN_CARET,ch=void 0!==/()??/.exec("")[1];(ah||ch||sh||Xf||Zf)&&(th=function(e){var t,n,r,i,o,a,s,c=this,u=$f(c),l=zf(e),d=u.raw;if(d)return d.lastIndex=c.lastIndex,t=qf(th,d,l),c.lastIndex=d.lastIndex,t;var p=u.groups,f=sh&&c.sticky,h=qf(Kf,c),g=c.source,v=0,m=l;if(f&&(h=ih(h,"y",""),-1===rh(h,"g")&&(h+="g"),m=oh(l,c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==nh(l,c.lastIndex-1))&&(g="(?: "+g+")",m=" "+m,v++),n=new RegExp("^(?:"+g+")",h)),ch&&(n=new RegExp("^"+g+"$(?!\\s)",h)),ah&&(r=c.lastIndex),i=qf(eh,f?n:c,m),f?i?(i.input=oh(i.input,v),i[0]=oh(i[0],v),i.index=c.lastIndex,c.lastIndex+=i[0].length):c.lastIndex=0:ah&&i&&(c.lastIndex=c.global?i.index+i[0].length:r),ch&&i&&i.length>1&&qf(Qf,i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&p)for(i.groups=a=Jf(null),o=0;o<p.length;o++)a[(s=p[o])[0]]=i[s[1]];return i});var uh=th;Ei({target:"RegExp",proto:!0,forced:/./.exec!==uh},{exec:uh});var lh=te,dh=Cr,ph=uh,fh=A,hh=At,gh=Sn,vh=hh("species"),mh=RegExp.prototype,_h=function(e,t,n,r){var i=hh(e),o=!fh((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),a=o&&!fh((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[vh]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return t=!0,null},n[i](""),!t}));if(!o||!a||n){var s=lh(/./[i]),c=t(i,""[e],(function(e,t,n,r,i){var a=lh(e),c=t.exec;return c===ph||c===mh.exec?o&&!i?{done:!0,value:s(t,n,r)}:{done:!0,value:a(n,t,r)}:{done:!1}}));dh(String.prototype,e,c[0]),dh(mh,i,c[1])}r&&gh(mh[i],"sham",!0)},yh=gd.charAt,bh=function(e,t,n){return t+(n?yh(e,t).length:1)},Ih=te,Th=pt,Ch=Math.floor,Sh=Ih("".charAt),Eh=Ih("".replace),Mh=Ih("".slice),kh=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,wh=/\$([$&'`]|\d{1,2})/g,Oh=P,Dh=ln,Ah=me,Rh=Z,xh=uh,Lh=TypeError,Nh=function(e,t){var n=e.exec;if(Ah(n)){var r=Oh(n,e,t);return null!==r&&Dh(r),r}if("RegExp"===Rh(e))return Oh(xh,e,t);throw Lh("RegExp#exec called on incompatible receiver")},Ph=qd,jh=P,Uh=te,Gh=_h,Vh=A,Fh=ln,Bh=me,qh=se,Hh=wr,zh=Nr,Kh=ad,Wh=le,Yh=bh,Jh=Xe,$h=function(e,t,n,r,i,o){var a=n+e.length,s=r.length,c=wh;return void 0!==i&&(i=Th(i),c=kh),Eh(o,c,(function(o,c){var u;switch(Sh(c,0)){case"$":return"$";case"&":return e;case"`":return Mh(t,0,n);case"'":return Mh(t,a);case"<":u=i[Mh(c,1,-1)];break;default:var l=+c;if(0===l)return o;if(l>s){var d=Ch(l/10);return 0===d?o:d<=s?void 0===r[d-1]?Sh(c,1):r[d-1]+Sh(c,1):o}u=r[l-1]}return void 0===u?"":u}))},Xh=Nh,Zh=At("replace"),Qh=Math.max,eg=Math.min,tg=Uh([].concat),ng=Uh([].push),rg=Uh("".indexOf),ig=Uh("".slice),og="$0"==="a".replace(/./,"$0"),ag=!!/./[Zh]&&""===/./[Zh]("a","$0"),sg=!Vh((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));Gh("replace",(function(e,t,n){var r=ag?"$":"$0";return[function(e,n){var r=Wh(this),i=qh(e)?void 0:Jh(e,Zh);return i?jh(i,e,r,n):jh(t,Kh(r),e,n)},function(e,i){var o=Fh(this),a=Kh(e);if("string"==typeof i&&-1===rg(i,r)&&-1===rg(i,"$<")){var s=n(t,o,a,i);if(s.done)return s.value}var c=Bh(i);c||(i=Kh(i));var u=o.global;if(u){var l=o.unicode;o.lastIndex=0}for(var d=[];;){var p=Xh(o,a);if(null===p)break;if(ng(d,p),!u)break;""===Kh(p[0])&&(o.lastIndex=Yh(a,zh(o.lastIndex),l))}for(var f,h="",g=0,v=0;v<d.length;v++){for(var m=Kh((p=d[v])[0]),_=Qh(eg(Hh(p.index),a.length),0),y=[],b=1;b<p.length;b++)ng(y,void 0===(f=p[b])?f:String(f));var I=p.groups;if(c){var T=tg([m],y,_,a);void 0!==I&&ng(T,I);var C=Kh(Ph(i,void 0,T))}else C=$h(m,a,_,y,I,i);_>=g&&(h+=ig(a,g,_)+C,g=_+m.length)}return h+ig(a,g)}]}),!sg||!og||ag);var cg=P,ug=gt,lg=Ee,dg=Af,pg=RegExp.prototype,fg=function(e){var t=e.flags;return void 0!==t||"flags"in pg||ug(e,"flags")||!lg(pg,e)?t:cg(dg,e)},hg=An.PROPER,gg=Cr,vg=ln,mg=ad,_g=A,yg=fg,bg="toString",Ig=RegExp.prototype.toString,Tg=_g((function(){return"/a/b"!=Ig.call({source:"a",flags:"b"})})),Cg=hg&&Ig.name!=bg;(Tg||Cg)&&gg(RegExp.prototype,bg,(function(){var e=vg(this);return"/"+mg(e.source)+"/"+mg(yg(e))}),{unsafe:!0});var Sg=A,Eg=At("iterator"),Mg=!Sg((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[Eg]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),kg=Zc,wg=Math.floor,Og=function(e,t){var n=e.length,r=wg(n/2);return n<8?Dg(e,t):Ag(e,Og(kg(e,0,r),t),Og(kg(e,r),t),t)},Dg=function(e,t){for(var n,r,i=e.length,o=1;o<i;){for(r=o,n=e[o];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},Ag=function(e,t,n,r){for(var i=t.length,o=n.length,a=0,s=0;a<i||s<o;)e[a+s]=a<i&&s<o?r(t[a],n[s])<=0?t[a++]:n[s++]:a<i?t[a++]:n[s++];return e},Rg=Og,xg=Ei,Lg=O,Ng=P,Pg=te,jg=R,Ug=Mg,Gg=Cr,Vg=jl,Fg=Ks,Bg=Qs,qg=ar,Hg=ll,zg=me,Kg=gt,Wg=Oi,Yg=Vi,Jg=ln,$g=be,Xg=ad,Zg=hs,Qg=q,ev=qu,tv=Pu,nv=Kd,rv=Rg,iv=At("iterator"),ov="URLSearchParams",av="URLSearchParamsIterator",sv=qg.set,cv=qg.getterFor(ov),uv=qg.getterFor(av),lv=Object.getOwnPropertyDescriptor,dv=function(e){if(!jg)return Lg[e];var t=lv(Lg,e);return t&&t.value},pv=dv("fetch"),fv=dv("Request"),hv=dv("Headers"),gv=fv&&fv.prototype,vv=hv&&hv.prototype,mv=Lg.RegExp,_v=Lg.TypeError,yv=Lg.decodeURIComponent,bv=Lg.encodeURIComponent,Iv=Pg("".charAt),Tv=Pg([].join),Cv=Pg([].push),Sv=Pg("".replace),Ev=Pg([].shift),Mv=Pg([].splice),kv=Pg("".split),wv=Pg("".slice),Ov=/\+/g,Dv=Array(4),Av=function(e){return Dv[e-1]||(Dv[e-1]=mv("((?:%[\\da-f]{2}){"+e+"})","gi"))},Rv=function(e){try{return yv(e)}catch(uY){return e}},xv=function(e){var t=Sv(e,Ov," "),n=4;try{return yv(t)}catch(uY){for(;n;)t=Sv(t,Av(n--),Rv);return t}},Lv=/[!'()~]|%20/g,Nv={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Pv=function(e){return Nv[e]},jv=function(e){return Sv(bv(e),Lv,Pv)},Uv=Bg((function(e,t){sv(this,{type:av,iterator:ev(cv(e).entries),kind:t})}),"Iterator",(function(){var e=uv(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),!0),Gv=function(e){this.entries=[],this.url=null,void 0!==e&&($g(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===Iv(e,0)?wv(e,1):e:Xg(e)))};Gv.prototype={type:ov,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,i,o,a,s,c=tv(e);if(c)for(n=(t=ev(e,c)).next;!(r=Ng(n,t)).done;){if(o=(i=ev(Jg(r.value))).next,(a=Ng(o,i)).done||(s=Ng(o,i)).done||!Ng(o,i).done)throw _v("Expected sequence with length 2");Cv(this.entries,{key:Xg(a.value),value:Xg(s.value)})}else for(var u in e)Kg(e,u)&&Cv(this.entries,{key:u,value:Xg(e[u])})},parseQuery:function(e){if(e)for(var t,n,r=kv(e,"&"),i=0;i<r.length;)(t=r[i++]).length&&(n=kv(t,"="),Cv(this.entries,{key:xv(Ev(n)),value:xv(Tv(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],Cv(n,jv(e.key)+"="+jv(e.value));return Tv(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Vv=function(){Hg(this,Fv);var e=arguments.length>0?arguments[0]:void 0;sv(this,new Gv(e))},Fv=Vv.prototype;if(Vg(Fv,{append:function(e,t){nv(arguments.length,2);var n=cv(this);Cv(n.entries,{key:Xg(e),value:Xg(t)}),n.updateURL()},delete:function(e){nv(arguments.length,1);for(var t=cv(this),n=t.entries,r=Xg(e),i=0;i<n.length;)n[i].key===r?Mv(n,i,1):i++;t.updateURL()},get:function(e){nv(arguments.length,1);for(var t=cv(this).entries,n=Xg(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){nv(arguments.length,1);for(var t=cv(this).entries,n=Xg(e),r=[],i=0;i<t.length;i++)t[i].key===n&&Cv(r,t[i].value);return r},has:function(e){nv(arguments.length,1);for(var t=cv(this).entries,n=Xg(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){nv(arguments.length,1);for(var n,r=cv(this),i=r.entries,o=!1,a=Xg(e),s=Xg(t),c=0;c<i.length;c++)(n=i[c]).key===a&&(o?Mv(i,c--,1):(o=!0,n.value=s));o||Cv(i,{key:a,value:s}),r.updateURL()},sort:function(){var e=cv(this);rv(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=cv(this).entries,r=Wg(e,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new Uv(this,"keys")},values:function(){return new Uv(this,"values")},entries:function(){return new Uv(this,"entries")}},{enumerable:!0}),Gg(Fv,iv,Fv.entries,{name:"entries"}),Gg(Fv,"toString",(function(){return cv(this).serialize()}),{enumerable:!0}),Fg(Vv,ov),xg({global:!0,constructor:!0,forced:!Ug},{URLSearchParams:Vv}),!Ug&&zg(hv)){var Bv=Pg(vv.has),qv=Pg(vv.set),Hv=function(e){if($g(e)){var t,n=e.body;if(Yg(n)===ov)return t=e.headers?new hv(e.headers):new hv,Bv(t,"content-type")||qv(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Zg(e,{body:Qg(0,Xg(n)),headers:Qg(0,t)})}return e};if(zg(pv)&&xg({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return pv(e,arguments.length>1?Hv(arguments[1]):{})}}),zg(fv)){var zv=function(e){return Hg(this,gv),new fv(e,arguments.length>1?Hv(arguments[1]):{})};gv.constructor=zv,zv.prototype=gv,xg({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:zv})}}var Kv={URLSearchParams:Vv,getState:cv},Wv=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},Yv=P,Jv=ln,$v=se,Xv=le,Zv=Wv,Qv=ad,em=Xe,tm=Nh;_h("search",(function(e,t,n){return[function(t){var n=Xv(this),r=$v(t)?void 0:em(t,e);return r?Yv(r,t,n):new RegExp(t)[e](Qv(n))},function(e){var r=Jv(this),i=Qv(e),o=n(t,r,i);if(o.done)return o.value;var a=r.lastIndex;Zv(a,0)||(r.lastIndex=0);var s=tm(r,i);return Zv(r.lastIndex,a)||(r.lastIndex=a),null===s?-1:s.index}]})),(new Date).getTime();var nm=0,rm=function(){return(new Date).getTime()+nm},im=function(){var e=new Date;return e.setTime(rm()),e.toLocaleString()},om=P,am=ln,sm=se,cm=Nr,um=ad,lm=le,dm=Xe,pm=bh,fm=Nh;_h("match",(function(e,t,n){return[function(t){var n=lm(this),r=sm(t)?void 0:dm(t,e);return r?om(r,t,n):new RegExp(t)[e](um(n))},function(e){var r=am(this),i=um(e),o=n(t,r,i);if(o.done)return o.value;if(!r.global)return fm(r,i);var a=r.unicode;r.lastIndex=0;for(var s,c=[],u=0;null!==(s=fm(r,i));){var l=um(s[0]);c[u]=l,""===l&&(r.lastIndex=pm(i,cm(r.lastIndex),a)),u++}return 0===u?null:c}]}));var hm=be,gm=Z,vm=At("match"),mm=function(e){var t;return hm(e)&&(void 0!==(t=e[vm])?!!t:"RegExp"==gm(e))},_m=on.f,ym=R,bm=O,Im=te,Tm=mi,Cm=yl,Sm=Sn,Em=Sr.f,Mm=Ee,km=mm,wm=ad,Om=fg,Dm=Pf,Am=function(e,t,n){n in e||_m(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})},Rm=Cr,xm=A,Lm=gt,Nm=ar.enforce,Pm=Bl,jm=Gf,Um=Bf,Gm=At("match"),Vm=bm.RegExp,Fm=Vm.prototype,Bm=bm.SyntaxError,qm=Im(Fm.exec),Hm=Im("".charAt),zm=Im("".replace),Km=Im("".indexOf),Wm=Im("".slice),Ym=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Jm=/a/g,$m=/a/g,Xm=new Vm(Jm)!==Jm,Zm=Dm.MISSED_STICKY,Qm=Dm.UNSUPPORTED_Y,e_=ym&&(!Xm||Zm||jm||Um||xm((function(){return $m[Gm]=!1,Vm(Jm)!=Jm||Vm($m)==$m||"/a/i"!=Vm(Jm,"i")})));if(Tm("RegExp",e_)){for(var t_=function(e,t){var n,r,i,o,a,s,c=Mm(Fm,this),u=km(e),l=void 0===t,d=[],p=e;if(!c&&u&&l&&e.constructor===t_)return e;if((u||Mm(Fm,e))&&(e=e.source,l&&(t=Om(p))),e=void 0===e?"":wm(e),t=void 0===t?"":wm(t),p=e,jm&&"dotAll"in Jm&&(r=!!t&&Km(t,"s")>-1)&&(t=zm(t,/s/g,"")),n=t,Zm&&"sticky"in Jm&&(i=!!t&&Km(t,"y")>-1)&&Qm&&(t=zm(t,/y/g,"")),Um&&(o=function(e){for(var t,n=e.length,r=0,i="",o=[],a={},s=!1,c=!1,u=0,l="";r<=n;r++){if("\\"===(t=Hm(e,r)))t+=Hm(e,++r);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:qm(Ym,Wm(e,r+1))&&(r+=2,c=!0),i+=t,u++;continue;case">"===t&&c:if(""===l||Lm(a,l))throw new Bm("Invalid capture group name");a[l]=!0,o[o.length]=[l,u],c=!1,l="";continue}c?l+=t:i+=t}return[i,o]}(e),e=o[0],d=o[1]),a=Cm(Vm(e,t),c?this:Fm,t_),(r||i||d.length)&&(s=Nm(a),r&&(s.dotAll=!0,s.raw=t_(function(e){for(var t,n=e.length,r=0,i="",o=!1;r<=n;r++)"\\"!==(t=Hm(e,r))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+Hm(e,++r);return i}(e),n)),i&&(s.sticky=!0),d.length&&(s.groups=d)),e!==p)try{Sm(a,"source",""===p?"(?:)":p)}catch(uY){}return a},n_=Em(Vm),r_=0;n_.length>r_;)Am(t_,Vm,n_[r_++]);Fm.constructor=t_,t_.prototype=Fm,Rm(bm,"RegExp",t_,{constructor:!0})}Pm("RegExp");var i_=te(1..valueOf),o_="\t\n\v\f\r                　\u2028\u2029\ufeff",a_=le,s_=ad,c_=te("".replace),u_="[\t\n\v\f\r                　\u2028\u2029\ufeff]",l_=RegExp("^"+u_+u_+"*"),d_=RegExp(u_+u_+"*$"),p_=function(e){return function(t){var n=s_(a_(t));return 1&e&&(n=c_(n,l_,"")),2&e&&(n=c_(n,d_,"")),n}},f_={start:p_(1),end:p_(2),trim:p_(3)},h_=R,g_=O,v_=te,m_=mi,__=Cr,y_=gt,b_=yl,I_=Ee,T_=Be,C_=Gt,S_=A,E_=Sr.f,M_=D.f,k_=on.f,w_=i_,O_=f_.trim,D_="Number",A_=g_.Number,R_=A_.prototype,x_=g_.TypeError,L_=v_("".slice),N_=v_("".charCodeAt),P_=function(e){var t=C_(e,"number");return"bigint"==typeof t?t:j_(t)},j_=function(e){var t,n,r,i,o,a,s,c,u=C_(e,"number");if(T_(u))throw x_("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=O_(u),43===(t=N_(u,0))||45===t){if(88===(n=N_(u,2))||120===n)return NaN}else if(48===t){switch(N_(u,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(a=(o=L_(u,2)).length,s=0;s<a;s++)if((c=N_(o,s))<48||c>i)return NaN;return parseInt(o,r)}return+u};if(m_(D_,!A_(" 0o1")||!A_("0b1")||A_("+0x1"))){for(var U_,G_=function(e){var t=arguments.length<1?0:A_(P_(e)),n=this;return I_(R_,n)&&S_((function(){w_(n)}))?b_(Object(t),n,G_):t},V_=h_?E_(A_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),F_=0;V_.length>F_;F_++)y_(A_,U_=V_[F_])&&!y_(G_,U_)&&k_(G_,U_,M_(A_,U_));G_.prototype=R_,R_.constructor=G_,__(g_,D_,G_,{constructor:!0})}var B_=Br.includes,q_=Cs;Ei({target:"Array",proto:!0,forced:A((function(){return!Array(1).includes()}))},{includes:function(e){return B_(this,e,arguments.length>1?arguments[1]:void 0)}}),q_("includes");var H_=mm,z_=TypeError,K_=function(e){if(H_(e))throw z_("The method doesn't accept regular expressions");return e},W_=At("match"),Y_=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[W_]=!1,"/./"[e](t)}catch(i){}}return!1},J_=Ei,$_=K_,X_=le,Z_=ad,Q_=Y_,ey=te("".indexOf);J_({target:"String",proto:!0,forced:!Q_("includes")},{includes:function(e){return!!~ey(Z_(X_(this)),Z_($_(e)),arguments.length>1?arguments[1]:void 0)}});var ty=Ei,ny=Br.indexOf,ry=wp,iy=te([].indexOf),oy=!!iy&&1/iy([1],1,-0)<0,ay=ry("indexOf");ty({target:"Array",proto:!0,forced:oy||!ay},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return oy?iy(this,e,t)||0:ny(this,e,t)}});var sy=pt,cy=xs,uy=Es;Ei({target:"Object",stat:!0,forced:A((function(){cy(1)})),sham:!uy},{getPrototypeOf:function(e){return cy(sy(e))}});var ly=qd,dy=Ye,py=ln;Ei({target:"Reflect",stat:!0,forced:!A((function(){Reflect.apply((function(){}))}))},{apply:function(e,t,n){return ly(dy(e),t,py(n))}});var fy=R,hy=An.EXISTS,gy=te,vy=on.f,my=Function.prototype,_y=gy(my.toString),yy=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,by=gy(yy.exec);fy&&!hy&&vy(my,"name",{configurable:!0,get:function(){try{return by(yy,_y(this))[1]}catch(uY){return""}}});var Iy=Ei,Ty=Date,Cy=te(Ty.prototype.getTime);Iy({target:"Date",stat:!0},{now:function(){return Cy(new Ty)}});var Sy,Ey,My,ky,wy="process"==Z(O.process),Oy=eo,Dy=He,Ay=TypeError,Ry=function(e){if(Oy(e))return e;throw Ay(Dy(e)+" is not a constructor")},xy=ln,Ly=Ry,Ny=se,Py=At("species"),jy=function(e,t){var n,r=xy(e).constructor;return void 0===r||Ny(n=xy(r)[Py])?t:Ly(n)},Uy=/(?:ipad|iphone|ipod).*applewebkit/i.test(Me),Gy=O,Vy=qd,Fy=Oi,By=me,qy=gt,Hy=A,zy=ns,Ky=Hd,Wy=Kt,Yy=Kd,Jy=Uy,$y=wy,Xy=Gy.setImmediate,Zy=Gy.clearImmediate,Qy=Gy.process,eb=Gy.Dispatch,tb=Gy.Function,nb=Gy.MessageChannel,rb=Gy.String,ib=0,ob={},ab="onreadystatechange";try{Sy=Gy.location}catch(uY){}var sb=function(e){if(qy(ob,e)){var t=ob[e];delete ob[e],t()}},cb=function(e){return function(){sb(e)}},ub=function(e){sb(e.data)},lb=function(e){Gy.postMessage(rb(e),Sy.protocol+"//"+Sy.host)};Xy&&Zy||(Xy=function(e){Yy(arguments.length,1);var t=By(e)?e:tb(e),n=Ky(arguments,1);return ob[++ib]=function(){Vy(t,void 0,n)},Ey(ib),ib},Zy=function(e){delete ob[e]},$y?Ey=function(e){Qy.nextTick(cb(e))}:eb&&eb.now?Ey=function(e){eb.now(cb(e))}:nb&&!Jy?(ky=(My=new nb).port2,My.port1.onmessage=ub,Ey=Fy(ky.postMessage,ky)):Gy.addEventListener&&By(Gy.postMessage)&&!Gy.importScripts&&Sy&&"file:"!==Sy.protocol&&!Hy(lb)?(Ey=lb,Gy.addEventListener("message",ub,!1)):Ey=ab in Wy("script")?function(e){zy.appendChild(Wy("script")).onreadystatechange=function(){zy.removeChild(this),sb(e)}}:function(e){setTimeout(cb(e),0)});var db,pb,fb,hb,gb,vb,mb,_b,yb={set:Xy,clear:Zy},bb=O,Ib=/ipad|iphone|ipod/i.test(Me)&&void 0!==bb.Pebble,Tb=/web0s(?!.*chrome)/i.test(Me),Cb=O,Sb=Oi,Eb=D.f,Mb=yb.set,kb=Uy,wb=Ib,Ob=Tb,Db=wy,Ab=Cb.MutationObserver||Cb.WebKitMutationObserver,Rb=Cb.document,xb=Cb.process,Lb=Cb.Promise,Nb=Eb(Cb,"queueMicrotask"),Pb=Nb&&Nb.value;Pb||(db=function(){var e,t;for(Db&&(e=xb.domain)&&e.exit();pb;){t=pb.fn,pb=pb.next;try{t()}catch(uY){throw pb?hb():fb=void 0,uY}}fb=void 0,e&&e.enter()},kb||Db||Ob||!Ab||!Rb?!wb&&Lb&&Lb.resolve?((mb=Lb.resolve(void 0)).constructor=Lb,_b=Sb(mb.then,mb),hb=function(){_b(db)}):Db?hb=function(){xb.nextTick(db)}:(Mb=Sb(Mb,Cb),hb=function(){Mb(db)}):(gb=!0,vb=Rb.createTextNode(""),new Ab(db).observe(vb,{characterData:!0}),hb=function(){vb.data=gb=!gb}));var jb=Pb||function(e){var t={fn:e,next:void 0};fb&&(fb.next=t),pb||(pb=t,hb()),fb=t},Ub=O,Gb=function(e){try{return{error:!1,value:e()}}catch(uY){return{error:!0,value:uY}}},Vb=function(){this.head=null,this.tail=null};Vb.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var Fb=Vb,Bb=O.Promise,qb="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Hb=!qb&&!wy&&"object"==typeof window&&"object"==typeof document,zb=O,Kb=Bb,Wb=me,Yb=mi,Jb=Un,$b=At,Xb=Hb,Zb=qb,Qb=xe;Kb&&Kb.prototype;var eI=$b("species"),tI=!1,nI=Wb(zb.PromiseRejectionEvent),rI=Yb("Promise",(function(){var e=Jb(Kb),t=e!==String(Kb);if(!t&&66===Qb)return!0;if(!Qb||Qb<51||!/native code/.test(e)){var n=new Kb((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[eI]=r,!(tI=n.then((function(){}))instanceof r))return!0}return!t&&(Xb||Zb)&&!nI})),iI={CONSTRUCTOR:rI,REJECTION_EVENT:nI,SUBCLASSING:tI},oI={},aI=Ye,sI=TypeError,cI=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw sI("Bad Promise constructor");t=e,n=r})),this.resolve=aI(t),this.reject=aI(n)};oI.f=function(e){return new cI(e)};var uI,lI,dI,pI=Ei,fI=wy,hI=O,gI=P,vI=Cr,mI=ac,_I=Ks,yI=Bl,bI=Ye,II=me,TI=be,CI=ll,SI=jy,EI=yb.set,MI=jb,kI=function(e,t){var n=Ub.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))},wI=Gb,OI=Fb,DI=ar,AI=Bb,RI=oI,xI="Promise",LI=iI.CONSTRUCTOR,NI=iI.REJECTION_EVENT,PI=iI.SUBCLASSING,jI=DI.getterFor(xI),UI=DI.set,GI=AI&&AI.prototype,VI=AI,FI=GI,BI=hI.TypeError,qI=hI.document,HI=hI.process,zI=RI.f,KI=zI,WI=!!(qI&&qI.createEvent&&hI.dispatchEvent),YI="unhandledrejection",JI=function(e){var t;return!(!TI(e)||!II(t=e.then))&&t},$I=function(e,t){var n,r,i,o=t.value,a=1==t.state,s=a?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{s?(a||(2===t.rejection&&tT(t),t.rejection=1),!0===s?n=o:(l&&l.enter(),n=s(o),l&&(l.exit(),i=!0)),n===e.promise?u(BI("Promise-chain cycle")):(r=JI(n))?gI(r,n,c,u):c(n)):u(o)}catch(uY){l&&!i&&l.exit(),u(uY)}},XI=function(e,t){e.notified||(e.notified=!0,MI((function(){for(var n,r=e.reactions;n=r.get();)$I(n,e);e.notified=!1,t&&!e.rejection&&QI(e)})))},ZI=function(e,t,n){var r,i;WI?((r=qI.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),hI.dispatchEvent(r)):r={promise:t,reason:n},!NI&&(i=hI["on"+e])?i(r):e===YI&&kI("Unhandled promise rejection",n)},QI=function(e){gI(EI,hI,(function(){var t,n=e.facade,r=e.value;if(eT(e)&&(t=wI((function(){fI?HI.emit("unhandledRejection",r,n):ZI(YI,n,r)})),e.rejection=fI||eT(e)?2:1,t.error))throw t.value}))},eT=function(e){return 1!==e.rejection&&!e.parent},tT=function(e){gI(EI,hI,(function(){var t=e.facade;fI?HI.emit("rejectionHandled",t):ZI("rejectionhandled",t,e.value)}))},nT=function(e,t,n){return function(r){e(t,r,n)}},rT=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,XI(e,!0))},iT=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw BI("Promise can't be resolved itself");var r=JI(t);r?MI((function(){var n={done:!1};try{gI(r,t,nT(iT,n,e),nT(rT,n,e))}catch(uY){rT(n,uY,e)}})):(e.value=t,e.state=1,XI(e,!1))}catch(uY){rT({done:!1},uY,e)}}};if(LI&&(FI=(VI=function(e){CI(this,FI),bI(e),gI(uI,this);var t=jI(this);try{e(nT(iT,t),nT(rT,t))}catch(uY){rT(t,uY)}}).prototype,(uI=function(e){UI(this,{type:xI,done:!1,notified:!1,parent:!1,reactions:new OI,rejection:!1,state:0,value:void 0})}).prototype=vI(FI,"then",(function(e,t){var n=jI(this),r=zI(SI(this,VI));return n.parent=!0,r.ok=!II(e)||e,r.fail=II(t)&&t,r.domain=fI?HI.domain:void 0,0==n.state?n.reactions.add(r):MI((function(){$I(r,n)})),r.promise})),lI=function(){var e=new uI,t=jI(e);this.promise=e,this.resolve=nT(iT,t),this.reject=nT(rT,t)},RI.f=zI=function(e){return e===VI||void 0===e?new lI(e):KI(e)},II(AI)&&GI!==Object.prototype)){dI=GI.then,PI||vI(GI,"then",(function(e,t){var n=this;return new VI((function(e,t){gI(dI,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete GI.constructor}catch(uY){}mI&&mI(GI,FI)}pI({global:!0,constructor:!0,wrap:!0,forced:LI},{Promise:VI}),_I(VI,xI,!1),yI(xI);var oT=Bb,aT=iI.CONSTRUCTOR||!gl((function(e){oT.all(e).then(void 0,(function(){}))})),sT=P,cT=Ye,uT=oI,lT=Gb,dT=sl;Ei({target:"Promise",stat:!0,forced:aT},{all:function(e){var t=this,n=uT.f(t),r=n.resolve,i=n.reject,o=lT((function(){var n=cT(t.resolve),o=[],a=0,s=1;dT(e,(function(e){var c=a++,u=!1;s++,sT(n,t,e).then((function(e){u||(u=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise}});var pT=Ei,fT=iI.CONSTRUCTOR,hT=Bb,gT=Se,vT=me,mT=Cr,_T=hT&&hT.prototype;if(pT({target:"Promise",proto:!0,forced:fT,real:!0},{catch:function(e){return this.then(void 0,e)}}),vT(hT)){var yT=gT("Promise").prototype.catch;_T.catch!==yT&&mT(_T,"catch",yT,{unsafe:!0})}var bT=P,IT=Ye,TT=oI,CT=Gb,ST=sl;Ei({target:"Promise",stat:!0,forced:aT},{race:function(e){var t=this,n=TT.f(t),r=n.reject,i=CT((function(){var i=IT(t.resolve);ST(e,(function(e){bT(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var ET=P,MT=oI;Ei({target:"Promise",stat:!0,forced:iI.CONSTRUCTOR},{reject:function(e){var t=MT.f(this);return ET(t.reject,void 0,e),t.promise}});var kT=ln,wT=be,OT=oI,DT=function(e,t){if(kT(e),wT(t)&&t.constructor===e)return t;var n=OT.f(e);return(0,n.resolve)(t),n.promise},AT=Ei,RT=iI.CONSTRUCTOR,xT=DT;Se("Promise"),AT({target:"Promise",stat:!0,forced:RT},{resolve:function(e){return xT(this,e)}});var LT=pt,NT=Ya;Ei({target:"Object",stat:!0,forced:A((function(){NT(1)}))},{keys:function(e){return NT(LT(e))}});var PT="canvas",jT="audio",UT="video",GT="screen",VT="small",FT="big",BT="auxiliary",qT="aux",HT="smallVideo",zT="user",KT="environment",WT="mute",YT="unmute",JT="ended",$T="playing",XT="pause",ZT="error",QT="loadeddata",eC="audioinput",tC="videoinput",nC="detail",rC="text",iC="main",oC="backup",aC="banned",sC="kick",cC="user_time_out",uC="room_disband",lC="sei-message",dC="PLAYING",pC="PAUSED",fC="STOPPED",hC="inactive",gC="sendonly",vC="recvonly",mC="add",_C="remove",yC="replace",bC="track",IC="wss://trtc.rtc.qq.com",TC="wss://webrtc.qq.com",CC="qcloud",SC="trtc",EC="webrtc",MC="",kC="jssdk_log",wC="jssdk_event",OC="jssdk_new_endreport",DC=function(e){return MC=e},AC=1,RC=2,xC="live",LC=20,NC=21,PC="anchor",jC="audience",UC="5Y2wZK8nANNAoVw6dSAHVjNxrD1ObBM2kBPV",GC="224d130c-7b5c-415b-aaa2-79c2eb5a6df2",VC=2,FC=iC,BC=BT,qC="unknown",HC="DISCONNECTED",zC="CONNECTING",KC="RECONNECTING",WC="CONNECTED",YC="new",JC="connecting",$C="failed",XC="closed",ZC="disconnected",QC="connected",eS="completed",tS=30,nS="join",rS="delta-join",iS="rejoin",oS="leave",aS="delta-leave",sS="publish",cS="delta-publish",uS="unpublish",lS="subscribe",dS="unsubscribe",pS="uplink-connection",fS="uplink-reconnection",hS="downlink-connection",gS="downlink-reconnection",vS="setLocalDescription",mS="setRemoteDescription",_S="iceConnectionState",yS="stream-initialize",bS="websocketConnectionState",IS="websocketReconnectionState",TS="update-stream",CS="recover-subscription",SS="start-mix-transcode",ES="stop-mix-transcode",MS="player-error",kS="schedule",wS="unsubscribe",OS="subscribe_change",DS="unified-plan",AS="plan-b",RS={MANUAL:"manual",PRESET_LAYOUT:"preset-layout"},xS={REMOTE:"$PLACE_HOLDER_REMOTE$"},LS={IT_AUDIO_VIDEO:0,IT_PICTURE:2,IT_CANVAS:3,IT_PURE_AUDIO:4,IT_PURE_VIDEO:5},NS="string",PS="number",jS="boolean",US="array",GS="object",VS={ADD:mC,REMOVE:_C},FS={unknown:0,wifi:1,"4g":2,"3g":3,"2g":4,wired:5},BS=-1,qS=0,HS=1,zS=FT,KS=VT,WS=6048e5,YS="schedule.rtc.qq.com",JS="schedule.rtc.qcloud.com",$S="schedule.rtc.tencentcloud.com",XS="schedule-ecdn.rtc.tencentcloud.com",ZS="",QS=function(e){return ZS=e},eE="TRTC",tE="Client",nE="LocalStream",rE="RemoteStream",iE="Stream",oE="web.sdk.qcloud.com",aE="web.sdk.tencent.cn",sE="web.sdk.cloud.tencent.cn",cE="https://console.cloud.tencent.com/trtc",uE="https://".concat(oE,"/trtc/webrtc/doc"),lE="".concat(uE,"/zh-cn/"),dE="trtc_error_assistance",pE="default",fE="communications",hE={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,NONE:5},gE=Object.keys(hE),vE=["normal leave","timeout leave","kick","role change"],mE=2e3,_E="ric",yE="raf",bE="interval",IE="timeout",TE="Resolution reset to 1080p, need to upgrade ability here https://cloud.tencent.com/document/product/647/85386",CE=le,SE=ad,EE=/"/g,ME=te("".replace),kE=function(e,t,n,r){var i=SE(CE(e)),o="<"+t;return""!==n&&(o+=" "+n+'="'+ME(SE(r),EE,"&quot;")+'"'),o+">"+i+"</"+t+">"},wE=A,OE=function(e){return wE((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))},DE=kE;Ei({target:"String",proto:!0,forced:OE("link")},{link:function(e){return DE(this,"a","href",e)}}),Ei({target:"Array",stat:!0},{isArray:Ai});var AE="AVOID_REPEATED_CALL",RE="INVALID_PARAMETER_REQUIRED",xE="INVALID_PARAMETER_TYPE",LE="INVALID_PARAMETER_EMPTY",NE="INVALID_PARAMETER_INSTANCE",PE="INVALID_PARAMETER_RANGE",jE="API_CALL_TIMEOUT",UE="SIGNAL_CHANNEL_RECONNECTION_FAILED",GE="SIGNAL_CHANNEL_SETUP_FAILED",VE="ERROR_MESSAGE",FE="EXCHANGE_SDP_TIMEOUT",BE="DOWNLINK_RECONNECTION_FAILED",qE="EXCHANGE_SDP_FAILED",HE="UPLINK_RECONNECTION_FAILED",zE="INVALID_PURE_AUDIO",KE="INVALID_STREAMID",WE="INVALID_USER_DEFINE_RECORDID",YE="INVALID_USER_DEFINE_PUSH_ARGS",JE="INVALID_PROXY",$E="INVALID_JOIN",XE="INVALID_ROOMID_STRING",ZE="INVALID_ROOMID_INTEGER",QE="JOIN_ROOM_TIMEOUT",eM="JOIN_ROOM_FAILED",tM="REJOIN_ROOM_FAILED",nM="INVALID_DESTROY",rM="INVALID_PUBLISH",iM="INVALID_UNPUBLISH",oM="INVALID_AUDIENCE",aM="INVALID_INITIALIZE",sM="INVALID_DUPLICATE_PUBLISHING",cM="INVALID_REMOTE_STREAM",uM="SUBSCRIBE_FAILED",lM="INVALID_ROLE",dM="INVALID_OPERATION_SWITCH_ROLE",pM="SWITCH_ROLE_TIMEOUT",fM="SWITCH_ROLE_FAILED",hM="CLIENT_BANNED",gM="INVALID_OPERATION_START_PUBLISH_CDN",vM="INVALID_OPERATION_STOP_PUBLISH_CDN",mM="INVALID_STREAM_ID",_M="START_PUBLISH_CDN_FAILED",yM="STOP_PUBLISH_CDN_FAILED",bM="START_MIX_TRANSCODE",IM="STOP_MIX_TRANSCODE",TM="INVALID_AUDIO_VOLUME",CM="ENABLE_SMALL_STREAM_PUBLISHED",SM="DISABLE_SMALL_STREAM_PUBLISHED",EM="NOT_SUPPORTED_SMALL_STREAM",MM="INVALID_SMALL_STREAM_PROFILE",kM="INVALID_PARAMETER_REMOTE_STREAM",wM="INVALID_SWITCH_DEVICE",OM="INVALID_SWITCH_DEVICE_PUBLISHING",DM="INVALID_REPLACE_TRACK",AM="INVALID_INITIALIZE_LOCAL_STREAM",RM="INVALID_ADD_TRACK_REPETITIVE",xM="INVALID_ADD_TRACK_REMOVING",LM="INVALID_ADD_TRACK_PUBLISHING",NM="INVALID_STREAM_INITIALIZED",PM="INVALID_ADD_TRACK_NUMBER",jM="INVALID_REMOVE_AUDIO_TRACK",UM="INVALID_REMOVE_AUDIO_ADDING",GM="INVALID_REMOVE_AUDIO_ON",VM="INVALID_REMOVE_TRACK_PUBLISHING",FM="INVALID_REMOVE_TRACK_NOT_PUBLISHING",BM="INVALID_REMOVE_TRACK_NUMBER",qM="INVALID_REPLACE_TRACK_NO_TRACK",HM="REPEAT_JOIN",zM="CLIENT_DESTROYED",KM="START_MIX_TRANSCODE_FAILED",WM="STOP_MIX_TRANSCODE_FAILED",YM="MIX_TRANSCODE_NOT_STARTED",JM="CANNOT_LESS_THAN_ZERO",$M="MIX_PARAMS_VIDEO_FRAMERATE",XM="MIX_PARAMS_VIDEO_GOP",ZM="MIX_PARAMS_AUDIO_BITRATE",QM="MIX_PARAMS_USER_Z_ORDER",ek="MIX_PARAMS_NOT_SELF",tk="MIX_PARAMS_USER_STREAM",nk="INVALID_ELEMENT_ID",rk="INVALID_ELEMENT_ID_TYPE",ik="PLAY_FAILED",ok="INVALID_CREATE_STREAM_SOURCE",ak="INVALID_CREATE_STREAM_SCREEN",sk="INVALID_CREATE_STREAM_AUDIO",ck="INVALID_CREATE_STREAM_SCREEN_AUDIO",uk="NOT_SUPPORTED_HTTP",lk="NOT_SUPPORTED_WEBRTC",dk="NOT_SUPPORTED_PROFILE",pk="NOT_SUPPORTED_H264ENCODE",fk="NOT_SUPPORTED_H264DECODE",hk="NOT_SUPPORTED_TRACK",gk="NOT_SUPPORTED_SWITCH_DEVICE",vk="NOT_SUPPORTED_CAPTURE",mk="NOT_SUPPORTED_AUX",_k="MICROPHONE_NOT_FOUND",yk="CAMERA_NOT_FOUND",bk="SIGNAL_RESPONSE_FAILED",Ik="CATCH_HANDLER_ERROR",Tk="API_NOT_EXIST",Ck="CONNECTION_CLOSED",Sk="SUBSCRIBE_ALL_FALSE",Ek="SEI_NOT_SUPPORT",Mk="SEI_DISABLED",kk="SEI_EMPTY",wk="SEI_OVERSIZE",Ok="SEI_BEFORE_PUBLISH",Dk="SEI_NOT_VIDEO",Ak="CALL_FREQUENCY_LIMIT",Rk="CONNECTION_ABORTED",xk="API_CALL_ABORTED",Lk="DUPLICATE_AUX",Nk={AVOID_REPEATED_CALL:function(e){return"previous ".concat(e.name,"() is ongoing, please avoid repeated calls.")},INVALID_PARAMETER_REQUIRED:function(e){var t=e.key,n=e.rule,r=e.fnName,i=e.value;return"'".concat(t||n.name,"' is a required param when calling ").concat(r,"(), received: ").concat(i,".")},INVALID_PARAMETER_TYPE:function(e){var t=e.key,n=e.rule,r=e.fnName,i=e.value,o="".concat(t||n.name),a="";return a=Array.isArray(n.type)?n.type.join("|"):n.type,"'".concat(o,"' must be type of ").concat(a," when calling ").concat(r,"(), received type: ").concat(IO(i),".")},INVALID_PARAMETER_EMPTY:function(e){var t=e.key,n=e.rule,r=e.fnName,i=e.value;return"'".concat(t||n.name,"' cannot be '").concat(i,"' when calling ").concat(r,"().")},INVALID_PARAMETER_INSTANCE:function(e){var t=e.key,n=e.rule,r=e.fnName,i=e.value,o="".concat(t||n.name),a="".concat(n.instanceOf.name||n.instanceOf);return"'".concat(o,"' must be instanceof ").concat(a," when calling ").concat(r,"(), received type: ").concat(IO(i),".")},INVALID_PARAMETER_RANGE:function(e){var t=e.key,n=e.rule,r=e.fnName,i=e.value;return"'".concat(t||n.name,"' must be one of ").concat(n.values.join("|")," when calling ").concat(r,"(), received: ").concat(i,".")},API_CALL_TIMEOUT:function(e){return"".concat(e.commandDesc||e.command," timeout observed.")},SIGNAL_CHANNEL_RECONNECTION_FAILED:"signal channel reconnection failed, please check your network.",SIGNAL_CHANNEL_SETUP_FAILED:function(e){return"SignalChannel setup failure: (errorCode: ".concat(e.errorCode,", errorMsg: ").concat(e.errorMsg," }).")},ERROR_MESSAGE:function(e){var t="".concat(e.type," failed");return e.message&&(t="".concat(t,": ").concat(e.message,".")),t},EXCHANGE_SDP_TIMEOUT:"exchange sdp timeout.",DOWNLINK_RECONNECTION_FAILED:"downlink reconnection failed, please check your network and re-join room.",EXCHANGE_SDP_FAILED:function(e){return"exchange sdp failed ".concat(e.errMsg,".")},UPDATE_OFFER_TIMEOUT:"update offer timeout observed.",UPLINK_RECONNECTION_FAILED:"uplink reconnection failed, please check your network and publish again.",INVALID_RECORDID:"recordId must be an integer number.",INVALID_PURE_AUDIO:"pureAudioPushMode must be 1 or 2.",INVALID_STREAMID:"streamId must be a sting literal within 64 bytes, and not be empty.",INVALID_USER_DEFINE_RECORDID:"userDefineRecordId must be a sting literal contains (a-zA-Z),(0-9), underline and hyphen, within 64 bytes, and not be empty.",INVALID_USER_DEFINE_PUSH_ARGS:"userDefinePushArgs must be a sting literal within 256 bytes, and not be empty.",INVALID_PROXY:'proxy server url must start with "wss://".',INVALID_JOIN:"duplicate join() called.",INVALID_ROOMID_STRING:function(e){return"'".concat(e,"' must be validate string when useStringRoomId is true.")},INVALID_ROOMID_INTEGER:function(e){return"'".concat(e,"' must be an integer between [1, 4294967294] when useStringRoomId is false.")},INVALID_SIGNAL_CHANNEL:"SignalChannel is not ready yet.",JOIN_ROOM_TIMEOUT:"join room timeout.",JOIN_ROOM_FAILED:function(e){var t=e.error,n=e.code;return"Failed to join room - ".concat(t," code: ").concat(n)},REJOIN_ROOM_FAILED:function(e){return"reJoin room: ".concat(e.roomId," failed, please check your network.")},INVALID_DESTROY:"please call leave() before destroy().",INVALID_PUBLISH:"please call join() before publish().",INVALID_UNPUBLISH:"stream has not been published yet.",INVALID_AUDIENCE:"no permission to publish() under live/".concat(jC,', please call switchRole("').concat(PC,'") firstly before publish().'),INVALID_INITIALIZE:"cannot publish stream because stream is not initialized, is switching device, or has been closed.",INVALID_DUPLICATE_PUBLISHING:function(e){return"duplicate ".concat(e," stream publishing, please unpublish your prev ").concat(e," stream and then re-publish.")},INVALID_SUBSCRIBE_UNDEFINED:"stream is undefined or null.",INVALID_SUBSCRIBE_LOCAL:"stream cannot be LocalStream.",INVALID_REMOTE_STREAM:"remoteStream does not exist because it has been unpublished by remote peer.",SUBSCRIBE_FAILED:function(e){var t=e.message,n=e.stream;return"failed to subscribe ".concat(n.getUserId()," ").concat(n.getType()," stream, reason: ").concat(t,".")},INVALID_ROLE:"switchRole can only be called in live mode.",INVALID_PARAMETER_SWITCH_ROLE:"role could only be set to a value as ".concat(PC," or ").concat(jC,"."),INVALID_OPERATION_SWITCH_ROLE:"please call join() before switchRole().",SWITCH_ROLE_TIMEOUT:"switchRole timeout.",SWITCH_ROLE_FAILED:function(e){return"switchRole failed, errCode: ".concat(e.code," errMsg: ").concat(e.message,".")},CLIENT_BANNED:function(e){return"client was banned because of "+e.message+"."},INVALID_OPERATION_START_PUBLISH_CDN:"please call startPublishCDNStream() before client join the room or after client join the room and successfully publish the local stream.",INVALID_OPERATION_STOP_PUBLISH_CDN:"please call startPublishCDNStream() before stopPublishCDNStream().",START_PUBLISH_CDN_FAILED:function(e){return"startPublishCDNStream failed, errMsg: ".concat(e.message,".")},STOP_PUBLISH_CDN_FAILED:function(e){return"stopPublishCDNStream failed, errMsg: ".concat(e.message,".")},INVALID_STREAM_ID:function(e){return"'".concat(e,"' can only consist of uppercase and lowercase english letters (a-zA-Z), numbers (0-9), hyphens and underscores.")},START_MIX_TRANSCODE:"please call startMixTranscode() after join().",STOP_MIX_TRANSCODE:"please call stopMixTranscode() after startMixTranscode().",INVALID_AUDIO_VOLUME:"interval must be a number.",ENABLE_SMALL_STREAM_PUBLISHED:"Cannot enable small stream after localStream published.",DISABLE_SMALL_STREAM_PUBLISHED:"Cannot disable small stream after localStream published.",NOT_SUPPORTED_SMALL_STREAM:"your browser does not support opening small stream.",INVALID_SMALL_STREAM_PROFILE:"small stream profile is invalid.",INVALID_PARAMETER_REMOTE_STREAM:"remoteStream is invalid.",INVALID_OPERATION_CHANGE_SMALL:"cannot switch to the small stream without subscribing to the video of remoteStream.",REMOTE_NOT_PUBLISH_SMALL_STREAM:"remote peer does not publish small stream.",INVALID_SWITCH_DEVICE:"cannot switch device on current stream.",INVALID_SWITCH_DEVICE_PUBLISHING:"cannot switch device when publishing localStream.",INVALID_REPLACE_TRACK:"cannot replace track when publishing localStream.",INVALID_INITIALIZE_LOCAL_STREAM:"local stream has not initialized yet.",INVALID_ADD_TRACK_REPETITIVE:"previous addTrack is ongoing, please avoid repetitive execution.",INVALID_ADD_TRACK_REMOVING:"cannot add track when a track is removing.",INVALID_ADD_TRACK_PUBLISHING:"cannot add track when publishing localStream.",INVALID_STREAM_INITIALIZED:"your local stream haven't been initialized yet.",INVALID_ADD_TRACK_NUMBER:"a Stream has at most one audio track and one video track.",INVALID_REMOVE_AUDIO_TRACK:"remove audio track is not supported on your browser.",INVALID_REMOVE_AUDIO_ADDING:"cannot remove track when a track is adding.",INVALID_REMOVE_AUDIO_ON:"previous removeTrack is ongoing, please avoid repetitive execution.",INVALID_REMOVE_TRACK_PUBLISHING:"cannot remove track when publishing localStream.",INVALID_REMOVE_TRACK_NOT_PUBLISHING:"the track to be removed is not being publishing.",INVALID_REMOVE_TRACK_NUMBER:"remove the only video track is not supported, please use replaceTrack or muteVideo.",INVALID_REPLACE_TRACK_NO_TRACK:function(e){return"cannot replace ".concat(e.kind," track because stream has not ").concat(e.kind," track")},START_MIX_TRANSCODE_FAILED:function(e){return"startMixTranscode failed, errMsg: ".concat(e.message,".")},STOP_MIX_TRANSCODE_FAILED:function(e){return"stopMixTranscode failed, errMsg: ".concat(e.message,".")},MIX_TRANSCODE_NOT_STARTED:"mixTranscode has not been started.",CANNOT_LESS_THAN_ZERO:function(e){var t=e.key,n=e.rule,r=e.fnName;return e.value,"'".concat(t||n.name,"' cannot be less than 0 when calling ").concat(r,"().")},MIX_PARAMS_VIDEO_FRAMERATE:"'config.videoFramerate' should be an integer between 0 and 30, excluding 0.",MIX_PARAMS_VIDEO_GOP:"'config.videoGOP' should be an integer between 1 and 8.",MIX_PARAMS_AUDIO_BITRATE:"'config.audioBitrate' should be an integer between 32 and 192.",MIX_PARAMS_USER_Z_ORDER:function(e){return"'".concat(e,"' is required and must be between 1 and 15.")},MIX_PARAMS_NOT_SELF:"'config.mixUsers' must contain self.",MIX_PARAMS_USER_STREAM:"'config.videoWidth' and 'config.videoHeight' of output stream should be contain all mix stream.",INVALID_PLAY:"duplicate play() call observed, please stop() firstly.",INVALID_ELEMENT_ID:function(e){var t=e.key,n=e.fnName;return"'".concat(t,"' is not found in the document object when calling ").concat(n,"().")},INVALID_ELEMENT_ID_TYPE:function(e){var t=e.key,n=e.fnName,r=e.type;return"the element corresponding to '".concat(t,"' must be instanceof HTMLDivElement when calling ").concat(n,"(), received: ").concat(r,".")},PLAY_FAILED:function(e){return"".concat(e.media," play failed，browser exception: ").concat(e.error.toString())},INVALID_USERID:"userId cannot be all spaces.",INVALID_CREATE_STREAM_SOURCE:"LocalStream must be created by createStream() with either audio/video or audioSource/videoSource, but can not be mixed with audio/video and audioSource/videoSource.",INVALID_CREATE_STREAM_SCREEN:"screen/video cannot be both true.",INVALID_CREATE_STREAM_AUDIO:"audio/screenAudio cannot be both true.",INVALID_CREATE_STREAM_SCREEN_AUDIO:"when screen is true, screenAudio can be configured.",NOT_SUPPORTED_HTTP:"http protocol does not support the ability to capture and publish streams, please use the https protocol.",NOT_SUPPORTED_WEBRTC:"your browser or environment does not support full WebRTC capabilities.",NOT_SUPPORTED_PROFILE:"your browser does not support setVideoProfile.",NOT_SUPPORTED_MEDIA:"your browser or environment does not support navigator.mediaDevices.",NOT_SUPPORTED_H264ENCODE:"your device does not support H.264 encoding.",NOT_SUPPORTED_H264DECODE:"your device does not support H.264 decoding.",NOT_SUPPORTED_TRACK:function(e){return"".concat(e,"Track is not supported on your browser.")},NOT_SUPPORTED_SWITCH_DEVICE:"switchDevice is not supported on your browser.",NOT_SUPPORTED_CAPTURE:"Your browser or environment does not support screen sharing, please check whether the browser version.",MICROPHONE_NOT_FOUND:"no microphone detected, please check your microphone and the configuration on TRTC.createStream.",CAMERA_NOT_FOUND:"no camera detected, please check your camera and the configuration on TRTC.createStream.",SIGNAL_RESPONSE_FAILED:function(e){return"".concat(e.signalResponse," failed, response code is ").concat(e.code," , errMsg: ").concat(e.message,".")},CATCH_HANDLER_ERROR:function(e){var t=e.name,n=e.event;return"an error was caught on ".concat(t,".on('").concat(n,"', handler), please check your code on 'handler'.")},API_NOT_EXIST:function(e){var t=e.name;return"experimental api ".concat(t," does not exist.")},REPEAT_JOIN:function(e){return"[".concat(e,"] is calling client.join api or has already joined room, please avoid repeated join.")},CONNECTION_CLOSED:"remoteStream has been unsubscribed or unpublished by remote user.",SUBSCRIBE_ALL_FALSE:"cannot subscribe when both audio & video are false, use client.unsubscribe() instead",CLIENT_DESTROYED:function(e){var t=e.funName;return"failed to call ".concat(t,"() because client was destroyed.")},SEI_NOT_SUPPORT:function(e){return"not support to sendSEIMessage".concat(!1===e?" without using h264 codec":"")},SEI_DISABLED:"SEI is disabled, to enable SEI: TRTC.createClient({ enableSEI: true })",SEI_EMPTY:"buffer cannot be empty",SEI_OVERSIZE:function(e){return"buffer size(".concat(e,") is over 1000 Bytes")},SEI_BEFORE_PUBLISH:"please call sendSEIMessage() after publish() success",SEI_NOT_VIDEO:"cannot send sei when localStream has not video.",CALL_FREQUENCY_LIMIT:function(e){var t=e.isSize,n=e.name,r=e.timesInSecond,i=e.maxSizeInSecond;return"api ".concat(n," call ").concat(t?"size":"times"," is over ").concat(t?i+" bytes":r," in a second.")},CONNECTION_ABORTED:function(e){return"connection aborted due to: "+e},API_CALL_ABORTED:function(e){return e.message.includes("REMOTE_STREAM_NOT_EXIST")?"Subscribe ".concat(e.stream.getUserId()," ").concat(e.stream.getType()," stream aborted, reason: remote user ").concat(e.stream.getUserId()," unpublished stream."):"API aborted, reason: ".concat(e.message)},DUPLICATE_AUX:"only one auxiliary stream can be published in a room.",NOT_SUPPORTED_AUX:"publish auxiliary stream is not supported on your browser."},Pk=O,jk=A,Uk=ad,Gk=f_.trim,Vk=te("".charAt),Fk=Pk.parseFloat,Bk=Pk.Symbol,qk=Bk&&Bk.iterator,Hk=1/Fk("\t\n\v\f\r                　\u2028\u2029\ufeff-0")!=-1/0||qk&&!jk((function(){Fk(Object(qk))}))?function(e){var t=Gk(Uk(e)),n=Fk(t);return 0===n&&"-"==Vk(t,0)?-0:n}:Fk;Ei({global:!0,forced:parseFloat!=Hk},{parseFloat:Hk});var zk=window.navigator&&window.navigator.userAgent||"",Kk=/AppleWebKit\/([\d.]+)/i.exec(zk);Kk&&parseFloat(Kk.pop());var Wk=/iPad/i.test(zk),Yk=navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/Macintosh/.test(zk),Jk=/iPhone/i.test(zk)&&!Wk,$k=/iPod/i.test(zk),Xk=Jk||Wk||$k||Yk,Zk=/Android/i.test(zk);Zk&&function(){var e=zk.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);t&&n&&parseFloat(e[1]+"."+e[2])}(),Zk&&/webkit/i.test(zk);var Qk=/Firefox/i.test(zk),ew=Qk&&function(){var e=zk.match(/Firefox\/(\d+)/);return e&&e[1]?parseFloat(e[1]):null}(),tw=/Edge\//i.test(zk),nw=tw&&function(){var e=zk.match(/Edge\/(\d+)/i);if(e&&e[1])return e[1]}(),rw=/Edg\//i.test(zk),iw=rw&&function(){var e=zk.match(/Edg\/(\d+)/);return e&&e[1]?parseFloat(e[1]):null}(),ow=/SogouMobileBrowser\//i.test(zk),aw=ow&&function(){var e=zk.match(/SogouMobileBrowser\/(\d+)/);return e&&e[1]?parseFloat(e[1]):null}(),sw=/MetaSr\s/i.test(zk),cw=sw&&function(){var e=zk.match(/MetaSr(\s\d+(\.\d+)+)/);return e&&e[1]?parseFloat(e[1]):null}(),uw=/TBS\/\d+/i.test(zk),lw=uw&&function(){var e=zk.match(/TBS\/(\d+)/i);if(e&&e[1])return e[1]}(),dw=/XWEB\/\d+/i.test(zk),pw=dw&&function(){var e=zk.match(/XWEB\/(\d+)/i);if(e&&e[1])return e[1]}();/MSIE\s8\.0/.test(zk),/MSIE\/\d+/i.test(zk)&&function(){var e=/MSIE\s(\d+)\.\d/.exec(zk),t=e&&parseFloat(e[1]);!t&&/Trident\/7.0/i.test(zk)&&/rv:11.0/.test(zk)&&(t=11)}();var fw=/(micromessenger|webbrowser)/i.test(zk),hw=fw&&function(){var e=zk.match(/MicroMessenger\/(\d+)/i);if(e&&e[1])return e[1]}(),gw=!uw&&/MQQBrowser\/\d+/i.test(zk)&&/COVC\/\d+/i.test(zk),vw=!uw&&/MQQBrowser\/\d+/i.test(zk)&&!/COVC\/\d+/i.test(zk),mw=(vw||gw)&&function(){var e=zk.match(/ MQQBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),_w=!uw&&/ QQBrowser\/\d+/i.test(zk),yw=_w&&function(){var e=zk.match(/ QQBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),bw=!uw&&/QQBrowserLite\/\d+/i.test(zk),Iw=bw&&function(){var e=zk.match(/QQBrowserLite\/([\d.]+)/);return e&&e[1]?e[1]:null}(),Tw=!uw&&/MQBHD\/\d+/i.test(zk),Cw=Tw&&function(){var e=zk.match(/MQBHD\/([\d.]+)/);return e&&e[1]?e[1]:null}(),Sw=/Windows/i.test(zk),Ew=!Xk&&/MAC OS X/i.test(zk),Mw=!Zk&&/Linux/i.test(zk);/MicroMessenger/i.test(zk);var kw=/UCBrowser/i.test(zk);/Electron/i.test(zk);var ww,Ow,Dw=/MiuiBrowser/i.test(zk),Aw=Dw&&function(){var e=zk.match(/MiuiBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),Rw=/HuaweiBrowser/i.test(zk),xw=/Huawei/i.test(zk),Lw=Rw&&function(){var e=zk.match(/HuaweiBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),Nw=/SamsungBrowser/i.test(zk),Pw=Nw&&function(){var e=zk.match(/SamsungBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),jw=/HeyTapBrowser/i.test(zk),Uw=jw&&function(){var e=zk.match(/HeyTapBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),Gw=/VivoBrowser/i.test(zk),Vw=Gw&&function(){var e=zk.match(/VivoBrowser\/([\d.]+)/);return e&&e[1]?e[1]:null}(),Fw=function(){var e=zk.match(/Chrome\/(\d+)/);return e&&e[1]?Number(e[1]):null},Bw=/Chrome/i.test(zk),qw=!tw&&!sw&&!ow&&!uw&&!dw&&!rw&&!_w&&!Dw&&!Rw&&!Nw&&!jw&&!Gw&&/Chrome/i.test(zk),Hw=qw&&Fw(),zw=qw&&function(){var e=zk.match(/Chrome\/([\d.]+)/);return e&&e[1]?e[1]:null}(),Kw=!Bw&&!vw&&!gw&&!bw&&!Tw&&/Safari/i.test(zk),Ww=function(){if(Kw){var e=zk.match(/Version\/([\d.]+)/);if(e&&e[1])return e[1]}return""}(),Yw=/Android.*(wv|.0.0.0)/.test(zk),Jw=function(){if(Yk)return Ww;if(Xk){var e=zk.match(/OS (\d+)_(\d+)/i);if(e&&e[1]){var t=e[1];return e[2]&&(t+=".".concat(e[2])),t}}return""}(),$w="15.1"===Ww,Xw="15.1"===Jw,Zw=14===(ww=Number(Jw.split(".")[0]))||13===ww,Qw="file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname,eO=function(){if(hO(Ow))try{Ow=window.localStorage}catch(uY){PD.warn(uY),Ow=!1}return Ow},tO=new Map([[Qk,["Firefox",ew]],[rw,["Edg",iw]],[qw,["Chrome",zw]],[Kw,["Safari",Ww]],[uw,["TBS",lw]],[dw,["XWEB",pw]],[fw&&Jk,["WeChat",hw]],[_w,["QQ(Win)",yw]],[vw,["QQ(Mobile)",mw]],[gw,["QQ(Mobile X5)",mw]],[bw,["QQ(Mac)",Iw]],[Tw,["QQ(iPad)",Cw]],[Dw,["MI",Aw]],[Rw,["HW",Lw]],[Nw,["Samsung",Pw]],[jw,["OPPO",Uw]],[Gw,["VIVO",Vw]],[tw,["EDGE",nw]],[ow,["SogouMobile",aw]],[sw,["Sogou",cw]]]);function nO(){var e="unknown",t="unknown";return tO.get(!0)&&(e=tO.get(!0)[0],t=tO.get(!0)[1]),{name:e,version:t}}var rO=function(e,t){return t?uE+"/"+e+"/"+t:uE+"/"+e+"/index.html"},iO=function(){if(!eO())return!1;var e=localStorage.getItem(dE);e&&!function(e){var t=e.saveTime&&(new Date).getTime()-e.saveTime>=WS,n=!e.saveVersion||e.saveVersion!==Ha;return t||n}(JSON.parse(e))||(PD.info("init debug info"),function(){var e=new XMLHttpRequest;if(e.open("GET","https://web.sdk.qcloud.com/trtc/webrtc/download/error-message/0.0.3/script.js",!1),e.send(null),4===e.readyState&&200===e.status){var t=document.createElement("script");t.type="text/javascript",t.text=e.responseText,document.body.appendChild(t),localStorage.setItem(dE,JSON.stringify({message:e.responseText,saveTime:(new Date).getTime(),saveVersion:Ha})),document.body.removeChild(t)}}())};function oO(e){var t=e.key,n=e.data,r=e.link,i=e.addDocLink,o=void 0===i||i,a="",s="",c="";fO(Nk[t])?a=Nk[t](n):gO(Nk[t])&&(a=Nk[t]);var u=function(){if(window.TRTC_ERROR_INFO&&window.TRTC_ERROR_LINK)return{TRTC_ERROR_INFO:window.TRTC_ERROR_INFO,TRTC_ERROR_LINK:window.TRTC_ERROR_LINK};var e=localStorage.getItem(dE);if(e){e=JSON.parse(e);var t=document.createElement("script");t.type="text/javascript",t.text=e.message,document.body.appendChild(t);var n=window.TRTC_ERROR_INFO,r=window.TRTC_ERROR_LINK;return document.body.removeChild(t),{TRTC_ERROR_INFO:n,TRTC_ERROR_LINK:r}}return{}}(),l=u.TRTC_ERROR_INFO,d=u.TRTC_ERROR_LINK;r?c="".concat(r.className,".html#").concat(r.fnName):d&&d[t]&&(fO(d[t])?c=d[t](n):gO(d[t])&&(c=d[t]));var p=a;return kO()&&(l&&l[t]&&(fO(l[t])?s=l[t](n):gO(l[t])&&(s=l[t])),s&&(p=o?s+"\n请查看文档: "+rO("zh-cn",c)+"\n\n":s+"\n\n",p+=a)),o&&(p+=" \nRefer to: "+rO("en",c)+"\n"),p}var aO=function(){return function(e){var t=window.location.search.match(new RegExp("(\\?|&)"+e+"=([^&]*)(&|$)"));return t?decodeURIComponent(t[2]):""}("trtc_env")},sO=function(e){return(e=Number(e))>0&&e<14e8},cO=function(e,t){var n;n=MC?MC.includes("http")?MC:"https://"+MC:sO(e)?"https://apisgp.my-imcloud.com":"https://yun.tim.qq.com";var r=Math.floor(Math.random()*Math.pow(2,31));return"".concat(n,"/v5/AVQualityReportSvc/C2S?random=").concat(r,"&sdkappid=").concat(e,"&cmdtype=").concat(t)};function uO(){var e=navigator.userAgent,t=navigator.connection,n=e.match(/NetType\/\w+/)?e.match(/NetType\/\w+/)[0]:"";"3gnet"===(n=n.toLowerCase().replace("nettype/",""))&&(n="3g");var r=t&&t.type&&t.type.toLowerCase(),i=t&&t.effectiveType&&t.effectiveType.toLowerCase();"slow-2"===i&&(i="2g");var o=n||"unknown";if(r)switch(r){case"cellular":case"wimax":o=i||"unknown";break;case"wifi":o="wifi";break;case"ethernet":o="wired";break;case"none":case"other":case"unknown":o="unknown"}return o}var lO=function(e){if(!e||"object"!==i(e)||"[object Object]"!=Object.prototype.toString.call(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Function.prototype.toString.call(n)===Function.prototype.toString.call(Object)};function dO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e<=1?n:dO(e-1,n,t+n)}function pO(e){var t=Math.round(e/2)+1;return t>6?13e3:1e3*dO(t)}var fO=function(e){return"function"==typeof e},hO=function(e){return void 0===e},gO=function(e){return"string"==typeof e},vO=function(e){return"number"==typeof e},mO=function(e){return"boolean"==typeof e},_O=function(e){return"object"===IO(e)},yO=function(e){return"array"===IO(e)},bO=function(e){return IO(e)==="MediaStreamTrack".toLowerCase()};function IO(e){return Reflect.apply(Object.prototype.toString,e,[]).replace(/^\[object\s(\w+)\]$/,"$1").toLowerCase()}function TO(e){var t={};return t.urls="turn:".concat(e.url),hO(e.username)||hO(e.credential)||(t.username=e.username,t.credential=e.credential,t.credentialType="password",hO(e.credentialType)||(t.credentialType=e.credentialType)),t}function CO(){return performance&&performance.now?Math.floor(performance.now()):Date.now()}function SO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"big";if(!gO(e))return 0;var n=e.split(".");return"big"===t?(Number(n[0])<<24|Number(n[1])<<16|Number(n[2])<<8|Number(n[3]))>>>0:(Number(n[3])<<24|Number(n[2])<<16|Number(n[1])<<8|Number(n[0]))>>>0}var EO,MO,kO=function(){var e=navigator.language||navigator.userLanguage;return"zh"===e.substr(0,2)},wO=(EO=!1,MO=document.visibilityState,function(){document.visibilityState!==MO&&PD.info("visibility change: ".concat(document.visibilityState)),EO||(document.addEventListener("visibilitychange",(function(){PD.info("visibility change: "+document.visibilityState),MO=document.visibilityState})),EO=!0)});window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;var OO=function(){return new window.AudioContext},DO=function(){var e;return function(){return e||(e=new window.AudioContext,e.onstatechange=function(){PD.info("gain context state: ".concat(e.state)),"suspended"===e.state?(e.resume(),document.addEventListener("click",e.resume)):"interrupted"===e.state?e.resume():document.removeEventListener("click",e.resume)},e)}}(),AO=!!window.AudioWorkletNode,RO=function(e,t){var n=e.emit;return e.emit=function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];try{n.apply(e,i)}catch(uY){var a=oO({key:Ik,data:{name:t,event:i[0]},addDocLink:!1});PD.warn(a+"\n\n"+uY.stack)}},e},xO=function(e){return+e<10?"0".concat(e):e},LO=function(e){var t=e.match(/^\d+\.\d+\.\d+/)[0];if(!t)return e;var n=t.split("."),r=xO(n[1])+xO(n[2]);return n[1]-15>0&&(n[1]="15"),n[2]-15>0&&(n[2]="15"),n.join(".")+"."+r};function NO(e){var t=e.url,n=e.body,r=e.method,i=e.timeout,o=new XMLHttpRequest;return new Promise((function(e,a){o.onload=function(t){if(o.status>=200&&o.status<300&&o.responseText.length>0)try{var n=JSON.parse(o.response);e({data:n})}catch(uY){e({data:o.response})}else o.status>0&&a({code:o.status,message:"request failed, readyState:".concat(o.readyState," status:").concat(o.status," loaded size:").concat(t.loaded)})};var s=function(e){a({code:o.readyState,message:"request ".concat(e.type,", readyState:").concat(o.readyState," status:").concat(o.status," loaded size:").concat(e.loaded)})};o.onerror=s,o.onabort=s,o.ontimeout=s,o.timeout=i||5e3,o.open(r||"POST",t,!0),o.send(n)}))}var PO={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var c,u,l=this._events[s],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,i),!0;case 5:return l.fn.call(l.context,t,r,i,o),!0;case 6:return l.fn.call(l.context,t,r,i,o,a),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var p,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,i);break;default:if(!c)for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];l[u].fn.apply(l[u].context,c)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var c=0,u=[],l=s.length;c<l;c++)(s[c].fn!==t||i&&!s[c].once||r&&s[c].context!==r)&&u.push(s[c]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(PO);var jO=PO.exports,UO=new jO,GO=1,VO=2,FO=3,BO=4,qO=5,HO=20,zO=21,KO=22,WO=23,YO=24,JO=27,$O=28,XO=29,ZO=30,QO=33,eD=31,tD=32,nD=100,rD=101,iD=102,oD=103,aD=110,sD=111,cD=112,uD=113,lD=114,dD=115,pD=116,fD=120,hD=121,gD=122,vD=123,mD=130,_D=131,yD=132,bD=133,ID=134,TD=135,CD=136,SD=137,ED=200,MD=201,kD=300,wD=301,OD=302,DD=303;function AD(e){var t=e.retryFunction,n=e.settings,i=e.onError,o=e.onRetrying,s=e.onRetryFailed,c=e.context;return function(){for(var e=this,u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];var p=n.retries||5,f=0,h=-1,g=0,v=function(){var u=a(r().mark((function a(u,d){var m,_,y,b;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return m=c||e,r.prev=1,r.next=4,t.apply(m,l);case 4:_=r.sent,f=0,u(_),r.next=14;break;case 9:r.prev=9,r.t0=r.catch(1),y=function(){clearTimeout(h),f=0,g=2,d(r.t0)},b=function(){2!==g&&f<p?(f++,g=1,fO(o)&&o.call(m,f,y),h=setTimeout((function(){h=-1,v(u,d)}),hO(n.timeout)?1e3:n.timeout)):(y(),fO(s)&&s.call(m,r.t0))},fO(i)?i.call(m,r.t0,b,d,l):b();case 14:case"end":return r.stop()}}),a,null,[[1,9]])})));return function(e,t){return u.apply(this,arguments)}}();return new Promise(v)}}var RD=u((function e(t){s(this,e),this.log=t.log,this.level=t.level,this.userId=t.userId,this.sdkAppId=t.sdkAppId,this.forAllJoinedClients=t.forAllJoinedClients,this.uploaded=!1})),xD=function(){function e(t){s(this,e),this.id_=t.id,this.userId_=t.userId,this.sdkAppId_=t.sdkAppId,this.type_=t.type,this.isLocal_=!mO(t.isLocal)||t.isLocal}return u(e,[{key:"setUserId",value:function(e){this.userId_=e}},{key:"setSdkAppId",value:function(e){this.sdkAppId_=e}},{key:"log",value:function(e,t){PD.log({log:"[".concat(this.isLocal_?"↑":"↓").concat(this.id_,"] ").concat(this.type_?this.type_+" ":"").concat(t),level:e,forAllJoinedClients:hO(this.userId_),userId:this.userId_,sdkAppId:this.sdkAppId_})}},{key:"info",value:function(e){this.log(hE.INFO,e)}},{key:"debug",value:function(e){this.log(hE.DEBUG,e)}},{key:"warn",value:function(e){this.log(hE.WARN,e)}},{key:"error",value:function(e){this.log(hE.ERROR,e)}}]),e}(),LD=!(Xk||Zk),ND=function(){function e(){var t=this;s(this,e),this.clients_=new Set,this.queue_=[],this.timeoutId_=-1,this.logLevel_=hE.DEBUG,this.logLevelToUpload_=hE.INFO,this.enableUploadLog_=!0,this.isAbleToUpload_=!1,this.checkURLParam(),UO.on(ZO,(function(e){var n=e.client;-1===t.timeoutId_&&t.startUpload(),t.clients_.add(n)})),UO.on(QO,(function(e){var n=e.client;return t.clients_.delete(n)})),UO.on(eD,(function(e){e&&lO(e.config)&&gE[e.config.logLevelToUpload]&&(t.logLevelToUpload_=e.config.logLevelToUpload)})),UO.on(BO,this.setIsAbleToUpload,this),UO.on(qO,this.setIsAbleToUpload,this)}var t,n;return u(e,[{key:"getIsAbleToUpload",value:function(){return this.isAbleToUpload_}},{key:"setIsAbleToUpload",value:function(){this.isAbleToUpload_=!0,UO.off(BO,this.setIsAbleToUpload,this),UO.off(qO,this.setIsAbleToUpload,this)}},{key:"startUpload",value:(n=a(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.upload();case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:this.timeoutId_=setTimeout((function(){return t.startUpload()}),2e3);case 8:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return n.apply(this,arguments)})},{key:"getLogsToUpload",value:function(){var e=this,t={map:new Map,splicedQueue:[]};if(this.queue_[0].forAllJoinedClients&&0===this.clients_.size)return t;for(var n=0,r=function(){if(50===n)return"break";var r=e.queue_[n];r.forAllJoinedClients?e.clients_.forEach((function(e){if(e.getIsJoined()){var n=e.getUserId(),i=e.getSDKAppId();t.map.has(n)?t.map.get(n).logs.push(r):t.map.set(n,{userId:n,sdkAppId:i,logs:[r]})}})):t.map.has(r.userId)?t.map.get(r.userId).logs.push(r):t.map.set(r.userId,{userId:r.userId,sdkAppId:r.sdkAppId,logs:[r]})};n<this.queue_.length;n++)if("break"===r())break;return t.map.size>0&&(t.splicedQueue=this.queue_.splice(0,n)),t}},{key:"upload",value:(t=a(r().mark((function e(){var t,n,i,o,a,s,c,u,l,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.queue_.length&&this.isAbleToUpload_){e.next=2;break}return e.abrupt("return");case 2:if(t=this.getLogsToUpload(),n=t.map,i=t.splicedQueue,0!==n.size){e.next=5;break}return e.abrupt("return");case 5:e.prev=5,o=T(n.values()),a=0;case 8:if(!(a<o.length)){e.next=16;break}return s=o[a],c=s.userId,u=s.sdkAppId,l=s.logs,e.next=12,this.uploadLogWithRetry(JSON.stringify({timestamp:im(),sdkAppId:String(u),userId:c,version:Ha,log:l.map((function(e){return e.log})).join("\n")}),u);case 12:l.forEach((function(e){return e.uploaded=!0}));case 13:a++,e.next=8;break;case 16:e.next=20;break;case 18:e.prev=18,e.t0=e.catch(5);case 20:d=i.filter((function(e){return!e.uploaded})),d.length>0&&(this.queue_=d.concat(this.queue_));case 22:case"end":return e.stop()}}),e,this,[[5,18]])}))),function(){return t.apply(this,arguments)})},{key:"uploadLogWithRetry",value:function(e,t){return AD({retryFunction:function(){return NO({url:cO(t,kC),body:e,timeout:5e3})},settings:{retries:3,timeout:1e3},onError:function(e,t){t()}})()}},{key:"getPrefix",value:function(e){var t=new Date;return t.setTime(rm()),String.prototype.padStart?"[".concat(t.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1"),":").concat(t.getMilliseconds().toString().padStart(3,"0"),"] <").concat(gE[e],">"):"[".concat(t.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1"),":").concat(t.getMilliseconds(),"] <").concat(gE[e],">")}},{key:"getLogLevel",value:function(){return this.logLevel_}},{key:"setLogLevel",value:function(e){hO(gE[e])||(this.logLevel_!==e&&this.info("setLogLevel ".concat(e)),this.logLevel_=e)}},{key:"enableUploadLog",value:function(){this.enableUploadLog_=!0}},{key:"disableUploadLog",value:function(){this.enableUploadLog_=!1}},{key:"log",value:function(e){var t=e.log,n=e.level,r=e.forAllJoinedClients,i=void 0===r||r,o=e.userId,a=e.sdkAppId;if(t="".concat(this.getPrefix(n)," ").concat(t),this.enableUploadLog_&&n>=this.logLevelToUpload_&&this.queue_.push(new RD({log:t,level:n,userId:o,sdkAppId:a,forAllJoinedClients:i})),!(n<this.logLevel_)){var s=gE[n]?gE[n].toLowerCase():"info";LD?console[s]("%cTRTC%c%s","padding: 1px 4px;border-radius: 3px;color: #fff;background: #1E88E5;","display: inline",t):console[s](t)}}},{key:"debug",value:function(e){this.log({log:e,level:hE.DEBUG})}},{key:"info",value:function(e){this.log({log:e,level:hE.INFO})}},{key:"warn",value:function(e){this.log({log:e,level:hE.WARN})}},{key:"error",value:function(e){this.log({log:e,level:hE.ERROR})}},{key:"createLogger",value:function(e){return new xD(e)}},{key:"checkURLParam",value:function(){var e=new URLSearchParams(location.search).get("logLevelToUpload");gE[e]&&(this.logLevelToUpload_=e)}}]),e}(),PD=new ND,jD=!0,UD=be,GD=Math.floor,VD=Number.isInteger||function(e){return!UD(e)&&isFinite(e)&&GD(e)===e};Ei({target:"Number",stat:!0},{isInteger:VD});var FD,BD=Ei,qD=te,HD=D.f,zD=Nr,KD=ad,WD=K_,YD=le,JD=Y_,$D=qD("".startsWith),XD=qD("".slice),ZD=Math.min,QD=JD("startsWith");BD({target:"String",proto:!0,forced:!(!QD&&(FD=HD(String.prototype,"startsWith"),FD&&!FD.writable))&&!QD},{startsWith:function(e){var t=KD(YD(this));WD(e);var n=zD(ZD(arguments.length>1?arguments[1]:void 0,t.length)),r=KD(e);return $D?$D(t,r,n):XD(t,n,n+r.length)===r}});var eA=R,tA=te,nA=P,rA=A,iA=Ya,oA=Zr,aA=j,sA=pt,cA=ae,uA=Object.assign,lA=Object.defineProperty,dA=tA([].concat),pA=!uA||rA((function(){if(eA&&1!==uA({b:1},uA(lA({},"a",{enumerable:!0,get:function(){lA(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=uA({},e)[n]||iA(uA({},t)).join("")!=r}))?function(e,t){for(var n=sA(e),r=arguments.length,i=1,o=oA.f,a=aA.f;r>i;)for(var s,c=cA(arguments[i++]),u=o?dA(iA(c),o(c)):iA(c),l=u.length,d=0;l>d;)s=u[d++],eA&&!nA(a,c,s)||(n[s]=c[s]);return n}:uA,fA=pA;Ei({target:"Object",stat:!0,arity:2,forced:Object.assign!==fA},{assign:fA});var hA=te,gA=Ye,vA=be,mA=gt,_A=Hd,yA=x,bA=Function,IA=hA([].concat),TA=hA([].join),CA={},SA=function(e,t,n){if(!mA(CA,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";CA[t]=bA("C,a","return new C("+TA(r,",")+")")}return CA[t](e,n)},EA=yA?bA.bind:function(e){var t=gA(this),n=t.prototype,r=_A(arguments,1),i=function(){var n=IA(r,_A(arguments));return this instanceof i?SA(t,n.length,n):t.apply(e,n)};return vA(n)&&(i.prototype=n),i},MA=EA;Ei({target:"Function",proto:!0,forced:Function.bind!==MA},{bind:MA});var kA=Ei,wA=vo.findIndex,OA=Cs,DA="findIndex",AA=!0;DA in[]&&Array(1).findIndex((function(){AA=!1})),kA({target:"Array",proto:!0,forced:AA},{findIndex:function(e){return wA(this,e,arguments.length>1?arguments[1]:void 0)}}),OA(DA);var RA=R,xA=te,LA=Ya,NA=fe,PA=xA(j.f),jA=xA([].push),UA=function(e){return function(t){for(var n,r=NA(t),i=LA(r),o=i.length,a=0,s=[];o>a;)n=i[a++],RA&&!PA(r,n)||jA(s,e?[n,r[n]]:r[n]);return s}},GA={entries:UA(!0),values:UA(!1)}.values;Ei({target:"Object",stat:!0},{values:function(e){return GA(e)}});var VA=1,FA=5,BA=2,qA=3,HA=4,zA="DISCONNECTED",KA="CONNECTING",WA="RECONNECTING",YA="CONNECTED",JA={CLIENT_BANNED:9,CHANNEL_SETUP_RESULT:19,CHANNEL_RECONNECT_RESULT:514,JOIN_ROOM_RESULT:20,PEER_JOIN:4134,PEER_LEAVE:4135,STREAM_ADDED:16,STREAM_REMOVED:18,UPLINK_NETWORK_STATS:22,UPDATE_REMOTE_MUTE_STAT:23,PUBLISH_RESULT:4098,PUBLISH_STATE_CHANGE_RESULT:4112,UNPUBLISH_RESULT:4100,SUBSCRIBE_RESULT:4102,UNSUBSCRIBE_RESULT:4104,SUBSCRIBE_CHANGE_RESULT:4106,MUTE_RESULT:4108,UPDATE_OFFER_RESULT:4128,START_PUBLISH_TENCENT_CDN_RES:1286,STOP_PUBLISH_TENCENT_CDN_RES:1288,START_PUBLISH_GIVEN_CDN_RES:777,STOP_PUBLISH_GIVEN_CDN_RES:779,START_MIX_TRANSCODE_RES:781,STOP_MIX_TRANSCODE_RES:783,USER_LIST_RES:4137,SWITCH_ROLE_RES:4110,UPDATE_CONSTRAINT_CONFIG_RES:772},$A=[JA.UPDATE_REMOTE_MUTE_STAT,JA.UPLINK_NETWORK_STATS,JA.USER_LIST_RES,JA.MUTE_RESULT],XA={CLIENT_BANNED:"client-banned",CHANNEL_SETUP_RESULT:"channel-setup-result",CHANNEL_RECONNECT_RESULT:"channel-reconnect-result",JOIN_ROOM_RESULT:"join-room-result",PEER_JOIN:"peer-join",PEER_LEAVE:"peer-leave",STREAM_ADDED:"stream-added",STREAM_REMOVED:"stream-removed",UPLINK_NETWORK_STATS:"uplink-network-stats",UPDATE_REMOTE_MUTE_STAT:"update-remote-mute-stat",PUBLISH_RESULT:"publish-result",PUBLISH_STATE_CHANGE_RESULT:"publish-state-change-result",UNPUBLISH_RESULT:"unpublish-result",SUBSCRIBE_RESULT:"subscribe-result",SUBSCRIBE_CHANGE_RESULT:"subscribe-change-result",UNSUBSCRIBE_RESULT:"unsubscribe-result",UPDATE_OFFER_RESULT:"update-offer-result",START_PUBLISH_TENCENT_CDN_RES:"start-publish-tencent-cdn-res",STOP_PUBLISH_TENCENT_CDN_RES:"stop-publish-tencent-cdn-res",START_PUBLISH_GIVEN_CDN_RES:"start-publish-given-cdn-res",STOP_PUBLISH_GIVEN_CDN_RES:"stop-publish-given-cdn-res",START_MIX_TRANSCODE_RES:"start-mix-transcode-res",STOP_MIX_TRANSCODE_RES:"stop-mix-transcode-res",USER_LIST_RES:"user-list-res",SWITCH_ROLE_RES:"switch_role_res",MUTE_RESULT:"mute-result",UPDATE_CONSTRAINT_CONFIG_RES:"update-contraint-config-res"},ZA="publish_change",QA="publish_state_change",eR="join",tR="leave",nR="quality_report",rR="mute_uplink",iR="publish",oR="unpublish",aR="subscribe",sR="unsubscribe",cR="subscribe_change",uR="start_publishing",lR="stop_publishing",dR="start_push_user_cdn",pR="stop_push_user_cdn",fR="start_mcu_mix",hR="stop_mcu_mix",gR="get_user_list",vR="change_role",mR="update_constraint_config",_R={INVALID_PARAMETER:4096,INVALID_OPERATION:4097,NOT_SUPPORTED:4098,DEVICE_NOT_FOUND:4099,INITIALIZE_FAILED:4100,SIGNAL_CHANNEL_SETUP_FAILED:16385,SIGNAL_CHANNEL_ERROR:16386,ICE_TRANSPORT_ERROR:16387,JOIN_ROOM_FAILED:16388,CREATE_OFFER_FAILED:16389,SIGNAL_CHANNEL_RECONNECTION_FAILED:16390,UPLINK_RECONNECTION_FAILED:16391,DOWNLINK_RECONNECTION_FAILED:16392,REMOTE_STREAM_NOT_EXIST:16400,CLIENT_BANNED:16448,SERVER_TIMEOUT:16449,SUBSCRIPTION_TIMEOUT:16450,PLAY_NOT_ALLOWED:16451,DEVICE_AUTO_RECOVER_FAILED:16452,START_PUBLISH_CDN_FAILED:16453,STOP_PUBLISH_CDN_FAILED:16454,START_MIX_TRANSCODE_FAILED:16455,STOP_MIX_TRANSCODE_FAILED:16456,NOT_SUPPORTED_H264:16457,SWITCH_ROLE_FAILED:16458,API_CALL_TIMEOUT:16459,SCHEDULE_FAILED:16460,API_CALL_ABORTED:16461,UNKNOWN:65535},yR=function(e){d(n,e);var t=_(n);function n(e){var r,i=e.name,o=void 0===i?"RtcError":i,a=e.message,c=e.code,u=void 0===c?_R.UNKNOWN:c,l=e.extraCode,d=void 0===l?0:l,p=e.constraint;s(this,n);var f="<".concat(function(e){for(var t in _R)if(_R[t]===e)return t;return"UNKNOWN"}(u)," 0x").concat(u.toString(16),">");return(r=t.call(this,a+"".concat(p?" constraint: ".concat(p):"")+"".concat(null!=a&&a.includes(f)?"":" "+f))).code_=u,r.extraCode_=d,r.name=o,r.message_=a,p&&(r.constraint=p),r}return u(n,[{key:"getCode",value:function(){return this.code_}},{key:"getExtraCode",value:function(){return this.extraCode_}}]),n}(v(Error)),bR=32768,IR=32769,TR=32770,CR=32771,SR=32772,ER=32773,MR=32774,kR=32775,wR=32777,OR=32778,DR=32779,AR=32780,RR=32781,xR=32782,LR=32783,NR=32784,PR=32785,jR=32786,UR=32787,GR=32788,VR=32789,FR=32790,BR=32791,qR=32792,HR=32793,zR=32794,KR=32795,WR=32796,YR=32797,JR=32798,$R=32799,XR=32800,ZR=32801,QR=32802,ex=32803,tx=32804,nx=new Map,rx=function(e,t){var n=nx.get(e);n||(nx.set(e,[]),n=nx.get(e)),n.push(t)},ix=function(e){var t=nx.get(e),n=[];return t?(nx.delete(e),n=t.map((function(e){return{uint32_event_id:e.eventId,uint64_date:e.timestamp,str_userid:e.remoteUserId,str_event_json:e.eventDesc}}))):n=[],n},ox=Object.prototype.hasOwnProperty;function ax(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return 0===e;if("string"==typeof e)return 0===e.length;if("function"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return""===e.message;if(lO(e))switch(Object.prototype.toString.call(e)){case"[object File]":case"[object Map]":case"[object Set]":return 0===e.size;case"[object Object]":for(var t in e)if(ox.call(e,t))return!1;return!0}return!1}var sx=function(){function e(){s(this,e);var t=nO(),n=t.name,r=t.version;this.roomIdMap_=new Map,this.configs_={sdkAppId:"",userId:"",version:Ha,env:CC,browserVersion:n+r,ua:navigator.userAgent}}return u(e,[{key:"setConfig",value:function(e){var t=e.sdkAppId,n=e.env,r=e.userId,i=e.roomId;t!==this.configs_.sdkAppId&&(this.configs_.sdkAppId=String(t)),this.configs_.env=n,this.configs_.userId=r,this.roomIdMap_.set(r,String(i))}},{key:"logEvent",value:function(e){if(!Qw){var t=n(n(n({},e),this.configs_),{},{userId:e.userId||this.configs_.userId});hO(t.code)&&(t.code="failed"===t.result?_R.UNKNOWN:0),this.sendRequest(cO(this.configs_.sdkAppId,wC),t)}}},{key:"logSuccessEvent",value:function(e){Qw||(this.logEvent(n(n({},e),{},{result:"success",roomId:this.roomIdMap_.get(e.userId)})),this.configs_.env===CC&&this.uploadEventToKibana(n(n({},e),{},{result:"success"})))}},{key:"logFailedEvent",value:function(e){if(!Qw){var t=e.eventType,r=e.code,i=e.error,o=e.userId,a={roomId:this.roomIdMap_.get(o),userId:o,eventType:t,result:"failed",code:r||(i instanceof yR?i.getExtraCode()||i.getCode():_R.UNKNOWN)};this.logEvent(a),this.configs_.env===CC&&this.uploadEventToKibana(n(n({},a),{},{error:i}))}}},{key:"uploadEventToKibana",value:function(e){var t="stat-".concat(e.eventType,"-").concat(e.result);"delta-join"!==e.eventType&&"delta-leave"!==e.eventType&&"delta-publish"!==e.eventType||(t="".concat(e.eventType,":").concat(e.delta)),this.uploadEvent({log:t,userId:e.userId}),"failed"===e.result&&(t="stat-".concat(e.eventType,"-").concat(e.result,"-").concat(e.code),this.uploadEvent({log:t,userId:e.userId,error:e.error}))}},{key:"uploadEvent",value:function(e){var t=e.log,n=e.userId,r=e.error,i={timestamp:im(),sdkAppId:this.configs_.sdkAppId,userId:n||this.configs_.userId,version:this.configs_.version,log:t};r&&(i.errorInfo=r.message),this.sendRequest(cO(this.configs_.sdkAppId,kC),i)}},{key:"sendRequest",value:function(e,t){var n=this;PD.getIsAbleToUpload()?NO({url:e,body:JSON.stringify(t)}).catch((function(){})):setTimeout((function(){n.sendRequest(e,t)}),1e3)}}]),e}(),cx=new sx,ux=function(){function e(t){s(this,e),this.client_=t.client,this.sdkAppId_=t.sdkAppId,this.userId_=t.userId,this.userSig_=t.userSig,this.url_=t.url,this.backupUrl_=t.backupUrl;var n="?sdkAppId=".concat(encodeURIComponent(this.sdkAppId_),"&userId=").concat(encodeURIComponent(this.userId_),"&userSig=").concat(encodeURIComponent(this.userSig_));this.urlWithParam_="".concat(this.url_).concat(n),this.backupUrlWithParam_="".concat(this.backupUrl_).concat(n),this.isConnected_=!1,this.isConnecting_=!1,this.socketInUse_=null,this.socket_=null,this.backupSocket_=null,this.backupTimer_=-1,this.signalInfo_={},this.currentState_=zA,this.reconnectionCount_=0,this.reconnectionTimer_=-1,this.lastMessageTime_=-1,this.seq_=0,this.log_=PD.createLogger({id:"ws|"+this.userId_,userId:this.userId_,sdkAppId:this.sdkAppId_}),this.emitter_=new jO}return u(e,[{key:"isOnline",get:function(){return this.currentState_===YA&&Date.now()-this.lastMessageTime_<12e3}},{key:"connect",value:function(){var e=this;return new Promise((function(t,n){e.log_.info("connect to url: ".concat(e.urlWithParam_)),e.emitConnectionStateChanged(KA),e.socket_=new WebSocket(e.urlWithParam_),e.bindSocket(e.socket_),e.backupTimer_=setTimeout((function(){e.isConnected_||(e.log_.info("trying to connect to backupUrl"),e.tryConnectBackup())}),5e3),e.once(qA,t),e.once(HA,n)}))}},{key:"tryConnectBackup",value:function(){this.backupSocket_||(this.unbindAndCloseSocket(iC),this.log_.debug("try to connect to url: ".concat(this.backupUrlWithParam_)),this.backupSocket_=new WebSocket(this.backupUrlWithParam_),this.bindSocket(this.backupSocket_))}},{key:"bindSocket",value:function(e){e.onopen=this.onopen.bind(this),e.onclose=this.onclose.bind(this),e.onerror=this.onerror.bind(this),e.onmessage=this.onmessage.bind(this)}},{key:"unbindSocket",value:function(e){e.onopen=function(){},e.onclose=function(){},e.onerror=function(){},e.onmessage=function(){}}},{key:"unbindAndCloseSocket",value:function(e){if(e===iC){if(this.socket_){this.unbindSocket(this.socket_);try{this.socket_.close(1e3)}catch(uY){}this.socket_=null}}else if(this.backupSocket_){this.unbindSocket(this.backupSocket_);try{this.backupSocket_.close(1e3)}catch(uY){}this.backupSocket_=null}}},{key:"clearBackupTimer",value:function(){-1!==this.backupTimer_&&(clearTimeout(this.backupTimer_),this.backupTimer_=-1)}},{key:"clearReconnectionTimer",value:function(){-1!==this.reconnectionTimer_&&(clearTimeout(this.reconnectionTimer_),this.reconnectionTimer_=-1)}},{key:"onopen",value:function(e){if(!this.isConnected_){this.isConnected_=!0,this.isConnecting_=!1,this.isReconnecting_&&ax(this.signalInfo_)&&this.stopReconnection(),this.clearBackupTimer(),e.target===this.socket_?(this.unbindAndCloseSocket(oC),this.socketInUse_=this.socket_):(this.unbindAndCloseSocket(iC),this.socketInUse_=this.backupSocket_);var t=e.target.url;this.log_.info("websocket[".concat(t,"] is connected")),this.currentState_===KA?this.addSignalEvent(BR,"signal channel is connected"):this.currentState_===WA&&this.addSignalEvent(KR,"signal channel reconnect success"),this.emitConnectionStateChanged(YA),this.emitter_.emit(qA)}}},{key:"onclose",value:function(e){var t=e.target.url,n=e.target===this.socketInUse_;this.log_.info("websocket[".concat(t," InUse: ").concat(n,"] is closed with code: ").concat(e.code)),e.target===this.socketInUse_&&(this.isConnected_=!1,this.emitConnectionStateChanged(zA),this.addSignalEvent(FR,"signal channel is disconnected"),e.wasClean&&1e3===e.code||(this.log_.warn("onclose code:".concat(e.code," reason:").concat(e.reason)),this.log_.warn("close current websocket and schedule a reconnect timeout"),this.socketInUse_.onclose=function(){},this.socketInUse_.close(4011),this.socket_=this.backupSocket_=this.socketInUse_=null,this.reconnect(iC)))}},{key:"onerror",value:function(e){var t=e.target.url;this.log_.error("websocket[".concat(t,"] error observed")),this.isConnected_?e.target===this.socketInUse_&&(this.isConnected_=!1,this.unbindAndCloseSocket(iC),this.unbindAndCloseSocket(oC),this.socketInUse_=null,this.reconnect(iC)):(this.isReconnecting_||cx.logFailedEvent({userId:this.client_.getUserId(),eventType:bS,code:_R.UNKNOWN}),e.target==this.socket_?(this.unbindAndCloseSocket(iC),this.reconnect(oC)):(this.unbindAndCloseSocket(oC),this.reconnect(iC))),this.isConnecting_=!1,this.isConnected_=!1}},{key:"onmessage",value:function(e){if(this.isConnected_){this.lastMessageTime_=Date.now();var t=JSON.parse(e.data),n=t.cmd,r=t.data,i=Object.values(JA),o=Object.keys(JA)[i.indexOf(n)],a=XA[o];switch($A.includes(n)||(this.log_.debug("received msg: ".concat(e.data)),this.log_.info("Received event: [ ".concat(a||"unknown cmd: "+n," ]"))),n){case JA.CHANNEL_SETUP_RESULT:if(0===t.code)this.signalInfo_.clientIp=r.clientIp,this.signalInfo_.signalIp=r.signalInnerIp,this.signalInfo_.tinyId=t.tinyId,r.svrTime&&function(e){nm=e-(new Date).getTime();var t=new Date;t.setTime(e),PD.info("baseTime from server: "+t+" offset: "+nm)}(r.svrTime),this.log_.info("ChannelSetup Success"),cx.logSuccessEvent({userId:this.userId_,eventType:bS}),this.emitter_.emit(VA,{signalInfo:this.signalInfo_});else{var s=new yR({code:_R.SIGNAL_CHANNEL_SETUP_FAILED,extraCode:t.code,message:oO({key:GE,data:{errorCode:t.code,errorMsg:t.message}})});this.log_.error("".concat(t.code,", ").concat(t.message)),this.close(),cx.logFailedEvent({userId:this.userId_,eventType:bS,error:s}),this.emitter_.emit(FA,s)}break;case JA.JOIN_ROOM_RESULT:0===t.code&&(this.signalInfo_.relayIp=r.relayOuterIp,this.signalInfo_.relayInnerIp=r.relayInnerIp,this.signalInfo_.relayPort=r.relayPort,this.log_.info("signalIp:".concat(this.signalInfo_.signalIp," clientIp:").concat(this.signalInfo_.clientIp," relayIp: ").concat(this.signalInfo_.relayIp))),this.emitter_.emit(a,{data:t});break;case JA.CHANNEL_RECONNECT_RESULT:0===t.code?(this.log_.warn("reconnect success"),this.stopReconnection(),cx.logSuccessEvent({userId:this.userId_,eventType:IS}),this.client_.syncUserList(),this.client_.checkConnectionsToReconnect()):(this.log_.warn("reconnect failed, ".concat(t.code," ").concat(t.message)),this.client_.reJoin());break;default:this.emitter_.emit(a,{data:t})}}}},{key:"addSignalEvent",value:function(e,t){rx(this.userId_,{eventId:e,eventDesc:t,timestamp:rm(),userId:this.userId_,tinyId:this.signalInfo_.tinyId})}},{key:"reconnect",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iC;if(this.isConnecting_||-1!==this.reconnectionTimer_)this.log_.info("signal channel is reconnecting, ignoring current reconnection");else{if(this.reconnectionCount_>=tS){this.log_.warn("SDK has tried reconnect signal channel for ".concat(tS," times, but all failed. please check your network"));var n=new yR({code:_R.SIGNAL_CHANNEL_RECONNECTION_FAILED,message:oO({key:UE})});return cx.logFailedEvent({userId:this.client_.getUserId(),eventType:IS,error:n}),this.addSignalEvent(WR,"signal channel reconnect fail"),void this.emitter_.emit(HA,n)}this.isConnecting_=!0,this.reconnectionCount_++,this.currentState_!==WA&&(this.emitConnectionStateChanged(WA),this.addSignalEvent(zR,"signal channel is reconnecting")),this.log_.warn("reconnecting to ".concat(t," signal channel [").concat(this.reconnectionCount_,"/").concat(tS,"]"));var r=this.getReconnectionUrl(t);t===iC?(this.socket_=new WebSocket(r),this.bindSocket(this.socket_)):(this.backupSocket_=new WebSocket(r),this.bindSocket(this.backupSocket_));var i=pO(this.reconnectionCount_);this.reconnectionTimer_=setTimeout((function(){e.log_.warn("reconnect ".concat(t," signal channel timeout(").concat(i/1e3,"s), close and try again")),e.isConnecting_=!1,e.clearReconnectionTimer(),e.unbindAndCloseSocket(t),e.reconnect(t===iC?oC:iC)}),i)}}},{key:"isConnected",value:function(){return this.isConnected_}},{key:"isReconnecting_",get:function(){return-1!==this.reconnectionTimer_}},{key:"getReconnectionUrl",value:function(e){var t=e===iC?this.urlWithParam_:this.backupUrlWithParam_;if(!ax(this.signalInfo_)&&-1===t.indexOf("&rc=1")){var n=this.client_.getRoomId(),r=this.client_.getUseStringRoomId();t+="&rc=1&relayInnerIp=".concat(this.signalInfo_.relayInnerIp,"&relayOuterIp=").concat(this.signalInfo_.relayIp,"&relayPort=").concat(this.signalInfo_.relayPort,"&roomId=").concat(n,"&useStringRoomId=").concat(r)}return t}},{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.isConnected_){var n={cmd:e,data:t,userId:this.userId_,tinyId:this.signalInfo_.tinyId,seq:++this.seq_};return this.socketInUse_.send(JSON.stringify(n)),n.seq}}},{key:"sendWaitForResponse",value:function(e){var t=this,n=e.command,r=e.data,i=e.timeout,o=void 0===i?5e3:i,a=e.responseCommand,s=e.commandDesc,c=e.enableLog,u=void 0===c||c;return new Promise((function(e,i){var c=setTimeout((function(){t.off(a,l);var e=new yR({code:_R.API_CALL_TIMEOUT,message:oO({key:jE,data:{commandDesc:s,command:n}})});u&&t.log_.warn(e),i(e)}),o),l=function n(r){r.data.seq===d&&(clearTimeout(c),t.off(a,n),e(r))};t.on(a,l);var d=t.send(n,r)}))}},{key:"sendWaitForResponseWithRetry",value:function(){var e=this,t=arguments.length<=0?void 0:arguments[0],n=t.commandDesc,r=t.command,i=t.retries,o=void 0===i?0:i,a=t.retryTimeout,s=void 0===a?0:a;return AD({retryFunction:this.sendWaitForResponse,onRetrying:function(t){e.log_.warn("".concat(n||r," timeout observed, retrying [").concat(t,"/").concat(o,"]"))},settings:{retries:o,timeout:s},context:this}).apply(void 0,arguments)}},{key:"getCurrentState",value:function(){return this.currentState_}},{key:"getSignalInfo",value:function(){return this.signalInfo_}},{key:"stopReconnection",value:function(){this.isReconnecting_&&(this.reconnectionCount_=0,this.clearReconnectionTimer())}},{key:"close",value:function(){this.log_.info("close SignalChannel"),this.clearBackupTimer(),this.stopReconnection(),this.signalInfo_={},this.isConnecting_=!1,this.isConnected_=!1,this.socketInUse_=null,this.unbindAndCloseSocket(iC),this.unbindAndCloseSocket(oC),this.emitConnectionStateChanged(zA)}},{key:"on",value:function(e,t,n){this.emitter_.on(e,t,n)}},{key:"removeListener",value:function(e,t,n){this.emitter_.removeListener(e,t,n)}},{key:"once",value:function(e,t,n){this.emitter_.once(e,t,n)}},{key:"off",value:function(e,t,n){this.emitter_.off(e,t,n)}},{key:"emitConnectionStateChanged",value:function(e){e!==this.currentState_&&(this.emitter_.emit(BA,{prevState:this.currentState_,state:e}),this.currentState_=e)}}]),e}(),lx=Ei,dx=vo.find,px=Cs,fx="find",hx=!0;fx in[]&&Array(1).find((function(){hx=!1})),lx({target:"Array",proto:!0,forced:hx},{find:function(e){return dx(this,e,arguments.length>1?arguments[1]:void 0)}}),px(fx);var gx={},vx={},mx={exports:{}},_x=mx.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+(null!=e["network-cost"]?" network-cost %d":"%v")}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+(null!=e.rateDenominator?"/%s":"")}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(_x).forEach((function(e){_x[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))})),function(e){var t=function(e){return String(Number(e))===e?Number(e):e},n=function(e,n,r){var i=e.name&&e.names;e.push&&!n[e.push]?n[e.push]=[]:i&&!n[e.name]&&(n[e.name]={});var o=e.push?{}:i?n[e.name]:n;!function(e,n,r,i){if(i&&!r)n[i]=t(e[1]);else for(var o=0;o<r.length;o+=1)null!=e[o+1]&&(n[r[o]]=t(e[o+1]))}(r.match(e.reg),o,e.names,e.name),e.push&&n[e.push].push(o)},r=mx.exports,i=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(e){var t={},o=[],a=t;return e.split(/(\r\n|\r|\n)/).filter(i).forEach((function(e){var t=e[0],i=e.slice(2);"m"===t&&(o.push({rtp:[],fmtp:[]}),a=o[o.length-1]);for(var s=0;s<(r[t]||[]).length;s+=1){var c=r[t][s];if(c.reg.test(i))return n(c,a,i)}})),t.media=o,t};var o=function(e,n){var r=n.split(/=(.+)/,2);return 2===r.length?e[r[0]]=t(r[1]):1===r.length&&n.length>1&&(e[r[0]]=void 0),e};e.parseParams=function(e){return e.split(/;\s?/).reduce(o,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(e){return e.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(e){for(var n=[],r=e.split(" ").map(t),i=0;i<r.length;i+=3)n.push({component:r[i],ip:r[i+1],port:r[i+2]});return n},e.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(o,{})}))},e.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var n,r=!1;return"~"!==e[0]?n=t(e):(n=t(e.substring(1,e.length)),r=!0),{scid:n,paused:r}}))}))}}(vx);var yx=mx.exports,bx=/%[sdv%]/g,Ix=function(e){var t=1,n=arguments,r=n.length;return e.replace(bx,(function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))},Tx=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var o=t.names[i];t.name?r.push(n[t.name][o]):r.push(n[t.names[i]])}else r.push(n[t.name]);return Ix.apply(null,r)},Cx=["v","o","s","i","u","e","p","c","b","t","r","z","a"],Sx=["i","c","b","a"],Ex=vx,Mx=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var n=t.outerOrder||Cx,r=t.innerOrder||Sx,i=[];return n.forEach((function(t){yx[t].forEach((function(n){n.name in e&&null!=e[n.name]?i.push(Tx(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){i.push(Tx(t,n,e))}))}))})),e.media.forEach((function(e){i.push(Tx("m",yx.m[0],e)),r.forEach((function(t){yx[t].forEach((function(n){n.name in e&&null!=e[n.name]?i.push(Tx(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){i.push(Tx(t,n,e))}))}))}))})),i.join("\r\n")+"\r\n"};gx.write=Mx,gx.parse=Ex.parse,gx.parseParams=Ex.parseParams,gx.parseFmtpConfig=Ex.parseFmtpConfig,gx.parsePayloads=Ex.parsePayloads,gx.parseRemoteCandidates=Ex.parseRemoteCandidates,gx.parseImageAttributes=Ex.parseImageAttributes,gx.parseSimulcastStreamList=Ex.parseSimulcastStreamList;var kx=function(e){return gx.parse(e)},wx=function(e){return gx.write(e)},Ox=function(e){var t=kx(e);return t.media.forEach((function(e){e.type===jT&&e.fmtp.forEach((function(e){e.config+=";sprop-stereo=1;stereo=1"}))})),wx(t)};function Dx(e){var t=kx(e);return t.media.forEach((function(e){if(e.type===UT){var t=new Set;e.rtp.forEach((function(e){var n=e.payload;return"H264"===e.codec&&t.add(n)})),e.fmtp.forEach((function(e){var n=e.payload,r=e.config.match(/apt=(\d+)/);r&&r[1]&&t.has(Number(r[1]))&&t.add(n)}));var n=function(e){var n=e.payload;return!t.has(n)};e.rtp=e.rtp.filter(n),e.rtcpFb=e.rtcpFb.filter(n),e.fmtp=e.fmtp.filter(n),e.payloads=e.payloads.split(" ").filter((function(e){return!t.has(Number(e))})).join(" ")}})),wx(t)}var Ax,Rx,xx,Lx,Nx=Ei,Px=te,jx=wr,Ux=i_,Gx=_f,Vx=A,Fx=RangeError,Bx=String,qx=Math.floor,Hx=Px(Gx),zx=Px("".slice),Kx=Px(1..toFixed),Wx=function(e,t,n){return 0===t?n:t%2==1?Wx(e,t-1,n*e):Wx(e*e,t/2,n)},Yx=function(e,t,n){for(var r=-1,i=n;++r<6;)i+=t*e[r],e[r]=i%1e7,i=qx(i/1e7)},Jx=function(e,t){for(var n=6,r=0;--n>=0;)r+=e[n],e[n]=qx(r/t),r=r%t*1e7},$x=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=Bx(e[t]);n=""===n?r:n+Hx("0",7-r.length)+r}return n};Nx({target:"Number",proto:!0,forced:Vx((function(){return"0.000"!==Kx(8e-5,3)||"1"!==Kx(.9,0)||"1.25"!==Kx(1.255,2)||"1000000000000000128"!==Kx(0xde0b6b3a7640080,0)}))||!Vx((function(){Kx({})}))},{toFixed:function(e){var t,n,r,i,o=Ux(this),a=jx(e),s=[0,0,0,0,0,0],c="",u="0";if(a<0||a>20)throw Fx("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return Bx(o);if(o<0&&(c="-",o=-o),o>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(o*Wx(2,69,1))-69)<0?o*Wx(2,-t,1):o/Wx(2,t,1),n*=4503599627370496,(t=52-t)>0){for(Yx(s,0,n),r=a;r>=7;)Yx(s,1e7,0),r-=7;for(Yx(s,Wx(10,r,1),0),r=t-1;r>=23;)Jx(s,1<<23),r-=23;Jx(s,1<<r),Yx(s,1,1),Jx(s,2),u=$x(s)}else Yx(s,0,n),Yx(s,1<<-t,0),u=$x(s)+Hx("0",a);return a>0?c+((i=u.length)<=a?"0."+Hx("0",a-i)+u:zx(u,0,i-a)+"."+zx(u,i-a)):c+u}});var Xx=(null===(Ax=window)||void 0===Ax?void 0:Ax.requestIdleCallback)||function(e){var t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1e3)},Zx=(null===(Rx=window)||void 0===Rx?void 0:Rx.cancelIdleCallback)||function(e){clearTimeout(e)},Qx=(null===(xx=window)||void 0===xx?void 0:xx.cancelAnimationFrame)||(null===(Lx=window)||void 0===Lx?void 0:Lx.mozCancelAnimationFrame),eL=function(){function e(){s(this,e)}return u(e,null,[{key:"generateTaskID",value:function(){return this.currentTaskID++}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:IE,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;r=n(n({},e===bE?{delay:2e3,count:0,backgroundTask:!0}:e===_E?{delay:1e4,count:0}:e===yE?{fps:60,delay:16.6,count:0,backgroundTask:!0}:{delay:2e3,count:0,backgroundTask:!0}),r),_O(t)&&(r=n(n({},r),t)),fO(e)&&(t=e,e=IE);var i=n({taskID:this.generateTaskID(),loopCount:0,intervalID:null,timeoutID:null,rafID:null,ricID:null,taskName:e,callback:t},r);return this.taskMap.set(i.taskID,i),this[e](i),i.taskID}},{key:"interval",value:function(e){var t=this;return e.intervalID=setInterval((function(){e.callback(),e.loopCount+=1,t.isBreakLoop(e)}),e.delay)}},{key:"timeout",value:function(e){var t=this;return e.timeoutID=setTimeout((function n(){if(e.callback(),e.loopCount+=1,!t.isBreakLoop(e))return e.timeoutID=setTimeout(n,e.delay)}),e.delay)}},{key:"ric",value:function(e){var t,n=this,r=CO();return e.ricID=Xx((function i(){if((t=CO()-r)>=e.delay&&(r=CO()-Math.floor(t%e.delay),e.callback(),e.loopCount+=1),!n.isBreakLoop(e))return e.ricID=Xx(i,{timeout:e.delay})}),{timeout:e.delay})}},{key:"raf",value:function(e){var t=this;e.delay=(1e3/e.fps).toFixed(2);var n,r=CO(),i=function i(){if(document.hidden&&e.backgroundTask){if(n=CO()-r,r=CO(),e.callback(),e.loopCount+=1,t.isBreakLoop(e))return;return e.timeoutID=setTimeout(i,e.delay-Math.floor(n%e.delay))}if((n=CO()-r)>=e.delay&&(r=CO()-Math.floor(n%e.delay),e.callback(),e.loopCount+=1),!t.isBreakLoop(e))return e.rafID=requestAnimationFrame(i)};if(e.rafID=requestAnimationFrame(i),e.backgroundTask){var o=function(){if(document.hidden){var t=CO()-r;t>=e.delay?i():e.timeoutID=setTimeout(i,e.delay-t)}};document.addEventListener("visibilitychange",o),e.onVisibilitychange=o,document.hidden&&o()}return e.taskID}},{key:"hasTask",value:function(e){return this.taskMap.has(e)}},{key:"clearTask",value:function(e){if(!this.taskMap.has(e))return!0;var t=this.taskMap.get(e),n=t.intervalID,r=t.timeoutID,i=t.rafID,o=t.ricID,a=t.onVisibilitychange;return n&&clearInterval(n),r&&clearTimeout(r),i&&Qx(i),o&&Zx(o),a&&document.removeEventListener("visibilitychange",a),this.taskMap.delete(e),!0}},{key:"isBreakLoop",value:function(e){return!this.taskMap.has(e.taskID)||0!==e.count&&e.loopCount>=e.count&&(this.clearTask(e.taskID),!0)}}]),e}();l(eL,"taskMap",new Map),l(eL,"currentTaskID",1);var tL=function(){function e(){s(this,e),this.prefix_="TRTC",this.queue_=new Map,this.checkStorage()}return u(e,[{key:"getRealKey",value:function(e){return"".concat(this.prefix_,"_").concat(e)}},{key:"checkStorage",value:function(){var e=this;if(eO()){var t=Object.keys(localStorage).filter((function(t){if(t.startsWith(e.prefix_)){var n=JSON.parse(localStorage.getItem(t));if(n&&n.expiresIn<Date.now())return!0}return!1}));t.forEach((function(e){return localStorage.removeItem(e)}))}}},{key:"doFlush",value:function(){if(eO())try{var e,t=E(this.queue_);try{for(t.s();!(e=t.n()).done;){var n=I(e.value,2),r=n[0],i=n[1];localStorage.setItem(r,JSON.stringify(i))}}catch(a){t.e(a)}finally{t.f()}}catch(uY){PD.warn(uY)}}},{key:"getItem",value:function(e){if(!eO())return null;try{var t=JSON.parse(localStorage.getItem(this.getRealKey(e)));return t&&t.expiresIn>=Date.now()?t.value:null}catch(uY){PD.warn(uY)}}},{key:"setItem",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(eO())try{var r={expiresIn:Date.now()+WS,value:t};n?localStorage.setItem(this.getRealKey(e),JSON.stringify(r)):(this.queue_.set(this.getRealKey(e),r),eL.hasTask(this.intervalId_)||(this.intervalId_=eL.run(_E,this.doFlush.bind(this),{count:1})))}catch(uY){PD.warn(uY)}}},{key:"deleteItem",value:function(e){if(!eO())return!1;try{return e=this.getRealKey(e),this.queue_.delete(e),localStorage.removeItem(e),!0}catch(uY){return PD.warn(uY),!1}}},{key:"clear",value:function(){if(eO())try{localStorage.clear()}catch(uY){PD.warn(uY)}}}]),e}(),nL=new tL,rL={result:!1,detail:{isBrowserSupported:!1,isWebRTCSupported:!1,isMediaDevicesSupported:!1,isH264EncodeSupported:!1,isVp8EncodeSupported:!1,isH264DecodeSupported:!1,isVp8DecodeSupported:!1}},iL="checkResult",oL=function(){return!kw&&!tw&&!(rw&&iw<80)&&!(Qk&&ew<56)},aL=function(){return["RTCPeerConnection","webkitRTCPeerConnection","RTCIceGatherer"].filter((function(e){return e in window})).length>0},sL=function(){if(!navigator.mediaDevices)return!1;var e=["getUserMedia","enumerateDevices"];return e.filter((function(e){return e in navigator.mediaDevices})).length===e.length},cL=function(){var e=a(r().mark((function e(){var t,n,i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!rL.detail.isH264EncodeSupported||!rL.detail.isVp8EncodeSupported){e.next=2;break}return e.abrupt("return",{isH264EncodeSupported:rL.detail.isH264EncodeSupported,isVp8EncodeSupported:rL.detail.isVp8EncodeSupported});case 2:return t="",n=!1,i=!1,e.prev=5,o=new RTCPeerConnection,(a=document.createElement(PT)).getContext("2d"),s=a.captureStream(0),o.addTrack(s.getVideoTracks()[0],s),e.next=13,o.createOffer();case 13:return-1!==(t=e.sent).sdp.toLowerCase().indexOf("h264")&&(n=!0),-1!==t.sdp.toLowerCase().indexOf("vp8")&&(i=!0),o.close(),rL.detail.isH264EncodeSupported=n,rL.detail.isVp8EncodeSupported=i,e.abrupt("return",{isH264EncodeSupported:rL.detail.isH264EncodeSupported,isVp8EncodeSupported:rL.detail.isVp8EncodeSupported});case 22:return e.prev=22,e.t0=e.catch(5),e.abrupt("return",{isH264EncodeSupported:!1,isVp8EncodeSupported:!1});case 25:case"end":return e.stop()}}),e,null,[[5,22]])})));return function(){return e.apply(this,arguments)}}();function uL(){return lL.apply(this,arguments)}function lL(){return lL=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=a(r().mark((function e(t){var n,i,o,s,c,u,l,d,p,f,h,g,v,m;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={encode:!1,decode:!1},i=null,e.prev=2,o=document.createElement("canvas"),s=o.getContext("2d"),o.width=640,o.height=480,c=setInterval((function(){s.fillText("test",Math.floor(640*Math.random()),Math.floor(480*Math.random()))}),33),u=-1,l=-1,i=function(){clearInterval(u),clearInterval(c),clearTimeout(l),p.close(),f.close(),d.getTracks().forEach((function(e){return e.stop()}))},l=setTimeout((function(){i(),t(n)}),3e3),d=o.captureStream(),p=new RTCPeerConnection({}),f=new RTCPeerConnection({offerToReceiveAudio:!0,offerToReceiveVideo:!0}),p.addEventListener("icecandidate",(function(e){return f.addIceCandidate(e.candidate)})),f.addEventListener("icecandidate",(function(e){return p.addIceCandidate(e.candidate)})),p.addTrack(d.getVideoTracks()[0],d),e.next=20,p.createOffer();case 20:return h=e.sent,e.next=23,p.setLocalDescription(h);case 23:return e.next=25,f.setRemoteDescription(h);case 25:return e.next=27,f.createAnswer();case 27:return g=e.sent,v=kx(g.sdp),m=v.media[0].rtp.findIndex((function(e){return"H264"===e.codec})),v.media[0].rtp=[v.media[0].rtp[m]],v.media[0].fmtp=v.media[0].fmtp.filter((function(e){return e.payload===v.media[0].rtp[0].payload})),v.media[0].rtcpFb=v.media[0].rtcpFb.filter((function(e){return e.payload===v.media[0].rtp[0].payload})),g.sdp=wx(v),e.next=36,f.setLocalDescription(g);case 36:return e.next=38,p.setRemoteDescription(g);case 38:u=setInterval(a(r().mark((function e(){var o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.encode&&n.decode&&(i(),t(n)),e.next=3,p.getStats();case 3:return o=e.sent,e.next=6,f.getStats();case 6:a=e.sent,n.encode||o.forEach((function(e){"outbound-rtp"===e.type&&e.mediaType===UT&&e.framesEncoded>0&&(n.encode=!0)})),n.decode||a.forEach((function(e){"inbound-rtp"===e.type&&e.mediaType===UT&&e.framesDecoded>0&&(n.decode=!0)}));case 9:case"end":return e.stop()}}),e)}))),500),e.next=46;break;case 41:e.prev=41,e.t0=e.catch(2),i(),PD.warn(e.t0),t(n);case 46:case"end":return e.stop()}}),e,null,[[2,41]])})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),lL.apply(this,arguments)}var dL=function(){var e=a(r().mark((function e(){var t,n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!rL.detail.isH264DecodeSupported||!rL.detail.isVp8DecodeSupported){e.next=2;break}return e.abrupt("return",{isH264DecodeSupported:rL.detail.isH264DecodeSupported,isVp8DecodeSupported:rL.detail.isVp8DecodeSupported});case 2:return t="",n=!1,i=!1,e.prev=5,o=new RTCPeerConnection,e.next=9,o.createOffer({offerToReceiveAudio:1,offerToReceiveVideo:1});case 9:return-1!==(t=e.sent).sdp.toLowerCase().indexOf("h264")&&(n=!0),-1!==t.sdp.toLowerCase().indexOf("vp8")&&(i=!0),o.close(),e.abrupt("return",{isH264DecodeSupported:n,isVp8DecodeSupported:i});case 16:return e.prev=16,e.t0=e.catch(5),e.abrupt("return",{isH264DecodeSupported:!1,isVp8DecodeSupported:!1});case 19:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(){return e.apply(this,arguments)}}(),pL=function(){var e=a(r().mark((function e(){var t,n,i,o,a,s,c,u,l,d,p,f,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hL()){e.next=2;break}return e.abrupt("return",rL);case 2:return t=oL(),n=aL(),i=sL(),e.next=7,cL();case 7:return o=e.sent,a=o.isH264EncodeSupported,s=o.isVp8EncodeSupported,e.next=12,dL();case 12:if(c=e.sent,u=c.isH264DecodeSupported,l=c.isVp8DecodeSupported,a&&s){e.next=21;break}return e.next=18,cL();case 18:d=e.sent,a=d.isH264EncodeSupported,s=d.isVp8EncodeSupported;case 21:if(!(a&&u&&(jw||Gw||Yw)&&!uw&&Fw()<79)){e.next=29;break}return e.next=24,uL();case 24:p=e.sent,f=p.encode,h=p.decode,a=f,u=h;case 29:return rL.result=t&&n&&i&&(a||s)&&(u||l),rL.detail.isBrowserSupported=t,rL.detail.isWebRTCSupported=n,rL.detail.isMediaDevicesSupported=i,rL.detail.isH264EncodeSupported=a,rL.detail.isVp8EncodeSupported=s,rL.detail.isH264DecodeSupported=u,rL.detail.isVp8DecodeSupported=l,gL(),nL.setItem(iL,{ua:navigator.userAgent,checkResult:rL},!0),e.abrupt("return",rL);case 40:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fL=function(e,t){var n=null;return function(){if(n)return n;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=e.apply(t||this,i)).then((function(e){return n=null,e})).catch((function(e){throw n=null,e})),n}}(pL);function hL(){return Object.keys(rL.detail).findIndex((function(e){return!rL.detail[e]}))>=0}function gL(){hL()&&(PD.warn(oO({key:lk})),PD.info("".concat(navigator.userAgent," ").concat(JSON.stringify(rL.detail))))}function vL(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia)}function mL(){return"RTCPeerConnection"in window&&"getReceivers"in window.RTCPeerConnection.prototype}function _L(){return"RTCPeerConnection"in window&&"getSenders"in window.RTCPeerConnection.prototype}function yL(){return"RTCPeerConnection"in window&&"getTransceivers"in window.RTCPeerConnection.prototype}function bL(){return"RTCPeerConnection"in window&&"addTransceiver"in window.RTCPeerConnection.prototype}function IL(){return"RTCRtpSender"in window&&"replaceTrack"in window.RTCRtpSender.prototype}function TL(){return"RTCRtpSender"in window&&"setParameters"in window.RTCRtpSender.prototype&&_L()}function CL(){return!!hO(navigator.mediaDevices)&&(PD.error(Nk.NOT_SUPPORTED_MEDIA),!0)}function SL(){return"http:"===location.protocol&&!Qw&&(PD.warn(oO({key:uk})),!0)}var EL="RTCRtpSender"in window&&"createEncodedStreams"in window.RTCRtpSender.prototype&&Fw()>=86;function ML(e){return!("candidate-pair"!==e.type||!e.nominated||"in-progress"!==e.state&&"succeeded"!==e.state)&&!(mO(e.selected)&&!e.selected)}var kL=new Map([[Zk,"Android"],[Xk,"iOS"],[Sw,"Windows"],[Ew,"MacOS"],[Mw,"Linux"]]);function wL(){var e="unknown";return kL.get(!0)&&(e=kL.get(!0)),e}function OL(){var e="";return screen.width&&(e+=(screen.width?screen.width*window.devicePixelRatio:"")+" * "+(screen.height?screen.height*window.devicePixelRatio:"")),e}function DL(){var e=!1;return(navigator.getUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)&&(e=!0),e}function AL(){for(var e={isSupported:!1},t=["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"],n=0;n<t.length;n++)if(t[n]in window){e.isSupported=!0;break}return e.isSupported}function RL(){return!(fw&&Fw()<86)&&!(Xk&&vO(Jw)&&Jw<15)&&!(Hw&&Hw<63)&&!(!oL()||!("captureStream"in HTMLCanvasElement.prototype))}var xL=window.MediaStreamTrack&&"getSettings"in MediaStreamTrack.prototype,LL=window.MediaStreamTrack&&"getCapabilities"in MediaStreamTrack.prototype,NL=function(){var e,t,n;return(null===(e=window)||void 0===e?void 0:e.OffscreenCanvas)&&(null===(t=window)||void 0===t?void 0:t.MediaStreamTrackProcessor)&&(null===(n=window)||void 0===n?void 0:n.MediaStreamTrackGenerator)};!function(){SL();var e=nL.getItem(iL);e&&e.ua===navigator.userAgent&&(rL=e.checkResult),fL()}();var PL={STREAM_ADDED:"stream-added",STREAM_REMOVED:"stream-removed",STREAM_UPDATED:"stream-updated",STREAM_PUBLISHED:"stream-published",STREAM_SUBSCRIBED:"stream-subscribed",STREAM_UNSUBSCRIBED:"stream-unsubscribed",STATE_CHANGED:"state-changed",ERROR:"error",CONNECTION_STATE_CHANGED:"connection-state-changed",SEI_MESSAGE:lC},jL={STREAM_ADDED:"stream-added",STREAM_REMOVED:"stream-removed",STREAM_UPDATED:"stream-updated",STREAM_SUBSCRIBED:"stream-subscribed",CONNECTION_STATE_CHANGED:"connection-state-changed",PEER_JOIN:"peer-join",PEER_LEAVE:"peer-leave",MUTE_AUDIO:"mute-audio",MUTE_VIDEO:"mute-video",UNMUTE_AUDIO:"unmute-audio",UNMUTE_VIDEO:"unmute-video",CLIENT_BANNED:"client-banned",NETWORK_QUALITY:"network-quality",AUDIO_VOLUME:"audio-volume",SEI_MESSAGE:lC,ERROR:"error"},UL="player-state-changed",GL="screen-sharing-stopped",VL="connection-state-changed",FL="device-auto-recovered",BL="error",qL="player-state-changed",HL=kE;Ei({target:"String",proto:!0,forced:OE("small")},{small:function(){return HL(this,"small","","")}});var zL=function(){function e(t){s(this,e);var n=t.getUserId();this.log_=PD.createLogger({id:n,userId:n,sdkAppId:t.getSDKAppId()}),this.prevReportTime_=0,this.prevReport_={},this.prevEncoderImplementation_="",this.prevQualityLimitationReason_="",this.prevDecoderImplementationMap_=new Map}var t,n,i,o;return u(e,[{key:"statInterval",get:function(){return 0===this.prevReportTime_?2:(Date.now()-this.prevReportTime_)/1e3}},{key:"getSenderStats",value:(o=a(r().mark((function e(t){var n,i,o,a,s=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={audio:{bytesSent:0,packetsSent:0,audioLevel:0,totalAudioEnergy:0},video:{bytesSent:0,packetsSent:0,framesEncoded:0,frameWidth:0,frameHeight:0,framesSent:0,fpsCapture:0},small:{bytesSent:0,packetsSent:0,framesEncoded:0,frameWidth:0,frameHeight:0,framesSent:0,fpsCapture:0},auxiliary:{bytesSent:0,packetsSent:0,framesEncoded:0,frameWidth:0,frameHeight:0,framesSent:0,fpsCapture:0},rtt:0},i=t.getPeerConnection(),o=t.getSSRC(),!i){e.next=15;break}return e.prev=4,e.next=7,i.getStats();case 7:e.sent.forEach((function(e){if("outbound-rtp"===e.type)if(e.mediaType===UT){if(!Qk&&0===e.bytesSent)return;e.ssrc!==o.video||hO(e.encoderImplementation)||s.prevEncoderImplementation_===e.encoderImplementation||(s.log_.info("encoderImplementation change to ".concat(e.encoderImplementation)),s.prevEncoderImplementation_=e.encoderImplementation),e.ssrc!==o.video||hO(e.qualityLimitationReason)||s.prevQualityLimitationReason_===e.qualityLimitationReason||(s.log_.info("qualityLimitationReason change to ".concat(e.qualityLimitationReason)),s.prevQualityLimitationReason_=e.qualityLimitationReason);var r=UT;e.ssrc===o.small?r=VT:e.ssrc===o.auxiliary&&(r=BT),n[r].bytesSent=e.bytesSent,n[r].packetsSent=e.packetsSent,n[r].framesEncoded=e.framesEncoded}else e.mediaType===jT&&(n.audio.bytesSent=e.bytesSent,n.audio.packetsSent=e.packetsSent);else"candidate-pair"===e.type?ML(e)&&vO(e.currentRoundTripTime)&&(n.rtt=Math.floor(1e3*e.currentRoundTripTime)):"media-source"===e.type&&(e.kind===jT?(n.audio.audioLevel=e.audioLevel||0,n.audio.totalAudioEnergy=e.totalAudioEnergy||0):e.kind===UT&&(e.trackIdentifier===t.getVideoTrackId(UT)?n.video.fpsCapture=e.framesPerSecond:e.trackIdentifier===t.getVideoTrackId(BT)?n.auxiliary.fpsCapture=e.framesPerSecond:n.small.fpsCapture=e.framesPerSecond));var i;hO(e.audioLevel)||(n.audio.audioLevel=e.audioLevel||0,n.audio.totalAudioEnergy=e.totalAudioEnergy||0),hO(e.frameWidth)||(e.trackIdentifier===t.getVideoTrackId(UT)||e.ssrc===o.video?i=UT:e.trackIdentifier===t.getVideoTrackId(BT)||e.ssrc===o.auxiliary?i=BT:e.trackIdentifier!==t.getVideoTrackId(VT)&&e.ssrc!==o.small||(i=VT),i&&(n[i].frameWidth=e.frameWidth,n[i].frameHeight=e.frameHeight,n[i].framesSent=e.framesSent))})),0===n.audio.audioLevel&&(n.audio.audioLevel=(null===(a=t.getLocalStream())||void 0===a?void 0:a.getInternalAudioLevel())||0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),this.log_.warn("failed to getStats on sender connection "+e.t0);case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}}),e,this,[[4,12]])}))),function(e){return o.apply(this,arguments)})},{key:"getReceiverStats",value:(i=a(r().mark((function e(t){var n,i,o,a,s,c=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={tinyId:t.getTinyId(),userId:t.getUserId(),rtt:0,hasAudio:!1,hasVideo:!1,hasAuxiliary:!1,audio:{bytesReceived:0,packetsReceived:0,packetsLost:0,jitter:0,audioLevel:0,totalAudioEnergy:0},video:{bytesReceived:0,packetsReceived:0,packetsLost:0,framesReceived:0,framesDecoded:0,frameWidth:0,frameHeight:0},auxiliary:{bytesReceived:0,packetsReceived:0,packetsLost:0,framesReceived:0,framesDecoded:0,frameWidth:0,frameHeight:0}},!(i=t.getPeerConnection())){e.next=16;break}return e.prev=3,o=t.getSSRC(),a=t.getTrackState(),e.next=8,i.getStats();case 8:e.sent.forEach((function(e){if("inbound-rtp"===e.type){if(e.mediaType===jT&&e.ssrc===o.audio&&a.audio)n.audio.packetsReceived=e.packetsReceived,n.audio.bytesReceived=e.bytesReceived,n.audio.packetsLost=e.packetsLost,n.audio.jitter=e.jitter,n.hasAudio=!0;else if(e.mediaType===UT){if(Qk&&0===e.bytesReceived)return;e.ssrc===o.video&&a.video&&(n.video.packetsReceived=e.packetsReceived,n.video.bytesReceived=e.bytesReceived,n.video.packetsLost=e.packetsLost,n.video.framesReceived=e.framesReceived,n.video.framesDecoded=e.framesDecoded,n.video.fpsDecoded=e.framesPerSecond,n.hasVideo=!0,!e.decoderImplementation||c.prevDecoderImplementationMap_.has(n.userId)&&c.prevDecoderImplementationMap_.get(n.userId)===e.decoderImplementation||(c.log_.info("".concat(n.userId," decoderImplementation change to ").concat(e.decoderImplementation)),c.prevDecoderImplementationMap_.set(n.userId,e.decoderImplementation))),e.ssrc===o.auxiliary&&a.auxiliary&&(n.auxiliary.packetsReceived=e.packetsReceived,n.auxiliary.bytesReceived=e.bytesReceived,n.auxiliary.packetsLost=e.packetsLost,n.auxiliary.framesReceived=e.framesReceived,n.auxiliary.framesDecoded=e.framesDecoded,n.auxiliary.fpsDecoded=e.framesPerSecond,n.hasAuxiliary=!0)}}else"candidate-pair"===e.type&&ML(e)&&vO(e.currentRoundTripTime)&&(n.rtt=Math.floor(1e3*e.currentRoundTripTime));hO(e.frameWidth)||(e.trackIdentifier!==t.getMainStreamVideoTrackId()&&e.ssrc!==o.video||(n.video.frameWidth=e.frameWidth,n.video.frameHeight=e.frameHeight),e.trackIdentifier!==t.getAuxStreamVideoTrackId()&&e.ssrc!==o.auxiliary||(n.auxiliary.frameWidth=e.frameWidth,n.auxiliary.frameHeight=e.frameHeight)),hO(e.audioLevel)||(n.audio.audioLevel=e.audioLevel||0,n.audio.totalAudioEnergy=e.totalAudioEnergy||0)})),0===n.audio.audioLevel&&(n.audio.audioLevel=(null===(s=t.getMainStream())||void 0===s?void 0:s.getInternalAudioLevel())||0),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),this.log_.warn("failed to getStats on receiver connection "+e.t0);case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,this,[[3,13]])}))),function(e){return i.apply(this,arguments)})},{key:"getStats",value:(n=a(r().mark((function e(t,n){var i,o,a,s,c,u,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i={},!t){e.next=5;break}return e.next=4,this.getSenderStats(t);case 4:i=e.sent;case 5:o=[],a=E(n),e.prev=7,a.s();case 9:if((s=a.n()).done){e.next=17;break}return(c=I(s.value,2))[0],u=c[1],e.next=13,this.getReceiverStats(u);case 13:l=e.sent,o.push(l);case 15:e.next=9;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),a.e(e.t0);case 22:return e.prev=22,a.f(),e.finish(22);case 25:return e.abrupt("return",{senderStats:i,receiverStats:o});case 26:case"end":return e.stop()}}),e,this,[[7,19,22,25]])}))),function(e,t){return n.apply(this,arguments)})},{key:"getDifferenceValue",value:function(e,t){if(ax(e))return t;var n=t-e;return n<0?0:n}},{key:"prepareReport",value:function(e){var t=this,n=e.stats,r=e.report,i=e.freezeMap;if(!ax(n.senderStats)){var o;o={uint32_audio_level:1e8*n.senderStats.audio.audioLevel,uint32_audio_energy:1e6*n.senderStats.audio.totalAudioEnergy,uint32_audio_codec_bitrate:n.senderStats.audio.bytesSent,audioLevel:n.senderStats.audio.audioLevel};var a=[],s={uint32_video_stream_type:2,uint32_video_codec_fps:n.senderStats.video.framesSent,uint32_video_capture_fps:n.senderStats.video.fpsCapture,uint32_video_width:n.senderStats.video.frameWidth,uint32_video_height:n.senderStats.video.frameHeight,uint32_video_codec_bitrate:n.senderStats.video.bytesSent,uint32_video_enc_fps:n.senderStats.video.framesEncoded};if(a.push(s),n.senderStats.small.bytesSent){var c={uint32_video_stream_type:3,uint32_video_codec_fps:n.senderStats.small.framesSent||0,uint32_video_capture_fps:n.senderStats.small.fpsCapture||0,uint32_video_width:n.senderStats.small.frameWidth||0,uint32_video_height:n.senderStats.small.frameHeight||0,uint32_video_codec_bitrate:n.senderStats.small.bytesSent,uint32_video_enc_fps:n.senderStats.small.framesEncoded||0};a.push(c)}if(n.senderStats.auxiliary.bytesSent){var u={uint32_video_stream_type:7,uint32_video_codec_fps:n.senderStats.auxiliary.framesSent||0,uint32_video_capture_fps:n.senderStats.auxiliary.fpsCapture||0,uint32_video_width:n.senderStats.auxiliary.frameWidth||0,uint32_video_height:n.senderStats.auxiliary.frameHeight||0,uint32_video_codec_bitrate:n.senderStats.auxiliary.bytesSent,uint32_video_enc_fps:n.senderStats.auxiliary.framesEncoded||0};a.push(u)}var l={uint32_bitrate:0,uint32_rtt:n.senderStats.rtt};r.msg_up_stream_info={msg_audio_status:o,msg_video_status:a,msg_network_status:l}}var d=this.statInterval;r.msg_down_stream_info=[],n.receiverStats.forEach((function(e){var t={};if(t.msg_user_info={str_identifier:e.userId,uint64_tinyid:e.tinyId},t.msg_network_status={uint32_rtt:e.rtt},t.msg_video_status={},e.hasAudio){var n={uint32_audio_codec_bitrate:e.audio.bytesReceived,uint32_audio_total_bitrate:e.audio.bytesReceived,uint32_audio_level:1e8*e.audio.audioLevel,uint32_audio_energy:1e6*e.audio.totalAudioEnergy,uint32_audio_receive:e.audio.packetsReceived,uint32_audio_origin_lost:e.audio.packetsLost,audioLevel:e.audio.audioLevel};t.msg_audio_status=n}if(t.msg_video_status=[],e.hasVideo){var o=i.get(e.userId+"_"+FC),a=o?o.duration:0,s={uint32_video_stream_type:2,uint32_video_receive_fps:e.video.framesReceived,uint32_video_width:e.video.frameWidth,uint32_video_height:e.video.frameHeight,uint32_video_codec_bitrate:e.video.bytesReceived,uint32_video_receive:e.video.packetsReceived,uint32_video_origin_lost:e.video.packetsLost,uint32_video_block_time:a,uint32_video_dec_fps:e.video.framesDecoded};t.msg_video_status.push(s)}if(e.hasAuxiliary){var c=i.get(e.userId+"_"+BC),u=c?c.duration:0,l={uint32_video_stream_type:7,uint32_video_receive_fps:e.auxiliary.framesReceived,uint32_video_width:e.auxiliary.frameWidth,uint32_video_height:e.auxiliary.frameHeight,uint32_video_codec_bitrate:e.auxiliary.bytesReceived,uint32_video_receive:e.auxiliary.packetsReceived+e.auxiliary.packetsLost,uint32_video_origin_lost:e.auxiliary.packetsLost,uint32_video_block_time:u,uint32_video_dec_fps:e.auxiliary.framesDecoded};t.msg_video_status.push(l)}r.msg_down_stream_info.push(t)}));var p=this.prevReport_;if(this.prevReport_=JSON.parse(JSON.stringify(r)),r.msg_up_stream_info.msg_audio_status&&p.msg_up_stream_info.msg_audio_status){var f=p.msg_up_stream_info.msg_audio_status,h=r.msg_up_stream_info.msg_audio_status,g=this.getDifferenceValue(f.uint32_audio_codec_bitrate,h.uint32_audio_codec_bitrate);h.uint32_audio_codec_bitrate=Math.round(8*g/d),r.msg_up_stream_info.msg_network_status.uint32_bitrate+=h.uint32_audio_codec_bitrate}var v=p.msg_up_stream_info.msg_video_status;r.msg_up_stream_info.msg_video_status.forEach((function(e){var n=v.find((function(t){return t.uint32_video_stream_type===e.uint32_video_stream_type}));if(!n||0===n.uint32_video_codec_bitrate)return e.uint32_video_codec_bitrate=0,e.uint32_video_enc_fps=0,void(e.uint32_video_codec_fps=0);var i=n.uint32_video_codec_bitrate,o=n.uint32_video_enc_fps,a=n.uint32_video_codec_fps,s=t.getDifferenceValue(i,e.uint32_video_codec_bitrate);e.uint32_video_codec_bitrate=Math.round(8*s/d),r.msg_up_stream_info.msg_network_status.uint32_bitrate+=e.uint32_video_codec_bitrate,e.uint32_video_enc_fps=Math.round(t.getDifferenceValue(o,e.uint32_video_enc_fps)/d),e.uint32_video_codec_fps=Math.round(t.getDifferenceValue(a,e.uint32_video_codec_fps)/d)}));var m=r.msg_down_stream_info,_=p.msg_down_stream_info;return m.forEach((function(e){var n=_.find((function(t){return t.msg_user_info.uint64_tinyid===e.msg_user_info.uint64_tinyid}));if(n){if(e.msg_audio_status&&n.msg_audio_status){var r=e.msg_audio_status,i=n.msg_audio_status;r.uint32_audio_origin_lost=t.getDifferenceValue(i.uint32_audio_origin_lost,r.uint32_audio_origin_lost),r.uint32_audio_receive=t.getDifferenceValue(i.uint32_audio_receive,r.uint32_audio_receive),r.uint32_audio_receive+=r.uint32_audio_origin_lost;var o=t.getDifferenceValue(i.uint32_audio_codec_bitrate,r.uint32_audio_codec_bitrate);r.uint32_audio_codec_bitrate=Math.round(8*o/d),r.uint32_audio_total_bitrate=Math.round(8*o/d)}if(e.msg_video_status&&n.msg_video_status){var a=e.msg_video_status,s=n.msg_video_status;a.forEach((function(e){var n=s.find((function(t){return t.uint32_video_stream_type===e.uint32_video_stream_type}));if(!n)return e.uint32_video_receive=0,e.uint32_video_origin_lost=0,e.uint32_video_codec_bitrate=0,e.uint32_video_receive_fps=0,void(e.uint32_video_dec_fps=0);var r=n.uint32_video_receive,i=n.uint32_video_origin_lost,o=n.uint32_video_codec_bitrate,a=n.uint32_video_receive_fps,c=n.uint32_video_dec_fps;e.uint32_video_origin_lost=t.getDifferenceValue(i,e.uint32_video_origin_lost),e.uint32_video_receive=t.getDifferenceValue(r,e.uint32_video_receive)+e.uint32_video_origin_lost;var u=t.getDifferenceValue(o,e.uint32_video_codec_bitrate);e.uint32_video_codec_bitrate=Math.round(8*u/d);var l=t.getDifferenceValue(a,e.uint32_video_receive_fps);e.uint32_video_receive_fps=Math.round(l/d),e.uint32_video_dec_fps=Math.round(t.getDifferenceValue(c,e.uint32_video_dec_fps)/d)}))}}})),r}},{key:"getStatsReport",value:(t=a(r().mark((function e(t){var n,i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uplinkConnection,i=t.downlinkConnections,o=t.freezeMap,a={msg_up_stream_info:{msg_audio_status:{uint32_audio_format:0,uint32_audio_sample_rate:0,uint32_audio_codec_bitrate:0,uint32_audio_receive:0,uint32_audio_origin_lost:0,uint32_audio_level:0,uint32_audio_energy:0,audioLevel:0},msg_video_status:[{uint32_video_stream_type:0,uint32_video_codec_fps:0,uint32_video_capture_fps:0,uint32_video_width:0,uint32_video_height:0,uint32_video_codec_bitrate:0,uint32_video_receive:0,uint32_video_origin_lost:0,uint32_video_final_lost:0,uint32_video_enc_fps:0}],msg_network_status:{uint32_bitrate:0,uint32_rtt:0,uint32_lost:0}},msg_down_stream_info:[{msg_user_info:{str_identifier:"",uint64_tinyid:""},msg_audio_status:{uint32_audio_format:0,uint32_audio_sample_rate:0,uint32_audio_codec_bitrate:0,uint32_audio_total_bitrate:0,uint32_audio_level:0,uint32_audio_energy:0,uint32_audio_receive:0,uint32_audio_origin_lost:0,uint32_audio_final_lost:0,audioLevel:0},msg_video_status:[{uint32_video_stream_type:0,uint32_video_receive_fps:0,uint32_video_width:0,uint32_video_height:0,uint32_video_codec_bitrate:0,uint32_video_receive:0,uint32_video_origin_lost:0,uint32_video_block_time:0,uint32_video_dec_fps:0}],msg_network_status:{uint32_bitrate:0,uint32_rtt:0,uint32_lost:0,uint32_jitter:0}}]},e.next=4,this.getStats(n,i);case 4:return s=e.sent,"{}"===JSON.stringify(this.prevReport_)&&(this.prevReport_=JSON.parse(JSON.stringify(a))),this.prepareReport({stats:s,report:a,freezeMap:o,uplinkConnection:n,downlinkConnections:i}),this.prevReportTime_=Date.now(),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"reset",value:function(){this.prevReportTime_=0,this.prevReport_={},this.prevEncoderImplementation_="",this.prevQualityLimitationReason_="",this.prevDecoderImplementationMap_=new Map}}]),e}(),KL=function(){function e(t){var n=t.signalChannel,r=t.connections,i=t.client;s(this,e),this.client_=i,this.signalChannel_=n,this.connections_=r,this.client_=i,this.log_=PD.createLogger({id:"q|"+this.client_.getUserId(),userId:this.client_.getUserId(),sdkAppId:this.client_.getSDKAppId()}),this.uplinkConnection_=null,this.uplinkNetworkQuality_=0,this.uplinkRTT_=0,this.uplinkLoss_=0,this.downlinkNetworkQuality_=0,this.downlinkRTT_=0,this.downlinkLoss_=0,this.downlinkPrevStatMap_=new Map,this.downlinkLossAndRTTMap_=new Map,this.interval_=-1,this.emitter_=new jO,this.initialize()}var t,n;return u(e,[{key:"uplinkNetworkQuality",get:function(){return this.uplinkNetworkQuality_},set:function(e){e!==this.uplinkNetworkQuality_&&this.log_.info("uplink network quality change ".concat(this.uplinkNetworkQuality," -> ").concat(e,", rtt: ").concat(this.uplinkRTT_,", loss: ").concat(this.uplinkLoss_)),this.uplinkNetworkQuality_=e}},{key:"downlinkNetworkQuality",get:function(){return this.downlinkNetworkQuality_},set:function(e){if(e!==this.downlinkNetworkQuality_){var t=this.getAverageLossAndRTT(T(this.downlinkLossAndRTTMap_.values())),n=t.rtt,r=t.loss;this.log_.info("downlink network quality change ".concat(this.downlinkNetworkQuality," -> ").concat(e,", rtt: ").concat(n,", loss: ").concat(r))}this.downlinkNetworkQuality_=e}},{key:"initialize",value:function(){var e=this;this.signalChannel_.on(XA.UPLINK_NETWORK_STATS,(function(t){e.handleUplinkNetworkQuality(t)})),this.signalChannel_.on(BA,this.handleSignalConnectionStateChange.bind(this)),this.start()}},{key:"handleUplinkNetworkQuality",value:function(e){if(!this.uplinkConnection_)return this.uplinkNetworkQuality=0,this.uplinkLoss_=0,void(this.uplinkRTT_=0);var t=this.uplinkConnection_.getPeerConnection();if(t&&this.isPeerConnectionDisconnected(t))return this.uplinkNetworkQuality=6,this.uplinkLoss_=0,void(this.uplinkRTT_=0);if(0===e.data.code){var n=e.data.data,r=n.expectAudPkg+n.expectVidPkg,i=n.recvAudPkg+n.recvVidPkg,o=r-i,a=n.delay;if(a&&this.updateDelay(a),0===r&&0===i)return;this.uplinkLoss_=o<=0?0:Math.round(o/r*100),this.uplinkRTT_=n.rtt,this.uplinkNetworkQuality=this.getNetworkQuality(this.uplinkLoss_,this.uplinkRTT_)}}},{key:"handleDownlinkNetworkQuality",value:(n=a(r().mark((function e(){var t,n,i,o,a,s,c,u,l,d,p,f,h,g,v,m=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connections_&&0!==this.connections_.size){e.next=3;break}return this.downlinkNetworkQuality=0,e.abrupt("return");case 3:if(t=T(this.connections_.values()),n=t.filter((function(e){return e.getPeerConnection()&&e.getPeerConnection().connectionState===QC})),t.filter((function(e){return e.getPeerConnection()&&m.isPeerConnectionDisconnected(e.getPeerConnection())})).length!==t.length){e.next=9;break}return this.downlinkNetworkQuality=6,e.abrupt("return");case 9:i=0;case 10:if(!(i<n.length)){e.next=31;break}return o=n[i].getPeerConnection(),e.next=14,this.getStat(o);case 14:if(a=e.sent,s=a.rtt,c=a.totalPacketsLost,u=a.totalPacketsReceived,this.downlinkPrevStatMap_.has(o)){e.next=21;break}return this.downlinkPrevStatMap_.set(o,{totalPacketsLost:c,totalPacketsReceived:u}),e.abrupt("continue",28);case 21:l=0,d=this.downlinkPrevStatMap_.get(o),p=c-d.totalPacketsLost,f=u-d.totalPacketsReceived,l=p<=0||f<0?0:Math.round(p/(p+f)*100),this.downlinkPrevStatMap_.set(o,{totalPacketsLost:c,totalPacketsReceived:u}),this.downlinkLossAndRTTMap_.set(o,{rtt:s,loss:l,userId:n[i].getUserId()});case 28:i++,e.next=10;break;case 31:if(T(this.downlinkPrevStatMap_.keys()).forEach((function(e){m.isPeerConnectionDisconnected(e)&&(m.downlinkPrevStatMap_.delete(e),m.downlinkLossAndRTTMap_.delete(e))})),0!==this.downlinkLossAndRTTMap_.size){e.next=34;break}return e.abrupt("return");case 34:h=this.getAverageLossAndRTT(T(this.downlinkLossAndRTTMap_.values())),g=h.rtt,v=h.loss,this.downlinkRTT_=g,this.downlinkLoss_=v,this.downlinkNetworkQuality=this.getNetworkQuality(v,g);case 38:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getStat",value:(t=a(r().mark((function e(t){var n,i,o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={rtt:0,totalPacketsLost:0,totalPacketsReceived:0},t&&mL()){e.next=3;break}return e.abrupt("return",n);case 3:i=t.getReceivers(),e.prev=4,o=0;case 6:if(!(o<i.length)){e.next=15;break}return a=i[o],e.next=10,a.getStats();case 10:e.sent.forEach((function(e){"candidate-pair"===e.type&&vO(e.currentRoundTripTime)&&(n.rtt=Math.round(1e3*e.currentRoundTripTime)),"inbound-rtp"!==e.type||e.mediaType!==jT&&e.mediaType!==UT||(n.totalPacketsLost+=e.packetsLost,n.totalPacketsReceived+=e.packetsReceived)}));case 12:o++,e.next=6;break;case 15:return e.abrupt("return",n);case 18:return e.prev=18,e.t0=e.catch(4),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,null,[[4,18]])}))),function(e){return t.apply(this,arguments)})},{key:"getAverageLossAndRTT",value:function(e){var t={rtt:0,loss:0};return Array.isArray(e)&&e.length>0&&(e.forEach((function(e){t.rtt+=e.rtt,t.loss+=e.loss})),Object.keys(t).forEach((function(n){t[n]=Math.round(t[n]/e.length)}))),t}},{key:"getNetworkQuality",value:function(e,t){return e>50||t>500?5:e>30||t>350?4:e>20||t>200?3:e>10||t>100?2:e>=0||t>=0?1:0}},{key:"handleSignalConnectionStateChange",value:function(e){e.state===zA?(this.uplinkRTT_=0,this.uplinkLoss_=0,this.uplinkNetworkQuality=6):e.state===YA&&6===this.uplinkNetworkQuality&&(this.uplinkNetworkQuality=5)}},{key:"handleUplinkConnectionStateChange",value:function(e){var t=e.state;t===HC?(this.uplinkLoss_=0,this.uplinkRTT_=0,this.uplinkNetworkQuality=6):t===WC&&6===this.uplinkNetworkQuality&&(this.uplinkNetworkQuality=5)}},{key:"isPeerConnectionDisconnected",value:function(e){return!(!e||e.connectionState!==ZC&&e.connectionState!==$C&&e.connectionState!==XC)}},{key:"setUplinkConnection",value:function(e){this.uplinkConnection_=e,this.uplinkConnection_?this.uplinkConnection_.on(PL.CONNECTION_STATE_CHANGED,this.handleUplinkConnectionStateChange.bind(this)):(this.uplinkNetworkQuality=0,this.uplinkRTT_=0,this.uplinkLoss_=0)}},{key:"start",value:function(){var e=this;-1===this.interval_?(this.log_.info("start network quality calculating"),this.interval_=eL.run(_E,(function(){e.handleDownlinkNetworkQuality(),UO.emit(kD,{client:e.client_,uplinkNetworkQuality:e.uplinkNetworkQuality,downlinkNetworkQuality:e.downlinkNetworkQuality,uplinkRTT:e.uplinkRTT_,uplinkLoss:e.uplinkLoss_,downlinkRTT:e.downlinkRTT_,downlinkLoss:e.downlinkLoss_,downlinkLossAndRTTMap:e.downlinkLossAndRTTMap_}),e.emitter_.emit(jL.NETWORK_QUALITY,{uplinkNetworkQuality:e.uplinkNetworkQuality,downlinkNetworkQuality:e.downlinkNetworkQuality,uplinkRTT:e.uplinkRTT_,uplinkLoss:e.uplinkLoss_,downlinkRTT:e.downlinkRTT_,downlinkLoss:e.downlinkLoss_})}),{delay:2e3})):this.log_.info("network quality calculating is already started")}},{key:"stop",value:function(){this.log_.info("stop network quality calculating"),-1!==this.interval_&&(eL.clearTask(this.interval_),this.interval_=-1),this.downlinkLossAndRTTMap_.clear(),this.downlinkPrevStatMap_.clear()}},{key:"on",value:function(e,t){this.emitter_.on(e,t)}},{key:"updateDelay",value:function(e){var t=this;e.forEach((function(e){var n=e.srcTinyId,r=e.videoDelay,i=e.audioDelay,o=t.connections_.get(n);o&&o.setDelay({videoDelay:r,audioDelay:i})}))}}]),e}(),WL=function(){function e(t){s(this,e),this.log_=PD.createLogger({id:t.client.getUserId(),userId:t.client.getUserId(),sdkAppId:t.client.getSDKAppId()}),this.localStream_=null,this.prevDevices_=[],this.initialize()}var t,n;return u(e,[{key:"initialize",value:function(){navigator.mediaDevices&&(this.onDeviceChange=this.onDeviceChange.bind(this),navigator.mediaDevices.addEventListener("devicechange",this.onDeviceChange))}},{key:"destroy",value:function(){navigator.mediaDevices&&navigator.mediaDevices.removeEventListener("devicechange",this.onDeviceChange)}},{key:"onDeviceChange",value:(n=a(r().mark((function e(){var t,n,i,o=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.localStream_&&this.localStream_.getMediaStream()&&!this.localStream_.getScreen()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,cY.getDevices();case 4:t=e.sent,n=t.filter((function(e){return o.prevDevices_.findIndex((function(t){var n=t.deviceId;return e.deviceId===n}))<0})),i=this.prevDevices_.filter((function(e){return t.findIndex((function(t){var n=t.deviceId;return e.deviceId===n}))<0})),n.length>0&&this.handleDeviceAdded(this.prevDevices_,n),i.length>0&&this.handleDeviceRemoved(t,i),this.prevDevices_=t;case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setLocalStream",value:(t=a(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,cY.getDevices();case 3:this.prevDevices_=e.sent;case 4:this.localStream_=t;case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"handleDeviceAdded",value:function(e,t){var n,r;if(this.localStream_){this.log_.warn("devicesAdded: ".concat(JSON.stringify(t))),this.localStream_.updateDeviceIdInUse();var i=t.filter((function(e){return e.kind===tC})),o=t.filter((function(e){return e.kind===eC})),a=e.filter((function(e){return e.kind===tC})),s=e.filter((function(e){return e.kind===eC})),c=i.length>0&&0===a.length&&"live"!==(null===(n=this.localStream_.getVideoTrack())||void 0===n?void 0:n.readyState),u=o.length>0&&0===s.length&&"live"!==(null===(r=this.localStream_.getAudioTrack())||void 0===r?void 0:r.readyState);if(u&&c)return this.log_.info("new microphone and camera detected, but there was no device before."),void this.localStream_.recoverCapture({audio:!0,video:!0,cameraId:i[0].deviceId,microphoneId:o[0].deviceId});c&&(this.log_.info("new camera detected, but there was no camera before."),this.localStream_.recoverCapture({audio:!1,video:!0,cameraId:i[0].deviceId})),u&&(this.log_.info("new microphone detected, but there was no microphone before."),this.localStream_.recoverCapture({audio:!0,video:!1,microphoneId:o[0].deviceId}))}}},{key:"handleDeviceRemoved",value:function(e,t){if(this.localStream_){this.log_.warn("devicesRemoved: ".concat(JSON.stringify(t))),this.localStream_.updateDeviceIdInUse();var n=!1,r=!1,i=this.localStream_.getCameraId(),o=this.localStream_.getMicrophoneId();if(o===pE){var a=this.localStream_.getMicrophoneGroupId(),s=e.filter((function(e){return e.deviceId===pE&&e.kind===eC}))[0];s&&s.groupId!==a&&(r=!0)}if(t.forEach((function(e){var t=e.deviceId;i.length>0&&t===i?n=!0:o.length>0&&t===o&&(r=!0)})),n&&r)return this.log_.warn("current camera and microphone in use is lost, cameraId: ".concat(i,", microphoneId: ").concat(o)),void((this.localStream_.getAudio()||this.localStream_.getVideo())&&this.localStream_.recoverCapture({video:!0,audio:!0}));n&&(this.log_.warn("current camera in use is lost, deviceId: ".concat(i)),this.localStream_.getVideo()&&this.localStream_.recoverCapture({video:!0,audio:!1})),r&&(this.log_.warn("current microphone in use is lost, deviceId: ".concat(o)),this.localStream_.getAudio()&&this.localStream_.recoverCapture({video:!1,audio:!0}))}}}]),e}();function YL(){return JL.apply(this,arguments)}function JL(){return JL=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!SL()&&!CL()){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,navigator.mediaDevices.enumerateDevices();case 4:return t=e.sent,e.abrupt("return",t.filter((function(e){return e.kind===tC})).map((function(e,t){var n=e.label;e.label||(n="camera_"+t);var r={label:n,deviceId:e.deviceId,kind:e.kind};return e.groupId&&(r.groupId=e.groupId),e.getCapabilities&&(r.getCapabilities=function(){return e.getCapabilities()}),r})));case 6:case"end":return e.stop()}}),e)}))),JL.apply(this,arguments)}function $L(){return $L=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!SL()&&!CL()){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,navigator.mediaDevices.enumerateDevices();case 4:return t=e.sent,e.abrupt("return",t.filter((function(e){return e.kind===eC&&e.deviceId!==fE})).map((function(e,t){var n=e.label;e.label||(n="microphone_"+t);var r={label:n,deviceId:e.deviceId,kind:e.kind};return e.groupId&&(r.groupId=e.groupId),e.getCapabilities&&(r.getCapabilities=function(){return e.getCapabilities()}),r})));case 6:case"end":return e.stop()}}),e)}))),$L.apply(this,arguments)}function XL(){return XL=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!SL()&&!CL()){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,navigator.mediaDevices.enumerateDevices();case 4:return t=e.sent,e.abrupt("return",t.filter((function(e){return"audiooutput"===e.kind})).map((function(e,t){var n=e.label;e.label||(n="speaker_"+t);var r={label:n,deviceId:e.deviceId,kind:e.kind};return e.groupId&&(r.groupId=e.groupId),r})));case 6:case"end":return e.stop()}}),e)}))),XL.apply(this,arguments)}function ZL(e){return QL.apply(this,arguments)}function QL(){return(QL=a(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof CanvasCaptureMediaStreamTrack)){e.next=2;break}return e.abrupt("return",!1);case 2:if(t instanceof MediaStreamTrack){e.next=4;break}return e.abrupt("return",!1);case 4:if(!t.label.toLocaleLowerCase().includes("camera")){e.next=6;break}return e.abrupt("return",!0);case 6:return e.next=8,YL();case 8:if(!e.sent.find((function(e){var n;return e.deviceId===(null===(n=t.getSettings())||void 0===n?void 0:n.deviceId)}))){e.next=11;break}return e.abrupt("return",!0);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eN(e){return tN.apply(this,arguments)}function tN(){return(tN=a(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cY.getMicrophones();case 2:if((null==(n=e.sent.find((function(e){return e.deviceId===pE})))?void 0:n.groupId)!==t){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nN,rN=En.exports,iN=on,oN=ln,aN=Wu,sN=Oi,cN=P,uN=pt,lN=function(e,t,n,r){try{return r?t(oN(n)[0],n[1]):t(n)}catch(uY){aN(e,"throw",uY)}},dN=Du,pN=eo,fN=jr,hN=Kc,gN=qu,vN=Pu,mN=Array,_N=te,yN=2147483647,bN=/[^\0-\u007E]/,IN=/[.\u3002\uFF0E\uFF61]/g,TN="Overflow: input needs wider integers to process",CN=RangeError,SN=_N(IN.exec),EN=Math.floor,MN=String.fromCharCode,kN=_N("".charCodeAt),wN=_N([].join),ON=_N([].push),DN=_N("".replace),AN=_N("".split),RN=_N("".toLowerCase),xN=function(e){return e+22+75*(e<26)},LN=function(e,t,n){var r=0;for(e=n?EN(e/700):e>>1,e+=EN(e/t);e>455;)e=EN(e/35),r+=36;return EN(r+36*e/(e+38))},NN=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=kN(e,n++);if(i>=55296&&i<=56319&&n<r){var o=kN(e,n++);56320==(64512&o)?ON(t,((1023&i)<<10)+(1023&o)+65536):(ON(t,i),n--)}else ON(t,i)}return t}(e);var n,r,i=e.length,o=128,a=0,s=72;for(n=0;n<e.length;n++)(r=e[n])<128&&ON(t,MN(r));var c=t.length,u=c;for(c&&ON(t,"-");u<i;){var l=yN;for(n=0;n<e.length;n++)(r=e[n])>=o&&r<l&&(l=r);var d=u+1;if(l-o>EN((yN-a)/d))throw CN(TN);for(a+=(l-o)*d,o=l,n=0;n<e.length;n++){if((r=e[n])<o&&++a>yN)throw CN(TN);if(r==o){for(var p=a,f=36;;){var h=f<=s?1:f>=s+26?26:f-s;if(p<h)break;var g=p-h,v=36-h;ON(t,MN(xN(h+g%v))),p=EN(g/v),f+=36}ON(t,MN(xN(p))),s=LN(a,d,u==c),a=0,u++}}a++,o++}return wN(t,"")},PN=Ei,jN=R,UN=Mg,GN=O,VN=Oi,FN=te,BN=Cr,qN=function(e,t,n){return n.get&&rN(n.get,t,{getter:!0}),n.set&&rN(n.set,t,{setter:!0}),iN.f(e,t,n)},HN=ll,zN=gt,KN=pA,WN=function(e){var t=uN(e),n=pN(this),r=arguments.length,i=r>1?arguments[1]:void 0,o=void 0!==i;o&&(i=sN(i,r>2?arguments[2]:void 0));var a,s,c,u,l,d,p=vN(t),f=0;if(!p||this===mN&&dN(p))for(a=fN(t),s=n?new this(a):mN(a);a>f;f++)d=o?i(t[f],f):t[f],hN(s,f,d);else for(l=(u=gN(t,p)).next,s=n?new this:[];!(c=cN(l,u)).done;f++)d=o?lN(u,i,[c.value,f],!0):c.value,hN(s,f,d);return s.length=f,s},YN=Zc,JN=gd.codeAt,$N=function(e){var t,n,r=[],i=AN(DN(RN(e),IN,"."),".");for(t=0;t<i.length;t++)n=i[t],ON(r,SN(bN,n)?"xn--"+NN(n):n);return wN(r,".")},XN=ad,ZN=Ks,QN=Kd,eP=Kv,tP=ar,nP=tP.set,rP=tP.getterFor("URL"),iP=eP.URLSearchParams,oP=eP.getState,aP=GN.URL,sP=GN.TypeError,cP=GN.parseInt,uP=Math.floor,lP=Math.pow,dP=FN("".charAt),pP=FN(/./.exec),fP=FN([].join),hP=FN(1..toString),gP=FN([].pop),vP=FN([].push),mP=FN("".replace),_P=FN([].shift),yP=FN("".split),bP=FN("".slice),IP=FN("".toLowerCase),TP=FN([].unshift),CP="Invalid scheme",SP="Invalid host",EP="Invalid port",MP=/[a-z]/i,kP=/[\d+-.a-z]/i,wP=/\d/,OP=/^0x/i,DP=/^[0-7]+$/,AP=/^\d+$/,RP=/^[\da-f]+$/i,xP=/[\0\t\n\r #%/:<>?@[\\\]^|]/,LP=/[\0\t\n\r #/:<>?@[\\\]^|]/,NP=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,PP=/[\t\n\r]/g,jP=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)TP(t,e%256),e=uP(e/256);return fP(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=hP(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},UP={},GP=KN({},UP,{" ":1,'"':1,"<":1,">":1,"`":1}),VP=KN({},GP,{"#":1,"?":1,"{":1,"}":1}),FP=KN({},VP,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),BP=function(e,t){var n=JN(e,0);return n>32&&n<127&&!zN(t,e)?e:encodeURIComponent(e)},qP={ftp:21,file:null,http:80,https:443,ws:80,wss:443},HP=function(e,t){var n;return 2==e.length&&pP(MP,dP(e,0))&&(":"==(n=dP(e,1))||!t&&"|"==n)},zP=function(e){var t;return e.length>1&&HP(bP(e,0,2))&&(2==e.length||"/"===(t=dP(e,2))||"\\"===t||"?"===t||"#"===t)},KP=function(e){return"."===e||"%2e"===IP(e)},WP={},YP={},JP={},$P={},XP={},ZP={},QP={},ej={},tj={},nj={},rj={},ij={},oj={},aj={},sj={},cj={},uj={},lj={},dj={},pj={},fj={},hj=function(e,t,n){var r,i,o,a=XN(e);if(t){if(i=this.parse(a))throw sP(i);this.searchParams=null}else{if(void 0!==n&&(r=new hj(n,!0)),i=this.parse(a,null,r))throw sP(i);(o=oP(new iP)).bindURL(this),this.searchParams=o}};hj.prototype={type:"URL",parse:function(e,t,n){var r,i,o,a,s,c=this,u=t||WP,l=0,d="",p=!1,f=!1,h=!1;for(e=XN(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=mP(e,NP,"")),e=mP(e,PP,""),r=WN(e);l<=r.length;){switch(i=r[l],u){case WP:if(!i||!pP(MP,i)){if(t)return CP;u=JP;continue}d+=IP(i),u=YP;break;case YP:if(i&&(pP(kP,i)||"+"==i||"-"==i||"."==i))d+=IP(i);else{if(":"!=i){if(t)return CP;d="",u=JP,l=0;continue}if(t&&(c.isSpecial()!=zN(qP,d)||"file"==d&&(c.includesCredentials()||null!==c.port)||"file"==c.scheme&&!c.host))return;if(c.scheme=d,t)return void(c.isSpecial()&&qP[c.scheme]==c.port&&(c.port=null));d="","file"==c.scheme?u=aj:c.isSpecial()&&n&&n.scheme==c.scheme?u=$P:c.isSpecial()?u=ej:"/"==r[l+1]?(u=XP,l++):(c.cannotBeABaseURL=!0,vP(c.path,""),u=dj)}break;case JP:if(!n||n.cannotBeABaseURL&&"#"!=i)return CP;if(n.cannotBeABaseURL&&"#"==i){c.scheme=n.scheme,c.path=YN(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,u=fj;break}u="file"==n.scheme?aj:ZP;continue;case $P:if("/"!=i||"/"!=r[l+1]){u=ZP;continue}u=tj,l++;break;case XP:if("/"==i){u=nj;break}u=lj;continue;case ZP:if(c.scheme=n.scheme,i==nN)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=YN(n.path),c.query=n.query;else if("/"==i||"\\"==i&&c.isSpecial())u=QP;else if("?"==i)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=YN(n.path),c.query="",u=pj;else{if("#"!=i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=YN(n.path),c.path.length--,u=lj;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=YN(n.path),c.query=n.query,c.fragment="",u=fj}break;case QP:if(!c.isSpecial()||"/"!=i&&"\\"!=i){if("/"!=i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,u=lj;continue}u=nj}else u=tj;break;case ej:if(u=tj,"/"!=i||"/"!=dP(d,l+1))continue;l++;break;case tj:if("/"!=i&&"\\"!=i){u=nj;continue}break;case nj:if("@"==i){p&&(d="%40"+d),p=!0,o=WN(d);for(var g=0;g<o.length;g++){var v=o[g];if(":"!=v||h){var m=BP(v,FP);h?c.password+=m:c.username+=m}else h=!0}d=""}else if(i==nN||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()){if(p&&""==d)return"Invalid authority";l-=WN(d).length+1,d="",u=rj}else d+=i;break;case rj:case ij:if(t&&"file"==c.scheme){u=cj;continue}if(":"!=i||f){if(i==nN||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()){if(c.isSpecial()&&""==d)return SP;if(t&&""==d&&(c.includesCredentials()||null!==c.port))return;if(a=c.parseHost(d))return a;if(d="",u=uj,t)return;continue}"["==i?f=!0:"]"==i&&(f=!1),d+=i}else{if(""==d)return SP;if(a=c.parseHost(d))return a;if(d="",u=oj,t==ij)return}break;case oj:if(!pP(wP,i)){if(i==nN||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()||t){if(""!=d){var _=cP(d,10);if(_>65535)return EP;c.port=c.isSpecial()&&_===qP[c.scheme]?null:_,d=""}if(t)return;u=uj;continue}return EP}d+=i;break;case aj:if(c.scheme="file","/"==i||"\\"==i)u=sj;else{if(!n||"file"!=n.scheme){u=lj;continue}if(i==nN)c.host=n.host,c.path=YN(n.path),c.query=n.query;else if("?"==i)c.host=n.host,c.path=YN(n.path),c.query="",u=pj;else{if("#"!=i){zP(fP(YN(r,l),""))||(c.host=n.host,c.path=YN(n.path),c.shortenPath()),u=lj;continue}c.host=n.host,c.path=YN(n.path),c.query=n.query,c.fragment="",u=fj}}break;case sj:if("/"==i||"\\"==i){u=cj;break}n&&"file"==n.scheme&&!zP(fP(YN(r,l),""))&&(HP(n.path[0],!0)?vP(c.path,n.path[0]):c.host=n.host),u=lj;continue;case cj:if(i==nN||"/"==i||"\\"==i||"?"==i||"#"==i){if(!t&&HP(d))u=lj;else if(""==d){if(c.host="",t)return;u=uj}else{if(a=c.parseHost(d))return a;if("localhost"==c.host&&(c.host=""),t)return;d="",u=uj}continue}d+=i;break;case uj:if(c.isSpecial()){if(u=lj,"/"!=i&&"\\"!=i)continue}else if(t||"?"!=i)if(t||"#"!=i){if(i!=nN&&(u=lj,"/"!=i))continue}else c.fragment="",u=fj;else c.query="",u=pj;break;case lj:if(i==nN||"/"==i||"\\"==i&&c.isSpecial()||!t&&("?"==i||"#"==i)){if(".."===(s=IP(s=d))||"%2e."===s||".%2e"===s||"%2e%2e"===s?(c.shortenPath(),"/"==i||"\\"==i&&c.isSpecial()||vP(c.path,"")):KP(d)?"/"==i||"\\"==i&&c.isSpecial()||vP(c.path,""):("file"==c.scheme&&!c.path.length&&HP(d)&&(c.host&&(c.host=""),d=dP(d,0)+":"),vP(c.path,d)),d="","file"==c.scheme&&(i==nN||"?"==i||"#"==i))for(;c.path.length>1&&""===c.path[0];)_P(c.path);"?"==i?(c.query="",u=pj):"#"==i&&(c.fragment="",u=fj)}else d+=BP(i,VP);break;case dj:"?"==i?(c.query="",u=pj):"#"==i?(c.fragment="",u=fj):i!=nN&&(c.path[0]+=BP(i,UP));break;case pj:t||"#"!=i?i!=nN&&("'"==i&&c.isSpecial()?c.query+="%27":c.query+="#"==i?"%23":BP(i,UP)):(c.fragment="",u=fj);break;case fj:i!=nN&&(c.fragment+=BP(i,GP))}l++}},parseHost:function(e){var t,n,r;if("["==dP(e,0)){if("]"!=dP(e,e.length-1))return SP;if(t=function(e){var t,n,r,i,o,a,s,c=[0,0,0,0,0,0,0,0],u=0,l=null,d=0,p=function(){return dP(e,d)};if(":"==p()){if(":"!=dP(e,1))return;d+=2,l=++u}for(;p();){if(8==u)return;if(":"!=p()){for(t=n=0;n<4&&pP(RP,p());)t=16*t+cP(p(),16),d++,n++;if("."==p()){if(0==n)return;if(d-=n,u>6)return;for(r=0;p();){if(i=null,r>0){if(!("."==p()&&r<4))return;d++}if(!pP(wP,p()))return;for(;pP(wP,p());){if(o=cP(p(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;d++}c[u]=256*c[u]+i,2!=++r&&4!=r||u++}if(4!=r)return;break}if(":"==p()){if(d++,!p())return}else if(p())return;c[u++]=t}else{if(null!==l)return;d++,l=++u}}if(null!==l)for(a=u-l,u=7;0!=u&&a>0;)s=c[u],c[u--]=c[l+a-1],c[l+--a]=s;else if(8!=u)return;return c}(bP(e,1,-1)),!t)return SP;this.host=t}else if(this.isSpecial()){if(e=$N(e),pP(xP,e))return SP;if(t=function(e){var t,n,r,i,o,a,s,c=yP(e,".");if(c.length&&""==c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=c[r]))return e;if(o=10,i.length>1&&"0"==dP(i,0)&&(o=pP(OP,i)?16:8,i=bP(i,8==o?1:2)),""===i)a=0;else{if(!pP(10==o?AP:8==o?DP:RP,i))return e;a=cP(i,o)}vP(n,a)}for(r=0;r<t;r++)if(a=n[r],r==t-1){if(a>=lP(256,5-t))return null}else if(a>255)return null;for(s=gP(n),r=0;r<n.length;r++)s+=n[r]*lP(256,3-r);return s}(e),null===t)return SP;this.host=t}else{if(pP(LP,e))return SP;for(t="",n=WN(e),r=0;r<n.length;r++)t+=BP(n[r],UP);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return zN(qP,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&HP(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,a=e.path,s=e.query,c=e.fragment,u=t+":";return null!==i?(u+="//",e.includesCredentials()&&(u+=n+(r?":"+r:"")+"@"),u+=jP(i),null!==o&&(u+=":"+o)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?a[0]:a.length?"/"+fP(a,"/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},setHref:function(e){var t=this.parse(e);if(t)throw sP(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new gj(e.path[0]).origin}catch(uY){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+jP(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(XN(e)+":",WP)},getUsername:function(){return this.username},setUsername:function(e){var t=WN(XN(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=BP(t[n],FP)}},getPassword:function(){return this.password},setPassword:function(e){var t=WN(XN(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=BP(t[n],FP)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?jP(e):jP(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,rj)},getHostname:function(){var e=this.host;return null===e?"":jP(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,ij)},getPort:function(){var e=this.port;return null===e?"":XN(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=XN(e))?this.port=null:this.parse(e,oj))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+fP(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,uj))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=XN(e))?this.query=null:("?"==dP(e,0)&&(e=bP(e,1)),this.query="",this.parse(e,pj)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=XN(e))?("#"==dP(e,0)&&(e=bP(e,1)),this.fragment="",this.parse(e,fj)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var gj=function(e){var t=HN(this,vj),n=QN(arguments.length,1)>1?arguments[1]:void 0,r=nP(t,new hj(e,!1,n));jN||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},vj=gj.prototype,mj=function(e,t){return{get:function(){return rP(this)[e]()},set:t&&function(e){return rP(this)[t](e)},configurable:!0,enumerable:!0}};if(jN&&(qN(vj,"href",mj("serialize","setHref")),qN(vj,"origin",mj("getOrigin")),qN(vj,"protocol",mj("getProtocol","setProtocol")),qN(vj,"username",mj("getUsername","setUsername")),qN(vj,"password",mj("getPassword","setPassword")),qN(vj,"host",mj("getHost","setHost")),qN(vj,"hostname",mj("getHostname","setHostname")),qN(vj,"port",mj("getPort","setPort")),qN(vj,"pathname",mj("getPathname","setPathname")),qN(vj,"search",mj("getSearch","setSearch")),qN(vj,"searchParams",mj("getSearchParams")),qN(vj,"hash",mj("getHash","setHash"))),BN(vj,"toJSON",(function(){return rP(this).serialize()}),{enumerable:!0}),BN(vj,"toString",(function(){return rP(this).serialize()}),{enumerable:!0}),aP){var _j=aP.createObjectURL,yj=aP.revokeObjectURL;_j&&BN(gj,"createObjectURL",VN(_j,aP)),yj&&BN(gj,"revokeObjectURL",VN(yj,aP))}ZN(gj,"URL"),PN({global:!0,constructor:!0,forced:!UN,sham:!jN},{URL:gj});var bj,Ij,Tj=new Blob(["class VolumeMeter extends AudioWorkletProcessor{constructor(){super();this.volume=0;this.intervalTime=200;this.tick=this.intervalTime;this.isStop=false;this.port.onmessage=event=>{const{data}=event;switch(data.name){case'setIntervalTime':this.intervalTime=data.intervalTime;break;case'stop':this.isStop=true;break}}}process(inputs){const input=inputs[0];if(this.isStop){return false}if(input.length>0){const firstChannel=input[0];let sum=0;let rms;for(let i=0;i<firstChannel.length;++i){sum+=firstChannel[i]*firstChannel[i]}rms=Math.sqrt(sum/firstChannel.length);this.volume=Math.max(rms,this.volume*0.95);this.tick-=firstChannel.length;if(this.tick<0){this.tick+=(this.intervalTime/1000)*sampleRate;this.port.postMessage({volume:this.volume})}}return true}}registerProcessor('volume-meter',VolumeMeter);"],{type:"application/javascript"}),Cj=!1,Sj=function(){function e(t){s(this,e),this.context_=t.context,this.addModuleToContext()}var t;return u(e,[{key:"addModuleToContext",value:(t=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.context_.audioWorklet.addModule(URL.createObjectURL(Tj));case 3:PD.info("worklet addModule success"),UO.emit(OD),Cj=!0,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),PD.info("worklet addModule catch error. ".concat(e.t0.message)),UO.emit(DD);case 12:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return t.apply(this,arguments)})},{key:"initWorkletSuccess",get:function(){return Cj}}]),e}(),Ej=0,Mj=function(){function e(t){s(this,e);var n=t.track,r=t.log,i=t.stream;this.volume_=0,this.log_=r,this.track_=n,this.stream_=i,bj||(bj=OO()),this.audioCtx_=bj,this.destination_=this.audioCtx_.destination;var o=new MediaStream;o.addTrack(this.track_),this.streamSource_=this.audioCtx_.createMediaStreamSource(o),this.audioWorkletNode_=null,this.scriptProcessorNode_=null,this.interval_=200,UO.on(wD,this.resume,this),UO.on(tD,this.handleAudioLevelInterval,this),AO?(UO.on(OD,this.initAudioWorklet,this),UO.on(DD,this.initScriptProcessor,this),this.preload()):this.initScriptProcessor(),Ej+=1}return u(e,[{key:"preload",value:function(){Ij?Ij.initWorkletSuccess&&this.initAudioWorklet():Ij=new Sj({context:bj})}},{key:"initAudioWorklet",value:function(){var e=this;if(!this.audioWorkletNode_)try{this.audioWorkletNode_=new AudioWorkletNode(this.audioCtx_,"volume-meter"),this.audioWorkletNode_.port.onmessage=function(t){e.volume_=t.data.volume||0},this.streamSource_.connect(this.audioWorkletNode_).connect(this.destination_),this.handleAudioLevelInterval({interval:this.interval_})}catch(uY){this.log_.warn("load volume meter failed, load again."),this.initScriptProcessor()}}},{key:"initScriptProcessor",value:function(){var e=this;if(!this.scriptProcessorNode_)try{this.scriptProcessorNode_=this.audioCtx_.createScriptProcessor(2048,1,1),this.scriptProcessorNode_.onaudioprocess=function(t){for(var n=t.inputBuffer.getChannelData(0),r=0,i=0;i<n.length;++i)r+=n[i]*n[i];e.volume_=Math.sqrt(r/n.length)||0},this.streamSource_.connect(this.scriptProcessorNode_),this.scriptProcessorNode_.connect(this.destination_)}catch(uY){this.log_.error("volumeMeter init script processor error: "+uY)}}},{key:"destroy",value:function(){var e;this.streamSource_&&this.streamSource_.disconnect(),this.scriptProcessorNode_&&(this.scriptProcessorNode_.onaudioprocess=null,this.scriptProcessorNode_.disconnect()),this.audioWorkletNode_&&(this.audioWorkletNode_.port.postMessage({name:"stop"}),this.audioWorkletNode_.port.onmessage=null,this.audioWorkletNode_.disconnect()),this.audioWorkletNode_=null,this.scriptProcessorNode_=null,this.audioCtx_=null,UO.off(wD,this.resume,this),UO.off(tD,this.handleAudioLevelInterval,this),UO.off(OD,this.initAudioWorklet,this),UO.off(DD,this.initScriptProcessor,this),Ej>0&&(Ej-=1),0===Ej&&(null===(e=bj)||void 0===e||e.close(),bj=null,Ij=null)}},{key:"resume",value:function(){var e;null===(e=bj)||void 0===e||e.resume()}},{key:"getInternalAudioLevel",value:function(){return this.volume_}},{key:"getCalculatedVolume",value:function(){return this.volume_.toFixed(2)}},{key:"handleAudioLevelInterval",value:function(e){var t,n=e.interval;this.interval_=n,null===(t=this.audioWorkletNode_)||void 0===t||t.port.postMessage({name:"setIntervalTime",intervalTime:n})}}]),e}(),kj=function(){function e(t){s(this,e),this.stream_=t.stream,this.userId_=t.stream.getUserId(),this.log_=this.stream_.getLogger(),this.track_=t.track,t.gainedTrack&&(this.gainedTrack_=t.gainedTrack),this.div_=t.div,this.muted_=t.muted,this.outputDeviceId_=t.outputDeviceId,this.volume_=t.volume,this.pausedRetryCount_=5,this.emitter_=new jO,this.initializeElement(),this.state_="NONE",this.volumeMeter_=new Mj({stream:this.stream_,track:this.gainedTrack_||this.track_,log:this.log_})}var t,n,i,o;return u(e,[{key:"isPlaying",get:function(){return this.state_===dC}},{key:"initializeElement",value:function(){if(this.isAudioElementInit()){var e=new MediaStream;e.addTrack(this.gainedTrack_||this.track_);var t=document.createElement(jT);t.srcObject=e,t.muted=this.muted_,t.setAttribute("id","audio_".concat(this.stream_.getId())),t.setAttribute("autoplay","autoplay"),t.setAttribute("playsinline","playsinline"),this.div_.appendChild(t),this.element_=t}this.handleEvents()}},{key:"setMuted",value:function(e){this.element_&&(this.element_.muted=e,this.muted_=e)}},{key:"play",value:(o=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.outputDeviceId_||!this.element_){e.next=3;break}return e.next=3,this.element_.setSinkId(this.outputDeviceId_);case 3:if(this.setVolume(this.volume_),e.prev=4,!this.element_){e.next=8;break}return e.next=8,this.element_.play();case 8:e.next=16;break;case 10:if(e.prev=10,e.t0=e.catch(4),t=oO({key:ik,data:{media:"Audio",error:e.t0}}),this.log_.warn(t),!t.includes("NotAllowedError")){e.next=16;break}throw new yR({code:_R.PLAY_NOT_ALLOWED,message:t});case 16:case"end":return e.stop()}}),e,this,[[4,10]])}))),function(){return o.apply(this,arguments)})},{key:"handleEvents",value:function(){this.handleElementEvent=this.handleElementEvent.bind(this),this.handleTrackEvent=this.handleTrackEvent.bind(this),this.element_&&(this.element_.addEventListener($T,this.handleElementEvent),this.element_.addEventListener(JT,this.handleElementEvent),this.element_.addEventListener(XT,this.handleElementEvent),this.element_.addEventListener(ZT,this.handleElementEvent)),this.track_.addEventListener(JT,this.handleTrackEvent),this.track_.addEventListener(WT,this.handleTrackEvent),this.track_.addEventListener(YT,this.handleTrackEvent),this.track_.readyState===JT&&this.handleTrackEvent({type:JT}),this.track_.muted&&this.handleTrackEvent({type:WT})}},{key:"handleElementEvent",value:(i=a(r().mark((function e(t){var n,i,o,a,s,c,u,l=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.type,e.t0=n,e.next=e.t0===$T?4:e.t0===JT?9:e.t0===XT?12:e.t0===ZT?21:32;break;case 4:return this.log_.info("audio player is playing"),this.state_=dC,UO.emit(oD,{stream:this.stream_}),this.emitter_.emit(qL,{state:this.state_,reason:$T}),e.abrupt("break",32);case 9:return this.log_.info("audio player is ended"),this.state_!==fC&&(this.state_=fC,this.emitter_.emit(qL,{state:this.state_,reason:JT})),e.abrupt("break",32);case 12:return this.log_.info("audio player is paused"),this.state_=pC,this.emitter_.emit(qL,{state:this.state_,reason:XT}),(i=this.div_&&document.getElementById(this.div_.id))||this.log_.warn("audio player has been remove, element ID: ".concat(this.div_.id)),o=Fw(),this.pausedRetryCount_>0&&(vO(o)&&o<=70||!i)&&(this.resume(),this.pausedRetryCount_--),Xk&&(this.interval_=eL.run((function(){l.element_&&l.state_===pC&&l.resume()}),{delay:3e3})),e.abrupt("break",32);case 21:if(!this.element_||!this.element_.error){e.next=31;break}return a="".concat(wL(),"/").concat(nO().name,"/").concat(nO().version),e.next=25,cY.getSpeakers();case 25:s=e.sent,c=s[0].label,(u=s.find((function(e){return e.deviceId===l.outputDeviceId_})))&&(c=u.label),this.log_.error("audio player error observed. code: ".concat(this.element_.error.code," message: ").concat(this.element_.error.message," deviceInfo: ").concat(a," speaker: ").concat(c)),cx.uploadEvent("stat-".concat(this.stream_.getType(),"-audio-").concat(MS,"-").concat(this.element_.error.code,"-").concat(a,"-").concat(c),this.element_.error);case 31:return e.abrupt("break",32);case 32:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"handleTrackEvent",value:function(e){var t=e.type;switch(t){case JT:this.log_.info("audio track is ended"),this.state_!==fC&&(this.state_=fC,this.emitter_.emit(qL,{state:this.state_,reason:JT})),UO.emit(SD,{stream:this.stream_,type:t});break;case WT:this.log_.info("audio track is unable to provide media output"),this.stream_.isRemote()||wO(),this.state_!==pC&&(this.state_=pC,this.emitter_.emit(qL,{state:this.state_,reason:WT})),UO.emit(CD,{stream:this.stream_,type:t});break;case YT:this.log_.info("audio track is able to provide media output"),this.state_===pC&&(this.state_=dC,this.emitter_.emit(qL,{state:this.state_,reason:YT}))}}},{key:"unbindEvents",value:function(){this.element_&&(this.element_.removeEventListener($T,this.handleElementEvent),this.element_.removeEventListener(JT,this.handleElementEvent),this.element_.removeEventListener(XT,this.handleElementEvent),this.element_.removeEventListener(ZT,this.handleElementEvent)),this.track_&&(this.track_.removeEventListener(JT,this.handleTrackEvent),this.track_.removeEventListener(WT,this.handleTrackEvent),this.track_.removeEventListener(YT,this.handleTrackEvent))}},{key:"setSinkId",value:(n=a(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.outputDeviceId_===t){e.next=5;break}if(!this.element_){e.next=4;break}return e.next=4,this.element_.setSinkId(t);case 4:this.outputDeviceId_=t;case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"setVolume",value:function(e){this.element_&&(this.log_.info("audioElement setVolume to : ".concat(e)),this.element_.volume=e)}},{key:"getAudioLevel",value:function(){return this.volumeMeter_.getCalculatedVolume()}},{key:"getInternalAudioLevel",value:function(){return this.volumeMeter_.getInternalAudioLevel()}},{key:"stop",value:function(){this.unbindEvents(),this.element_&&(this.div_.removeChild(this.element_),this.element_.srcObject=null,this.element_=null),this.volumeMeter_&&(this.volumeMeter_.destroy(),this.volumeMeter_=null),this.interval_>0&&eL.clearTask(this.interval_)}},{key:"resume",value:(t=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.volumeMeter_&&this.volumeMeter_.resume(),!this.element_){e.next=5;break}return e.next=5,this.element_.play();case 5:e.next=13;break;case 7:if(e.prev=7,e.t0=e.catch(0),t=oO({key:ik,data:{media:"Audio",error:e.t0}}),this.log_.warn(t),!t.includes("NotAllowedError")){e.next=13;break}throw new yR({code:_R.PLAY_NOT_ALLOWED,message:t});case 13:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return t.apply(this,arguments)})},{key:"on",value:function(e,t){this.emitter_.on(e,t)}},{key:"isAudioElementInit",value:function(){return!("15.2"===Jw||"15.3"===Jw||"15.4"===Jw)||"local"!==this.stream_.getType()||!this.muted_||(this.log_.info("audioElement is muted."),!1)}}]),e}(),wj=An.PROPER,Oj=A,Dj=o_,Aj=f_.trim;Ei({target:"String",proto:!0,forced:function(e){return Oj((function(){return!!Dj[e]()||"​᠎"!=="​᠎"[e]()||wj&&Dj[e].name!==e}))}("trim")},{trim:function(){return Aj(this)}});var Rj="trtc_autoplay",xj="".concat(Rj,"_mask"),Lj="".concat(Rj,"_wrapper"),Nj="".concat(Rj,"_header"),Pj="".concat(Rj,"_content"),jj="".concat(Rj,"_action_wrapper"),Uj="".concat(Rj,"_question"),Gj="".concat(Rj,"_collapse"),Vj="".concat(Rj,"_action_confirm"),Fj="".concat(Rj,"_detail"),Bj="#2473E8",qj="dialog",Hj="".concat(qj,"-show"),zj="".concat(qj,"-1"),Kj="".concat(qj,"-2"),Wj=!1,Yj=function(){return!!document.querySelector(".".concat(Lj))},Jj="".concat(uE,"/").concat(kO()?"zh-cn":"en","/tutorial-21-advanced-auto-play-policy.html"),$j="<br><a href='".concat(Jj,"' target='_blank'>").concat(kO()?"其他方案？":"Any other solution?","</a>"),Xj="".concat(kO()?"浏览器自动播放策略：在用户与页面产生交互（点击、触摸）之前，浏览器禁止播放有声媒体。该弹窗用于帮助用户恢复音视频播放。".concat($j):"Autoplay Policy: Before user interacts with the web page (clicking, touching), page will not be allowed to play media with sound. This Dialog is used to help users resume playback. ".concat($j)),Zj=function(){function e(){if(s(this,e),this.dialogNode_=null,this.bodyPosition_="",this.content="音视频播放被浏览器拦截，请点击“恢复播放”。",kO()||(this.content='Media playback failed. Click the "Resume" to resume playback.'),!Wj){var t=document.createElement("style");t.innerHTML=".".concat(xj,"{position:fixed;top:0;left:0;right:0;bottom:0;width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,0.5);z-index:1500;}.").concat(xj," div:not(.").concat(jj,"){display:block !important;}.").concat(Lj,"{padding:14px;background:#fff;border-radius:3px;box-shadow:0px 3px 15px #434343;border:1px solid #d1cfcf;max-width:500px;}.").concat(Lj," a{color:").concat(Bj,";}.").concat(Nj,"{overflow:hidden;text-overflow:ellipsis;font-size:16px;font-weight:600;}.").concat(Pj,"{margin:8px 0;}.").concat(jj,"{width:100%;display:flex !important;align-items:center;justify-content:right;float:right;}.").concat(Gj,"{margin-right:auto;cursor:pointer}.").concat(Uj,"{height:100%;line-height:16px;cursor:pointer;}.").concat(Vj,"{margin-left:8px;color:#fff;background:").concat(Bj,";padding:4px 12px;outline:none;border:1px solid;border-radius:3px;font-weight:bold;}.").concat(Vj,":hover{opacity:0.9;}.").concat(Gj,",.").concat(Vj,",.").concat(Pj,",.").concat(Uj,"{font-size:14px;}@media screen and (max-width:750px){.").concat(Lj,"{width:80vw;}}"),document.head.appendChild(t),Wj=!0}this.showDetail_=!1,this.isCollapseClicked_=!1,this.isQuestionClicked_=!1,this.addDiaLog()}return u(e,[{key:"createDiaLog",value:function(){var e=document.createElement("template");e.innerHTML='<div class="'.concat(xj,"\"><div class='").concat(Lj,"'><div class='").concat(Nj,"'>").concat(location.host,"</div><div class='").concat(Pj,"'>").concat(this.content,"</div><div class='").concat(Fj,'\' style="visibility:hidden;width:100%;height:0;font-size:12px;color:gray;">').concat(Xj,"</div><div class='").concat(jj,"'></div></div></div>").trim();var t=document.createElement("button");t.className=Vj,t.innerText=kO()?"恢复播放":"Resume",t.onclick=this.onConfirm.bind(this);var n=document.createElement("div");n.className=Uj,n.innerHTML='<?xml version="1.0" encoding="UTF-8"?>\n    <svg class="icon" width="18" height="18" p-id="2030" t="1639646523624" version="1.1" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">\n    <path d="m464 784.35c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48-48 21.49-48 48z" p-id="2031"/>\n    <path d="m512 960c-247.04 0-448-200.96-448-448s200.96-448 448-448 448 200.96 448 448-200.96 448-448 448zm0-831.71c-211.58 0-383.71 172.13-383.71 383.71 0 211.55 172.13 383.71 383.71 383.71 211.55 0 383.71-172.16 383.71-383.71 0-211.58-172.16-383.71-383.71-383.71z" p-id="2032"/>\n    <path d="m512 673.7c-17.665 0-32.001-14.336-32.001-31.999v-54.112c0-52.353 40-92.352 75.328-127.65 25.887-25.92 52.672-52.672 52.672-74.017 0-53.343-43.072-96.735-95.999-96.735-53.823 0-95.999 41.536-95.999 94.559 0 17.665-14.336 31.999-32.001 31.999s-32.001-14.336-32.001-31.999c0-87.424 71.775-158.56 160-158.56s160 72.095 160 160.74c0 47.904-36.32 84.192-71.424 119.3-27.84 27.776-56.576 56.512-56.576 82.336v54.112c0 17.665-14.336 32.032-32.001 32.032z" p-id="2033"/>\n    </svg>\n    ',n.onclick=this.onQuestionClick.bind(this);var r=document.createElement("div");r.className=Gj,r.innerText="".concat(kO()?"详情 >":"Detail >"),r.onclick=this.onCollapseClick.bind(this);var i=e.content.firstChild,o=i.querySelector(".".concat(jj));return o.appendChild(r),o.appendChild(n),o.appendChild(t),i}},{key:"addDiaLog",value:function(){Yj()||(this.dialogNode_=this.createDiaLog(),document.body.appendChild(this.dialogNode_),this.dialogNode_.onclick=this.onConfirm.bind(this),this.dialogNode_.querySelector(".".concat(Lj)).onclick=function(e){return e.stopPropagation()},this.bodyPosition_=document.body.style.position,document.body.style.position="fixed",PD.info("show autoplay dialog"),cx.uploadEvent({log:Hj}))}},{key:"deleteDiaLog",value:function(){this.dialogNode_&&(document.body.removeChild(this.dialogNode_),document.body.style.position=this.bodyPosition_,this.dialogNode_=null)}},{key:"onConfirm",value:function(){PD.warn("confirm clicked, try resume stream"),UO.emit(wD),this.deleteDiaLog()}},{key:"onCollapseClick",value:function(){var e=this.dialogNode_.querySelector(".".concat(Fj));e.style.visibility="".concat(this.showDetail_?"hidden":"visible"),e.style.height="".concat(this.showDetail_?0:"fit-content"),this.showDetail_=!this.showDetail_,this.isCollapseClicked_||cx.uploadEvent({log:zj}),this.isCollapseClicked_=!0}},{key:"onQuestionClick",value:function(){window.open(Jj,"_blank"),this.isQuestionClicked_||cx.uploadEvent({log:Kj}),this.isQuestionClicked_=!0}}]),e}(),Qj=function(){function e(t){s(this,e),this.stream_=t.stream,this.userId_=t.stream.getUserId(),this.log_=this.stream_.getLogger(),this.track_=t.track,this.div_=t.div,this.muted_=t.muted,this.objectFit_=t.objectFit,this.mirror_=t.mirror,this.emitter_=new jO,this.initializeElement(),this.state_="NONE",this.pausedRetryCount_=5}var t;return u(e,[{key:"isPlaying",get:function(){return this.state_===dC}},{key:"initializeElement",value:function(){var e=new MediaStream;e.addTrack(this.track_);var t=document.createElement(UT);t.srcObject=e,t.muted=!0;var n="width: 100%; height: 100%; object-fit: ".concat(this.objectFit_,";");this.mirror_&&(n+="transform: scaleX(-1);"),t.setAttribute("id","video_".concat(this.stream_.getId())),t.setAttribute("style",n),t.setAttribute("autoplay","autoplay"),t.setAttribute("playsinline","playsinline"),this.div_&&this.div_.appendChild(t),this.element_=t,this.handleEvents()}},{key:"setRect",value:function(e){var t=e.width,n=e.height;this.element_&&(this.element_.style.width=t+"px",this.element_.style.height=n+"px")}},{key:"setMirror",value:function(e){this.element_&&(this.element_.style.transform=e?"scaleX(-1)":"",this.mirror_=e)}},{key:"setObjectFit",value:function(e){this.element_&&(this.element_.style.objectFit="".concat(e),this.objectFit_=e)}},{key:"play",value:(t=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.element_.play();case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),t=oO({key:ik,data:{media:"Video",error:e.t0}}),this.log_.warn(t),!t.includes("NotAllowedError")){e.next=11;break}throw new yR({code:_R.PLAY_NOT_ALLOWED,message:t});case 11:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return t.apply(this,arguments)})},{key:"handleEvents",value:function(){this.handleElementEvent=this.handleElementEvent.bind(this),this.handleTrackEvent=this.handleTrackEvent.bind(this),this.element_.addEventListener($T,this.handleElementEvent),this.element_.addEventListener(JT,this.handleElementEvent),this.element_.addEventListener(XT,this.handleElementEvent),this.element_.addEventListener(ZT,this.handleElementEvent),this.element_.addEventListener(QT,this.handleElementEvent),this.track_.addEventListener(JT,this.handleTrackEvent),this.track_.addEventListener(WT,this.handleTrackEvent),this.track_.addEventListener(YT,this.handleTrackEvent),this.track_.readyState===JT&&this.handleTrackEvent({type:JT}),this.track_.muted&&this.handleTrackEvent({type:WT})}},{key:"handleElementEvent",value:function(e){var t=this;switch(e.type){case $T:this.log_.info("video player is playing"),this.state_=dC,UO.emit(iD,{stream:this.stream_}),this.emitter_.emit(qL,{state:this.state_,reason:$T}),this.interval_&&(eL.clearTask(this.interval_),this.interval_=null);break;case JT:this.log_.info("video player is ended"),this.state_!==fC&&(this.state_=fC,this.emitter_.emit(qL,{state:this.state_,reason:JT}));break;case XT:this.log_.info("video player is paused"),this.div_&&!document.getElementById(this.div_.id)&&this.log_.warn("video player has been remove, element ID: ".concat(this.div_.id)),this.state_=pC,this.emitter_.emit(qL,{state:this.state_,reason:XT}),this.pausedRetryCount_>0&&!Yj()&&(this.log_.info("video player auto resume when video paused"),this.resume(),this.pausedRetryCount_--),Xk&&(this.interval_=eL.run((function(){t.element_&&t.state_===pC&&t.resume()}),{delay:3e3}));break;case ZT:if(this.element_&&this.element_.error){var n="".concat(wL(),"/").concat(nO().name,"/").concat(nO().version);this.log_.error("video player error observed. code: ".concat(this.element_.error.code," message: ").concat(this.element_.error.message," deviceInfo: ").concat(n)),cx.uploadEvent("stat-".concat(this.stream_.getType(),"-video-").concat(MS,"-").concat(this.element_.error.code,"-").concat(n),this.element_.error)}break;case QT:UO.emit(bD,{stream:this.stream_})}}},{key:"handleTrackEvent",value:function(e){var t=e.type;switch(t){case JT:this.log_.info("video track is ended"),UO.emit(TD,{stream:this.stream_,type:t}),this.state_!==fC&&(this.state_=fC,this.emitter_.emit(qL,{state:this.state_,reason:JT}));break;case WT:this.log_.info("video track is unable to provide media output"),this.stream_.isRemote()||wO(),UO.emit(mD,{stream:this.stream_,type:t}),this.state_!==pC&&(this.state_=pC,this.emitter_.emit(qL,{state:this.state_,reason:WT}));break;case YT:this.log_.info("video track is able to provide media output"),UO.emit(_D,{stream:this.stream_}),this.state_===pC&&(this.state_=dC,this.emitter_.emit(qL,{state:this.state_,reason:YT}))}}},{key:"unbindEvents",value:function(){this.element_&&(this.element_.removeEventListener($T,this.handleElementEvent),this.element_.removeEventListener(JT,this.handleElementEvent),this.element_.removeEventListener(XT,this.handleElementEvent),this.element_.removeEventListener(ZT,this.handleElementEvent),this.element_.removeEventListener(QT,this.handleElementEvent)),this.track_&&(this.track_.removeEventListener(JT,this.handleTrackEvent),this.track_.removeEventListener(WT,this.handleTrackEvent),this.track_.removeEventListener(YT,this.handleTrackEvent))}},{key:"stop",value:function(){this.unbindEvents(),this.div_&&this.div_.removeChild(this.element_),this.element_.srcObject=null,this.element_=null,this.interval_&&eL.clearTask(this.interval_)}},{key:"resume",value:function(){return this.play()}},{key:"getVideoFrame",value:function(){var e=document.createElement("canvas");return e.width=this.element_.videoWidth,e.height=this.element_.videoHeight,e.getContext("2d").drawImage(this.element_,0,0),e.toDataURL("image/png")}},{key:"on",value:function(e,t){this.emitter_.on(e,t)}},{key:"getElement",value:function(){return this.element_?this.element_:null}}]),e}(),eU="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,tU=wr,nU=Nr,rU=RangeError,iU=function(e){if(void 0===e)return 0;var t=tU(e),n=nU(t);if(t!==n)throw rU("Wrong length or index");return n},oU=Array,aU=Math.abs,sU=Math.pow,cU=Math.floor,uU=Math.log,lU=Math.LN2,dU={pack:function(e,t,n){var r,i,o,a=oU(n),s=8*n-t-1,c=(1<<s)-1,u=c>>1,l=23===t?sU(2,-24)-sU(2,-77):0,d=e<0||0===e&&1/e<0?1:0,p=0;for((e=aU(e))!=e||1/0===e?(i=e!=e?1:0,r=c):(r=cU(uU(e)/lU),e*(o=sU(2,-r))<1&&(r--,o*=2),(e+=r+u>=1?l/o:l*sU(2,1-u))*o>=2&&(r++,o/=2),r+u>=c?(i=0,r=c):r+u>=1?(i=(e*o-1)*sU(2,t),r+=u):(i=e*sU(2,u-1)*sU(2,t),r=0));t>=8;)a[p++]=255&i,i/=256,t-=8;for(r=r<<t|i,s+=t;s>0;)a[p++]=255&r,r/=256,s-=8;return a[--p]|=128*d,a},unpack:function(e,t){var n,r=e.length,i=8*r-t-1,o=(1<<i)-1,a=o>>1,s=i-7,c=r-1,u=e[c--],l=127&u;for(u>>=7;s>0;)l=256*l+e[c--],s-=8;for(n=l&(1<<-s)-1,l>>=-s,s+=t;s>0;)n=256*n+e[c--],s-=8;if(0===l)l=1-a;else{if(l===o)return n?NaN:u?-1/0:1/0;n+=sU(2,t),l-=a}return(u?-1:1)*n*sU(2,l-t)}},pU=pt,fU=Rr,hU=jr,gU=function(e){for(var t=pU(this),n=hU(t),r=arguments.length,i=fU(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,a=void 0===o?n:fU(o,n);a>i;)t[i++]=e;return t},vU=O,mU=te,_U=R,yU=eU,bU=An,IU=Sn,TU=jl,CU=A,SU=ll,EU=wr,MU=Nr,kU=iU,wU=dU,OU=xs,DU=ac,AU=Sr.f,RU=on.f,xU=gU,LU=Zc,NU=Ks,PU=bU.PROPER,jU=bU.CONFIGURABLE,UU=ar.get,GU=ar.set,VU="ArrayBuffer",FU="DataView",BU="Wrong index",qU=vU.ArrayBuffer,HU=qU,zU=HU&&HU.prototype,KU=vU.DataView,WU=KU&&KU.prototype,YU=Object.prototype,JU=vU.Array,$U=vU.RangeError,XU=mU(xU),ZU=mU([].reverse),QU=wU.pack,eG=wU.unpack,tG=function(e){return[255&e]},nG=function(e){return[255&e,e>>8&255]},rG=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},iG=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},oG=function(e){return QU(e,23,4)},aG=function(e){return QU(e,52,8)},sG=function(e,t){RU(e.prototype,t,{get:function(){return UU(this)[t]}})},cG=function(e,t,n,r){var i=kU(n),o=UU(e);if(i+t>o.byteLength)throw $U(BU);var a=UU(o.buffer).bytes,s=i+o.byteOffset,c=LU(a,s,s+t);return r?c:ZU(c)},uG=function(e,t,n,r,i,o){var a=kU(n),s=UU(e);if(a+t>s.byteLength)throw $U(BU);for(var c=UU(s.buffer).bytes,u=a+s.byteOffset,l=r(+i),d=0;d<t;d++)c[u+d]=l[o?d:t-d-1]};if(yU){var lG=PU&&qU.name!==VU;if(CU((function(){qU(1)}))&&CU((function(){new qU(-1)}))&&!CU((function(){return new qU,new qU(1.5),new qU(NaN),1!=qU.length||lG&&!jU})))lG&&jU&&IU(qU,"name",VU);else{(HU=function(e){return SU(this,zU),new qU(kU(e))}).prototype=zU;for(var dG,pG=AU(qU),fG=0;pG.length>fG;)(dG=pG[fG++])in HU||IU(HU,dG,qU[dG]);zU.constructor=HU}DU&&OU(WU)!==YU&&DU(WU,YU);var hG=new KU(new HU(2)),gG=mU(WU.setInt8);hG.setInt8(0,2147483648),hG.setInt8(1,2147483649),!hG.getInt8(0)&&hG.getInt8(1)||TU(WU,{setInt8:function(e,t){gG(this,e,t<<24>>24)},setUint8:function(e,t){gG(this,e,t<<24>>24)}},{unsafe:!0})}else zU=(HU=function(e){SU(this,zU);var t=kU(e);GU(this,{bytes:XU(JU(t),0),byteLength:t}),_U||(this.byteLength=t)}).prototype,KU=function(e,t,n){SU(this,WU),SU(e,zU);var r=UU(e).byteLength,i=EU(t);if(i<0||i>r)throw $U("Wrong offset");if(i+(n=void 0===n?r-i:MU(n))>r)throw $U("Wrong length");GU(this,{buffer:e,byteLength:n,byteOffset:i}),_U||(this.buffer=e,this.byteLength=n,this.byteOffset=i)},WU=KU.prototype,_U&&(sG(HU,"byteLength"),sG(KU,"buffer"),sG(KU,"byteLength"),sG(KU,"byteOffset")),TU(WU,{getInt8:function(e){return cG(this,1,e)[0]<<24>>24},getUint8:function(e){return cG(this,1,e)[0]},getInt16:function(e){var t=cG(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=cG(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return iG(cG(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return iG(cG(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return eG(cG(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return eG(cG(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){uG(this,1,e,tG,t)},setUint8:function(e,t){uG(this,1,e,tG,t)},setInt16:function(e,t){uG(this,2,e,nG,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){uG(this,2,e,nG,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){uG(this,4,e,rG,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){uG(this,4,e,rG,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){uG(this,4,e,oG,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){uG(this,8,e,aG,t,arguments.length>2?arguments[2]:void 0)}});NU(HU,VU),NU(KU,FU);var vG={ArrayBuffer:HU,DataView:KU},mG=Ei,_G=te,yG=A,bG=ln,IG=Rr,TG=Nr,CG=jy,SG=vG.ArrayBuffer,EG=vG.DataView,MG=EG.prototype,kG=_G(SG.prototype.slice),wG=_G(MG.getUint8),OG=_G(MG.setUint8);mG({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:yG((function(){return!new SG(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(kG&&void 0===t)return kG(bG(this),e);for(var n=bG(this).byteLength,r=IG(e,n),i=IG(void 0===t?n:t,n),o=new(CG(this,SG))(TG(i-r)),a=new EG(this),s=new EG(o),c=0;r<i;)OG(s,c++,wG(a,r++));return o}}),Ei({global:!0,constructor:!0,forced:!eU},{DataView:vG.DataView});var DG=Ei,AG=Ai,RG=te([].reverse),xG=[1,2];DG({target:"Array",proto:!0,forced:String(xG)===String(xG.reverse())},{reverse:function(){return AG(this)&&(this.length=this.length),RG(this)}});var LG=Ye,NG=pt,PG=ae,jG=jr,UG=TypeError,GG=function(e){return function(t,n,r,i){LG(n);var o=NG(t),a=PG(o),s=jG(o),c=e?s-1:0,u=e?-1:1;if(r<2)for(;;){if(c in a){i=a[c],c+=u;break}if(c+=u,e?c<0:s<=c)throw UG("Reduce of empty array with no initial value")}for(;e?c>=0:s>c;c+=u)c in a&&(i=n(i,a[c],c,o));return i}},VG={left:GG(!1),right:GG(!0)},FG=VG.left,BG=xe,qG=wy;Ei({target:"Array",proto:!0,forced:!wp("reduce")||!qG&&BG>79&&BG<83},{reduce:function(e){var t=arguments.length;return FG(this,e,t,t>1?arguments[1]:void 0)}});var HG=Bl,zG="ArrayBuffer",KG=vG.ArrayBuffer;Ei({global:!0,constructor:!0,forced:O.ArrayBuffer!==KG},{ArrayBuffer:KG}),HG(zG);var WG=Ei,YG=Ai,JG=eo,$G=be,XG=Rr,ZG=jr,QG=fe,eV=Kc,tV=At,nV=Hd,rV=bo("slice"),iV=tV("species"),oV=Array,aV=Math.max;WG({target:"Array",proto:!0,forced:!rV},{slice:function(e,t){var n,r,i,o=QG(this),a=ZG(o),s=XG(e,a),c=XG(void 0===t?a:t,a);if(YG(o)&&(n=o.constructor,(JG(n)&&(n===oV||YG(n.prototype))||$G(n)&&null===(n=n[iV]))&&(n=void 0),n===oV||void 0===n))return nV(o,s,c);for(r=new(void 0===n?oV:n)(aV(c-s,0)),i=0;s<c;s++,i++)s in o&&eV(r,i,o[s]);return r.length=i,r}});var sV=O,cV=A,uV=te,lV=ad,dV=f_.trim,pV=o_,fV=sV.parseInt,hV=sV.Symbol,gV=hV&&hV.iterator,vV=/^[+-]?0x/i,mV=uV(vV.exec),_V=8!==fV(pV+"08")||22!==fV(pV+"0x16")||gV&&!cV((function(){fV(Object(gV))}))?function(e,t){var n=dV(lV(e));return fV(n,t>>>0||(mV(vV,n)?16:10))}:fV;Ei({global:!0,forced:parseInt!=_V},{parseInt:_V});var yV,bV,IV,TV={exports:{}},CV=eU,SV=R,EV=O,MV=me,kV=be,wV=gt,OV=Vi,DV=He,AV=Sn,RV=Cr,xV=on.f,LV=Ee,NV=xs,PV=ac,jV=At,UV=bt,GV=ar.enforce,VV=ar.get,FV=EV.Int8Array,BV=FV&&FV.prototype,qV=EV.Uint8ClampedArray,HV=qV&&qV.prototype,zV=FV&&NV(FV),KV=BV&&NV(BV),WV=Object.prototype,YV=EV.TypeError,JV=jV("toStringTag"),$V=UV("TYPED_ARRAY_TAG"),XV="TypedArrayConstructor",ZV=CV&&!!PV&&"Opera"!==OV(EV.opera),QV=!1,eF={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},tF={BigInt64Array:8,BigUint64Array:8},nF=function(e){var t=NV(e);if(kV(t)){var n=VV(t);return n&&wV(n,XV)?n.TypedArrayConstructor:nF(t)}},rF=function(e){if(!kV(e))return!1;var t=OV(e);return wV(eF,t)||wV(tF,t)};for(yV in eF)(IV=(bV=EV[yV])&&bV.prototype)?GV(IV).TypedArrayConstructor=bV:ZV=!1;for(yV in tF)(IV=(bV=EV[yV])&&bV.prototype)&&(GV(IV).TypedArrayConstructor=bV);if((!ZV||!MV(zV)||zV===Function.prototype)&&(zV=function(){throw YV("Incorrect invocation")},ZV))for(yV in eF)EV[yV]&&PV(EV[yV],zV);if((!ZV||!KV||KV===WV)&&(KV=zV.prototype,ZV))for(yV in eF)EV[yV]&&PV(EV[yV].prototype,KV);if(ZV&&NV(HV)!==KV&&PV(HV,KV),SV&&!wV(KV,JV))for(yV in QV=!0,xV(KV,JV,{get:function(){return kV(this)?this[$V]:void 0}}),eF)EV[yV]&&AV(EV[yV],$V,yV);var iF={NATIVE_ARRAY_BUFFER_VIEWS:ZV,TYPED_ARRAY_TAG:QV&&$V,aTypedArray:function(e){if(rF(e))return e;throw YV("Target is not a typed array")},aTypedArrayConstructor:function(e){if(MV(e)&&(!PV||LV(zV,e)))return e;throw YV(DV(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,r){if(SV){if(n)for(var i in eF){var o=EV[i];if(o&&wV(o.prototype,e))try{delete o.prototype[e]}catch(uY){try{o.prototype[e]=t}catch(s){}}}KV[e]&&!n||RV(KV,e,n?t:ZV&&BV[e]||t,r)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(SV){if(PV){if(n)for(r in eF)if((i=EV[r])&&wV(i,e))try{delete i[e]}catch(uY){}if(zV[e]&&!n)return;try{return RV(zV,e,n?t:ZV&&zV[e]||t)}catch(uY){}}for(r in eF)!(i=EV[r])||i[e]&&!n||RV(i,e,t)}},getTypedArrayConstructor:nF,isView:function(e){if(!kV(e))return!1;var t=OV(e);return"DataView"===t||wV(eF,t)||wV(tF,t)},isTypedArray:rF,TypedArray:zV,TypedArrayPrototype:KV},oF=O,aF=A,sF=gl,cF=iF.NATIVE_ARRAY_BUFFER_VIEWS,uF=oF.ArrayBuffer,lF=oF.Int8Array,dF=!cF||!aF((function(){lF(1)}))||!aF((function(){new lF(-1)}))||!sF((function(e){new lF,new lF(null),new lF(1.5),new lF(e)}),!0)||aF((function(){return 1!==new lF(new uF(2),1,void 0).length})),pF=wr,fF=RangeError,hF=function(e){var t=pF(e);if(t<0)throw fF("The argument can't be less than 0");return t},gF=RangeError,vF=function(e,t){var n=hF(e);if(n%t)throw gF("Wrong offset");return n},mF=Vi,_F=te("".slice),yF=Gt,bF=TypeError,IF=function(e){var t=yF(e,"number");if("number"==typeof t)throw bF("Can't convert number to bigint");return BigInt(t)},TF=Oi,CF=P,SF=Ry,EF=pt,MF=jr,kF=qu,wF=Pu,OF=Du,DF=function(e){return"Big"===_F(mF(e),0,3)},AF=iF.aTypedArrayConstructor,RF=IF,xF=Ei,LF=O,NF=P,PF=R,jF=dF,UF=iF,GF=vG,VF=ll,FF=q,BF=Sn,qF=VD,HF=Nr,zF=iU,KF=vF,WF=Bt,YF=gt,JF=Vi,$F=be,XF=Be,ZF=hs,QF=Ee,eB=ac,tB=Sr.f,nB=function(e){var t,n,r,i,o,a,s,c,u=SF(this),l=EF(e),d=arguments.length,p=d>1?arguments[1]:void 0,f=void 0!==p,h=wF(l);if(h&&!OF(h))for(c=(s=kF(l,h)).next,l=[];!(a=CF(c,s)).done;)l.push(a.value);for(f&&d>2&&(p=TF(p,arguments[2])),n=MF(l),r=new(AF(u))(n),i=DF(r),t=0;n>t;t++)o=f?p(l[t],t):l[t],r[t]=i?RF(o):+o;return r},rB=vo.forEach,iB=Bl,oB=on,aB=D,sB=yl,cB=ar.get,uB=ar.set,lB=ar.enforce,dB=oB.f,pB=aB.f,fB=Math.round,hB=LF.RangeError,gB=GF.ArrayBuffer,vB=gB.prototype,mB=GF.DataView,_B=UF.NATIVE_ARRAY_BUFFER_VIEWS,yB=UF.TYPED_ARRAY_TAG,bB=UF.TypedArray,IB=UF.TypedArrayPrototype,TB=UF.aTypedArrayConstructor,CB=UF.isTypedArray,SB="BYTES_PER_ELEMENT",EB="Wrong length",MB=function(e,t){TB(e);for(var n=0,r=t.length,i=new e(r);r>n;)i[n]=t[n++];return i},kB=function(e,t){dB(e,t,{get:function(){return cB(this)[t]}})},wB=function(e){var t;return QF(vB,e)||"ArrayBuffer"==(t=JF(e))||"SharedArrayBuffer"==t},OB=function(e,t){return CB(e)&&!XF(t)&&t in e&&qF(+t)&&t>=0},DB=function(e,t){return t=WF(t),OB(e,t)?FF(2,e[t]):pB(e,t)},AB=function(e,t,n){return t=WF(t),!(OB(e,t)&&$F(n)&&YF(n,"value"))||YF(n,"get")||YF(n,"set")||n.configurable||YF(n,"writable")&&!n.writable||YF(n,"enumerable")&&!n.enumerable?dB(e,t,n):(e[t]=n.value,e)};PF?(_B||(aB.f=DB,oB.f=AB,kB(IB,"buffer"),kB(IB,"byteOffset"),kB(IB,"byteLength"),kB(IB,"length")),xF({target:"Object",stat:!0,forced:!_B},{getOwnPropertyDescriptor:DB,defineProperty:AB}),TV.exports=function(e,t,n){var r=e.match(/\d+$/)[0]/8,i=e+(n?"Clamped":"")+"Array",o="get"+e,a="set"+e,s=LF[i],c=s,u=c&&c.prototype,l={},d=function(e,t){dB(e,t,{get:function(){return function(e,t){var n=cB(e);return n.view[o](t*r+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,i){var o=cB(e);n&&(i=(i=fB(i))<0?0:i>255?255:255&i),o.view[a](t*r+o.byteOffset,i,!0)}(this,t,e)},enumerable:!0})};_B?jF&&(c=t((function(e,t,n,i){return VF(e,u),sB($F(t)?wB(t)?void 0!==i?new s(t,KF(n,r),i):void 0!==n?new s(t,KF(n,r)):new s(t):CB(t)?MB(c,t):NF(nB,c,t):new s(zF(t)),e,c)})),eB&&eB(c,bB),rB(tB(s),(function(e){e in c||BF(c,e,s[e])})),c.prototype=u):(c=t((function(e,t,n,i){VF(e,u);var o,a,s,l=0,p=0;if($F(t)){if(!wB(t))return CB(t)?MB(c,t):NF(nB,c,t);o=t,p=KF(n,r);var f=t.byteLength;if(void 0===i){if(f%r)throw hB(EB);if((a=f-p)<0)throw hB(EB)}else if((a=HF(i)*r)+p>f)throw hB(EB);s=a/r}else s=zF(t),o=new gB(a=s*r);for(uB(e,{buffer:o,byteOffset:p,byteLength:a,length:s,view:new mB(o)});l<s;)d(e,l++)})),eB&&eB(c,bB),u=c.prototype=ZF(IB)),u.constructor!==c&&BF(u,"constructor",c),lB(u).TypedArrayConstructor=c,yB&&BF(u,yB,i);var p=c!=s;l[i]=c,xF({global:!0,constructor:!0,forced:p,sham:!_B},l),SB in c||BF(c,SB,r),SB in u||BF(u,SB,r),iB(i)}):TV.exports=function(){},(0,TV.exports)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var RB=pt,xB=Rr,LB=jr,NB=fp,PB=Math.min,jB=[].copyWithin||function(e,t){var n=RB(this),r=LB(n),i=xB(e,r),o=xB(t,r),a=arguments.length>2?arguments[2]:void 0,s=PB((void 0===a?r:xB(a,r))-o,r-i),c=1;for(o<i&&i<o+s&&(c=-1,o+=s-1,i+=s-1);s-- >0;)o in n?n[i]=n[o]:NB(n,i),i+=c,o+=c;return n},UB=iF,GB=te(jB),VB=UB.aTypedArray;(0,UB.exportTypedArrayMethod)("copyWithin",(function(e,t){return GB(VB(this),e,t,arguments.length>2?arguments[2]:void 0)}));var FB=vo.every,BB=iF.aTypedArray;(0,iF.exportTypedArrayMethod)("every",(function(e){return FB(BB(this),e,arguments.length>1?arguments[1]:void 0)}));var qB=gU,HB=IF,zB=Vi,KB=P,WB=A,YB=iF.aTypedArray,JB=iF.exportTypedArrayMethod,$B=te("".slice);JB("fill",(function(e){var t=arguments.length;YB(this);var n="Big"===$B(zB(this),0,3)?HB(e):+e;return KB(qB,this,n,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),WB((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e})));var XB=jr,ZB=jy,QB=iF.aTypedArrayConstructor,eq=iF.getTypedArrayConstructor,tq=function(e){return QB(ZB(e,eq(e)))},nq=function(e,t){for(var n=0,r=XB(t),i=new e(r);r>n;)i[n]=t[n++];return i},rq=tq,iq=vo.filter,oq=function(e,t){return nq(rq(e),t)},aq=iF.aTypedArray;(0,iF.exportTypedArrayMethod)("filter",(function(e){var t=iq(aq(this),e,arguments.length>1?arguments[1]:void 0);return oq(this,t)}));var sq=vo.find,cq=iF.aTypedArray;(0,iF.exportTypedArrayMethod)("find",(function(e){return sq(cq(this),e,arguments.length>1?arguments[1]:void 0)}));var uq=vo.findIndex,lq=iF.aTypedArray;(0,iF.exportTypedArrayMethod)("findIndex",(function(e){return uq(lq(this),e,arguments.length>1?arguments[1]:void 0)}));var dq=vo.forEach,pq=iF.aTypedArray;(0,iF.exportTypedArrayMethod)("forEach",(function(e){dq(pq(this),e,arguments.length>1?arguments[1]:void 0)}));var fq=Br.includes,hq=iF.aTypedArray;(0,iF.exportTypedArrayMethod)("includes",(function(e){return fq(hq(this),e,arguments.length>1?arguments[1]:void 0)}));var gq=Br.indexOf,vq=iF.aTypedArray;(0,iF.exportTypedArrayMethod)("indexOf",(function(e){return gq(vq(this),e,arguments.length>1?arguments[1]:void 0)}));var mq=O,_q=A,yq=te,bq=iF,Iq=Gc,Tq=At("iterator"),Cq=mq.Uint8Array,Sq=yq(Iq.values),Eq=yq(Iq.keys),Mq=yq(Iq.entries),kq=bq.aTypedArray,wq=bq.exportTypedArrayMethod,Oq=Cq&&Cq.prototype,Dq=!_q((function(){Oq[Tq].call([1])})),Aq=!!Oq&&Oq.values&&Oq[Tq]===Oq.values&&"values"===Oq.values.name,Rq=function(){return Sq(kq(this))};wq("entries",(function(){return Mq(kq(this))}),Dq),wq("keys",(function(){return Eq(kq(this))}),Dq),wq("values",Rq,Dq||!Aq,{name:"values"}),wq(Tq,Rq,Dq||!Aq,{name:"values"});var xq=iF.aTypedArray,Lq=iF.exportTypedArrayMethod,Nq=te([].join);Lq("join",(function(e){return Nq(xq(this),e)}));var Pq=qd,jq=fe,Uq=wr,Gq=jr,Vq=wp,Fq=Math.min,Bq=[].lastIndexOf,qq=!!Bq&&1/[1].lastIndexOf(1,-0)<0,Hq=Vq("lastIndexOf"),zq=qq||!Hq?function(e){if(qq)return Pq(Bq,this,arguments)||0;var t=jq(this),n=Gq(t),r=n-1;for(arguments.length>1&&(r=Fq(r,Uq(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:Bq,Kq=qd,Wq=zq,Yq=iF.aTypedArray;(0,iF.exportTypedArrayMethod)("lastIndexOf",(function(e){var t=arguments.length;return Kq(Wq,Yq(this),t>1?[e,arguments[1]]:[e])}));var Jq=vo.map,$q=tq,Xq=iF.aTypedArray;(0,iF.exportTypedArrayMethod)("map",(function(e){return Jq(Xq(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new($q(e))(t)}))}));var Zq=VG.left,Qq=iF.aTypedArray;(0,iF.exportTypedArrayMethod)("reduce",(function(e){var t=arguments.length;return Zq(Qq(this),e,t,t>1?arguments[1]:void 0)}));var eH=VG.right,tH=iF.aTypedArray;(0,iF.exportTypedArrayMethod)("reduceRight",(function(e){var t=arguments.length;return eH(tH(this),e,t,t>1?arguments[1]:void 0)}));var nH=iF.aTypedArray,rH=iF.exportTypedArrayMethod,iH=Math.floor;rH("reverse",(function(){for(var e,t=this,n=nH(t).length,r=iH(n/2),i=0;i<r;)e=t[i],t[i++]=t[--n],t[n]=e;return t}));var oH=O,aH=P,sH=iF,cH=jr,uH=vF,lH=pt,dH=A,pH=oH.RangeError,fH=oH.Int8Array,hH=fH&&fH.prototype,gH=hH&&hH.set,vH=sH.aTypedArray,mH=sH.exportTypedArrayMethod,_H=!dH((function(){var e=new Uint8ClampedArray(2);return aH(gH,e,{length:1,0:3},1),3!==e[1]})),yH=_H&&sH.NATIVE_ARRAY_BUFFER_VIEWS&&dH((function(){var e=new fH(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));mH("set",(function(e){vH(this);var t=uH(arguments.length>1?arguments[1]:void 0,1),n=lH(e);if(_H)return aH(gH,this,n,t);var r=this.length,i=cH(n),o=0;if(i+t>r)throw pH("Wrong length");for(;o<i;)this[t+o]=n[o++]}),!_H||yH);var bH=tq,IH=Hd,TH=iF.aTypedArray;(0,iF.exportTypedArrayMethod)("slice",(function(e,t){for(var n=IH(TH(this),e,t),r=bH(this),i=0,o=n.length,a=new r(o);o>i;)a[i]=n[i++];return a}),A((function(){new Int8Array(1).slice()})));var CH=vo.some,SH=iF.aTypedArray;(0,iF.exportTypedArrayMethod)("some",(function(e){return CH(SH(this),e,arguments.length>1?arguments[1]:void 0)}));var EH=Me.match(/firefox\/(\d+)/i),MH=!!EH&&+EH[1],kH=/MSIE|Trident/.test(Me),wH=Me.match(/AppleWebKit\/(\d+)\./),OH=!!wH&&+wH[1],DH=te,AH=A,RH=Ye,xH=Rg,LH=MH,NH=kH,PH=xe,jH=OH,UH=iF.aTypedArray,GH=iF.exportTypedArrayMethod,VH=O.Uint16Array,FH=VH&&DH(VH.prototype.sort),BH=!(!FH||AH((function(){FH(new VH(2),null)}))&&AH((function(){FH(new VH(2),{})}))),qH=!!FH&&!AH((function(){if(PH)return PH<74;if(LH)return LH<67;if(NH)return!0;if(jH)return jH<602;var e,t,n=new VH(516),r=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(FH(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0}));GH("sort",(function(e){return void 0!==e&&RH(e),qH?FH(this,e):xH(UH(this),function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e))}),!qH||BH);var HH=Nr,zH=Rr,KH=tq,WH=iF.aTypedArray;(0,iF.exportTypedArrayMethod)("subarray",(function(e,t){var n=WH(this),r=n.length,i=zH(e,r);return new(KH(n))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,HH((void 0===t?r:zH(t,r))-i))}));var YH=qd,JH=iF,$H=A,XH=Hd,ZH=O.Int8Array,QH=JH.aTypedArray,ez=JH.exportTypedArrayMethod,tz=[].toLocaleString,nz=!!ZH&&$H((function(){tz.call(new ZH(1))}));ez("toLocaleString",(function(){return YH(tz,nz?XH(QH(this)):QH(this),XH(arguments))}),$H((function(){return[1,2].toLocaleString()!=new ZH([1,2]).toLocaleString()}))||!$H((function(){ZH.prototype.toLocaleString.call([1,2])})));var rz=iF.exportTypedArrayMethod,iz=A,oz=te,az=O.Uint8Array,sz=az&&az.prototype||{},cz=[].toString,uz=oz([].join);iz((function(){cz.call({})}))&&(cz=function(){return uz(this)});var lz=sz.toString!=cz;rz("toString",cz,lz);var dz=function(){function e(t,n,r){s(this,e),this.isUplink_=r,this.connection_=t,this.log_=n,this.seiMessageList_=[],this.seiPayloadType_=243,this.mainVideoSenderOrReceiver_=null,this.mainVideoAbortController_=null,this.abortMap_=new Map,this.onSEIMessage=null}return u(e,[{key:"isRunning",get:function(){return!!this.mainVideoAbortController_}},{key:"start",value:function(e){this.mainVideoSenderOrReceiver_=e;var t=e.createEncodedStreams(),n=t.readable,r=t.writable,i=new TransformStream({transform:this.isUplink_?this.encodeVideoFrame.bind(this):this.decodeVideoFrame.bind(this)});this.mainVideoAbortController_=new AbortController,n.pipeThrough(i).pipeTo(r,{signal:this.mainVideoAbortController_.signal}).catch((function(){}))}},{key:"restart",value:function(e){this.stop(),this.start(e)}},{key:"stop",value:function(){var e;null===(e=this.mainVideoAbortController_)||void 0===e||e.abort(),this.mainVideoAbortController_=null}},{key:"destroy",value:function(){this.stop(),this.abortMap_.forEach((function(e){return e.abort()})),this.abortMap_.clear(),this.log_=null,this.onSEIMessage=null,this.mainVideoSenderOrReceiver_=null,this.connection_=null}},{key:"handleEncodedStreams",value:function(){var e=this;try{var t=this.connection_.getPeerConnection();this.clearUnusedSenderOrReceiver(t),this.isUplink_?t.getSenders().forEach((function(t,n){if(1===n){if(t===e.mainVideoSenderOrReceiver_)return;e.isRunning?e.restart(t):e.start(t)}else{if(e.abortMap_.has(t))return;e.pipeSenderOrReceiver(t)}})):t.getReceivers().forEach((function(t,n){var r;e.abortMap_.has(t)||t===e.mainVideoSenderOrReceiver_||(1===n&&(null===(r=t.track)||void 0===r?void 0:r.kind)===UT?e.isRunning?e.restart(t):e.start(t):e.pipeSenderOrReceiver(t))}))}catch(uY){this.log_.warn(uY)}}},{key:"pipeSenderOrReceiver",value:function(e){var t=e.createEncodedStreams(),n=t.readable,r=t.writable,i=new AbortController;this.abortMap_.set(e,i),n.pipeTo(r,{signal:i.signal}).catch((function(){}))}},{key:"clearUnusedSenderOrReceiver",value:function(e){var t=this;this.abortMap_.forEach((function(n,r){(t.isUplink_?e.getSenders():e.getReceivers()).find((function(e){return e===r}))||(n.abort(),t.abortMap_.delete(r))}))}},{key:"push",value:function(e,t){t&&t.seiPayloadType&&(this.seiPayloadType_=t.seiPayloadType),this.seiMessageList_.push(e)}},{key:"hasSEI",value:function(e){var t=new DataView(e);return 1===t.getInt32(0)&&6===t.getInt8(4)}},{key:"isEmptyFrame",value:function(e){return"empty"===e.type||0===e.data.byteLength}},{key:"getNaluCount",value:function(e){for(var t=0,n=0,r=new DataView(e),i=0;i<e.byteLength;i++)switch(r.getUint8(i)){case 0:t++;break;case 1:2!==t&&3!==t||n++,t=0;break;default:t=0}return n}},{key:"encodeVideoFrame",value:function(e,t){try{if(this.connection_.isH264&&this.seiMessageList_.length>0&&!this.isEmptyFrame(e)){var n=9-this.getNaluCount(e.data);if(n<=0)return;for(var r=this.seiMessageList_.splice(0,n).reverse().map(this.encodeSEINalu.bind(this)),i=r.reduce((function(e,t){return e+t.dataView.byteLength}),0),o=new ArrayBuffer(i+e.data.byteLength),a=new DataView(o),s=new DataView(e.data),c=0,u=0;u<r.length;u++)for(var l=0;l<r[u].dataView.byteLength;l++)a.setInt8(c++,r[u].dataView.getInt8(l));for(var d=0;d<e.data.byteLength;d++)a.setInt8(c++,s.getInt8(d));e.data=o,this.log_.debug("".concat(r.length," sei sent"))}}catch(uY){this.log_.warn(uY)}t.enqueue(e)}},{key:"decodeVideoFrame",value:function(e,t){var n=this;try{if(this.connection_.isH264&&!this.isEmptyFrame(e)&&this.hasSEI(e.data)){for(var r=[],i=new DataView(e.data),o=0,a=-1,s=-1,c=0;c<e.data.byteLength;c++){var u=i.getUint8(c);if(0===u)o++;else if(1===u){if(2===o||3===o){var l=c-o;if(-1===a?a=l:-1===s&&(s=l,r.push(new pz(new DataView(i.buffer.slice(a,s)))),a=l,s=-1),6!==i.getUint8(c+1)){e.data=new DataView(i.buffer.slice(l)).buffer;break}}o=0}else o=0}this.log_.debug("".concat(r.length," sei received")),fO(this.onSEIMessage)&&r.reverse().forEach((function(e){n.onSEIMessage({seiPayloadType:e.seiPayloadType,data:e.seiPayload.buffer})}))}}catch(uY){this.log_.warn(uY)}t.enqueue(e)}},{key:"encodeSEINalu",value:function(e){var t=e.byteLength,n=parseInt(t/255),r=t%255,i=[];i.push(0,0,0,1,6,this.seiPayloadType_);for(var o=0;o<n;o++)i.push(255);i.push(r);var a=new DataView(e);return i.push.apply(i,T(new Uint8Array(a.buffer))),i.push(128),new pz(new DataView(new Uint8Array(i).buffer),!0)}}]),e}(),pz=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];s(this,e),this.dataView=t,this.isSEI&&(n?this.addPreventionByte():this.removePreventionByte())}return u(e,[{key:"addPreventionByte",value:function(){for(var e=this.seiPayloadStartIndex,t=this.dataView.byteLength-2,n=[],r=0,i=e;i<=t;i++){var o=this.dataView.getInt8(i);switch(o){case 0:case 1:case 2:case 3:2===r&&(n.push(3),r=0),0==o?r++:r=0,n.push(o);break;default:r=0,n.push(o)}}n.push(this.dataView.getInt8(this.dataView.byteLength-1));var a=new DataView(new Uint8Array([].concat(T(new Uint8Array(this.dataView.buffer).slice(0,e)),n)).buffer);this.dataView=a}},{key:"removePreventionByte",value:function(){for(var e=this.seiPayloadStartIndex,t=this.dataView.byteLength-1,n=[],r=0,i=e;i<=t;i++)switch(this.dataView.getInt8(i)){case 0:r++,n.push(this.dataView.getInt8(i));break;case 3:2!==r&&n.push(this.dataView.getInt8(i)),r=0;break;default:n.push(this.dataView.getInt8(i)),r=0}var o=new DataView(new Uint8Array([].concat(T(new Uint8Array(this.dataView.buffer).slice(0,e)),n)).buffer);this.dataView=o}},{key:"isSEI",get:function(){return 6===this.dataView.getUint8(4)}},{key:"seiPayloadStartIndex",get:function(){for(var e=6,t=6;t<this.dataView.buffer.byteLength&&(e++,255===this.dataView.getUint8(t));t++);return e}},{key:"seiPayloadType",get:function(){return this.isSEI?this.dataView.getUint8(5):null}},{key:"seiPayload",get:function(){if(!this.isSEI)return null;for(var e=0,t=6,n=6;n<this.dataView.buffer.byteLength;n++){var r=this.dataView.getUint8(n);if(t++,255!==r){e+=r;break}e+=255}for(var i=new ArrayBuffer(e),o=new DataView(i),a=0;a<i.byteLength;a++,t++)o.setInt8(a,this.dataView.getInt8(t));return o}}]),e}(),fz=function(){function e(t){s(this,e),this.userId_=t.userId,this.tinyId_=t.tinyId,this.client_=t.client,this.sdpSemantics_=t.client.getSdpSemantics(),this.isUplink_=t.isUplink,this.log_=PD.createLogger({id:"n|"+this.userId_,userId:this.client_.getUserId(),sdkAppId:this.client_.getSDKAppId(),isLocal:this.isUplink_}),this.signalChannel_=t.signalChannel,this.peerConnection_=null,this.isErrorObserved_=!1,this.emitter_=new jO,this.currentState_=HC,this.waitForPeerConnectionConnectedPromise_=null,this.isReconnecting_=!1,this.reconnectionCount_=0,this.reconnectionTimer_=-1,this.isFirstConnection_=!0,this.delay_={audioDelay:0,videoDelay:0},this.enableSEI_=t.enableSEI,this.enableSEI_&&EL&&(this.sei_=new dz(this,this.log_,this.isUplink_))}var t;return u(e,[{key:"initialize",value:function(){var e={encodedInsertableStreams:this.enableSEI_&&EL,iceServers:this.client_.getIceServers(),iceTransportPolicy:this.client_.getIceTransportPolicy(),sdpSemantics:this.sdpSemantics_,bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",tcpCandidatePolicy:"disable",IceTransportsType:"nohost"};this.peerConnection_=new RTCPeerConnection(e),this.peerConnection_.onconnectionstatechange=this.onConnectionStateChange.bind(this)}},{key:"close",value:function(){this.log_.info("closing connection"),this.closePeerConnection(),this.sei_&&(this.sei_.destroy(),this.sei_=null)}},{key:"closePeerConnection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.peerConnection_&&(this.peerConnection_.onconnectionstatechange=function(){},this.peerConnection_.close(),this.peerConnection_=null,e&&this.emitConnectionStateChangedEvent(HC))}},{key:"getDTLSTransportState",value:function(){if(!this.peerConnection_)return qC;var e=null;if(this.isUplink_){if(!_L()||0===this.peerConnection_.getSenders().length)return qC;e=this.peerConnection_.getSenders()[0].transport}else{if(!mL()||0===this.peerConnection_.getReceivers().length)return qC;e=this.peerConnection_.getReceivers()[0].transport}return e?e.state:qC}},{key:"onConnectionStateChange",value:function(e){var t=this.peerConnection_.iceConnectionState,n=this.getDTLSTransportState();if(this.log_.info("onConnectionStateChange() connectionState: "+e.target.connectionState),this.log_.info("ICE Transport state: ".concat(t,", DTLS Transport state: ").concat(n)),e.target.connectionState===JC&&this.emitConnectionStateChangedEvent(zC),e.target.connectionState===$C||e.target.connectionState===XC){var r="".concat(this.isUplink_?"uplink":"downlink"," ICE/DTLS Transport connection ").concat(e.target.connectionState,". ICE Transport state: ").concat(t,", DTLS Transport state: ").concat(n),i=new yR({message:r,code:_R.ICE_TRANSPORT_ERROR});cx.logFailedEvent({userId:this.client_.getUserId(),eventType:_S,error:i}),this.emitConnectionStateChangedEvent(HC),this.isErrorObserved_||this.emitter_.emit(PL.ERROR,i)}e.target.connectionState!==QC&&e.target.connectionState!==eS||(this.logSelectedCandidate(),cx.logSuccessEvent({userId:this.client_.getUserId(),eventType:_S}),this.emitConnectionStateChangedEvent(WC))}},{key:"emitConnectionStateChangedEvent",value:function(e){e!==this.currentState_&&(this.currentState_===KC&&e===zC||(UO.emit(ED,{client:this.client_,connection:this,prevState:this.currentState_,state:e}),this.emitter_.emit(PL.CONNECTION_STATE_CHANGED,{prevState:this.currentState_,state:e}),this.currentState_=e))}},{key:"hitTest",value:function(e){return(0===e||"0"===e)&&this.isUplink_||e===this.tinyId_}},{key:"addEventInternal",value:function(e,t){var n=this.client_.getUserId(),r={eventId:e,eventDesc:t,timestamp:rm(),userId:n,tinyId:this.client_.getTinyId()};this.isUplink_||(r.remoteUserId=this.userId_,r.remoteTinyId=this.tinyId_),rx(n,r)}},{key:"getPeerConnection",value:function(){return this.peerConnection_}},{key:"getClient",value:function(){return this.client_}},{key:"getUserId",value:function(){return this.userId_}},{key:"getTinyId",value:function(){return this.tinyId_}},{key:"logSelectedCandidate",value:(t=a(r().mark((function e(){var t,n,i,o,a,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.peerConnection_){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.peerConnection_.getStats();case 4:t=e.sent,n=E(t),e.prev=6,n.s();case 8:if((i=n.n()).done){e.next=18;break}if((o=I(i.value,2))[0],!ML(a=o[1])){e.next=16;break}return s=t.get(a.localCandidateId),c=t.get(a.remoteCandidateId),s&&this.log_.info("local candidate: ".concat(s.candidateType," ").concat(s.protocol,":").concat(s.ip||s.address,":").concat(s.port," ").concat(s.networkType||""," ").concat("relay"===s.candidateType?"relayProtocol:"+s.relayProtocol:"")),c&&this.log_.info("remote candidate: ".concat(c.candidateType," ").concat(c.protocol,":").concat(c.ip||c.address,":").concat(c.port)),e.abrupt("break",18);case 16:e.next=8;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(6),n.e(e.t0);case 23:return e.prev=23,n.f(),e.finish(23);case 26:case"end":return e.stop()}}),e,this,[[6,20,23,26]])}))),function(){return t.apply(this,arguments)})},{key:"getCurrentState",value:function(){return this.currentState_}},{key:"waitForPeerConnectionConnected",value:function(){var e=this;return this.waitForPeerConnectionConnectedPromise_||(this.waitForPeerConnectionConnectedPromise_=new Promise((function(t,n){if(e.currentState_===WC)return t();var r=-1,i=function(e){e.state===WC&&(clearTimeout(r),a(),t())},o=function(t){t.client===e.client_&&(clearTimeout(r),a(),n(new yR({code:_R.API_CALL_ABORTED,message:oO({key:Rk,data:"leave room"})})))},a=function(){UO.off(KO,o,e),e.emitter_.off(PL.CONNECTION_STATE_CHANGED,i,e)};r=setTimeout((function(){a();var e=new yR({code:_R.API_CALL_TIMEOUT,message:"connection timeout"});n(e)}),1e4),UO.on(KO,o,e),e.emitter_.on(PL.CONNECTION_STATE_CHANGED,i,e)})),this.waitForPeerConnectionConnectedPromise_=this.waitForPeerConnectionConnectedPromise_.then((function(t){return e.waitForPeerConnectionConnectedPromise_=null,t})).catch((function(t){throw e.waitForPeerConnectionConnectedPromise_=null,t}))),this.waitForPeerConnectionConnectedPromise_}},{key:"getReconnectionCount",value:function(){return this.reconnectionCount_}},{key:"startReconnection",value:function(){this.isReconnecting_=!0,this.emitConnectionStateChangedEvent(KC),this.reconnect(),this.addEventInternal(this.isUplink_?YR:XR,"".concat(this.isUplink_?"uplink":"downlink","-connection is reconnecting"))}},{key:"stopReconnection",value:function(){this.log_.info("stop reconnection"),this.isReconnecting_=!1,this.reconnectionCount_=0,this.clearReconnectionTimer(),this.signalChannel_.off(qA,this.reconnect,this)}},{key:"on",value:function(e,t,n){this.emitter_.on(e,t,n)}},{key:"off",value:function(e,t,n){this.emitter_.off(e,t,n)}},{key:"setDelay",value:function(e){var t=e.audioDelay,n=e.videoDelay;this.delay_={audioDelay:t,videoDelay:n}}},{key:"getDelay",value:function(){return this.delay_}},{key:"isH264",get:function(){var e,t;return!(null===(e=this.peerConnection_)||void 0===e||null===(t=e.remoteDescription)||void 0===t||!t.sdp.includes("H264"))}}]),e}(),hz=function(){function e(){s(this,e),this.set_=new Set,UO.on(GO,this.add,this),UO.on(BO,this.add,this),UO.on(qO,this.delete,this),UO.on(KO,this.delete,this)}return u(e,[{key:"add",value:function(e){var t=e.client,n=e.roomId;if("rtc"!==t.getMode()){var r=this.getKey(t.getUserId(),n||t.getRoomId(),t.getSDKAppId(),t.getUseStringRoomId());this.set_.add(r)}}},{key:"delete",value:function(e){var t=e.client;if("rtc"!==t.getMode()){var n=this.getKey(t.getUserId(),t.getRoomId(),t.getSDKAppId(),t.getUseStringRoomId());this.set_.delete(n)}}},{key:"getKey",value:function(e,t,n,r){return"".concat(n,"_").concat(t,"_").concat(e,"_").concat(r)}},{key:"isJoined",value:function(e){var t=e.userId,n=e.roomId,r=e.sdkAppId,i=e.client;return"rtc"!==i.getMode()&&this.set_.has(this.getKey(t,n,r,i.getUseStringRoomId()))}}]),e}(),gz=new hz;function vz(e,t,n,r){if(this.useStringRoomId_){if(!gO(e)||!/^[A-Za-z\d\s!#$%&()+\-:;<=.>?@[\]^_{}|~,]{1,64}$/.test(e))throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:XE,data:t,link:{className:r,fnName:n}})})}else if(!(vO(e)&&/^[1-9]\d*$/.test(String(e))&&e<4294967295))throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:ZE,data:t,link:{className:r,fnName:n}})})}function mz(e,t,n,r){if(!/^[A-Za-z\d_-]*$/.test(e))throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:mM,data:t,link:{className:r,fnName:n}})})}var _z,yz,bz={createClient:{name:"clientConfig",required:!0,type:GS,properties:{sdkAppId:{required:!0,type:PS,allowEmpty:!1},userId:{required:!0,type:NS,allowEmpty:!1},userSig:{required:!0,type:NS,allowEmpty:!1},mode:{required:!0,type:NS,values:["rtc",xC]},useStringRoomId:{type:jS},autoSubscribe:{type:jS},enableAutoPlayDialog:{type:jS},streamId:{type:NS},userDefineRecordId:{type:NS},pureAudioPushMode:{type:PS,values:[1,2]},enableSEI:{type:jS}}},createStream:{name:"streamConfig",required:!0,type:GS,properties:{userId:{type:NS},audio:{type:jS},video:{type:jS},screen:{type:jS},screenAudio:{type:jS},microphoneId:{type:NS},cameraId:{type:NS},facingMode:{type:[NS,GS]},audioSource:{instanceOf:window.MediaStreamTrack},videoSource:{instanceOf:window.MediaStreamTrack}},validate:function(e){if(!hO(e.screen)&&e.screen&&hO(e.audio)&&(e.audio=!1),!(hO(e.audio)&&hO(e.video)||hO(e.audioSource)&&hO(e.videoSource)))throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:ok})});if(!hO(e.screen)&&!0===e.screen&&!0===e.video)throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:ak})});if(e.audio&&e.screenAudio)throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:sk})});if(!0!==e.screen&&!0===e.screenAudio)throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:ck})});if(!hO(e.screen)&&!0===e.screen&&!this.isScreenShareSupported())throw new yR({code:_R.INVALID_OPERATION,message:oO({key:vk})})}}},Iz={join:{name:"options",required:!0,type:GS,properties:{roomId:{required:!0,type:[PS,NS],allowEmpty:!1,validate:vz},role:{type:[NS],values:[PC,jC]},privateMapKey:{type:[NS]}},validate:function(e){if(this.isJoined_)throw new yR({code:_R.INVALID_OPERATION,message:oO({key:$E})});if(this.checkDestroy(),gz.isJoined({userId:this.userId_,roomId:e.roomId,sdkAppId:this.sdkAppId_,client:this}))throw new yR({code:_R.INVALID_OPERATION,message:oO({key:HM,data:this.userId_})})}},publish:[{name:"stream",required:!0,instanceOf:nE,validate:function(e){if(!this.isJoined_)throw new yR({code:_R.INVALID_OPERATION,message:oO({key:rM})});if(this.mode_===xC&&this.role_===jC)throw new yR({code:_R.INVALID_OPERATION,message:oO({key:oM})});if(!e.getIsReadyToPublish())throw new yR({code:_R.INVALID_OPERATION,message:oO({key:aM})});if(this.notPublishWithoutH264Supported_)throw new yR({code:_R.NOT_SUPPORTED_H264,message:oO({key:pk})})}},{name:"options",type:GS,defaultValue:{isAuxiliary:!1},properties:{isAuxiliary:{type:jS,defaultValue:!1,validate:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e&&!bL())throw new yR({code:_R.NOT_SUPPORTED,message:oO({key:mk})});if(this.uplinkConnection_&&(e&&this.uplinkConnection_.isAuxStreamPublished||!e&&this.uplinkConnection_.isMainStreamPublished))throw new yR({code:_R.INVALID_OPERATION,message:oO({key:sM,data:e?BT:"local"})});var t=this.localScreenStream_||T(this.connections_.values()).findIndex((function(e){return e.getTrackState().auxiliary}))>=0;if(!this.enableMultiAuxStream_&&e&&t)throw new yR({code:_R.INVALID_OPERATION,message:oO({key:Lk})})}}}}],unpublish:{name:"stream",required:!0,instanceOf:nE,validate:function(e){if(e!==this.localStream_&&e!==this.localAuxStream_){if(this.localStream_||this.localAuxStream_)throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:iM})});this.log_.warn("Client currently has no published stream, please call publish() first.")}}},subscribe:[{name:"stream",required:!0,instanceOf:rE,validate:function(e){if(!e.getConnection())throw new yR({code:_R.INVALID_OPERATION,message:oO({key:cM})});if(this.notSubscribeWithoutH264Supported_)throw new yR({code:_R.NOT_SUPPORTED_H264,message:oO({key:fk})})}},{name:"options",type:GS,properties:{audio:{type:jS},video:{type:jS},smallVideo:{type:jS}},validate:function(e){var t=e.audio,n=e.video,r=e.smallVideo;if(!1===t&&!1===n&&(hO(r)||!1===r))throw new yR({code:_R.INVALID_OPERATION,message:oO({key:Sk})})}}],unsubscribe:{name:"stream",required:!0,instanceOf:rE,validate:function(e){if(!e.getConnection())throw new yR({code:_R.INVALID_OPERATION,message:oO({key:cM})})}},switchRole:{name:"role",required:!0,values:[PC,jC],validate:function(){if(this.mode_!==xC)throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:lM})});if(!this.isJoined_)throw new yR({code:_R.INVALID_OPERATION,message:oO({key:dM})})}},startPublishCDNStream:{name:"options",required:!1,properties:{streamId:{type:NS,validate:mz},streamType:{type:NS,values:["main","auxiliary"]},appId:{type:PS,allowEmpty:!1},bizId:{type:PS,allowEmpty:!1},url:{type:NS,allowEmpty:!1}},validate:function(){if(this.isDestroyed_)throw new yR({code:_R.INVALID_OPERATION,message:oO({key:zM,data:{funName:"startPublishCDNStream"}})})}},startMixTranscode:{name:"config",required:!0,type:GS,properties:{mode:{type:NS,values:["preset-layout","manual"]},streamId:{type:NS,validate:mz},videoWidth:{type:PS,notLessThanZero:!0},videoHeight:{type:PS,notLessThanZero:!0},videoBitrate:{type:PS,notLessThanZero:!0,allowEmpty:!1},videoFramerate:{type:PS,validate:function(e,t,n,r){if(e<=0||e>30)throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:$M,link:{className:r,fnName:n}})})}},videoGop:{type:PS,validate:function(e,t,n,r){if(e<1||e>8)throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:XM,link:{className:r,fnName:n}})})}},audioSampleRate:{type:PS,notLessThanZero:!0},audioBitrate:{type:PS,validate:function(e,t,n,r){if(e<32||e>192)throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:ZM,link:{className:r,fnName:n}})})}},audioChannels:{type:PS,values:[1,2]},backgroundColor:{type:PS},backgroundImage:{type:NS},mixUsers:{required:!0,type:US,arrayItem:{require:!0,type:GS,properties:{userId:{required:!0,type:NS},roomId:{type:[NS,PS],validate:vz},pureAudio:{type:jS},width:{type:PS,notLessThanZero:!0},height:{type:PS,notLessThanZero:!0},locationX:{type:PS,notLessThanZero:!0},locationY:{type:PS,notLessThanZero:!0},zOrder:{type:PS},streamType:{type:NS,values:["main","auxiliary"]},renderMode:{type:PS,values:[0,1,2,4]}}}}},validate:function(e,t,n,r,i){var o=0,a=0,s=e.mixUsers,c=[];if(s.forEach((function(e,t){if(c.push(e.userId),!e.pureAudio){if(!e.zOrder||e.zOrder<1||e>15)throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:QM,data:"config.mixUsers[".concat(t,"].zOrder"),link:{className:r,fnName:n}})});e.width+e.locationX>o&&(o=e.width+e.locationX),e.height+e.locationY>a&&(a=e.height+e.locationY)}})),c.indexOf(this.getUserId())<0)throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:ek,link:{className:r,fnName:n}})});if(e.videoWidth<o||e.videoHeight<a)throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:tk,link:{className:r,fnName:n}})})}},sendSEIMessage:[{name:"buffer",required:!0,instanceOf:ArrayBuffer,validate:function(e){if(!EL)throw new yR({code:_R.NOT_SUPPORTED,message:oO({key:Ek})});if(!this.enableSEI_)throw new yR({code:_R.INVALID_OPERATION,message:oO({key:Mk})});if(e.byteLength>1e3)throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:wk,data:e.byteLength})});if(0===e.byteLength)throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:kk})});if(!this.uplinkConnection_||!this.localStream_)throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:Ok})});if(!this.localStream_.hasVideo())throw new yR({code:_R.INVALID_OPERATION,message:oO({key:Dk})});var t=this.uplinkConnection_.isH264;if(!t)throw new yR({code:_R.NOT_SUPPORTED,message:oO({key:Ek,data:t})})}},{name:"options",type:GS,properties:{seiPayloadType:{type:PS,values:[5,243]}}}]},Tz={play:[{name:"elementId",required:!0,type:[NS,"HTMLDivElement"],validate:function(e,t,n){if(gO(e)){var r=document.getElementById(e);if(!r)throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:nk,data:{key:t,fnName:n}})});if(!(r instanceof HTMLDivElement))throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:rk,data:{key:t,fnName:n,type:IO(r)}})})}}},{name:"options",type:GS,properties:{objectFit:{type:NS,values:["contain","cover","fill"]},muted:{type:jS},mirror:{type:jS}}}],addTrack:{name:bC,instanceOf:MediaStreamTrack,validate:function(e){if(this.isAddingTrack_)throw new yR({code:_R.INVALID_OPERATION,message:oO({key:RM})});if(this.isRemovingTrack_)throw new yR({code:_R.INVALID_OPERATION,message:oO({key:xM})});if(this.publishState_===qS)throw new yR({code:_R.INVALID_OPERATION,message:oO({key:LM})});var t=this.getMediaStream();if(!t)throw new yR({code:_R.INVALID_OPERATION,message:oO({key:NM})});if(e.kind===jT&&t.getAudioTracks().length>0||e.kind===UT&&t.getVideoTracks().length>0)throw new yR({code:_R.INVALID_OPERATION,message:oO({key:PM})});if(!yL()&&!_L())throw new yR({code:_R.NOT_SUPPORTED,message:oO({key:hk,data:mC})})}},removeTrack:{name:bC,instanceOf:MediaStreamTrack,validate:function(e){if(this.isAddingTrack_)throw new yR({code:_R.INVALID_OPERATION,message:oO({key:UM})});if(this.isRemovingTrack_)throw new yR({code:_R.INVALID_OPERATION,message:oO({key:GM})});if(this.publishState_===qS)throw new yR({code:_R.INVALID_OPERATION,message:oO({key:VM})});var t=this.getMediaStream();if(!t)throw new yR({code:_R.INVALID_OPERATION,message:oO({key:NM})});if(-1===t.getTracks().indexOf(e))throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:FM})});if(!yL()){if(1===t.getTracks().length)throw new yR({code:_R.INVALID_OPERATION,message:oO({key:BM})});if(e.kind===jT)throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:jM})});if(!_L())throw new yR({code:_R.NOT_SUPPORTED,message:oO({key:hk,data:_C})})}}},replaceTrack:{name:bC,instanceOf:MediaStreamTrack,validate:function(e){var t=this.getMediaStream();if(!t)throw new yR({code:_R.INVALID_OPERATION,message:oO({key:AM})});if(this.publishState_===qS)throw new yR({code:_R.INVALID_OPERATION,message:oO({key:DM})});if(e.kind===jT&&t.getAudioTracks().length<=0||e.kind===UT&&t.getVideoTracks().length<=0)throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:qM,data:e})});if(!IL())throw new yR({code:_R.NOT_SUPPORTED,message:oO({key:hk,data:yC})})}}},Cz={TRTC:bz,CLIENT:Iz,LOCAL_STREAM:{switchDevice:[{name:"type",required:!0,type:NS,values:[jT,UT]},{name:"deviceId",required:!0,type:NS,validate:function(){if(this.screen_&&!this.audio_||this.audioSource_||this.videoSource_)throw new yR({code:_R.INVALID_OPERATION,message:oO({key:wM})});if(this.publishState_===qS)throw new yR({code:_R.INVALID_OPERATION,message:oO({key:OM})});if(!IL())throw new yR({code:_R.NOT_SUPPORTED,message:oO({key:gk})})}}],setAudioCaptureVolume:{name:"volume",type:PS}},STREAM:Tz};function Sz(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,r){var i=r.value;return r.value=function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return Mz.call(this,t,r,n,this.name_),i.apply(this,r)},r}}function Ez(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,i){var o=i.value;return i.value=a(r().mark((function e(){var i,a,s,c=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=c.length,a=new Array(i),s=0;s<i;s++)a[s]=c[s];return Mz.call(this,t,a,n,this.name_),e.abrupt("return",o.apply(this,a));case 3:case"end":return e.stop()}}),e,this)}))),i}}function Mz(e,t,n,r){try{for(var i=0;i<e.length;i++)kz.call(this,{rule:e[i],value:t[i],key:e[i].name,fnName:n,className:r})}catch(uY){throw PD.error(uY),uY}}function kz(e){var t=this,n=e.rule,r=e.value,i=e.key,o=e.fnName,a=e.className;if(hO(r)){if(n.required)throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:RE,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})});if(hO(n.defaultValue))return;r=n.defaultValue}if(Array.isArray(n.type)){if(!n.type.map((function(e){return e.toLowerCase()})).includes(IO(r)))throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:xE,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})})}else if(!hO(n.type)&&IO(r)!==n.type)throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:xE,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})});if(!1===n.allowEmpty){var s=vO(r)&&(0===r||Number.isNaN(r)),c=gO(r)&&""===r.trim();if(s||c)throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:LE,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})})}if(n.notLessThanZero&&vO(r)&&r<0)throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:JM,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})});if(gO(n.instanceOf)){if(!r||r.name_!==n.instanceOf)throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:NE,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})})}else if(fO(n.instanceOf)&&!(r instanceof n.instanceOf))throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:NE,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})});if(n.values&&!n.values.includes(r))throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:PE,data:{key:i,rule:n,fnName:o,value:r},link:{className:a,fnName:o}})});var u=n.properties;lO(u)&&_O(r)&&Object.keys(u).forEach((function(e){kz.call(t,{rule:u[e],value:r&&r[e],key:"".concat(i,".").concat(e),fnName:o,className:a})}));var l=n.arrayItem;lO(l)&&yO(r)&&r.forEach((function(e,n){kz.call(t,{rule:l,value:e,key:"".concat(i,"[").concat(n,"]"),fnName:o,className:a})})),fO(n.validate)&&n.validate.call(this,r,i,o,a,this)}Ei({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var wz=(_z=Ez.apply(void 0,T(Cz.STREAM.play)),yz=function(){function e(t){s(this,e),this.name_=iE,this.userId_=t.userId,this.isRemote_=t.isRemote,this.type_=t.type,this.log_=PD.createLogger({id:"s".concat(t.seq?t.seq:"","|").concat(this.userId_),userId:hO(t.client)?void 0:t.client.getUserId(),sdkAppId:hO(t.client)?void 0:t.client.getSDKAppId(),isLocal:!this.isRemote_,type:this.isRemote_?this.type_:""}),this.client_=null,hO(t.client)||(this.client_=t.client),this.mediaStream_=null,this.div_=null,this.isPlaying_=!1,this.connection_=null,this.audioPlayer_=null,this.videoPlayer_=null,this.muted_=!1,this.objectFit_="cover",this.mirror_=!1,this.id_="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),this.audioOutputDeviceId_=0,this.audioVolume_=1,this.emitter_=RO(new jO,this.name_),this.connectionState_=HC,this.installEvents(),hO(t.mirror)||this.log_.warn('TRTC.createStream "mirror" option was deprecated since v4.12.1，please use localStream.play to set up preview mirror. refer to '.concat(uE,"/en/LocalStream.html#play. TRTC.createStream 接口的 mirror 选项从 v4.12.1 开始被废弃，请使用 localStream.play 设置本地流预览镜像，参考文档：").concat(uE,"/zh-cn/LocalStream.html#play。"))}var t,i,o,c,l;return u(e,[{key:"installEvents",value:function(){UO.on(wD,this.restartPlayback,this)}},{key:"uninstallEvents",value:function(){UO.off(wD,this.restartPlayback,this)}},{key:"getType",value:function(){return this.type_}},{key:"getLogger",value:function(){return this.log_}},{key:"isSubscribed",get:function(){return this.type_===FC&&this.connection_.isMainStreamSubscribed||this.type_===BC&&this.connection_.isAuxStreamSubscribed}},{key:"isMainVideoSubscribed",get:function(){var e=this.getSubscribedState();return this.type_===FC&&e&&e.video}},{key:"isMainAudioSubscribed",get:function(){var e=this.getSubscribedState();return this.type_===FC&&e&&e.audio}},{key:"isAuxVideoSubscribed",get:function(){var e=this.getSubscribedState();return this.type_===BC&&e&&e.auxiliary}},{key:"isSmallVideoSubscribed",get:function(){var e=this.getSubscribedState();return this.type_===FC&&e&&e.smallVideo}},{key:"emitConnectionStateChanged",value:function(e){e.state!==this.connectionState_&&(e.state!==HC&&this.isRemote_&&!this.isSubscribed||(this.emitter_.emit(VL,e),this.connectionState_=e.state))}},{key:"setConnection",value:function(e){this.connection_!==e&&(e instanceof fz?(null!==this.connection_&&this.connection_.off(PL.CONNECTION_STATE_CHANGED,this.emitConnectionStateChanged,this),e.on(PL.CONNECTION_STATE_CHANGED,this.emitConnectionStateChanged,this)):null===e&&this.connection_.off(PL.CONNECTION_STATE_CHANGED,this.emitConnectionStateChanged,this),this.connection_=e)}},{key:"getConnection",value:function(){return this.connection_}},{key:"play",value:(l=a(r().mark((function e(t,n){var i,o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.log_.info("stream ".concat(this.isPlaying_?"update":"start to"," play with elementId: ").concat(t," and options: ").concat(JSON.stringify(n),".")),!this.isPlaying_){e.next=9;break}return n&&!hO(n.muted)&&(this.muted_=n.muted),n&&!hO(n.objectFit)&&(this.objectFit_=n.objectFit),this.isScreenShare()?this.mirror_=!1:n&&!hO(n.mirror)&&(this.mirror_=n.mirror),this.audioPlayer_&&this.audioPlayer_.setMuted(this.muted_),this.videoPlayer_&&(this.videoPlayer_.setObjectFit(this.objectFit_),this.videoPlayer_.setMirror(this.mirror_)),this.elementId_!==t&&(i=t,gO(t)&&(i=document.getElementById(t)),i.appendChild(this.div_),this.elementId_=t),e.abrupt("return");case 9:return this.isPlaying_=!0,(o=document.createElement("div")).setAttribute("id","player_".concat(this.id_)),o.setAttribute("style","width: 100%; height: 100%; position: relative; background-color: black; overflow: hidden;"),a=t,gO(t)&&(a=document.getElementById(t)),a.appendChild(o),this.elementId_=t,this.div_=o,this.isRemote_||(this.muted_=!0),n&&!hO(n.muted)&&(this.muted_=n.muted),this.isScreenShare()&&(this.objectFit_="contain"),n&&!hO(n.objectFit)&&(this.objectFit_=n.objectFit),this.isScreenShare()?this.mirror_=!1:(this.isRemote_||(this.mirror_=!0),n&&!hO(n.mirror)&&(this.mirror_=n.mirror)),UO.emit(yD,{stream:this}),e.next=26,Promise.all([this.playAudio(),this.playVideo()]);case 26:UO.emit(nD,{stream:this});case 27:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"playAudio",value:(c=a(r().mark((function e(){var t,i,o=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasAudio()&&(!this.isRemote_||this.isMainAudioSubscribed)){e.next=2;break}return e.abrupt("return");case 2:if(t=this.getAudioTrack(),this.audioPlayer_||!t){e.next=17;break}return this.log_.info("create AudioPlayer and play"),this.audioPlayer_=new kj({stream:this,track:t,gainedTrack:null===(i=this.gain_)||void 0===i?void 0:i.audioTrack,div:this.div_,muted:this.muted_,outputDeviceId:this.audioOutputDeviceId_,volume:this.audioVolume_}),this.audioPlayer_.on(qL,(function(e){var t={type:jT,state:e.state,reason:e.reason};UO.emit(rD,n({stream:o},t)),o.emitter_.emit(UL,t)})),e.prev=7,e.next=10,this.audioPlayer_.play();case 10:e.next=17;break;case 12:throw e.prev=12,e.t0=e.catch(7),this.client_&&this.client_.getEnableAutoPlayDialog()&&new Zj,this.emitter_.emit(BL,e.t0),e.t0;case 17:case"end":return e.stop()}}),e,this,[[7,12]])}))),function(){return c.apply(this,arguments)})},{key:"playVideo",value:(o=a(r().mark((function e(){var t,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasVideo()&&(!this.isRemote_||this.isMainVideoSubscribed||this.isAuxVideoSubscribed||this.isSmallVideoSubscribed)){e.next=2;break}return e.abrupt("return");case 2:if(t=this.getVideoTrack(),this.videoPlayer_||!t){e.next=18;break}return UO.emit(ID,{stream:this}),this.log_.info("create VideoPlayer and play"),this.videoPlayer_=new Qj({stream:this,track:t,div:this.div_,muted:this.muted_,objectFit:this.objectFit_,mirror:this.mirror_}),this.videoPlayer_.on(qL,(function(e){var t={type:UT,state:e.state,reason:e.reason};UO.emit(rD,n({stream:i},t)),i.emitter_.emit(UL,t)})),e.prev=8,e.next=11,this.videoPlayer_.play();case 11:e.next=18;break;case 13:throw e.prev=13,e.t0=e.catch(8),this.client_&&this.client_.getEnableAutoPlayDialog()&&new Zj,this.emitter_.emit(BL,e.t0),e.t0;case 18:case"end":return e.stop()}}),e,this,[[8,13]])}))),function(){return o.apply(this,arguments)})},{key:"stopAudio",value:function(){this.audioPlayer_&&(this.log_.info("stop AudioPlayer"),this.audioPlayer_.stop(),this.audioPlayer_=null)}},{key:"stopVideo",value:function(){this.videoPlayer_&&(this.log_.info("stop VideoPlayer"),this.videoPlayer_.stop(),this.videoPlayer_=null)}},{key:"restartPlayback",value:function(){this.audioPlayer_&&!this.audioPlayer_.isPlaying&&this.restartAudio(),this.videoPlayer_&&!this.videoPlayer_.isPlaying&&this.restartVideo()}},{key:"restartAudio",value:function(){this.isPlaying_&&(this.stopAudio(),this.playAudio().catch((function(e){})))}},{key:"restartVideo",value:function(){this.isPlaying_&&(this.stopVideo(),this.playVideo().catch((function(e){})))}},{key:"stop",value:function(){this.isPlaying_&&(this.isPlaying_=!1,this.stopAudio(),this.stopVideo(),this.div_.parentNode.removeChild(this.div_))}},{key:"resume",value:(i=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isPlaying_){e.next=2;break}return e.abrupt("return");case 2:if(this.log_.info("resume"),!this.audioPlayer_){e.next=6;break}return e.next=6,this.audioPlayer_.resume();case 6:if(!this.videoPlayer_){e.next=9;break}return e.next=9,this.videoPlayer_.resume();case 9:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"close",value:function(){this.log_.info("close stream"),this.isPlaying_&&this.stop(),this.isRemote_||(this.mediaStream_&&(this.mediaStream_.preventEvent=1,this.mediaStream_.getTracks().forEach((function(e){e.stop()})),this.mediaStream_=null),this.uninstallEvents())}},{key:"muteAudio",value:function(){return this.addRemoteEvent(!0,jT),this.doEnableTrack(jT,!1)}},{key:"muteVideo",value:function(){return this.addRemoteEvent(!0,UT),this.doEnableTrack(UT,!1)}},{key:"unmuteAudio",value:function(){return this.addRemoteEvent(!1,jT),this.doEnableTrack(jT,!0)}},{key:"unmuteVideo",value:function(){return this.addRemoteEvent(!1,UT),this.doEnableTrack(UT,!0)}},{key:"addRemoteEvent",value:function(e,t){if(this.isRemote_&&this.client_){var n=this.client_.getUserId(),r="".concat(e?WT:YT," remote ").concat(t);rx(n,{eventId:t===jT?e?PR:UR:e?NR:jR,eventDesc:r,timestamp:(new Date).getTime(),userId:n,tinyId:this.client_.getTinyId(),remoteUserId:this.userId_,remoteTinyId:this.connection_.getTinyId()})}}},{key:"doEnableTrack",value:function(e,t){var n=!1;return e===jT?this.mediaStream_.getAudioTracks().forEach((function(e){n=!0,e.enabled=t})):this.mediaStream_.getVideoTracks().forEach((function(e){n=!0,e.enabled=t})),n}},{key:"getId",value:function(){return this.id_}},{key:"getUserId",value:function(){return this.userId_}},{key:"getTinyId",value:function(){return this.connection_?this.connection_.getTinyId():""}},{key:"isPlaying",value:function(){return this.isPlaying_}},{key:"setAudioOutput",value:(t=a(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.audioOutputDeviceId_=t,!this.audioPlayer_){e.next=4;break}return e.next=4,this.audioPlayer_.setSinkId(t);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setAudioVolume",value:function(e){this.audioVolume_=e,this.log_.info("setAudioVolume to ".concat(e)),this.audioPlayer_&&this.audioPlayer_.setVolume(e)}},{key:"getAudioLevel",value:function(){var e=0;return this.audioPlayer_&&(e=this.audioPlayer_.getAudioLevel()),e}},{key:"getInternalAudioLevel",value:function(){var e=0;return this.audioPlayer_&&(e=this.audioPlayer_.getInternalAudioLevel()),e}},{key:"hasAudio",value:function(){if(this.isRemote_){if(!this.connection_)return!1;var e=this.connection_.getTrackState();return this.type_===FC&&e.audio}return!!this.getAudioTrack()}},{key:"hasVideo",value:function(){if(this.isRemote_){if(!this.connection_)return!1;var e=this.connection_.getTrackState();return this.type_===BC?e.auxiliary:e.video}return!!this.getVideoTrack()}},{key:"getSubscribedState",value:function(){return this.isRemote_&&this.connection_?this.connection_.getSubscribeState():null}},{key:"getAudioTrack",value:function(){var e=null;if(this.mediaStream_){var t=this.mediaStream_.getAudioTracks();t.length>0&&(e=t[0])}return e}},{key:"getVideoTrack",value:function(){var e=null;if(this.mediaStream_){var t=this.mediaStream_.getVideoTracks();t.length>0&&(e=t[0])}return e}},{key:"getVideoFrame",value:function(){return this.videoPlayer_?this.videoPlayer_.getVideoFrame():null}},{key:"getMediaStream",value:function(){return this.mediaStream_}},{key:"setMediaStream",value:function(e){e!==this.mediaStream_&&(this.mediaStream_&&this.mediaStream_.getTracks().forEach((function(e){return e.stop()})),this.mediaStream_=e)}},{key:"updateVideoPlayingState",value:function(e){this.isPlaying_&&(e?(this.log_.info("playing state updated, play video"),this.playVideo().catch((function(e){}))):(this.log_.info("playing state updated, stop video"),this.stopVideo()))}},{key:"updateAudioPlayingState",value:function(e){this.isPlaying_&&(e?(this.log_.info("playing state updated, play audio"),this.playAudio().catch((function(e){}))):(this.log_.info("playing state updated, stop audio"),this.stopAudio()))}},{key:"on",value:function(e,t,n){this.emitter_.on(e,t,n)}},{key:"off",value:function(e,t,n){"*"===e?this.emitter_.removeAllListeners():this.emitter_.off(e,t,n)}},{key:"isRemote",value:function(){return this.isRemote_}},{key:"isScreenShare",value:function(){return!this.isRemote_&&this.screen_||this.isRemote_&&this.getType()===BT}},{key:"getDiv",value:function(){return this.div_}},{key:"getObjectFit",value:function(){return this.objectFit_}},{key:"getMuted",value:function(){return this.muted_}},{key:"getClient",value:function(){return this.client_}}]),e}(),M(yz.prototype,"play",[_z],Object.getOwnPropertyDescriptor(yz.prototype,"play"),yz.prototype),yz),Oz=function(e){d(r,e);var t=_(r);function r(e){var i;s(this,r);var o={isRemote:!0,type:e.type},a=n(n({},e),o);return(i=t.call(this,a)).name_=rE,i.isStreamAddedEventEmitted_=!1,i.isAbleToCallSubscription_=!0,i}return u(r,[{key:"installEvents",value:function(){b(p(r.prototype),"installEvents",this).call(this),UO.on(uD,this.handleStreamSubscribed,this),UO.on(lD,this.handleStreamUnsubscribed,this)}},{key:"uninstallEvents",value:function(){b(p(r.prototype),"uninstallEvents",this).call(this),UO.off(uD,this.handleStreamSubscribed,this),UO.off(lD,this.handleStreamUnsubscribed,this)}},{key:"handleStreamSubscribed",value:function(e){e.client===this.client_&&e.stream===this&&this.connection_.getCurrentState()===WC&&this.emitConnectionStateChanged({prevState:HC,state:WC})}},{key:"handleStreamUnsubscribed",value:function(e){e.client===this.client_&&e.stream===this&&this.emitConnectionStateChanged({prevState:WC,state:HC})}},{key:"getType",value:function(){return b(p(r.prototype),"getType",this).call(this)}},{key:"getIsAbleToCallSubscription",value:function(){return this.isAbleToCallSubscription_}},{key:"setIsAbleToCallSubscription",value:function(e){this.isAbleToCallSubscription_=e}},{key:"setIsStreamAddedEventEmitted",value:function(e){this.isStreamAddedEventEmitted_=e}},{key:"getIsStreamAddedEventEmitted",value:function(){return this.isStreamAddedEventEmitted_}},{key:"getAudioTrack",value:function(){return this.connection_&&this.connection_.getTrackState().audio?b(p(r.prototype),"getAudioTrack",this).call(this):null}},{key:"getVideoTrack",value:function(){if(!this.connection_)return null;var e=this.connection_.getTrackState();return this.type_===FC&&!e.video||this.type_===BC&&!e.auxiliary?null:b(p(r.prototype),"getVideoTrack",this).call(this)}},{key:"close",value:function(){b(p(r.prototype),"close",this).call(this)}}]),r}(wz),Dz=function(){function e(t){s(this,e),this.client_=t.client,this.subscribedStreams_=new Map,this.unsubscribedStreams_=new Map,this.subscriptedOptions_=new Map,this.autoRecoveryFlags_=new Map}var t,n,i;return u(e,[{key:"isEnabled",get:function(){return"webrtc"!==this.client_.getEnv()}},{key:"recover",value:(i=a(r().mark((function e(t){var n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getUserId(),i=t.getType(),this.hasAutoRecoveryFlag(n,i)){e.next=5;break}return e.abrupt("return");case 5:if(o=this.getUnsubscribedStream(n,i)?"unsubscribe":"subscribe",e.prev=6,PD.warn("recover() try to recover subscription [".concat(o,"][").concat(n,"][").concat(i,"]")),"subscribe"!==o){e.next=13;break}return e.next=11,this.recoverSubscription(n,t);case 11:e.next=15;break;case 13:return e.next=15,this.recoverUnsubscription(n,t);case 15:cx.logSuccessEvent({userId:this.client_.getUserId(),eventType:CS}),PD.warn("recover() recover successfully [".concat(o,"][").concat(n,"][").concat(i,"]")),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),PD.error("recover() recover failed [".concat(o,"][").concat(n,"][").concat(i,"]"),e.t0),cx.logFailedEvent({userId:this.client_.getUserId(),eventType:CS,error:e.t0});case 23:this.deleteAutoRecoveryFlag(n,i);case 24:case"end":return e.stop()}}),e,this,[[6,19]])}))),function(e){return i.apply(this,arguments)})},{key:"recoverSubscription",value:(n=a(r().mark((function e(t,n){var i,o,a,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.getOptions(t,n.getType()),o=this.getSubscribedStream(t,n.getType()),i&&o){e.next=4;break}return e.abrupt("return");case 4:a=this.getStreamMuteState(o),s=a.isAudioMuted,c=a.isVideoMuted,this.mergeStream(o,n),this.recoverPlayingState(o),s&&o.doEnableTrack(jT,!1),c&&o.doEnableTrack(UT,!1);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"recoverUnsubscription",value:(t=a(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.getUnsubscribedStream(t,n.getType())){e.next=3;break}return e.abrupt("return");case 3:this.mergeStream(i,n);case 4:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"getStreamMuteState",value:function(e){var t={isAudioMuted:!1,isVideoMuted:!1},n=e.getMediaStream();return n&&(t.isAudioMuted=n.getAudioTracks().map((function(e){return e.enabled})).includes(!1),t.isVideoMuted=n.getVideoTracks().map((function(e){return e.enabled})).includes(!1)),t}},{key:"recoverPlayingState",value:function(e){var t=e.isPlaying(),n=e.getDiv();if(t&&n){var r=n.parentNode;e.stop(),e.play(r,{objectFit:e.getObjectFit(),muted:e.getMuted()})}}},{key:"mergeStream",value:function(e,t){var n=t.getConnection(),r=t.getMediaStream();e.setConnection(n),n.setRemoteStream(r.id,e),e.setMediaStream(r),e.updateAudioPlayingState(t.hasAudio()),e.updateVideoPlayingState(t.hasVideo())}},{key:"addSubscriptionRecord",value:function(e,t,n){var r=t.getType();if(this.subscribedStreams_.has(e))this.subscribedStreams_.get(e).set(r,t);else{var i=new Map;i.set(t.getType(),t),this.subscribedStreams_.set(e,i)}if(this.subscriptedOptions_.has(e))this.subscriptedOptions_.get(e).set(r,n);else{var o=new Map;o.set(t.getType(),n),this.subscriptedOptions_.set(e,o)}this.deleteUnsubscriptionRecord(e,r)}},{key:"addUnsubscriptionRecord",value:function(e,t){if(this.unsubscribedStreams_.has(e))this.unsubscribedStreams_.get(e).set(t.getType(),t);else{var n=new Map;n.set(t.getType(),t),this.unsubscribedStreams_.set(e,n)}this.deleteSubscriptionRecord(e,t.getType())}},{key:"getSubscribedStream",value:function(e,t){return this.subscribedStreams_.has(e)&&this.subscribedStreams_.get(e).has(t)?this.subscribedStreams_.get(e).get(t):null}},{key:"getOptions",value:function(e,t){return this.subscriptedOptions_.has(e)&&this.subscriptedOptions_.get(e).has(t)?this.subscriptedOptions_.get(e).get(t):null}},{key:"getUnsubscribedStream",value:function(e,t){return this.unsubscribedStreams_.has(e)&&this.unsubscribedStreams_.get(e).has(t)?this.unsubscribedStreams_.get(e).get(t):null}},{key:"deleteSubscriptionRecord",value:function(e,t){this.subscribedStreams_.has(e)&&this.subscribedStreams_.get(e).delete(t),this.subscriptedOptions_.has(e)&&this.subscriptedOptions_.get(e).delete(t)}},{key:"deleteUnsubscriptionRecord",value:function(e,t){this.unsubscribedStreams_.has(e)&&this.unsubscribedStreams_.get(e).delete(t)}},{key:"markAllStream",value:function(){for(var e=0,t=T(this.subscribedStreams_.entries());e<t.length;e++)for(var n=I(t[e],2),r=n[0],i=0,o=T(n[1].entries());i<o.length;i++){var a=I(o[i],1)[0];this.setAutoRecoveryFlag(r,a)}for(var s=0,c=T(this.unsubscribedStreams_.entries());s<c.length;s++)for(var u=I(c[s],2),l=u[0],d=0,p=T(u[1].entries());d<p.length;d++){var f=I(p[d],1)[0];this.setAutoRecoveryFlag(l,f)}}},{key:"setAutoRecoveryFlag",value:function(e,t){if(PD.info("setAutoRecoveryFlag() mark [".concat(e,"][").concat(t,"]")),this.autoRecoveryFlags_.has(e))this.autoRecoveryFlags_.get(e).set(t);else{var n=new Map;n.set(t),this.autoRecoveryFlags_.set(e,n)}}},{key:"hasAutoRecoveryFlag",value:function(e,t){return!!this.isEnabled&&this.autoRecoveryFlags_.has(e)&&this.autoRecoveryFlags_.get(e).has(t)}},{key:"deleteAutoRecoveryFlag",value:function(e,t){this.autoRecoveryFlags_.has(e)&&this.autoRecoveryFlags_.get(e).delete(t)}},{key:"delete",value:function(e){this.unsubscribedStreams_.delete(e),this.subscribedStreams_.delete(e),this.subscriptedOptions_.delete(e),this.autoRecoveryFlags_.delete(e)}}]),e}(),Az=function(){function e(t){s(this,e),this.player_=t,this.canvas_=document.createElement(PT),this.canvasCtx_=this.canvas_.getContext("2d")}return u(e,[{key:"setCanvasRect",value:function(e,t){this.canvas_.width=e,this.canvas_.height=t}},{key:"drawVideoToCanvas",value:function(){var e=this.player_.getElement(),t=e.videoHeight,n=e.videoWidth,r=n*this.canvas_.height/(t*this.canvas_.width);if(r>1.05||r<.95){var i=n*t/(this.canvas_.width*this.canvas_.height);this.setCanvasRect(n/Math.sqrt(i),t/Math.sqrt(i))}this.canvasCtx_.drawImage(e,0,0,this.canvas_.width,this.canvas_.height)}},{key:"generateVideoTrackFromCanvasCapture",value:function(e){return this.canvas_.captureStream(e).getVideoTracks()[0]}},{key:"generateStreamFromTrack",value:function(e){var t=new MediaStream;return t.addTrack(e),t}},{key:"destroy",value:function(){this.player_.stop(),this.canvas_.width=0,this.canvas_.height=0,this.canvas_=null,this.canvasCtx_=null}},{key:"canvas",get:function(){return this.canvas_}},{key:"canvasCtx",get:function(){return this.canvasCtx_}},{key:"canDrawVideoToCanvas",get:function(){if(this.player_){var e=this.player_.getElement();if(e)return e.readyState===e.HAVE_ENOUGH_DATA}return!1}}]),e}(),Rz=new Blob(['let t,e,a,i;onmessage=function(n){const{action:h,data:s}=n.data;switch(h){case"render":a=s.canvas,t=a.width,e=a.height,i=a.getContext("2d"),function(t,e){const n=new TransformStream({async transform(t,e){const n=t.displayWidth,h=t.displayHeight,s=n*a.height/(h*a.width);if(s>1.05||s<.95){const t=n*h/(a.width*a.height);a.width=n/Math.sqrt(t),a.height=h/Math.sqrt(t)}i.drawImage(t,0,0,a.width,a.height);const o=new VideoFrame(a,{timestamp:t.timestamp});t.close(),e.enqueue(o)}});t.pipeThrough(n).pipeTo(e)}(s.readable,s.writable)}}'],{type:"application/javascript"}),xz=function(){function e(t){s(this,e);var n=t.videoTrack;this.width=void 0,this.height=void 0,this.canvas=document.createElement("canvas"),this.offscreen=null,this.smallGenerator=new MediaStreamTrackGenerator({kind:"video"}),this.smallWritable=this.smallGenerator.writable,this.bigProcessor=new MediaStreamTrackProcessor({track:n}),this.bigReadable=this.bigProcessor.readable,this.initWorker()}return u(e,[{key:"initWorker",value:function(){try{this.worker=new Worker(URL.createObjectURL(Rz)),PD.info("init worker processor success")}catch(e){PD.warn("init worker processor failed. ".concat(e.error))}}},{key:"setCanvasRect",value:function(e,t){this.width=e,this.height=t,this.canvas.width=e,this.canvas.height=t,this.offscreen=this.canvas.transferControlToOffscreen(),this.worker.postMessage({action:"render",data:{canvas:this.offscreen,readable:this.bigReadable,writable:this.smallWritable}},[this.offscreen,this.bigReadable,this.smallWritable])}},{key:"generatorVideoTrack",value:function(){var e=new MediaStream([this.smallGenerator]);return null==e?void 0:e.getTracks()[0]}},{key:"destroy",value:function(){this.worker.terminate()}}]),e}(),Lz=function(){function e(t){s(this,e),this.localStream_=t,this.player_=null,this.processor_=null,this.initOffscreenSuccess_=!1}var t;return u(e,[{key:"initialize",value:(t=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(NL()&&(null===(t=navigator)||void 0===t?void 0:t.hardwareConcurrency)>=6)){e.next=13;break}return e.prev=1,e.next=4,this.initOffscreen();case 4:this.initOffscreenSuccess_=!0,PD.info("Initialize VideoGenerator successfully!"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.initCanvas();case 11:e.next=14;break;case 13:this.initCanvas();case 14:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return t.apply(this,arguments)})},{key:"generateSmallVideoTrack",value:function(e){var t,n=e.height,r=e.width,i=e.frameRate,o=this.getSmallVideoProfile(r,n);return this.initOffscreenSuccess_?(this.processor_.setCanvasRect(o.width,o.height),t=this.processor_.generatorVideoTrack()):(this.processor_.setCanvasRect(o.width,o.height),this.player_.setRect({width:o.width,height:o.height}),t=this.processor_.generateVideoTrackFromCanvasCapture(i),this.interval_=eL.run(yE,this.render.bind(this),{fps:i})),t}},{key:"render",value:function(){this.processor_.canDrawVideoToCanvas&&this.processor_.drawVideoToCanvas()}},{key:"destroy",value:function(){eL.clearTask(this.interval_),this.processor_&&this.processor_.destroy()}},{key:"initOffscreen",value:function(){this.processor_=new xz({videoTrack:this.localStream_.getVideoTrack()})}},{key:"initCanvas",value:function(){this.player_=new Qj({stream:this.localStream_,track:this.localStream_.getVideoTrack(),muted:!0,objectFit:"cover",mirror:!1}),this.player_.play().then((function(){PD.info("VideoGenerator: play local video success")})).catch((function(){PD.error("VideoGenerator: Failed to play local video")})),this.processor_=new Az(this.player_)}},{key:"getSmallVideoProfile",value:function(e,t){var n,r=this.localStream_.getVideoTrack(),i=this.localStream_.getVideoProfile();if(xL){var o=r.getSettings();o&&o.width&&o.height&&(i.width=o.width,i.height=o.height)}var a=i.width*i.height,s=e*t;return PD.info("big stream resolution: ".concat(i.width,"*").concat(i.height," small stream resolution: ").concat(e,"*").concat(t," ")),n=a>s?a/s:a/19200,{width:parseInt(i.width/Math.sqrt(n)),height:parseInt(i.height/Math.sqrt(n))}}}]),e}();function Nz(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{retries:5,timeout:2e3};return function(t,n,r){var i=AD({retryFunction:r.value,settings:e,onError:e.onError,onRetrying:e.onRetrying,onRetryFailed:e.onRetryFailed});return r.value=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.apply(this,t)},r}}var Pz=new Map,jz=function(){var e=a(r().mark((function e(t){var n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!CL()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Gz(t);case 4:if(n=e.sent,PD.info("getUserMedia with constraints: "+JSON.stringify(n)),!n.audio){e.next=11;break}return e.next=9,cY.getMicrophones();case 9:i=e.sent,PD.info("microphones: ".concat(JSON.stringify(i)));case 11:if(!n.video){e.next=16;break}return e.next=14,cY.getCameras();case 14:o=e.sent,PD.info("cameras: ".concat(JSON.stringify(o)));case 16:return e.prev=16,e.next=19,navigator.mediaDevices.getUserMedia(n);case 19:return e.abrupt("return",e.sent);case 22:if(e.prev=22,e.t0=e.catch(16),"NotFoundError"!==e.t0.name){e.next=29;break}if(!o||0!==o.length){e.next=27;break}throw new yR({code:_R.DEVICE_NOT_FOUND,message:oO({key:yk})});case 27:if(!i||0!==i.length){e.next=29;break}throw new yR({code:_R.DEVICE_NOT_FOUND,message:oO({key:_k})});case 29:throw new yR({code:_R.INITIALIZE_FAILED,name:e.t0.name,message:e.t0.message,constraint:e.t0.constraint});case 30:case"end":return e.stop()}}),e,null,[[16,22]])})));return function(t){return e.apply(this,arguments)}}(),Uz=AD({retryFunction:jz,settings:{retries:3,timeout:500},onError:function(e,t,n,r){PD.warn("getUserMedia error: ".concat(e)),"NotReadableError"===e.name?t():e.message.includes("deviceId")&&r[0].retryWhenExactFailed?(r[0].useExact=!1,t()):n(e)},onRetrying:function(e){PD.warn("getUserMedia retrying [".concat(e,"/3]"))}});function Gz(e){return Vz.apply(this,arguments)}function Vz(){return(Vz=a(r().mark((function e(t){var i,o,a,s,c,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i={echoCancellation:t.echoCancellation,autoGainControl:t.autoGainControl,noiseSuppression:t.noiseSuppression},t.audio){e.next=5;break}i=!1,e.next=15;break;case 5:if(ax(t.microphoneId)){e.next=9;break}i=n({deviceId:t.useExact?{exact:t.microphoneId}:t.microphoneId,sampleRate:t.sampleRate,channelCount:t.channelCount},i),e.next=15;break;case 9:return i=n({sampleRate:t.sampleRate,channelCount:t.channelCount},i),e.next=12,cY.getMicrophones();case 12:o=e.sent,(a=o.filter((function(e){return e.deviceId.length>0}))).length>0&&(i.deviceId={exact:a[0].deviceId});case 15:return s={},c={ideal:t.width,max:t.width},u={ideal:t.height,max:t.height},Qk&&Ew&&t.width*t.height<101376&&(c=t.width,u=t.height),s=!hO(t.facingMode)&&t.video?{facingMode:t.facingMode,width:c,height:u,frameRate:t.frameRate}:!ax(t.cameraId)&&t.video?{deviceId:t.useExact?{exact:t.cameraId}:t.cameraId,width:c,height:u,frameRate:t.frameRate}:!!t.video&&(!!hO(t.width)||{width:c,height:u,frameRate:t.frameRate}),e.abrupt("return",{audio:i,video:s});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fz=function(){var e=a(r().mark((function e(t){var n,i,o,a,s,c,u,l,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!CL()){e.next=2;break}return e.abrupt("return");case 2:if(n=null,!(qw&&Hw<74||Kw)){e.next=27;break}return i=qz(t),PD.info("getDisplayMedia with constraints: "+JSON.stringify(i)),e.next=8,navigator.mediaDevices.getDisplayMedia(i);case 8:if(o=e.sent,!t.screenAudio){e.next=14;break}return PD.warn("Your browser not support capture system audio"),e.abrupt("return",o);case 14:if(!t.audio){e.next=24;break}return a=Bz(t),PD.info("getUserMedia with constraints: "+JSON.stringify(a)),e.next=19,navigator.mediaDevices.getUserMedia(a);case 19:return n=e.sent,o.addTrack(n.getAudioTracks()[0]),e.abrupt("return",o);case 24:return e.abrupt("return",o);case 25:e.next=53;break;case 27:if(!t.screenAudio){e.next=37;break}return t.audioConstraints={echoCancellation:!0,noiseSuppression:!0,sampleRate:44100},s=qz(t),PD.info("getDisplayMedia with constraints: "+JSON.stringify(s)),e.next=33,navigator.mediaDevices.getDisplayMedia(s);case 33:return c=e.sent,e.abrupt("return",c);case 37:return u=qz(t),PD.info("getDisplayMedia with constraints: "+JSON.stringify(u)),e.next=41,navigator.mediaDevices.getDisplayMedia(u);case 41:if(l=e.sent,!t.audio){e.next=52;break}return d=Bz(t),PD.info("getUserMedia with constraints: "+JSON.stringify(d)),e.next=47,navigator.mediaDevices.getUserMedia(d);case 47:return n=e.sent,l.addTrack(n.getAudioTracks()[0]),e.abrupt("return",l);case 52:return e.abrupt("return",l);case 53:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Bz(e){var t={echoCancellation:e.echoCancellation,autoGainControl:e.autoGainControl,noiseSuppression:e.noiseSuppression,sampleRate:e.sampleRate,channelCount:e.channelCount};return hO(e.microphoneId)||(t.deviceId=e.microphoneId),{audio:t,video:!1}}function qz(e){var t={systemAudio:"include",selfBrowserSurface:"include",surfaceSwitching:"include"},n={width:Kw?{max:e.width}:{ideal:e.width,max:e.width},height:Kw?{max:e.height}:{ideal:e.height,max:e.height},frameRate:e.frameRate,displaySurface:"monitor"};return t.video=n,hO(e.audioConstraints)||(t.audio=e.audioConstraints),t}var Hz,zz,Kz,Wz,Yz,Jz,$z,Xz,Zz,Qz=new Map([["120p",{width:160,height:120,frameRate:15,bitrate:200}],["120p_2",{width:160,height:120,frameRate:15,bitrate:100}],["180p",{width:320,height:180,frameRate:15,bitrate:350}],["180p_2",{width:320,height:180,frameRate:15,bitrate:150}],["240p",{width:320,height:240,frameRate:15,bitrate:400}],["240p_2",{width:320,height:240,frameRate:15,bitrate:200}],["360p",{width:640,height:360,frameRate:15,bitrate:800}],["360p_2",{width:640,height:360,frameRate:15,bitrate:400}],["480p",{width:640,height:480,frameRate:15,bitrate:900}],["480p_2",{width:640,height:480,frameRate:15,bitrate:500}],["720p",{width:1280,height:720,frameRate:15,bitrate:1500}],["1080p",{width:1920,height:1080,frameRate:15,bitrate:2e3}],["1440p",{width:2560,height:1440,frameRate:30,bitrate:4860}],["4K",{width:3840,height:2160,frameRate:30,bitrate:9e3}]]),eK=new Map([["480p",{width:640,height:480,frameRate:5,bitrate:900}],["480p_2",{width:640,height:480,frameRate:30,bitrate:1e3}],["720p",{width:1280,height:720,frameRate:5,bitrate:1200}],["720p_2",{width:1280,height:720,frameRate:30,bitrate:3e3}],["1080p",{width:1920,height:1080,frameRate:5,bitrate:1600}],["1080p_2",{width:1920,height:1080,frameRate:30,bitrate:4e3}]]),tK=new Map([["standard",{sampleRate:48e3,channelCount:1,bitrate:40}],["standard-stereo",{sampleRate:48e3,channelCount:2,bitrate:64}],["high",{sampleRate:48e3,channelCount:1,bitrate:128}],["high-stereo",{sampleRate:48e3,channelCount:2,bitrate:192}]]),nK=(Hz=Ez.apply(void 0,T(Cz.LOCAL_STREAM.switchDevice)),zz=Ez(Cz.STREAM.addTrack),Kz=Ez(Cz.STREAM.removeTrack),Wz=Ez(Cz.STREAM.replaceTrack),Yz=Nz({retries:10,timeout:3e3,onRetryFailed:function(e){cx.logFailedEvent({userId:this.client_?this.client_.getUserId():this.userId_,eventType:TS,error:e}),this.emitter_.emit(BL,new yR({code:_R.DEVICE_AUTO_RECOVER_FAILED,message:e.message}))}}),Jz=Sz(Cz.LOCAL_STREAM.setAudioCaptureVolume),$z=function(e){d(I,e);var t,o,c,l,f,h,g,v,m,y=_(I);function I(e){var t;s(this,I);var r=n(n({},e),{isRemote:!1,type:"local"});return(t=y.call(this,r)).name_=nE,t.client_=null,t.video_=e.video,t.audio_=e.audio,t.cameraId_=e.cameraId,t.cameraGroupId_="",t.facingMode_=e.facingMode,t.microphoneId_=e.microphoneId,t.microphoneGroupId_="",t.videoSource_=e.videoSource,t.audioSource_=e.audioSource,t.screen_=e.screen,t.screenAudio_=e.screenAudio,t.audioProfile_={echoCancellation:!!hO(e.echoCancellation)||e.echoCancellation,autoGainControl:!!hO(e.autoGainControl)||e.autoGainControl,noiseSuppression:!!hO(e.noiseSuppression)||e.noiseSuppression,sampleRate:48e3,channelCount:1,bitrate:40},t.videoProfile_=Qz.get("480p_2"),t.screenProfile_=eK.get("1080p"),t.videoSetting_=null,t.muteState_={video:!1,audio:!1,auxVideo:!1},t.beautyStatus_=!1,t.prevAudioRecoverTime_=0,t.prevVideoRecoverTime_=0,t.isAudioRecovering_=!1,t.isVideoRecovering_=!1,t.initState(),t.canvas_=null,t.canvasInterval_=null,t.canvasTrack_=null,t.gain_={audioTrack:null,source:null,gainNode:null},t.captureVolume_=100,t.enableAudoRecoverCapture_=!!hO(e.enableAudoRecoverCapture)||e.enableAudoRecoverCapture,t.log_.info("stream created: ".concat(t.id_," autoRecover: ").concat(t.enableAudoRecoverCapture_)),t}return u(I,[{key:"initState",value:function(){this.isAddingTrack_=!1,this.isRemovingTrack_=!1,this.setIsReadyToPublish(!1),this.setPublishState(BS)}},{key:"installEvents",value:function(){b(p(I.prototype),"installEvents",this).call(this),UO.on(TD,this.onVideoTrackStopped,this),UO.on(mD,this.onVideoTrackStopped,this),UO.on(SD,this.onAudioTrackStopped,this),UO.on(CD,this.onAudioTrackStopped,this)}},{key:"uninstallEvents",value:function(){b(p(I.prototype),"uninstallEvents",this).call(this),UO.off(TD,this.onVideoTrackStopped,this),UO.off(mD,this.onVideoTrackStopped,this),UO.off(SD,this.onAudioTrackStopped,this),UO.off(CD,this.onAudioTrackStopped,this)}},{key:"initialize",value:function(){var e=this;return new Promise((function(t,n){if(SL())n(new yR({code:_R.INVALID_OPERATION,message:oO({key:uk})}));else{if(hO(e.audio_)){var r=new MediaStream;return hO(e.audioSource_)||(r.addTrack(e.audioSource_),e.updateAudioPlayingState(!0)),hO(e.videoSource_)||(r.addTrack(e.videoSource_),e.updateVideoPlayingState(!0)),e.setMediaStream(r),cx.logSuccessEvent({userId:e.client_?e.client_.getUserId():e.userId_,eventType:yS,kind:"custom"}),e.setIsReadyToPublish(!0),t()}e.screen_?(e.log_.info("initialize stream audio: "+e.audio_+" screenAudio: "+e.screenAudio_+" screen: "+e.screen_),Fz({audio:e.audio_,screenAudio:e.screenAudio_,microphoneId:e.microphoneId_,width:e.screenProfile_.width,height:e.screenProfile_.height,frameRate:e.screenProfile_.frameRate,sampleRate:e.audioProfile_.sampleRate,channelCount:e.audioProfile_.channelCount,autoGainControl:e.audioProfile_.autoGainControl,noiseSuppression:e.audioProfile_.noiseSuppression,echoCancellation:e.audioProfile_.echoCancellation}).then((function(n){e.setMediaStream(n),e.updateAudioPlayingState(e.audio_||e.screenAudio_),e.updateVideoPlayingState(!0);var r=e.getVideoTrack();return e.listenForScreenSharingStopped(r),e.setVideoContentHint(nC),e.updateDeviceIdInUse(),e.setIsReadyToPublish(!0),e.log_.info(JSON.stringify(r.getSettings())),cx.logSuccessEvent({userId:e.client_?e.client_.getUserId():e.userId_,eventType:yS,kind:"getDisplayMedia"}),t()})).catch((function(t){cx.logFailedEvent({userId:e.client_?e.client_.getUserId():e.userId_,eventType:yS,kind:"getDisplayMedia",error:t}),e.log_.error("getDisplayMedia error observed "+t),n(t instanceof yR?t:new yR({code:_R.INITIALIZE_FAILED,name:t.name,message:t.message}))}))):(UO.emit(hD,{stream:e,audio:e.audio_,video:e.video_}),e.log_.info("initialize stream audio: "+e.audio_+" video: "+e.video_),Uz({audio:e.audio_,video:e.video_,facingMode:e.facingMode_,cameraId:e.cameraId_,microphoneId:e.microphoneId_,width:e.videoProfile_.width,height:e.videoProfile_.height,frameRate:e.videoProfile_.frameRate,sampleRate:e.audioProfile_.sampleRate,channelCount:e.audioProfile_.channelCount,autoGainControl:e.audioProfile_.autoGainControl,noiseSuppression:e.audioProfile_.noiseSuppression,echoCancellation:e.audioProfile_.echoCancellation,useExact:!0,retryWhenExactFailed:!0}).then((function(n){return UO.emit(gD,{stream:e,audio:e.audio_,video:e.video_}),e.setMediaStream(n),n.getTracks().forEach((function(t){t.kind===UT&&xL&&(e.videoSetting_=t.getSettings()),LL&&e.log_.info("".concat(t.kind," capabilities: ").concat(JSON.stringify(t.getCapabilities())))})),e.updateAudioPlayingState(e.audio_),e.updateVideoPlayingState(e.video_),e.updateDeviceIdInUse(),e.log_.info("gotStream hasAudio: "+e.hasAudio()+" hasVideo: "+e.hasVideo()),e.setIsReadyToPublish(!0),cx.logSuccessEvent({userId:e.client_?e.client_.getUserId():e.userId_,eventType:yS,kind:"getUserMedia"}),t()})).catch((function(t){UO.emit(vD,{stream:e,audio:e.audio_,video:e.video_,error:t}),cx.logFailedEvent({userId:e.client_?e.client_.getUserId():e.userId_,eventType:yS,kind:"getUserMedia",error:t}),e.log_.error("getUserMedia error observed "+t),n(t)})))}}))}},{key:"listenForScreenSharingStopped",value:function(e){var t=this;e.addEventListener("ended",(function(e){t.log_.info("screen sharing was stopped because the video track is ended"),t.emitter_.emit(GL)}))}},{key:"muteAudio",value:function(){var e=b(p(I.prototype),"muteAudio",this).call(this);return e&&(this.log_.info("localStream mute audio"),this.sendMutedFlag(jT,!0)),e}},{key:"muteVideo",value:function(){var e=b(p(I.prototype),"muteVideo",this).call(this);return e&&(this.log_.info("localStream mute video"),this.sendMutedFlag(UT,!0)),e}},{key:"unmuteAudio",value:function(){var e=b(p(I.prototype),"unmuteAudio",this).call(this);return e&&(this.log_.info("localStream unmute audio"),this.sendMutedFlag(jT,!1)),e}},{key:"unmuteVideo",value:function(){var e=b(p(I.prototype),"unmuteVideo",this).call(this);return e&&(this.log_.info("localStream unmute video"),this.sendMutedFlag(UT,!1)),e}},{key:"sendMutedFlag",value:function(e,t){this.setMuteState(e,t);var n=this.getConnection();if(n){n.sendMutedFlag(this.muteState_,this);var r=n.getUserId(),i=n.getTinyId(),o="".concat(t?WT:YT," local ").concat(e," track");rx(r,{eventId:e===jT?t?SR:MR:t?ER:kR,eventDesc:o,timestamp:rm(),userId:r,tinyId:i})}}},{key:"setMuteState",value:function(e,t){this.muteState_[e]=t,this.log_.info("set ".concat(e," muted state: [").concat(t?"mute":"unmute","]"))}},{key:"setAudioProfile",value:function(e){var t;"object"===i(e)?t=e:void 0===(t=tK.get(e))&&(t=tK.get("standard")),this.log_.info("setAudioProfile: "+JSON.stringify(t)),this.audioProfile_=n(n({},this.audioProfile_),t)}},{key:"setVideoProfile",value:(m=a(r().mark((function e(t){var i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.connection_||TL()){e.next=2;break}throw new yR({code:_R.NOT_SUPPORTED,message:oO({key:dk})});case 2:if(lO(t)?o=n(n({},this.videoProfile_),t):gO(t)&&(o=Qz.get(t),hO(o)&&(o=Qz.get("480p_2"))),null!==(i=this.client_)&&void 0!==i&&i.get2k4kFlag()&&!(1===this.client_.get2k4kFlag())&&!this.screen_&&o.height*o.width>=3686400&&(o.width=1920,o.height=1080,this.log_.warn(TE)),o&&o.width*o.height>921600&&Zw&&(o.width=1280,o.height=720,this.log_.warn("reset to 1280 * 720 on iOS 13~14")),this.log_.info("setVideoProfile "+JSON.stringify(o)),!(a=this.getVideoTrack())){e.next=10;break}return e.next=10,a.applyConstraints(o);case 10:if(s=this.videoProfile_.bitrate!==o.bitrate,this.videoProfile_=o,!s||!this.connection_){e.next=16;break}return e.next=15,this.connection_.setBandwidth({bandwidth:o.bitrate,type:UT,videoType:FT});case 15:this.connection_.sendMediaSettings(this);case 16:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"getVideoBitrate",value:function(){return this.screen_?this.screenProfile_.bitrate:this.videoProfile_.bitrate}},{key:"getAudioBitrate",value:function(){return this.audioProfile_.bitrate}},{key:"setScreenProfile",value:function(e){var t=e;gO(e)&&(t=eK.get(e)||eK.get("1080p")),this.log_.info("setScreenProfile "+JSON.stringify(e)),this.screenProfile_=t}},{key:"getVideoProfile",value:function(){return this.screen_?this.screenProfile_:this.videoProfile_}},{key:"getAudioProfile",value:function(){return this.audioProfile_}},{key:"setVideoContentHint",value:function(e){var t=this.getVideoTrack();t&&"contentHint"in t&&(this.log_.info("set video track contentHint to: "+e),t.contentHint=e,t.contentHint!==e&&this.log_.warn("Invalid video track contentHint: "+e))}},{key:"switchDevice",value:(v=a(r().mark((function e(t,n){var i,o,a,s,c,u,l,d,p,f,h,g,v,m,_,y,b,I;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mediaStream_&&this.cameraId_!==n&&this.facingMode_!==n){e.next=2;break}return e.abrupt("return");case 2:if(o=t===UT,!(i=t===jT)||n!==this.microphoneId_){e.next=11;break}if(n===pE){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,eN(this.microphoneGroupId_);case 9:if(!e.sent){e.next=11;break}return e.abrupt("return");case 11:return this.setIsReadyToPublish(!1),this.log_.info("switchDevice "+t+" to: "+n),i&&(a=this.getAudioTrack(),s=this.getMicrophoneTrackMixed(),a&&a.stop(),s&&s.stop()),o&&((c=this.getVideoTrack())&&c.stop(),xw&&(u=this.getAudioTrack())&&(this.log_.info("stop audio track first in huawei env"),u.stop())),e.prev=15,e.next=18,Uz({audio:i||xw,video:o,facingMode:n===zT||n===KT?n:void 0,cameraId:o?n:this.cameraId_,microphoneId:i?n:this.microphoneId_,width:this.videoProfile_.width,height:this.videoProfile_.height,frameRate:this.videoProfile_.frameRate,sampleRate:this.audioProfile_.sampleRate,channelCount:this.audioProfile_.channelCount,useExact:!0,retryWhenExactFailed:!1});case 18:if(l=e.sent,d=null,!i){e.next=25;break}(p=l.getAudioTracks()[0])&&this.isAudioTrackMixed()?(f=this.getAudioTrack(),h=cY.AudioMixerPlugin.getAudioTrackMap(),g=cY.AudioMixerPlugin.mix({targetTrack:p,sourceList:h.get(f.id).sourceList,trackList:h.get(f.id).trackList}),d=g):d=p,e.next=34;break;case 25:if(!(d=l.getVideoTracks()[0])||!this.isVideoTrackBeautified()){e.next=30;break}return e.next=29,this.generateBeautyTrack(d);case 29:d=e.sent;case 30:if(!(v=l.getAudioTracks()[0])||!xw){e.next=34;break}return e.next=34,this.replaceTrack(v);case 34:return e.next=36,this.replaceTrack(d);case 36:this.updateDeviceIdInUse(),(m=this.getConnection())&&(_=m.getUserId(),y=m.getTinyId(),b=AR,I="switch camera",i&&(b=RR,I="switch microphone"),rx(_,{eventId:b,eventDesc:I,timestamp:rm(),userId:_,tinyId:y})),this.log_.info("switch ".concat(i?"microphone":"camera"," success ")),i&&(this.audio_=!0),o&&(this.video_=!0,n!==KT&&n!==zT||(this.facingMode_=n)),this.setIsReadyToPublish(!0),e.next=50;break;case 45:throw e.prev=45,e.t0=e.catch(15),this.log_.error(e.t0),i?this.recoverCapture({audio:!0,video:!1,microphoneId:this.microphoneId_}):this.recoverCapture({audio:!1,video:!0,cameraId:this.cameraId_,facingMode:this.facingMode_}),e.t0;case 50:case"end":return e.stop()}}),e,this,[[15,45]])}))),function(e,t){return v.apply(this,arguments)})},{key:"addTrack",value:(g=a(r().mark((function e(t){var n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.kind===UT&&xL&&(n=t.getSettings(),!this.videoSetting_||n.width===this.videoSetting_.width&&n.height===this.videoSetting_.height||this.log_.warn("video resolution of the track (".concat(n.width," x ").concat(n.height,") shall be kept the same as the previous: ").concat(this.videoSetting_.width," x ").concat(this.videoSetting_.height,". It may cause abnormal Cloud Recording."))),this.isAddingTrack_=!0,this.keepMuteState(t),this.mediaStream_.addTrack(t),!(i=this.getConnection())){e.next=11;break}return o=null,t.kind===UT&&(Xw||$w)&&bO(t)&&(o=this.getCanvasTrack()),e.next=11,i.addTrack(o||t,this);case 11:t.kind===jT?(this.audio_=!0,this.updateAudioPlayingState(!0),100!==this.captureVolume_&&this.setAudioCaptureVolume(this.captureVolume_)):(this.video_=!0,this.updateVideoPlayingState(!0)),this.isAddingTrack_=!1,e.next=20;break;case 15:throw e.prev=15,e.t0=e.catch(0),this.mediaStream_.removeTrack(t),this.isAddingTrack_=!1,e.t0;case 20:case"end":return e.stop()}}),e,this,[[0,15]])}))),function(e){return g.apply(this,arguments)})},{key:"removeTrack",value:(h=a(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.isRemovingTrack_=!0,!(n=this.getConnection())){e.next=17;break}if(t.kind!==UT||!Xw&&!$w||!this.canvasTrack_){e.next=10;break}return e.next=7,n.removeTrack(this.canvasTrack_,this);case 7:this.clearCanvas(),e.next=17;break;case 10:if(t.kind!==jT||!this.gain_.audioTrack){e.next=15;break}return e.next=13,n.removeTrack(this.gain_.audioTrack,this);case 13:e.next=17;break;case 15:return e.next=17,n.removeTrack(t,this);case 17:this.mediaStream_.removeTrack(t),t.kind===jT?(this.audio_=!1,this.updateAudioPlayingState(!1),this.stopGainNode()):(this.video_=!1,this.updateVideoPlayingState(!1)),this.isRemovingTrack_=!1,e.next=26;break;case 22:throw e.prev=22,e.t0=e.catch(0),this.isRemovingTrack_=!1,e.t0;case 26:case"end":return e.stop()}}),e,this,[[0,22]])}))),function(e){return h.apply(this,arguments)})},{key:"replaceTrack",value:(f=a(r().mark((function e(t){var n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.kind===UT&&xL&&(n=t.getSettings(),!this.videoSetting_||n.width===this.videoSetting_.width&&n.height===this.videoSetting_.height||this.log_.warn("video resolution of the track (".concat(n.width," x ").concat(n.height,") shall be kept the same as the previous: ").concat(this.videoSetting_.width," x ").concat(this.videoSetting_.height,". It may cause abnormal Cloud Recording."))),this.keepMuteState(t),i=this.mediaStream_,t.kind!==jT){e.next=12;break}if(i.removeTrack(i.getAudioTracks()[0]),i.addTrack(t),b(p(I.prototype),"restartAudio",this).call(this),!this.gain_.gainNode){e.next=10;break}return this.reconnectGainNode(t),e.abrupt("return");case 10:e.next=15;break;case 12:i.removeTrack(i.getVideoTracks()[0]),i.addTrack(t),b(p(I.prototype),"restartVideo",this).call(this);case 15:if(!(o=this.getConnection())){e.next=21;break}if(t.kind!==UT||!Xw&&!$w||!this.canvasTrack_){e.next=19;break}return e.abrupt("return");case 19:return e.next=21,o.replaceTrack(t,this);case 21:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"recoverCapture",value:(l=a(r().mark((function e(t){var n,i,o,a,s,c,u,l,d,p,f,h,g,v,m,_,y;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!this.mediaStream_||!this.enableAudoRecoverCapture_||t.audio&&!t.video&&this.isAudioRecovering_||t.video&&!t.audio&&this.isVideoRecovering_)){e.next=2;break}return e.abrupt("return");case 2:return t.audio&&(this.isAudioRecovering_=!0),t.video&&(this.isVideoRecovering_=!0),this.log_.warn("recoverCapture() trying "+JSON.stringify(t)),n=this.audio_&&t.audio,i=this.video_&&t.video,e.prev=7,e.next=10,cY.getCameras();case 10:return o=e.sent,e.next=13,cY.getMicrophones();case 13:if(a=e.sent,i&&0===o.length&&(i=!1,this.log_.warn("recoverCapture() video flag is true, but no camera detected, set video to false")),n&&0===a.length&&(n=!1,this.log_.warn("recoverCapture() audio flag is true, but no microphone detected, set audio to false")),n||i){e.next=19;break}return this.log_.warn("recoverCapture() both audio and video are false, aborted"),e.abrupt("return");case 19:return s=t&&o.findIndex((function(e){return e.deviceId===t.cameraId}))>=0,c=t&&a.findIndex((function(e){return e.deviceId===t.microphoneId}))>=0,n&&(null===(u=this.getAudioTrack())||void 0===u||u.stop()),i&&(null===(l=this.getVideoTrack())||void 0===l||l.stop()),e.next=25,Uz({audio:n,video:i,cameraId:s?t.cameraId:void 0,microphoneId:c?t.microphoneId:void 0,facingMode:this.facingMode_,width:this.videoProfile_.width,height:this.videoProfile_.height,frameRate:this.videoProfile_.frameRate,sampleRate:this.audioProfile_.sampleRate,channelCount:this.audioProfile_.channelCount});case 25:d=e.sent,p=d.getTracks(),f=0;case 28:if(!(f<p.length)){e.next=55;break}if((h=p[f]).kind!==jT||!this.isAudioTrackMixed()){e.next=41;break}if(g=this.getAudioTrack(),v=cY.AudioMixerPlugin.getAudioTrackMap(),(m=v.get(g.id)).hasMicrophone){e.next=37;break}return h.stop(),e.abrupt("continue",52);case 37:return _=cY.AudioMixerPlugin.mix({targetTrack:h,sourceList:m.sourceList,trackList:m.trackList}),e.next=40,this.replaceTrack(_);case 40:return e.abrupt("continue",52);case 41:if(h.kind!==UT||!this.isVideoTrackBeautified()){e.next=48;break}return e.next=44,this.generateBeautyTrack(h);case 44:return y=e.sent,e.next=47,this.replaceTrack(y);case 47:return e.abrupt("continue",52);case 48:return e.next=50,this.replaceTrack(h);case 50:if("ended"!==h.readyState){e.next=52;break}throw new Error("new track is failed, muted ".concat(h.muted," readyState ").concat(h.readyState));case 52:f++,e.next=28;break;case 55:this.updateDeviceIdInUse(),cx.logSuccessEvent({userId:this.client_?this.client_.getUserId():this.userId_,eventType:TS}),t.audio&&(this.isAudioRecovering_=!1),t.video&&(this.isVideoRecovering_=!1),this.log_.warn("recoverCapture() successfully"),this.emitter_.emit(FL,{isCamera:t.video,isMicrophone:t.audio,cameraId:this.cameraId_,microphoneId:this.microphoneId_}),e.next=69;break;case 63:throw e.prev=63,e.t0=e.catch(7),t.audio&&(this.isAudioRecovering_=!1),t.video&&(this.isVideoRecovering_=!1),this.log_.warn("recoverCapture() failed, "+e.t0),e.t0;case 69:case"end":return e.stop()}}),e,this,[[7,63]])}))),function(e){return l.apply(this,arguments)})},{key:"updateDeviceIdInUse",value:function(){var e=this;if(!this.mediaStream_)return this.cameraId_="",this.cameraGroupId_="",this.microphoneId_="",void(this.microphoneGroupId_="");xL&&this.mediaStream_.getTracks().forEach((function(t){if(t.kind===jT&&e.isAudioTrackMixed()){var n=e.getMicrophoneTrackMixed();if(n){var r=n.getSettings(),i=r.deviceId,o=r.groupId;i&&(e.microphoneId_=i,e.microphoneGroupId_=o)}}else if(t.kind===UT&&e.isVideoTrackBeautified()){var a=e.getBeautyOriginTrack();if(a){var s=a.getSettings(),c=s.deviceId,u=s.groupId;c&&(e.cameraId_=c,e.cameraGroupId_=u)}}else{var l=t.getSettings(),d=l.deviceId,p=l.groupId;d&&(t.kind===jT?(e.microphoneId_=d,e.microphoneGroupId_=p):t.kind!==UT||e.screen_||(e.cameraId_=d,e.cameraGroupId_=p))}}));var t=this.mediaStream_.getAudioTracks(),n=this.mediaStream_.getVideoTracks();t&&0===t.length&&(this.microphoneId_="",this.microphoneGroupId_=""),n&&0===n.length&&(this.cameraId_="",this.cameraGroupId_="")}},{key:"isAudioTrackMixed",value:function(){if(cY.AudioMixerPlugin){var e=cY.AudioMixerPlugin.getAudioTrackMap(),t=this.getAudioTrack();if(e&&t&&e.has(t.id))return!0}return!1}},{key:"getMicrophoneTrackMixed",value:function(){if(cY.AudioMixerPlugin){var e=cY.AudioMixerPlugin.getAudioTrackMap(),t=this.getAudioTrack();if(e&&t&&e.has(t.id)){var n=e.get(t.id);return n.hasMicrophone?n.microphoneTrack:null}}return null}},{key:"isVideoTrackBeautified",value:function(){if(cY.beautyTrackMap){var e=cY.beautyTrackMap,t=this.getVideoTrack();if(t&&e.has(t.id))return!0}return!1}},{key:"getBeautyOriginTrack",value:function(){if(cY.beautyTrackMap){var e=cY.beautyTrackMap,t=this.getVideoTrack();if(t&&e.has(t.id)){var n=e.get(t.id);if(n.originTrack)return n.originTrack}}return null}},{key:"generateBeautyTrack",value:(c=a(r().mark((function e(t){var n,i,o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,i=this.getVideoTrack(),o=cY.beautyTrackMap.get(i.id),a=o.param,o.type){e.next=8;break}n=o.pluginInstance.generateBeautyTrack(t),e.next=22;break;case 8:e.t0=o.type,e.next="beauty"===e.t0?11:"virtual"===e.t0?13:"mixed"===e.t0?17:21;break;case 11:return n=o.pluginInstance.generateBeautyTrack(t),e.abrupt("break",22);case 13:return e.next=15,o.pluginInstance.generateVirtualTrack({videoTrack:t,type:a.type,img:a.img});case 15:case 19:return n=e.sent,e.abrupt("break",22);case 17:return e.next=19,o.pluginInstance.generateMixedTrack({videoTrack:t,type:a.type,img:a.img});case 21:return e.abrupt("break",22);case 22:return o.pluginInstance.deleteSource(i.id),this.log_.info("regenerate beauty track, track id = ".concat(t.id)),e.abrupt("return",n);case 25:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"getScreen",value:function(){return this.screen_}},{key:"hasScreenTrack",value:function(){if(this.screen_)return!0;var e=this.getVideoTrack();return!!e&&(e.contentHint===nC||e.contentHint===rC)}},{key:"getVideo",value:function(){return this.video_}},{key:"getAudio",value:function(){return this.audio_}},{key:"getCameraId",value:function(){return this.cameraId_}},{key:"getMicrophoneId",value:function(){return this.microphoneId_}},{key:"getMicrophoneGroupId",value:function(){return this.microphoneGroupId_}},{key:"getIsReadyToPublish",value:function(){return this.isReadyToPublish_}},{key:"setIsReadyToPublish",value:function(e){this.isReadyToPublish_=e}},{key:"setPublishState",value:function(e){this.publishState_=e}},{key:"setBeautyStatus",value:function(e){this.beautyStatus_=!!e}},{key:"getBeautyStatus",value:function(){return this.beautyStatus_}},{key:"syncMuteState",value:function(){var e=this.getAudioTrack(),t=this.getVideoTrack();if(e){var n=!e.enabled;this.setMuteState(jT,n)}if(t){var r=!t.enabled;this.setMuteState(UT,r)}this.connection_&&this.connection_.sendMutedFlag(this.muteState_,this)}},{key:"keepMuteState",value:function(e){e instanceof MediaStreamTrack&&this.muteState_[e.kind]&&(e.enabled=!1,this.log_.warn("prev ".concat(e.kind," track is muted, keep mute state")))}},{key:"onVideoTrackStopped",value:(o=a(r().mark((function e(t){var n,i,o=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.stream,i=t.type,e.t2=n!==this||!this.video_||!this.cameraId_,e.t2){e.next=6;break}return e.next=5,ZL(this.getVideoTrack());case 5:e.t2=!e.sent;case 6:if(e.t1=e.t2,e.t1){e.next=9;break}e.t1=this.isVideoRecovering_;case 9:if(e.t0=e.t1,e.t0){e.next=12;break}e.t0=(Ew&&Kw||Xk&&Number(Jw)>=15.1)&&i===WT;case 12:if(!e.t0){e.next=14;break}return e.abrupt("return");case 14:if(!(Date.now()-this.prevVideoRecoverTime_<mE)){e.next=17;break}return setTimeout((function(){return o.onVideoTrackStopped({stream:n,type:i})}),mE),e.abrupt("return");case 17:i===WT?setTimeout((function(){var e=o.getVideoTrack();null!=e&&e.muted&&"visible"===document.visibilityState&&o.recoverVideoCapture(i)}),5e3):this.recoverVideoCapture(i);case 18:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"onAudioTrackStopped",value:(t=a(r().mark((function e(t){var n,i,o=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.stream,i=t.type,n===this&&this.audio_&&this.microphoneId_&&!this.isAudioRecovering_&&(!(Ew&&Kw||Xk&&Number(Jw)>=15.1)||i!==WT)){e.next=3;break}return e.abrupt("return");case 3:if(!(Date.now()-this.prevAudioRecoverTime_<mE)){e.next=6;break}return setTimeout((function(){return o.onAudioTrackStopped({stream:n,type:i})}),mE),e.abrupt("return");case 6:i===WT?setTimeout((function(){var e=o.getAudioTrack();null!=e&&e.muted&&"visible"===document.visibilityState&&o.recoverAudioCapture(i)}),5e3):this.recoverAudioCapture(i);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"recoverAudioCapture",value:function(e){this.prevAudioRecoverTime_=Date.now(),cx.uploadEvent({log:"stat-local-audio-".concat(e),userId:this.userId_}),this.recoverCapture({audio:!0,video:!1,microphoneId:this.microphoneId_})}},{key:"recoverVideoCapture",value:function(e){this.prevVideoRecoverTime_=Date.now(),cx.uploadEvent({log:"stat-local-video-".concat(e),userId:this.userId_}),this.recoverCapture({audio:!1,video:!0,cameraId:this.cameraId_})}},{key:"setAudioVolume",value:function(e){b(p(I.prototype),"setAudioVolume",this).call(this,e)}},{key:"clearCanvas",value:function(){this.canvasInterval_&&(eL.clearTask(this.canvasInterval_),this.canvasInterval_=null,this.canvas_=null,this.canvasTrack_=null)}},{key:"getCanvasTrack",value:function(){var e=this;if(this.canvasTrack_)return this.canvasTrack_;this.log_.info("gen canvas track");var t=this.getVideoTrack().getSettings(),n=t.width,r=t.height,i=t.frameRate;this.canvas_=document.createElement("canvas");var o=this.canvas_.getContext("2d");this.canvas_.width=n,this.canvas_.height=r,this.canvasInterval_=eL.run(yE,(function(){if(e.hasVideo()){var t=e.getVideoTrack().getSettings();t.width===e.canvas_.width&&t.height===e.canvas_.height||(e.canvas_.width=t.width,e.canvas_.height=t.height)}e.videoPlayer_&&e.videoPlayer_.element_&&o.drawImage(e.videoPlayer_.element_,0,0,e.canvas_.width,e.canvas_.height)}),{fps:Math.max(15,i)});var a=this.canvas_.captureStream();return this.canvasTrack_=a.getVideoTracks()[0],this.canvasTrack_}},{key:"setClient",value:function(e,t){e&&(this.log_.setUserId(e.getUserId()),this.log_.setSdkAppId(e.getSDKAppId()),t||this.syncMuteState()),this.client_=e}},{key:"setAudioCaptureVolume",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;if(!this.hasAudio()||t<0||!IL())return!1;if(this.captureVolume_===t)return!0;this.captureVolume_=t,this.log_.info("setCaptureVolume "+t),t/=100;var n=DO();if(this.gain_.gainNode)this.gain_.gainNode.gain.value=t;else{var r,i=new MediaStream;i.addTrack(this.getAudioTrack());var o=n.createMediaStreamDestination(),a=n.createMediaStreamSource(i),s=n.createGain();s.gain.value=t,a.connect(s),s.connect(o);var c=o.stream.getAudioTracks()[0],u=function(t){return e.log_.info("gained audio track ".concat(t))};c.onmute=function(){return u("muted")},c.onunmute=function(){return u("unmuted")},c.onended=function(){return u("ended")},this.gain_={source:a,audioTrack:c,gainNode:s},null===(r=this.connection_)||void 0===r||r.replaceTrack(c),b(p(I.prototype),"restartAudio",this).call(this)}return!0}},{key:"getGainedTrack",value:function(){return this.gain_.audioTrack}},{key:"reconnectGainNode",value:function(e){this.log_.warn("reconnect gain node");var t=new MediaStream;t.addTrack(e);var n=DO().createMediaStreamSource(t);n.connect(this.gain_.gainNode),this.gain_.source.disconnect(),this.gain_.source=n}},{key:"stopGainNode",value:function(){var e=this.gain_,t=e.audioTrack,n=e.source,r=e.gainNode;r&&(n.disconnect(),r.disconnect(),t.onmute=null,t.onunmute=null,t.onended=null,t.stop(),this.gain_={source:null,gainNode:null,audioTrack:null}),this.captureVolume_=100}},{key:"close",value:function(){this.setIsReadyToPublish(!1),this.stopGainNode(),b(p(I.prototype),"close",this).call(this)}}]),I}(wz),M($z.prototype,"switchDevice",[Hz],Object.getOwnPropertyDescriptor($z.prototype,"switchDevice"),$z.prototype),M($z.prototype,"addTrack",[zz],Object.getOwnPropertyDescriptor($z.prototype,"addTrack"),$z.prototype),M($z.prototype,"removeTrack",[Kz],Object.getOwnPropertyDescriptor($z.prototype,"removeTrack"),$z.prototype),M($z.prototype,"replaceTrack",[Wz],Object.getOwnPropertyDescriptor($z.prototype,"replaceTrack"),$z.prototype),M($z.prototype,"recoverCapture",[Yz],Object.getOwnPropertyDescriptor($z.prototype,"recoverCapture"),$z.prototype),M($z.prototype,"setAudioCaptureVolume",[Jz],Object.getOwnPropertyDescriptor($z.prototype,"setAudioCaptureVolume"),$z.prototype),$z),rK={voiceActivityDetection:!1},iK=(Xz=Nz({retries:1,timeout:0,onRetrying:function(e){this.log_.warn("connection timeout, retrying [".concat(e,"]"))},onError:function(e,t,n){e.message.includes("timeout")?(this.reset(),this.initialize(),t()):n(e)}}),Zz=function(e){d(A,e);var t,i,o,c,l,f,h,g,v,m,y,I,T,C,S,E,M,k,w,O,D=_(A);function A(e){var t;return s(this,A),(t=D.call(this,e)).localStream_=null,t.exchangeSDPTimeout_=-1,t.localAuxStream_=null,t.publishingStream_=null,t.isPublishingAuxStream_=!1,t.smallGenerator_=null,t.isSDPExchanging_=!1,t.ssrc_={audio:0,video:0,small:0,auxiliary:0},t.mediaSettings_={videoCodec:"",videoWidth:0,videoHeight:0,videoBps:0,videoFps:0,audioCodec:"opus",audioFs:0,audioChannel:0,audioBps:0,smallVideoWidth:0,smallVideoHeight:0,smallVideoFps:0,smallVideoBps:0,auxVideoWidth:0,auxVideoHeight:0,auxVideoFps:0,auxVideoBps:0},t.mixedAudioTrack_=null,t}return u(A,[{key:"isMainStreamPublished",get:function(){return!!this.localStream_}},{key:"isAuxStreamPublished",get:function(){return!!this.localAuxStream_}},{key:"publishState",get:function(){var e=this,t={audio:!1,bigVideo:!1,smallVideo:!1,auxVideo:!1};if(this.peerConnection_){var n,r,i,o,a=this.peerConnection_.getSenders();a&&(yL()?(t.audio=!(null===(n=a[0])||void 0===n||!n.track),t.bigVideo=!(null===(r=a[1])||void 0===r||!r.track),t.smallVideo=!(null===(i=a[2])||void 0===i||!i.track),t.auxVideo=!(null===(o=a[3])||void 0===o||!o.track)):a.forEach((function(n){n.track&&(n.track.kind===jT?t.audio=!0:(t.bigVideo=!0,e.smallGenerator_&&(t.smallVideo=!0)))})))}return t}},{key:"initialize",value:function(){b(p(A.prototype),"initialize",this).call(this),this.installEvents()}},{key:"reset",value:function(){this.isReconnecting_&&this.stopReconnection(),this.closePeerConnection(),this.uninstallEvents(),this.clearExchangeSDPTimeout(),this.localStream_&&this.localStream_.clearCanvas()}},{key:"close",value:function(){b(p(A.prototype),"close",this).call(this),this.reset(),this.emitConnectionStateChangedEvent(HC),this.smallGenerator_&&(this.smallGenerator_.destroy(),this.smallGenerator_=null)}},{key:"installEvents",value:function(){this.emitter_.on(PL.ERROR,this.handleError,this),this.emitter_.on(PL.CONNECTION_STATE_CHANGED,this.handleConnectionStateChange,this)}},{key:"uninstallEvents",value:function(){this.emitter_.off(PL.ERROR,this.handleError,this),this.emitter_.off(PL.CONNECTION_STATE_CHANGED,this.handleConnectionStateChange,this)}},{key:"publish",value:(O=a(r().mark((function e(t,n){var i,o,a,s,c,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.publishingStream_=t,this.isPublishingAuxStream_=n,a=t.getVideoTrack(),s=null,!a||n||!this.client_.getIsEnableSmallStream()){e.next=9;break}return this.smallGenerator_=new Lz(t),e.next=8,this.smallGenerator_.initialize();case 8:s=this.smallGenerator_.generateSmallVideoTrack(this.client_.smallStreamConfig_);case 9:if(null===(i=this.client_)||void 0===i||!i.get2k4kFlag()){e.next=18;break}if(c=1===this.client_.get2k4kFlag(),u=t.getVideoProfile(),c||t.getScreen()||!(u.height*u.width>=3686400)){e.next=18;break}return u.width=1920,u.height=1080,this.log_.warn(TE),e.next=18,t.setVideoProfile(u);case 18:if(this.updateMediaSettings(t,n),!bL()){e.next=24;break}return e.next=22,this.publishByTransceiver(t,s,n);case 22:e.next=26;break;case 24:return e.next=26,this.publishByAddTrack(t,s);case 26:return this.publishingStream_=null,this.isPublishingAuxStream_=!1,n?this.localAuxStream_=t:this.localStream_=t,null===(o=this.sei_)||void 0===o||o.handleEncodedStreams(),e.abrupt("return",t);case 31:case"end":return e.stop()}}),e,this)}))),function(e,t){return O.apply(this,arguments)})},{key:"publishByTransceiver",value:(w=a(r().mark((function e(t,n,i){var o,a,s,c,u,l,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.log_.info("publish by transceiver"),o=t.getMediaStream(),a=t.getAudioTrack(),s=t.getVideoTrack(),c=null,(Xw||$w)&&bO(s)&&(c=t.getCanvasTrack()),0!==(u=this.peerConnection_.getTransceivers()).length){e.next=16;break}return this.peerConnection_.addTransceiver(a||jT,{direction:gC,streams:[o]}),this.peerConnection_.addTransceiver(i?UT:c||s||UT,{direction:gC,streams:[o]}),this.peerConnection_.addTransceiver(n||UT,{direction:gC,streams:[o]}),this.peerConnection_.addTransceiver(i?c||s:UT,{direction:gC,streams:[o]}),e.next=14,this.connect();case 14:e.next=46;break;case 16:if(l=[],!a){e.next=29;break}if(!u[0].sender.track){e.next=24;break}return this.mixAudioTrack(u[0].sender.track,a),e.next=22,u[0].sender.replaceTrack(this.mixedAudioTrack_);case 22:e.next=27;break;case 24:return e.next=26,u[0].sender.replaceTrack(a);case 26:l.push(0);case 27:return e.next=29,this.setBandwidth({bandwidth:t.getAudioBitrate(),type:jT});case 29:if(!s){e.next=42;break}return d=i?3:1,e.next=33,u[d].sender.replaceTrack(c||s);case 33:return e.next=35,this.setBandwidth({bandwidth:t.getVideoBitrate(),type:UT,videoType:i?BT:FT});case 35:if(l.push(d),!n){e.next=42;break}return e.next=39,u[2].sender.replaceTrack(n);case 39:return e.next=41,this.setBandwidth({bandwidth:this.client_.smallStreamConfig.bitrate,type:UT,videoType:VT});case 41:l.push(2);case 42:return e.next=44,this.setTransceiverDirection(gC,l);case 44:return e.next=46,this.doPublishChange();case 46:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return w.apply(this,arguments)})},{key:"publishByAddTrack",value:(k=a(r().mark((function e(t,n){var i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.log_.info("publish by addtrack"),i=t.getMediaStream(),o=t.getAudioTrack(),a=t.getVideoTrack(),o&&this.peerConnection_.addTrack(o,i),a&&(this.peerConnection_.addTrack(a,i),n&&((s=new MediaStream).addTrack(n),this.peerConnection_.addTrack(n,s))),e.next=8,this.connect();case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return k.apply(this,arguments)})},{key:"unpublish",value:(M=a(r().mark((function e(t){var i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(yL()){e.next=2;break}return e.abrupt("return",this.doUnpublish());case 2:if(i=t.getAudioTrack(),o=t===this.localAuxStream_,a=this.peerConnection_.getSenders(),s=[],!i){e.next=17;break}if(!this.mixedAudioTrack_){e.next=14;break}return this.log_.info("has mixed audioTrack, use another audioTrack"),e.next=11,a[0].replaceTrack(o?this.localStream_.getAudioTrack():this.localAuxStream_.getAudioTrack());case 11:this.destroyMixedAudioTrack(),e.next=17;break;case 14:return e.next=16,a[0].replaceTrack(null);case 16:s.push(0);case 17:if(!o){e.next=25;break}return e.next=20,a[3].replaceTrack(null);case 20:this.localAuxStream_=null,this.mediaSettings_=n(n({},this.mediaSettings_),{},{auxVideoBps:0,auxVideoFps:0,auxVideoWidth:0,auxVideoHeight:0}),s.push(3),e.next=32;break;case 25:return e.next=27,a[1].replaceTrack(null);case 27:return e.next=29,a[2].replaceTrack(null);case 29:this.localStream_=null,this.mediaSettings_=n(n({},this.mediaSettings_),{},{videoWidth:0,videoHeight:0,videoBps:0,videoFps:0,audioFs:0,audioChannel:0,audioBps:0,smallVideoWidth:0,smallVideoHeight:0,smallVideoFps:0,smallVideoBps:0}),s.push(1,2);case 32:if(!this.localStream_&&!this.localAuxStream_){e.next=39;break}return e.next=35,this.setTransceiverDirection(hC,s);case 35:return e.next=37,this.doPublishChange();case 37:e.next=41;break;case 39:return e.next=41,this.doUnpublish();case 41:case"end":return e.stop()}}),e,this)}))),function(e){return M.apply(this,arguments)})},{key:"doPublishChange",value:(E=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={state:this.publishState,constraintConfig:this.mediaSettings_},e.next=3,this.signalChannel_.sendWaitForResponse({command:QA,data:t,responseCommand:XA.PUBLISH_STATE_CHANGE_RESULT});case 3:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"doUnpublish",value:function(){var e=this;return this.signalChannel_.sendWaitForResponse({command:oR,commandDesc:"unpublish",responseCommand:XA.UNPUBLISH_RESULT}).then((function(){e.close()})).catch((function(){e.close()}))}},{key:"updateMediaSettings",value:function(e,t){var n=this;this.localAuxStream_&&e===this.localAuxStream_&&(t=!0);var r=this.client_.getSystemResult().detail,i=r.isH264EncodeSupported,o=r.isVp8EncodeSupported;i?this.mediaSettings_.videoCodec="H264":o&&(this.mediaSettings_.videoCodec="VP8"),xL?e.getMediaStream().getTracks().forEach((function(r){var i=r.getSettings();if(r.kind===jT){var o=1;i.channelCount&&(o=i.channelCount),n.mediaSettings_.audioChannel=o,n.mediaSettings_.audioBps=1e3*e.getAudioBitrate(),n.mediaSettings_.audioFs=i.sampleRate}else if(r.kind===UT){if(t)return n.mediaSettings_.auxVideoWidth=i.width,n.mediaSettings_.auxVideoHeight=i.height,n.mediaSettings_.auxVideoFps=i.frameRate,void(n.mediaSettings_.auxVideoBps=1e3*e.getVideoBitrate());n.client_.getIsEnableSmallStream()&&(n.mediaSettings_.smallVideoWidth=n.client_.smallStreamConfig.width,n.mediaSettings_.smallVideoHeight=n.client_.smallStreamConfig.height,n.mediaSettings_.smallVideoFps=n.client_.smallStreamConfig.frameRate,n.mediaSettings_.smallVideoBps=1e3*n.client_.smallStreamConfig.bitrate),n.mediaSettings_.videoWidth=i.width,n.mediaSettings_.videoHeight=i.height,n.mediaSettings_.videoFps=i.frameRate,n.mediaSettings_.videoBps=1e3*e.getVideoBitrate()}})):this.updateMediaSettingsFromProfile(e),this.log_.info("updateMediaSettings: "+JSON.stringify(this.mediaSettings_))}},{key:"updateMediaSettingsFromProfile",value:function(e){if(e){if(e.hasAudio()){var t=e.getAudioProfile();this.mediaSettings_.audioChannel=t.channelCount,this.mediaSettings_.audioBps=1e3*t.bitrate,this.mediaSettings_.audioFs=t.sampleRate}if(e.hasVideo()){var n=e.getVideoProfile();this.mediaSettings_.videoWidth=n.width,this.mediaSettings_.videoHeight=n.height,this.mediaSettings_.videoFps=n.frameRate,this.mediaSettings_.videoBps=1e3*n.bitrate}}}},{key:"sendMediaSettings",value:function(e){var t=this;this.updateMediaSettings(e),this.signalChannel_.sendWaitForResponse({command:mR,data:this.mediaSettings_,responseCommand:XA.UPDATE_CONSTRAINT_CONFIG_RES}).then((function(e){0!==e.data.code&&t.log_.warn(e.data.message)})).catch(this.log_.warn)}},{key:"addTrack",value:(S=a(r().mark((function e(t,n){var i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.peerConnection_){e.next=2;break}return e.abrupt("return");case 2:if(o=n===this.localAuxStream_,this.log_.info("is adding ".concat(t.kind," track to current published local ").concat(o?BT:iC," stream")),null===(i=this.sei_)||void 0===i||i.handleEncodedStreams(),!yL()){e.next=10;break}return e.next=8,this.addTrackByTransceiver(t,n);case 8:e.next=12;break;case 10:return e.next=12,this.addTrackBySender(t);case 12:rx(this.userId_,{eventId:t.kind===jT?IR:bR,eventDesc:"add ".concat(t.kind," track to current published stream"),timestamp:rm(),userId:this.userId_,tinyId:this.tinyId_});case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return S.apply(this,arguments)})},{key:"addTrackByTransceiver",value:(C=a(r().mark((function e(t,n){var i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n===this.localAuxStream_,o=this.peerConnection_.getTransceivers(),t.kind!==jT){e.next=13;break}if(!o[0].sender.track){e.next=9;break}return this.mixAudioTrack(o[0].sender.track,t),e.next=7,o[0].sender.replaceTrack(this.mixedAudioTrack_);case 7:e.next=11;break;case 9:return e.next=11,o[0].sender.replaceTrack(t);case 11:e.next=26;break;case 13:return a=i?3:1,e.next=16,o[a].sender.replaceTrack(t);case 16:if(1!==a||!this.client_.getIsEnableSmallStream()){e.next=23;break}return this.smallGenerator_=new Lz(this.localStream_),e.next=20,this.smallGenerator_.initialize();case 20:return s=this.smallGenerator_.generateSmallVideoTrack(this.client_.smallStreamConfig_),e.next=23,o[2].sender.replaceTrack(s);case 23:if(o[a].direction!==hC){e.next=26;break}return e.next=26,this.setTransceiverDirection(gC,[a]);case 26:return this.updateMediaSettings(n,i),e.next=29,this.doPublishChange();case 29:case"end":return e.stop()}}),e,this)}))),function(e,t){return C.apply(this,arguments)})},{key:"addTrackBySender",value:(T=a(r().mark((function e(t){var n,i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(yL()&&this.peerConnection_.getTransceivers().findIndex((function(e){return"stopped"===e.direction}))>=0)){e.next=4;break}return this.log_.warn("transceiver is stopping, negotiate sdp first"),e.next=4,this.updateOffer(VS.REMOVE,t);case 4:if(!(n=this.peerConnection_.getSenders().find((function(e){return e.track&&e.track.kind===t.kind})))){e.next=11;break}return this.log_.warn("sender already exists, remove sender first"),i=n.track,this.removeSender(n),e.next=11,this.updateOffer(VS.REMOVE,i);case 11:if(o=this.localStream_.getMediaStream(),this.peerConnection_.addTrack(t,o),t.kind!==UT||!this.client_.getIsEnableSmallStream()){e.next=21;break}return this.smallGenerator_=new Lz(this.localStream_),e.next=17,this.smallGenerator_.initialize();case 17:a=this.smallGenerator_.generateSmallVideoTrack(this.client_.smallStreamConfig_),(s=new MediaStream).addTrack(a),this.peerConnection_.addTrack(a,s);case 21:return e.next=23,this.updateOffer(VS.ADD,t);case 23:case"end":return e.stop()}}),e,this)}))),function(e){return T.apply(this,arguments)})},{key:"isNeedToResetOfferOrder",value:function(){if(this.sdpSemantics_===AS||!this.peerConnection_||!this.peerConnection_.localDescription)return!1;for(var e=this.peerConnection_.localDescription.sdp,t=kx(e),n=0;n<t.media.length;n++)if(0===t.media[n].mid&&t.media[n].type===UT)return!0;return!1}},{key:"removeSender",value:function(e){var t=null;yL()&&(t=this.peerConnection_.getTransceivers().find((function(t){return t.sender&&t.sender.track===e.track}))),this.peerConnection_.removeTrack(e),t&&fO(t.stop)&&(this.log_.info("stop transceiver"),t.stop())}},{key:"removeTrack",value:(I=a(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.peerConnection_){e.next=2;break}return e.abrupt("return");case 2:if(this.log_.info("is removing ".concat(t.kind," track from current published local ").concat(n===this.localAuxStream_?BT:iC," stream")),!yL()){e.next=8;break}return e.next=6,this.removeTrackByTransceiver(t,n);case 6:e.next=10;break;case 8:return e.next=10,this.removeTrackBySender(t);case 10:rx(this.userId_,{eventId:t.kind===jT?CR:TR,eventDesc:"remove ".concat(t.kind," track from current published stream"),timestamp:rm(),userId:this.userId_,tinyId:this.tinyId_});case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return I.apply(this,arguments)})},{key:"removeTrackByTransceiver",value:(y=a(r().mark((function e(t,n){var i,o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n===this.localAuxStream_,o=this.peerConnection_.getTransceivers(),t.kind!==jT){e.next=13;break}if(!this.mixedAudioTrack_){e.next=9;break}return e.next=6,o[0].sender.replaceTrack(i?this.localStream_.getAudioTrack():this.localAuxStream_.getAudioTrack());case 6:this.destroyMixedAudioTrack(),e.next=11;break;case 9:return e.next=11,o[0].sender.replaceTrack(null);case 11:e.next=23;break;case 13:return a=i?3:1,e.next=16,o[a].sender.replaceTrack(null);case 16:if(1!==a||!this.smallGenerator_){e.next=21;break}return this.smallGenerator_.destroy(),this.smallGenerator_=null,e.next=21,o[2].sender.replaceTrack(null);case 21:return e.next=23,this.setTransceiverDirection(hC,[a]);case 23:return this.updateMediaSettings(n,i),e.next=26,this.doPublishChange();case 26:case"end":return e.stop()}}),e,this)}))),function(e,t){return y.apply(this,arguments)})},{key:"setTransceiverDirection",value:(m=a(r().mark((function e(t,n){var i,o,a,s,c,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qk){e.next=2;break}return e.abrupt("return");case 2:if(i=!1,o=!1,this.log_.info("setting transceiver ".concat(n.join(",")," direction to ").concat(t)),a=this.peerConnection_.getTransceivers(),n.forEach((function(e){a[e].direction!==t&&(a[e].direction=t,i=!0)})),!i){e.next=14;break}return this.log_.info("updating offer"),e.next=11,this.peerConnection_.createOffer();case 11:return s=e.sent,e.next=14,this.peerConnection_.setLocalDescription(s);case 14:if(c=-1,u=this.peerConnection_.remoteDescription.sdp.split("\r\n").map((function(e){if(e.match(new RegExp("a=(".concat(hC,"|").concat(vC,"|").concat(gC,")")))&&c++,n.includes(c)){if(t===hC&&e.includes("a=".concat(vC)))return o=!0,"a=".concat(t);if(t===gC&&e.includes("a=".concat(hC)))return o=!0,"a=".concat(vC)}return e})).join("\r\n"),!o){e.next=20;break}return this.log_.info("updating answer"),e.next=20,this.peerConnection_.setRemoteDescription({type:"answer",sdp:u});case 20:case"end":return e.stop()}}),e,this)}))),function(e,t){return m.apply(this,arguments)})},{key:"removeTrackBySender",value:(v=a(r().mark((function e(t){var n,i,o=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.kind!==UT||!this.isNeedToResetOfferOrder()){e.next=7;break}return this.reset(),this.initialize(),null===(n=this.localStream_.getMediaStream())||void 0===n||n.removeTrack(t),e.next=6,this.publish(this.localStream_);case 6:return e.abrupt("return");case 7:return(i=this.peerConnection_.getSenders().find((function(e){return e.track===t})))&&(this.removeSender(i),t.kind===UT&&this.smallGenerator_&&(this.smallGenerator_.destroy(),this.smallGenerator_=null,this.peerConnection_.getSenders().forEach((function(e){e.track&&e.track.kind===UT&&o.removeSender(e)})))),e.next=11,this.updateOffer(VS.REMOVE,t);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"replaceTrack",value:(g=a(r().mark((function e(t,n){var i,o,a,s,c,u,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=null===(i=this.peerConnection_)||void 0===i?void 0:i.getSenders())&&0!==o.length){e.next=3;break}throw new yR({code:_R.INVALID_OPERATION,message:oO({key:DM})});case 3:if(a=n===this.localAuxStream_,this.log_.info("is replacing ".concat(t.kind," track to current published local ").concat(a?BT:iC," stream")),t.kind!==jT||!o[0]){e.next=16;break}if(!(this.mixedAudioTrack_&&null!==(s=this.localStream_)&&void 0!==s&&s.hasAudio()&&null!==(c=this.localAuxStream_)&&void 0!==c&&c.hasAudio())){e.next=14;break}return this.destroyMixedAudioTrack(),u=a?this.localStream_.getAudioTrack():this.localAuxStream_.getAudioTrack(),this.mixAudioTrack(t,u),e.next=12,o[0].replaceTrack(this.mixedAudioTrack_);case 12:e.next=16;break;case 14:return e.next=16,o[0].replaceTrack(t);case 16:if(t.kind!==UT){e.next=32;break}if(n!==this.localStream_||!o[1]){e.next=29;break}return e.next=20,o[1].replaceTrack(t);case 20:if(!this.smallGenerator_||!o[2]){e.next=29;break}return this.log_.info("replacing smallVideo"),this.smallGenerator_.destroy(),this.smallGenerator_=new Lz(this.localStream_),e.next=26,this.smallGenerator_.initialize();case 26:return l=this.smallGenerator_.generateSmallVideoTrack(this.client_.smallStreamConfig_),e.next=29,o[2].replaceTrack(l);case 29:if(n!==this.localAuxStream_||!o[3]){e.next=32;break}return e.next=32,o[3].replaceTrack(t);case 32:rx(this.userId_,{eventId:t.kind===jT?LR:xR,eventDesc:"replace ".concat(t.kind," track from current published stream"),timestamp:rm(),userId:this.userId_,tinyId:this.tinyId_});case 33:case"end":return e.stop()}}),e,this)}))),function(e,t){return g.apply(this,arguments)})},{key:"updateOffer",value:(h=a(r().mark((function e(t,n){var i,o,a,s,c,u,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peerConnection_.createOffer(rK);case 3:return i=e.sent,Qk&&(i.sdp=this.setSDPDirection(i.sdp,"sendrecv")),e.next=7,this.peerConnection_.setLocalDescription(i);case 7:return o=this.updateMediaSettings(this.localStream_||this.localAuxStream_),a={action:t,trackId:n.id,kind:n.kind===UT?"bigVideo":n.kind,type:"offer",sdp:this.peerConnection_.localDescription.sdp,constraintConfig:o,state:this.publishState},this.log_.info("createOffer success, sending updated offer to remote server"),this.log_.debug("updatedOffer: "+a.sdp),e.next=13,this.signalChannel_.sendWaitForResponse({command:ZA,data:a,responseCommand:XA.UPDATE_OFFER_RESULT,timeout:1e4,commandDesc:"update offer"});case 13:return s=e.sent,c=s.data,u=c.code,l=c.message,0!==u&&this.checkPublishResultCode(u,l),e.next=18,this.acceptAnswer(s.data.data);case 18:this.updateSSRC(i.sdp),cx.logSuccessEvent({userId:this.client_.getUserId(),eventType:vS,kind:"offer"}),e.next=27;break;case 22:throw e.prev=22,e.t0=e.catch(0),this.log_.error(e.t0),cx.logFailedEvent({userId:this.client_.getUserId(),eventType:vS,kind:"offer",error:e.t0}),e.t0;case 27:case"end":return e.stop()}}),e,this,[[0,22]])}))),function(e,t){return h.apply(this,arguments)})},{key:"setBandwidth",value:(f=a(r().mark((function e(t){var n,i,o,a,s,c,u,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.bandwidth,i=t.type,o=t.videoType,a=void 0===o?"":o,s=t.sdp,TL()||!s){e.next=3;break}return e.abrupt("return",i===UT?this.updateVideoBandwidthRestriction(s,n,a):this.updateAudioBandwidthRestriction(s,n));case 3:if(c=0,i===UT&&(c=a===VT?2:a===BT?3:1),!(u=this.peerConnection_.getSenders()[c])){e.next=22;break}return(l=u.getParameters()).encodings&&0!==l.encodings.length||(l.encodings=[{}]),"unlimited"===n?delete l.encodings[0].maxBitrate:l.encodings[0].maxBitrate=1e3*n,e.prev=10,e.next=13,u.setParameters(l);case 13:return this.log_.info(a+i+" bandwidth was set to "+n+" kbps"),e.abrupt("return",s);case 17:if(e.prev=17,e.t0=e.catch(10),this.log_.info("failed to set bandwidth by setting maxBitrate: "+e.t0),!s){e.next=22;break}return e.abrupt("return",i===UT?this.updateVideoBandwidthRestriction(s,n,a):this.updateAudioBandwidthRestriction(s,n));case 22:return e.abrupt("return",s);case 23:case"end":return e.stop()}}),e,this,[[10,17]])}))),function(e){return f.apply(this,arguments)})},{key:"updateVideoBandwidthRestriction",value:function(e,t,n){var r="AS";Qk&&(r="TIAS",t*=1e3);var i=0,o=-1;return n===VT?i=1:n===BT&&(i=2),e=e.replace(/m=video (.*)\r\nc=IN (.*)\r\n/g,(function(e){return++o===i?"".concat(e,"b=").concat(r,":").concat(t,"\r\n"):e})),e}},{key:"updateAudioBandwidthRestriction",value:function(e,t){var n="AS";return Qk&&(n="TIAS",t*=1e3),e.replace(/m=audio (.*)\r\nc=IN (.*)\r\n/,"m=audio $1\r\nc=IN $2\r\nb="+n+":"+t+"\r\n")}},{key:"removeBandwidthRestriction",value:function(e){return e.replace(/b=AS:.*\r\n/,"").replace(/b=TIAS:.*\r\n/,"")}},{key:"removeVideoOrientation",value:function(e){return e.replace(/urn:3gpp:video-orientation/,"")}},{key:"connect",value:(l=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.exchangeSDP();case 3:return e.next=5,this.waitForPeerConnectionConnected();case 5:e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),this.closePeerConnection(!0),e.t0;case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return l.apply(this,arguments)})},{key:"exchangeSDP",value:(c=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isSDPExchanging_=!0,e.next=4,this.createOffer();case 4:return this.log_.info("createOffer success, sending offer to remote server"),e.next=7,this.doExchangeSDP();case 7:this.isSDPExchanging_=!1,e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(0),this.isSDPExchanging_=!1,e.t0;case 14:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(){return c.apply(this,arguments)})},{key:"createOffer",value:(o=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peerConnection_.createOffer(rK);case 3:return t=e.sent,e.next=6,this.peerConnection_.setLocalDescription(t);case 6:this.updateSSRC(t.sdp),cx.logSuccessEvent({userId:this.client_.getUserId(),eventType:vS,kind:"offer"}),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(0),cx.logFailedEvent({userId:this.client_.getUserId(),eventType:vS,kind:"offer",error:e.t0}),e.t0;case 14:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(){return o.apply(this,arguments)})},{key:"doExchangeSDP",value:function(){var e=this;return new Promise((function(t,n){e.exchangeSDPTimeout_=setTimeout((function(){e.signalChannel_.off(XA.PUBLISH_RESULT,i),e.clearExchangeSDPTimeout();var t=new yR({code:_R.API_CALL_TIMEOUT,message:oO({key:FE})});n(t)}),1e4);var i=function(){var i=a(r().mark((function i(o){var a,s,c;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,e.clearExchangeSDPTimeout(),a=o.data,s=a.code,c=a.message,0!==s){r.next=9;break}return r.next=6,e.acceptAnswer(o.data.data);case 6:t(),r.next=10;break;case 9:e.checkPublishResultCode(s,c);case 10:r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),n(r.t0);case 15:case"end":return r.stop()}}),i,null,[[0,12]])})));return function(e){return i.apply(this,arguments)}}(),o={type:e.peerConnection_.localDescription.type,sdp:e.removeVideoOrientation(e.peerConnection_.localDescription.sdp),screen:(e.publishingStream_||e.localStream_).hasScreenTrack(),state:e.publishState,constraintConfig:e.mediaSettings_};e.signalChannel_.once(XA.PUBLISH_RESULT,i),e.log_.debug("sending sdp offer: "+o.sdp),e.signalChannel_.send(iR,o)}))}},{key:"setSDPDirection",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",r=kx(e);return r.media.forEach((function(e){"all"!==n&&e.type!==n||(e.direction=t)})),wx(r)}},{key:"acceptAnswer",value:(i=a(r().mark((function e(t){var n,i,o,a,s,c,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this.removeVideoOrientation(t.sdp),!(i=this.publishingStream_||this.localStream_)){e.next=15;break}if(o=i.getVideoBitrate(),a=i.getAudioBitrate(),!o){e.next=11;break}return s=this.isPublishingAuxStream_?BT:FT,e.next=10,this.setBandwidth({bandwidth:o,type:UT,sdp:n,videoType:s});case 10:n=e.sent;case 11:if(!a){e.next=15;break}return e.next=14,this.setBandwidth({bandwidth:a,type:jT,sdp:n});case 14:n=e.sent;case 15:if(!this.client_.getIsEnableSmallStream()){e.next=20;break}return c=this.client_.smallStreamConfig,e.next=19,this.setBandwidth({bandwidth:c.bitrate,type:UT,videoType:VT,sdp:n});case 19:n=e.sent;case 20:return u={type:t.type,sdp:n},e.next=23,this.peerConnection_.setRemoteDescription(u);case 23:this.log_.debug("accepted answer: "+n),cx.logSuccessEvent({userId:this.client_.getUserId(),eventType:mS,kind:"answer"}),e.next=32;break;case 27:throw e.prev=27,e.t0=e.catch(0),cx.logFailedEvent({userId:this.client_.getUserId(),eventType:mS,kind:"answer",error:e.t0}),this.log_.error("failed to accept remote answer "+e.t0),e.t0;case 32:case"end":return e.stop()}}),e,this,[[0,27]])}))),function(e){return i.apply(this,arguments)})},{key:"sendMutedFlag",value:function(e,t){if(t!==this.localAuxStream_){var n={audio:e.audio,bigVideo:e.video,auxVideo:e.auxVideo};this.log_.info("send muted state: ".concat(JSON.stringify(n))),this.signalChannel_.send(rR,n)}}},{key:"getIsReconnecting",value:function(){return this.isReconnecting_}},{key:"reconnect",value:(t=a(r().mark((function e(){var t,n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===this.reconnectionTimer_){e.next=3;break}return this.log_.warn("reconnect() uplink is reconnecting, ignore current reconnection"),e.abrupt("return");case 3:if(!(this.reconnectionCount_>=30)){e.next=12;break}return this.log_.warn("SDK has tried reconnect uplink for ".concat(30," times, but all failed, please check your network")),this.stopReconnection(),t=new yR({code:_R.UPLINK_RECONNECTION_FAILED,message:oO({key:HE})}),cx.logFailedEvent({userId:this.client_.getUserId(),eventType:fS,error:t}),this.addEventInternal($R,"uplink-connection reconnect fail"),this.emitConnectionStateChangedEvent(HC),this.emitter_.emit(PL.ERROR,t),e.abrupt("return");case 12:if(this.signalChannel_.getCurrentState()===YA){e.next=16;break}return this.log_.warn("reconnect() signal channel is not connected, suspend reconnection until signal is connected"),this.signalChannel_.once(qA,this.reconnect,this),e.abrupt("return");case 16:if(this.reconnectionCount_++,e.prev=17,this.log_.warn("reconnect() try to reconnect uplink [".concat(this.reconnectionCount_,"/").concat(30,"]")),n=pO(this.reconnectionCount_),this.reconnectionTimer_=setTimeout((function(){i.log_.warn("reconnect() uplink reconnect timeout(".concat(n/1e3,"s), try again")),i.clearReconnectionTimer(),i.reconnect()}),n),!(this.isSDPExchanging_||this.peerConnection_&&this.peerConnection_.connectionState===JC)){e.next=23;break}return e.abrupt("return");case 23:return e.next=25,this.signalChannel_.sendWaitForResponse({command:oR,responseCommand:XA.UNPUBLISH_RESULT,enableLog:!1});case 25:if(this.reset(),this.initialize(),!this.localStream_){e.next=30;break}return e.next=30,this.publish(this.localStream_);case 30:if(!this.localAuxStream_){e.next=33;break}return e.next=33,this.publish(this.localAuxStream_,!0);case 33:cx.logSuccessEvent({userId:this.client_.getUserId(),eventType:fS}),this.log_.warn("reconnect() uplink reconnect successfully"),this.addEventInternal(JR,"uplink-connection reconnect success"),this.stopReconnection(),this.localStream_.syncMuteState(),e.next=42;break;case 40:e.prev=40,e.t0=e.catch(17);case 42:case"end":return e.stop()}}),e,this,[[17,40]])}))),function(){return t.apply(this,arguments)})},{key:"clearExchangeSDPTimeout",value:function(){-1!==this.exchangeSDPTimeout_&&(clearTimeout(this.exchangeSDPTimeout_),this.exchangeSDPTimeout_=-1)}},{key:"clearReconnectionTimer",value:function(){-1!==this.reconnectionTimer_&&(clearTimeout(this.reconnectionTimer_),this.reconnectionTimer_=-1)}},{key:"handleError",value:function(e){e.getCode()===_R.ICE_TRANSPORT_ERROR&&(this.isFirstConnection_&&(this.isFirstConnection_=!1,cx.logFailedEvent({userId:this.client_.getUserId(),eventType:pS,error:e})),this.isReconnecting_||this.startReconnection())}},{key:"handleConnectionStateChange",value:function(e){e.state===WC&&this.isFirstConnection_&&(this.isFirstConnection_=!1,cx.logSuccessEvent({userId:this.client_.getUserId(),eventType:pS}),this.addEventInternal(qR,"uplink-connection is connected"))}},{key:"updateSSRC",value:function(e){var t=this;try{kx(e).media.forEach((function(e,n){if(e.type===jT){var r=e.ssrcs[0];r&&(t.ssrc_.audio=r.id)}else{if(t.sdpSemantics_===AS)return void e.ssrcGroups.forEach((function(e,n){var r=Number(e.ssrcs.split(" ")[0]);0===n?t.ssrc_.video=r:1===n&&(t.ssrc_.small=r)}));var i=e.ssrcs[0];if(!i)return;switch(n){case 1:t.ssrc_.video=i.id;break;case 2:t.ssrc_.small=i.id;break;case 3:t.ssrc_.auxiliary=i.id}}}))}catch(uY){}}},{key:"getVideoTrackId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:UT;if(this.peerConnection_){var t=this.peerConnection_.getSenders();if(e===UT&&t[1]&&t[1].track)return t[1].track.id;if(e===VT&&t[2]&&t[2].track)return t[2].track.id;if(e===BT&&t[3]&&t[3].track)return t[3].track.id}if(this.localStream_&&e===UT){var n=this.localStream_.getVideoTrack();if(n)return n.id}if(this.localAuxStream_&&e===BT){var r=this.localAuxStream_.getVideoTrack();if(r)return r.id}return""}},{key:"getSSRC",value:function(){return this.ssrc_}},{key:"checkPublishResultCode",value:function(e,t){if(0!==e)throw 1028===e?(this.log_.error(Nk.NOT_SUPPORTED_H264ENCODE),new yR({code:_R.NOT_SUPPORTED_H264,message:oO({key:pk})})):new yR({code:_R.UNKNOWN,message:oO({key:bk,data:{signalResponse:XA.PUBLISH_RESULT,code:e,message:t}})})}},{key:"getLocalStream",value:function(){return this.localStream_}},{key:"sendSEI",value:function(e,t){this.sei_.push(e,t)}},{key:"mixAudioTrack",value:function(e,t){this.log_.info("mix audio track"),this.mixedAudioTrack_=function(e){var t=OO(),n=t.createMediaStreamDestination(),r=[];e.forEach((function(e){var i=new MediaStream;i.addTrack(e);var o=t.createMediaStreamSource(i);o.connect(n),r.push(o)}));var i=n.stream.getAudioTracks()[0];return Pz.set(i,{destination:n,track:i,mediaStreamSourceList:r}),i}([e,t])}},{key:"destroyMixedAudioTrack",value:function(){this.mixedAudioTrack_&&(this.log_.info("destroy audio track"),function(e){if(Pz.has(e)){var t=Pz.get(e),n=t.destination,r=t.track,i=t.mediaStreamSourceList;r.stop(),n.disconnect(),i.forEach((function(e){e.disconnect()})),Pz.delete(e)}}(this.mixedAudioTrack_),this.mixedAudioTrack_=null)}}]),A}(fz),M(Zz.prototype,"publish",[Xz],Object.getOwnPropertyDescriptor(Zz.prototype,"publish"),Zz.prototype),Zz),oK=te,aK=jl,sK=Fc.exports.getWeakData,cK=ll,uK=ln,lK=se,dK=be,pK=sl,fK=gt,hK=ar.set,gK=ar.getterFor,vK=vo.find,mK=vo.findIndex,_K=oK([].splice),yK=0,bK=function(e){return e.frozen||(e.frozen=new IK)},IK=function(){this.entries=[]},TK=function(e,t){return vK(e.entries,(function(e){return e[0]===t}))};IK.prototype={get:function(e){var t=TK(this,e);if(t)return t[1]},has:function(e){return!!TK(this,e)},set:function(e,t){var n=TK(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=mK(this.entries,(function(t){return t[0]===e}));return~t&&_K(this.entries,t,1),!!~t}};var CK,SK={getConstructor:function(e,t,n,r){var i=e((function(e,i){cK(e,o),hK(e,{type:t,id:yK++,frozen:void 0}),lK(i)||pK(i,e[r],{that:e,AS_ENTRIES:n})})),o=i.prototype,a=gK(t),s=function(e,t,n){var r=a(e),i=sK(uK(t),!0);return!0===i?bK(r).set(t,n):i[r.id]=n,e};return aK(o,{delete:function(e){var t=a(this);if(!dK(e))return!1;var n=sK(e);return!0===n?bK(t).delete(e):n&&fK(n,t.id)&&delete n[t.id]},has:function(e){var t=a(this);if(!dK(e))return!1;var n=sK(e);return!0===n?bK(t).has(e):n&&fK(n,t.id)}}),aK(o,n?{get:function(e){var t=a(this);if(dK(e)){var n=sK(e);return!0===n?bK(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return s(this,e,t)}}:{add:function(e){return s(this,e,!0)}}),i}},EK=O,MK=te,kK=jl,wK=Fc.exports,OK=Nl,DK=SK,AK=be,RK=lu,xK=ar.enforce,LK=Fn,NK=!EK.ActiveXObject&&"ActiveXObject"in EK,PK=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},jK=OK("WeakMap",PK,DK);if(LK&&NK){CK=DK.getConstructor(PK,"WeakMap",!0),wK.enable();var UK=jK.prototype,GK=MK(UK.delete),VK=MK(UK.has),FK=MK(UK.get),BK=MK(UK.set);kK(UK,{delete:function(e){if(AK(e)&&!RK(e)){var t=xK(this);return t.frozen||(t.frozen=new CK),GK(this,e)||t.frozen.delete(e)}return GK(this,e)},has:function(e){if(AK(e)&&!RK(e)){var t=xK(this);return t.frozen||(t.frozen=new CK),VK(this,e)||t.frozen.has(e)}return VK(this,e)},get:function(e){if(AK(e)&&!RK(e)){var t=xK(this);return t.frozen||(t.frozen=new CK),VK(this,e)?FK(this,e):t.frozen.get(e)}return FK(this,e)},set:function(e,t){if(AK(e)&&!RK(e)){var n=xK(this);n.frozen||(n.frozen=new CK),VK(this,e)?BK(this,e,t):n.frozen.set(e,t)}else BK(this,e,t);return this}})}var qK=Ei,HK=Bb,zK=A,KK=Se,WK=me,YK=jy,JK=DT,$K=Cr,XK=HK&&HK.prototype;if(qK({target:"Promise",proto:!0,real:!0,forced:!!HK&&zK((function(){XK.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=YK(this,KK("Promise")),n=WK(e);return this.then(n?function(n){return JK(t,e()).then((function(){return n}))}:e,n?function(n){return JK(t,e()).then((function(){throw n}))}:e)}}),WK(HK)){var ZK=KK("Promise").prototype.finally;XK.finally!==ZK&&$K(XK,"finally",ZK,{unsafe:!0})}var QK,eW,tW,nW,rW,iW=new WeakMap;function oW(){return function(e,t,r){var i=r.value,o=function e(t){var r=t.fn,i=t.args,o=t.context,a=t.resolve,s=t.reject;r.apply(o,i).then(a,s).finally((function(){var t=iW.get(o);t&&(t.shift(),t[0]&&e(n({},t[0])))}))};return r.value=function(){for(var e=this,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return new Promise((function(n,a){if(iW.has(e)){var s=iW.get(e),c=s.length;s.push({fn:i,args:r,context:e,resolve:n,reject:a,name:t}),0===c&&o({fn:i,args:r,context:e,resolve:n,reject:a})}else iW.set(e,[{fn:i,args:r,context:e,resolve:n,reject:a,name:t}]),o({fn:i,args:r,context:e,resolve:n,reject:a})}))},r}}var aW=(QK=oW(),eW=Nz({retries:1,timeout:0,onRetrying:function(e){this.log_.warn("connection timeout, retrying [".concat(e,"]"))},onError:function(e,t,n){e.message.includes("timeout")?t():n(e)}}),tW=oW(),nW=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;return function(t,n,r){var i=r.value;return r.value=function(){for(var t=this,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return new Promise((function(r,a){var s=setTimeout((function(){return a(new Error("".concat(n," timeout")))}),e);i.apply(t,o).then(r,a).finally((function(){clearTimeout(s)}))}))},r}}(),rW=function(e){d(v,e);var t,i,o,c,l,f,h,g=_(v);function v(e){var t;return s(this,v),(t=g.call(this,e)).remoteStreams_=new Map,t.autoSubscribe=e.autoSubscribe,t.trackState_={audio:e.trackState.audio,video:e.trackState.video,auxiliary:e.trackState.auxiliary,smallVideo:e.trackState.smallVideo},t.ssrc_={audio:0,video:0,auxiliary:0},t.subscribeState_={audio:e.autoSubscribe,video:e.autoSubscribe,auxiliary:e.autoSubscribe,smallVideo:!1},t.isSDPExchanging_=!1,t.installEvents(),t}return u(v,[{key:"isMainStreamSubscribed",get:function(){return(this.subscribeState_.audio||this.subscribeState_.video||this.subscribeState_.smallVideo)&&(this.trackState_.audio||this.trackState_.video||this.trackState_.smallVideo)}},{key:"isAuxStreamSubscribed",get:function(){return this.subscribeState_.auxiliary&&this.trackState_.auxiliary}},{key:"isSmallStreamSubscribed",get:function(){return this.subscribeState_.smallVideo&&this.trackState_.smallVideo}},{key:"isBigStreamSubscribed",get:function(){return this.subscribeState_.video&&this.trackState_.video}},{key:"isStreamUnpublished",value:function(e){return e.getType()===iC?!this.trackState_.audio&&!this.trackState_.video:!this.trackState_.auxiliary}},{key:"initialize",value:function(){b(p(v.prototype),"initialize",this).call(this),this.peerConnection_.ontrack=this.onTrack.bind(this)}},{key:"close",value:function(){var e,t,n,r=this;b(p(v.prototype),"close",this).call(this),this.trackState_.audio=!1,this.trackState_.video=!1,this.trackState_.smallVideo=!1,this.trackState_.auxiliary=!1,this.emitConnectionStateChangedEvent(HC),e=this,t=function(e){e.fn;var t=e.args,n=e.resolve,i=e.reject,o=e.name;if("subscribe"===o){if(!r.client_.getIsJoined())return i(new yR({code:_R.API_CALL_ABORTED,message:oO({key:xk,data:{message:"leave room",stream:t[0]}})}));if(r.isStreamUnpublished(t[0]))return i(new yR({code:_R.API_CALL_ABORTED,message:oO({key:xk,data:{message:"remote user ".concat(r.userId_," unpublished stream"),stream:t[0]}})}))}else if("unsubscribe"===o)return n();n()},null===(n=iW.get(e))||void 0===n||n.forEach(t),iW.delete(e),this.remoteStreams_.forEach((function(e){var t=e;t.setConnection(null),t.uninstallEvents(),t.getIsStreamAddedEventEmitted()&&r.emitter_.emit(PL.STREAM_REMOVED,{stream:t})})),this.remoteStreams_.clear(),this.uninstallEvents()}},{key:"installEvents",value:function(){var e=this;UO.on(aD,this.onRemoteStreamUpdate,this),this.emitter_.on(PL.ERROR,(function(t){t.getCode()===_R.ICE_TRANSPORT_ERROR&&(e.isFirstConnection_&&(e.isFirstConnection_=!1,cx.logFailedEvent({userId:e.client_.getUserId(),eventType:hS,error:t})),e.isReconnecting_||e.startReconnection())})),this.emitter_.on(PL.CONNECTION_STATE_CHANGED,(function(t){t.state===WC&&e.isFirstConnection_&&(e.isFirstConnection_=!1,cx.logSuccessEvent({userId:e.client_.getUserId(),eventType:hS}),e.addEventInternal(HR,"downlink-connection is connected"))}))}},{key:"uninstallEvents",value:function(){UO.removeListener(aD,this.onRemoteStreamUpdate,this)}},{key:"onRemoteStreamUpdate",value:function(e){if(this.hitTest(e.tinyId)&&e.client===this.client_){this.updateTrackState(e.action,e.kind);var t=e.kind===BT?GC:UC,n=this.remoteStreams_.get(t);if(!n)return;e.action===VS.ADD?this.handleRemoteAddTrack(e.kind,n):this.handleRemoteRemoveTrack(e.kind,n)}}},{key:"handleRemoteAddTrack",value:function(e,t){this.log_.info("remote add ".concat(e," track")),e===jT?t.updateAudioPlayingState(this.subscribeState_.audio):t.updateVideoPlayingState(e===BT?this.subscribeState_.auxiliary:this.subscribeState_.video||this.subscribeState_.smallVideo),t.getIsStreamAddedEventEmitted()?this.emitter_.emit(PL.STREAM_UPDATED,{stream:t}):(this.emitter_.emit(PL.STREAM_ADDED,{stream:t}),this.currentState_===WC&&t.emitConnectionStateChanged({prevState:HC,state:WC}))}},{key:"handleRemoteRemoveTrack",value:function(e,t){t.getIsStreamAddedEventEmitted()&&(this.log_.info("remote remove ".concat(e," track")),e===BT||!this.trackState_.audio&&!this.trackState_.video?(this.log_.info("remote stream ".concat(t.getType()," removed")),this.currentState_===WC&&t.emitConnectionStateChanged({prevState:WC,state:HC}),this.emitter_.emit(PL.STREAM_REMOVED,{stream:t})):(e===jT?t.updateAudioPlayingState(!1):(e!==HT||this.isSmallStreamSubscribed)&&t.updateVideoPlayingState(!1),this.emitter_.emit(PL.STREAM_UPDATED,{stream:t})))}},{key:"updateTrackState",value:function(e,t){var n=e===VS.ADD;switch(t){case jT:this.trackState_.audio=n;break;case UT:this.trackState_.video=n;break;case BT:this.trackState_.auxiliary=n;break;case HT:this.trackState_.smallVideo=n}this.log_.info("trackState updated: ".concat(JSON.stringify(this.trackState_)))}},{key:"onTrack",value:function(e){var t=e.streams[0],n=e.track;if(this.log_.info("ontrack() kind: ".concat(n.kind," id: ").concat(n.id," streamId: ").concat(t.id)),this.sdpSemantics_===DS){var r=function(e){var t=gx.parse(e),n={audio:[],video:[]};return t.media.forEach((function(e){if(e.ssrcs){var t=e.ssrcs[0].id>>16&255;if(e.type===jT)n.audio.push(UC);else if(e.type==UT){var r=t===VC?UC:GC;n.video.push(r)}}})),n}(this.peerConnection_.remoteDescription.sdp);if(n.kind===jT){if(0===r.audio.length||t.id!==UC)return void this.log_.debug("skip this invalid audio track")}else if(-1===r.video.indexOf(t.id))return void this.log_.debug("skip this invalid video track: ".concat(n.id,"  msid: ").concat(t.id))}cx.logEvent({eventType:"ontrack",kind:n.kind});var i=!1,o=this.remoteStreams_.get(t.id),a=t.id===UC?FC:BC;if(hO(o)&&((o=new Oz({type:a,userId:this.userId_,client:this.client_})).setConnection(this),this.remoteStreams_.set(t.id,o),i=!0),o.setMediaStream(t),n.kind===jT?o.updateAudioPlayingState(this.subscribeState_.audio):a===FC?o.updateVideoPlayingState(this.subscribeState_.video||this.subscribeState_.smallVideo):o.updateVideoPlayingState(this.subscribeState_.auxiliary),(a!==BC||this.trackState_.auxiliary)&&(a!==FC||this.trackState_.audio||this.trackState_.video)){var s=this.client_.getSubscriptionManager();s&&s.hasAutoRecoveryFlag(this.userId_,a)||(i?this.emitter_.emit(PL.STREAM_ADDED,{stream:o}):this.emitter_.emit(PL.STREAM_UPDATED,{stream:o}))}}},{key:"addRRTRLine",value:function(e){var t=e.split("\r\n"),n=new Map;t.forEach((function(e,r){/^a=rtcp-fb:/.test(e)&&t[r+1]&&!/^a=rtcp-fb:/.test(t[r+1])&&n.set(r+1,e.match(/^a=rtcp-fb:\d+/)[0]+" rrtr")}));for(var r=T(n),i=0;i<r.length;i++){var o=I(r[i],2),a=o[0],s=o[1];t.splice(a+i,0,s)}return t.join("\r\n")}},{key:"addSPSDescription",value:function(e){var t=kx(e);return t.media.forEach((function(e){e.type===UT&&e.fmtp.forEach((function(e){e.config+=";sps-pps-idr-in-keyframe=1"}))})),wx(t)}},{key:"removeSDESDescription",value:function(e){var t=["urn:ietf:params:rtp-hdrext:sdes:mid","urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id","urn:ietf:params:rtp-hdrext:sdes:repaired-rtp-stream-id"],n=kx(e);return n.media.forEach((function(e){e.ext=e.ext.filter((function(e){return!t.includes(e.uri)}))})),wx(n)}},{key:"isSubscriptionStateNotChanged",value:function(e,t){return e.getType()===FC?(null==t?void 0:t.audio)===this.subscribeState_.audio&&(null==t?void 0:t.video)===this.subscribeState_.video&&this.isSubscribeSmall(t):e.getType()===BC?!hO(t.video)&&this.subscribeState_.auxiliary===t.video:void 0}},{key:"isSubscribeSmall",value:function(e){return hO(e.smallVideo)&&!this.subscribeState_.smallVideo}},{key:"subscribe",value:(h=a(r().mark((function e(t,n){var i,o,a,s,c,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=n.emitEvent,s=void 0===a||a,c=t.getType(),(null===(i=this.peerConnection_)||void 0===i?void 0:i.connectionState)!==YC&&(null===(o=this.peerConnection_)||void 0===o?void 0:o.connectionState)!==JC){e.next=6;break}return e.next=6,this.waitForPeerConnectionConnected();case 6:if(!this.isSubscriptionStateNotChanged(t,n)){e.next=13;break}if(this.peerConnection_){e.next=11;break}return this.initialize(),e.next=11,this.connect();case 11:return s&&hO(n.smallVideo)&&this.emitter_.emit(PL.STREAM_SUBSCRIBED,{stream:t,result:!0}),e.abrupt("return",t);case 13:if(c===iC?(hO(n.audio)||(this.subscribeState_.audio=n.audio),hO(n.video)||(this.subscribeState_.video=n.video),this.subscribeState_.smallVideo=(null==n?void 0:n.smallVideo)||!1,this.addEventInternal(this.subscribeState_.audio?wR:DR,this.subscribeState_.audio?"subscribe audio":"unsubscribe audio"),this.addEventInternal(this.subscribeState_.video?wR:DR,this.subscribeState_.video?"subscribe video":"unsubscribe video"),this.addEventInternal(this.subscribeState_.smallVideo?ex:tx,this.subscribeState_.smallVideo?"subscribe smallVideo":"unsubscribe smallVideo")):hO(n.video)||(this.subscribeState_.auxiliary=n.video),this.log_.info("subscribe ".concat(c," stream with options ").concat(JSON.stringify(n)," current state: ").concat(JSON.stringify(this.subscribeState_))),!this.peerConnection_&&!this.isSDPExchanging_){e.next=23;break}return u=OS,this.isMainStreamSubscribed||this.isAuxStreamSubscribed||(u=wS),e.next=20,this.sendSubscription(u);case 20:c===iC?(t.updateAudioPlayingState(this.subscribeState_.audio),t.updateVideoPlayingState(this.subscribeState_.video||this.subscribeState_.smallVideo)):t.updateVideoPlayingState(this.subscribeState_.auxiliary),e.next=26;break;case 23:return this.initialize(),e.next=26,this.connect();case 26:return s&&this.emitter_.emit(PL.STREAM_SUBSCRIBED,{stream:t,result:!0}),e.abrupt("return",t);case 30:if(e.prev=30,e.t0=e.catch(0),!this.client_.getIsJoined()||!this.isStreamUnpublished(t)){e.next=35;break}throw this.log_.warn("".concat(e.t0.message," ").concat(JSON.stringify(this.trackState_))),new yR({code:_R.REMOTE_STREAM_NOT_EXIST,message:"remote user ".concat(this.userId_," unpublished stream")});case 35:throw e.t0;case 36:case"end":return e.stop()}}),e,this,[[0,30]])}))),function(e,t){return h.apply(this,arguments)})},{key:"unsubscribe",value:(f=a(r().mark((function e(t){var n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.getType())!==iC){e.next=10;break}if(this.isMainStreamSubscribed){e.next=5;break}return this.log_.info("main stream already unsubscribed"),e.abrupt("return",t);case 5:this.subscribeState_.audio=!1,this.subscribeState_.video=!1,this.subscribeState_.smallVideo=!1,e.next=14;break;case 10:if(this.isAuxStreamSubscribed){e.next=13;break}return this.log_.info("auxiliary stream already unsubscribed"),e.abrupt("return",t);case 13:this.subscribeState_.auxiliary=!1;case 14:return i=wS,(n===FC&&this.isAuxStreamSubscribed||n===BC&&this.isMainStreamSubscribed)&&(i=OS),this.log_.info("unsubscribe ".concat(n," stream with ").concat(JSON.stringify(this.subscribeState_))),e.next=19,this.sendSubscription(i);case 19:return t.updateVideoPlayingState(!1),t.updateAudioPlayingState(!1),i===wS&&((o=t.getMediaStream())&&o.getTracks().forEach((function(e){return o.removeTrack(e)})),this.closePeerConnection(),this.emitConnectionStateChangedEvent(HC)),this.addEventInternal(DR,"unsubscribe audio"),this.addEventInternal(OR,"unsubscribe video"),e.abrupt("return",t);case 25:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"sendSubscription",value:function(e){var t=this,n={srcTinyId:this.tinyId_,srcUserId:this.userId_},r=sR,i=XA.UNSUBSCRIBE_RESULT;return e===OS&&(n={audio:this.subscribeState_.audio,bigVideo:this.subscribeState_.video,auxVideo:this.subscribeState_.auxiliary,smallVideo:this.subscribeState_.smallVideo,srcTinyId:this.tinyId_},r=cR,i=XA.SUBSCRIBE_CHANGE_RESULT),this.signalChannel_.sendWaitForResponse({command:r,data:n,responseCommand:i,timeout:1e4}).then((function(n){var r=n.data;if(0!==r.code){var i=new yR({code:r.code,message:oO({key:VE,data:{type:e,message:r.message}})});throw t.log_.error(i),i}}))}},{key:"connect",value:(l=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.exchangeSDP();case 3:return e.next=5,this.waitForPeerConnectionConnected();case 5:e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),this.closePeerConnection(!0),e.t0;case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return l.apply(this,arguments)})},{key:"exchangeSDP",value:(c=a(r().mark((function e(){var t,n,i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isSDPExchanging_=!0,e.next=4,this.createOffer();case 4:return this.log_.info("createOffer success, sending offer to remote server"),t=this.peerConnection_.localDescription,n=t.type,i=t.sdp,o={type:n,sdp:i,srcUserId:this.userId_,srcTinyId:this.tinyId_,audio:this.subscribeState_.audio,bigVideo:this.subscribeState_.video,auxVideo:this.subscribeState_.auxiliary,smallVideo:this.subscribeState_.smallVideo},UO.emit(MD,{client:this.client_,connection:this,userId:this.userId_,tinyId:this.tinyId_,role:LC,subscribeState:this.subscribeState_,trackState:this.trackState_}),e.next=10,this.signalChannel_.sendWaitForResponse({command:aR,commandDesc:"exchange sdp",data:o,responseCommand:XA.SUBSCRIBE_RESULT,timeout:1e4});case 10:if(a=e.sent,this.peerConnection_){e.next=15;break}throw s=new yR({code:_R.INVALID_OPERATION,message:oO({key:Ck})}),this.log_.warn(s),s;case 15:return e.next=17,this.onSubscribeResult(a);case 17:this.isSDPExchanging_=!1,e.next=24;break;case 20:throw e.prev=20,e.t0=e.catch(0),this.isSDPExchanging_=!1,e.t0;case 24:case"end":return e.stop()}}),e,this,[[0,20]])}))),function(){return c.apply(this,arguments)})},{key:"createOffer",value:(o=a(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={voiceActivityDetection:!1},bL()&&this.sdpSemantics_===DS?(this.peerConnection_.addTransceiver(jT,{direction:"recvonly"}),this.peerConnection_.addTransceiver(UT,{direction:"recvonly"}),this.peerConnection_.addTransceiver(UT,{direction:"recvonly"})):(t.offerToReceiveAudio=!0,t.offerToReceiveVideo=!0),e.next=4,this.peerConnection_.createOffer(t);case 4:return n=e.sent,e.next=7,dL();case 7:return e.sent.isH264DecodeSupported||(this.log_.warn("remove h264 desc from sdp"),n.sdp=Dx(n.sdp)),n.sdp=this.addRRTRLine(n.sdp),n.sdp=this.addSPSDescription(n.sdp),n.sdp=Ox(n.sdp),this.sdpSemantics_===DS&&(n.sdp=this.removeSDESDescription(n.sdp)),e.next=16,this.peerConnection_.setLocalDescription(n);case 16:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"onSubscribeResult",value:(i=a(r().mark((function e(t){var i,o,a,s,c,u,l,d=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t&&t.data||{},o=i.code,a=i.message,s=void 0===a?"":a,c=t&&t.data&&t.data.data||{},u=c.type,l=c.sdp,77393!==o){e.next=5;break}throw this.log_.error(Nk.NOT_SUPPORTED_H264DECODE),new yR({code:_R.NOT_SUPPORTED_H264,message:oO({key:fk})});case 5:if(e.prev=5,0===o){e.next=8;break}throw new yR({code:o,message:oO({key:qE,data:{errMsg:s}})});case 8:return this.log_.debug("accept remote answer: "+l),e.next=11,this.peerConnection_.setRemoteDescription({type:u,sdp:l});case 11:this.sei_&&(this.sei_.handleEncodedStreams(),this.sei_.onSEIMessage=function(e){d.emitter_.emit(PL.SEI_MESSAGE,n(n({},e),{},{userId:d.userId_}))}),this.updateSSRC(l),e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(5),this.log_.error(e.t0),e.t0;case 19:case"end":return e.stop()}}),e,this,[[5,15]])}))),function(e){return i.apply(this,arguments)})},{key:"updateSSRC",value:function(e){var t=this;try{kx(e).media.forEach((function(e){if(e.type===jT){var n=e.ssrcs.find((function(e){return e.value.includes(UC)}));n&&(t.ssrc_.audio=n.id)}else{var r=e.ssrcs.find((function(e){return e.value.includes(UC)})),i=e.ssrcs.find((function(e){return e.value.includes(GC)}));r&&(t.ssrc_.video=r.id),i&&(t.ssrc_.auxiliary=i.id)}}))}catch(uY){}}},{key:"setRemoteStream",value:function(e,t){this.remoteStreams_.set(e,t)}},{key:"getSubscribeState",value:function(){return this.subscribeState_}},{key:"getTrackState",value:function(){return this.trackState_}},{key:"getSSRC",value:function(){return this.ssrc_}},{key:"getMainStream",value:function(){return this.remoteStreams_.get(UC)}},{key:"getAuxStream",value:function(){return this.remoteStreams_.get(GC)}},{key:"getMainStreamVideoTrackId",value:function(){var e=this.getMainStream();if(e){var t=e.getVideoTrack();if(t)return t.id}return""}},{key:"getAuxStreamVideoTrackId",value:function(){var e=this.getAuxStream();if(e){var t=e.getVideoTrack();if(t)return t.id}return""}},{key:"reconnect",value:(t=a(r().mark((function e(){var t,n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===this.reconnectionTimer_){e.next=3;break}return this.log_.warn("reconnect() downlink is reconnecting, ignore current reconnection"),e.abrupt("return");case 3:if(!(this.reconnectionCount_>=30)){e.next=12;break}return this.log_.warn("SDK has tried reconnect downlink [".concat(this.userId_,"] for ").concat(30," times, but all failed, please check your network")),this.stopReconnection(),t=new yR({code:_R.DOWNLINK_RECONNECTION_FAILED,message:oO({key:BE})}),cx.logFailedEvent({userId:this.client_.getUserId(),eventType:gS,error:t}),this.addEventInternal(QR,"downlink-connection reconnect fail"),this.emitConnectionStateChangedEvent(HC),this.emitter_.emit(PL.ERROR,t),e.abrupt("return");case 12:if(this.signalChannel_.getCurrentState()===YA){e.next=16;break}return this.log_.warn("reconnect() signal channel is not connected, suspend reconnection until signal is connected"),this.signalChannel_.once(qA,this.reconnect,this),e.abrupt("return");case 16:if(this.reconnectionCount_++,this.log_.warn("reconnect() try to reconnect downlink [".concat(this.reconnectionCount_,"/").concat(30,"]")),n=pO(this.reconnectionCount_),this.reconnectionTimer_=setTimeout((function(){i.log_.warn("reconnect() downlink [".concat(i.userId_,"] reconnect timeout(").concat(n/1e3,"s), try again")),i.clearReconnectionTimer(),i.reconnect()}),n),!(this.isSDPExchanging_||this.peerConnection_&&this.peerConnection_.connectionState===JC)){e.next=22;break}return e.abrupt("return");case 22:return e.prev=22,this.closePeerConnection(),this.initialize(),e.next=27,this.connect();case 27:this.stopReconnection(),this.log_.warn("reconnect() downlink reconnect successfully"),cx.logSuccessEvent({userId:this.client_.getUserId(),eventType:gS}),this.addEventInternal(ZR,"downlink-connection reconnect success"),this.recoverSubscription(),e.next=36;break;case 34:e.prev=34,e.t0=e.catch(22);case 36:case"end":return e.stop()}}),e,this,[[22,34]])}))),function(){return t.apply(this,arguments)})},{key:"recoverSubscription",value:function(){var e=this,t=this.client_.getSubscriptionManager();t&&T(this.remoteStreams_.values()).forEach((function(n){t.hasAutoRecoveryFlag(e.userId_,n.getType())&&t.recover(n)}))}},{key:"getIsReconnecting",value:function(){return this.isReconnecting_}},{key:"getSubscribedMainStream",value:function(){var e=null;return this.isMainStreamSubscribed&&(e=this.remoteStreams_.get(UC)),e}},{key:"clearReconnectionTimer",value:function(){-1!==this.reconnectionTimer_&&(clearTimeout(this.reconnectionTimer_),this.reconnectionTimer_=-1)}},{key:"startReconnection",value:function(){var e=this.client_.getSubscriptionManager();if(e){var t,n=E(this.remoteStreams_.values());try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.getType();(i===FC&&(this.trackState_.audio||this.trackState_.video)||i===BC&&this.trackState_.auxiliary)&&e.setAutoRecoveryFlag(this.userId_,r.getType())}}catch(a){n.e(a)}finally{n.f()}}b(p(v.prototype),"startReconnection",this).call(this)}},{key:"getCurrentState",value:function(){return this.currentState_}},{key:"hasMainStream",value:function(){return this.trackState_.video||this.trackState_.audio||this.trackState_.smallVideo}},{key:"hasAuxStream",value:function(){return this.trackState_.auxiliary}}]),v}(fz),M(rW.prototype,"subscribe",[QK,eW],Object.getOwnPropertyDescriptor(rW.prototype,"subscribe"),rW.prototype),M(rW.prototype,"unsubscribe",[tW],Object.getOwnPropertyDescriptor(rW.prototype,"unsubscribe"),rW.prototype),M(rW.prototype,"exchangeSDP",[nW],Object.getOwnPropertyDescriptor(rW.prototype,"exchangeSDP"),rW.prototype),rW),sW=function(){function e(){s(this,e),this.startTime=0,this.endTime=0,this.start()}return u(e,[{key:"start",value:function(){0===this.startTime&&(this.startTime=CO())}},{key:"stop",value:function(){0===this.endTime&&(this.endTime=CO())}},{key:"getDuration",value:function(){return 0===this.endTime?CO()-this.startTime:this.endTime-this.startTime}}]),e}(),cW=function(){function e(t){s(this,e),this.client_=t.client,this.intervalId_=-1,this.statsCalculator_=t.stats,this.prevStats_=null,this.renderFreezeMap_=new Map,this.remoteStreamMap_=new Map,this.dataFreezeMap_=new Map,this.monitorFreezeData_=new Map}var t,n,i;return u(e,[{key:"installEvents",value:function(){UO.on(ID,this.handlePlayVideoStart,this),UO.on(mD,this.onVideoTrackMuted,this),UO.on(_D,this.onVideoTrackUnmuted,this),UO.on(pD,this.handleStreamStopped,this),UO.on(lD,this.handleStreamStopped,this),UO.on(iD,this.handleVideoPlaying,this)}},{key:"uninstallEvents",value:function(){UO.off(ID,this.handlePlayVideoStart,this),UO.off(mD,this.onVideoTrackMuted,this),UO.off(_D,this.onVideoTrackUnmuted,this),UO.off(pD,this.handleStreamStopped,this),UO.off(lD,this.handleStreamStopped,this),UO.off(iD,this.handleVideoPlaying,this)}},{key:"start",value:function(){var e=this;-1===this.intervalId_&&(this.installEvents(),this.intervalId_=eL.run(a(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.detectFPS();case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}}),t,null,[[0,5]])}))),{delay:1e3}))}},{key:"stop",value:function(){-1!==this.intervalId_&&(this.uninstallEvents(),eL.clearTask(this.intervalId_),this.intervalId_=-1,this.renderFreezeMap_.clear(),this.dataFreezeMap_.clear(),this.remoteStreamMap_.clear())}},{key:"onVideoTrackMuted",value:function(e){var t=e.stream;if(t.getClient()===this.client_&&t.isRemote()){var n=t.userId_,r=t.type_,i="".concat(n,"_").concat(r),o=this.dataFreezeMap_.get(i),a=new sW;o?o.durationItemList.push(a):this.dataFreezeMap_.set(i,{userId:n,type:r,durationItemList:[a],isFreezing:function(){var e=this.durationItemList[this.durationItemList.length-1];return e&&0===e.endTime}})}}},{key:"onVideoTrackUnmuted",value:function(e){var t=e.stream;if(t.getClient()===this.client_&&t.isRemote()){var n=t.userId_,r=t.type_,i="".concat(n,"_").concat(r);this.stopDataFreeze({key:i,userId:n,type:r})}}},{key:"handleStreamStopped",value:function(e){var t=e.client,n=e.stream;if(t===this.client_){var r=n.getUserId(),i=n.getType(),o="".concat(r,"_").concat(i);this.stopDataFreeze({key:o,userId:r,type:i})}}},{key:"stopDataFreeze",value:function(e){var t=e.key,n=e.userId,r=e.type,i=this.dataFreezeMap_.get(t);if(i&&i.isFreezing()){var o=i.durationItemList[i.durationItemList.length-1];o.stop();var a=o.getDuration();a>500?(cx.logEvent({eventType:"videoFrozenCount",delta:a}),this.monitorFreezeData_.set(t,{userId:n,type:r,duration:a})):i.durationItemList.pop()}}},{key:"getTotalDuration",value:function(e){return e.reduce((function(e,t){var n=t.getDuration();return e+Math.min(n,5e3)}),0)}},{key:"getStats",value:(i=a(r().mark((function e(){var t,n,i,o,a,s,c,u,l,d,p;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.client_.getConnections(),n={},i=E(t),e.prev=3,i.s();case 5:if((o=i.n()).done){e.next=20;break}if(a=I(o.value,2),s=a[0],(c=a[1]).getPeerConnection()){e.next=9;break}return e.abrupt("continue",18);case 9:return u=c.getSubscribeState(),l=c.getTrackState(),e.next=13,this.statsCalculator_.getReceiverStats(c);case 13:d=e.sent,(p={userId:d.userId,tinyId:s,hasVideo:l.video&&u.video,hasAuxiliary:l.auxiliary&&u.auxiliary,video:{framesDecoded:0},auxiliary:{framesDecoded:0}}).hasVideo&&(p.video.framesDecoded=d.video.framesDecoded),p.hasAuxiliary&&(p.auxiliary.framesDecoded=d.auxiliary.framesDecoded),n[d.userId]=p;case 18:e.next=5;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(3),i.e(e.t0);case 25:return e.prev=25,i.f(),e.finish(25);case 28:return e.abrupt("return",n);case 29:case"end":return e.stop()}}),e,this,[[3,22,25,28]])}))),function(){return i.apply(this,arguments)})},{key:"detectFPS",value:(n=a(r().mark((function e(){var t,n,i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getStats();case 2:if(t=e.sent,this.prevStats_){e.next=6;break}return this.prevStats_=t,e.abrupt("return");case 6:e.t0=r().keys(t);case 7:if((e.t1=e.t0()).done){e.next=17;break}if(n=e.t1.value,this.prevStats_[n]){e.next=11;break}return e.abrupt("continue",7);case 11:i=t[n].tinyId,o=this.client_.getMutedStates(),t[n].hasVideo&&this.prevStats_[n].hasVideo&&o.has(i)&&!o.get(i).videoMuted&&(a=t[n].video.framesDecoded-this.prevStats_[n].video.framesDecoded,this.handleRenderFreeze({userId:n,type:FC,fps:a})),t[n].hasAuxiliary&&this.prevStats_[n].hasAuxiliary&&(s=t[n].auxiliary.framesDecoded-this.prevStats_[n].auxiliary.framesDecoded,this.handleRenderFreeze({userId:n,type:BC,fps:s})),e.next=7;break;case 17:this.prevStats_=t;case 18:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"handleRenderFreeze",value:(t=a(r().mark((function e(t){var n,i,o,a,s,c,u,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.userId,i=t.fps,o=t.type,a="".concat(n,"_").concat(o),s=this.renderFreezeMap_.get(a),i<=2?(c=CO(),s&&!s.isFreeze&&(s.freezeTimeline.push({startTime:c,endTime:void 0}),s.isFreeze=!0),s||this.renderFreezeMap_.set(a,{userId:n,type:o,isFreeze:!0,freezeTimeline:[{startTime:c,endTime:void 0}],renderFreezeTotal:0})):s&&s.isFreeze&&(s.isFreeze=!1,(u=s.freezeTimeline.pop()).endTime=CO(),l=u.endTime-u.startTime,s.freezeTimeline.push(u),s.renderFreezeTotal+=Math.min(5e3,l));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"handlePlayVideoStart",value:function(e){var t=e.stream;if(t.getClient()===this.client_&&t.isRemote()&&t.hasVideo()){var n="".concat(t.getUserId(),"_").concat(t.getType());this.remoteStreamMap_.has(n)||this.remoteStreamMap_.set(n,{isPlayingFired:!1})}}},{key:"handleVideoPlaying",value:function(e){var t=e.stream;if(t.isRemote()&&t.getClient()===this.client_){var n="".concat(t.getUserId(),"_").concat(t.getType());this.remoteStreamMap_.has(n)&&(this.remoteStreamMap_.get(n).isPlayingFired=!0)}}},{key:"getDataFreezeDuration",value:function(e){var t={dataFreeze:0,count:0},n=this.dataFreezeMap_.get(e);if(n){if(n.isFreezing()){var r=n.durationItemList[n.durationItemList.length-1];r.stop(),r.getDuration()<500&&n.durationItemList.pop()}t.dataFreeze=this.getTotalDuration(n.durationItemList),t.count=n.durationItemList.length}return t}},{key:"getRenderFreezeDuration",value:function(e){var t=this.renderFreezeMap_.get(e),n=0,r=0;if(t)if(t.isFreeze){var i=CO()-t.freezeTimeline[t.freezeTimeline.length-1].startTime;n=t.renderFreezeTotal+Math.min(i,5e3),r=t.freezeTimeline.length}else n=t.renderFreezeTotal;return{renderFreeze:n,count:r}}},{key:"getMonitorFreeze",value:function(){return this.monitorFreezeData_}},{key:"isBlackStream",value:function(e){return!!this.remoteStreamMap_.has(e)&&!this.remoteStreamMap_.get(e).isPlayingFired}},{key:"resetMonitor",value:function(){this.monitorFreezeData_.clear()}}]),e}(),uW=u((function e(t){s(this,e),this.userId=t.userId,this.tinyId=t.tinyId,this.role=t.role===LC?PC:jC})),lW={exports:{}};!function(e){!function(t){function n(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function r(e,t,r,i,o,a){return n((s=n(n(t,e),n(i,a)))<<(c=o)|s>>>32-c,r);var s,c}function i(e,t,n,i,o,a,s){return r(t&n|~t&i,e,t,o,a,s)}function o(e,t,n,i,o,a,s){return r(t&i|n&~i,e,t,o,a,s)}function a(e,t,n,i,o,a,s){return r(t^n^i,e,t,o,a,s)}function s(e,t,n,i,o,a,s){return r(n^(t|~i),e,t,o,a,s)}function c(e,t){var r,c,u,l,d;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var p=1732584193,f=-271733879,h=-1732584194,g=271733878;for(r=0;r<e.length;r+=16)c=p,u=f,l=h,d=g,p=i(p,f,h,g,e[r],7,-680876936),g=i(g,p,f,h,e[r+1],12,-389564586),h=i(h,g,p,f,e[r+2],17,606105819),f=i(f,h,g,p,e[r+3],22,-1044525330),p=i(p,f,h,g,e[r+4],7,-176418897),g=i(g,p,f,h,e[r+5],12,1200080426),h=i(h,g,p,f,e[r+6],17,-1473231341),f=i(f,h,g,p,e[r+7],22,-45705983),p=i(p,f,h,g,e[r+8],7,1770035416),g=i(g,p,f,h,e[r+9],12,-1958414417),h=i(h,g,p,f,e[r+10],17,-42063),f=i(f,h,g,p,e[r+11],22,-1990404162),p=i(p,f,h,g,e[r+12],7,1804603682),g=i(g,p,f,h,e[r+13],12,-40341101),h=i(h,g,p,f,e[r+14],17,-1502002290),p=o(p,f=i(f,h,g,p,e[r+15],22,1236535329),h,g,e[r+1],5,-165796510),g=o(g,p,f,h,e[r+6],9,-1069501632),h=o(h,g,p,f,e[r+11],14,643717713),f=o(f,h,g,p,e[r],20,-373897302),p=o(p,f,h,g,e[r+5],5,-701558691),g=o(g,p,f,h,e[r+10],9,38016083),h=o(h,g,p,f,e[r+15],14,-660478335),f=o(f,h,g,p,e[r+4],20,-405537848),p=o(p,f,h,g,e[r+9],5,568446438),g=o(g,p,f,h,e[r+14],9,-1019803690),h=o(h,g,p,f,e[r+3],14,-187363961),f=o(f,h,g,p,e[r+8],20,1163531501),p=o(p,f,h,g,e[r+13],5,-1444681467),g=o(g,p,f,h,e[r+2],9,-51403784),h=o(h,g,p,f,e[r+7],14,1735328473),p=a(p,f=o(f,h,g,p,e[r+12],20,-1926607734),h,g,e[r+5],4,-378558),g=a(g,p,f,h,e[r+8],11,-2022574463),h=a(h,g,p,f,e[r+11],16,1839030562),f=a(f,h,g,p,e[r+14],23,-35309556),p=a(p,f,h,g,e[r+1],4,-1530992060),g=a(g,p,f,h,e[r+4],11,1272893353),h=a(h,g,p,f,e[r+7],16,-155497632),f=a(f,h,g,p,e[r+10],23,-1094730640),p=a(p,f,h,g,e[r+13],4,681279174),g=a(g,p,f,h,e[r],11,-358537222),h=a(h,g,p,f,e[r+3],16,-722521979),f=a(f,h,g,p,e[r+6],23,76029189),p=a(p,f,h,g,e[r+9],4,-640364487),g=a(g,p,f,h,e[r+12],11,-421815835),h=a(h,g,p,f,e[r+15],16,530742520),p=s(p,f=a(f,h,g,p,e[r+2],23,-995338651),h,g,e[r],6,-198630844),g=s(g,p,f,h,e[r+7],10,1126891415),h=s(h,g,p,f,e[r+14],15,-1416354905),f=s(f,h,g,p,e[r+5],21,-57434055),p=s(p,f,h,g,e[r+12],6,1700485571),g=s(g,p,f,h,e[r+3],10,-1894986606),h=s(h,g,p,f,e[r+10],15,-1051523),f=s(f,h,g,p,e[r+1],21,-2054922799),p=s(p,f,h,g,e[r+8],6,1873313359),g=s(g,p,f,h,e[r+15],10,-30611744),h=s(h,g,p,f,e[r+6],15,-1560198380),f=s(f,h,g,p,e[r+13],21,1309151649),p=s(p,f,h,g,e[r+4],6,-145523070),g=s(g,p,f,h,e[r+11],10,-1120210379),h=s(h,g,p,f,e[r+2],15,718787259),f=s(f,h,g,p,e[r+9],21,-343485551),p=n(p,c),f=n(f,u),h=n(h,l),g=n(g,d);return[p,f,h,g]}function u(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function l(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function d(e){var t,n,r="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=r.charAt(t>>>4&15)+r.charAt(15&t);return i}function p(e){return unescape(encodeURIComponent(e))}function f(e){return function(e){return u(c(l(e),8*e.length))}(p(e))}function h(e,t){return function(e,t){var n,r,i=l(e),o=[],a=[];for(o[15]=a[15]=void 0,i.length>16&&(i=c(i,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^i[n],a[n]=1549556828^i[n];return r=c(o.concat(l(t)),512+8*t.length),u(c(a.concat(r),640))}(p(e),p(t))}function g(e,t,n){return t?n?h(t,e):d(h(t,e)):n?f(e):d(f(e))}e.exports?e.exports=g:t.md5=g}(k)}(lW);var dW,pW,fW=lW.exports,hW=function(){function e(t){s(this,e),this.client_=t.client,this.signalChannel_=t.signalChannel,this.log_=PD.createLogger({id:"mix|"+this.client_.getUserId(),userId:t.client.getUserId(),sdkAppId:t.client.getSDKAppId()}),this.isMixing_=!1,this.config_=null,this.data_=null,this.remoteStreamMap_=new Map,this.installEvents()}var t,n,i,o;return u(e,[{key:"isPresetLayoutMode",get:function(){return this.config_&&this.config_.mode===RS.PRESET_LAYOUT}},{key:"installEvents",value:function(){UO.on(uD,this.onStreamSubscribed,this),UO.on(lD,this.onStreamUnsubscribed,this),this.client_.on("stream-removed",this.onStreamRemoved,this)}},{key:"uninstallEvents",value:function(){UO.off(uD,this.onStreamSubscribed,this),UO.off(lD,this.onStreamUnsubscribed,this),this.client_.off("stream-removed",this.onStreamRemoved,this)}},{key:"reset",value:function(){this.uninstallEvents(),this.isMixing_=!1,this.config_=null}},{key:"onStreamSubscribed",value:function(e){var t=e.client,n=e.stream;t===this.client_&&(this.remoteStreamMap_.set(n.getId(),{remoteStream:n,isUsed:!1}),this.isMixing_&&this.hasAvailablePlaceHolder()&&this.startMixTranscode(this.config_))}},{key:"onStreamUnsubscribed",value:function(e){var t=e.client,n=e.stream;t===this.client_&&this.onStreamRemoved({stream:n})}},{key:"onStreamRemoved",value:function(e){var t=e.stream;if(this.remoteStreamMap_.has(t.getId())){var n=this.remoteStreamMap_.get(t.getId()).isUsed;this.remoteStreamMap_.delete(t.getId()),this.isMixing_&&this.isPresetLayoutMode&&n&&this.startMixTranscode(this.config_)}}},{key:"startMixTranscode",value:(o=a(r().mark((function e(t){var n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.resetIsUsedFlag(),this.config_=t,n=this.getInputParam(t,this.remoteStreamMap_),i=this.getOutputParam(t),o=this.getOutputSessionId({config:t,roomId:this.client_.getRoomId(),userId:this.client_.getUserId()}),!this.isMixing_||!this.data_||o===this.data_.outputSessionId){e.next=10;break}return this.log_.info("startMixTranscode() streamId changed, stop mixing before start"),e.next=10,this.doStopMixTranscode();case 10:return e.next=12,this.doStartMixTranscode({outputSessionId:o,inputParam:n,outputParam:i});case 12:e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(0),this.resetIsUsedFlag(),e.t0;case 18:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(e){return o.apply(this,arguments)})},{key:"doStartMixTranscode",value:(i=a(r().mark((function e(t){var n,i,o,a,s,c,u,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.outputSessionId,i=t.inputParam,o=t.outputParam,a={roomId:String(this.client_.getRoomId()),mcuRequestTime:Date.now(),outputSessionId:n,inputParam:i,outputParam:o},this.data_=a,this.log_.info("startMixTranscode: ".concat(JSON.stringify(a))),this.isMixing_=!0,e.prev=5,e.next=8,this.signalChannel_.sendWaitForResponse({command:fR,data:a,timeout:5e3,responseCommand:XA.START_MIX_TRANSCODE_RES,commandDesc:"startMixTranscode"});case 8:if(s=e.sent,c=s.data,u=c.code,l=c.message,0===u){e.next=15;break}throw-102083===u&&(l="Please enable relayed-push in ".concat(cE," and try later, refer to ").concat(lE,"tutorial-26-advanced-publish-cdn-stream.html")),this.log_.error("startMixTranscode failed, errCode: ".concat(u," errMsg: ").concat(l)),this.isMixing_=!1,new yR({code:_R.START_MIX_TRANSCODE_FAILED,message:oO({key:KM,data:{message:l},link:{className:"Client",fnName:"startMixTranscode"}})});case 15:e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(5),this.isMixing_=!1,e.t0;case 21:case"end":return e.stop()}}),e,this,[[5,17]])}))),function(e){return i.apply(this,arguments)})},{key:"reStartMixTranscode",value:function(){this.isMixing_&&this.startMixTranscode(this.config_)}},{key:"stopMixTranscode",value:(n=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isMixing_){e.next=2;break}throw new yR({code:_R.INVALID_OPERATION,message:oO({key:YM})});case 2:return e.next=4,this.doStopMixTranscode();case 4:this.resetIsUsedFlag();case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"doStopMixTranscode",value:(t=a(r().mark((function e(){var t,n,i,o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={mcuRequestTime:Date.now(),outputSessionId:this.data_.outputSessionId,streamType:this.data_.outputParam.streamType},this.log_.info("stopMixTranscode: ".concat(JSON.stringify(t))),e.next=4,this.signalChannel_.sendWaitForResponse({command:hR,data:t,timeout:5e3,responseCommand:XA.STOP_MIX_TRANSCODE_RES,commandDesc:"stopMixTranscode"});case 4:if(n=e.sent,i=n.data,o=i.code,a=i.message,0!==o){e.next=10;break}this.isMixing_=!1,e.next=12;break;case 10:throw this.log_.error("stopMixTranscode failed, errCode: ".concat(o," errMsg: ").concat(a)),new yR({code:_R.STOP_MIX_TRANSCODE_FAILED,message:oO({key:WM,data:{message:a},link:{className:"Client",fnName:"stopMixTranscode"}})});case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getOutputSessionId",value:function(e){var t=e.config,n=e.userId,r=e.roomId;return gO(t.streamId)&&t.streamId.length>0?t.streamId:fW("".concat(r,"_").concat(n,"_main"))}},{key:"getInputParam",value:function(e,t){var n=this,r=e.mixUsers.map((function(e){return{userId:e.userId,roomId:String(e.roomId||n.client_.getRoomId()),width:e.width||0,height:e.height||0,locationX:e.locationX||0,locationY:e.locationY||0,zOrder:e.zOrder,streamType:hO(e.streamType)||e.streamType!==BC?0:1,inputType:e.pureAudio?LS.IT_PURE_AUDIO:LS.IT_AUDIO_VIDEO,renderMode:e.renderMode||0}}));return e.mode===RS.PRESET_LAYOUT&&(r.forEach((function(e){if(e.userId===xS.REMOTE){var n=T(t.values()).find((function(e){return!e.isUsed}));n&&(e.userId=n.remoteStream.getUserId(),e.streamType=n.remoteStream.getType()===BC?1:0,n.isUsed=!0)}})),r=r.filter((function(e){return e.userId!==xS.REMOTE}))),r}},{key:"getOutputParam",value:function(e){var t=e.streamId||"";return{streamId:t,streamType:t.length>0?1:0,width:hO(e.videoWidth)?640:e.videoWidth,height:hO(e.videoHeight)?480:e.videoHeight,videoBps:e.videoBitrate||0,fps:e.videoFramerate||15,gop:e.videoGOP||2,audioSampleRate:e.audioSampleRate||48e3,audioBps:e.audioBitrate||64,audioChannels:e.audioChannels||1,backgroundColor:e.backgroundColor||0,backgroundImg:e.backgroundImage||"",extraInfo:"",videoCodec:2,audioCodec:0}}},{key:"hasAvailablePlaceHolder",value:function(){return!!this.isPresetLayoutMode&&this.data_.inputParam.length!==this.config_.mixUsers.length}},{key:"resetIsUsedFlag",value:function(){this.remoteStreamMap_.forEach((function(e){return e.isUsed=!1}))}}]),e}(),gW=function(){function e(t){s(this,e),this.client_=t.client,this.signalChannel_=t.signalChannel,this.publishTencentMainStreamObj_={params_:null,streamId_:void 0,isPublishing_:!1},this.publishTencentAuxStreamObj_={params_:null,streamId_:void 0,isPublishing_:!1},this.publishGivenCDNData_=null,this.isPublishingGivenCDN_=!1}var t,n,i,o,c,l;return u(e,[{key:"setSignalChannel",value:function(e){this.signalChannel_=e.signalChannel}},{key:"getIsPublishingTencentCDN",value:function(){return this.publishTencentMainStreamObj_.isPublishing_||this.publishTencentAuxStreamObj_.isPublishing_}},{key:"getIsPublishingGivenCDN",value:function(){return this.isPublishingGivenCDN_}},{key:"generatePublishCDNStreamId",value:function(e,t){if(!e){var n="".concat(this.client_.getRoomId(),"_").concat(this.client_.getUserId(),"_").concat(t);return/^[A-Za-z\d_-]*$/.test(n)||(n=fW(n)),"".concat(this.client_.getSDKAppId(),"_").concat(n)}return e}},{key:"generatePublishCDNSessionId",value:function(e){return fW("".concat(this.client_.getRoomId(),"_").concat(this.client_.getUserId(),"_").concat(e))}},{key:"startPublishTencentCDN",value:(l=a(r().mark((function e(t){var n,i,o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.streamType===qT?(this.publishTencentAuxStreamObj_.params_=t,this.publishTencentAuxStreamObj_.isPublishing_=!0):(this.publishTencentMainStreamObj_.params_=t,this.publishTencentMainStreamObj_.isPublishing_=!0),this.client_.isJoined_){e.next=3;break}return e.abrupt("return");case 3:return n=this.generatePublishCDNStreamId(t.streamId,t.streamType),i=this.generatePublishCDNSessionId(t.streamType),o=t.streamType===qT?1:0,a={requestTime:Date.now(),sessionId:i,streamId:n,streamType:o},e.next=9,this.doStartPublishTencentCDN(a,t.streamType);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"doStartPublishTencentCDN",value:(c=a(r().mark((function e(t,n){var i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,PD.info("startPublishTencentCDN: "+JSON.stringify(t)),e.next=4,this.signalChannel_.sendWaitForResponseWithRetry({command:uR,data:t,timeout:2e3,responseCommand:XA.START_PUBLISH_TENCENT_CDN_RES,commandDesc:"startPublishCDNStream",retries:2});case 4:if(i=e.sent,o=i.data,a=o.code,s=o.message,0!==a){e.next=10;break}n===qT?this.publishTencentAuxStreamObj_.streamId_=t.streamId:this.publishTencentMainStreamObj_.streamId_=t.streamId,e.next=14;break;case 10:throw n===qT?this.publishTencentAuxStreamObj_.isPublishing_=!1:this.publishTencentMainStreamObj_.isPublishing_=!1,-102083===a&&(s="Please enable relayed-push in ".concat(cE," and try later, refer to ").concat(lE,"tutorial-26-advanced-publish-cdn-stream.html")),PD.error("startPublishTencentCDN failed, errCode: ".concat(a,", errMsg: ").concat(s)),new yR({code:_R.START_PUBLISH_CDN_FAILED,message:oO({key:_M,data:{message:s},link:{className:"Client",fnName:"startPublishCDNStream"}})});case 14:e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(0),n===qT?this.publishTencentAuxStreamObj_.isPublishing_=!1:this.publishTencentMainStreamObj_.isPublishing_=!1,e.t0;case 20:case"end":return e.stop()}}),e,this,[[0,16]])}))),function(e,t){return c.apply(this,arguments)})},{key:"resetPublishTencentParam",value:function(e){e===iC&&(this.publishTencentMainStreamObj_={params_:null,streamId_:void 0,isPublishing_:!1}),e===qT&&(this.publishTencentAuxStreamObj_={params_:null,streamId_:void 0,isPublishing_:!1})}},{key:"stopPublishTencentCDN",value:(o=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.client_.isJoined_){e.next=4;break}return this.resetPublishTencentParam(iC),this.resetPublishTencentParam(qT),e.abrupt("return");case 4:if(!this.publishTencentMainStreamObj_.isPublishing_){e.next=7;break}return e.next=7,this.doStopPublishTencentCDN(iC);case 7:if(!this.publishTencentAuxStreamObj_.isPublishing_){e.next=10;break}return e.next=10,this.doStopPublishTencentCDN(qT);case 10:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"doStopPublishTencentCDN",value:(i=a(r().mark((function e(t){var n,i,o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={requestTime:Date.now(),sessionId:fW("".concat(this.client_.getRoomId(),"_").concat(this.client_.getUserId(),"_").concat(t))},PD.info("stopPublishTencentCDN: "+JSON.stringify(n)),e.next=4,this.signalChannel_.sendWaitForResponse({command:lR,data:n,timeout:5e3,responseCommand:XA.STOP_PUBLISH_TENCENT_CDN_RES,commandDesc:"stopPublishCDNStream"});case 4:if(i=e.sent,o=i.data,a=o.code,s=o.message,0!==a){e.next=10;break}this.resetPublishTencentParam(t),e.next=17;break;case 10:if(-102069!==a){e.next=15;break}PD.warn("stopPublishTencentCDN failed, can not stopPublishTencentCDN in auto relayed-push mode"),this.resetPublishTencentParam(t),e.next=17;break;case 15:throw PD.error("stopPublishTencentCDN failed, errCode: ".concat(a," errMsg: ").concat(s)),new yR({code:_R.STOP_PUBLISH_CDN_FAILED,message:oO({key:yM,data:{message:s},link:{className:"Client",fnName:"stopPublishCDNStream"}})});case 17:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"startPublishGivenCDN",value:(n=a(r().mark((function e(t){var n,i,o,a,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.streamType===iC?this.publishTencentMainStreamObj_.streamId_:this.publishTencentAuxStreamObj_.streamId_,i={pushRequestTime:Date.now(),pushAppId:t.appId,pushBizId:t.bizId,pushCdnUrl:t.url,pushStreamType:t.streamType,pushStreamId:n},PD.info("startPublishGivenCDN: "+JSON.stringify(i)),this.publishGivenCDNData_=i,this.isPublishingGivenCDN_=!0,this.client_.isJoined_){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,e.next=10,this.signalChannel_.sendWaitForResponse({command:dR,data:i,timeout:5e3,responseCommand:XA.START_PUBLISH_GIVEN_CDN_RES,commandDesc:"startPublishCDNStream"});case 10:if(o=e.sent,a=o.data,s=a.code,c=a.message,0===s){e.next=17;break}throw PD.error("startPublishGivenCDN failed, errCode: ".concat(s,", errMsg: ").concat(c)),this.publishGivenCDNData_=null,this.isPublishingGivenCDN_=!1,new yR({code:_R.START_PUBLISH_CDN_FAILED,message:oO({key:_M,data:{message:c},link:{className:"Client",fnName:"startPublishCDNStream"}})});case 17:e.next=24;break;case 19:throw e.prev=19,e.t0=e.catch(7),this.publishGivenCDNData_=null,this.isPublishingGivenCDN_=!1,e.t0;case 24:case"end":return e.stop()}}),e,this,[[7,19]])}))),function(e){return n.apply(this,arguments)})},{key:"stopPublishGivenCDN",value:(t=a(r().mark((function e(){var t,n,i,o,a,s,c,u,l,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.client_.isJoined_){e.next=4;break}return this.publishGivenCDNData_=null,this.isPublishingGivenCDN_=!1,e.abrupt("return");case 4:return t=this.publishGivenCDNData_,n=t.pushAppId,i=t.pushBizId,o=t.pushCdnUrl,a=t.pushStreamType,s={pushRequestTime:Date.now(),pushAppId:n,pushBizId:i,pushCdnUrl:o,pushStreamType:a},PD.info("stopPublishGivenCDN: "+JSON.stringify(s)),e.next=9,this.signalChannel_.sendWaitForResponse({command:pR,data:s,timeout:5e3,responseCommand:XA.STOP_PUBLISH_GIVEN_CDN_RES,commandDesc:"stopPublishCDNStream"});case 9:if(c=e.sent,u=c.data,l=u.code,d=u.message,0!==l){e.next=16;break}this.publishGivenCDNData_=null,this.isPublishingGivenCDN_=!1,e.next=18;break;case 16:throw PD.error("stopPublishGivenCDN failed, errCode: ".concat(l," errMsg: ").concat(d)),new yR({code:_R.STOP_PUBLISH_CDN_FAILED,message:oO({key:yM,data:{message:d},link:{className:"Client",fnName:"stopPublishCDNStream"}})});case 18:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"handleCDNConfigForJoinData",value:function(e){var t,n=e;if(this.publishTencentMainStreamObj_.isPublishing_||this.publishTencentAuxStreamObj_.isPublishing_){var r={};gO(n)&&(r=JSON.parse(n)),r.Str_uc_params||(r.Str_uc_params={}),this.publishTencentMainStreamObj_.isPublishing_&&(this.publishTencentMainStreamObj_.streamId_?r.Str_uc_params.userdefine_streamid_main=this.publishTencentMainStreamObj_.streamId_:this.publishTencentMainStreamObj_.params_&&(r.Str_uc_params.userdefine_streamid_main=this.generatePublishCDNStreamId(this.publishTencentMainStreamObj_.params_.streamId,iC))),this.publishTencentAuxStreamObj_.isPublishing_&&(this.publishTencentAuxStreamObj_.streamId_?r.Str_uc_params.userdefine_streamid_aux=this.publishTencentAuxStreamObj_.streamId_:this.publishTencentAuxStreamObj_.params_&&(r.Str_uc_params.userdefine_streamid_aux=this.generatePublishCDNStreamId(this.publishTencentAuxStreamObj_.params_.streamId,qT))),n=JSON.stringify(r)}if(this.isPublishingGivenCDN_){var i=this.publishGivenCDNData_,o=i.pushAppId,a=i.pushBizId,s=i.pushCdnUrl,c=i.pushStreamType,u=i.pushStreamId;t={pushRequestTime:Date.now(),pushAppId:o,pushBizId:a,pushCdnUrl:s,pushStreamType:c,pushStreamId:u}}return{bussinessInfo:n,pushUserCdnInfo:t}}},{key:"reset",value:function(){this.resetPublishTencentParam(iC),this.resetPublishTencentParam(qT),this.publishGivenCDNData_=null,this.isPublishingGivenCDN_=!1}}]),e}(),vW=function(){function e(t){s(this,e),this.client_=t.client,this.durationMap_=new Map,this.installEvents()}return u(e,[{key:"installEvents",value:function(){UO.on(uD,this.handleSubscribed,this),UO.on(aD,this.handleStreamTrackUpdated,this),UO.on(lD,this.handleStreamStopped,this),UO.on(pD,this.handleStreamStopped,this)}},{key:"uninstallEvents",value:function(){UO.off(uD,this.handleSubscribed,this),UO.off(aD,this.handleStreamTrackUpdated,this),UO.off(lD,this.handleStreamStopped,this),UO.off(pD,this.handleStreamStopped,this)}},{key:"handleSubscribed",value:function(e){var t=e.client,n=e.stream;if(t===this.client_){var r=n.getUserId(),i=n.getType(),o="".concat(r,"_").concat(i);if(n.hasAudio())if(n.isMainAudioSubscribed){var a=new sW,s=this.durationMap_.get(o);s?this.isRecording(s.audio)||s.audio.push(a):this.durationMap_.set(o,{userId:r,type:i,audio:[a],video:[]})}else this.stopDurationItem(o,jT);if(n.hasVideo())if(i===FC&&n.isMainVideoSubscribed||i===BC&&n.isAuxVideoSubscribed){var c=new sW,u=this.durationMap_.get(o);u?this.isRecording(u.video)||u.video.push(c):this.durationMap_.set(o,{userId:r,type:i,audio:[],video:[c]})}else this.stopDurationItem(o,UT)}}},{key:"handleStreamStopped",value:function(e){var t=e.client,n=e.stream;if(this.clientHitTest(t)){var r=n.getUserId(),i=n.getType(),o="".concat(r,"_").concat(i);this.stopDurationItem(o,jT),this.stopDurationItem(o,UT)}}},{key:"handleStreamTrackUpdated",value:function(e){var t=e.client,n=e.userId,r=e.tinyId,i=e.kind,o=e.action;if(this.clientHitTest(t)&&this.client_.getConnections().has(r)){var a=i===BT?i:FC,s="".concat(n,"_").concat(a);if(o===VS.ADD){var c=this.client_.getConnections().get(r).getSubscribeState();if(i===jT&&!c.audio||i===UT&&!c.video||i===BT&&!c.auxiliary)return;var u=new sW,l=this.durationMap_.get(s);l?(i!==jT||this.isRecording(l.audio)||l.audio.push(u),i===jT||this.isRecording(l.video)||l.video.push(u)):this.durationMap_.set(s,{userId:n,type:a,audio:i===jT?[u]:[],video:i===jT?[]:[u]})}else this.stopDurationItem(s,i===jT?jT:UT)}}},{key:"isRecording",value:function(e){return e.findIndex((function(e){return 0===e.endTime}))>=0}},{key:"stopDurationItem",value:function(e,t){if(this.durationMap_.has(e)){var n=this.durationMap_.get(e)[t].find((function(e){return 0===e.endTime}));n&&n.stop()}}},{key:"clientHitTest",value:function(e){return this.client_===e}},{key:"getDuration",value:function(e,t){return this.durationMap_.has(e)?this.durationMap_.get(e)[t].reduce((function(e,t){return e+t.getDuration()}),0):0}},{key:"getDurationMap",value:function(){return this.durationMap_}},{key:"reset",value:function(){this.durationMap_.clear()}},{key:"destroy",value:function(){this.client_=null,this.uninstallEvents()}}]),e}(),mW=Ei,_W=A,yW=Bc.f;mW({target:"Object",stat:!0,forced:_W((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:yW});var bW=5e3,IW={msg_user_info:0,uint32_video_avg_fps:0,uint32_video_width:0,uint32_video_height:0,uint32_video_avg_bitrate:0,uint32_video_block_time:0,uint32_video_play_time:0,uint32_audio_block_time:0,uint32_audio_play_time:0,uint32_audio_play_db:0,uint32_avg_down_loss:0,uint32_stream_type:0,uint32_video_render_first:0,uint32_video_block_count:0,uint32_audio_block_count:0,uint32_audio_bitrate:0,uint32_video_black_screen_subjective:0,uint32_audio_recv_bitrate:0,uint32_video_external_block_time:0},TW=u((function e(t){s(this,e),this.str_identifier=String(t.userId),this.uint64_tinyid=Number(t.tinyId),this.uint32_role=t.role})),CW=(dW=Nz({timeout:500,retries:3}),pW=function(){function e(t){var n=this;s(this,e),this.frameWorkType_=t.frameWorkType||30,this.component_=t.component||0,this.client_=t.client,this.keyPrefix_="key_point",this.storageKey_="".concat(this.keyPrefix_,"_").concat(this.client_.getUserId()),this.log_=PD.createLogger({id:"kpm|"+this.client_.getUserId(),userId:this.client_.getUserId(),sdkAppId:this.client_.getSDKAppId()}),Object.getOwnPropertyNames(this.__proto__).forEach((function(e){e.startsWith("handle")&&fO(n[e])&&(n[e]=function(e){var t=e.fn,n=e.context;return a(r().mark((function e(){var i,o,a,s=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,i=s.length,o=new Array(i),a=0;a<i;a++)o[a]=s[a];return e.next=4,t.apply(n||this,o);case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(0),PD.error("".concat(t.name,"() error observed ")+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})))}({fn:n[e],context:n}))})),this.initData(),this.installEvents(),this.intervalId_=eL.run(_E,this.setStorage.bind(this),{delay:2e4})}var t,i,o;return u(e,[{key:"initData",value:function(){this.firstPublishedUserList_=[],this.networkQuality_={totalUplinkRTT:0,totalUplinkLoss:0,count:0,totalDownlinkRTTAndLossMap:new Map},this.basicInfo={string_sdk_version:Ha,uint32_os_type:15,string_device_name:"",string_http_user_agent:navigator.userAgent,string_os_version:"",uint32_avg_rtt:0,uint32_avg_up_loss:0,uint32_scene:"live"===this.client_.getMode()?1:0,uint32_joining_duration:0,uint32_networkType:FS[uO()],uint32_framework:this.frameWorkType_,uint32_component:this.component_},this.pathJoinRoom_={uint64_start_time:0,uint64_init_audio_start_time:0,uint64_init_audio_end_time:0,uint64_init_camera_start_time:0,uint64_init_camera_end_time:0,uint64_send_request_acc_ip_cmd_start_time:0,uint64_send_request_acc_ip_cmd_end_time:0,uint64_send_request_enter_room_cmd_start_time:0,uint64_send_request_enter_room_cmd_end_time:0,uint64_send_first_video_frame_time:0,uint64_recv_userlist_time:0,uint64_end_time:0,int32_init_audio_ret:0,int32_init_camera_ret:0,int32_send_request_acc_ip_cmd_ret:0,int32_send_request_enter_room_cmd_ret:0,int32_end_ret:0},this.pathLeaveRoom_={uint64_start_time:0,uint64_send_request_exit_room_cmd_start_time:0,uint64_send_request_exit_room_cmd_end_time:0,uint64_end_time:0,int32_send_request_exit_room_cmd_ret:0,int32_end_ret:0},this.pathMainVideoMap_=new Map,this.pathMainAudioMap_=new Map,this.pathAuxiliaryMap_=new Map,this.localStreamStats_={totalVideoBitrate:0,totalVideoFPS:0,totalVideoHeight:0,totalVideoWidth:0,totalAudioLevel:0,videoCount:0,audioLevelCount:0,publishStartTime:0,statsToReport:{uint32_audio_capture_db:0,uint32_video_big_capture_fps:0,uint32_video_big_bitrate:0,uint32_video_big_resolution:0}},this.remoteStreamStatsMap_=new Map}},{key:"installEvents",value:function(){UO.on(GO,this.handleJoinStart,this),UO.on($O,this.handleWSStart,this),UO.on(XO,this.handleWSEnd,this),UO.on(VO,this.handleJoinSendCMD,this),UO.on(FO,this.handleJoinReceivedCMDResponce,this),UO.on(BO,this.handleJoinSuccess,this),UO.on(qO,this.handleJoinFailed,this),UO.on(YO,this.handleReceivedPublishUserList,this),UO.on(ED,this.handleConnectionStateChanged,this),UO.on(HO,this.handleLeaveStart,this),UO.on(KO,this.handleLeaveSuccess,this),UO.on(zO,this.handleLeaveSendCMD,this),UO.on(MD,this.handleSendSubscribeCMD,this),UO.on(iD,this.handleVideoPlaying,this),UO.on(oD,this.handleAudioPlaying,this),UO.on(kD,this.handleNetworkQuality,this),UO.on(WO,this.handleHeartbeatStats,this),UO.on(sD,this.handleRemoteStreamAdded,this),UO.on(cD,this.handleRemoteStreamSubscribeStart,this),UO.on(uD,this.handleRemoteStreamSubscribed,this),UO.on(pD,this.handleRemoteStreamRemoved,this),UO.on(bD,this.handleVideoLoadedData,this),UO.on(yD,this.handlePlayStream,this),UO.on(JO,this.handlePublishStart,this),UO.on(hD,this.handleLocalStreamInitStart,this),UO.on(gD,this.handleLocalStreamInitEnd,this),UO.on(vD,this.handleLocalStreamInitFailed,this)}},{key:"uninstallEvents",value:function(){UO.off(GO,this.handleJoinStart,this),UO.off($O,this.handleWSStart,this),UO.off(XO,this.handleWSEnd,this),UO.off(VO,this.handleJoinSendCMD,this),UO.off(FO,this.handleJoinReceivedCMDResponce,this),UO.off(YO,this.handleReceivedPublishUserList,this),UO.off(ED,this.handleConnectionStateChanged,this),UO.off(HO,this.handleLeaveStart,this),UO.off(KO,this.handleLeaveSuccess,this),UO.off(BO,this.handleJoinSuccess,this),UO.off(qO,this.handleJoinFailed,this),UO.off(zO,this.handleLeaveSendCMD,this),UO.off(MD,this.handleSendSubscribeCMD,this),UO.off(iD,this.handleVideoPlaying,this),UO.off(oD,this.handleAudioPlaying,this),UO.off(kD,this.handleNetworkQuality,this),UO.off(WO,this.handleHeartbeatStats,this),UO.off(sD,this.handleRemoteStreamAdded,this),UO.off(cD,this.handleRemoteStreamSubscribeStart,this),UO.off(uD,this.handleRemoteStreamSubscribed,this),UO.off(pD,this.handleRemoteStreamRemoved,this),UO.off(bD,this.handleVideoLoadedData,this),UO.off(yD,this.handlePlayStream,this),UO.off(JO,this.handlePublishStart,this),UO.off(hD,this.handleLocalStreamInitStart,this),UO.off(gD,this.handleLocalStreamInitEnd,this),UO.off(vD,this.handleLocalStreamInitFailed,this)}},{key:"destroy",value:function(){this.uninstallEvents(),eL.clearTask(this.intervalId_),this.client_=null}},{key:"handleJoinStart",value:function(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_start_time&&(this.pathJoinRoom_.uint64_start_time=Date.now(),this.checkStorage())}},{key:"handleWSStart",value:function(e){var t=e.client;this.hitTest(t)&&0===this.pathJoinRoom_.uint64_send_request_acc_ip_cmd_start_time&&(this.pathJoinRoom_.uint64_send_request_acc_ip_cmd_start_time=Date.now())}},{key:"handleWSEnd",value:function(e){var t=e.client,n=e.error;this.hitTest(t)&&0===this.pathJoinRoom_.uint64_send_request_acc_ip_cmd_end_time&&(this.pathJoinRoom_.uint64_send_request_acc_ip_cmd_end_time=Date.now(),n&&(this.pathJoinRoom_.int32_send_request_acc_ip_cmd_ret=n instanceof yR?Number(n.getExtraCode()||n.getCode()):_R.UNKNOWN,this.pathJoinRoom_.int32_end_ret=2))}},{key:"handleJoinSendCMD",value:function(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_send_request_enter_room_cmd_start_time&&(this.pathJoinRoom_.uint64_send_request_enter_room_cmd_start_time=Date.now())}},{key:"handleJoinReceivedCMDResponce",value:function(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_send_request_enter_room_cmd_end_time&&(this.pathJoinRoom_.uint64_send_request_enter_room_cmd_end_time=Date.now(),this.pathJoinRoom_.int32_send_request_enter_room_cmd_ret=e.code,0!==e.code&&(this.pathJoinRoom_.int32_end_ret=3))}},{key:"handleJoinSuccess",value:function(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_end_time&&(this.pathJoinRoom_.uint64_end_time=Date.now(),this.pathJoinRoom_.int32_end_ret=0)}},{key:"handleJoinFailed",value:function(e){var t=e.client;this.hitTest(t)&&(this.pathJoinRoom_.uint64_end_time=Date.now(),0===this.pathJoinRoom_.int32_end_ret&&(this.pathJoinRoom_.int32_end_ret=3),this.prepareReport(),this.report())}},{key:"handleReceivedPublishUserList",value:function(e){this.hitTest(e.client)&&0===this.pathJoinRoom_.uint64_recv_userlist_time&&(this.pathJoinRoom_.uint64_recv_userlist_time=Date.now(),this.firstPublishedUserList_=e.data.data&&e.data.data.userList||[])}},{key:"handleConnectionStateChanged",value:function(e){var t=e.client,n=e.state,r=e.connection;if(this.hitTest(t)&&n===WC){this.client_.getUplinkConnection()===r&&0===this.pathJoinRoom_.uint64_send_first_video_frame_time&&this.localStreamStats_.publishStartTime>this.pathJoinRoom_.uint64_end_time&&this.localStreamStats_.publishStartTime-this.pathJoinRoom_.uint64_end_time<=100&&(this.pathJoinRoom_.uint64_send_first_video_frame_time=Date.now());var i=this.pathMainVideoMap_.get("".concat(r.getUserId(),"_").concat(FC));i&&0===i.statsToReport.uint64_pc_connected_time&&(i.statsToReport.uint64_pc_connected_time=Date.now())}}},{key:"handleLeaveStart",value:function(e){this.hitTest(e.client)&&(this.pathLeaveRoom_.uint64_start_time=Date.now())}},{key:"handleLeaveSuccess",value:function(e){this.hitTest(e.client)&&0===this.pathLeaveRoom_.uint64_end_time&&(this.pathLeaveRoom_.uint64_end_time=Date.now(),0!==this.pathJoinRoom_.uint64_end_time?this.basicInfo.uint32_joining_duration=this.pathLeaveRoom_.uint64_end_time-this.pathJoinRoom_.uint64_end_time:this.log_.warn("pathJoinRoom endTime is 0"),this.report())}},{key:"handleLeaveSendCMD",value:function(e){this.hitTest(e.client)&&(this.pathLeaveRoom_.uint64_send_request_exit_room_cmd_start_time=Date.now(),this.pathLeaveRoom_.uint64_send_request_exit_room_cmd_end_time=Date.now())}},{key:"handleRemoteStreamAdded",value:function(e){var t=e.client,r=e.stream;if(this.hitTest(t)){var i=r.getUserId(),o=r.getType(),a="".concat(i,"_").concat(o),s=this.remoteStreamStatsMap_.get(a);if(s)s.stream=r;else{var c={userId:i,totalVideoFPS:0,totalVideoBitrate:0,totalAudioLevel:0,totalAudioBitrate:0,totalLoss:0,audioCount:0,audioLevelCount:0,videoCount:0,networkQualityCount:0,streamAddedTime:Date.now(),subscribeStartTime:0,subscribedTime:0,playStreamTime:0,statsToReport:n({},IW),stream:r};c.statsToReport.msg_user_info=new TW({userId:i,tinyId:r.getTinyId(),role:LC}),c.statsToReport.uint32_stream_type=o===FC?2:7,this.remoteStreamStatsMap_.set(a,c)}}}},{key:"handleRemoteStreamSubscribeStart",value:function(e){var t=e.client,n=e.stream;if(this.hitTest(t)){var r=n.getUserId(),i=n.getType(),o="".concat(r,"_").concat(i),a=this.remoteStreamStatsMap_.get(o);a&&0===a.subscribeStartTime&&(a.subscribeStartTime=Date.now())}}},{key:"handleSendSubscribeCMD",value:function(e){if(this.hitTest(e.client)){var t=new TW(e),n=Date.now(),r="".concat(e.userId,"_").concat(FC);e.trackState.video&&e.subscribeState.video&&!this.pathMainVideoMap_.has(r)&&this.pathMainVideoMap_.set(r,{statsToReport:{msg_user_info:t,uint64_start_enter_time:this.pathJoinRoom_.uint64_start_time,uint64_render_first_frame_time:0,uint64_combine_first_frame_time:0,uint64_pc_connected_time:0},userId:e.userId,sendSubscribeCMDTime:n}),e.trackState.audio&&e.subscribeState.audio&&!this.pathMainAudioMap_.has(r)&&this.pathMainAudioMap_.set(r,{statsToReport:{msg_user_info:t,uint64_start_enter_time:this.pathJoinRoom_.uint64_start_time,uint64_play_first_frame_time:0},userId:e.userId,sendSubscribeCMDTime:n});var i="".concat(e.userId,"_").concat(BC);e.trackState.auxiliary&&e.subscribeState.auxiliary&&!this.pathAuxiliaryMap_.has(i)&&this.pathAuxiliaryMap_.set(i,{sendSubscribeCMDTime:n})}}},{key:"handleRemoteStreamSubscribed",value:function(e){var t=e.client,n=e.stream;if(this.hitTest(t)){var r=n.getUserId(),i=n.getType(),o="".concat(r,"_").concat(i),a=this.remoteStreamStatsMap_.get(o);a&&0===a.subscribedTime&&(a.subscribedTime=Date.now(),a.stream=n)}}},{key:"handleRemoteStreamRemoved",value:function(e){var t=e.client,n=e.stream;if(this.hitTest(t)){var r=n.getUserId(),i=n.getType(),o=this.remoteStreamStatsMap_.get("".concat(r,"_").concat(i));o&&(o.stream=null)}}},{key:"handlePlayStream",value:function(e){var t=e.stream;if(t.isRemote()&&t.getConnection()&&this.hitTest(t.getConnection().getClient())){var n=t.getConnection().getUserId(),r="".concat(n,"_").concat(t.getType());if(this.remoteStreamStatsMap_.has(r)){var i=this.remoteStreamStatsMap_.get(r);0===i.playStreamTime&&(i.playStreamTime=Date.now())}}}},{key:"handleVideoLoadedData",value:function(e){var t=e.stream;if(t.isRemote()&&t.getConnection()&&this.hitTest(t.getConnection().getClient())){var n=t.getConnection().getUserId(),r="".concat(n,"_").concat(t.getType());if(this.pathMainVideoMap_.has(r)){var i=this.pathMainVideoMap_.get(r);0===i.statsToReport.uint64_combine_first_frame_time&&(i.statsToReport.uint64_combine_first_frame_time=Date.now())}}}},{key:"handleVideoPlaying",value:function(e){var t=e.stream;if(t.isRemote()&&t.getConnection()&&this.hitTest(t.getConnection().getClient())){var n=t.getConnection().getUserId(),r="".concat(n,"_").concat(t.getType()),i=Date.now();if(this.pathMainVideoMap_.has(r)){var o=this.pathMainVideoMap_.get(r);if(0===o.statsToReport.uint64_render_first_frame_time&&(o.statsToReport.uint64_render_first_frame_time=i),this.remoteStreamStatsMap_.has(r)){var a=this.remoteStreamStatsMap_.get(r),s=a.statsToReport,c=a.playStreamTime,u=a.subscribedTime;0===s.uint32_video_render_first&&c-u<=100&&(s.uint32_video_render_first=i-o.sendSubscribeCMDTime)}}if(t.getType()===BC&&this.pathAuxiliaryMap_.has(r)&&this.remoteStreamStatsMap_.has(r)){var l=this.remoteStreamStatsMap_.get(r),d=l.statsToReport,p=l.playStreamTime,f=l.subscribedTime;0===d.uint32_video_render_first&&p-f<=100&&(d.uint32_video_render_first=i-this.pathAuxiliaryMap_.get(r).sendSubscribeCMDTime)}}}},{key:"handleAudioPlaying",value:function(e){if(e.stream.isRemote()&&e.stream.getConnection()&&this.hitTest(e.stream.getConnection().getClient())){var t=e.stream.getConnection().getUserId(),n="".concat(t,"_").concat(e.stream.getType());if(this.pathMainAudioMap_.has(n)){var r=this.pathMainAudioMap_.get(n);0===r.statsToReport.uint64_play_first_frame_time&&(r.statsToReport.uint64_play_first_frame_time=Date.now())}}}},{key:"handleNetworkQuality",value:function(e){var t=this;this.hitTest(e.client)&&(this.networkQuality_.totalUplinkLoss+=e.uplinkLoss,this.networkQuality_.totalUplinkRTT+=e.uplinkRTT,this.networkQuality_.count++,e.downlinkLossAndRTTMap.forEach((function(e){var n=e.rtt,r=e.loss,i=e.userId,o=t.networkQuality_.totalDownlinkRTTAndLossMap.get(i);o?(o.totalRTT+=n,o.totalLoss+=r,o.count++):t.networkQuality_.totalDownlinkRTTAndLossMap.set(i,{totalRTT:n,totalLoss:r,count:1})})))}},{key:"handleHeartbeatStats",value:function(e){var t=this;if(this.hitTest(e.client)){var n=e.stats,r=n.msg_up_stream_info,i=n.msg_down_stream_info;if(r.msg_video_status[0]){var o=r.msg_video_status[0],a=o.uint32_video_codec_bitrate,s=o.uint32_video_enc_fps,c=o.uint32_video_width,u=o.uint32_video_height;this.localStreamStats_.totalVideoBitrate+=a,this.localStreamStats_.totalVideoFPS+=s,this.localStreamStats_.totalVideoWidth+=c,this.localStreamStats_.totalVideoHeight+=u,this.localStreamStats_.videoCount++}if(r.msg_audio_status){var l=r.msg_audio_status.audioLevel;Math.floor(100*l)>0&&(this.localStreamStats_.totalAudioLevel+=l,this.localStreamStats_.audioLevelCount++)}i.forEach((function(e){var n=e.msg_user_info,r=e.msg_audio_status,i=e.msg_video_status,o=n.str_identifier;if(i.forEach((function(e){var n=2===e.uint32_video_stream_type,r=7===e.uint32_video_stream_type,i="".concat(o,"_").concat(n?FC:BC);if(t.remoteStreamStatsMap_.has(i)){var a,s,c=t.remoteStreamStatsMap_.get(i);(n&&null!==(a=c.stream)&&void 0!==a&&a.isMainVideoSubscribed||r&&null!==(s=c.stream)&&void 0!==s&&s.isAuxVideoSubscribed)&&(c.totalVideoFPS+=e.uint32_video_receive_fps,c.totalVideoBitrate+=e.uint32_video_codec_bitrate,c.videoCount++,0===c.statsToReport.uint32_video_width&&(c.statsToReport.uint32_video_width=e.uint32_video_width),0===c.statsToReport.uint32_video_height&&(c.statsToReport.uint32_video_height=e.uint32_video_height))}})),r){var a="".concat(o,"_").concat(FC);if(t.remoteStreamStatsMap_.has(a)){var s,c=t.remoteStreamStatsMap_.get(a);null!==(s=c.stream)&&void 0!==s&&s.isMainAudioSubscribed&&(c.totalAudioBitrate+=r.uint32_audio_codec_bitrate,c.audioCount++,Math.floor(100*r.audioLevel)>0&&(c.totalAudioLevel+=r.audioLevel,c.audioLevelCount++))}}}))}}},{key:"handlePublishStart",value:function(e){var t=e.client;this.hitTest(t)&&0===this.localStreamStats_.publishStartTime&&(this.localStreamStats_.publishStartTime=Date.now())}},{key:"handleLocalStreamInitStart",value:function(e){var t=e.audio,n=e.video;t&&0===this.pathJoinRoom_.uint64_init_audio_start_time&&(this.pathJoinRoom_.uint64_init_audio_start_time=Date.now()),n&&0===this.pathJoinRoom_.uint64_init_camera_start_time&&(this.pathJoinRoom_.uint64_init_camera_start_time=Date.now())}},{key:"handleLocalStreamInitEnd",value:function(e){var t=e.audio,n=e.video;t&&0===this.pathJoinRoom_.uint64_init_audio_end_time&&(this.pathJoinRoom_.uint64_init_audio_end_time=Date.now()),n&&0===this.pathJoinRoom_.uint64_init_camera_end_time&&(this.pathJoinRoom_.uint64_init_camera_end_time=Date.now())}},{key:"handleLocalStreamInitFailed",value:function(e){var t=e.audio,n=e.video,r=e.error,i=r instanceof yR?r.getExtraCode()||r.getCode():{NotFoundError:1,NotAllowedError:2,NotReadableError:3,OverConstrainedError:4,AbortError:5}[r.name]||_R.UNKNOWN;t&&0===this.pathJoinRoom_.uint64_init_audio_end_time&&(this.pathJoinRoom_.int32_init_audio_ret=i,this.pathJoinRoom_.uint64_init_audio_end_time=Date.now()),n&&0===this.pathJoinRoom_.uint64_init_camera_end_time&&(this.pathJoinRoom_.int32_init_camera_ret=i,this.pathJoinRoom_.uint64_init_camera_end_time=Date.now())}},{key:"hasVideoFlag",value:function(e){return this.firstPublishedUserList_.findIndex((function(t){return t.userId===e&&1&t.flag}))>=0}},{key:"hasAudioFlag",value:function(e){return this.firstPublishedUserList_.findIndex((function(t){return t.userId===e&&8&t.flag}))>=0}},{key:"hasAuxFlag",value:function(e){return this.firstPublishedUserList_.findIndex((function(t){return t.userId===e&&4&t.flag}))>=0}},{key:"hitTest",value:function(e){return e===this.client_}},{key:"checkStorage",value:(o=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=nL.getItem(this.storageKey_))){e.next=6;break}return e.next=5,this.upload(t);case 5:nL.deleteItem(this.storageKey_);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.log_.warn(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return o.apply(this,arguments)})},{key:"setStorage",value:function(){this.prepareReport();var e=this.getReportData();0!==e.msg_path_enter_room.uint64_start_time&&nL.setItem(this.storageKey_,e)}},{key:"prepareReport",value:function(){var e=this;if(this.networkQuality_.count>0&&(this.basicInfo.uint32_avg_rtt=Math.floor(this.networkQuality_.totalUplinkRTT/this.networkQuality_.count),this.basicInfo.uint32_avg_up_loss=Math.floor(this.networkQuality_.totalUplinkLoss/this.networkQuality_.count)),this.localStreamStats_.videoCount>0){this.localStreamStats_.statsToReport.uint32_video_big_capture_fps=Math.floor(this.localStreamStats_.totalVideoFPS/this.localStreamStats_.videoCount),this.localStreamStats_.statsToReport.uint32_video_big_bitrate=Math.floor(this.localStreamStats_.totalVideoBitrate/this.localStreamStats_.videoCount);var t=Math.floor(this.localStreamStats_.totalVideoWidth/this.localStreamStats_.videoCount),n=Math.floor(this.localStreamStats_.totalVideoHeight/this.localStreamStats_.videoCount);this.localStreamStats_.statsToReport.uint32_video_big_resolution=t<<16|n}this.localStreamStats_.audioLevelCount>0&&(this.localStreamStats_.statsToReport.uint32_audio_capture_db=Math.floor(this.localStreamStats_.totalAudioLevel/this.localStreamStats_.audioLevelCount*100)),this.remoteStreamStatsMap_.forEach((function(t,n){var r=t.userId;if(e.networkQuality_.totalDownlinkRTTAndLossMap.has(r)){var i=e.networkQuality_.totalDownlinkRTTAndLossMap.get(r),o=i.totalLoss,a=i.count;t.statsToReport.uint32_avg_down_loss=Math.floor(o/a)}t.videoCount>0&&(t.statsToReport.uint32_video_avg_fps=Math.floor(t.totalVideoFPS/t.videoCount),t.statsToReport.uint32_video_avg_bitrate=Math.floor(t.totalVideoBitrate/t.videoCount)),t.audioCount>0&&(t.statsToReport.uint32_audio_recv_bitrate=t.statsToReport.uint32_audio_bitrate=Math.floor(t.totalAudioBitrate/t.audioCount)),t.audioLevelCount>0&&(t.statsToReport.uint32_audio_play_db=Math.floor(t.totalAudioLevel/t.audioLevelCount*100));var s=e.client_.getCallDurationCalculator();s&&(t.statsToReport.uint32_audio_play_time=s.getDuration(n,jT),t.statsToReport.uint32_video_play_time=s.getDuration(n,UT)),t.statsToReport.uint32_video_render_first=Math.min(t.statsToReport.uint32_video_render_first,bW);var c=e.client_.getBadCaseDetector();if(c){var u=c.getDataFreezeDuration(n),l=u.dataFreeze,d=u.count,p=c.getRenderFreezeDuration(n).renderFreeze;t.statsToReport.uint32_video_block_count=d,t.statsToReport.uint32_video_block_time=Math.min(l,t.statsToReport.uint32_video_play_time),t.statsToReport.uint32_video_external_block_time=Math.min(p,t.statsToReport.uint32_video_play_time),c.isBlackStream(n)&&0===t.statsToReport.uint32_video_avg_fps?t.statsToReport.uint32_video_black_screen_subjective=1:t.statsToReport.uint32_video_black_screen_subjective=0}(0===t.subscribeStartTime||t.subscribeStartTime-t.streamAddedTime>100||0===t.playStreamTime)&&(e.pathMainAudioMap_.delete(n),e.pathMainVideoMap_.delete(n),t.statsToReport.uint32_video_render_first=0)})),this.pathMainAudioMap_.forEach((function(t,n){e.hasAudioFlag(t.userId)?t.statsToReport.uint64_play_first_frame_time-t.statsToReport.uint64_start_enter_time>bW&&(t.statsToReport.uint64_play_first_frame_time=t.statsToReport.uint64_start_enter_time+bW):e.pathMainAudioMap_.delete(n)})),this.pathMainVideoMap_.forEach((function(t,n){e.hasVideoFlag(t.userId)?t.statsToReport.uint64_render_first_frame_time-t.statsToReport.uint64_start_enter_time>bW&&(t.statsToReport.uint64_render_first_frame_time=t.statsToReport.uint64_start_enter_time+bW):e.pathMainVideoMap_.delete(n)})),this.pathJoinRoom_.uint64_end_time-this.pathJoinRoom_.uint64_start_time>bW&&(this.pathJoinRoom_.uint64_end_time=this.pathJoinRoom_.uint64_start_time+bW)}},{key:"getReportData",value:function(){var e=this.client_.getSignalInfo();return{uint32_sdk_app_id:Number(this.client_.getSDKAppId()),msg_user_info:new TW({userId:this.client_.getUserId(),tinyId:this.client_.getTinyId(),role:this.client_.getRole()===PC?LC:NC}),msg_basic_info:this.basicInfo,uint32_acc_ip:SO(e.relayIp),uint32_client_ip:SO(e.clientIp,"small"),uint32_acc_port:0,uint64_timestamp:Date.now(),uint32_seq:Math.floor(Math.random()*Math.pow(2,31)),msg_path_enter_room:this.pathJoinRoom_,msg_path_exit_room:this.pathLeaveRoom_,msg_path_recv_video:T(this.pathMainVideoMap_.values()).map((function(e){return e.statsToReport})),msg_quality_statistics:T(this.remoteStreamStatsMap_.values()).map((function(e){return e.statsToReport})),str_room_name:String(this.client_.getRoomId()),msg_path_recv_audio:T(this.pathMainAudioMap_.values()).map((function(e){return e.statsToReport})),uint32_info_client_ip:SO(e.clientIp,"small"),error_code:[],msg_local_statistics:this.localStreamStats_.statsToReport}}},{key:"report",value:(i=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.getReportData(),e.next=4,this.upload(t);case 4:nL.deleteItem(this.storageKey_),this.initData(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.log_.warn(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return i.apply(this,arguments)})},{key:"upload",value:(t=a(r().mark((function e(t){var n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Qw||0===t.msg_path_enter_room.uint64_start_time||[oE,aE,sE].findIndex((function(e){return e===location.host}))>=0)){e.next=2;break}return e.abrupt("return");case 2:return n=Number(this.client_.getSDKAppId()),i=cO(n,OC),e.next=6,NO({url:i,body:JSON.stringify(t)});case 6:if("ok"===(o=e.sent).data){e.next=9;break}throw"key point upload failed: ".concat(o.data);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),M(pW.prototype,"upload",[dW],Object.getOwnPropertyDescriptor(pW.prototype,"upload"),pW.prototype),pW);function SW(){return function(e,t,n){var i=n.value,o=new Set;return n.value=a(r().mark((function e(){var n,a,s,c,u=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.has(this)){e.next=2;break}throw new yR({code:_R.INVALID_OPERATION,message:oO({key:AE,data:{name:t}})});case 2:for(e.prev=2,o.add(this),n=u.length,a=new Array(n),s=0;s<n;s++)a[s]=u[s];return e.next=7,i.apply(this,a);case 7:return c=e.sent,o.delete(this),e.abrupt("return",c);case 12:throw e.prev=12,e.t0=e.catch(2),o.delete(this),e.t0;case 16:case"end":return e.stop()}}),e,this,[[2,12]])}))),n}}function EW(e){return MW.apply(this,arguments)}function MW(){return MW=a(r().mark((function e(t){var n,i,o,a,s,c,u,l,d,p,f,h,g;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,i=t.sdkAppId,o=t.useStringRoomId,a=t.roomId,s=t.userSig,c={delta:0,count:[1,1],msg:[]},e.prev=2,(u=new FormData).append("userId",String(n)),u.append("sdkAppId",String(i)),u.append("isStrGroupId",o),u.append("groupId",String(a)),u.append("sdkVersion",Ha),u.append("userSig",String(s)),ZS&&u.append("oversea",!0),l=CO(),e.next=14,AW(u,c,i);case 14:return d=e.sent,c.delta=CO()-l,kW({stat:c,userId:n}),e.abrupt("return",d);case 20:throw e.prev=20,e.t0=e.catch(2),p=yO(e.t0)?e.t0[0]:e.t0,f=vO(p.code)?p.code:0,h="get websocket url failed: ".concat(p.message.includes("timeout")?"timeout":p.message),g=new yR({code:_R.SCHEDULE_FAILED,extraCode:f,message:oO({key:eM,data:{error:h,code:f}})}),PD.error(g),kW({stat:c,userId:n,roomId:a,error:g}),g;case 29:case"end":return e.stop()}}),e,null,[[2,20]])}))),MW.apply(this,arguments)}function kW(e){var t=e.stat,n=e.userId,r=e.error;r?cx.logFailedEvent({eventType:kS,error:r,userId:n}):cx.logSuccessEvent({eventType:kS,delta:t.delta,userId:n}),cx.uploadEvent({log:"stat-schedule:"+JSON.stringify(t),userId:n})}function wW(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:iC;return t=ZS?n===iC?ZS:JS:sO(e)?n===iC?$S:XS:n===iC?YS:JS,"https://".concat(t,"/api/v1/config")}function OW(e,t,n){return new Promise((function(r,i){NO({url:e,body:t,timeout:n.timeout}).then((function(e){0===e.data.code?r(e.data.data):i({code:e.data.code,message:e.data.msg})})).catch(i)}))}var DW=function(e,t){return AD({retryFunction:OW,settings:{retries:3,timeout:0},onError:t,onRetrying:e})};function AW(e,t,n){return new Promise((function(r,i){var o,a=null;(o=[DW((function(e){return t.count[0]=e+1}),(function(e,n){t.msg[0]=e.message,a||n()}))(wW(n,iC),e,{get timeout(){return 1e3*dO(2+t.count[0])}}),DW((function(e){return t.count[1]=e+1}),(function(e,n){t.msg[1]=e.message,a||n()}))(wW(n,oC),e,{get timeout(){return 1e3*dO(2+t.count[1])}})],new Promise((function(e,t){var n=[];o.forEach((function(r){r.then(e).catch((function(e){n.push(e),n.length===o.length&&t(n)}))}))}))).then((function(e){r(a=e)})).catch(i)}))}var RW,xW,LW,NW,PW,jW,UW,GW,VW,FW,BW,qW,HW,zW,KW,WW,YW,JW,$W,XW,ZW,QW,eY,tY,nY=function(){function e(){s(this,e)}return u(e,[{key:"call",value:function(e,t){return fO(this[e])?this[e](t):Promise.reject(new yR({code:_R.INVALID_PARAMETER,message:oO({key:Tk,data:{name:e}})}))}},{key:"updatePrivateMapKey",value:function(e){var t=e.privateMapKey;return e.client.setProperty("privateMapKey",t),Promise.resolve()}}]),e}(),rY=new nY,iY=(RW=SW(),xW=Ez(Cz.CLIENT.join),LW=SW(),NW=Nz({retries:3}),PW=SW(),jW=Ez.apply(void 0,T(Cz.CLIENT.publish)),UW=SW(),GW=Ez(Cz.CLIENT.unpublish),VW=Ez.apply(void 0,T(Cz.CLIENT.subscribe)),FW=Ez(Cz.CLIENT.unsubscribe),BW=SW(),qW=Ez(Cz.CLIENT.switchRole),HW=Ez(Cz.CLIENT.startPublishCDNStream),zW=Ez(Cz.CLIENT.startMixTranscode),KW=Sz.apply(void 0,T(Cz.CLIENT.sendSEIMessage)),JW={timesInSecond:30,maxSizeInSecond:8e3,getSize:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[0].byteLength}},$W=JW.timesInSecond,XW=JW.maxSizeInSecond,ZW=JW.getSize,WW=function(e,t,n){var r=n.value,i=new Map;return UO.on(QO,(function(e){var t=e.client;return i.delete(t)})),n.value=function(){var e=i.get(this);e||(e={callCountInSecond:0,timestamp:0,totalSizeInSecond:0},i.set(this,e)),0===e.timestamp?e.timestamp=Date.now():Date.now()-e.timestamp>1e3&&(e.timestamp=Date.now(),e.callCountInSecond=0,e.totalSizeInSecond=0);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];if(ZW&&(e.totalSizeInSecond+=ZW.apply(void 0,o)),0!==e.timestamp&&Date.now()-e.timestamp<1e3&&(e.callCountInSecond>=$W||e.totalSizeInSecond>XW))throw new yR({code:_R.INVALID_OPERATION,message:oO({key:Ak,data:{isTimes:e.callCountInSecond>=$W,isSize:e.totalSizeInSecond>XW,name:t,timesInSecond:$W,maxSizeInSecond:XW}})});return e.callCountInSecond++,r.apply(this,o)},n},YW=function(){function e(t){var n,r;s(this,e),this.name_=tE,this.mode_=t.mode,this.sdpSemantics_=AS,hO(t.sdpSemantics)?function(){var e;if(hO(window.RTCRtpTransceiver))return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var t=null,n=!1;try{(t=new RTCPeerConnection({sdpSemantics:DS})).addTransceiver(jT),n=!0}catch(uY){}return null===(e=t)||void 0===e||e.close(),n}()&&(this.sdpSemantics_=DS):this.sdpSemantics_=t.sdpSemantics,this.sdkAppId_=t.sdkAppId,this.userId_=t.userId,this.log_=PD.createLogger({id:"c".concat(t.seq,"|").concat(this.userId_),userId:this.userId_,sdkAppId:this.sdkAppId_}),this.userSig_=t.userSig,this.roomId_=0,this.useStringRoomId_=t.useStringRoomId||!1,this.pureAudioPushMode_=null,this.version_=t.version,this.log_.info("using sdpSemantics: "+this.sdpSemantics_),this.signalChannel_=null,this.role_=PC,this.privateMapKey_="",this.tinyId_=0,this.env_="",this.proxy_=null,this.connections_=new Map,this.mutedStates_=new Map,this.userMap_=new Map,this.syncUserListInterval_=-1,this.localStream_=null,this.localAuxStream_=null,this.uplinkConnection_=null,this.emitter_=RO(new jO,this.name_),this.isJoined_=!1,this.heartbeat_=-1,this.lastHeartBeatTime_=-1,this.stats_=new zL(this),this.joinTimeout_=-1,this.changeBigSmallRecords_=new Map,this.networkQuality_=null,this.badCaseDetector_=null,this.networkType_=uO(),this.autoSubscribe_=!!hO(t.autoSubscribe)||t.autoSubscribe,this.joinedTimestamp_=0,this.joinOptions_={},this.basis_=(r={browser:nO().name+"/"+nO().version,os:wL(),displayResolution:OL(),isScreenShareSupported:vL(),isWebRTCSupported:aL(),isGetUserMediaSupported:DL(),isWebAudioSupported:AL(),isWebSocketsSupported:"WebSocket"in window&&2===window.WebSocket.CLOSING,isWebCodecSupported:(n={AudioDecoder:!1,AudioEncoder:!1,VideoDecoder:!1,VideoEncoder:!1,ImageDecoder:!1},hO(window.AudioDecoder)||(n.AudioDecoder=!0),hO(window.AudioEncoder)||(n.AudioEncoder=!0),hO(window.VideoDecoder)||(n.VideoDecoder=!0),hO(window.VideoEncoder)||(n.VideoEncoder=!0),hO(window.ImageDecoder)||(n.ImageDecoder=!0),n),isMediaSessionSupported:"mediaSession"in navigator&&!hO(navigator.mediaSession.setActionHandler),isWebTransportSupported:!hO(window.WebTransport)},navigator.userAgent.includes("miniProgram")&&(r.browser="mini/".concat(r.browser)),r),this.initBussinessInfo_(t),this.publishedCDN_=!1,this.publishCDNData_=null,this.mixedMCU_=!1,this.mixTranscodeData_=null,this.checkSystemResult_=null,this.enableAudioVolumeEvaluation_=!1,this.audioVolumeIntervalId_=null,this.mixTranscodeManager_=null,this.publishCDNManager_=new gW({client:this}),this.keyPointManager_=new CW({client:this,frameWorkType:t.frameWorkType,component:t.component}),this.isPublishing_=!1,this.isEnableSmallStream_=!1,this.smallStreamConfig_={bitrate:100,frameRate:15,height:120,width:160},this.turnServers_=[],this.iceTransportPolicy_=t.iceTransportPolicy,this.schedule_={domains:null,iceServers:null,iceTransportPolicy:null,trtcCapability:null},this.enableAutoPlayDialog_=!!hO(t.enableAutoPlayDialog)||t.enableAutoPlayDialog,this.enableMultiAuxStream_=!hO(t.enableMultiAuxStream)&&t.enableMultiAuxStream,this.signalInfo_={},this.enableSEI_=!hO(t.enableSEI)&&t.enableSEI,this.isDestroyed_=!1}var t,i,o,c,l,d,p,f,h,g,v,m,_,y,b,C,S,M,k,w,O,D,A,R,x,L,N;return u(e,[{key:"initBussinessInfo_",value:function(e){this.bussinessInfo_=e.bussinessInfo;var t={};if(gO(e.bussinessInfo)&&(t=JSON.parse(e.bussinessInfo)),!hO(e.pureAudioPushMode)){if(!Number.isInteger(Number(e.pureAudioPushMode)))throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:zE})});this.pureAudioPushMode_=e.pureAudioPushMode,t.Str_uc_params||(t.Str_uc_params={}),t.Str_uc_params.pure_audio_push_mod=this.pureAudioPushMode_}if(!hO(e.streamId)){if(!(gO(e.streamId)&&String(e.streamId)&&String(e.streamId).length<=64))throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:KE})});t.Str_uc_params||(t.Str_uc_params={}),t.Str_uc_params.userdefine_streamid_main=e.streamId}if(!hO(e.userDefineRecordId)){if(null===e.userDefineRecordId.match(/^[A-Za-z0-9_-]{1,64}$/gi))throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:WE})});t.Str_uc_params||(t.Str_uc_params={}),t.Str_uc_params.userdefine_record_id=e.userDefineRecordId}if(!hO(e.userDefinePushArgs)){if(!(gO(e.userDefinePushArgs)&&String(e.userDefinePushArgs)&&String(e.userDefinePushArgs).length<=256))throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:YE})});t.Str_uc_params||(t.Str_uc_params={}),t.Str_uc_params.userdefine_push_args=e.userDefinePushArgs}ax(t)||(this.bussinessInfo_=JSON.stringify(t))}},{key:"schedule",value:(N=a(r().mark((function e(t){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,EW({userId:this.userId_,sdkAppId:this.sdkAppId_,roomId:t,useStringRoomId:this.useStringRoomId_,version:this.version_,userSig:this.userSig_});case 2:(i=e.sent)&&(this.log_.info("schedule: ".concat(JSON.stringify(i))),i.trtcCapability=null==i?void 0:i.trtcAutoConf,this.schedule_=n(n({},this.schedule_),i),UO.emit(eD,this.schedule_));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return N.apply(this,arguments)})},{key:"getSignalChannelUrl",value:function(){var e={mainUrl:"",backupUrl:""},t=aO();return t?e.mainUrl=e.backupUrl="wss://".concat(t,".rtc.qq.com"):this.proxy_?e.mainUrl=e.backupUrl=this.proxy_:Array.isArray(this.schedule_.domains)&&this.schedule_.domains.length>0&&(e.mainUrl=e.backupUrl="wss://".concat(this.schedule_.domains[0]),this.schedule_.domains[1]&&(e.backupUrl="wss://".concat(this.schedule_.domains[1]))),e}},{key:"getUserId",value:function(){return this.userId_}},{key:"getUserSig",value:function(){return this.userSig_}},{key:"getRole",value:function(){return this.role_}},{key:"getSignalInfo",value:function(){return this.signalInfo_}},{key:"getRoomId",value:function(){return this.roomId_}},{key:"getSDKAppId",value:function(){return this.sdkAppId_}},{key:"getTinyId",value:function(){return this.tinyId_}},{key:"getIceTransportPolicy",value:function(){return this.iceTransportPolicy_||this.schedule_.iceTransportPolicy||"all"}},{key:"initialize",value:function(){var e=this;this.log_.info("setup signal channel");var t=this.getSignalChannelUrl(),n=t.mainUrl,r=t.backupUrl;return this.signalChannel_=new ux({sdkAppId:this.sdkAppId_,userId:this.userId_,userSig:this.userSig_,url:n,backupUrl:r,client:this}),this.networkQuality_||(this.networkQuality_=new KL({connections:this.connections_,signalChannel:this.signalChannel_,userId:this.userId_,client:this}),this.networkQuality_.on(jL.NETWORK_QUALITY,(function(t){e.emitter_.emit(jL.NETWORK_QUALITY,t)}))),this.deviceDetector_||(this.deviceDetector_=new WL({client:this})),this.subscriptionManager_||(this.subscriptionManager_=new Dz({client:this})),this.badCaseDetector_||(this.badCaseDetector_=new cW({client:this,stats:this.stats_})),this.callDurationCalculator_||(this.callDurationCalculator_=new vW({client:this})),this.mixTranscodeManager_||(this.mixTranscodeManager_=new hW({client:this,signalChannel:this.signalChannel_})),this.publishCDNManager_&&this.publishCDNManager_.setSignalChannel({signalChannel:this.signalChannel_}),this.signalChannel_.on(BA,(function(t){e.log_.info("SignalChannel state changed from ".concat(t.prevState," to ").concat(t.state)),e.emitter_.emit(jL.CONNECTION_STATE_CHANGED,t)})),this.signalChannel_.on(HA,(function(t){e.reset(),e.emitter_.emit(jL.ERROR,t)})),this.signalChannel_.once(VA,(function(t){e.tinyId_=t.signalInfo.tinyId,UO.emit(XO,{client:e})})),this.signalChannel_.on(XA.PEER_JOIN,this.onPeerJoin,this),this.signalChannel_.on(XA.PEER_LEAVE,this.onPeerLeave,this),this.signalChannel_.on(XA.UPDATE_REMOTE_MUTE_STAT,(function(t){Date.now()-e.lastHeartBeatTime_>=1e4&&e.doHeartbeat(),UO.emit(YO,{client:e,data:t.data}),e.onPublishedUserList(t.data),e.onUpdateRemoteMuteStat(t.data)})),this.signalChannel_.on(XA.CLIENT_BANNED,(function(t){var n,r=t.data.data.reason;if(cx.uploadEvent({log:"stat-banned:".concat(r),userId:e.userId_}),r===aC)n="you got banned by the admin";else if(r===sC)n="duplicated userId joining the room";else if(r===uC)n="the room has been disbanded by the admin",r=r.replace("_","-");else if(r===cC)return e.log_.warn("".concat(r," last heart beat time: ").concat(e.lastHeartBeatTime_," interval: ").concat(Date.now()-e.lastHeartBeatTime_,", visibility: ").concat(document.visibilityState)),void e.reJoin();e.log_["kick"===r?"error":"info"]("user was banned because of [".concat(r,"]")),e.reset(),e.emitter_.emit(jL.CLIENT_BANNED,{reason:r,message:oO({key:hM,data:{message:n,reason:r}})||r})})),UO.emit($O,{client:this}),this.signalChannel_.connect()}},{key:"preJoin",value:(L=a(r().mark((function e(t){var n,i,o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.joinOptions_=t,e.next=3,fL();case 3:if(this.checkSystemResult_=e.sent,this.checkDestroy(),(n=aO())||(n=CC,this.proxy_&&(this.proxy_.startsWith(IC)?n=SC:this.proxy_.startsWith(TC)&&(n=EC))),this.env_=n,cx.setConfig({env:n,sdkAppId:this.sdkAppId_,userId:this.userId_,roomId:t.roomId}),this.uploadTrtcStats(),i=this.checkSystemResult_.detail,o=i.isH264EncodeSupported,a=i.isVp8EncodeSupported,aL()&&(o||a)){e.next=13;break}throw new yR({code:_R.NOT_SUPPORTED,message:oO({key:lk})});case 13:case"end":return e.stop()}}),e,this)}))),function(e){return L.apply(this,arguments)})},{key:"join",value:(x=a(r().mark((function e(t){var n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.roomId_=t.roomId,hO(t.role)||(this.role_=t.role),hO(t.privateMapKey)||(this.privateMapKey_=t.privateMapKey),n=CO(),UO.emit(GO,{client:this}),rx(this.userId_,{eventId:GR,eventDesc:"joining room",timestamp:rm(),userId:this.userId_,tinyId:this.tinyId_}),e.next=8,this.preJoin(t);case 8:return e.abrupt("return",new Promise(function(){var e=a(r().mark((function e(o,a){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.joinReject_=a,e.prev=1,i.proxy_||i.schedule_.domains){e.next=5;break}return e.next=5,i.schedule(t.roomId);case 5:return i.checkDestroy(),e.next=8,i.initialize(t);case 8:return e.next=10,i.doJoin(t);case 10:i.signalInfo_=i.signalChannel_.getSignalInfo(),UO.emit(BO,{client:i}),i.joinedTimestamp_=CO(),cx.logSuccessEvent({userId:i.userId_,eventType:rS,delta:i.joinedTimestamp_-n}),cx.logSuccessEvent({userId:i.userId_,eventType:nS}),cx.uploadEvent({log:"stat-autoplay-dialog:".concat(i.enableAutoPlayDialog_),userId:i.userId_}),cx.uploadEvent({log:"stat-conv-".concat(Qw,"-").concat(location.hostname),userId:i.userId_}),o(),e.next=26;break;case 20:e.prev=20,e.t0=e.catch(1),UO.emit(qO,{client:i,error:e.t0}),cx.logFailedEvent({userId:i.userId_,eventType:nS,error:e.t0}),i.reset(),a(e.t0);case 26:i.joinReject_=null;case 27:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t,n){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return x.apply(this,arguments)})},{key:"checkDestroy",value:function(){if(this.isDestroyed_)throw new yR({code:_R.INVALID_OPERATION,message:oO({key:zM,data:{funName:"join"}})})}},{key:"uploadTrtcStats",value:(R=a(r().mark((function e(){var t,n,i,o,a,s,c,u,l,d,p,f,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,cY.getMicrophones();case 3:i=e.sent,t=i&&i.length,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.prev=9,e.next=12,cY.getCameras();case 12:o=e.sent,n=o&&o.length,e.next=18;break;case 16:e.prev=16,e.t1=e.catch(9);case 18:a={microphone:t,camera:n},s=this.checkSystemResult_.detail,c=s.isH264EncodeSupported,u=s.isVp8EncodeSupported,l=s.isH264DecodeSupported,d=s.isVp8DecodeSupported,p={webRTC:this.basis_.isWebRTCSupported,getUserMedia:this.basis_.isGetUserMediaSupported,webSocket:this.basis_.isWebSocketsSupported,screenShare:this.basis_.isScreenShareSupported,webAudio:this.basis_.isWebAudioSupported,h264Encode:c,h264Decode:l,vp8Encode:u,vp8Decode:d},f={browser:this.basis_.browser,os:this.basis_.os,trtc:p,devices:a},h={isWebCodecSupported:this.basis_.isWebCodecSupported,isMediaSessionSupported:this.basis_.isMediaSessionSupported,isWebTransportSupported:this.basis_.isWebTransportSupported},cx.uploadEvent({log:"trtcstats-"+JSON.stringify(f),userId:this.userId_}),this.log_.info("TrtcStats-"+JSON.stringify(f)),cx.uploadEvent({log:"trtcadvancedstats-"+JSON.stringify(h),userId:this.userId_});case 26:case"end":return e.stop()}}),e,this,[[0,7],[9,16]])}))),function(){return R.apply(this,arguments)})},{key:"doJoin",value:function(e){var t=this;return new Promise((function(e,n){t.log_.info("Join() => joining room: ".concat(t.roomId_," useStringRoomId: ").concat(t.useStringRoomId_," mode: ").concat(t.mode_," role: ").concat(t.role_));var r={roomId:String(t.roomId_),useStringRoomId:t.useStringRoomId_,privateMapKey:t.privateMapKey_,trtcRole:t.role_===PC?LC:NC,trtcScene:t.mode_===xC?RC:AC,sdpSemantics:t.sdpSemantics_,version:LO(t.version_),ua:navigator&&navigator.userAgent||"",autoSubscribe:t.autoSubscribe_,terminalType:Zk?4:Jk?2:Wk?3:Ew?12:Sw?5:Mw?13:1,netType:FS[uO()],bussinessInfo:t.bussinessInfo_};if(t.publishCDNManager_){var i=t.publishCDNManager_.handleCDNConfigForJoinData(t.bussinessInfo_),o=i.bussinessInfo,a=i.pushUserCdnInfo;Object.assign(r,{bussinessInfo:o,pushUserCdnInfo:a})}t.log_.debug("join room signal data: ".concat(JSON.stringify(r))),t.joinTimeout_=setTimeout((function(){t.log_.error("join room timeout observed"),n(new yR({code:_R.JOIN_ROOM_FAILED,message:oO({key:QE})}))}),5e3),UO.emit(VO,{client:t}),t.signalChannel_.once(FA,(function(e){t.clearJoinTimeout(),UO.emit(XO,{client:t,error:e}),n(e)})),t.signalChannel_.send(eR,r),t.signalChannel_.once(XA.JOIN_ROOM_RESULT,(function(r){t.clearJoinTimeout();var i=r.data,o=i.code,a=i.message,s=i.data;t.onPublishedUserList({data:{userList:s.publishers}}),UO.emit(FO,{client:t,code:o}),0===o?(t.isJoined_=!0,t.log_.info("Join room success, start heartbeat"),t.startHeartbeat(),t.badCaseDetector_&&t.badCaseDetector_.start(),t.syncUserList(),t.startSyncUserListInterval(),e()):(t.log_.error("Join room failed result: "+o+" error: "+a),n(new yR({code:_R.JOIN_ROOM_FAILED,extraCode:o,message:oO({key:eM,data:{error:a,code:o}})})))}))}))}},{key:"reJoin",value:(A=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isJoined_){e.next=3;break}return this.log_.warn("reJoin abort"),e.abrupt("return");case 3:return this.isJoined_=!1,e.prev=4,this.log_.warn("reJoin pending: ".concat(this.joinOptions_.roomId)),this.subscriptionManager_&&this.subscriptionManager_.markAllStream(),this.signalChannel_.close(),e.next=10,this.signalChannel_.connect();case 10:return e.next=12,this.doJoin(n(n({},this.joinOptions_),{},{role:this.role_,privateMapKey:this.privateMapKey_}));case 12:this.log_.warn("reJoin success"),cx.logSuccessEvent({userId:this.userId_,eventType:iS}),this.checkConnectionsToReconnect(),this.uplinkConnection_&&!this.uplinkConnection_.getIsReconnecting()&&this.uplinkConnection_.startReconnection(),this.mixTranscodeManager_&&this.mixTranscodeManager_.reStartMixTranscode(),e.next=25;break;case 19:e.prev=19,e.t0=e.catch(4),this.log_.warn("reJoin fail "+e.t0),this.reset(),cx.logFailedEvent({userId:this.userId_,eventType:iS,error:e.t0}),this.emitter_.emit(jL.ERROR,new yR({code:_R.JOIN_ROOM_FAILED,message:oO({key:tM,data:{roomId:this.joinOptions_.roomId}})}));case 25:case"end":return e.stop()}}),e,this,[[4,19]])}))),function(){return A.apply(this,arguments)})},{key:"leave",value:(D=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return UO.emit(HO,{client:this}),rx(this.userId_,{eventId:VR,eventDesc:"leaving room",timestamp:rm(),userId:this.userId_,tinyId:this.tinyId_}),e.prev=2,e.next=5,this.doHeartbeat();case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:this.doLeave(),UO.emit(KO,{client:this}),cx.logSuccessEvent({userId:this.userId_,eventType:oS}),t=Math.floor((CO()-this.joinedTimestamp_)/1e3),cx.logSuccessEvent({userId:this.userId_,eventType:aS,delta:t});case 14:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(){return D.apply(this,arguments)})},{key:"doLeave",value:function(){this.isJoined_&&(UO.emit(zO,{client:this}),this.log_.info("leave() => leaving room"),this.signalChannel_.send(tR),this.reset())}},{key:"clearNetworkQuality",value:function(){this.networkQuality_&&(this.networkQuality_.stop(),this.networkQuality_=null)}},{key:"closeConnections",value:function(){var e=this;this.connections_.forEach((function(t){e.closeDownLink(t.getTinyId())}))}},{key:"clearJoinTimeout",value:function(){clearTimeout(this.joinTimeout_),this.joinTimeout_=-1}},{key:"destroy",value:function(){var e,t,n;if(this.isJoined_)throw this.log_.warn(Nk.INVALID_DESTROY),new yR({code:_R.INVALID_OPERATION,message:oO({key:nM})});this.isDestroyed_||(this.log_.info("destroy client"),this.joinReject_&&(this.joinReject_(new yR({code:_R.INVALID_OPERATION,message:oO({key:zM,data:{funName:"join"}})})),this.clearJoinTimeout(),this.reset()),this.off("*"),null===(e=this.callDurationCalculator_)||void 0===e||e.destroy(),null===(t=this.keyPointManager_)||void 0===t||t.destroy(),null===(n=this.deviceDetector_)||void 0===n||n.destroy(),this.callDurationCalculator_=null,this.keyPointManager_=null,this.deviceDetector_=null,this.badCaseDetector_=null,this.publishCDNManager_=null,this.isDestroyed_=!0,UO.emit(QO,{client:this}))}},{key:"reset",value:function(){this.isJoined_=!1,this.keyPointManager_&&this.keyPointManager_.prepareReport(),this.mixTranscodeManager_&&(this.mixTranscodeManager_.reset(),this.mixTranscodeManager_=null),this.publishCDNManager_&&this.publishCDNManager_.reset(),this.userMap_.clear(),this.stopSyncUserListInterval(),this.stopHeartbeat(),this.closeConnections(),this.mutedStates_.clear(),this.clearNetworkQuality(),this.badCaseDetector_&&this.callDurationCalculator_&&this.uploadAllCallStats(),this.closeUplink(),this.signalChannel_&&(this.log_.info("destroying SignalChannel"),this.signalChannel_.close(),this.signalChannel_=null),this.stats_.reset()}},{key:"startSyncUserListInterval",value:function(){-1===this.syncUserListInterval_&&(this.syncUserListInterval_=eL.run(_E,this.syncUserList.bind(this)))}},{key:"stopSyncUserListInterval",value:function(){eL.clearTask(this.syncUserListInterval_),this.syncUserListInterval_=-1}},{key:"syncUserList",value:(O=a(r().mark((function e(){var t,n=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getUserList();case 3:t=e.sent,0!==this.userMap_.size&&this.userMap_.forEach((function(e){t.findIndex((function(t){return t.userId===e.userId}))<0&&(n.log_.info("peer leave detected: ".concat(e.userId)),n.cleanUser({userId:e.userId,tinyId:e.tinyId}))})),t.forEach((function(e){var t=e.userId;n.userMap_.has(t)||t===n.userId_||(n.userMap_.set(t,e),n.emitter_.emit(jL.PEER_JOIN,{userId:t}))})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.log_.warn("sync user list failed: "+e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return O.apply(this,arguments)})},{key:"getUserList",value:function(){return this.signalChannel_?this.signalChannel_.sendWaitForResponse({command:gR,responseCommand:XA.USER_LIST_RES,enableLog:!1,timeout:2e3}).then((function(e){var t=e.data,n=t.code,r=t.message;if(0===n)return(t.data&&t.data.userList||[]).map((function(e){var t=e.userId,n=e.srcTinyId,r=e.role;return new uW({userId:t,tinyId:n,role:r})}));throw oO({key:bk,data:{signalResponse:XA.USER_LIST_RES,code:n,message:r}})})):[]}},{key:"publish",value:(w=a(r().mark((function e(t){var n,i,o,a,s,c,u,l,d=this,p=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:{isAuxiliary:!1},t.setPublishState(qS),this.isPublishing_=!0,i=CO(),UO.emit(JO,{client:this,stream:t}),o=n.isAuxiliary,a=o?BT:iC,s=t.getScreen(),this.log_.info("publish() => publishing ".concat(s?GT+" ":"").concat(a," stream ").concat(t.getId())),c=this.uplinkConnection_,e.prev=10,c||((c=new iK({userId:this.userId_,tinyId:this.tinyId_,client:this,isUplink:!0,signalChannel:this.signalChannel_,enableSEI:this.enableSEI_})).initialize(),c.on(PL.ERROR,(function(e){var t=e.getCode();t!==_R.ICE_TRANSPORT_ERROR&&(t===_R.UPLINK_RECONNECTION_FAILED&&d.closeUplink(),d.emitter_.emit(jL.ERROR,e))}))),t.setConnection(c),e.next=15,c.publish(t,o);case 15:this.log_.info("local ".concat(s?GT+" ":"").concat(a," stream is published")),this.isPublishing_=!1,o?this.localAuxStream_=t:(this.localStream_=t,this.deviceDetector_&&this.deviceDetector_.setLocalStream(this.localStream_),this.localStream_.getBeautyStatus()&&this.log_.info("beauty stream is published successfully")),t.setPublishState(HS),t.setClient(this,o),this.uplinkConnection_=c,u=CO(),l=u-i,cx.logSuccessEvent({userId:this.userId_,eventType:sS}),cx.logSuccessEvent({userId:this.userId_,eventType:cS,delta:l}),t.hasAudio()&&rx(this.userId_,{eventId:IR,eventDesc:"publish audio track",timestamp:rm(),userId:this.userId_,tinyId:this.tinyId_}),t.hasVideo()&&rx(this.userId_,{eventId:bR,eventDesc:"publish video track",timestamp:rm(),userId:this.userId_,tinyId:this.tinyId_}),this.networkQuality_&&this.networkQuality_.setUplinkConnection(this.uplinkConnection_),UO.emit(fD,{localStream:t,isAuxiliary:o,client:this}),this.notPublishWithoutH264Supported_=!1,e.next=41;break;case 32:throw e.prev=32,e.t0=e.catch(10),e.t0 instanceof yR&&e.t0.getCode()===_R.NOT_SUPPORTED_H264&&(this.notPublishWithoutH264Supported_=!0),t.setPublishState(BS),c.close(),this.log_.error("failed to publish stream "+e.t0),this.isPublishing_=!1,cx.logFailedEvent({userId:this.userId_,eventType:sS,error:e.t0}),e.t0;case 41:case"end":return e.stop()}}),e,this,[[10,32]])}))),function(e){return w.apply(this,arguments)})},{key:"unpublish",value:(k=a(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.uplinkConnection_){e.next=2;break}return e.abrupt("return");case 2:return n=t===this.localAuxStream_,i=t.getScreen(),this.log_.info("unpublish() => unpublishing local ".concat(i?GT+" ":"").concat(n?BT:iC," stream")),e.prev=5,e.next=8,this.uplinkConnection_.unpublish(t);case 8:t.setClient(null),t.setConnection(null),n?this.localAuxStream_=null:(this.localStream_=null,t.hasAudio()&&rx(this.userId_,{eventId:CR,eventDesc:"unpublish audio track",timestamp:rm(),userId:this.userId_,tinyId:this.tinyId_}),t.hasVideo()&&rx(this.userId_,{eventId:TR,eventDesc:"unpublish video track",timestamp:rm(),userId:this.userId_,tinyId:this.tinyId_})),this.localStream_||this.localAuxStream_||this.closeUplink(),cx.logSuccessEvent({userId:this.userId_,eventType:uS}),e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(5),cx.logFailedEvent({userId:this.userId_,eventType:uS,error:e.t0}),e.t0;case 19:case"end":return e.stop()}}),e,this,[[5,15]])}))),function(e){return k.apply(this,arguments)})},{key:"closeUplink",value:function(){this.uplinkConnection_&&(this.uplinkConnection_.close(),this.uplinkConnection_=null,this.networkQuality_&&this.networkQuality_.setUplinkConnection(null),this.localStream_&&(this.localStream_.setClient(null),this.localStream_.setConnection(null),this.localStream_=null),this.localAuxStream_&&(this.localAuxStream_.setClient(null),this.localAuxStream_.setConnection(null),this.localAuxStream_=null),this.deviceDetector_&&this.deviceDetector_.setLocalStream(null))}},{key:"closeDownLink",value:function(e){var t=this.connections_.get(e);t&&(t.getIsReconnecting()&&t.stopReconnection(),this.subscriptionManager_&&this.subscriptionManager_.delete(t.getUserId()),t.close(),this.connections_.delete(e),this.mutedStates_.delete(e))}},{key:"subscribe",value:(M=a(r().mark((function e(t,n){var i,o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.log_.info("subscribe() => subscribe to [".concat(t.getUserId(),"] ").concat(t.getType()," stream with options: ").concat(JSON.stringify(n))),hO(n)&&(n={audio:!0,video:!0}),hO(n.audio)&&(n.audio=!0),hO(n.smallVideo)?hO(n.video)&&(n.video=!0):n.smallVideo?hO(n.video)?(n.video=!1,n.smallVideo=!0):n.video&&(n.video=!0,delete n.smallVideo,this.log_.warn("options.video and options.smallVideo can't be both true")):hO(n.video)&&(n.video=!0,delete n.smallVideo),n.video&&this.changeBigSmallRecords_.delete(t.getUserId()),i=t.getConnection(),n.smallVideo&&(i.getTrackState().smallVideo||(this.setRemoteVideoStreamType(t,"small"),n.video=!0,delete n.smallVideo)),e.prev=7,UO.emit(cD,{client:this,stream:t}),e.next=11,i.subscribe(t,n);case 11:this.subscriptionManager_&&this.subscriptionManager_.addSubscriptionRecord(t.getUserId(),t,n),this.notSubscribeWithoutH264Supported_=!1,cx.logSuccessEvent({userId:this.userId_,eventType:lS}),e.next=24;break;case 16:throw e.prev=16,e.t0=e.catch(7),(o=e.t0 instanceof yR?e.t0.getCode():_R.UNKNOWN)===_R.NOT_SUPPORTED_H264&&(this.notSubscribeWithoutH264Supported_=!0),(a=new yR(o===_R.REMOTE_STREAM_NOT_EXIST?{code:_R.API_CALL_ABORTED,message:oO({key:xk,data:{message:e.t0.message,stream:t}})}:{code:o,message:oO({key:uM,data:{message:e.t0.message,stream:t}})})).getCode()===_R.API_CALL_ABORTED?this.log_.warn(a):this.log_.error(a),cx.logFailedEvent({userId:this.userId_,eventType:lS,error:a}),a;case 24:case"end":return e.stop()}}),e,this,[[7,16]])}))),function(e,t){return M.apply(this,arguments)})},{key:"unsubscribe",value:(S=a(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.log_.info("unsubscribe() => unsubscribe to [".concat(t.getUserId(),"] ").concat(t.getType()," stream")),e.prev=1,n=t.getConnection(),e.next=5,n.unsubscribe(t);case 5:this.subscriptionManager_&&this.subscriptionManager_.addUnsubscriptionRecord(t.getUserId(),t),UO.emit(lD,{client:this,stream:t}),cx.logSuccessEvent({userId:this.userId_,eventType:dS}),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(1),cx.logFailedEvent({userId:this.userId_,eventType:dS,error:e.t0}),e.t0;case 14:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(e){return S.apply(this,arguments)})},{key:"switchRole",value:(C=a(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.role_!==t){e.next=2;break}return e.abrupt("return");case 2:return t===jC&&this.uplinkConnection_&&this.closeUplink(),this.log_.info("switchRole() => switch role to: "+t),e.next=6,this.doSwitchRole(t);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return C.apply(this,arguments)})},{key:"doSwitchRole",value:function(e){var t,n,r=this,i={command:vR,data:{role:e===PC?LC:NC,privateMapKey:this.privateMapKey_},responseCommand:XA.SWITCH_ROLE_RES,retries:(null===(t=this.schedule_.config)||void 0===t||null===(n=t.retries)||void 0===n?void 0:n.switchRole)||1};return this.log_.info("switchRole signal data: "+JSON.stringify(i.data)),this.signalChannel_.sendWaitForResponseWithRetry(i).then((function(t){var n=t.data,i=n.code,o=n.message;if(0!==i)throw new yR({code:_R.SWITCH_ROLE_FAILED,message:oO({key:fM,data:{errMsg:o,errCode:i}})});r.role_=e})).catch((function(e){throw e instanceof yR&&e.getCode()===_R.API_CALL_TIMEOUT&&(e=new yR({code:_R.SWITCH_ROLE_FAILED,message:oO({key:pM})})),r.log_.error(e),e}))}},{key:"on",value:function(e,t,n){this.emitter_.on(e,t,n)}},{key:"off",value:function(e,t,n){"*"===e?this.emitter_.removeAllListeners():this.emitter_.off(e,t,n)}},{key:"getRemoteMutedState",value:function(){var e=this,t=[];return this.mutedStates_.forEach((function(r,i,o){var a=e.connections_.get(i);a&&t.push(n({userId:a.getUserId()},r))})),t}},{key:"getTransportStats",value:(b=a(r().mark((function e(){var t,n,i,o,a,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={rtt:0,downlinksRTT:{}},!this.uplinkConnection_){e.next=6;break}return e.next=4,this.stats_.getSenderStats(this.uplinkConnection_);case 4:n=e.sent,t.rtt=n.rtt;case 6:i=E(this.connections_),e.prev=7,i.s();case 9:if((o=i.n()).done){e.next=17;break}return(a=I(o.value,2))[0],s=a[1],e.next=13,this.stats_.getReceiverStats(s);case 13:c=e.sent,t.downlinksRTT[c.userId]=c.rtt;case 15:e.next=9;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),i.e(e.t0);case 22:return e.prev=22,i.f(),e.finish(22);case 25:return e.abrupt("return",t);case 26:case"end":return e.stop()}}),e,this,[[7,19,22,25]])}))),function(){return b.apply(this,arguments)})},{key:"getLocalAudioStats",value:(y=a(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t={})[this.userId_]={bytesSent:0,packetsSent:0},!this.uplinkConnection_){e.next=7;break}return e.next=5,this.stats_.getSenderStats(this.uplinkConnection_);case 5:n=e.sent,t[this.userId_]={bytesSent:n.audio.bytesSent,packetsSent:n.audio.packetsSent};case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"getLocalVideoStats",value:(_=a(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t={})[this.userId_]={bytesSent:0,packetsSent:0,framesEncoded:0,framesSent:0,frameWidth:0,frameHeight:0},!this.uplinkConnection_){e.next=7;break}return e.next=5,this.stats_.getSenderStats(this.uplinkConnection_);case 5:n=e.sent,t[this.userId_]={bytesSent:n.video.bytesSent,packetsSent:n.video.packetsSent,framesEncoded:n.video.framesEncoded,framesSent:n.video.framesSent,frameWidth:n.video.frameWidth,frameHeight:n.video.frameHeight};case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)})},{key:"getRemoteAudioStats",value:(m=a(r().mark((function e(){var t,n,i,o,a,s,c,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={},n=E(this.connections_),e.prev=2,n.s();case 4:if((i=n.n()).done){e.next=13;break}return(o=I(i.value,2))[0],a=o[1],s=a.getDelay(),c=s.audioDelay,e.next=9,this.stats_.getReceiverStats(a);case 9:(u=e.sent).hasAudio&&(t[u.userId]={bytesReceived:u.audio.bytesReceived,packetsReceived:u.audio.packetsReceived,packetsLost:u.audio.packetsLost,end2EndDelay:c});case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:return e.abrupt("return",t);case 22:case"end":return e.stop()}}),e,this,[[2,15,18,21]])}))),function(){return m.apply(this,arguments)})},{key:"getRemoteVideoStats",value:(v=a(r().mark((function e(){var t,n,i,o,a,s,c,u,l,d=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=d.length>0&&void 0!==d[0]?d[0]:FC,n={},i=E(this.connections_),e.prev=3,i.s();case 5:if((o=i.n()).done){e.next=15;break}return(a=I(o.value,2))[0],s=a[1],e.next=9,this.stats_.getReceiverStats(s);case 9:c=e.sent,u=s.getDelay(),l=u.videoDelay,t===FC&&c.hasVideo&&(n[c.userId]={bytesReceived:c.video.bytesReceived,packetsReceived:c.video.packetsReceived,packetsLost:c.video.packetsLost,framesDecoded:c.video.framesDecoded,frameWidth:c.video.frameWidth,frameHeight:c.video.frameHeight,end2EndDelay:l}),t===BC&&c.hasAuxiliary&&(n[c.userId]={bytesReceived:c.auxiliary.bytesReceived,packetsReceived:c.auxiliary.packetsReceived,packetsLost:c.auxiliary.packetsLost,framesDecoded:c.auxiliary.framesDecoded,frameWidth:c.auxiliary.frameWidth,frameHeight:c.auxiliary.frameHeight,end2EndDelay:l});case 13:e.next=5;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),i.e(e.t0);case 20:return e.prev=20,i.f(),e.finish(20);case 23:return e.abrupt("return",n);case 24:case"end":return e.stop()}}),e,this,[[3,17,20,23]])}))),function(){return v.apply(this,arguments)})},{key:"getSdpSemantics",value:function(){return this.sdpSemantics_}},{key:"getIceServers",value:function(){return 0===this.turnServers_.length&&this.schedule_.iceServers?this.schedule_.iceServers:this.turnServers_}},{key:"getConnections",value:function(){return this.connections_}},{key:"getMutedStates",value:function(){return this.mutedStates_}},{key:"startHeartbeat",value:function(){-1===this.heartbeat_&&(this.log_.info("startHeartbeat..."),this.heartbeat_=eL.run(_E,this.doHeartbeat.bind(this),{delay:2e3}))}},{key:"stopHeartbeat",value:function(){-1!==this.heartbeat_&&(this.log_.info("stopHeartbeat"),eL.clearTask(this.heartbeat_),this.heartbeat_=-1,this.lastHeartBeatTime_=-1)}},{key:"doHeartbeat",value:(g=a(r().mark((function e(){var t,i,o,a,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.badCaseDetector_.getMonitorFreeze(),e.next=3,this.stats_.getStatsReport({uplinkConnection:this.uplinkConnection_,downlinkConnections:this.connections_,freezeMap:i});case 3:if(o=e.sent,UO.emit(WO,{client:this,stats:o}),null===(t=this.badCaseDetector_)||void 0===t||t.resetMonitor(),this.signalChannel_){e.next=8;break}return e.abrupt("return");case 8:a=this.signalChannel_.isConnected()?ix(this.userId_):[],s=n(n({str_sdk_version:this.version_,uint64_datetime:(new Date).getTime(),msg_user_info:{str_identifier:this.userId_,uint64_tinyid:this.tinyId_},msg_device_info:{uint32_terminal_type:15,str_device_name:navigator.platform,str_os_version:"",uint32_net_type:FS[this.networkType_]}},o),{},{msg_event_msg:a}),this.signalChannel_.send(nR,s),c=Date.now(),this.lastHeartBeatTime_>0&&c-this.lastHeartBeatTime_>1e4&&this.log_.warn("heartbeat took ".concat(c-this.lastHeartBeatTime_)),this.lastHeartBeatTime_=c,!this.isRelayChanged_&&this.isRelayMaybeFailed()&&(this.reJoin(),this.isRelayChanged_=!0);case 15:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"onRemoteStreamAdded",value:function(e){var t=e.content,n=t.userId,r=t.tinyId,i=t.audio,o=t.bigVideo,a=t.auxVideo,s=t.smallVideo;if(null!==n){this.userMap_.has(n)||(this.userMap_.set(n,new uW({userId:n,tinyId:r,role:PC})),this.emitter_.emit(jL.PEER_JOIN,{userId:n}));var c=this.connections_.get(r);if(c){if(c.getIsReconnecting())return;this.log_.warn("duplicated stream-added observed, rebuild the connection"),c.close(),this.connections_.delete(r)}var u={audio:i,video:o,auxiliary:a,smallVideo:s};this.log_.info("remote peer [".concat(n,"] published stream. trackState: ").concat(JSON.stringify(u))),this.createDownlinkConnection({userId:n,tinyId:r,trackState:u})}else this.log_.warn("received null userId on stream added")}},{key:"createDownlinkConnection",value:function(e){var t=this,n=e.userId,r=e.tinyId,i=e.trackState,o=new aW({userId:n,tinyId:r,client:this,isUplink:!1,signalChannel:this.signalChannel_,autoSubscribe:this.autoSubscribe_,trackState:i,enableSEI:this.enableSEI_});this.connections_.set(r,o),this.installDownlinkEvents(o,n,r),this.autoSubscribe_?(o.initialize(),o.connect().catch((function(){!o.getMainStream()&&o.hasMainStream()&&t.initRemoteStream({type:FC,userId:n,downlinkConnection:o}),!o.getAuxStream()&&o.hasAuxStream()&&t.initRemoteStream({type:BC,userId:n,downlinkConnection:o})}))):(o.hasMainStream()&&this.initRemoteStream({type:FC,userId:n,downlinkConnection:o}),o.hasAuxStream()&&this.initRemoteStream({type:BC,userId:n,downlinkConnection:o}))}},{key:"initRemoteStream",value:function(e){var t=e.type,n=e.userId,r=e.downlinkConnection,i=new Oz({type:t,userId:n,client:this});i.setConnection(r),r.setRemoteStream(t===FC?UC:GC,i),i.setIsStreamAddedEventEmitted(!0),UO.emit(sD,{client:this,stream:i}),this.emitter_.emit(jL.STREAM_ADDED,{stream:i})}},{key:"installDownlinkEvents",value:function(e,t,n){var r=this;e.on(PL.SEI_MESSAGE,(function(e){r.emitter_.emit(jL.SEI_MESSAGE,e)})),e.on(PL.STREAM_ADDED,(function(e){e.stream.setIsStreamAddedEventEmitted(!0),UO.emit(sD,{client:r,stream:e.stream}),r.emitter_.emit(jL.STREAM_ADDED,{stream:e.stream})})),e.on(PL.STREAM_REMOVED,(function(e){r.changeBigSmallRecords_.delete(e.stream.getUserId()),e.stream.stop(),e.stream.setIsStreamAddedEventEmitted(!1),r.subscriptionManager_&&r.subscriptionManager_.deleteAutoRecoveryFlag(e.stream.getUserId(),e.stream.getType()),UO.emit(pD,{client:r,stream:e.stream}),r.emitter_.emit(jL.STREAM_REMOVED,{stream:e.stream})})),e.on(PL.STREAM_UPDATED,(function(e){UO.emit(dD,{client:r,stream:e.stream}),r.emitter_.emit(jL.STREAM_UPDATED,{stream:e.stream})})),e.on(PL.STREAM_SUBSCRIBED,(function(e){UO.emit(uD,{client:r,stream:e.stream}),r.emitter_.emit(jL.STREAM_SUBSCRIBED,{stream:e.stream})})),e.on(PL.ERROR,(function(e){var t=e.getCode();t!==_R.ICE_TRANSPORT_ERROR&&(t===_R.DOWNLINK_RECONNECTION_FAILED&&r.closeDownLink(n),r.emitter_.emit(jL.ERROR,e))}))}},{key:"onPeerJoin",value:function(e){var t=e.data.data,n=t.srcTinyId,r=t.userId,i=t.role;this.userMap_.has(r)||(this.userMap_.set(r,new uW({userId:r,tinyId:n,role:i})),this.emitter_.emit(jL.PEER_JOIN,{userId:r}))}},{key:"onPeerLeave",value:function(e){var t=e.data.data,n=t.srcTinyId,r=t.userId,i=t.reason,o=void 0===i?0:i;this.log_.info("peer leave [".concat(r,"]: ").concat(vE[o])),this.cleanUser({userId:r,tinyId:n})}},{key:"cleanUser",value:function(e){var t=e.userId,n=e.tinyId;this.userMap_.delete(t),this.closeDownLink(n),this.emitter_.emit(jL.PEER_LEAVE,{userId:t})}},{key:"onPublishedUserList",value:function(e){var t=this;try{var n=e.data.userList.map((function(e){return e.userId}));this.connections_.forEach((function(e){var r=e.getUserId(),i=e.getTinyId();n.findIndex((function(e){return e===r}))<0&&(t.log_.info("peer unpublished detected [".concat(r,"]")),t.closeDownLink(i))})),e.data.userList.forEach((function(e){var n=e.userId,r=e.srcTinyId,i=e.flag;if(n!==t.userId_){var o=!!(1&i),a=!!(8&i),s=!!(4&i),c=!!(2&i),u=t.connections_.get(r);if((c||o)&&t.checkSubscribeBigSmallVideo(u,c),u){var l=u.getTrackState(),d=l.audio,p=l.video,f=l.auxiliary,h=l.smallVideo;!p&&o&&UO.emit(aD,{client:t,tinyId:r,userId:n,action:VS.ADD,kind:UT}),!d&&a&&UO.emit(aD,{client:t,tinyId:r,userId:n,action:VS.ADD,kind:jT}),!f&&s&&UO.emit(aD,{client:t,tinyId:r,userId:n,action:VS.ADD,kind:BT}),!h&&c&&UO.emit(aD,{client:t,tinyId:r,userId:n,action:VS.ADD,kind:HT}),p&&!o&&UO.emit(aD,{client:t,tinyId:r,userId:n,action:VS.REMOVE,kind:UT}),d&&!a&&UO.emit(aD,{client:t,tinyId:r,userId:n,action:VS.REMOVE,kind:jT}),f&&!s&&UO.emit(aD,{client:t,tinyId:r,userId:n,action:VS.REMOVE,kind:BT}),h&&!c&&UO.emit(aD,{client:t,tinyId:r,userId:n,action:VS.REMOVE,kind:HT})}else t.log_.info("peer published detected [".concat(n,"]")),t.onRemoteStreamAdded({content:{audio:a,bigVideo:o,auxVideo:s,smallVideo:c,userId:n,tinyId:r}})}}))}catch(uY){}}},{key:"onUpdateRemoteMuteStat",value:function(e){var t=this,n=e.data;(n&&n.userList||[]).forEach((function(e){var n=e.srcTinyId,r=e.userId;if(0!==n&&n!==t.tinyId_){var i=t.connections_.get(n);if(i){var o=i.getMainStream();if(o&&o.getIsStreamAddedEventEmitted()){var a=!!(1&e.flag),s=!!(8&e.flag),c=!!(2&e.flag),u=!!(64&e.flag),l=!!(16&e.flag),d=t.mutedStates_.get(n);if(void 0===d)return t.mutedStates_.set(n,{hasAudio:s,hasVideo:a,hasSmall:c,audioMuted:u,videoMuted:l}),a?l?t.emitter_.emit(jL.MUTE_VIDEO,{userId:r}):t.emitter_.emit(jL.UNMUTE_VIDEO,{userId:r}):t.emitter_.emit(jL.MUTE_VIDEO,{userId:r}),void(s?u?t.emitter_.emit(jL.MUTE_AUDIO,{userId:r}):t.emitter_.emit(jL.UNMUTE_AUDIO,{userId:r}):t.emitter_.emit(jL.MUTE_AUDIO,{userId:r}));var p=!d.audioMuted&&d.hasAudio,f=!u&&s,h=!d.videoMuted&&d.hasVideo,g=!l&&a;t.mutedStates_.set(n,{hasAudio:s,hasVideo:a,hasSmall:c,audioMuted:u,videoMuted:l}),p!==f&&(f?t.emitter_.emit(jL.UNMUTE_AUDIO,{userId:r}):t.emitter_.emit(jL.MUTE_AUDIO,{userId:r})),h!==g&&(g?t.emitter_.emit(jL.UNMUTE_VIDEO,{userId:r}):t.emitter_.emit(jL.MUTE_VIDEO,{userId:r}))}}else t.mutedStates_.delete(n)}}))}},{key:"getEnv",value:function(){return this.env_}},{key:"getSubscriptionManager",value:function(){return this.subscriptionManager_}},{key:"startPublishCDNStream",value:(h=a(r().mark((function e(){var t,n=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:{},this.log_.info("startPublishCDNStream with params: ".concat(JSON.stringify(t),"; isJoined: ").concat(this.isJoined_,"; hasMainStream: ").concat(!!this.localStream_,"; hasAuxStream: ").concat(!!this.localAuxStream_,";")),t.streamType=t.streamType||iC,t.streamType===BT&&(t.streamType=qT),t.streamId=t.streamId||"",!this.isJoined_){e.next=10;break}if(t.streamType!==iC||this.localStream_){e.next=8;break}throw new yR({code:_R.INVALID_OPERATION,message:oO({key:gM})});case 8:if(t.streamType!==qT||this.localAuxStream_){e.next=10;break}throw new yR({code:_R.INVALID_OPERATION,message:oO({key:gM})});case 10:return e.next=12,this.publishCDNManager_.startPublishTencentCDN(t);case 12:if(!(t.appId&&t.bizId&&t.url)){e.next=15;break}return e.next=15,this.publishCDNManager_.startPublishGivenCDN(t);case 15:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"stopPublishCDNStream",value:(f=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.publishCDNManager_.getIsPublishingTencentCDN()){e.next=2;break}throw new yR({code:_R.INVALID_OPERATION,message:oO({key:vM})});case 2:return this.log_.info("stopPublishCDNStream"),e.next=5,this.publishCDNManager_.stopPublishTencentCDN();case 5:if(!this.publishCDNManager_.getIsPublishingGivenCDN()){e.next=8;break}return e.next=8,this.publishCDNManager_.stopPublishGivenCDN();case 8:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"startMixTranscode",value:(p=a(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isJoined_&&this.mixTranscodeManager_){e.next=2;break}throw new yR({code:_R.INVALID_OPERATION,message:oO({key:bM})});case 2:return hO(t.mode)&&(t.mode=RS.MANUAL),e.prev=3,this.log_.info("startMixTranscode with config ".concat(JSON.stringify(t))),cx.uploadEvent({log:"mix-transcode-mode:".concat(t.mode),userId:this.userId_}),e.next=8,this.mixTranscodeManager_.startMixTranscode(t);case 8:cx.logSuccessEvent({userId:this.userId_,eventType:SS}),e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(3),cx.logFailedEvent({userId:this.userId_,eventType:SS,error:e.t0}),e.t0;case 15:case"end":return e.stop()}}),e,this,[[3,11]])}))),function(e){return p.apply(this,arguments)})},{key:"stopMixTranscode",value:(d=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isJoined_&&this.mixTranscodeManager_){e.next=2;break}throw new yR({code:_R.INVALID_OPERATION,message:oO({key:IM})});case 2:return e.prev=2,e.next=5,this.mixTranscodeManager_.stopMixTranscode();case 5:cx.logSuccessEvent({userId:this.userId_,eventType:ES}),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),cx.logFailedEvent({userId:this.userId_,eventType:ES,error:e.t0}),e.t0;case 12:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(){return d.apply(this,arguments)})},{key:"getSystemResult",value:function(){return this.checkSystemResult_}},{key:"enableAudioVolumeEvaluation",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!vO(t))throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:TM})});if(this.log_.info("enableAudioVolumeEvaluation with interval: "+t),t<=0)return this.enableAudioVolumeEvaluation_=!1,eL.clearTask(this.audioVolumeIntervalId_),void(this.audioVolumeIntervalId_=null);t=Math.floor(Math.max(t,16)),UO.emit(tD,{interval:t}),this.audioVolumeIntervalId_&&(eL.clearTask(this.audioVolumeIntervalId_),this.audioVolumeIntervalId_=null),this.enableAudioVolumeEvaluation_=!0,this.audioVolumeIntervalId_=eL.run(yE,(function(){var t=[];if(e.localStream_){var n=Math.floor(100*e.localStream_.getAudioLevel());t.push({userId:e.userId_,audioVolume:n,stream:e.localStream_})}e.connections_.forEach((function(e){var n=e.getSubscribedMainStream();if(n){var r=Math.floor(100*n.getAudioLevel());t.push({userId:e.getUserId(),audioVolume:r,stream:n})}})),e.emitter_.emit(jL.AUDIO_VOLUME,{result:t})}),{fps:1e3/t,backgroundTask:n})}},{key:"callExperimentalAPI",value:function(e,t){return rY.call(e,n({client:this},t))}},{key:"setProperty",value:function(e,t){var n="".concat(e,"_");hO(this[n])||(this[n]=t)}},{key:"uploadAllCallStats",value:function(){var e=this;this.callDurationCalculator_.getDurationMap().forEach((function(t,n){var r={userId:t.userId,type:t.type,duration:e.callDurationCalculator_.getDuration(n,UT),dataFreeze:e.badCaseDetector_.getDataFreezeDuration(n).dataFreeze,renderFreeze:e.badCaseDetector_.getRenderFreezeDuration(n).renderFreeze};cx.uploadEvent({log:"callStats-"+JSON.stringify(r),userId:e.userId_})})),this.badCaseDetector_.stop(),this.callDurationCalculator_.reset()}},{key:"enableSmallStream",value:(l=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPublished()&&!this.isPublishing_){e.next=2;break}throw new yR({code:_R.INVALID_OPERATION,message:oO({key:CM})});case 2:if(!RL()){e.next=7;break}this.setIsEnableSmallStream(!0),this.log_.info("SmallStream successfully enabled"),e.next=8;break;case 7:throw new yR({code:_R.INVALID_OPERATION,message:oO({key:EM})});case 8:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"disableSmallStream",value:(c=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPublished()&&!this.isPublishing_){e.next=2;break}throw new yR({code:_R.INVALID_OPERATION,message:oO({key:SM})});case 2:this.setIsEnableSmallStream(!1),this.log_.info("SmallStream successfully disabled");case 4:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"setSmallStreamProfile",value:function(e){var t=this;e&&e.framerate&&(e.frameRate=e.framerate),e.width*e.height>307200&&(e.width=320,e.height=240,this.log_.info("Small stream resolution is beyond limitation, which is invalid. Reset to 320 * 240")),Object.keys(this.smallStreamConfig_).forEach((function(n){e[n]&&(t.smallStreamConfig_[n]=e[n])}));var n=this.smallStreamConfig_,r=n.width,i=n.height,o=n.bitrate,a=n.frameRate;if(this.log_.info("setSmallStreamProfile: bitrate=".concat(o,", frameRate=").concat(a,", height=").concat(i,", width=").concat(r)),r<0||i<0||o<0||a<0)throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:MM})})}},{key:"setRemoteVideoStreamType",value:(o=a(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Oz){e.next=2;break}throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:kM})});case 2:if(t.getConnection()){e.next=4;break}throw new yR({code:_R.INVALID_OPERATION,message:oO({key:cM})});case 4:if(t.getType()!==BC){e.next=6;break}return e.abrupt("return");case 6:e.t0=n,e.next=e.t0===zS||e.t0===KS?9:12;break;case 9:return e.next=11,this.changeVideoType(t,n);case 11:case 12:return e.abrupt("break",13);case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"changeVideoType",value:(i=a(r().mark((function e(t,n){var i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.getUserId(),o={stream:t,options:{video:n===zS,smallVideo:n===KS},isSubscribing:!1,reSubscribeCount:10},this.changeBigSmallRecords_.set(i,o),this.log_.info("set [".concat(i,"] ").concat(t.getType()," stream video prefer type: ").concat(n));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"checkSubscribeBigSmallVideo",value:(t=a(r().mark((function e(t,n){var i,o,a,s,c,u,l,d,p,f,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&t.isBigStreamSubscribed||null!=t&&t.isSmallStreamSubscribed){e.next=2;break}return e.abrupt("return");case 2:if(i=t.getUserId(),this.changeBigSmallRecords_.has(i)){e.next=5;break}return e.abrupt("return");case 5:if(o=this.changeBigSmallRecords_.get(i),a=t.getSubscribeState(),s=a.video,c=a.smallVideo,u=o.stream,l=o.options,d=o.isSubscribing,p=o.reSubscribeCount,!(l.video&&s||l.smallVideo&&c&&n)){e.next=10;break}return e.abrupt("return");case 10:if(f={video:l.video,smallVideo:l.smallVideo},!(n&&t.isBigStreamSubscribed||t.isSmallStreamSubscribed)){e.next=31;break}if(e.prev=12,!(l&&u&&!d&&p>=1)){e.next=24;break}return o.isSubscribing=!0,o.reSubscribeCount=p-1,h=u.getConnection(),!n&&h.isSmallStreamSubscribed&&(f={video:!0,smallVideo:!1}),f.emitEvent=!1,e.next=21,null==h?void 0:h.subscribe(u,f);case 21:this.log_.info("change [".concat(i,"] to ").concat(f.smallVideo?"small":"big"," video successfully. count ").concat(10-o.reSubscribeCount,".")),o.isSubscribing=!1,o.reSubscribeCount=10;case 24:e.next=31;break;case 26:e.prev=26,e.t0=e.catch(12),this.log_.info("change [".concat(i,"] to ").concat(f.smallVideo?"small":"big"," video failed. count ").concat(10-o.reSubscribeCount,".")),o.isSubscribing=!1,0===p&&this.changeBigSmallRecords_.delete(i);case 31:case"end":return e.stop()}}),e,this,[[12,26]])}))),function(e,n){return t.apply(this,arguments)})},{key:"setIsEnableSmallStream",value:function(e){this.isEnableSmallStream_=e}},{key:"getIsEnableSmallStream",value:function(){return this.isEnableSmallStream_}},{key:"smallStreamConfig",get:function(){return this.smallStreamConfig_}},{key:"isPublished",value:function(){return!!this.localStream_}},{key:"getUplinkConnection",value:function(){return this.uplinkConnection_}},{key:"getLocalStream",value:function(){return this.localStream_}},{key:"getMode",value:function(){return this.mode_}},{key:"getBadCaseDetector",value:function(){return this.badCaseDetector_}},{key:"getCallDurationCalculator",value:function(){return this.callDurationCalculator_}},{key:"getIsJoined",value:function(){return this.isJoined_}},{key:"getAllConnections",value:function(){var e=T(this.connections_.values());return this.uplinkConnection_&&e.push(this.uplinkConnection_),e}},{key:"isRelayMaybeFailed",value:function(){if(!this.signalChannel_.isOnline)return!1;var e=this.getAllConnections();if(0===e.length)return!1;for(var t=0;t<e.length;t++)if(e[t].getReconnectionCount()<6)return!1;return!0}},{key:"getUseStringRoomId",value:function(){return this.useStringRoomId_}},{key:"checkConnectionsToReconnect",value:function(){var e=this;this.getAllConnections().forEach((function(t){if(!t.getIsReconnecting()){var n=t.getPeerConnection();n&&n.connectionState===XC&&(e.log_.warn("[".concat(t.getUserId(),"] pc is closed but not reconnect")),t.startReconnection())}}))}},{key:"getEnableAutoPlayDialog",value:function(){return this.enableAutoPlayDialog_}},{key:"sendSEIMessage",value:function(e,t){this.uplinkConnection_.sendSEI(e,t)}},{key:"setProxyServer",value:function(e){if(this.log_.info("set proxy server: ".concat(JSON.stringify(e))),gO(e)){if(!e.startsWith("wss://"))throw new yR({code:_R.INVALID_PARAMETER,message:oO({key:JE})});this.proxy_=e}else if(lO(e)){var t=e.websocketProxy,n=e.loggerProxy,r=e.scheduleProxy;t&&(this.proxy_=t),n&&DC(n),r&&QS(r)}}},{key:"setTurnServer",value:function(e){this.log_.info("set turn server: "+JSON.stringify(e));var t=[];Array.isArray(e)?e.forEach((function(e){return t.push(TO(e))})):lO(e)&&t.push(TO(e)),this.turnServers_=t}},{key:"get2k4kFlag",value:function(){var e,t;return null===(e=this.schedule_)||void 0===e||null===(t=e.trtcCapability)||void 0===t?void 0:t["2k4k"]}}]),e}(),M(YW.prototype,"join",[RW,xW],Object.getOwnPropertyDescriptor(YW.prototype,"join"),YW.prototype),M(YW.prototype,"leave",[LW],Object.getOwnPropertyDescriptor(YW.prototype,"leave"),YW.prototype),M(YW.prototype,"getUserList",[NW],Object.getOwnPropertyDescriptor(YW.prototype,"getUserList"),YW.prototype),M(YW.prototype,"publish",[PW,jW],Object.getOwnPropertyDescriptor(YW.prototype,"publish"),YW.prototype),M(YW.prototype,"unpublish",[UW,GW],Object.getOwnPropertyDescriptor(YW.prototype,"unpublish"),YW.prototype),M(YW.prototype,"subscribe",[VW],Object.getOwnPropertyDescriptor(YW.prototype,"subscribe"),YW.prototype),M(YW.prototype,"unsubscribe",[FW],Object.getOwnPropertyDescriptor(YW.prototype,"unsubscribe"),YW.prototype),M(YW.prototype,"switchRole",[BW,qW],Object.getOwnPropertyDescriptor(YW.prototype,"switchRole"),YW.prototype),M(YW.prototype,"startPublishCDNStream",[HW],Object.getOwnPropertyDescriptor(YW.prototype,"startPublishCDNStream"),YW.prototype),M(YW.prototype,"startMixTranscode",[zW],Object.getOwnPropertyDescriptor(YW.prototype,"startMixTranscode"),YW.prototype),M(YW.prototype,"sendSEIMessage",[KW,WW],Object.getOwnPropertyDescriptor(YW.prototype,"sendSEIMessage"),YW.prototype),YW),oY=0,aY=0,sY=(QW=Sz(Cz.TRTC.createClient),eY=Sz(Cz.TRTC.createStream),tY=function(){function e(){s(this,e),this.name_=eE,this.VERSION=Ha,this.Logger={loggerManager:PD,LogLevel:hE,setLogLevel:function(e){PD.setLogLevel(e),e<=1&&iO()},enableUploadLog:function(){PD.enableUploadLog()},disableUploadLog:function(){PD.warn("disableUploadLog"),PD.disableUploadLog()}}}var t,i;return u(e,[{key:"checkSystemRequirements",value:(i=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fL();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"isScreenShareSupported",value:function(){return vL()}},{key:"isSmallStreamSupported",value:function(){return RL()}},{key:"getDevices",value:(t=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!SL()&&!CL()){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,navigator.mediaDevices.enumerateDevices();case 4:return t=e.sent,e.abrupt("return",t.filter((function(e){return e.kind!==eC||e.deviceId!=fE})).map((function(e,t){var n=e.label;e.label||(n=e.kind+"_"+t);var r={label:n,deviceId:e.deviceId,kind:e.kind};return e.groupId&&(r.groupId=e.groupId),e.getCapabilities&&(r.getCapabilities=function(){return e.getCapabilities()}),r})));case 6:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"getCameras",value:function(){return YL()}},{key:"getMicrophones",value:function(){return function(){return $L.apply(this,arguments)}()}},{key:"getSpeakers",value:function(){return function(){return XL.apply(this,arguments)}()}},{key:"createClient",value:function(e){jD&&(jD=!1,PD.getLogLevel()!=cY.Logger.LogLevel.NONE&&(console.info("******************************************************************************"),console.info("*   TRTC Web SDK"),console.info("*   API Document: "+"".concat(lE,"index.html")),console.info("*   Changelog: https://cloud.tencent.com/document/product/647/38958"),console.info("*   Report issues: https://github.com/LiteAVSDK/TRTC_Web/issues"),console.info("******************************************************************************")),PD.info("TRTC Web SDK Version: 4.15.6"),PD.info("UserAgent: "+navigator.userAgent),PD.info("URL of current page: "+location.href));var t={version:this.VERSION},r=new iY(n(n(n({},t),e),{},{seq:++oY}));return UO.emit(ZO,{client:r}),r}},{key:"createStream",value:function(e){return new nK(n(n({},e),{},{seq:++aY}))}}]),e}(),M(tY.prototype,"createClient",[QW],Object.getOwnPropertyDescriptor(tY.prototype,"createClient"),tY.prototype),M(tY.prototype,"createStream",[eY],Object.getOwnPropertyDescriptor(tY.prototype,"createStream"),tY.prototype),tY),cY=new sY;return cY}))}).call(this,n("c8ba"))},5852:function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("1a04"),n("1146"),n("f032")},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("e330"),i=n("1d80"),o=n("577e"),a=n("5899"),s=r("".replace),c="["+a+"]",u=RegExp("^"+c+c+"*"),l=RegExp(c+c+"*$"),d=function(e){return function(t){var n=o(i(t));return 1&e&&(n=s(n,u,"")),2&e&&(n=s(n,l,"")),n}};e.exports={start:d(1),end:d(2),trim:d(3)}},"58e6":function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("4a89"),c=n("7f9b"),u=n("cdd8"),l=n("543e"),[d,p,f]=Object(o["a"])("pull-refresh"),h=50,g=["pulling","loosing","success"],v={disabled:Boolean,modelValue:Boolean,headHeight:Object(a["c"])(h),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:a["f"],successDuration:Object(a["c"])(500),animationDuration:Object(a["c"])(300)},m=Object(i["n"])({name:d,props:v,emits:["refresh","update:modelValue"],setup(e,t){var n,{emit:r,slots:o}=t,a=Object(i["K"])(),d=Object(c["n"])(a),v=Object(i["J"])({status:"normal",distance:0,duration:0}),m=Object(u["a"])(),_=()=>{if(e.headHeight!==h)return{height:e.headHeight+"px"}},y=()=>"loading"!==v.status&&"success"!==v.status&&!e.disabled,b=t=>{var n=+(e.pullDistance||e.headHeight);return t>n&&(t=t<2*n?n+(t-n)/2:1.5*n+(t-2*n)/4),Math.round(t)},I=(t,n)=>{var r=+(e.pullDistance||e.headHeight);v.distance=t,v.status=n?"loading":0===t?"normal":t<r?"pulling":"loosing"},T=()=>{var{status:t}=v;return"normal"===t?"":e[t+"Text"]||f(t)},C=()=>{var{status:e,distance:t}=v;if(o[e])return o[e]({distance:t});var n=[];return g.includes(e)&&n.push(Object(i["m"])("div",{class:p("text")},[T()])),"loading"===e&&n.push(Object(i["m"])(l["a"],{class:p("loading")},{default:T})),n},S=()=>{v.status="success",setTimeout(()=>{I(0)},+e.successDuration)},E=e=>{n=0===Object(s["c"])(d.value),n&&(v.duration=0,m.start(e))},M=e=>{y()&&E(e)},k=e=>{if(y()){n||E(e);var{deltaY:t}=m;m.move(e),n&&t.value>=0&&m.isVertical()&&(Object(s["e"])(e),I(b(t.value)))}},w=()=>{n&&m.deltaY.value&&y()&&(v.duration=+e.animationDuration,"loosing"===v.status?(I(+e.headHeight,!0),r("update:modelValue",!0),Object(i["u"])(()=>r("refresh"))):I(0))};return Object(i["X"])(()=>e.modelValue,t=>{v.duration=+e.animationDuration,t?I(+e.headHeight,!0):o.success||e.successText?S():I(0,!1)}),()=>{var e={transitionDuration:v.duration+"ms",transform:v.distance?"translate3d(0,"+v.distance+"px, 0)":""};return Object(i["m"])("div",{ref:a,class:p()},[Object(i["m"])("div",{class:p("track"),style:e,onTouchstart:M,onTouchmove:k,onTouchend:w,onTouchcancel:w},[Object(i["m"])("div",{class:p("head"),style:_()},[C()]),null==o.default?void 0:o.default()])])}}}),_=Object(r["a"])(m);t["a"]=_},5926:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){var t=+e;return t!==t||0===t?0:(t>0?r:n)(t)}},"595e":function(e,t,n){(function(t){!function(t,r){e.exports=r(n("5781"))}(0,(function(e){function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(e);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(){a=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(w){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,o=Object.create(i.prototype),a=new S(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return M()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=I(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(w){return{type:"throw",arg:w}}}e.wrap=u;var d={};function p(){}function f(){}function h(){}var g={};c(g,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(E([])));m&&m!==t&&n.call(m,i)&&(g=m);var _=h.prototype=p.prototype=Object.create(g);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function r(i,o,a,s){var c=l(e[i],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var i;this._invoke=function(e,n){function o(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(o,o):o()}}function I(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function E(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:M}}function M(){return{value:void 0,done:!0}}return f.prototype=h,c(_,"constructor",h),c(h,"constructor",f),f.displayName=c(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},y(b.prototype),c(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new b(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(_),c(_,s,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=E,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function s(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){s(o,r,i,a,c,"next",e)}function c(e){s(o,r,i,a,c,"throw",e)}a(void 0)}))}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{},h=function(e){try{return!!e()}catch(n){return!0}},g=!h((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),v=g,m=Function.prototype,_=m.call,y=v&&m.bind.bind(_,_),b=function(e){return v?y(e):function(){return _.apply(e,arguments)}},I=b,T=I({}.toString),C=I("".slice),S=function(e){return C(T(e),8,-1)},E=S,M=b,k=function(e){if("Function"===E(e))return M(e)},w=h,O=S,D=Object,A=k("".split),R=w((function(){return!D("z").propertyIsEnumerable(0)}))?function(e){return"String"==O(e)?A(e,""):D(e)}:D,x=function(e){return null==e},L=x,N=TypeError,P=function(e){if(L(e))throw N("Can't call method on "+e);return e},j=R,U=P,G=function(e){return j(U(e))},V=function(e){return e&&e.Math==Math&&e},F=V("object"==typeof globalThis&&globalThis)||V("object"==typeof window&&window)||V("object"==typeof self&&self)||V("object"==typeof f&&f)||function(){return this}()||Function("return this")(),B={exports:{}},q=F,H=Object.defineProperty,z=function(e,t){try{H(q,e,{value:t,configurable:!0,writable:!0})}catch(r){q[e]=t}return t},K=z,W="__core-js_shared__",Y=F[W]||K(W,{}),J=Y;(B.exports=function(e,t){return J[e]||(J[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.25.5",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"});var $,X,Z=P,Q=Object,ee=function(e){return Q(Z(e))},te=ee,ne=k({}.hasOwnProperty),re=Object.hasOwn||function(e,t){return ne(te(e),t)},ie=k,oe=0,ae=Math.random(),se=ie(1..toString),ce=function(e){return"Symbol("+(void 0===e?"":e)+")_"+se(++oe+ae,36)},ue="object"==typeof document&&document.all,le={all:ue,IS_HTMLDDA:void 0===ue&&void 0!==ue},de=le.all,pe=le.IS_HTMLDDA?function(e){return"function"==typeof e||e===de}:function(e){return"function"==typeof e},fe=F,he=pe,ge=function(e){return he(e)?e:void 0},ve=function(e,t){return arguments.length<2?ge(fe[e]):fe[e]&&fe[e][t]},me=ve("navigator","userAgent")||"",_e=F,ye=me,be=_e.process,Ie=_e.Deno,Te=be&&be.versions||Ie&&Ie.version,Ce=Te&&Te.v8;Ce&&(X=($=Ce.split("."))[0]>0&&$[0]<4?1:+($[0]+$[1])),!X&&ye&&(!($=ye.match(/Edge\/(\d+)/))||$[1]>=74)&&($=ye.match(/Chrome\/(\d+)/))&&(X=+$[1]);var Se=X,Ee=Se,Me=h,ke=!!Object.getOwnPropertySymbols&&!Me((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Ee&&Ee<41})),we=ke&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Oe=F,De=B.exports,Ae=re,Re=ce,xe=ke,Le=we,Ne=De("wks"),Pe=Oe.Symbol,je=Pe&&Pe.for,Ue=Le?Pe:Pe&&Pe.withoutSetter||Re,Ge=function(e){if(!Ae(Ne,e)||!xe&&"string"!=typeof Ne[e]){var t="Symbol."+e;xe&&Ae(Pe,e)?Ne[e]=Pe[e]:Ne[e]=Le&&je?je(t):Ue(t)}return Ne[e]},Ve=pe,Fe=le.all,Be=le.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:Ve(e)||e===Fe}:function(e){return"object"==typeof e?null!==e:Ve(e)},qe=Be,He=String,ze=TypeError,Ke=function(e){if(qe(e))return e;throw ze(He(e)+" is not an object")},We={},Ye=!h((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),Je=Ye&&h((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),$e={},Xe=Be,Ze=F.document,Qe=Xe(Ze)&&Xe(Ze.createElement),et=function(e){return Qe?Ze.createElement(e):{}},tt=et,nt=!Ye&&!h((function(){return 7!=Object.defineProperty(tt("div"),"a",{get:function(){return 7}}).a})),rt=g,it=Function.prototype.call,ot=rt?it.bind(it):function(){return it.apply(it,arguments)},at=k({}.isPrototypeOf),st=ve,ct=pe,ut=at,lt=Object,dt=we?function(e){return"symbol"==typeof e}:function(e){var t=st("Symbol");return ct(t)&&ut(t.prototype,lt(e))},pt=String,ft=function(e){try{return pt(e)}catch(n){return"Object"}},ht=pe,gt=ft,vt=TypeError,mt=function(e){if(ht(e))return e;throw vt(gt(e)+" is not a function")},_t=mt,yt=x,bt=function(e,t){var n=e[t];return yt(n)?void 0:_t(n)},It=ot,Tt=pe,Ct=Be,St=TypeError,Et=ot,Mt=Be,kt=dt,wt=bt,Ot=function(e,t){var n,r;if("string"===t&&Tt(n=e.toString)&&!Ct(r=It(n,e)))return r;if(Tt(n=e.valueOf)&&!Ct(r=It(n,e)))return r;if("string"!==t&&Tt(n=e.toString)&&!Ct(r=It(n,e)))return r;throw St("Can't convert object to primitive value")},Dt=TypeError,At=Ge("toPrimitive"),Rt=function(e,t){if(!Mt(e)||kt(e))return e;var n,r=wt(e,At);if(r){if(void 0===t&&(t="default"),n=Et(r,e,t),!Mt(n)||kt(n))return n;throw Dt("Can't convert object to primitive value")}return void 0===t&&(t="number"),Ot(e,t)},xt=Rt,Lt=dt,Nt=function(e){var t=xt(e,"string");return Lt(t)?t:t+""},Pt=Ye,jt=nt,Ut=Je,Gt=Ke,Vt=Nt,Ft=TypeError,Bt=Object.defineProperty,qt=Object.getOwnPropertyDescriptor,Ht="enumerable",zt="configurable",Kt="writable";$e.f=Pt?Ut?function(e,t,n){if(Gt(e),t=Vt(t),Gt(n),"function"==typeof e&&"prototype"===t&&"value"in n&&Kt in n&&!n.writable){var r=qt(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:zt in n?n.configurable:r.configurable,enumerable:Ht in n?n.enumerable:r.enumerable,writable:!1})}return Bt(e,t,n)}:Bt:function(e,t,n){if(Gt(e),t=Vt(t),Gt(n),jt)try{return Bt(e,t,n)}catch(i){}if("get"in n||"set"in n)throw Ft("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var Wt=Math.ceil,Yt=Math.floor,Jt=Math.trunc||function(e){var t=+e;return(t>0?Yt:Wt)(t)},$t=function(e){var t=+e;return t!=t||0===t?0:Jt(t)},Xt=$t,Zt=Math.max,Qt=Math.min,en=function(e,t){var n=Xt(e);return n<0?Zt(n+t,0):Qt(n,t)},tn=$t,nn=Math.min,rn=function(e){return e>0?nn(tn(e),9007199254740991):0},on=rn,an=function(e){return on(e.length)},sn=G,cn=en,un=an,ln=function(e){return function(t,n,r){var i,o=sn(t),a=un(o),s=cn(r,a);if(e&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}},dn={includes:ln(!0),indexOf:ln(!1)},pn={},fn=re,hn=G,gn=dn.indexOf,vn=pn,mn=k([].push),_n=function(e,t){var n,r=hn(e),i=0,o=[];for(n in r)!fn(vn,n)&&fn(r,n)&&mn(o,n);for(;t.length>i;)fn(r,n=t[i++])&&(~gn(o,n)||mn(o,n));return o},yn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],bn=_n,In=yn,Tn=Object.keys||function(e){return bn(e,In)},Cn=Ye,Sn=Je,En=$e,Mn=Ke,kn=G,wn=Tn;We.f=Cn&&!Sn?Object.defineProperties:function(e,t){Mn(e);for(var n,r=kn(t),i=wn(t),o=i.length,a=0;o>a;)En.f(e,n=i[a++],r[n]);return e};var On,Dn=ve("document","documentElement"),An=B.exports,Rn=ce,xn=An("keys"),Ln=function(e){return xn[e]||(xn[e]=Rn(e))},Nn=Ke,Pn=We,jn=yn,Un=pn,Gn=Dn,Vn=et,Fn=Ln("IE_PROTO"),Bn=function(){},qn=function(e){return"<script>"+e+"<\/script>"},Hn=function(e){e.write(qn("")),e.close();var t=e.parentWindow.Object;return e=null,t},zn=function(){try{On=new ActiveXObject("htmlfile")}catch(i){}var e,t;zn="undefined"!=typeof document?document.domain&&On?Hn(On):((t=Vn("iframe")).style.display="none",Gn.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(qn("document.F=Object")),e.close(),e.F):Hn(On);for(var n=jn.length;n--;)delete zn.prototype[jn[n]];return zn()};Un[Fn]=!0;var Kn=Object.create||function(e,t){var n;return null!==e?(Bn.prototype=Nn(e),n=new Bn,Bn.prototype=null,n[Fn]=e):n=zn(),void 0===t?n:Pn.f(n,t)},Wn=Ge,Yn=Kn,Jn=$e.f,$n=Wn("unscopables"),Xn=Array.prototype;null==Xn[$n]&&Jn(Xn,$n,{configurable:!0,value:Yn(null)});var Zn,Qn,er,tr={},nr=pe,rr=F.WeakMap,ir=nr(rr)&&/native code/.test(String(rr)),or=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},ar=$e,sr=or,cr=Ye?function(e,t,n){return ar.f(e,t,sr(1,n))}:function(e,t,n){return e[t]=n,e},ur=ir,lr=F,dr=Be,pr=cr,fr=re,hr=Y,gr=Ln,vr=pn,mr="Object already initialized",_r=lr.TypeError,yr=lr.WeakMap;if(ur||hr.state){var br=hr.state||(hr.state=new yr);br.get=br.get,br.has=br.has,br.set=br.set,Zn=function(e,t){if(br.has(e))throw _r(mr);return t.facade=e,br.set(e,t),t},Qn=function(e){return br.get(e)||{}},er=function(e){return br.has(e)}}else{var Ir=gr("state");vr[Ir]=!0,Zn=function(e,t){if(fr(e,Ir))throw _r(mr);return t.facade=e,pr(e,Ir,t),t},Qn=function(e){return fr(e,Ir)?e[Ir]:{}},er=function(e){return fr(e,Ir)}}var Tr={set:Zn,get:Qn,has:er,enforce:function(e){return er(e)?Qn(e):Zn(e,{})},getterFor:function(e){return function(t){var n;if(!dr(t)||(n=Qn(t)).type!==e)throw _r("Incompatible receiver, "+e+" required");return n}}},Cr={},Sr={},Er={}.propertyIsEnumerable,Mr=Object.getOwnPropertyDescriptor,kr=Mr&&!Er.call({1:2},1);Sr.f=kr?function(e){var t=Mr(this,e);return!!t&&t.enumerable}:Er;var wr=Ye,Or=ot,Dr=Sr,Ar=or,Rr=G,xr=Nt,Lr=re,Nr=nt,Pr=Object.getOwnPropertyDescriptor;Cr.f=wr?Pr:function(e,t){if(e=Rr(e),t=xr(t),Nr)try{return Pr(e,t)}catch(r){}if(Lr(e,t))return Ar(!Or(Dr.f,e,t),e[t])};var jr={exports:{}},Ur=Ye,Gr=re,Vr=Function.prototype,Fr=Ur&&Object.getOwnPropertyDescriptor,Br=Gr(Vr,"name"),qr={EXISTS:Br,PROPER:Br&&"something"===function(){}.name,CONFIGURABLE:Br&&(!Ur||Ur&&Fr(Vr,"name").configurable)},Hr=pe,zr=Y,Kr=k(Function.toString);Hr(zr.inspectSource)||(zr.inspectSource=function(e){return Kr(e)});var Wr=zr.inspectSource,Yr=h,Jr=pe,$r=re,Xr=Ye,Zr=qr.CONFIGURABLE,Qr=Wr,ei=Tr.enforce,ti=Tr.get,ni=Object.defineProperty,ri=Xr&&!Yr((function(){return 8!==ni((function(){}),"length",{value:8}).length})),ii=String(String).split("String"),oi=jr.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!$r(e,"name")||Zr&&e.name!==t)&&(Xr?ni(e,"name",{value:t,configurable:!0}):e.name=t),ri&&n&&$r(n,"arity")&&e.length!==n.arity&&ni(e,"length",{value:n.arity});try{n&&$r(n,"constructor")&&n.constructor?Xr&&ni(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(o){}var r=ei(e);return $r(r,"source")||(r.source=ii.join("string"==typeof t?t:"")),e};Function.prototype.toString=oi((function(){return Jr(this)&&ti(this).source||Qr(this)}),"toString");var ai=pe,si=$e,ci=jr.exports,ui=z,li=function(e,t,n,r){r||(r={});var i=r.enumerable,o=void 0!==r.name?r.name:t;if(ai(n)&&ci(n,o,r),r.global)i?e[t]=n:ui(t,n);else{try{r.unsafe?e[t]&&(i=!0):delete e[t]}catch(s){}i?e[t]=n:si.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e},di={},pi=_n,fi=yn.concat("length","prototype");di.f=Object.getOwnPropertyNames||function(e){return pi(e,fi)};var hi={};hi.f=Object.getOwnPropertySymbols;var gi,vi,mi,_i=ve,yi=di,bi=hi,Ii=Ke,Ti=k([].concat),Ci=_i("Reflect","ownKeys")||function(e){var t=yi.f(Ii(e)),n=bi.f;return n?Ti(t,n(e)):t},Si=re,Ei=Ci,Mi=Cr,ki=$e,wi=h,Oi=pe,Di=/#|\.prototype\./,Ai=function(e,t){var n=xi[Ri(e)];return n==Ni||n!=Li&&(Oi(t)?wi(t):!!t)},Ri=Ai.normalize=function(e){return String(e).replace(Di,".").toLowerCase()},xi=Ai.data={},Li=Ai.NATIVE="N",Ni=Ai.POLYFILL="P",Pi=Ai,ji=F,Ui=Cr.f,Gi=cr,Vi=li,Fi=z,Bi=function(e,t,n){for(var r=Ei(t),i=ki.f,o=Mi.f,a=0;a<r.length;a++){var s=r[a];Si(e,s)||n&&Si(n,s)||i(e,s,o(t,s))}},qi=Pi,Hi=function(e,t){var n,r,i,o,a,s=e.target,c=e.global,u=e.stat;if(n=c?ji:u?ji[s]||Fi(s,{}):(ji[s]||{}).prototype)for(r in t){if(o=t[r],i=e.dontCallGetSet?(a=Ui(n,r))&&a.value:n[r],!qi(c?r:s+(u?".":"#")+r,e.forced)&&void 0!==i){if(typeof o==typeof i)continue;Bi(o,i)}(e.sham||i&&i.sham)&&Gi(o,"sham",!0),Vi(n,r,o,e)}},zi=!h((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Ki=re,Wi=pe,Yi=ee,Ji=zi,$i=Ln("IE_PROTO"),Xi=Object,Zi=Xi.prototype,Qi=Ji?Xi.getPrototypeOf:function(e){var t=Yi(e);if(Ki(t,$i))return t[$i];var n=t.constructor;return Wi(n)&&t instanceof n?n.prototype:t instanceof Xi?Zi:null},eo=h,to=pe,no=Be,ro=Qi,io=li,oo=Ge("iterator"),ao=!1;[].keys&&("next"in(mi=[].keys())?(vi=ro(ro(mi)))!==Object.prototype&&(gi=vi):ao=!0);var so=!no(gi)||eo((function(){var e={};return gi[oo].call(e)!==e}));so&&(gi={}),to(gi[oo])||io(gi,oo,(function(){return this}));var co={IteratorPrototype:gi,BUGGY_SAFARI_ITERATORS:ao},uo=$e.f,lo=re,po=Ge("toStringTag"),fo=function(e,t,n){e&&!n&&(e=e.prototype),e&&!lo(e,po)&&uo(e,po,{configurable:!0,value:t})},ho=co.IteratorPrototype,go=Kn,vo=or,mo=fo,_o=tr,yo=function(){return this},bo=pe,Io=String,To=TypeError,Co=k,So=Ke,Eo=function(e){if("object"==typeof e||bo(e))return e;throw To("Can't set "+Io(e)+" as a prototype")},Mo=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Co(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(i){}return function(n,r){return So(n),Eo(r),t?e(n,r):n.__proto__=r,n}}():void 0),ko=Hi,wo=ot,Oo=pe,Do=function(e,t,n,r){var i=t+" Iterator";return e.prototype=go(ho,{next:vo(+!r,n)}),mo(e,i,!1),_o[i]=yo,e},Ao=Qi,Ro=Mo,xo=fo,Lo=cr,No=li,Po=tr,jo=qr.PROPER,Uo=qr.CONFIGURABLE,Go=co.IteratorPrototype,Vo=co.BUGGY_SAFARI_ITERATORS,Fo=Ge("iterator"),Bo="keys",qo="values",Ho="entries",zo=function(){return this},Ko=function(e,t,n,r,i,o,a){Do(n,t,r);var s,c,u,l=function(e){if(e===i&&g)return g;if(!Vo&&e in f)return f[e];switch(e){case Bo:case qo:case Ho:return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",p=!1,f=e.prototype,h=f[Fo]||f["@@iterator"]||i&&f[i],g=!Vo&&h||l(i),v="Array"==t&&f.entries||h;if(v&&(s=Ao(v.call(new e)))!==Object.prototype&&s.next&&(Ao(s)!==Go&&(Ro?Ro(s,Go):Oo(s[Fo])||No(s,Fo,zo)),xo(s,d,!0)),jo&&i==qo&&h&&h.name!==qo&&(Uo?Lo(f,"name",qo):(p=!0,g=function(){return wo(h,this)})),i)if(c={values:l(qo),keys:o?g:l(Bo),entries:l(Ho)},a)for(u in c)(Vo||p||!(u in f))&&No(f,u,c[u]);else ko({target:t,proto:!0,forced:Vo||p},c);return f[Fo]!==g&&No(f,Fo,g,{name:i}),Po[t]=g,c},Wo=function(e,t){return{value:e,done:t}},Yo=G,Jo=function(e){Xn[$n][e]=!0},$o=tr,Xo=Tr,Zo=$e.f,Qo=Ko,ea=Wo,ta=Ye,na="Array Iterator",ra=Xo.set,ia=Xo.getterFor(na),oa=Qo(Array,"Array",(function(e,t){ra(this,{type:na,target:Yo(e),index:0,kind:t})}),(function(){var e=ia(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,ea(void 0,!0)):ea("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)}),"values"),aa=$o.Arguments=$o.Array;if(Jo("keys"),Jo("values"),Jo("entries"),ta&&"values"!==aa.name)try{Zo(aa,"name",{value:"values"})}catch(rI){}var sa={exports:{}},ca={},ua=Nt,la=$e,da=or,pa=function(e,t,n){var r=ua(t);r in e?la.f(e,r,da(0,n)):e[r]=n},fa=en,ha=an,ga=pa,va=Array,ma=Math.max,_a=function(e,t,n){for(var r=ha(e),i=fa(t,r),o=fa(void 0===n?r:n,r),a=va(ma(o-i,0)),s=0;i<o;i++,s++)ga(a,s,e[i]);return a.length=s,a},ya=S,ba=G,Ia=di.f,Ta=_a,Ca="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];ca.f=function(e){return Ca&&"Window"==ya(e)?function(e){try{return Ia(e)}catch(rI){return Ta(Ca)}}(e):Ia(ba(e))};var Sa=h((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})),Ea=h,Ma=Be,ka=S,wa=Sa,Oa=Object.isExtensible,Da=Ea((function(){Oa(1)}))||wa?function(e){return!!Ma(e)&&(!wa||"ArrayBuffer"!=ka(e))&&(!Oa||Oa(e))}:Oa,Aa=!h((function(){return Object.isExtensible(Object.preventExtensions({}))})),Ra=Hi,xa=k,La=pn,Na=Be,Pa=re,ja=$e.f,Ua=di,Ga=ca,Va=Da,Fa=Aa,Ba=!1,qa=ce("meta"),Ha=0,za=function(e){ja(e,qa,{value:{objectID:"O"+Ha++,weakData:{}}})},Ka=sa.exports={enable:function(){Ka.enable=function(){},Ba=!0;var e=Ua.f,t=xa([].splice),n={};n[qa]=1,e(n).length&&(Ua.f=function(n){for(var r=e(n),i=0,o=r.length;i<o;i++)if(r[i]===qa){t(r,i,1);break}return r},Ra({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Ga.f}))},fastKey:function(e,t){if(!Na(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!Pa(e,qa)){if(!Va(e))return"F";if(!t)return"E";za(e)}return e[qa].objectID},getWeakData:function(e,t){if(!Pa(e,qa)){if(!Va(e))return!0;if(!t)return!1;za(e)}return e[qa].weakData},onFreeze:function(e){return Fa&&Ba&&Va(e)&&!Pa(e,qa)&&za(e),e}};La[qa]=!0;var Wa=mt,Ya=g,Ja=k(k.bind),$a=function(e,t){return Wa(e),void 0===t?e:Ya?Ja(e,t):function(){return e.apply(t,arguments)}},Xa=tr,Za=Ge("iterator"),Qa=Array.prototype,es=function(e){return void 0!==e&&(Xa.Array===e||Qa[Za]===e)},ts={};ts[Ge("toStringTag")]="z";var ns="[object z]"===String(ts),rs=ns,is=pe,os=S,as=Ge("toStringTag"),ss=Object,cs="Arguments"==os(function(){return arguments}()),us=rs?os:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(rI){}}(t=ss(e),as))?n:cs?os(t):"Object"==(r=os(t))&&is(t.callee)?"Arguments":r},ls=us,ds=bt,ps=x,fs=tr,hs=Ge("iterator"),gs=function(e){if(!ps(e))return ds(e,hs)||ds(e,"@@iterator")||fs[ls(e)]},vs=ot,ms=mt,_s=Ke,ys=ft,bs=gs,Is=TypeError,Ts=function(e,t){var n=arguments.length<2?bs(e):t;if(ms(n))return _s(vs(n,e));throw Is(ys(e)+" is not iterable")},Cs=ot,Ss=Ke,Es=bt,Ms=$a,ks=ot,ws=Ke,Os=ft,Ds=es,As=an,Rs=at,xs=Ts,Ls=gs,Ns=function(e,t,n){var r,i;Ss(e);try{if(!(r=Es(e,"return"))){if("throw"===t)throw n;return n}r=Cs(r,e)}catch(rI){i=!0,r=rI}if("throw"===t)throw n;if(i)throw r;return Ss(r),n},Ps=TypeError,js=function(e,t){this.stopped=e,this.result=t},Us=js.prototype,Gs=function(e,t,n){var r,i,o,a,s,c,u,l=n&&n.that,d=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_RECORD),f=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),g=Ms(t,l),v=function(e){return r&&Ns(r,"normal",e),new js(!0,e)},m=function(e){return d?(ws(e),h?g(e[0],e[1],v):g(e[0],e[1])):h?g(e,v):g(e)};if(p)r=e.iterator;else if(f)r=e;else{if(!(i=Ls(e)))throw Ps(Os(e)+" is not iterable");if(Ds(i)){for(o=0,a=As(e);a>o;o++)if((s=m(e[o]))&&Rs(Us,s))return s;return new js(!1)}r=xs(e,i)}for(c=p?e.next:r.next;!(u=ks(c,r)).done;){try{s=m(u.value)}catch(rI){Ns(r,"throw",rI)}if("object"==typeof s&&s&&Rs(Us,s))return s}return new js(!1)},Vs=at,Fs=TypeError,Bs=function(e,t){if(Vs(t,e))return e;throw Fs("Incorrect invocation")},qs=Ge("iterator"),Hs=!1;try{var zs=0,Ks={next:function(){return{done:!!zs++}},return:function(){Hs=!0}};Ks[qs]=function(){return this},Array.from(Ks,(function(){throw 2}))}catch(rI){}var Ws=function(e,t){if(!t&&!Hs)return!1;var n=!1;try{var r={};r[qs]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(rI){}return n},Ys=pe,Js=Be,$s=Mo,Xs=function(e,t,n){var r,i;return $s&&Ys(r=t.constructor)&&r!==n&&Js(i=r.prototype)&&i!==n.prototype&&$s(e,i),e},Zs=Hi,Qs=F,ec=k,tc=Pi,nc=li,rc=sa.exports,ic=Gs,oc=Bs,ac=pe,sc=x,cc=Be,uc=h,lc=Ws,dc=fo,pc=Xs,fc=li,hc=function(e,t,n){for(var r in t)fc(e,r,t[r],n);return e},gc=ve,vc=$e,mc=Ye,_c=Ge("species"),yc=function(e){var t=gc(e),n=vc.f;mc&&t&&!t[_c]&&n(t,_c,{configurable:!0,get:function(){return this}})},bc=$e.f,Ic=Kn,Tc=hc,Cc=$a,Sc=Bs,Ec=x,Mc=Gs,kc=Ko,wc=Wo,Oc=yc,Dc=Ye,Ac=sa.exports.fastKey,Rc=Tr.set,xc=Tr.getterFor,Lc={getConstructor:function(e,t,n,r){var i=e((function(e,i){Sc(e,o),Rc(e,{type:t,index:Ic(null),first:void 0,last:void 0,size:0}),Dc||(e.size=0),Ec(i)||Mc(i,e[r],{that:e,AS_ENTRIES:n})})),o=i.prototype,a=xc(t),s=function(e,t,n){var r,i,o=a(e),s=c(e,t);return s?s.value=n:(o.last=s={index:i=Ac(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=s),r&&(r.next=s),Dc?o.size++:e.size++,"F"!==i&&(o.index[i]=s)),e},c=function(e,t){var n,r=a(e),i=Ac(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return Tc(o,{clear:function(){for(var e=a(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,Dc?e.size=0:this.size=0},delete:function(e){var t=this,n=a(t),r=c(t,e);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),Dc?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=a(this),r=Cc(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!c(this,e)}}),Tc(o,n?{get:function(e){var t=c(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),Dc&&bc(o,"size",{get:function(){return a(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=xc(t),o=xc(r);kc(e,t,(function(e,t){Rc(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?wc("keys"==t?n.key:"values"==t?n.value:[n.key,n.value],!1):(e.target=void 0,wc(void 0,!0))}),n?"entries":"values",!n,!0),Oc(t)}},Nc=function(e,t,n){var r=-1!==e.indexOf("Map"),i=-1!==e.indexOf("Weak"),o=r?"set":"add",a=Qs[e],s=a&&a.prototype,c=a,u={},l=function(e){var t=ec(s[e]);nc(s,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!cc(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return i&&!cc(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!cc(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(tc(e,!ac(a)||!(i||s.forEach&&!uc((function(){(new a).entries().next()})))))c=n.getConstructor(t,e,r,o),rc.enable();else if(tc(e,!0)){var d=new c,p=d[o](i?{}:-0,1)!=d,f=uc((function(){d.has(1)})),h=lc((function(e){new a(e)})),g=!i&&uc((function(){for(var e=new a,t=5;t--;)e[o](t,t);return!e.has(-0)}));h||((c=t((function(e,t){oc(e,s);var n=pc(new a,e,c);return sc(t)||ic(t,n[o],{that:n,AS_ENTRIES:r}),n}))).prototype=s,s.constructor=c),(f||g)&&(l("delete"),l("has"),r&&l("get")),(g||p)&&l(o),i&&s.clear&&delete s.clear}return u[e]=c,Zs({global:!0,constructor:!0,forced:c!=a},u),dc(c,e),i||n.setStrong(c,e,r),c};Nc("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Lc);var Pc=us,jc=ns?{}.toString:function(){return"[object "+Pc(this)+"]"};ns||li(Object.prototype,"toString",jc,{unsafe:!0});var Uc=us,Gc=String,Vc=function(e){if("Symbol"===Uc(e))throw TypeError("Cannot convert a Symbol value to a string");return Gc(e)},Fc=k,Bc=$t,qc=Vc,Hc=P,zc=Fc("".charAt),Kc=Fc("".charCodeAt),Wc=Fc("".slice),Yc=function(e){return function(t,n){var r,i,o=qc(Hc(t)),a=Bc(n),s=o.length;return a<0||a>=s?e?"":void 0:(r=Kc(o,a))<55296||r>56319||a+1===s||(i=Kc(o,a+1))<56320||i>57343?e?zc(o,a):r:e?Wc(o,a,a+2):i-56320+(r-55296<<10)+65536}},Jc={codeAt:Yc(!1),charAt:Yc(!0)}.charAt,$c=Vc,Xc=Tr,Zc=Ko,Qc=Wo,eu="String Iterator",tu=Xc.set,nu=Xc.getterFor(eu);Zc(String,"String",(function(e){tu(this,{type:eu,string:$c(e),index:0})}),(function(){var e,t=nu(this),n=t.string,r=t.index;return r>=n.length?Qc(void 0,!0):(e=Jc(n,r),t.index+=e.length,Qc(e,!1))}));var ru=et("span").classList,iu=ru&&ru.constructor&&ru.constructor.prototype,ou=iu===Object.prototype?void 0:iu,au=F,su={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},cu=ou,uu=oa,lu=cr,du=Ge,pu=du("iterator"),fu=du("toStringTag"),hu=uu.values,gu=function(e,t){if(e){if(e[pu]!==hu)try{lu(e,pu,hu)}catch(rI){e[pu]=hu}if(e[fu]||lu(e,fu,t),su[t])for(var n in uu)if(e[n]!==uu[n])try{lu(e,n,uu[n])}catch(rI){e[n]=uu[n]}}};for(var vu in su)gu(au[vu]&&au[vu].prototype,vu);gu(cu,"DOMTokenList");var mu=S,_u=Array.isArray||function(e){return"Array"==mu(e)},yu=k,bu=h,Iu=pe,Tu=us,Cu=Wr,Su=function(){},Eu=[],Mu=ve("Reflect","construct"),ku=/^\s*(?:class|function)\b/,wu=yu(ku.exec),Ou=!ku.exec(Su),Du=function(e){if(!Iu(e))return!1;try{return Mu(Su,Eu,e),!0}catch(rI){return!1}},Au=function(e){if(!Iu(e))return!1;switch(Tu(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ou||!!wu(ku,Cu(e))}catch(rI){return!0}};Au.sham=!0;var Ru=!Mu||bu((function(){var e;return Du(Du.call)||!Du(Object)||!Du((function(){e=!0}))||e}))?Au:Du,xu=h,Lu=Se,Nu=Ge("species"),Pu=function(e){return Lu>=51||!xu((function(){var t=[];return(t.constructor={})[Nu]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},ju=k([].slice),Uu=Hi,Gu=_u,Vu=Ru,Fu=Be,Bu=en,qu=an,Hu=G,zu=pa,Ku=Ge,Wu=ju,Yu=Pu("slice"),Ju=Ku("species"),$u=Array,Xu=Math.max;Uu({target:"Array",proto:!0,forced:!Yu},{slice:function(e,t){var n,r,i,o=Hu(this),a=qu(o),s=Bu(e,a),c=Bu(void 0===t?a:t,a);if(Gu(o)&&(n=o.constructor,(Vu(n)&&(n===$u||Gu(n.prototype))||Fu(n)&&null===(n=n[Ju]))&&(n=void 0),n===$u||void 0===n))return Wu(o,s,c);for(r=new(void 0===n?$u:n)(Xu(c-s,0)),i=0;s<c;s++,i++)s in o&&zu(r,i,o[s]);return r.length=i,r}});var Zu=Hi,Qu=Date,el=k(Qu.prototype.getTime);Zu({target:"Date",stat:!0},{now:function(){return el(new Qu)}});var tl=k,nl=li,rl=Date.prototype,il="Invalid Date",ol="toString",al=tl(rl.toString),sl=tl(rl.getTime);String(new Date(NaN))!=il&&nl(rl,ol,(function(){var e=sl(this);return e==e?al(this):il}));var cl=TypeError,ul=_u,ll=Ru,dl=Be,pl=Ge("species"),fl=Array,hl=function(e){var t;return ul(e)&&(t=e.constructor,(ll(t)&&(t===fl||ul(t.prototype))||dl(t)&&null===(t=t[pl]))&&(t=void 0)),void 0===t?fl:t},gl=function(e,t){return new(hl(e))(0===t?0:t)},vl=Hi,ml=h,_l=_u,yl=Be,bl=ee,Il=an,Tl=function(e){if(e>9007199254740991)throw cl("Maximum allowed index exceeded");return e},Cl=pa,Sl=gl,El=Pu,Ml=Se,kl=Ge("isConcatSpreadable"),wl=Ml>=51||!ml((function(){var e=[];return e[kl]=!1,e.concat()[0]!==e})),Ol=El("concat"),Dl=function(e){if(!yl(e))return!1;var t=e[kl];return void 0!==t?!!t:_l(e)};vl({target:"Array",proto:!0,arity:1,forced:!wl||!Ol},{concat:function(e){var t,n,r,i,o,a=bl(this),s=Sl(a,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(Dl(o=-1===t?a:arguments[t]))for(i=Il(o),Tl(c+i),n=0;n<i;n++,c++)n in o&&Cl(s,c,o[n]);else Tl(c+1),Cl(s,c++,o);return s.length=c,s}});var Al,Rl,xl,Ll,Nl="process"==S(F.process),Pl=Ru,jl=ft,Ul=TypeError,Gl=function(e){if(Pl(e))return e;throw Ul(jl(e)+" is not a constructor")},Vl=Ke,Fl=Gl,Bl=x,ql=Ge("species"),Hl=function(e,t){var n,r=Vl(e).constructor;return void 0===r||Bl(n=Vl(r)[ql])?t:Fl(n)},zl=g,Kl=Function.prototype,Wl=Kl.apply,Yl=Kl.call,Jl="object"==typeof Reflect&&Reflect.apply||(zl?Yl.bind(Wl):function(){return Yl.apply(Wl,arguments)}),$l=TypeError,Xl=/(?:ipad|iphone|ipod).*applewebkit/i.test(me),Zl=F,Ql=Jl,ed=$a,td=pe,nd=re,rd=h,id=Dn,od=ju,ad=et,sd=function(e,t){if(e<t)throw $l("Not enough arguments");return e},cd=Xl,ud=Nl,ld=Zl.setImmediate,dd=Zl.clearImmediate,pd=Zl.process,fd=Zl.Dispatch,hd=Zl.Function,gd=Zl.MessageChannel,vd=Zl.String,md=0,_d={},yd="onreadystatechange";try{Al=Zl.location}catch(rI){}var bd=function(e){if(nd(_d,e)){var t=_d[e];delete _d[e],t()}},Id=function(e){return function(){bd(e)}},Td=function(e){bd(e.data)},Cd=function(e){Zl.postMessage(vd(e),Al.protocol+"//"+Al.host)};ld&&dd||(ld=function(e){sd(arguments.length,1);var t=td(e)?e:hd(e),n=od(arguments,1);return _d[++md]=function(){Ql(t,void 0,n)},Rl(md),md},dd=function(e){delete _d[e]},ud?Rl=function(e){pd.nextTick(Id(e))}:fd&&fd.now?Rl=function(e){fd.now(Id(e))}:gd&&!cd?(Ll=(xl=new gd).port2,xl.port1.onmessage=Td,Rl=ed(Ll.postMessage,Ll)):Zl.addEventListener&&td(Zl.postMessage)&&!Zl.importScripts&&Al&&"file:"!==Al.protocol&&!rd(Cd)?(Rl=Cd,Zl.addEventListener("message",Td,!1)):Rl=yd in ad("script")?function(e){id.appendChild(ad("script")).onreadystatechange=function(){id.removeChild(this),bd(e)}}:function(e){setTimeout(Id(e),0)});var Sd,Ed,Md,kd,wd,Od,Dd,Ad,Rd={set:ld,clear:dd},xd=F,Ld=/ipad|iphone|ipod/i.test(me)&&void 0!==xd.Pebble,Nd=/web0s(?!.*chrome)/i.test(me),Pd=F,jd=$a,Ud=Cr.f,Gd=Rd.set,Vd=Xl,Fd=Ld,Bd=Nd,qd=Nl,Hd=Pd.MutationObserver||Pd.WebKitMutationObserver,zd=Pd.document,Kd=Pd.process,Wd=Pd.Promise,Yd=Ud(Pd,"queueMicrotask"),Jd=Yd&&Yd.value;Jd||(Sd=function(){var e,t;for(qd&&(e=Kd.domain)&&e.exit();Ed;){t=Ed.fn,Ed=Ed.next;try{t()}catch(rI){throw Ed?kd():Md=void 0,rI}}Md=void 0,e&&e.enter()},Vd||qd||Bd||!Hd||!zd?!Fd&&Wd&&Wd.resolve?((Dd=Wd.resolve(void 0)).constructor=Wd,Ad=jd(Dd.then,Dd),kd=function(){Ad(Sd)}):qd?kd=function(){Kd.nextTick(Sd)}:(Gd=jd(Gd,Pd),kd=function(){Gd(Sd)}):(wd=!0,Od=zd.createTextNode(""),new Hd(Sd).observe(Od,{characterData:!0}),kd=function(){Od.data=wd=!wd}));var $d=Jd||function(e){var t={fn:e,next:void 0};Md&&(Md.next=t),Ed||(Ed=t,kd()),Md=t},Xd=F,Zd=function(e){try{return{error:!1,value:e()}}catch(rI){return{error:!0,value:rI}}},Qd=function(){this.head=null,this.tail=null};Qd.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var ep=Qd,tp=F.Promise,np="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,rp=!np&&!Nl&&"object"==typeof window&&"object"==typeof document,ip=F,op=tp,ap=pe,sp=Pi,cp=Wr,up=Ge,lp=rp,dp=np,pp=Se;op&&op.prototype;var fp=up("species"),hp=!1,gp=ap(ip.PromiseRejectionEvent),vp=sp("Promise",(function(){var e=cp(op),t=e!==String(op);if(!t&&66===pp)return!0;if(!pp||pp<51||!/native code/.test(e)){var n=new op((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[fp]=r,!(hp=n.then((function(){}))instanceof r))return!0}return!t&&(lp||dp)&&!gp})),mp={CONSTRUCTOR:vp,REJECTION_EVENT:gp,SUBCLASSING:hp},_p={},yp=mt,bp=TypeError,Ip=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw bp("Bad Promise constructor");t=e,n=r})),this.resolve=yp(t),this.reject=yp(n)};_p.f=function(e){return new Ip(e)};var Tp,Cp,Sp,Ep=Hi,Mp=Nl,kp=F,wp=ot,Op=li,Dp=Mo,Ap=fo,Rp=yc,xp=mt,Lp=pe,Np=Be,Pp=Bs,jp=Hl,Up=Rd.set,Gp=$d,Vp=function(e,t){var n=Xd.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))},Fp=Zd,Bp=ep,qp=Tr,Hp=tp,zp=_p,Kp="Promise",Wp=mp.CONSTRUCTOR,Yp=mp.REJECTION_EVENT,Jp=mp.SUBCLASSING,$p=qp.getterFor(Kp),Xp=qp.set,Zp=Hp&&Hp.prototype,Qp=Hp,ef=Zp,tf=kp.TypeError,nf=kp.document,rf=kp.process,of=zp.f,af=of,sf=!!(nf&&nf.createEvent&&kp.dispatchEvent),cf="unhandledrejection",uf=function(e){var t;return!(!Np(e)||!Lp(t=e.then))&&t},lf=function(e,t){var n,r,i,o=t.value,a=1==t.state,s=a?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{s?(a||(2===t.rejection&&gf(t),t.rejection=1),!0===s?n=o:(l&&l.enter(),n=s(o),l&&(l.exit(),i=!0)),n===e.promise?u(tf("Promise-chain cycle")):(r=uf(n))?wp(r,n,c,u):c(n)):u(o)}catch(rI){l&&!i&&l.exit(),u(rI)}},df=function(e,t){e.notified||(e.notified=!0,Gp((function(){for(var n,r=e.reactions;n=r.get();)lf(n,e);e.notified=!1,t&&!e.rejection&&ff(e)})))},pf=function(e,t,n){var r,i;sf?((r=nf.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),kp.dispatchEvent(r)):r={promise:t,reason:n},!Yp&&(i=kp["on"+e])?i(r):e===cf&&Vp("Unhandled promise rejection",n)},ff=function(e){wp(Up,kp,(function(){var t,n=e.facade,r=e.value;if(hf(e)&&(t=Fp((function(){Mp?rf.emit("unhandledRejection",r,n):pf(cf,n,r)})),e.rejection=Mp||hf(e)?2:1,t.error))throw t.value}))},hf=function(e){return 1!==e.rejection&&!e.parent},gf=function(e){wp(Up,kp,(function(){var t=e.facade;Mp?rf.emit("rejectionHandled",t):pf("rejectionhandled",t,e.value)}))},vf=function(e,t,n){return function(r){e(t,r,n)}},mf=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,df(e,!0))},_f=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw tf("Promise can't be resolved itself");var r=uf(t);r?Gp((function(){var n={done:!1};try{wp(r,t,vf(_f,n,e),vf(mf,n,e))}catch(rI){mf(n,rI,e)}})):(e.value=t,e.state=1,df(e,!1))}catch(rI){mf({done:!1},rI,e)}}};if(Wp&&(ef=(Qp=function(e){Pp(this,ef),xp(e),wp(Tp,this);var t=$p(this);try{e(vf(_f,t),vf(mf,t))}catch(rI){mf(t,rI)}}).prototype,(Tp=function(e){Xp(this,{type:Kp,done:!1,notified:!1,parent:!1,reactions:new Bp,rejection:!1,state:0,value:void 0})}).prototype=Op(ef,"then",(function(e,t){var n=$p(this),r=of(jp(this,Qp));return n.parent=!0,r.ok=!Lp(e)||e,r.fail=Lp(t)&&t,r.domain=Mp?rf.domain:void 0,0==n.state?n.reactions.add(r):Gp((function(){lf(r,n)})),r.promise})),Cp=function(){var e=new Tp,t=$p(e);this.promise=e,this.resolve=vf(_f,t),this.reject=vf(mf,t)},zp.f=of=function(e){return e===Qp||void 0===e?new Cp(e):af(e)},Lp(Hp)&&Zp!==Object.prototype)){Sp=Zp.then,Jp||Op(Zp,"then",(function(e,t){var n=this;return new Qp((function(e,t){wp(Sp,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete Zp.constructor}catch(rI){}Dp&&Dp(Zp,ef)}Ep({global:!0,constructor:!0,wrap:!0,forced:Wp},{Promise:Qp}),Ap(Qp,Kp,!1),Rp(Kp);var yf=tp,bf=mp.CONSTRUCTOR||!Ws((function(e){yf.all(e).then(void 0,(function(){}))})),If=ot,Tf=mt,Cf=_p,Sf=Zd,Ef=Gs;Hi({target:"Promise",stat:!0,forced:bf},{all:function(e){var t=this,n=Cf.f(t),r=n.resolve,i=n.reject,o=Sf((function(){var n=Tf(t.resolve),o=[],a=0,s=1;Ef(e,(function(e){var c=a++,u=!1;s++,If(n,t,e).then((function(e){u||(u=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise}});var Mf=Hi,kf=mp.CONSTRUCTOR,wf=tp,Of=ve,Df=pe,Af=li,Rf=wf&&wf.prototype;if(Mf({target:"Promise",proto:!0,forced:kf,real:!0},{catch:function(e){return this.then(void 0,e)}}),Df(wf)){var xf=Of("Promise").prototype.catch;Rf.catch!==xf&&Af(Rf,"catch",xf,{unsafe:!0})}var Lf=ot,Nf=mt,Pf=_p,jf=Zd,Uf=Gs;Hi({target:"Promise",stat:!0,forced:bf},{race:function(e){var t=this,n=Pf.f(t),r=n.reject,i=jf((function(){var i=Nf(t.resolve);Uf(e,(function(e){Lf(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var Gf=ot,Vf=_p;Hi({target:"Promise",stat:!0,forced:mp.CONSTRUCTOR},{reject:function(e){var t=Vf.f(this);return Gf(t.reject,void 0,e),t.promise}});var Ff=Ke,Bf=Be,qf=_p,Hf=Hi,zf=mp.CONSTRUCTOR,Kf=function(e,t){if(Ff(e),Bf(t)&&t.constructor===e)return t;var n=qf.f(e);return(0,n.resolve)(t),n.promise};ve("Promise"),Hf({target:"Promise",stat:!0,forced:zf},{resolve:function(e){return Kf(this,e)}}),window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;var Wf,Yf=function(){if(Wf)return Wf;Wf=new window.AudioContext({sampleRate:48e3});var e=function e(){"suspended"===Wf.state?(Wf.resume(),document.removeEventListener("click",e)):"interrupted"===Wf.state?Wf.resume():document.removeEventListener("click",e)};return document.addEventListener("click",e),Wf.onstatechange=function(){e()},Wf},Jf="input",$f="output";function Xf(e){return Zf.apply(this,arguments)}function Zf(){return(Zf=c(a().mark((function e(t){var n,r,i,o,s,c,u,l,d,p,f,h,g,v;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.sdkAppId,r=t.userId,i=t.userSig,o=t.timestamp,s="https://schedule.rtc.qq.com/api/v1/audioAiAuth?sdkAppId=".concat(n,"&userId=").concat(r,"&userSig=").concat(i,"&timestamp=").concat(o),e.next=4,fetch(s);case 4:return c=e.sent,e.next=7,c.json();case 7:if(u=e.sent,l=u.data,d=l.errCode,p=l.errMsg,f=l.sign,"1"!==(h=l.status)){e.next=15;break}return e.abrupt("return",{auth:!0,sign:f,status:h,message:p});case 15:g="Init RTCAIDenoiser failed.",v="",e.t0=d,e.next=1===e.t0?20:2===e.t0?22:3===e.t0?24:4===e.t0?26:5===e.t0?28:6===e.t0?30:32;break;case 20:return v="Please check your params.",e.abrupt("break",32);case 22:return v="You need to buy packages. Refer to: https://cloud.tencent.com/document/product/647/44247",e.abrupt("break",32);case 24:return v="Server is invalid. Please contact our engineer. ",e.abrupt("break",32);case 26:return v="Your packages is not active. Refer to: https://cloud.tencent.com/document/product/647/44247",e.abrupt("break",32);case 28:return v="Your packages is expired. Refer to: https://cloud.tencent.com/document/product/647/44247",e.abrupt("break",32);case 30:return v="Your version is not supported.",e.abrupt("break",32);case 32:return e.abrupt("return",{auth:!1,status:h,message:p?"".concat(g," Reason: ").concat(p,". ").concat(v):"".concat(g,", ").concat(v)});case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qf={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var c,u,l=this._events[s],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,i),!0;case 5:return l.fn.call(l.context,t,r,i,o),!0;case 6:return l.fn.call(l.context,t,r,i,o,a),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var p,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,i);break;default:if(!c)for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];l[u].fn.apply(l[u].context,c)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var c=0,u=[],l=s.length;c<l;c++)(s[c].fn!==t||i&&!s[c].once||r&&s[c].context!==r)&&u.push(s[c]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(Qf);var eh=Qf.exports,th="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,nh=$t,rh=rn,ih=RangeError,oh=function(e){if(void 0===e)return 0;var t=nh(e),n=rh(t);if(t!==n)throw ih("Wrong length or index");return n},ah=Array,sh=Math.abs,ch=Math.pow,uh=Math.floor,lh=Math.log,dh=Math.LN2,ph=ee,fh=en,hh=an,gh=function(e){for(var t=ph(this),n=hh(t),r=arguments.length,i=fh(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,a=void 0===o?n:fh(o,n);a>i;)t[i++]=e;return t},vh=F,mh=k,_h=Ye,yh=th,bh=qr,Ih=cr,Th=hc,Ch=h,Sh=Bs,Eh=$t,Mh=rn,kh=oh,wh={pack:function(e,t,n){var r,i,o,a=ah(n),s=8*n-t-1,c=(1<<s)-1,u=c>>1,l=23===t?ch(2,-24)-ch(2,-77):0,d=e<0||0===e&&1/e<0?1:0,p=0;for((e=sh(e))!=e||1/0===e?(i=e!=e?1:0,r=c):(r=uh(lh(e)/dh),e*(o=ch(2,-r))<1&&(r--,o*=2),(e+=r+u>=1?l/o:l*ch(2,1-u))*o>=2&&(r++,o/=2),r+u>=c?(i=0,r=c):r+u>=1?(i=(e*o-1)*ch(2,t),r+=u):(i=e*ch(2,u-1)*ch(2,t),r=0));t>=8;)a[p++]=255&i,i/=256,t-=8;for(r=r<<t|i,s+=t;s>0;)a[p++]=255&r,r/=256,s-=8;return a[--p]|=128*d,a},unpack:function(e,t){var n,r=e.length,i=8*r-t-1,o=(1<<i)-1,a=o>>1,s=i-7,c=r-1,u=e[c--],l=127&u;for(u>>=7;s>0;)l=256*l+e[c--],s-=8;for(n=l&(1<<-s)-1,l>>=-s,s+=t;s>0;)n=256*n+e[c--],s-=8;if(0===l)l=1-a;else{if(l===o)return n?NaN:u?-1/0:1/0;n+=ch(2,t),l-=a}return(u?-1:1)*n*ch(2,l-t)}},Oh=Qi,Dh=Mo,Ah=di.f,Rh=$e.f,xh=gh,Lh=_a,Nh=fo,Ph=bh.PROPER,jh=bh.CONFIGURABLE,Uh=Tr.get,Gh=Tr.set,Vh="ArrayBuffer",Fh="DataView",Bh="Wrong index",qh=vh.ArrayBuffer,Hh=qh,zh=Hh&&Hh.prototype,Kh=vh.DataView,Wh=Kh&&Kh.prototype,Yh=Object.prototype,Jh=vh.Array,$h=vh.RangeError,Xh=mh(xh),Zh=mh([].reverse),Qh=wh.pack,eg=wh.unpack,tg=function(e){return[255&e]},ng=function(e){return[255&e,e>>8&255]},rg=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},ig=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},og=function(e){return Qh(e,23,4)},ag=function(e){return Qh(e,52,8)},sg=function(e,t){Rh(e.prototype,t,{get:function(){return Uh(this)[t]}})},cg=function(e,t,n,r){var i=kh(n),o=Uh(e);if(i+t>o.byteLength)throw $h(Bh);var a=Uh(o.buffer).bytes,s=i+o.byteOffset,c=Lh(a,s,s+t);return r?c:Zh(c)},ug=function(e,t,n,r,i,o){var a=kh(n),s=Uh(e);if(a+t>s.byteLength)throw $h(Bh);for(var c=Uh(s.buffer).bytes,u=a+s.byteOffset,l=r(+i),d=0;d<t;d++)c[u+d]=l[o?d:t-d-1]};if(yh){var lg=Ph&&qh.name!==Vh;if(Ch((function(){qh(1)}))&&Ch((function(){new qh(-1)}))&&!Ch((function(){return new qh,new qh(1.5),new qh(NaN),1!=qh.length||lg&&!jh})))lg&&jh&&Ih(qh,"name",Vh);else{(Hh=function(e){return Sh(this,zh),new qh(kh(e))}).prototype=zh;for(var dg,pg=Ah(qh),fg=0;pg.length>fg;)(dg=pg[fg++])in Hh||Ih(Hh,dg,qh[dg]);zh.constructor=Hh}Dh&&Oh(Wh)!==Yh&&Dh(Wh,Yh);var hg=new Kh(new Hh(2)),gg=mh(Wh.setInt8);hg.setInt8(0,2147483648),hg.setInt8(1,2147483649),!hg.getInt8(0)&&hg.getInt8(1)||Th(Wh,{setInt8:function(e,t){gg(this,e,t<<24>>24)},setUint8:function(e,t){gg(this,e,t<<24>>24)}},{unsafe:!0})}else zh=(Hh=function(e){Sh(this,zh);var t=kh(e);Gh(this,{bytes:Xh(Jh(t),0),byteLength:t}),_h||(this.byteLength=t)}).prototype,Wh=(Kh=function(e,t,n){Sh(this,Wh),Sh(e,zh);var r=Uh(e).byteLength,i=Eh(t);if(i<0||i>r)throw $h("Wrong offset");if(i+(n=void 0===n?r-i:Mh(n))>r)throw $h("Wrong length");Gh(this,{buffer:e,byteLength:n,byteOffset:i}),_h||(this.buffer=e,this.byteLength=n,this.byteOffset=i)}).prototype,_h&&(sg(Hh,"byteLength"),sg(Kh,"buffer"),sg(Kh,"byteLength"),sg(Kh,"byteOffset")),Th(Wh,{getInt8:function(e){return cg(this,1,e)[0]<<24>>24},getUint8:function(e){return cg(this,1,e)[0]},getInt16:function(e){var t=cg(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=cg(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return ig(cg(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return ig(cg(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return eg(cg(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return eg(cg(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){ug(this,1,e,tg,t)},setUint8:function(e,t){ug(this,1,e,tg,t)},setInt16:function(e,t){ug(this,2,e,ng,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){ug(this,2,e,ng,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){ug(this,4,e,rg,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){ug(this,4,e,rg,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){ug(this,4,e,og,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){ug(this,8,e,ag,t,arguments.length>2?arguments[2]:void 0)}});Nh(Hh,Vh),Nh(Kh,Fh);var vg={ArrayBuffer:Hh,DataView:Kh},mg=Hi,_g=k,yg=h,bg=Ke,Ig=en,Tg=rn,Cg=Hl,Sg=vg.ArrayBuffer,Eg=vg.DataView,Mg=Eg.prototype,kg=_g(Sg.prototype.slice),wg=_g(Mg.getUint8),Og=_g(Mg.setUint8);mg({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:yg((function(){return!new Sg(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(kg&&void 0===t)return kg(bg(this),e);for(var n=bg(this).byteLength,r=Ig(e,n),i=Ig(void 0===t?n:t,n),o=new(Cg(this,Sg))(Tg(i-r)),a=new Eg(this),s=new Eg(o),c=0;r<i;)Og(s,c++,wg(a,r++));return o}});var Dg,Ag,Rg,xg={exports:{}},Lg=th,Ng=Ye,Pg=F,jg=pe,Ug=Be,Gg=re,Vg=us,Fg=ft,Bg=cr,qg=li,Hg=$e.f,zg=at,Kg=Qi,Wg=Mo,Yg=Ge,Jg=ce,$g=Tr.enforce,Xg=Tr.get,Zg=Pg.Int8Array,Qg=Zg&&Zg.prototype,ev=Pg.Uint8ClampedArray,tv=ev&&ev.prototype,nv=Zg&&Kg(Zg),rv=Qg&&Kg(Qg),iv=Object.prototype,ov=Pg.TypeError,av=Yg("toStringTag"),sv=Jg("TYPED_ARRAY_TAG"),cv="TypedArrayConstructor",uv=Lg&&!!Wg&&"Opera"!==Vg(Pg.opera),lv=!1,dv={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},pv={BigInt64Array:8,BigUint64Array:8},fv=function(e){var t=Kg(e);if(Ug(t)){var n=Xg(t);return n&&Gg(n,cv)?n.TypedArrayConstructor:fv(t)}},hv=function(e){if(!Ug(e))return!1;var t=Vg(e);return Gg(dv,t)||Gg(pv,t)};for(Dg in dv)(Rg=(Ag=Pg[Dg])&&Ag.prototype)?$g(Rg).TypedArrayConstructor=Ag:uv=!1;for(Dg in pv)(Rg=(Ag=Pg[Dg])&&Ag.prototype)&&($g(Rg).TypedArrayConstructor=Ag);if((!uv||!jg(nv)||nv===Function.prototype)&&(nv=function(){throw ov("Incorrect invocation")},uv))for(Dg in dv)Pg[Dg]&&Wg(Pg[Dg],nv);if((!uv||!rv||rv===iv)&&(rv=nv.prototype,uv))for(Dg in dv)Pg[Dg]&&Wg(Pg[Dg].prototype,rv);if(uv&&Kg(tv)!==rv&&Wg(tv,rv),Ng&&!Gg(rv,av))for(Dg in lv=!0,Hg(rv,av,{get:function(){return Ug(this)?this[sv]:void 0}}),dv)Pg[Dg]&&Bg(Pg[Dg],sv,Dg);var gv={NATIVE_ARRAY_BUFFER_VIEWS:uv,TYPED_ARRAY_TAG:lv&&sv,aTypedArray:function(e){if(hv(e))return e;throw ov("Target is not a typed array")},aTypedArrayConstructor:function(e){if(jg(e)&&(!Wg||zg(nv,e)))return e;throw ov(Fg(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,r){if(Ng){if(n)for(var i in dv){var o=Pg[i];if(o&&Gg(o.prototype,e))try{delete o.prototype[e]}catch(rI){try{o.prototype[e]=t}catch(s){}}}rv[e]&&!n||qg(rv,e,n?t:uv&&Qg[e]||t,r)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(Ng){if(Wg){if(n)for(r in dv)if((i=Pg[r])&&Gg(i,e))try{delete i[e]}catch(rI){}if(nv[e]&&!n)return;try{return qg(nv,e,n?t:uv&&nv[e]||t)}catch(rI){}}for(r in dv)!(i=Pg[r])||i[e]&&!n||qg(i,e,t)}},getTypedArrayConstructor:fv,isView:function(e){if(!Ug(e))return!1;var t=Vg(e);return"DataView"===t||Gg(dv,t)||Gg(pv,t)},isTypedArray:hv,TypedArray:nv,TypedArrayPrototype:rv},vv=F,mv=h,_v=Ws,yv=gv.NATIVE_ARRAY_BUFFER_VIEWS,bv=vv.ArrayBuffer,Iv=vv.Int8Array,Tv=!yv||!mv((function(){Iv(1)}))||!mv((function(){new Iv(-1)}))||!_v((function(e){new Iv,new Iv(null),new Iv(1.5),new Iv(e)}),!0)||mv((function(){return 1!==new Iv(new bv(2),1,void 0).length})),Cv=Be,Sv=Math.floor,Ev=Number.isInteger||function(e){return!Cv(e)&&isFinite(e)&&Sv(e)===e},Mv=$t,kv=RangeError,wv=function(e){var t=Mv(e);if(t<0)throw kv("The argument can't be less than 0");return t},Ov=RangeError,Dv=function(e,t){var n=wv(e);if(n%t)throw Ov("Wrong offset");return n},Av=us,Rv=k("".slice),xv=Rt,Lv=TypeError,Nv=function(e){var t=xv(e,"number");if("number"==typeof t)throw Lv("Can't convert number to bigint");return BigInt(t)},Pv=$a,jv=ot,Uv=Gl,Gv=ee,Vv=an,Fv=Ts,Bv=gs,qv=es,Hv=function(e){return"Big"===Rv(Av(e),0,3)},zv=gv.aTypedArrayConstructor,Kv=Nv,Wv=$a,Yv=R,Jv=ee,$v=an,Xv=gl,Zv=k([].push),Qv=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,a=7==e,s=5==e||o;return function(c,u,l,d){for(var p,f,h=Jv(c),g=Yv(h),v=Wv(u,l),m=$v(g),_=0,y=d||Xv,b=t?y(c,m):n||a?y(c,0):void 0;m>_;_++)if((s||_ in g)&&(f=v(p=g[_],_,h),e))if(t)b[_]=f;else if(f)switch(e){case 3:return!0;case 5:return p;case 6:return _;case 2:Zv(b,p)}else switch(e){case 4:return!1;case 7:Zv(b,p)}return o?-1:r||i?i:b}},em={forEach:Qv(0),map:Qv(1),filter:Qv(2),some:Qv(3),every:Qv(4),find:Qv(5),findIndex:Qv(6),filterReject:Qv(7)},tm=Hi,nm=F,rm=ot,im=Ye,om=Tv,am=gv,sm=vg,cm=Bs,um=or,lm=cr,dm=Ev,pm=rn,fm=oh,hm=Dv,gm=Nt,vm=re,mm=us,_m=Be,ym=dt,bm=Kn,Im=at,Tm=Mo,Cm=di.f,Sm=function(e){var t,n,r,i,o,a,s,c,u=Uv(this),l=Gv(e),d=arguments.length,p=d>1?arguments[1]:void 0,f=void 0!==p,h=Bv(l);if(h&&!qv(h))for(c=(s=Fv(l,h)).next,l=[];!(a=jv(c,s)).done;)l.push(a.value);for(f&&d>2&&(p=Pv(p,arguments[2])),n=Vv(l),r=new(zv(u))(n),i=Hv(r),t=0;n>t;t++)o=f?p(l[t],t):l[t],r[t]=i?Kv(o):+o;return r},Em=em.forEach,Mm=yc,km=$e,wm=Cr,Om=Xs,Dm=Tr.get,Am=Tr.set,Rm=Tr.enforce,xm=km.f,Lm=wm.f,Nm=Math.round,Pm=nm.RangeError,jm=sm.ArrayBuffer,Um=jm.prototype,Gm=sm.DataView,Vm=am.NATIVE_ARRAY_BUFFER_VIEWS,Fm=am.TYPED_ARRAY_TAG,Bm=am.TypedArray,qm=am.TypedArrayPrototype,Hm=am.aTypedArrayConstructor,zm=am.isTypedArray,Km="BYTES_PER_ELEMENT",Wm="Wrong length",Ym=function(e,t){Hm(e);for(var n=0,r=t.length,i=new e(r);r>n;)i[n]=t[n++];return i},Jm=function(e,t){xm(e,t,{get:function(){return Dm(this)[t]}})},$m=function(e){var t;return Im(Um,e)||"ArrayBuffer"==(t=mm(e))||"SharedArrayBuffer"==t},Xm=function(e,t){return zm(e)&&!ym(t)&&t in e&&dm(+t)&&t>=0},Zm=function(e,t){return t=gm(t),Xm(e,t)?um(2,e[t]):Lm(e,t)},Qm=function(e,t,n){return t=gm(t),!(Xm(e,t)&&_m(n)&&vm(n,"value"))||vm(n,"get")||vm(n,"set")||n.configurable||vm(n,"writable")&&!n.writable||vm(n,"enumerable")&&!n.enumerable?xm(e,t,n):(e[t]=n.value,e)};im?(Vm||(wm.f=Zm,km.f=Qm,Jm(qm,"buffer"),Jm(qm,"byteOffset"),Jm(qm,"byteLength"),Jm(qm,"length")),tm({target:"Object",stat:!0,forced:!Vm},{getOwnPropertyDescriptor:Zm,defineProperty:Qm}),xg.exports=function(e,t,n){var r=e.match(/\d+$/)[0]/8,i=e+(n?"Clamped":"")+"Array",o="get"+e,a="set"+e,s=nm[i],c=s,u=c&&c.prototype,l={},d=function(e,t){xm(e,t,{get:function(){return function(e,t){var n=Dm(e);return n.view[o](t*r+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,i){var o=Dm(e);n&&(i=(i=Nm(i))<0?0:i>255?255:255&i),o.view[a](t*r+o.byteOffset,i,!0)}(this,t,e)},enumerable:!0})};Vm?om&&(c=t((function(e,t,n,i){return cm(e,u),Om(_m(t)?$m(t)?void 0!==i?new s(t,hm(n,r),i):void 0!==n?new s(t,hm(n,r)):new s(t):zm(t)?Ym(c,t):rm(Sm,c,t):new s(fm(t)),e,c)})),Tm&&Tm(c,Bm),Em(Cm(s),(function(e){e in c||lm(c,e,s[e])})),c.prototype=u):(c=t((function(e,t,n,i){cm(e,u);var o,a,s,l=0,p=0;if(_m(t)){if(!$m(t))return zm(t)?Ym(c,t):rm(Sm,c,t);o=t,p=hm(n,r);var f=t.byteLength;if(void 0===i){if(f%r)throw Pm(Wm);if((a=f-p)<0)throw Pm(Wm)}else if((a=pm(i)*r)+p>f)throw Pm(Wm);s=a/r}else s=fm(t),o=new jm(a=s*r);for(Am(e,{buffer:o,byteOffset:p,byteLength:a,length:s,view:new Gm(o)});l<s;)d(e,l++)})),Tm&&Tm(c,Bm),u=c.prototype=bm(qm)),u.constructor!==c&&lm(u,"constructor",c),Rm(u).TypedArrayConstructor=c,Fm&&lm(u,Fm,i);var p=c!=s;l[i]=c,tm({global:!0,constructor:!0,forced:p,sham:!Vm},l),Km in c||lm(c,Km,r),Km in u||lm(u,Km,r),Mm(i)}):xg.exports=function(){},(0,xg.exports)("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var e_=ft,t_=TypeError,n_=ee,r_=en,i_=an,o_=function(e,t){if(!delete e[t])throw t_("Cannot delete property "+e_(t)+" of "+e_(e))},a_=Math.min,s_=[].copyWithin||function(e,t){var n=n_(this),r=i_(n),i=r_(e,r),o=r_(t,r),a=arguments.length>2?arguments[2]:void 0,s=a_((void 0===a?r:r_(a,r))-o,r-i),c=1;for(o<i&&i<o+s&&(c=-1,o+=s-1,i+=s-1);s-- >0;)o in n?n[i]=n[o]:o_(n,i),i+=c,o+=c;return n},c_=gv,u_=k(s_),l_=c_.aTypedArray;(0,c_.exportTypedArrayMethod)("copyWithin",(function(e,t){return u_(l_(this),e,t,arguments.length>2?arguments[2]:void 0)}));var d_=em.every,p_=gv.aTypedArray;(0,gv.exportTypedArrayMethod)("every",(function(e){return d_(p_(this),e,arguments.length>1?arguments[1]:void 0)}));var f_=gh,h_=Nv,g_=us,v_=ot,m_=h,__=gv.aTypedArray,y_=gv.exportTypedArrayMethod,b_=k("".slice);y_("fill",(function(e){var t=arguments.length;__(this);var n="Big"===b_(g_(this),0,3)?h_(e):+e;return v_(f_,this,n,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),m_((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e})));var I_=an,T_=Hl,C_=gv.aTypedArrayConstructor,S_=gv.getTypedArrayConstructor,E_=function(e){return C_(T_(e,S_(e)))},M_=function(e,t){for(var n=0,r=I_(t),i=new e(r);r>n;)i[n]=t[n++];return i},k_=E_,w_=em.filter,O_=function(e,t){return M_(k_(e),t)},D_=gv.aTypedArray;(0,gv.exportTypedArrayMethod)("filter",(function(e){var t=w_(D_(this),e,arguments.length>1?arguments[1]:void 0);return O_(this,t)}));var A_=em.find,R_=gv.aTypedArray;(0,gv.exportTypedArrayMethod)("find",(function(e){return A_(R_(this),e,arguments.length>1?arguments[1]:void 0)}));var x_=em.findIndex,L_=gv.aTypedArray;(0,gv.exportTypedArrayMethod)("findIndex",(function(e){return x_(L_(this),e,arguments.length>1?arguments[1]:void 0)}));var N_=em.forEach,P_=gv.aTypedArray;(0,gv.exportTypedArrayMethod)("forEach",(function(e){N_(P_(this),e,arguments.length>1?arguments[1]:void 0)}));var j_=dn.includes,U_=gv.aTypedArray;(0,gv.exportTypedArrayMethod)("includes",(function(e){return j_(U_(this),e,arguments.length>1?arguments[1]:void 0)}));var G_=dn.indexOf,V_=gv.aTypedArray;(0,gv.exportTypedArrayMethod)("indexOf",(function(e){return G_(V_(this),e,arguments.length>1?arguments[1]:void 0)}));var F_=F,B_=h,q_=k,H_=gv,z_=oa,K_=Ge("iterator"),W_=F_.Uint8Array,Y_=q_(z_.values),J_=q_(z_.keys),$_=q_(z_.entries),X_=H_.aTypedArray,Z_=H_.exportTypedArrayMethod,Q_=W_&&W_.prototype,ey=!B_((function(){Q_[K_].call([1])})),ty=!!Q_&&Q_.values&&Q_[K_]===Q_.values&&"values"===Q_.values.name,ny=function(){return Y_(X_(this))};Z_("entries",(function(){return $_(X_(this))}),ey),Z_("keys",(function(){return J_(X_(this))}),ey),Z_("values",ny,ey||!ty,{name:"values"}),Z_(K_,ny,ey||!ty,{name:"values"});var ry=gv.aTypedArray,iy=gv.exportTypedArrayMethod,oy=k([].join);iy("join",(function(e){return oy(ry(this),e)}));var ay=h,sy=Jl,cy=G,uy=$t,ly=an,dy=function(e,t){var n=[][e];return!!n&&ay((function(){n.call(null,t||function(){return 1},1)}))},py=Math.min,fy=[].lastIndexOf,hy=!!fy&&1/[1].lastIndexOf(1,-0)<0,gy=dy("lastIndexOf"),vy=hy||!gy?function(e){if(hy)return sy(fy,this,arguments)||0;var t=cy(this),n=ly(t),r=n-1;for(arguments.length>1&&(r=py(r,uy(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:fy,my=Jl,_y=vy,yy=gv.aTypedArray;(0,gv.exportTypedArrayMethod)("lastIndexOf",(function(e){var t=arguments.length;return my(_y,yy(this),t>1?[e,arguments[1]]:[e])}));var by=em.map,Iy=E_,Ty=gv.aTypedArray;(0,gv.exportTypedArrayMethod)("map",(function(e){return by(Ty(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(Iy(e))(t)}))}));var Cy=mt,Sy=ee,Ey=R,My=an,ky=TypeError,wy=function(e){return function(t,n,r,i){Cy(n);var o=Sy(t),a=Ey(o),s=My(o),c=e?s-1:0,u=e?-1:1;if(r<2)for(;;){if(c in a){i=a[c],c+=u;break}if(c+=u,e?c<0:s<=c)throw ky("Reduce of empty array with no initial value")}for(;e?c>=0:s>c;c+=u)c in a&&(i=n(i,a[c],c,o));return i}},Oy={left:wy(!1),right:wy(!0)},Dy=Oy.left,Ay=gv.aTypedArray;(0,gv.exportTypedArrayMethod)("reduce",(function(e){var t=arguments.length;return Dy(Ay(this),e,t,t>1?arguments[1]:void 0)}));var Ry=Oy.right,xy=gv.aTypedArray;(0,gv.exportTypedArrayMethod)("reduceRight",(function(e){var t=arguments.length;return Ry(xy(this),e,t,t>1?arguments[1]:void 0)}));var Ly=gv.aTypedArray,Ny=gv.exportTypedArrayMethod,Py=Math.floor;Ny("reverse",(function(){for(var e,t=this,n=Ly(t).length,r=Py(n/2),i=0;i<r;)e=t[i],t[i++]=t[--n],t[n]=e;return t}));var jy=F,Uy=ot,Gy=gv,Vy=an,Fy=Dv,By=ee,qy=h,Hy=jy.RangeError,zy=jy.Int8Array,Ky=zy&&zy.prototype,Wy=Ky&&Ky.set,Yy=Gy.aTypedArray,Jy=Gy.exportTypedArrayMethod,$y=!qy((function(){var e=new Uint8ClampedArray(2);return Uy(Wy,e,{length:1,0:3},1),3!==e[1]})),Xy=$y&&Gy.NATIVE_ARRAY_BUFFER_VIEWS&&qy((function(){var e=new zy(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));Jy("set",(function(e){Yy(this);var t=Fy(arguments.length>1?arguments[1]:void 0,1),n=By(e);if($y)return Uy(Wy,this,n,t);var r=this.length,i=Vy(n),o=0;if(i+t>r)throw Hy("Wrong length");for(;o<i;)this[t+o]=n[o++]}),!$y||Xy);var Zy=E_,Qy=ju,eb=gv.aTypedArray;(0,gv.exportTypedArrayMethod)("slice",(function(e,t){for(var n=Qy(eb(this),e,t),r=Zy(this),i=0,o=n.length,a=new r(o);o>i;)a[i]=n[i++];return a}),h((function(){new Int8Array(1).slice()})));var tb=em.some,nb=gv.aTypedArray;(0,gv.exportTypedArrayMethod)("some",(function(e){return tb(nb(this),e,arguments.length>1?arguments[1]:void 0)}));var rb=_a,ib=Math.floor,ob=function(e,t){var n=e.length,r=ib(n/2);return n<8?ab(e,t):sb(e,ob(rb(e,0,r),t),ob(rb(e,r),t),t)},ab=function(e,t){for(var n,r,i=e.length,o=1;o<i;){for(r=o,n=e[o];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},sb=function(e,t,n,r){for(var i=t.length,o=n.length,a=0,s=0;a<i||s<o;)e[a+s]=a<i&&s<o?r(t[a],n[s])<=0?t[a++]:n[s++]:a<i?t[a++]:n[s++];return e},cb=ob,ub=me.match(/firefox\/(\d+)/i),lb=!!ub&&+ub[1],db=/MSIE|Trident/.test(me),pb=me.match(/AppleWebKit\/(\d+)\./),fb=!!pb&&+pb[1],hb=k,gb=h,vb=mt,mb=cb,_b=lb,yb=db,bb=Se,Ib=fb,Tb=gv.aTypedArray,Cb=gv.exportTypedArrayMethod,Sb=F.Uint16Array,Eb=Sb&&hb(Sb.prototype.sort),Mb=!(!Eb||gb((function(){Eb(new Sb(2),null)}))&&gb((function(){Eb(new Sb(2),{})}))),kb=!!Eb&&!gb((function(){if(bb)return bb<74;if(_b)return _b<67;if(yb)return!0;if(Ib)return Ib<602;var e,t,n=new Sb(516),r=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(Eb(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0}));Cb("sort",(function(e){return void 0!==e&&vb(e),kb?Eb(this,e):mb(Tb(this),function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e))}),!kb||Mb);var wb=rn,Ob=en,Db=E_,Ab=gv.aTypedArray;(0,gv.exportTypedArrayMethod)("subarray",(function(e,t){var n=Ab(this),r=n.length,i=Ob(e,r);return new(Db(n))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,wb((void 0===t?r:Ob(t,r))-i))}));var Rb=Jl,xb=gv,Lb=h,Nb=ju,Pb=F.Int8Array,jb=xb.aTypedArray,Ub=xb.exportTypedArrayMethod,Gb=[].toLocaleString,Vb=!!Pb&&Lb((function(){Gb.call(new Pb(1))}));Ub("toLocaleString",(function(){return Rb(Gb,Vb?Nb(jb(this)):jb(this),Nb(arguments))}),Lb((function(){return[1,2].toLocaleString()!=new Pb([1,2]).toLocaleString()}))||!Lb((function(){Pb.prototype.toLocaleString.call([1,2])})));var Fb=gv.exportTypedArrayMethod,Bb=h,qb=k,Hb=F.Uint8Array,zb=Hb&&Hb.prototype||{},Kb=[].toString,Wb=qb([].join);Bb((function(){Kb.call({})}))&&(Kb=function(){return Wb(this)});var Yb=zb.toString!=Kb;Fb("toString",Kb,Yb),Hi({global:!0,constructor:!0,forced:!th},{DataView:vg.DataView});var Jb=yc,$b="ArrayBuffer",Xb=vg.ArrayBuffer;function Zb(e,t){t=t||{};var n=e.numberOfChannels,r=e.sampleRate,i=t.float32?3:1,o=3===i?32:16;return function(e,t,n,r,i){var o=i/8,a=r*o,s=new ArrayBuffer(44+e.length*o),c=new DataView(s);return Qb(c,0,"RIFF"),c.setUint32(4,36+e.length*o,!0),Qb(c,8,"WAVE"),Qb(c,12,"fmt "),c.setUint32(16,16,!0),c.setUint16(20,t,!0),c.setUint16(22,r,!0),c.setUint32(24,n,!0),c.setUint32(28,n*a,!0),c.setUint16(32,a,!0),c.setUint16(34,i,!0),Qb(c,36,"data"),c.setUint32(40,e.length*o,!0),1===t?function(e,t,n){for(var r=0;r<n.length;r++,t+=2){var i=Math.max(-1,Math.min(1,n[r]));e.setInt16(t,i<0?32768*i:32767*i,!0)}}(c,44,e):function(e,t,n){for(var r=0;r<n.length;r++,t+=4)e.setFloat32(t,n[r],!0)}(c,44,e),s}(2===n?function(e,t){for(var n=e.length+t.length,r=new Float32Array(n),i=0,o=0;i<n;)r[i++]=e[o],r[i++]=t[o],o++;return r}(e.getChannelData(0),e.getChannelData(1)):e.getChannelData(0),i,r,n,o)}function Qb(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))}Hi({global:!0,constructor:!0,forced:F.ArrayBuffer!==Xb},{ArrayBuffer:Xb}),Jb($b);var eI=function(){function e(t){u(this,e),this.audioContext_=t,this.inputPCM_=new Float32Array,this.outputPCM_=new Float32Array}return d(e,[{key:"onDump",value:function(e,t){if(t===Jf){var n=this.inputPCM_.length,r=new Float32Array(n+e[0].length);r.set(this.inputPCM_),r.set(e[0],n),this.inputPCM_=r}if(t===$f){var i=this.outputPCM_.length,o=new Float32Array(i+e[0].length);o.set(this.outputPCM_),o.set(e[0],i),this.outputPCM_=o}}},{key:"getBlob",value:function(e){var t=e===Jf?this.inputPCM_:this.outputPCM_,n=this.audioContext_.createBuffer(2,t.length,48e3);n.copyToChannel(t,0,0),n.copyToChannel(t,1,0);var r=Zb(n);return n=null,new window.Blob([new DataView(r)],{type:"audio/wav"})}},{key:"reset",value:function(){this.inputPCM_=new Float32Array,this.outputPCM_=new Float32Array}},{key:"destroy",value:function(){this.inputPCM_=null,this.outputPCM_=null}}]),e}(),tI=function(){function e(t){var n=this,r=t.sdkAppId,i=t.userId,o=t.audioContext,a=t.sign,s=t.status,c=t.worklet,l=t.timestamp,d=t.logger;u(this,e),this.audioContext_=o,this.destination_=this.audioContext_.createMediaStreamDestination(),this.gainNode_=this.audioContext_.createGain(),this.gainNode_.gain.value=1.1,this.log_=d,this.workletNode_=c,this.workletNode_.connect(this.gainNode_).connect(this.destination_),this.workletNode_.port.postMessage({type:"init",data:{sdkAppId:String(r),userId:i,timestamp:l,sign:a,status:s}}),this.workletNode_.port.onmessage=function(e){var t=e.data,r=t.type,i=t.data;if("ondump"===r&&n.isDumping_){var o=i.inputPCM,a=i.outputPCM;n.dump_.onDump(o,Jf),n.dump_.onDump(a,$f)}"dumped"===r&&n.dumped()},this.trackConstraint_={},this.localStream_=null,this.audioTrack_=null,this.source_=null,this.denoiserTrack_=null,this.enableDenoise_=!0,this.emitter_=new eh,this.dump_=new eI(this.audioContext_)}var t,n,i,o;return d(e,[{key:"dumped",value:function(){this.isDumping_=!1;var e=this.dump_.getBlob(Jf),t=this.dump_.getBlob($f);this.emitter_.emit("ondumpend",{blob:e,name:Jf}),this.emitter_.emit("ondumpend",{blob:t,name:$f}),this.dump_.reset()}},{key:"process",value:(o=c(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.localStream_=t,this.log_.info("RTCAIDenoiser: denoiser process stream ID: ".concat(t.getId(),".")),this.audioTrack_=null==t?void 0:t.getAudioTrack(),this.audioTrack_){e.next=5;break}throw new Error("RTCAIDenoiser: cannot process localStream without audioTrack.");case 5:return(n=new MediaStream).addTrack(this.audioTrack_),this.source_=this.audioContext_.createMediaStreamSource(n),e.next=10,this.source_.connect(this.workletNode_);case 10:return this.trackConstraint_=this.audioTrack_.getConstraints(),this.trackConstraint_.noiseSuppression=!1,e.next=14,this.audioTrack_.applyConstraints(this.trackConstraint_);case 14:return r=this.destination_.stream,this.denoiserTrack_=r.getAudioTracks()[0],e.next=18,this.localStream_.replaceTrack(this.denoiserTrack_);case 18:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"updateTrack",value:(i=c(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new MediaStream,e.next=3,n.addTrack(t);case 3:r=this.audioContext_.createMediaStreamSource(n),this.source_.disconnect(),r.connect(this.workletNode_),this.audioTrack_.stop(),this.audioTrack_=t,this.source_=r,this.log_.info("RTCAIDenoiser: ".concat(this.localStream_.getUserId()," updateTrack success."));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"disable",value:(n=c(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.enableDenoise_=!1,null===(t=this.workletNode_)||void 0===t||t.port.postMessage({type:"disable"}),this.trackConstraint_.noiseSuppression=!0,e.next=5,this.audioTrack_.applyConstraints(this.trackConstraint_);case 5:return this.log_.info("RTCAIDenoiser: disable ai denoiser."),e.abrupt("return",this.enableDenoise_);case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"enable",value:(t=c(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.enableDenoise_=!0,null===(t=this.workletNode_)||void 0===t||t.port.postMessage({type:"enable"}),this.trackConstraint_.noiseSuppression=!1,e.next=5,this.audioTrack_.applyConstraints(this.trackConstraint_);case 5:return this.log_.info("RTCAIDenoiser: enable ai denoiser."),e.abrupt("return",this.enableDenoise_);case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"startDump",value:function(){return this.isDumping_?(this.log_.info("RTCAIDenoiser: data is currently being dumped."),!1):(this.workletNode_.port.postMessage({type:"startDump"}),this.dump_?this.dump_.reset():this.dump_=new eI(this.audioContext_),this.isDumping_=!0,this.log_.info("RTCAIDenoiser: start dump data."),!0)}},{key:"stopDump",value:function(){this.workletNode_.port.postMessage({type:"stopDump"}),this.isDumping_=!1,this.log_.info("RTCAIDenoiser: stop dump data.")}},{key:"getAudioTrack",value:function(){return this.audioTrack_}},{key:"getDenoiserTrack",value:function(){return this.denoiserTrack_}},{key:"enabled",get:function(){return this.enableDenoise_}},{key:"destroy",value:function(){var e,t,n,r,i,o,a;this.log_.info("RTCAIDenoiser: ".concat(this.localStream_.getUserId()," destroy processor.")),null===(e=this.localStream_)||void 0===e||e.stop(),null===(t=this.audioTrack_)||void 0===t||t.stop(),null===(n=this.workletNode_)||void 0===n||n.port.postMessage({type:"destroy"}),this.workletNode_.port.onmessage=null,null===(r=this.source_)||void 0===r||r.disconnect(),null===(i=this.destination_)||void 0===i||i.disconnect(),null===(o=this.workletNode_)||void 0===o||o.disconnect(),null===(a=this.dump_)||void 0===a||a.destroy(),this.emitter_.removeAllListeners()}},{key:"on",value:function(e,t,n){this.emitter_.on(e,t,n)}},{key:"off",value:function(e,t,n){"*"===e?this.emitter_.removeAllListeners():this.emitter_.off(e,t,n)}},{key:"resetDenoiser",value:function(e){if(r.default){var t=r.default.DenoiserMap;null!=t&&t.has(e.getUserId())&&t.delete(e.getUserId())}}}]),e}();r.default&&(r.default.addDenoiserProcessor=function(e){var t=e.processor,n=e.userId;if(r.default.DenoiserMap)r.default.DenoiserMap.set(n,t);else{var i=new Map;i.set(n,t),r.default.DenoiserMap=i}});var nI=function(){function e(t){var n=t.assetsPath;u(this,e),this.audioContext_=Yf(),this.assetsPath_=n,this.isLoaded_=!1}var t,n,i;return d(e,[{key:"createProcessor",value:(i=c(a().mark((function e(t){var n,i,s,c,u,l,d,p,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.default?r.default.Logger.loggerManager.createLogger({id:t.userId,userId:t.userId,sdkAppId:t.sdkAppId}):{info:console.log},i=String(Date.now()).slice(0,-3),e.next=4,Xf(o(o({},t),{},{timestamp:i}));case 4:if(s=e.sent,c=s.auth,u=s.sign,l=s.status,d=s.message,c){e.next=12;break}throw n.info("RTCAIDenoiser: ".concat(t.userId," auth result: ").concat(c,". Message: ").concat(d)),new Error(d);case 12:return e.next=14,this.load();case 14:return e.next=16,this.initWorklet();case 16:return p=e.sent,f=new tI(o(o({},t),{},{audioContext:this.audioContext_,timestamp:i,sign:u,status:l,worklet:p,logger:n})),n.info("RTCAIDenoiser: ".concat(t.userId," create denoiser processor success.")),r.default&&r.default.addDenoiserProcessor({processor:f,userId:t.userId}),e.abrupt("return",f);case 21:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"load",value:(n=c(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLoaded_){e.next=10;break}return e.prev=1,e.next=4,this.audioContext_.audioWorklet.addModule("".concat(this.assetsPath_,"/denoiser-wasm.js"));case 4:this.isLoaded_=!0,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Init assets from ".concat(this.assetsPath_," failed! Reason: ").concat(e.t0));case 10:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(){return n.apply(this,arguments)})},{key:"initWorklet",value:(t=c(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",new AudioWorkletNode(this.audioContext_,"trtc-denoiser-processor",{numberOfInputs:1,numberOfOutputs:1}));case 4:return e.prev=4,e.t0=e.catch(0),e.next=8,this.load();case 8:return e.abrupt("return",new AudioWorkletNode(this.audioContext_,"trtc-denoiser-processor",{numberOfInputs:1,numberOfOutputs:1}));case 9:case"end":return e.stop()}}),e,this,[[0,4]])}))),function(){return t.apply(this,arguments)})},{key:"destroy",value:function(){var e;null===(e=this.audioContext_)||void 0===e||e.close()}},{key:"isSupported",value:function(){return"AudioWorklet"in window&&"WebAssembly"in window}}]),e}();return nI}))}).call(this,n("c8ba"))},"59ed":function(e,t,n){var r=n("da84"),i=n("1626"),o=n("0d51"),a=r.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not a function")}},"5a0c":function(e,t,n){!function(t,n){e.exports=n()}(0,(function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",o="minute",a="hour",s="day",c="week",u="month",l="quarter",d="year",p="date",f="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},_={s:m,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+m(r,2,"0")+":"+m(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,u),o=n-i<0,a=t.clone().add(r+(o?-1:1),u);return+(-(r+(n-i)/(o?i-a:a-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:d,w:c,d:s,D:p,h:a,m:o,s:i,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",b={};b[y]=v;var I=function(e){return e instanceof E},T=function(e,t,n){var r;if(!e)return y;if("string"==typeof e)b[e]&&(r=e),t&&(b[e]=t,r=e);else{var i=e.name;b[i]=e,r=i}return!n&&r&&(y=r),r||!n&&y},C=function(e,t){if(I(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new E(n)},S=_;S.l=T,S.i=I,S.w=function(e,t){return C(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var E=function(){function v(e){this.$L=T(e.locale,null,!0),this.parse(e)}var m=v.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(h);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return S},m.isValid=function(){return!(this.$d.toString()===f)},m.isSame=function(e,t){var n=C(e);return this.startOf(t)<=n&&n<=this.endOf(t)},m.isAfter=function(e,t){return C(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<C(e)},m.$g=function(e,t,n){return S.u(e)?this[t]:this.set(n,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,t){var n=this,r=!!S.u(t)||t,l=S.p(e),f=function(e,t){var i=S.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(s)},h=function(e,t){return S.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},g=this.$W,v=this.$M,m=this.$D,_="set"+(this.$u?"UTC":"");switch(l){case d:return r?f(1,0):f(31,11);case u:return r?f(1,v):f(0,v+1);case c:var y=this.$locale().weekStart||0,b=(g<y?g+7:g)-y;return f(r?m-b:m+(6-b),v);case s:case p:return h(_+"Hours",0);case a:return h(_+"Minutes",1);case o:return h(_+"Seconds",2);case i:return h(_+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(e,t){var n,c=S.p(e),l="set"+(this.$u?"UTC":""),f=(n={},n[s]=l+"Date",n[p]=l+"Date",n[u]=l+"Month",n[d]=l+"FullYear",n[a]=l+"Hours",n[o]=l+"Minutes",n[i]=l+"Seconds",n[r]=l+"Milliseconds",n)[c],h=c===s?this.$D+(t-this.$W):t;if(c===u||c===d){var g=this.clone().set(p,1);g.$d[f](h),g.init(),this.$d=g.set(p,Math.min(this.$D,g.daysInMonth())).$d}else f&&this.$d[f](h);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[S.p(e)]()},m.add=function(r,l){var p,f=this;r=Number(r);var h=S.p(l),g=function(e){var t=C(f);return S.w(t.date(t.date()+Math.round(e*r)),f)};if(h===u)return this.set(u,this.$M+r);if(h===d)return this.set(d,this.$y+r);if(h===s)return g(1);if(h===c)return g(7);var v=(p={},p[o]=t,p[a]=n,p[i]=e,p)[h]||1,m=this.$d.getTime()+r*v;return S.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=S.z(this),o=this.$H,a=this.$m,s=this.$M,c=n.weekdays,u=n.months,l=function(e,n,i,o){return e&&(e[n]||e(t,r))||i[n].substr(0,o)},d=function(e){return S.s(o%12||12,e,"0")},p=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:S.s(s+1,2,"0"),MMM:l(n.monthsShort,s,u,3),MMMM:l(u,s),D:this.$D,DD:S.s(this.$D,2,"0"),d:String(this.$W),dd:l(n.weekdaysMin,this.$W,c,2),ddd:l(n.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(o),HH:S.s(o,2,"0"),h:d(1),hh:d(2),a:p(o,a,!0),A:p(o,a,!1),m:String(a),mm:S.s(a,2,"0"),s:String(this.$s),ss:S.s(this.$s,2,"0"),SSS:S.s(this.$ms,3,"0"),Z:i};return r.replace(g,(function(e,t){return t||h[e]||i.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,p,f){var h,g=S.p(p),v=C(r),m=(v.utcOffset()-this.utcOffset())*t,_=this-v,y=S.m(this,v);return y=(h={},h[d]=y/12,h[u]=y,h[l]=y/3,h[c]=(_-m)/6048e5,h[s]=(_-m)/864e5,h[a]=_/n,h[o]=_/t,h[i]=_/e,h)[g]||_,f?y:S.a(y)},m.daysInMonth=function(){return this.endOf(u).$D},m.$locale=function(){return b[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=T(e,t,!0);return r&&(n.$L=r),n},m.clone=function(){return S.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},v}(),M=E.prototype;return C.prototype=M,[["$ms",r],["$s",i],["$m",o],["$H",a],["$W",s],["$M",u],["$y",d],["$D",p]].forEach((function(e){M[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),C.extend=function(e,t){return e.$i||(e(t,E,C),e.$i=!0),C},C.locale=T,C.isDayjs=I,C.unix=function(e){return C(1e3*e)},C.en=b[y],C.Ls=b,C.p={},C}))},"5a34":function(e,t,n){var r=n("da84"),i=n("44e7"),o=r.TypeError;e.exports=function(e){if(i(e))throw o("The method doesn't accept regular expressions");return e}},"5c56":function(e,t,n){},"5c6c":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"5cce":function(e,t){e.exports={version:"0.24.0"}},"5d41":function(e,t,n){var r=n("23e7"),i=n("c65b"),o=n("861d"),a=n("825a"),s=n("c60d"),c=n("06cf"),u=n("e163");function l(e,t){var n,r,d=arguments.length<3?e:arguments[2];return a(e)===d?e[t]:(n=c.f(e,t),n?s(n)?n.value:void 0===n.get?void 0:i(n.get,d):o(r=u(e))?l(r,t,d):void 0)}r({target:"Reflect",stat:!0},{get:l})},"5e46":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("c199"),i=n("2033"),o=Object(r["a"])(i["b"]);t["b"]=o},"5e77":function(e,t,n){var r=n("83ab"),i=n("1a2d"),o=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=i(o,"name"),c=s&&"something"===function(){}.name,u=s&&(!r||r&&a(o,"name").configurable);e.exports={EXISTS:s,PROPER:c,CONFIGURABLE:u}},"5f02":function(e,t,n){"use strict";e.exports=function(e){return"object"===typeof e&&!0===e.isAxiosError}},"5f1a":function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("9b7e")},"5f5f":function(e,t,n){"use strict";n("68ef"),n("e3b3"),n("a526")},"605d":function(e,t,n){var r=n("c6b6"),i=n("da84");e.exports="process"==r(i.process)},6062:function(e,t,n){"use strict";var r=n("6d61"),i=n("6566");r("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},6069:function(e,t){e.exports="object"==typeof window},"60da":function(e,t,n){"use strict";var r=n("83ab"),i=n("e330"),o=n("c65b"),a=n("d039"),s=n("df75"),c=n("7418"),u=n("d1e7"),l=n("7b0b"),d=n("44ad"),p=Object.assign,f=Object.defineProperty,h=i([].concat);e.exports=!p||a((function(){if(r&&1!==p({b:1},p(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=p({},e)[n]||s(p({},t)).join("")!=i}))?function(e,t){var n=l(e),i=arguments.length,a=1,p=c.f,f=u.f;while(i>a){var g,v=d(arguments[a++]),m=p?h(s(v),p(v)):s(v),_=m.length,y=0;while(_>y)g=m[y++],r&&!o(f,v,g)||(n[g]=v[g])}return n}:p},"61ae":function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("1a04"),n("a71a"),n("4d75"),n("aec8"),n("b2cc")},"626a":function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n("7a23"),i=n("f344"),o=n("8da3"),a=n("c199"),s=n("1da4"),c=n("fe7e"),u=n("f691"),l=0;function d(e){e?(l||document.body.classList.add("van-toast--unclickable"),l++):l&&(l--,l||document.body.classList.remove("van-toast--unclickable"))}var p=n("ad06"),f=n("e41f"),h=n("543e"),[g,v]=Object(c["a"])("toast"),m=["show","overlay","transition","overlayClass","overlayStyle","closeOnClickOverlay"],_={icon:String,show:Boolean,type:Object(u["e"])("text"),overlay:Boolean,message:u["f"],iconSize:u["f"],duration:Object(u["b"])(2e3),position:Object(u["e"])("middle"),className:u["h"],iconPrefix:String,transition:Object(u["e"])("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:u["h"],overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean},y=Object(r["n"])({name:g,props:_,emits:["update:show"],setup(e,t){var n,{emit:a}=t,s=!1,c=()=>{var t=e.show&&e.forbidClick;s!==t&&(s=t,d(s))},u=e=>a("update:show",e),l=()=>{e.closeOnClick&&u(!1)},g=()=>clearTimeout(n),_=()=>{var{icon:t,type:n,iconSize:i,iconPrefix:o,loadingType:a}=e,s=t||"success"===n||"fail"===n;return s?Object(r["m"])(p["a"],{name:t||n,size:i,class:v("icon"),classPrefix:o},null):"loading"===n?Object(r["m"])(h["a"],{class:v("loading"),size:i,type:a},null):void 0},y=()=>{var{type:t,message:n}=e;if(Object(o["b"])(n)&&""!==n)return"html"===t?Object(r["m"])("div",{class:v("text"),innerHTML:String(n)},null):Object(r["m"])("div",{class:v("text")},[n])};return Object(r["X"])(()=>[e.show,e.forbidClick],c),Object(r["X"])(()=>[e.show,e.type,e.message,e.duration],()=>{g(),e.show&&e.duration>0&&(n=setTimeout(()=>{u(!1)},e.duration))}),Object(r["C"])(c),Object(r["D"])(c),()=>Object(r["m"])(f["a"],Object(r["t"])({class:[v([e.position,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:l,onClosed:g,"onUpdate:show":u},Object(i["e"])(e,m)),{default:()=>[_(),y()]})}}),b={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1},I=[],T=!1,C=Object(i["a"])({},b),S=new Map;function E(e){return Object(o["f"])(e)?e:{message:e}}function M(){var{instance:e,unmount:t}=Object(s["a"])({setup(){var n=Object(r["K"])(""),{open:i,state:o,close:a,toggle:c}=Object(s["b"])(),u=()=>{T&&(I=I.filter(t=>t!==e),t())},l=()=>{var e={onClosed:u,"onUpdate:show":c};return Object(r["m"])(y,Object(r["t"])(o,e),null)};return Object(r["X"])(n,e=>{o.message=e}),Object(r["o"])().render=l,{open:i,clear:a,message:n}}});return e}function k(){if(!I.length||T){var e=M();I.push(e)}return I[I.length-1]}function w(e){if(void 0===e&&(e={}),!i["c"])return{};var t=k(),n=E(e);return t.open(Object(i["a"])({},C,S.get(n.type||C.type),n)),t}var O=e=>t=>w(Object(i["a"])({type:e},E(t)));function D(e,t){"string"===typeof e?S.set(e,t):Object(i["a"])(C,e)}w.loading=O("loading"),w.success=O("success"),w.fail=O("fail"),w.clear=e=>{if(I.length)if(e)I.forEach(e=>{e.clear()}),I=[];else if(T){var t;null==(t=I.shift())||t.clear()}else I[0].clear()},w.setDefaultOptions=D,w.resetDefaultOptions=e=>{"string"===typeof e?S.delete(e):(C=Object(i["a"])({},b),S.clear())},w.allowMultiple=function(e){void 0===e&&(e=!0),T=e},w.install=e=>{e.use(Object(a["a"])(y)),e.config.globalProperties.$toast=w}},6547:function(e,t,n){var r=n("e330"),i=n("5926"),o=n("577e"),a=n("1d80"),s=r("".charAt),c=r("".charCodeAt),u=r("".slice),l=function(e){return function(t,n){var r,l,d=o(a(t)),p=i(n),f=d.length;return p<0||p>=f?e?"":void 0:(r=c(d,p),r<55296||r>56319||p+1===f||(l=c(d,p+1))<56320||l>57343?e?s(d,p):r:e?u(d,p,p+2):l-56320+(r-55296<<10)+65536)}};e.exports={codeAt:l(!1),charAt:l(!0)}},6566:function(e,t,n){"use strict";var r=n("9bf2").f,i=n("7c73"),o=n("e2cc"),a=n("0366"),s=n("19aa"),c=n("2266"),u=n("7dd0"),l=n("2626"),d=n("83ab"),p=n("f183").fastKey,f=n("69f3"),h=f.set,g=f.getterFor;e.exports={getConstructor:function(e,t,n,u){var l=e((function(e,r){s(e,f),h(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),d||(e.size=0),void 0!=r&&c(r,e[u],{that:e,AS_ENTRIES:n})})),f=l.prototype,v=g(t),m=function(e,t,n){var r,i,o=v(e),a=_(e,t);return a?a.value=n:(o.last=a={index:i=p(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=a),r&&(r.next=a),d?o.size++:e.size++,"F"!==i&&(o.index[i]=a)),e},_=function(e,t){var n,r=v(e),i=p(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return o(f,{clear:function(){var e=this,t=v(e),n=t.index,r=t.first;while(r)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete n[r.index],r=r.next;t.first=t.last=void 0,d?t.size=0:e.size=0},delete:function(e){var t=this,n=v(t),r=_(t,e);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),d?n.size--:t.size--}return!!r},forEach:function(e){var t,n=v(this),r=a(e,arguments.length>1?arguments[1]:void 0);while(t=t?t.next:n.first){r(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!_(this,e)}}),o(f,n?{get:function(e){var t=_(this,e);return t&&t.value},set:function(e,t){return m(this,0===e?0:e,t)}}:{add:function(e){return m(this,e=0===e?0:e,e)}}),d&&r(f,"size",{get:function(){return v(this).size}}),l},setStrong:function(e,t,n){var r=t+" Iterator",i=g(t),o=g(r);u(e,t,(function(e,t){h(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){var e=o(this),t=e.kind,n=e.last;while(n&&n.removed)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(t)}}},"65f0":function(e,t,n){var r=n("0b42");e.exports=function(e,t){return new(r(e))(0===t?0:t)}},"66b9":function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("e3b3"),n("bc1b")},"66fd":function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("8da3"),c=n("a3e2"),u=n("44bf"),[l,d]=Object(o["a"])("card"),p={tag:String,num:a["f"],desc:String,thumb:String,title:String,price:a["f"],centered:Boolean,lazyLoad:Boolean,currency:Object(a["e"])("¥"),thumbLink:String,originPrice:a["f"]},f=Object(i["n"])({name:l,props:p,emits:["click-thumb"],setup(e,t){var{slots:n,emit:r}=t,o=()=>n.title?n.title():e.title?Object(i["m"])("div",{class:[d("title"),"van-multi-ellipsis--l2"]},[e.title]):void 0,a=()=>{if(n.tag||e.tag)return Object(i["m"])("div",{class:d("tag")},[n.tag?n.tag():Object(i["m"])(c["a"],{mark:!0,type:"danger"},{default:()=>[e.tag]})])},l=()=>n.thumb?n.thumb():Object(i["m"])(u["a"],{src:e.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:e.lazyLoad},null),p=()=>{if(n.thumb||e.thumb)return Object(i["m"])("a",{href:e.thumbLink,class:d("thumb"),onClick:e=>r("click-thumb",e)},[l(),a()])},f=()=>n.desc?n.desc():e.desc?Object(i["m"])("div",{class:[d("desc"),"van-ellipsis"]},[e.desc]):void 0,h=()=>{var t=e.price.toString().split(".");return Object(i["m"])("div",null,[Object(i["m"])("span",{class:d("price-currency")},[e.currency]),Object(i["m"])("span",{class:d("price-integer")},[t[0]]),Object(i["l"])("."),Object(i["m"])("span",{class:d("price-decimal")},[t[1]])])};return()=>{var t,r=n.num||Object(s["b"])(e.num),a=n.price||Object(s["b"])(e.price),c=n["origin-price"]||Object(s["b"])(e.originPrice),u=r||a||c||n.bottom,l=a&&Object(i["m"])("div",{class:d("price")},[n.price?n.price():h()]),g=c&&Object(i["m"])("div",{class:d("origin-price")},[n["origin-price"]?n["origin-price"]():e.currency+" "+e.originPrice]),v=r&&Object(i["m"])("div",{class:d("num")},[n.num?n.num():"x"+e.num]),m=n.footer&&Object(i["m"])("div",{class:d("footer")},[n.footer()]),_=u&&Object(i["m"])("div",{class:d("bottom")},[null==(t=n["price-top"])?void 0:t.call(n),l,g,v,null==n.bottom?void 0:n.bottom()]);return Object(i["m"])("div",{class:d()},[Object(i["m"])("div",{class:d("header")},[p(),Object(i["m"])("div",{class:d("content",{centered:e.centered})},[Object(i["m"])("div",null,[o(),f(),null==n.tags?void 0:n.tags()]),_])]),m])}}}),h=Object(r["a"])(f);t["a"]=h},"68b4":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("7a23"),i=n("fe7e"),o=n("f691"),a=n("f344"),s=n("8da3"),c=n("b070"),u=n("ad06"),[l,d]=Object(i["a"])("cell"),p={icon:String,size:String,title:o["f"],value:o["f"],label:o["f"],center:Boolean,isLink:Boolean,border:o["g"],required:Boolean,iconPrefix:String,valueClass:o["h"],labelClass:o["h"],titleClass:o["h"],titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},f=Object(a["a"])({},p,c["b"]);t["b"]=Object(r["n"])({name:l,props:f,setup(e,t){var{slots:n}=t,i=Object(c["c"])(),o=()=>{var t=n.label||Object(s["b"])(e.label);if(t)return Object(r["m"])("div",{class:[d("label"),e.labelClass]},[n.label?n.label():e.label])},a=()=>{if(n.title||Object(s["b"])(e.title))return Object(r["m"])("div",{class:[d("title"),e.titleClass],style:e.titleStyle},[n.title?n.title():Object(r["m"])("span",null,[e.title]),o()])},l=()=>{var t=n.value||n.default,i=t||Object(s["b"])(e.value);if(i){var o=n.title||Object(s["b"])(e.title);return Object(r["m"])("div",{class:[d("value",{alone:!o}),e.valueClass]},[t?t():Object(r["m"])("span",null,[e.value])])}},p=()=>n.icon?n.icon():e.icon?Object(r["m"])(u["a"],{name:e.icon,class:d("left-icon"),classPrefix:e.iconPrefix},null):void 0,f=()=>{if(n["right-icon"])return n["right-icon"]();if(e.isLink){var t=e.arrowDirection?"arrow-"+e.arrowDirection:"arrow";return Object(r["m"])(u["a"],{name:t,class:d("right-icon")},null)}};return()=>{var t,{size:o,center:s,border:c,isLink:u,required:h}=e,g=null!=(t=e.clickable)?t:u,v={center:s,required:h,clickable:g,borderless:!c};return o&&(v[o]=!!o),Object(r["m"])("div",{class:d(v),role:g?"button":void 0,tabindex:g?0:void 0,onClick:i},[p(),a(),l(),f(),null==n.extra?void 0:n.extra()])}}})},"68ee":function(e,t,n){var r=n("e330"),i=n("d039"),o=n("1626"),a=n("f5df"),s=n("d066"),c=n("8925"),u=function(){},l=[],d=s("Reflect","construct"),p=/^\s*(?:class|function)\b/,f=r(p.exec),h=!p.exec(u),g=function(e){if(!o(e))return!1;try{return d(u,l,e),!0}catch(t){return!1}},v=function(e){if(!o(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return h||!!f(p,c(e))}catch(t){return!0}};v.sham=!0,e.exports=!d||i((function(){var e;return g(g.call)||!g(Object)||!g((function(){e=!0}))||e}))?v:g},"68ef":function(e,t,n){},"69f3":function(e,t,n){var r,i,o,a=n("7f9a"),s=n("da84"),c=n("e330"),u=n("861d"),l=n("9112"),d=n("1a2d"),p=n("c6cd"),f=n("f772"),h=n("d012"),g="Object already initialized",v=s.TypeError,m=s.WeakMap,_=function(e){return o(e)?i(e):r(e,{})},y=function(e){return function(t){var n;if(!u(t)||(n=i(t)).type!==e)throw v("Incompatible receiver, "+e+" required");return n}};if(a||p.state){var b=p.state||(p.state=new m),I=c(b.get),T=c(b.has),C=c(b.set);r=function(e,t){if(T(b,e))throw new v(g);return t.facade=e,C(b,e,t),t},i=function(e){return I(b,e)||{}},o=function(e){return T(b,e)}}else{var S=f("state");h[S]=!0,r=function(e,t){if(d(e,S))throw new v(g);return t.facade=e,l(e,S,t),t},i=function(e){return d(e,S)?e[S]:{}},o=function(e){return d(e,S)}}e.exports={set:r,get:i,has:o,enforce:_,getterFor:y}},"6ab3":function(e,t,n){},"6b0d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n}},"6b41":function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("8405"),c=n("b1d2"),u=n("f9ae"),l=n("ad06"),[d,p]=Object(o["a"])("nav-bar"),f={title:String,fixed:Boolean,zIndex:a["f"],border:a["g"],leftText:String,rightText:String,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean},h=Object(i["n"])({name:d,props:f,emits:["click-left","click-right"],setup(e,t){var{emit:n,slots:r}=t,o=Object(i["K"])(),a=Object(u["a"])(o,p),d=e=>n("click-left",e),f=e=>n("click-right",e),h=()=>r.left?r.left():[e.leftArrow&&Object(i["m"])(l["a"],{class:p("arrow"),name:"arrow-left"},null),e.leftText&&Object(i["m"])("span",{class:p("text")},[e.leftText])],g=()=>r.right?r.right():Object(i["m"])("span",{class:p("text")},[e.rightText]),v=()=>{var{title:t,fixed:n,border:a,zIndex:u}=e,l=Object(s["f"])(u),v=e.leftArrow||e.leftText||r.left,m=e.rightText||r.right;return Object(i["m"])("div",{ref:o,style:l,class:[p({fixed:n,"safe-area-inset-top":e.safeAreaInsetTop}),{[c["b"]]:a}]},[Object(i["m"])("div",{class:p("content")},[v&&Object(i["m"])("div",{class:[p("left"),c["i"]],onClick:d},[h()]),Object(i["m"])("div",{class:[p("title"),"van-ellipsis"]},[r.title?r.title():t]),m&&Object(i["m"])("div",{class:[p("right"),c["i"]],onClick:f},[g()])])])};return()=>e.fixed&&e.placeholder?a(v):v()}}),g=Object(r["a"])(h);t["a"]=g},"6b75":function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},"6c02":function(e,t,n){"use strict";n.d(t,"a",(function(){return et})),n.d(t,"b",(function(){return z})),n.d(t,"c",(function(){return it})),n.d(t,"d",(function(){return rt}));var r=n("7a23");n("3f4e");
/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */
const i="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,o=e=>i?Symbol(e):"_vr_"+e,a=o("rvlm"),s=o("rvd"),c=o("r"),u=o("rl"),l=o("rvl"),d="undefined"!==typeof window;function p(e){return e.__esModule||i&&"Module"===e[Symbol.toStringTag]}const f=Object.assign;function h(e,t){const n={};for(const r in t){const i=t[r];n[r]=Array.isArray(i)?i.map(e):e(i)}return n}const g=()=>{};const v=/\/$/,m=e=>e.replace(v,"");function _(e,t,n="/"){let r,i={},o="",a="";const s=t.indexOf("?"),c=t.indexOf("#",s>-1?s:0);return s>-1&&(r=t.slice(0,s),o=t.slice(s+1,c>-1?c:t.length),i=e(o)),c>-1&&(r=r||t.slice(0,c),a=t.slice(c,t.length)),r=M(null!=r?r:t,n),{fullPath:r+(o&&"?")+o+a,path:r,query:i,hash:a}}function y(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function b(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function I(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&T(t.matched[r],n.matched[i])&&C(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function T(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function C(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!S(e[n],t[n]))return!1;return!0}function S(e,t){return Array.isArray(e)?E(e,t):Array.isArray(t)?E(t,e):e===t}function E(e,t){return Array.isArray(t)?e.length===t.length&&e.every((e,n)=>e===t[n]):1===e.length&&e[0]===t}function M(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/");let i,o,a=n.length-1;for(i=0;i<r.length;i++)if(o=r[i],1!==a&&"."!==o){if(".."!==o)break;a--}return n.slice(0,a).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}var k,w;(function(e){e["pop"]="pop",e["push"]="push"})(k||(k={})),function(e){e["back"]="back",e["forward"]="forward",e["unknown"]=""}(w||(w={}));function O(e){if(!e)if(d){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),m(e)}const D=/^[^#]+#/;function A(e,t){return e.replace(D,"#")+t}function R(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const x=()=>({left:window.pageXOffset,top:window.pageYOffset});function L(e){let t;if("el"in e){const n=e.el,r="string"===typeof n&&n.startsWith("#");0;const i="string"===typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=R(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.pageXOffset,null!=t.top?t.top:window.pageYOffset)}function N(e,t){const n=history.state?history.state.position-t:-1;return n+e}const P=new Map;function j(e,t){P.set(e,t)}function U(e){const t=P.get(e);return P.delete(e),t}let G=()=>location.protocol+"//"+location.host;function V(e,t){const{pathname:n,search:r,hash:i}=t,o=e.indexOf("#");if(o>-1){let t=i.includes(e.slice(o))?e.slice(o).length:1,n=i.slice(t);return"/"!==n[0]&&(n="/"+n),b(n,"")}const a=b(n,e);return a+r+i}function F(e,t,n,r){let i=[],o=[],a=null;const s=({state:o})=>{const s=V(e,location),c=n.value,u=t.value;let l=0;if(o){if(n.value=s,t.value=o,a&&a===c)return void(a=null);l=u?o.position-u.position:0}else r(s);i.forEach(e=>{e(n.value,c,{delta:l,type:k.pop,direction:l?l>0?w.forward:w.back:w.unknown})})};function c(){a=n.value}function u(e){i.push(e);const t=()=>{const t=i.indexOf(e);t>-1&&i.splice(t,1)};return o.push(t),t}function l(){const{history:e}=window;e.state&&e.replaceState(f({},e.state,{scroll:x()}),"")}function d(){for(const e of o)e();o=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",l)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",l),{pauseListeners:c,listen:u,destroy:d}}function B(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?x():null}}function q(e){const{history:t,location:n}=window,r={value:V(e,n)},i={value:t.state};function o(r,o,a){const s=e.indexOf("#"),c=s>-1?(n.host&&document.querySelector("base")?e:e.slice(s))+r:G()+e+r;try{t[a?"replaceState":"pushState"](o,"",c),i.value=o}catch(u){console.error(u),n[a?"replace":"assign"](c)}}function a(e,n){const a=f({},t.state,B(i.value.back,e,i.value.forward,!0),n,{position:i.value.position});o(e,a,!0),r.value=e}function s(e,n){const a=f({},i.value,t.state,{forward:e,scroll:x()});o(a.current,a,!0);const s=f({},B(r.value,e,null),{position:a.position+1},n);o(e,s,!1),r.value=e}return i.value||o(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:s,replace:a}}function H(e){e=O(e);const t=q(e),n=F(e,t.state,t.location,t.replace);function r(e,t=!0){t||n.pauseListeners(),history.go(e)}const i=f({location:"",base:e,go:r,createHref:A.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function z(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),H(e)}function K(e){return"string"===typeof e||e&&"object"===typeof e}function W(e){return"string"===typeof e||"symbol"===typeof e}const Y={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},J=o("nf");var $;(function(e){e[e["aborted"]=4]="aborted",e[e["cancelled"]=8]="cancelled",e[e["duplicated"]=16]="duplicated"})($||($={}));function X(e,t){return f(new Error,{type:e,[J]:!0},t)}function Z(e,t){return e instanceof Error&&J in e&&(null==t||!!(e.type&t))}const Q="[^/]+?",ee={sensitive:!1,strict:!1,start:!0,end:!0},te=/[.+*?^${}()[\]/\\]/g;function ne(e,t){const n=f({},ee,t),r=[];let i=n.start?"^":"";const o=[];for(const l of e){const e=l.length?[]:[90];n.strict&&!l.length&&(i+="/");for(let t=0;t<l.length;t++){const r=l[t];let a=40+(n.sensitive?.25:0);if(0===r.type)t||(i+="/"),i+=r.value.replace(te,"\\$&"),a+=40;else if(1===r.type){const{value:e,repeatable:n,optional:s,regexp:c}=r;o.push({name:e,repeatable:n,optional:s});const d=c||Q;if(d!==Q){a+=10;try{new RegExp(`(${d})`)}catch(u){throw new Error(`Invalid custom RegExp for param "${e}" (${d}): `+u.message)}}let p=n?`((?:${d})(?:/(?:${d}))*)`:`(${d})`;t||(p=s&&l.length<2?`(?:/${p})`:"/"+p),s&&(p+="?"),i+=p,a+=20,s&&(a+=-8),n&&(a+=-20),".*"===d&&(a+=-50)}e.push(a)}r.push(e)}if(n.strict&&n.end){const e=r.length-1;r[e][r[e].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const a=new RegExp(i,n.sensitive?"":"i");function s(e){const t=e.match(a),n={};if(!t)return null;for(let r=1;r<t.length;r++){const e=t[r]||"",i=o[r-1];n[i.name]=e&&i.repeatable?e.split("/"):e}return n}function c(t){let n="",r=!1;for(const i of e){r&&n.endsWith("/")||(n+="/"),r=!1;for(const e of i)if(0===e.type)n+=e.value;else if(1===e.type){const{value:o,repeatable:a,optional:s}=e,c=o in t?t[o]:"";if(Array.isArray(c)&&!a)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const u=Array.isArray(c)?c.join("/"):c;if(!u){if(!s)throw new Error(`Missing required param "${o}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=u}}return n}return{re:a,score:r,keys:o,parse:s,stringify:c}}function re(e,t){let n=0;while(n<e.length&&n<t.length){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function ie(e,t){let n=0;const r=e.score,i=t.score;while(n<r.length&&n<i.length){const e=re(r[n],i[n]);if(e)return e;n++}return i.length-r.length}const oe={type:0,value:""},ae=/[a-zA-Z0-9_]/;function se(e){if(!e)return[[]];if("/"===e)return[[oe]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${u}": ${e}`)}let n=0,r=n;const i=[];let o;function a(){o&&i.push(o),o=[]}let s,c=0,u="",l="";function d(){u&&(0===n?o.push({type:0,value:u}):1===n||2===n||3===n?(o.length>1&&("*"===s||"+"===s)&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:l,repeatable:"*"===s||"+"===s,optional:"*"===s||"?"===s})):t("Invalid state to consume buffer"),u="")}function p(){u+=s}while(c<e.length)if(s=e[c++],"\\"!==s||2===n)switch(n){case 0:"/"===s?(u&&d(),a()):":"===s?(d(),n=1):p();break;case 4:p(),n=r;break;case 1:"("===s?n=2:ae.test(s)?p():(d(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&c--);break;case 2:")"===s?"\\"==l[l.length-1]?l=l.slice(0,-1)+s:n=3:l+=s;break;case 3:d(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&c--,l="";break;default:t("Unknown state");break}else r=n,n=4;return 2===n&&t(`Unfinished custom RegExp for param "${u}"`),d(),a(),i}function ce(e,t,n){const r=ne(se(e.path),n);const i=f(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf===!t.record.aliasOf&&t.children.push(i),i}function ue(e,t){const n=[],r=new Map;function i(e){return r.get(e)}function o(e,n,r){const i=!r,s=de(e);s.aliasOf=r&&r.record;const u=ge(t,e),l=[s];if("alias"in e){const t="string"===typeof e.alias?[e.alias]:e.alias;for(const e of t)l.push(f({},s,{components:r?r.record.components:s.components,path:e,aliasOf:r?r.record:s}))}let d,p;for(const t of l){const{path:l}=t;if(n&&"/"!==l[0]){const e=n.record.path,r="/"===e[e.length-1]?"":"/";t.path=n.record.path+(l&&r+l)}if(d=ce(t,n,u),r?r.alias.push(d):(p=p||d,p!==d&&p.alias.push(d),i&&e.name&&!fe(d)&&a(e.name)),"children"in s){const e=s.children;for(let t=0;t<e.length;t++)o(e[t],d,r&&r.children[t])}r=r||d,c(d)}return p?()=>{a(p)}:g}function a(e){if(W(e)){const t=r.get(e);t&&(r.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(a),t.alias.forEach(a))}else{const t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&r.delete(e.record.name),e.children.forEach(a),e.alias.forEach(a))}}function s(){return n}function c(e){let t=0;while(t<n.length&&ie(e,n[t])>=0)t++;n.splice(t,0,e),e.record.name&&!fe(e)&&r.set(e.record.name,e)}function u(e,t){let i,o,a,s={};if("name"in e&&e.name){if(i=r.get(e.name),!i)throw X(1,{location:e});a=i.record.name,s=f(le(t.params,i.keys.filter(e=>!e.optional).map(e=>e.name)),e.params),o=i.stringify(s)}else if("path"in e)o=e.path,i=n.find(e=>e.re.test(o)),i&&(s=i.parse(o),a=i.record.name);else{if(i=t.name?r.get(t.name):n.find(e=>e.re.test(t.path)),!i)throw X(1,{location:e,currentLocation:t});a=i.record.name,s=f({},t.params,e.params),o=i.stringify(s)}const c=[];let u=i;while(u)c.unshift(u.record),u=u.parent;return{name:a,path:o,params:s,matched:c,meta:he(c)}}return t=ge({strict:!1,end:!0,sensitive:!1},t),e.forEach(e=>o(e)),{addRoute:o,resolve:u,removeRoute:a,getRoutes:s,getRecordMatcher:i}}function le(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function de(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:pe(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}function pe(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]="boolean"===typeof n?n:n[r];return t}function fe(e){while(e){if(e.record.aliasOf)return!0;e=e.parent}return!1}function he(e){return e.reduce((e,t)=>f(e,t.meta),{})}function ge(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}const ve=/#/g,me=/&/g,_e=/\//g,ye=/=/g,be=/\?/g,Ie=/\+/g,Te=/%5B/g,Ce=/%5D/g,Se=/%5E/g,Ee=/%60/g,Me=/%7B/g,ke=/%7C/g,we=/%7D/g,Oe=/%20/g;function De(e){return encodeURI(""+e).replace(ke,"|").replace(Te,"[").replace(Ce,"]")}function Ae(e){return De(e).replace(Me,"{").replace(we,"}").replace(Se,"^")}function Re(e){return De(e).replace(Ie,"%2B").replace(Oe,"+").replace(ve,"%23").replace(me,"%26").replace(Ee,"`").replace(Me,"{").replace(we,"}").replace(Se,"^")}function xe(e){return Re(e).replace(ye,"%3D")}function Le(e){return De(e).replace(ve,"%23").replace(be,"%3F")}function Ne(e){return null==e?"":Le(e).replace(_e,"%2F")}function Pe(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}function je(e){const t={};if(""===e||"?"===e)return t;const n="?"===e[0],r=(n?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const e=r[i].replace(Ie," "),n=e.indexOf("="),o=Pe(n<0?e:e.slice(0,n)),a=n<0?null:Pe(e.slice(n+1));if(o in t){let e=t[o];Array.isArray(e)||(e=t[o]=[e]),e.push(a)}else t[o]=a}return t}function Ue(e){let t="";for(let n in e){const r=e[n];if(n=xe(n),null==r){void 0!==r&&(t+=(t.length?"&":"")+n);continue}const i=Array.isArray(r)?r.map(e=>e&&Re(e)):[r&&Re(r)];i.forEach(e=>{void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))})}return t}function Ge(e){const t={};for(const n in e){const r=e[n];void 0!==r&&(t[n]=Array.isArray(r)?r.map(e=>null==e?null:""+e):null==r?r:""+r)}return t}function Ve(){let e=[];function t(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function Fe(e,t,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,s)=>{const c=e=>{!1===e?s(X(4,{from:n,to:t})):e instanceof Error?s(e):K(e)?s(X(2,{from:t,to:e})):(o&&r.enterCallbacks[i]===o&&"function"===typeof e&&o.push(e),a())},u=e.call(r&&r.instances[i],t,n,c);let l=Promise.resolve(u);e.length<3&&(l=l.then(c)),l.catch(e=>s(e))})}function Be(e,t,n,r){const i=[];for(const o of e)for(const e in o.components){let a=o.components[e];if("beforeRouteEnter"===t||o.instances[e])if(qe(a)){const s=a.__vccOpts||a,c=s[t];c&&i.push(Fe(c,n,r,o,e))}else{let s=a();0,i.push(()=>s.then(i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${e}" at "${o.path}"`));const a=p(i)?i.default:i;o.components[e]=a;const s=a.__vccOpts||a,c=s[t];return c&&Fe(c,n,r,o,e)()}))}}return i}function qe(e){return"object"===typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}function He(e){const t=Object(r["q"])(c),n=Object(r["q"])(u),i=Object(r["e"])(()=>t.resolve(Object(r["U"])(e.to))),o=Object(r["e"])(()=>{const{matched:e}=i.value,{length:t}=e,r=e[t-1],o=n.matched;if(!r||!o.length)return-1;const a=o.findIndex(T.bind(null,r));if(a>-1)return a;const s=Je(e[t-2]);return t>1&&Je(r)===s&&o[o.length-1].path!==s?o.findIndex(T.bind(null,e[t-2])):a}),a=Object(r["e"])(()=>o.value>-1&&Ye(n.params,i.value.params)),s=Object(r["e"])(()=>o.value>-1&&o.value===n.matched.length-1&&C(n.params,i.value.params));function l(n={}){return We(n)?t[Object(r["U"])(e.replace)?"replace":"push"](Object(r["U"])(e.to)).catch(g):Promise.resolve()}return{route:i,href:Object(r["e"])(()=>i.value.href),isActive:a,isExactActive:s,navigate:l}}const ze=Object(r["n"])({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:He,setup(e,{slots:t}){const n=Object(r["J"])(He(e)),{options:i}=Object(r["q"])(c),o=Object(r["e"])(()=>({[$e(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[$e(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&t.default(n);return e.custom?i:Object(r["p"])("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},i)}}}),Ke=ze;function We(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Ye(e,t){for(const n in t){const r=t[n],i=e[n];if("string"===typeof r){if(r!==i)return!1}else if(!Array.isArray(i)||i.length!==r.length||r.some((e,t)=>e!==i[t]))return!1}return!0}function Je(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const $e=(e,t,n)=>null!=e?e:null!=t?t:n,Xe=Object(r["n"])({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(e,{attrs:t,slots:n}){const i=Object(r["q"])(l),o=Object(r["e"])(()=>e.route||i.value),c=Object(r["q"])(s,0),u=Object(r["e"])(()=>o.value.matched[c]);Object(r["H"])(s,c+1),Object(r["H"])(a,u),Object(r["H"])(l,o);const d=Object(r["K"])();return Object(r["X"])(()=>[d.value,u.value,e.name],([e,t,n],[r,i,o])=>{t&&(t.instances[n]=e,i&&i!==t&&e&&e===r&&(t.leaveGuards.size||(t.leaveGuards=i.leaveGuards),t.updateGuards.size||(t.updateGuards=i.updateGuards))),!e||!t||i&&T(t,i)&&r||(t.enterCallbacks[n]||[]).forEach(t=>t(e))},{flush:"post"}),()=>{const i=o.value,a=u.value,s=a&&a.components[e.name],c=e.name;if(!s)return Ze(n.default,{Component:s,route:i});const l=a.props[e.name],p=l?!0===l?i.params:"function"===typeof l?l(i):l:null,h=e=>{e.component.isUnmounted&&(a.instances[c]=null)},g=Object(r["p"])(s,f({},p,t,{onVnodeUnmounted:h,ref:d}));return Ze(n.default,{Component:g,route:i})||g}}});function Ze(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const Qe=Xe;function et(e){const t=ue(e.routes,e),n=e.parseQuery||je,i=e.stringifyQuery||Ue,o=e.history;const a=Ve(),s=Ve(),p=Ve(),v=Object(r["Q"])(Y);let m=Y;d&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const b=h.bind(null,e=>""+e),T=h.bind(null,Ne),C=h.bind(null,Pe);function S(e,n){let r,i;return W(e)?(r=t.getRecordMatcher(e),i=n):i=e,t.addRoute(i,r)}function E(e){const n=t.getRecordMatcher(e);n&&t.removeRoute(n)}function M(){return t.getRoutes().map(e=>e.record)}function w(e){return!!t.getRecordMatcher(e)}function O(e,r){if(r=f({},r||v.value),"string"===typeof e){const i=_(n,e,r.path),a=t.resolve({path:i.path},r),s=o.createHref(i.fullPath);return f(i,a,{params:C(a.params),hash:Pe(i.hash),redirectedFrom:void 0,href:s})}let a;if("path"in e)a=f({},e,{path:_(n,e.path,r.path).path});else{const t=f({},e.params);for(const e in t)null==t[e]&&delete t[e];a=f({},e,{params:T(e.params)}),r.params=T(r.params)}const s=t.resolve(a,r),c=e.hash||"";s.params=b(C(s.params));const u=y(i,f({},e,{hash:Ae(c),path:s.path})),l=o.createHref(u);return f({fullPath:u,hash:c,query:i===Ue?Ge(e.query):e.query||{}},s,{redirectedFrom:void 0,href:l})}function D(e){return"string"===typeof e?_(n,e,v.value.path):f({},e)}function A(e,t){if(m!==e)return X(8,{from:t,to:e})}function R(e){return V(e)}function P(e){return R(f(D(e),{replace:!0}))}function G(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:n}=t;let r="function"===typeof n?n(e):n;return"string"===typeof r&&(r=r.includes("?")||r.includes("#")?r=D(r):{path:r},r.params={}),f({query:e.query,hash:e.hash,params:e.params},r)}}function V(e,t){const n=m=O(e),r=v.value,o=e.state,a=e.force,s=!0===e.replace,c=G(n);if(c)return V(f(D(c),{state:o,force:a,replace:s}),t||n);const u=n;let l;return u.redirectedFrom=t,!a&&I(i,r,n)&&(l=X(16,{to:u,from:r}),re(r,r,!0,!1)),(l?Promise.resolve(l):B(u,r)).catch(e=>Z(e)?e:ee(e,u,r)).then(e=>{if(e){if(Z(e,2))return V(f(D(e.to),{state:o,force:a,replace:s}),t||u)}else e=H(u,r,!0,s,o);return q(u,r,e),e})}function F(e,t){const n=A(e,t);return n?Promise.reject(n):Promise.resolve()}function B(e,t){let n;const[r,i,o]=nt(e,t);n=Be(r.reverse(),"beforeRouteLeave",e,t);for(const a of r)a.leaveGuards.forEach(r=>{n.push(Fe(r,e,t))});const c=F.bind(null,e,t);return n.push(c),tt(n).then(()=>{n=[];for(const r of a.list())n.push(Fe(r,e,t));return n.push(c),tt(n)}).then(()=>{n=Be(i,"beforeRouteUpdate",e,t);for(const r of i)r.updateGuards.forEach(r=>{n.push(Fe(r,e,t))});return n.push(c),tt(n)}).then(()=>{n=[];for(const r of e.matched)if(r.beforeEnter&&!t.matched.includes(r))if(Array.isArray(r.beforeEnter))for(const i of r.beforeEnter)n.push(Fe(i,e,t));else n.push(Fe(r.beforeEnter,e,t));return n.push(c),tt(n)}).then(()=>(e.matched.forEach(e=>e.enterCallbacks={}),n=Be(o,"beforeRouteEnter",e,t),n.push(c),tt(n))).then(()=>{n=[];for(const r of s.list())n.push(Fe(r,e,t));return n.push(c),tt(n)}).catch(e=>Z(e,8)?e:Promise.reject(e))}function q(e,t,n){for(const r of p.list())r(e,t,n)}function H(e,t,n,r,i){const a=A(e,t);if(a)return a;const s=t===Y,c=d?history.state:{};n&&(r||s?o.replace(e.fullPath,f({scroll:s&&c&&c.scroll},i)):o.push(e.fullPath,i)),v.value=e,re(e,t,n,s),ne()}let z;function K(){z=o.listen((e,t,n)=>{const r=O(e),i=G(r);if(i)return void V(f(i,{replace:!0}),r).catch(g);m=r;const a=v.value;d&&j(N(a.fullPath,n.delta),x()),B(r,a).catch(e=>Z(e,12)?e:Z(e,2)?(V(e.to,r).then(e=>{Z(e,20)&&!n.delta&&n.type===k.pop&&o.go(-1,!1)}).catch(g),Promise.reject()):(n.delta&&o.go(-n.delta,!1),ee(e,r,a))).then(e=>{e=e||H(r,a,!1),e&&(n.delta?o.go(-n.delta,!1):n.type===k.pop&&Z(e,20)&&o.go(-1,!1)),q(r,a,e)}).catch(g)})}let J,$=Ve(),Q=Ve();function ee(e,t,n){ne(e);const r=Q.list();return r.length?r.forEach(r=>r(e,t,n)):console.error(e),Promise.reject(e)}function te(){return J&&v.value!==Y?Promise.resolve():new Promise((e,t)=>{$.add([e,t])})}function ne(e){J||(J=!0,K(),$.list().forEach(([t,n])=>e?n(e):t()),$.reset())}function re(t,n,i,o){const{scrollBehavior:a}=e;if(!d||!a)return Promise.resolve();const s=!i&&U(N(t.fullPath,0))||(o||!i)&&history.state&&history.state.scroll||null;return Object(r["u"])().then(()=>a(t,n,s)).then(e=>e&&L(e)).catch(e=>ee(e,t,n))}const ie=e=>o.go(e);let oe;const ae=new Set,se={currentRoute:v,addRoute:S,removeRoute:E,hasRoute:w,getRoutes:M,resolve:O,options:e,push:R,replace:P,go:ie,back:()=>ie(-1),forward:()=>ie(1),beforeEach:a.add,beforeResolve:s.add,afterEach:p.add,onError:Q.add,isReady:te,install(e){const t=this;e.component("RouterLink",Ke),e.component("RouterView",Qe),e.config.globalProperties.$router=t,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>Object(r["U"])(v)}),d&&!oe&&v.value===Y&&(oe=!0,R(o.location).catch(e=>{0}));const n={};for(const o in Y)n[o]=Object(r["e"])(()=>v.value[o]);e.provide(c,t),e.provide(u,Object(r["J"])(n)),e.provide(l,v);const i=e.unmount;ae.add(e),e.unmount=function(){ae.delete(e),ae.size<1&&(m=Y,z&&z(),v.value=Y,oe=!1,J=!1),i()}}};return se}function tt(e){return e.reduce((e,t)=>e.then(()=>t()),Promise.resolve())}function nt(e,t){const n=[],r=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let a=0;a<o;a++){const o=t.matched[a];o&&(e.matched.find(e=>T(e,o))?r.push(o):n.push(o));const s=e.matched[a];s&&(t.matched.find(e=>T(e,s))||i.push(s))}return[n,r,i]}function rt(){return Object(r["q"])(c)}function it(){return Object(r["q"])(u)}},"6d61":function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("e330"),a=n("94ca"),s=n("6eeb"),c=n("f183"),u=n("2266"),l=n("19aa"),d=n("1626"),p=n("861d"),f=n("d039"),h=n("1c7e"),g=n("d44e"),v=n("7156");e.exports=function(e,t,n){var m=-1!==e.indexOf("Map"),_=-1!==e.indexOf("Weak"),y=m?"set":"add",b=i[e],I=b&&b.prototype,T=b,C={},S=function(e){var t=o(I[e]);s(I,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(_&&!p(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return _&&!p(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(_&&!p(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})},E=a(e,!d(b)||!(_||I.forEach&&!f((function(){(new b).entries().next()}))));if(E)T=n.getConstructor(t,e,m,y),c.enable();else if(a(e,!0)){var M=new T,k=M[y](_?{}:-0,1)!=M,w=f((function(){M.has(1)})),O=h((function(e){new b(e)})),D=!_&&f((function(){var e=new b,t=5;while(t--)e[y](t,t);return!e.has(-0)}));O||(T=t((function(e,t){l(e,I);var n=v(new b,e,T);return void 0!=t&&u(t,n[y],{that:n,AS_ENTRIES:m}),n})),T.prototype=I,I.constructor=T),(w||D)&&(S("delete"),S("has"),m&&S("get")),(D||k)&&S(y),_&&I.clear&&delete I.clear}return C[e]=T,r({global:!0,forced:T!=b},C),g(T,e),_||n.setStrong(T,e,m),T}},"6d73":function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("e3b3"),n("a526"),n("bc1b"),n("a71a"),n("4d75"),n("b258"),n("819b")},"6e47":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("4a89"),c=n("f344"),u=n("8405"),l=n("8da3"),d=n("d0c2"),[p,f]=Object(o["a"])("overlay"),h={show:Boolean,zIndex:a["f"],duration:a["f"],className:a["h"],lockScroll:a["g"],customStyle:Object},g=Object(i["n"])({name:p,props:h,setup(e,t){var{slots:n}=t,r=Object(d["a"])(()=>e.show),o=e=>{Object(s["e"])(e,!0)},a=r(()=>{var t=Object(c["a"])(Object(u["f"])(e.zIndex),e.customStyle);return Object(l["b"])(e.duration)&&(t.animationDuration=e.duration+"s"),Object(i["ab"])(Object(i["m"])("div",{style:t,class:[f(),e.className],onTouchmove:e.lockScroll?o:c["d"]},[null==n.default?void 0:n.default()]),[[i["W"],e.show]])});return()=>Object(i["m"])(i["d"],{name:"van-fade",appear:!0},{default:a})}}),v=Object(r["a"])(g);t["b"]=v},"6eeb":function(e,t,n){var r=n("da84"),i=n("1626"),o=n("1a2d"),a=n("9112"),s=n("ce4e"),c=n("8925"),u=n("69f3"),l=n("5e77").CONFIGURABLE,d=u.get,p=u.enforce,f=String(String).split("String");(e.exports=function(e,t,n,c){var u,d=!!c&&!!c.unsafe,h=!!c&&!!c.enumerable,g=!!c&&!!c.noTargetGet,v=c&&void 0!==c.name?c.name:t;i(n)&&("Symbol("===String(v).slice(0,7)&&(v="["+String(v).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(n,"name")||l&&n.name!==v)&&a(n,"name",v),u=p(n),u.source||(u.source=f.join("string"==typeof v?v:""))),e!==r?(d?!g&&e[t]&&(h=!0):delete e[t],h?e[t]=n:a(e,t,n)):h?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return i(this)&&d(this).source||c(this)}))},7039:function(e,t,n){var r=n("23e7"),i=n("d039"),o=n("057f").f,a=i((function(){return!Object.getOwnPropertyNames(1)}));r({target:"Object",stat:!0,forced:a},{getOwnPropertyNames:o})},7156:function(e,t,n){var r=n("1626"),i=n("861d"),o=n("d2bb");e.exports=function(e,t,n){var a,s;return o&&r(a=t.constructor)&&a!==n&&i(s=a.prototype)&&s!==n.prototype&&o(e,s),e}},"72cf":function(e,t,n){},7418:function(e,t){t.f=Object.getOwnPropertySymbols},"746f":function(e,t,n){var r=n("428f"),i=n("1a2d"),o=n("e538"),a=n("9bf2").f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},"75ad":function(e,t,n){},"772a":function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("b1d2"),c=n("4a89"),u=n("7f9b"),l=n("4eda"),[d,p]=Object(o["a"])("form"),f={colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:a["f"],labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:a["g"],validateTrigger:Object(a["e"])("onBlur"),showErrorMessage:a["g"],errorMessageAlign:String},h=Object(i["n"])({name:d,props:f,emits:["submit","failed"],setup(e,t){var{emit:n,slots:r}=t,{children:o,linkChildren:a}=Object(u["f"])(s["h"]),d=e=>e?o.filter(t=>e.includes(t.name)):o,f=e=>new Promise((t,n)=>{var r=[],i=d(e);i.reduce((e,t)=>e.then(()=>{if(!r.length)return t.validate().then(e=>{e&&r.push(e)})}),Promise.resolve()).then(()=>{r.length?n(r):t()})}),h=e=>new Promise((t,n)=>{var r=d(e);Promise.all(r.map(e=>e.validate())).then(e=>{e=e.filter(Boolean),e.length?n(e):t()})}),g=e=>{var t=o.find(t=>t.name===e);return t?new Promise((e,n)=>{t.validate().then(t=>{t?n(t):e()})}):Promise.reject()},v=t=>"string"===typeof t?g(t):e.validateFirst?f(t):h(t),m=e=>{"string"===typeof e&&(e=[e]);var t=d(e);t.forEach(e=>{e.resetValidation()})},_=(e,t)=>{o.some(n=>n.name===e&&(n.$el.scrollIntoView(t),!0))},y=()=>o.reduce((e,t)=>(e[t.name]=t.formValue.value,e),{}),b=()=>{var t=y();v().then(()=>n("submit",t)).catch(r=>{n("failed",{values:t,errors:r}),e.scrollToError&&r[0].name&&_(r[0].name)})},I=e=>{Object(c["e"])(e),b()};return a({props:e}),Object(l["a"])({submit:b,validate:v,scrollToField:_,resetValidation:m}),()=>Object(i["m"])("form",{class:p(),onSubmit:I},[null==r.default?void 0:r.default()])}}),g=Object(r["a"])(h);t["a"]=g},7744:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("c199"),i=n("68b4"),o=Object(r["a"])(i["b"]);t["b"]=o},"77f8":function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("1d82"),n("ae39")},7839:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},7844:function(e,t,n){"use strict";n("68ef"),n("8270")},"785a":function(e,t,n){var r=n("cc12"),i=r("span").classList,o=i&&i.constructor&&i.constructor.prototype;e.exports=o===Object.prototype?void 0:o},"786d":function(e,t,n){},"7a23":function(e,t,n){"use strict";n.d(t,"e",(function(){return st})),n.d(t,"r",(function(){return Ye})),n.d(t,"J",(function(){return Ne})),n.d(t,"K",(function(){return Je})),n.d(t,"Q",(function(){return $e})),n.d(t,"S",(function(){return rt})),n.d(t,"T",(function(){return Qe})),n.d(t,"U",(function(){return et})),n.d(t,"v",(function(){return h["I"]})),n.d(t,"w",(function(){return h["J"]})),n.d(t,"R",(function(){return h["L"]})),n.d(t,"a",(function(){return fr})),n.d(t,"b",(function(){return Ft})),n.d(t,"c",(function(){return ir})),n.d(t,"g",(function(){return Er})),n.d(t,"h",(function(){return Ur})),n.d(t,"i",(function(){return Sr})),n.d(t,"j",(function(){return Ar})),n.d(t,"k",(function(){return jr})),n.d(t,"l",(function(){return Pr})),n.d(t,"m",(function(){return Rr})),n.d(t,"n",(function(){return jt})),n.d(t,"o",(function(){return ei})),n.d(t,"p",(function(){return Zi})),n.d(t,"q",(function(){return Mt})),n.d(t,"s",(function(){return Mr})),n.d(t,"t",(function(){return Br})),n.d(t,"u",(function(){return xi})),n.d(t,"x",(function(){return qt})),n.d(t,"y",(function(){return Xt})),n.d(t,"z",(function(){return tn})),n.d(t,"A",(function(){return Qt})),n.d(t,"B",(function(){return Ht})),n.d(t,"C",(function(){return Zt})),n.d(t,"D",(function(){return nn})),n.d(t,"E",(function(){return en})),n.d(t,"F",(function(){return yr})),n.d(t,"G",(function(){return gt})),n.d(t,"H",(function(){return Et})),n.d(t,"I",(function(){return ht})),n.d(t,"L",(function(){return Hr})),n.d(t,"M",(function(){return zr})),n.d(t,"N",(function(){return sr})),n.d(t,"O",(function(){return lr})),n.d(t,"P",(function(){return ur})),n.d(t,"X",(function(){return Wi})),n.d(t,"Y",(function(){return zi})),n.d(t,"Z",(function(){return vt})),n.d(t,"ab",(function(){return Un})),n.d(t,"d",(function(){return xo})),n.d(t,"f",(function(){return sa})),n.d(t,"V",(function(){return $o})),n.d(t,"W",(function(){return na})),n.d(t,"bb",(function(){return ta}));n("277d");function r(e){if(Array.isArray(e))return e}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");function i(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),t&&o.length===t)break}catch(c){s=!0,i=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}var o=n("06c5");function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return r(e)||i(e,t)||Object(o["a"])(e,t)||a()}var c,u=n("ade3"),l=n("b85c"),d=n("2909"),p=n("d4ec"),f=n("bee2"),h=(n("99af"),n("4160"),n("159b"),n("6062"),n("10d1"),n("caad"),n("c0b6"),n("4ec9"),n("4de4"),n("d81d"),n("7039"),n("5d41"),n("f8c9"),n("a9e3"),n("7ed3"),n("ac16"),n("c760"),n("1bf2"),n("7f78"),n("c906"),n("9ff4"));var g=[],v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(p["a"])(this,e),this.active=!0,this.effects=[],this.cleanups=[],!t&&c&&(this.parent=c,this.index=(c.scopes||(c.scopes=[])).push(this)-1)}return Object(f["a"])(e,[{key:"run",value:function(e){if(this.active)try{return this.on(),e()}finally{this.off()}else 0}},{key:"on",value:function(){this.active&&(g.push(this),c=this)}},{key:"off",value:function(){this.active&&(g.pop(),c=g[g.length-1])}},{key:"stop",value:function(e){if(this.active){if(this.effects.forEach((function(e){return e.stop()})),this.cleanups.forEach((function(e){return e()})),this.scopes&&this.scopes.forEach((function(e){return e.stop(!0)})),this.parent&&!e){var t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.active=!1}}}]),e}();function m(e,t){t=t||c,t&&t.active&&t.effects.push(e)}var _,y=function(e){var t=new Set(e);return t.w=0,t.n=0,t},b=function(e){return(e.w&M)>0},I=function(e){return(e.n&M)>0},T=function(e){var t=e.deps;if(t.length)for(var n=0;n<t.length;n++)t[n].w|=M},C=function(e){var t=e.deps;if(t.length){for(var n=0,r=0;r<t.length;r++){var i=t[r];b(i)&&!I(i)?i["delete"](e):t[n++]=i,i.w&=~M,i.n&=~M}t.length=n}},S=new WeakMap,E=0,M=1,k=30,w=[],O=Symbol(""),D=Symbol(""),A=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2?arguments[2]:void 0;Object(p["a"])(this,e),this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],m(this,r)}return Object(f["a"])(e,[{key:"run",value:function(){if(!this.active)return this.fn();if(!w.includes(this))try{return w.push(_=this),P(),M=1<<++E,E<=k?T(this):R(this),this.fn()}finally{E<=k&&C(this),M=1<<--E,j(),w.pop();var e=w.length;_=e>0?w[e-1]:void 0}}},{key:"stop",value:function(){this.active&&(R(this),this.onStop&&this.onStop(),this.active=!1)}}]),e}();function R(e){var t=e.deps;if(t.length){for(var n=0;n<t.length;n++)t[n]["delete"](e);t.length=0}}var x=!0,L=[];function N(){L.push(x),x=!1}function P(){L.push(x),x=!0}function j(){var e=L.pop();x=void 0===e||e}function U(e,t,n){if(G()){var r=S.get(e);r||S.set(e,r=new Map);var i=r.get(n);i||r.set(n,i=y());var o=void 0;V(i,o)}}function G(){return x&&void 0!==_}function V(e,t){var n=!1;E<=k?I(e)||(e.n|=M,n=!b(e)):n=!e.has(_),n&&(e.add(_),_.deps.push(e))}function F(e,t,n,r,i,o){var a=S.get(e);if(a){var s=[];if("clear"===t)s=Object(d["a"])(a.values());else if("length"===n&&Object(h["o"])(e))a.forEach((function(e,t){("length"===t||t>=r)&&s.push(e)}));else switch(void 0!==n&&s.push(a.get(n)),t){case"add":Object(h["o"])(e)?Object(h["s"])(n)&&s.push(a.get("length")):(s.push(a.get(O)),Object(h["t"])(e)&&s.push(a.get(D)));break;case"delete":Object(h["o"])(e)||(s.push(a.get(O)),Object(h["t"])(e)&&s.push(a.get(D)));break;case"set":Object(h["t"])(e)&&s.push(a.get(O));break}if(1===s.length)s[0]&&B(s[0]);else{var c,u=[],p=Object(l["a"])(s);try{for(p.s();!(c=p.n()).done;){var f=c.value;f&&u.push.apply(u,Object(d["a"])(f))}}catch(g){p.e(g)}finally{p.f()}B(y(u))}}}function B(e,t){var n,r=Object(l["a"])(Object(h["o"])(e)?e:Object(d["a"])(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;(i!==_||i.allowRecurse)&&(i.scheduler?i.scheduler():i.run())}}catch(o){r.e(o)}finally{r.f()}}var q=Object(h["H"])("__proto__,__v_isRef,__isVue"),H=new Set(Object.getOwnPropertyNames(Symbol).map((function(e){return Symbol[e]})).filter(h["E"])),z=$(),K=$(!1,!0),W=$(!0),Y=J();function J(){var e={};return["includes","indexOf","lastIndexOf"].forEach((function(t){e[t]=function(){for(var e=Be(this),n=0,r=this.length;n<r;n++)U(e,"get",n+"");for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var s=e[t].apply(e,o);return-1===s||!1===s?e[t].apply(e,Object(d["a"])(o.map(Be))):s}})),["push","pop","shift","unshift","splice"].forEach((function(t){e[t]=function(){N();for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=Be(this)[t].apply(this,n);return j(),i}})),e}function $(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r,i){if("__v_isReactive"===r)return!e;if("__v_isReadonly"===r)return e;if("__v_raw"===r&&i===(e?t?Re:Ae:t?De:Oe).get(n))return n;var o=Object(h["o"])(n);if(!e&&o&&Object(h["k"])(Y,r))return Reflect.get(Y,r,i);var a=Reflect.get(n,r,i);if(Object(h["E"])(r)?H.has(r):q(r))return a;if(e||U(n,"get",r),t)return a;if(Ye(a)){var s=!o||!Object(h["s"])(r);return s?a.value:a}return Object(h["v"])(a)?e?je(a):Ne(a):a}}var X=Q(),Z=Q(!0);function Q(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n,r,i){var o=t[n];if(!e&&!Ve(r)&&(r=Be(r),o=Be(o),!Object(h["o"])(t)&&Ye(o)&&!Ye(r)))return o.value=r,!0;var a=Object(h["o"])(t)&&Object(h["s"])(n)?Number(n)<t.length:Object(h["k"])(t,n),s=Reflect.set(t,n,r,i);return t===Be(i)&&(a?Object(h["j"])(r,o)&&F(t,"set",n,r,o):F(t,"add",n,r)),s}}function ee(e,t){var n=Object(h["k"])(e,t),r=e[t],i=Reflect.deleteProperty(e,t);return i&&n&&F(e,"delete",t,void 0,r),i}function te(e,t){var n=Reflect.has(e,t);return Object(h["E"])(t)&&H.has(t)||U(e,"has",t),n}function ne(e){return U(e,"iterate",Object(h["o"])(e)?"length":O),Reflect.ownKeys(e)}var re={get:z,set:X,deleteProperty:ee,has:te,ownKeys:ne},ie={get:W,set:function(e,t){return!0},deleteProperty:function(e,t){return!0}},oe=Object(h["h"])({},re,{get:K,set:Z}),ae=function(e){return e},se=function(e){return Reflect.getPrototypeOf(e)};function ce(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e=e["__v_raw"];var i=Be(e),o=Be(t);t!==o&&!n&&U(i,"get",t),!n&&U(i,"get",o);var a=se(i),s=a.has,c=r?ae:n?ze:He;return s.call(i,t)?c(e.get(t)):s.call(i,o)?c(e.get(o)):void(e!==i&&e.get(t))}function ue(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this["__v_raw"],r=Be(n),i=Be(e);return e!==i&&!t&&U(r,"has",e),!t&&U(r,"has",i),e===i?n.has(e):n.has(e)||n.has(i)}function le(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e=e["__v_raw"],!t&&U(Be(e),"iterate",O),Reflect.get(e,"size",e)}function de(e){e=Be(e);var t=Be(this),n=se(t),r=n.has.call(t,e);return r||(t.add(e),F(t,"add",e,e)),this}function pe(e,t){t=Be(t);var n=Be(this),r=se(n),i=r.has,o=r.get,a=i.call(n,e);a||(e=Be(e),a=i.call(n,e));var s=o.call(n,e);return n.set(e,t),a?Object(h["j"])(t,s)&&F(n,"set",e,t,s):F(n,"add",e,t),this}function fe(e){var t=Be(this),n=se(t),r=n.has,i=n.get,o=r.call(t,e);o||(e=Be(e),o=r.call(t,e));var a=i?i.call(t,e):void 0,s=t["delete"](e);return o&&F(t,"delete",e,void 0,a),s}function he(){var e=Be(this),t=0!==e.size,n=void 0,r=e.clear();return t&&F(e,"clear",void 0,void 0,n),r}function ge(e,t){return function(n,r){var i=this,o=i["__v_raw"],a=Be(o),s=t?ae:e?ze:He;return!e&&U(a,"iterate",O),o.forEach((function(e,t){return n.call(r,s(e),s(t),i)}))}}function ve(e,t,n){return function(){var r=this["__v_raw"],i=Be(r),o=Object(h["t"])(i),a="entries"===e||e===Symbol.iterator&&o,s="keys"===e&&o,c=r[e].apply(r,arguments),l=n?ae:t?ze:He;return!t&&U(i,"iterate",s?D:O),Object(u["a"])({next:function(){var e=c.next(),t=e.value,n=e.done;return n?{value:t,done:n}:{value:a?[l(t[0]),l(t[1])]:l(t),done:n}}},Symbol.iterator,(function(){return this}))}}function me(e){return function(){return"delete"!==e&&this}}function _e(){var e={get:function(e){return ce(this,e)},get size(){return le(this)},has:ue,add:de,set:pe,delete:fe,clear:he,forEach:ge(!1,!1)},t={get:function(e){return ce(this,e,!1,!0)},get size(){return le(this)},has:ue,add:de,set:pe,delete:fe,clear:he,forEach:ge(!1,!0)},n={get:function(e){return ce(this,e,!0)},get size(){return le(this,!0)},has:function(e){return ue.call(this,e,!0)},add:me("add"),set:me("set"),delete:me("delete"),clear:me("clear"),forEach:ge(!0,!1)},r={get:function(e){return ce(this,e,!0,!0)},get size(){return le(this,!0)},has:function(e){return ue.call(this,e,!0)},add:me("add"),set:me("set"),delete:me("delete"),clear:me("clear"),forEach:ge(!0,!0)},i=["keys","values","entries",Symbol.iterator];return i.forEach((function(i){e[i]=ve(i,!1,!1),n[i]=ve(i,!0,!1),t[i]=ve(i,!1,!0),r[i]=ve(i,!0,!0)})),[e,n,t,r]}var ye=_e(),be=s(ye,4),Ie=be[0],Te=be[1],Ce=be[2],Se=be[3];function Ee(e,t){var n=t?e?Se:Ce:e?Te:Ie;return function(t,r,i){return"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get(Object(h["k"])(n,r)&&r in t?n:t,r,i)}}var Me={get:Ee(!1,!1)},ke={get:Ee(!1,!0)},we={get:Ee(!0,!1)};var Oe=new WeakMap,De=new WeakMap,Ae=new WeakMap,Re=new WeakMap;function xe(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Le(e){return e["__v_skip"]||!Object.isExtensible(e)?0:xe(Object(h["O"])(e))}function Ne(e){return e&&e["__v_isReadonly"]?e:Ue(e,!1,re,Me,Oe)}function Pe(e){return Ue(e,!1,oe,ke,De)}function je(e){return Ue(e,!0,ie,we,Ae)}function Ue(e,t,n,r,i){if(!Object(h["v"])(e))return e;if(e["__v_raw"]&&(!t||!e["__v_isReactive"]))return e;var o=i.get(e);if(o)return o;var a=Le(e);if(0===a)return e;var s=new Proxy(e,2===a?r:n);return i.set(e,s),s}function Ge(e){return Ve(e)?Ge(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function Ve(e){return!(!e||!e["__v_isReadonly"])}function Fe(e){return Ge(e)||Ve(e)}function Be(e){var t=e&&e["__v_raw"];return t?Be(t):e}function qe(e){return Object(h["g"])(e,"__v_skip",!0),e}var He=function(e){return Object(h["v"])(e)?Ne(e):e},ze=function(e){return Object(h["v"])(e)?je(e):e};function Ke(e){G()&&(e=Be(e),e.dep||(e.dep=y()),V(e.dep))}function We(e,t){e=Be(e),e.dep&&B(e.dep)}function Ye(e){return Boolean(e&&!0===e.__v_isRef)}function Je(e){return Xe(e,!1)}function $e(e){return Xe(e,!0)}function Xe(e,t){return Ye(e)?e:new Ze(e,t)}var Ze=function(){function e(t,n){Object(p["a"])(this,e),this._shallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Be(t),this._value=n?t:He(t)}return Object(f["a"])(e,[{key:"value",get:function(){return Ke(this),this._value},set:function(e){e=this._shallow?e:Be(e),Object(h["j"])(e,this._rawValue)&&(this._rawValue=e,this._value=this._shallow?e:He(e),We(this,e))}}]),e}();function Qe(e){We(e,void 0)}function et(e){return Ye(e)?e.value:e}var tt={get:function(e,t,n){return et(Reflect.get(e,t,n))},set:function(e,t,n,r){var i=e[t];return Ye(i)&&!Ye(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function nt(e){return Ge(e)?e:new Proxy(e,tt)}function rt(e){var t=Object(h["o"])(e)?new Array(e.length):{};for(var n in e)t[n]=ot(e,n);return t}var it=function(){function e(t,n,r){Object(p["a"])(this,e),this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0}return Object(f["a"])(e,[{key:"value",get:function(){var e=this._object[this._key];return void 0===e?this._defaultValue:e},set:function(e){this._object[this._key]=e}}]),e}();function ot(e,t,n){var r=e[t];return Ye(r)?r:new it(e,t,n)}var at=function(){function e(t,n,r){var i=this;Object(p["a"])(this,e),this._setter=n,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new A(t,(function(){i._dirty||(i._dirty=!0,We(i))})),this["__v_isReadonly"]=r}return Object(f["a"])(e,[{key:"value",get:function(){var e=Be(this);return Ke(e),e._dirty&&(e._dirty=!1,e._value=e.effect.run()),e._value},set:function(e){this._setter(e)}}]),e}();function st(e,t){var n,r,i=Object(h["p"])(e);i?(n=e,r=h["d"]):(n=e.get,r=e.set);var o=new at(n,r,i||!r);return o}Promise.resolve();new Set;new Map;function ct(e,t,...n){const r=e.vnode.props||h["b"];let i=n;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in r){const e=("modelValue"===a?"model":a)+"Modifiers",{number:t,trim:o}=r[e]||h["b"];o?i=n.map(e=>e.trim()):t&&(i=n.map(h["N"]))}let s;let c=r[s=Object(h["M"])(t)]||r[s=Object(h["M"])(Object(h["e"])(t))];!c&&o&&(c=r[s=Object(h["M"])(Object(h["l"])(t))]),c&&mi(c,e,6,i);const u=r[s+"Once"];if(u){if(e.emitted){if(e.emitted[s])return}else e.emitted={};e.emitted[s]=!0,mi(u,e,6,i)}}function ut(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(void 0!==i)return i;const o=e.emits;let a={},s=!1;if(!Object(h["p"])(e)){const r=e=>{const n=ut(e,t,!0);n&&(s=!0,Object(h["h"])(a,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return o||s?(Object(h["o"])(o)?o.forEach(e=>a[e]=null):Object(h["h"])(a,o),r.set(e,a),a):(r.set(e,null),null)}function lt(e,t){return!(!e||!Object(h["w"])(t))&&(t=t.slice(2).replace(/Once$/,""),Object(h["k"])(e,t[0].toLowerCase()+t.slice(1))||Object(h["k"])(e,Object(h["l"])(t))||Object(h["k"])(e,t))}let dt=null,pt=null;function ft(e){const t=dt;return dt=e,pt=e&&e.type.__scopeId||null,t}function ht(e){pt=e}function gt(){pt=null}function vt(e,t=dt,n){if(!t)return e;if(e._n)return e;const r=(...n)=>{r._d&&Tr(-1);const i=ft(t),o=e(...n);return ft(i),r._d&&Tr(1),o};return r._n=!0,r._c=!0,r._d=!0,r}function mt(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[a],slots:s,attrs:c,emit:u,render:l,renderCache:d,data:p,setupState:f,ctx:g,inheritAttrs:v}=e;let m,_;const y=ft(e);try{if(4&n.shapeFlag){const e=i||r;m=Gr(l.call(e,e,d,o,f,p,g)),_=c}else{const e=t;0,m=Gr(e.length>1?e(o,{attrs:c,slots:s,emit:u}):e(o,null)),_=t.props?c:_t(c)}}catch(I){mr.length=0,_i(I,e,1),m=Rr(gr)}let b=m;if(_&&!1!==v){const e=Object.keys(_),{shapeFlag:t}=b;e.length&&7&t&&(a&&e.some(h["u"])&&(_=yt(_,a)),b=Nr(b,_))}return n.dirs&&(b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&(b.transition=n.transition),m=b,ft(y),m}const _t=e=>{let t;for(const n in e)("class"===n||"style"===n||Object(h["w"])(n))&&((t||(t={}))[n]=e[n]);return t},yt=(e,t)=>{const n={};for(const r in e)Object(h["u"])(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function bt(e,t,n){const{props:r,children:i,component:o}=e,{props:a,children:s,patchFlag:c}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&c>=0))return!(!i&&!s||s&&s.$stable)||r!==a&&(r?!a||It(r,a,u):!!a);if(1024&c)return!0;if(16&c)return r?It(r,a,u):!!a;if(8&c){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(a[n]!==r[n]&&!lt(u,n))return!0}}return!1}function It(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!lt(n,o))return!0}return!1}function Tt({vnode:e,parent:t},n){while(t&&t.subTree===e)(e=t.vnode).el=n,t=t.parent}const Ct=e=>e.__isSuspense;function St(e,t){t&&t.pendingBranch?Object(h["o"])(e)?t.effects.push(...e):t.effects.push(e):Vi(e)}function Et(e,t){if(Qr){let n=Qr.provides;const r=Qr.parent&&Qr.parent.provides;r===n&&(n=Qr.provides=Object.create(r)),n[e]=t}else 0}function Mt(e,t,n=!1){const r=Qr||dt;if(r){const i=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Object(h["p"])(t)?t.call(r.proxy):t}else 0}function kt(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Zt(()=>{e.isMounted=!0}),tn(()=>{e.isUnmounting=!0}),e}const wt=[Function,Array],Ot={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:wt,onEnter:wt,onAfterEnter:wt,onEnterCancelled:wt,onBeforeLeave:wt,onLeave:wt,onAfterLeave:wt,onLeaveCancelled:wt,onBeforeAppear:wt,onAppear:wt,onAfterAppear:wt,onAppearCancelled:wt},setup(e,{slots:t}){const n=ei(),r=kt();let i;return()=>{const o=t.default&&Pt(t.default(),!0);if(!o||!o.length)return;const a=Be(e),{mode:s}=a;const c=o[0];if(r.isLeaving)return xt(c);const u=Lt(c);if(!u)return xt(c);const l=Rt(u,a,r,n);Nt(u,l);const d=n.subTree,p=d&&Lt(d);let f=!1;const{getTransitionKey:h}=u.type;if(h){const e=h();void 0===i?i=e:e!==i&&(i=e,f=!0)}if(p&&p.type!==gr&&(!kr(u,p)||f)){const e=Rt(p,a,r,n);if(Nt(p,e),"out-in"===s)return r.isLeaving=!0,e.afterLeave=()=>{r.isLeaving=!1,n.update()},xt(c);"in-out"===s&&u.type!==gr&&(e.delayLeave=(e,t,n)=>{const i=At(r,p);i[String(p.key)]=p,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete l.delayedLeave},l.delayedLeave=n})}return c}}},Dt=Ot;function At(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function Rt(e,t,n,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:s,onEnter:c,onAfterEnter:u,onEnterCancelled:l,onBeforeLeave:d,onLeave:p,onAfterLeave:f,onLeaveCancelled:h,onBeforeAppear:g,onAppear:v,onAfterAppear:m,onAppearCancelled:_}=t,y=String(e.key),b=At(n,e),I=(e,t)=>{e&&mi(e,r,9,t)},T={mode:o,persisted:a,beforeEnter(t){let r=s;if(!n.isMounted){if(!i)return;r=g||s}t._leaveCb&&t._leaveCb(!0);const o=b[y];o&&kr(e,o)&&o.el._leaveCb&&o.el._leaveCb(),I(r,[t])},enter(e){let t=c,r=u,o=l;if(!n.isMounted){if(!i)return;t=v||c,r=m||u,o=_||l}let a=!1;const s=e._enterCb=t=>{a||(a=!0,I(t?o:r,[e]),T.delayedLeave&&T.delayedLeave(),e._enterCb=void 0)};t?(t(e,s),t.length<=1&&s()):s()},leave(t,r){const i=String(e.key);if(t._enterCb&&t._enterCb(!0),n.isUnmounting)return r();I(d,[t]);let o=!1;const a=t._leaveCb=n=>{o||(o=!0,r(),I(n?h:f,[t]),t._leaveCb=void 0,b[i]===e&&delete b[i])};b[i]=e,p?(p(t,a),p.length<=1&&a()):a()},clone(e){return Rt(e,t,n,r)}};return T}function xt(e){if(Gt(e))return e=Nr(e),e.children=null,e}function Lt(e){return Gt(e)?e.children?e.children[0]:void 0:e}function Nt(e,t){6&e.shapeFlag&&e.component?Nt(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Pt(e,t=!1){let n=[],r=0;for(let i=0;i<e.length;i++){const o=e[i];o.type===fr?(128&o.patchFlag&&r++,n=n.concat(Pt(o.children,t))):(t||o.type!==gr)&&n.push(o)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}function jt(e){return Object(h["p"])(e)?{setup:e,name:e.name}:e}const Ut=e=>!!e.type.__asyncLoader;const Gt=e=>e.type.__isKeepAlive,Vt={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=ei(),r=n.ctx;if(!r.renderer)return t.default;const i=new Map,o=new Set;let a=null;const s=n.suspense,{renderer:{p:c,m:u,um:l,o:{createElement:d}}}=r,p=d("div");function f(e){Wt(e),l(e,n,s)}function g(e){i.forEach((t,n)=>{const r=hi(t.type);!r||e&&e(r)||v(n)})}function v(e){const t=i.get(e);a&&t.type===a.type?a&&Wt(a):f(t),i.delete(e),o.delete(e)}r.activate=(e,t,n,r,i)=>{const o=e.component;u(e,t,n,0,s),c(o.vnode,e,t,n,o,s,r,e.slotScopeIds,i),zn(()=>{o.isDeactivated=!1,o.a&&Object(h["n"])(o.a);const t=e.props&&e.props.onVnodeMounted;t&&qr(t,o.parent,e)},s)},r.deactivate=e=>{const t=e.component;u(e,p,null,1,s),zn(()=>{t.da&&Object(h["n"])(t.da);const n=e.props&&e.props.onVnodeUnmounted;n&&qr(n,t.parent,e),t.isDeactivated=!0},s)},Wi(()=>[e.include,e.exclude],([e,t])=>{e&&g(t=>Bt(e,t)),t&&g(e=>!Bt(t,e))},{flush:"post",deep:!0});let m=null;const _=()=>{null!=m&&i.set(m,Yt(n.subTree))};return Zt(_),en(_),tn(()=>{i.forEach(e=>{const{subTree:t,suspense:r}=n,i=Yt(t);if(e.type!==i.type)f(e);else{Wt(i);const e=i.component.da;e&&zn(e,r)}})}),()=>{if(m=null,!t.default)return null;const n=t.default(),r=n[0];if(n.length>1)return a=null,n;if(!Mr(r)||!(4&r.shapeFlag)&&!(128&r.shapeFlag))return a=null,r;let s=Yt(r);const c=s.type,u=hi(Ut(s)?s.type.__asyncResolved||{}:c),{include:l,exclude:d,max:p}=e;if(l&&(!u||!Bt(l,u))||d&&u&&Bt(d,u))return a=s,r;const f=null==s.key?c:s.key,h=i.get(f);return s.el&&(s=Nr(s),128&r.shapeFlag&&(r.ssContent=s)),m=f,h?(s.el=h.el,s.component=h.component,s.transition&&Nt(s,s.transition),s.shapeFlag|=512,o.delete(f),o.add(f)):(o.add(f),p&&o.size>parseInt(p,10)&&v(o.values().next().value)),s.shapeFlag|=256,a=s,r}}},Ft=Vt;function Bt(e,t){return Object(h["o"])(e)?e.some(e=>Bt(e,t)):Object(h["D"])(e)?e.split(",").indexOf(t)>-1:!!e.test&&e.test(t)}function qt(e,t){zt(e,"a",t)}function Ht(e,t){zt(e,"da",t)}function zt(e,t,n=Qr){const r=e.__wdc||(e.__wdc=()=>{let t=n;while(t){if(t.isDeactivated)return;t=t.parent}return e()});if(Jt(t,r,n),n){let e=n.parent;while(e&&e.parent)Gt(e.parent.vnode)&&Kt(r,t,n,e),e=e.parent}}function Kt(e,t,n,r){const i=Jt(t,e,r,!0);nn(()=>{Object(h["K"])(r[t],i)},n)}function Wt(e){let t=e.shapeFlag;256&t&&(t-=256),512&t&&(t-=512),e.shapeFlag=t}function Yt(e){return 128&e.shapeFlag?e.ssContent:e}function Jt(e,t,n=Qr,r=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...r)=>{if(n.isUnmounted)return;N(),ti(n);const i=mi(t,n,e,r);return ni(),j(),i});return r?i.unshift(o):i.push(o),o}}const $t=e=>(t,n=Qr)=>(!ai||"sp"===e)&&Jt(e,t,n),Xt=$t("bm"),Zt=$t("m"),Qt=$t("bu"),en=$t("u"),tn=$t("bum"),nn=$t("um"),rn=$t("sp"),on=$t("rtg"),an=$t("rtc");function sn(e,t=Qr){Jt("ec",e,t)}let cn=!0;function un(e){const t=fn(e),n=e.proxy,r=e.ctx;cn=!1,t.beforeCreate&&dn(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:a,watch:s,provide:c,inject:u,created:l,beforeMount:d,mounted:p,beforeUpdate:f,updated:g,activated:v,deactivated:m,beforeDestroy:_,beforeUnmount:y,destroyed:b,unmounted:I,render:T,renderTracked:C,renderTriggered:S,errorCaptured:E,serverPrefetch:M,expose:k,inheritAttrs:w,components:O,directives:D,filters:A}=t,R=null;if(u&&ln(u,r,R,e.appContext.config.unwrapInjectedRef),a)for(const L in a){const e=a[L];Object(h["p"])(e)&&(r[L]=e.bind(n))}if(i){0;const t=i.call(n,n);0,Object(h["v"])(t)&&(e.data=Ne(t))}if(cn=!0,o)for(const L in o){const e=o[L],t=Object(h["p"])(e)?e.bind(n,n):Object(h["p"])(e.get)?e.get.bind(n,n):h["d"];0;const i=!Object(h["p"])(e)&&Object(h["p"])(e.set)?e.set.bind(n):h["d"],a=st({get:t,set:i});Object.defineProperty(r,L,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e})}if(s)for(const h in s)pn(s[h],r,n,h);if(c){const e=Object(h["p"])(c)?c.call(n):c;Reflect.ownKeys(e).forEach(t=>{Et(t,e[t])})}function x(e,t){Object(h["o"])(t)?t.forEach(t=>e(t.bind(n))):t&&e(t.bind(n))}if(l&&dn(l,e,"c"),x(Xt,d),x(Zt,p),x(Qt,f),x(en,g),x(qt,v),x(Ht,m),x(sn,E),x(an,C),x(on,S),x(tn,y),x(nn,I),x(rn,M),Object(h["o"])(k))if(k.length){const t=e.exposed||(e.exposed={});k.forEach(e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})})}else e.exposed||(e.exposed={});T&&e.render===h["d"]&&(e.render=T),null!=w&&(e.inheritAttrs=w),O&&(e.components=O),D&&(e.directives=D)}function ln(e,t,n=h["d"],r=!1){Object(h["o"])(e)&&(e=_n(e));for(const i in e){const n=e[i];let o;o=Object(h["v"])(n)?"default"in n?Mt(n.from||i,n.default,!0):Mt(n.from||i):Mt(n),Ye(o)&&r?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:e=>o.value=e}):t[i]=o}}function dn(e,t,n){mi(Object(h["o"])(e)?e.map(e=>e.bind(t.proxy)):e.bind(t.proxy),t,n)}function pn(e,t,n,r){const i=r.includes(".")?$i(n,r):()=>n[r];if(Object(h["D"])(e)){const n=t[e];Object(h["p"])(n)&&Wi(i,n)}else if(Object(h["p"])(e))Wi(i,e.bind(n));else if(Object(h["v"])(e))if(Object(h["o"])(e))e.forEach(e=>pn(e,t,n,r));else{const r=Object(h["p"])(e.handler)?e.handler.bind(n):t[e.handler];Object(h["p"])(r)&&Wi(i,r,e)}else 0}function fn(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,s=o.get(t);let c;return s?c=s:i.length||n||r?(c={},i.length&&i.forEach(e=>hn(c,e,a,!0)),hn(c,t,a)):c=t,o.set(t,c),c}function hn(e,t,n,r=!1){const{mixins:i,extends:o}=t;o&&hn(e,o,n,!0),i&&i.forEach(t=>hn(e,t,n,!0));for(const a in t)if(r&&"expose"===a);else{const r=gn[a]||n&&n[a];e[a]=r?r(e[a],t[a]):t[a]}return e}const gn={data:vn,props:bn,emits:bn,methods:bn,computed:bn,beforeCreate:yn,created:yn,beforeMount:yn,mounted:yn,beforeUpdate:yn,updated:yn,beforeDestroy:yn,beforeUnmount:yn,destroyed:yn,unmounted:yn,activated:yn,deactivated:yn,errorCaptured:yn,serverPrefetch:yn,components:bn,directives:bn,watch:In,provide:vn,inject:mn};function vn(e,t){return t?e?function(){return Object(h["h"])(Object(h["p"])(e)?e.call(this,this):e,Object(h["p"])(t)?t.call(this,this):t)}:t:e}function mn(e,t){return bn(_n(e),_n(t))}function _n(e){if(Object(h["o"])(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function yn(e,t){return e?[...new Set([].concat(e,t))]:t}function bn(e,t){return e?Object(h["h"])(Object(h["h"])(Object.create(null),e),t):t}function In(e,t){if(!e)return t;if(!t)return e;const n=Object(h["h"])(Object.create(null),e);for(const r in t)n[r]=yn(e[r],t[r]);return n}function Tn(e,t,n,r=!1){const i={},o={};Object(h["g"])(o,wr,1),e.propsDefaults=Object.create(null),Sn(e,t,i,o);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);n?e.props=r?i:Pe(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function Cn(e,t,n,r){const{props:i,attrs:o,vnode:{patchFlag:a}}=e,s=Be(i),[c]=e.propsOptions;let u=!1;if(!(r||a>0)||16&a){let r;Sn(e,t,i,o)&&(u=!0);for(const o in s)t&&(Object(h["k"])(t,o)||(r=Object(h["l"])(o))!==o&&Object(h["k"])(t,r))||(c?!n||void 0===n[o]&&void 0===n[r]||(i[o]=En(c,s,o,void 0,e,!0)):delete i[o]);if(o!==s)for(const e in o)t&&Object(h["k"])(t,e)||(delete o[e],u=!0)}else if(8&a){const n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let a=n[r];const l=t[a];if(c)if(Object(h["k"])(o,a))l!==o[a]&&(o[a]=l,u=!0);else{const t=Object(h["e"])(a);i[t]=En(c,s,t,l,e,!1)}else l!==o[a]&&(o[a]=l,u=!0)}}u&&F(e,"set","$attrs")}function Sn(e,t,n,r){const[i,o]=e.propsOptions;let a,s=!1;if(t)for(let c in t){if(Object(h["z"])(c))continue;const u=t[c];let l;i&&Object(h["k"])(i,l=Object(h["e"])(c))?o&&o.includes(l)?(a||(a={}))[l]=u:n[l]=u:lt(e.emitsOptions,c)||c in r&&u===r[c]||(r[c]=u,s=!0)}if(o){const t=Be(n),r=a||h["b"];for(let a=0;a<o.length;a++){const s=o[a];n[s]=En(i,t,s,r[s],e,!Object(h["k"])(r,s))}}return s}function En(e,t,n,r,i,o){const a=e[n];if(null!=a){const e=Object(h["k"])(a,"default");if(e&&void 0===r){const e=a.default;if(a.type!==Function&&Object(h["p"])(e)){const{propsDefaults:o}=i;n in o?r=o[n]:(ti(i),r=o[n]=e.call(null,t),ni())}else r=e}a[0]&&(o&&!e?r=!1:!a[1]||""!==r&&r!==Object(h["l"])(n)||(r=!0))}return r}function Mn(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const o=e.props,a={},s=[];let c=!1;if(!Object(h["p"])(e)){const r=e=>{c=!0;const[n,r]=Mn(e,t,!0);Object(h["h"])(a,n),r&&s.push(...r)};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!o&&!c)return r.set(e,h["a"]),h["a"];if(Object(h["o"])(o))for(let l=0;l<o.length;l++){0;const e=Object(h["e"])(o[l]);kn(e)&&(a[e]=h["b"])}else if(o){0;for(const e in o){const t=Object(h["e"])(e);if(kn(t)){const n=o[e],r=a[t]=Object(h["o"])(n)||Object(h["p"])(n)?{type:n}:n;if(r){const e=Dn(Boolean,r.type),n=Dn(String,r.type);r[0]=e>-1,r[1]=n<0||e<n,(e>-1||Object(h["k"])(r,"default"))&&s.push(t)}}}}const u=[a,s];return r.set(e,u),u}function kn(e){return"$"!==e[0]}function wn(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:null===e?"null":""}function On(e,t){return wn(e)===wn(t)}function Dn(e,t){return Object(h["o"])(t)?t.findIndex(t=>On(t,e)):Object(h["p"])(t)&&On(t,e)?0:-1}const An=e=>"_"===e[0]||"$stable"===e,Rn=e=>Object(h["o"])(e)?e.map(Gr):[Gr(e)],xn=(e,t,n)=>{const r=vt((...e)=>Rn(t(...e)),n);return r._c=!1,r},Ln=(e,t,n)=>{const r=e._ctx;for(const i in e){if(An(i))continue;const n=e[i];if(Object(h["p"])(n))t[i]=xn(i,n,r);else if(null!=n){0;const e=Rn(n);t[i]=()=>e}}},Nn=(e,t)=>{const n=Rn(t);e.slots.default=()=>n},Pn=(e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=Be(t),Object(h["g"])(t,"_",n)):Ln(t,e.slots={})}else e.slots={},t&&Nn(e,t);Object(h["g"])(e.slots,wr,1)},jn=(e,t,n)=>{const{vnode:r,slots:i}=e;let o=!0,a=h["b"];if(32&r.shapeFlag){const e=t._;e?n&&1===e?o=!1:(Object(h["h"])(i,t),n||1!==e||delete i._):(o=!t.$stable,Ln(t,i)),a=t}else t&&(Nn(e,t),a={default:1});if(o)for(const s in i)An(s)||s in a||delete i[s]};function Un(e,t){const n=dt;if(null===n)return e;const r=n.proxy,i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[e,n,a,s=h["b"]]=t[o];Object(h["p"])(e)&&(e={mounted:e,updated:e}),e.deep&&Xi(n),i.push({dir:e,instance:r,value:n,oldValue:void 0,arg:a,modifiers:s})}return e}function Gn(e,t,n,r){const i=e.dirs,o=t&&t.dirs;for(let a=0;a<i.length;a++){const s=i[a];o&&(s.oldValue=o[a].value);let c=s.dir[r];c&&(N(),mi(c,n,8,[e.el,s,e,t]),j())}}function Vn(){return{app:null,config:{isNativeTag:h["c"],performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Fn=0;function Bn(e,t){return function(n,r=null){null==r||Object(h["v"])(r)||(r=null);const i=Vn(),o=new Set;let a=!1;const s=i.app={_uid:Fn++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:Qi,get config(){return i.config},set config(e){0},use(e,...t){return o.has(e)||(e&&Object(h["p"])(e.install)?(o.add(e),e.install(s,...t)):Object(h["p"])(e)&&(o.add(e),e(s,...t))),s},mixin(e){return i.mixins.includes(e)||i.mixins.push(e),s},component(e,t){return t?(i.components[e]=t,s):i.components[e]},directive(e,t){return t?(i.directives[e]=t,s):i.directives[e]},mount(o,c,u){if(!a){const l=Rr(n,r);return l.appContext=i,c&&t?t(l,o):e(l,o,u),a=!0,s._container=o,o.__vue_app__=s,fi(l.component)||l.component.proxy}},unmount(){a&&(e(null,s._container),delete s._container.__vue_app__)},provide(e,t){return i.provides[e]=t,s}};return s}}function qn(e,t,n,r,i=!1){if(Object(h["o"])(e))return void e.forEach((e,o)=>qn(e,t&&(Object(h["o"])(t)?t[o]:t),n,r,i));if(Ut(r)&&!i)return;const o=4&r.shapeFlag?fi(r.component)||r.component.proxy:r.el,a=i?null:o,{i:s,r:c}=e;const u=t&&t.r,l=s.refs===h["b"]?s.refs={}:s.refs,d=s.setupState;if(null!=u&&u!==c&&(Object(h["D"])(u)?(l[u]=null,Object(h["k"])(d,u)&&(d[u]=null)):Ye(u)&&(u.value=null)),Object(h["p"])(c))vi(c,s,12,[a,l]);else{const t=Object(h["D"])(c),r=Ye(c);if(t||r){const r=()=>{if(e.f){const n=t?l[c]:c.value;i?Object(h["o"])(n)&&Object(h["K"])(n,o):Object(h["o"])(n)?n.includes(o)||n.push(o):t?l[c]=[o]:(c.value=[o],e.k&&(l[e.k]=c.value))}else t?(l[c]=a,Object(h["k"])(d,c)&&(d[c]=a)):Ye(c)&&(c.value=a,e.k&&(l[e.k]=a))};a?(r.id=-1,zn(r,n)):r()}else 0}}function Hn(){}const zn=St;function Kn(e){return Wn(e)}function Wn(e,t){Hn();const n=Object(h["i"])();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:a,createText:s,createComment:c,setText:u,setElementText:l,parentNode:d,nextSibling:p,setScopeId:f=h["d"],cloneNode:g,insertStaticContent:v}=e,m=(e,t,n,r=null,i=null,o=null,a=!1,s=null,c=!!t.dynamicChildren)=>{if(e===t)return;e&&!kr(e,t)&&(r=Y(e),q(e,i,o,!0),e=null),-2===t.patchFlag&&(c=!1,t.dynamicChildren=null);const{type:u,ref:l,shapeFlag:d}=t;switch(u){case hr:_(e,t,n,r);break;case gr:y(e,t,n,r);break;case vr:null==e&&b(t,n,r,a);break;case fr:D(e,t,n,r,i,o,a,s,c);break;default:1&d?C(e,t,n,r,i,o,a,s,c):6&d?R(e,t,n,r,i,o,a,s,c):(64&d||128&d)&&u.process(e,t,n,r,i,o,a,s,c,$)}null!=l&&i&&qn(l,e&&e.ref,o,t||e,!t)},_=(e,t,n,i)=>{if(null==e)r(t.el=s(t.children),n,i);else{const n=t.el=e.el;t.children!==e.children&&u(n,t.children)}},y=(e,t,n,i)=>{null==e?r(t.el=c(t.children||""),n,i):t.el=e.el},b=(e,t,n,r)=>{[e.el,e.anchor]=v(e.children,t,n,r)},I=({el:e,anchor:t},n,i)=>{let o;while(e&&e!==t)o=p(e),r(e,n,i),e=o;r(t,n,i)},T=({el:e,anchor:t})=>{let n;while(e&&e!==t)n=p(e),i(e),e=n;i(t)},C=(e,t,n,r,i,o,a,s,c)=>{a=a||"svg"===t.type,null==e?S(t,n,r,i,o,a,s,c):k(e,t,i,o,a,s,c)},S=(e,t,n,i,s,c,u,d)=>{let p,f;const{type:v,props:m,shapeFlag:_,transition:y,patchFlag:b,dirs:I}=e;if(e.el&&void 0!==g&&-1===b)p=e.el=g(e.el);else{if(p=e.el=a(e.type,c,m&&m.is,m),8&_?l(p,e.children):16&_&&M(e.children,p,null,i,s,c&&"foreignObject"!==v,u,d),I&&Gn(e,null,i,"created"),m){for(const t in m)"value"===t||Object(h["z"])(t)||o(p,t,null,m[t],c,e.children,i,s,W);"value"in m&&o(p,"value",null,m.value),(f=m.onVnodeBeforeMount)&&qr(f,i,e)}E(p,e,e.scopeId,u,i)}I&&Gn(e,null,i,"beforeMount");const T=(!s||s&&!s.pendingBranch)&&y&&!y.persisted;T&&y.beforeEnter(p),r(p,t,n),((f=m&&m.onVnodeMounted)||T||I)&&zn(()=>{f&&qr(f,i,e),T&&y.enter(p),I&&Gn(e,null,i,"mounted")},s)},E=(e,t,n,r,i)=>{if(n&&f(e,n),r)for(let o=0;o<r.length;o++)f(e,r[o]);if(i){let n=i.subTree;if(t===n){const t=i.vnode;E(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},M=(e,t,n,r,i,o,a,s,c=0)=>{for(let u=c;u<e.length;u++){const c=e[u]=s?Vr(e[u]):Gr(e[u]);m(null,c,t,n,r,i,o,a,s)}},k=(e,t,n,r,i,a,s)=>{const c=t.el=e.el;let{patchFlag:u,dynamicChildren:d,dirs:p}=t;u|=16&e.patchFlag;const f=e.props||h["b"],g=t.props||h["b"];let v;n&&Yn(n,!1),(v=g.onVnodeBeforeUpdate)&&qr(v,n,t,e),p&&Gn(t,e,n,"beforeUpdate"),n&&Yn(n,!0);const m=i&&"foreignObject"!==t.type;if(d?w(e.dynamicChildren,d,c,n,r,m,a):s||G(e,t,c,null,n,r,m,a,!1),u>0){if(16&u)O(c,t,f,g,n,r,i);else if(2&u&&f.class!==g.class&&o(c,"class",null,g.class,i),4&u&&o(c,"style",f.style,g.style,i),8&u){const a=t.dynamicProps;for(let t=0;t<a.length;t++){const s=a[t],u=f[s],l=g[s];l===u&&"value"!==s||o(c,s,u,l,i,e.children,n,r,W)}}1&u&&e.children!==t.children&&l(c,t.children)}else s||null!=d||O(c,t,f,g,n,r,i);((v=g.onVnodeUpdated)||p)&&zn(()=>{v&&qr(v,n,t,e),p&&Gn(t,e,n,"updated")},r)},w=(e,t,n,r,i,o,a)=>{for(let s=0;s<t.length;s++){const c=e[s],u=t[s],l=c.el&&(c.type===fr||!kr(c,u)||70&c.shapeFlag)?d(c.el):n;m(c,u,l,null,r,i,o,a,!0)}},O=(e,t,n,r,i,a,s)=>{if(n!==r){for(const c in r){if(Object(h["z"])(c))continue;const u=r[c],l=n[c];u!==l&&"value"!==c&&o(e,c,l,u,s,t.children,i,a,W)}if(n!==h["b"])for(const c in n)Object(h["z"])(c)||c in r||o(e,c,n[c],null,s,t.children,i,a,W);"value"in r&&o(e,"value",n.value,r.value)}},D=(e,t,n,i,o,a,c,u,l)=>{const d=t.el=e?e.el:s(""),p=t.anchor=e?e.anchor:s("");let{patchFlag:f,dynamicChildren:h,slotScopeIds:g}=t;g&&(u=u?u.concat(g):g),null==e?(r(d,n,i),r(p,n,i),M(t.children,n,p,o,a,c,u,l)):f>0&&64&f&&h&&e.dynamicChildren?(w(e.dynamicChildren,h,n,o,a,c,u),(null!=t.key||o&&t===o.subTree)&&Jn(e,t,!0)):G(e,t,n,p,o,a,c,u,l)},R=(e,t,n,r,i,o,a,s,c)=>{t.slotScopeIds=s,null==e?512&t.shapeFlag?i.ctx.activate(t,n,r,a,c):x(t,n,r,i,o,a,c):L(e,t,c)},x=(e,t,n,r,i,o,a)=>{const s=e.component=Zr(e,r,i);if(Gt(e)&&(s.ctx.renderer=$),si(s),s.asyncDep){if(i&&i.registerDep(s,P),!e.el){const e=s.subTree=Rr(gr);y(null,e,t,n)}}else P(s,e,t,n,i,o,a)},L=(e,t,n)=>{const r=t.component=e.component;if(bt(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void U(r,t,n);r.next=t,ji(r.update),r.update()}else t.component=e.component,t.el=e.el,r.vnode=t},P=(e,t,n,r,i,o,a)=>{const s=()=>{if(e.isMounted){let t,{next:n,bu:r,u:s,parent:c,vnode:u}=e,l=n;0,Yn(e,!1),n?(n.el=u.el,U(e,n,a)):n=u,r&&Object(h["n"])(r),(t=n.props&&n.props.onVnodeBeforeUpdate)&&qr(t,c,n,u),Yn(e,!0);const p=mt(e);0;const f=e.subTree;e.subTree=p,m(f,p,d(f.el),Y(f),e,i,o),n.el=p.el,null===l&&Tt(e,p.el),s&&zn(s,i),(t=n.props&&n.props.onVnodeUpdated)&&zn(()=>qr(t,c,n,u),i)}else{let a;const{el:s,props:c}=t,{bm:u,m:l,parent:d}=e,p=Ut(t);if(Yn(e,!1),u&&Object(h["n"])(u),!p&&(a=c&&c.onVnodeBeforeMount)&&qr(a,d,t),Yn(e,!0),s&&Z){const n=()=>{e.subTree=mt(e),Z(s,e.subTree,e,i,null)};p?t.type.__asyncLoader().then(()=>!e.isUnmounted&&n()):n()}else{0;const a=e.subTree=mt(e);0,m(null,a,n,r,e,i,o),t.el=a.el}if(l&&zn(l,i),!p&&(a=c&&c.onVnodeMounted)){const e=t;zn(()=>qr(a,d,e),i)}256&t.shapeFlag&&e.a&&zn(e.a,i),e.isMounted=!0,t=n=r=null}},c=e.effect=new A(s,()=>Ni(e.update),e.scope),u=e.update=c.run.bind(c);u.id=e.uid,Yn(e,!0),u()},U=(e,t,n)=>{t.component=e;const r=e.vnode.props;e.vnode=t,e.next=null,Cn(e,t.props,r,n),jn(e,t.children,n),N(),Fi(void 0,e.update),j()},G=(e,t,n,r,i,o,a,s,c=!1)=>{const u=e&&e.children,d=e?e.shapeFlag:0,p=t.children,{patchFlag:f,shapeFlag:h}=t;if(f>0){if(128&f)return void F(u,p,n,r,i,o,a,s,c);if(256&f)return void V(u,p,n,r,i,o,a,s,c)}8&h?(16&d&&W(u,i,o),p!==u&&l(n,p)):16&d?16&h?F(u,p,n,r,i,o,a,s,c):W(u,i,o,!0):(8&d&&l(n,""),16&h&&M(p,n,r,i,o,a,s,c))},V=(e,t,n,r,i,o,a,s,c)=>{e=e||h["a"],t=t||h["a"];const u=e.length,l=t.length,d=Math.min(u,l);let p;for(p=0;p<d;p++){const r=t[p]=c?Vr(t[p]):Gr(t[p]);m(e[p],r,n,null,i,o,a,s,c)}u>l?W(e,i,o,!0,!1,d):M(t,n,r,i,o,a,s,c,d)},F=(e,t,n,r,i,o,a,s,c)=>{let u=0;const l=t.length;let d=e.length-1,p=l-1;while(u<=d&&u<=p){const r=e[u],l=t[u]=c?Vr(t[u]):Gr(t[u]);if(!kr(r,l))break;m(r,l,n,null,i,o,a,s,c),u++}while(u<=d&&u<=p){const r=e[d],u=t[p]=c?Vr(t[p]):Gr(t[p]);if(!kr(r,u))break;m(r,u,n,null,i,o,a,s,c),d--,p--}if(u>d){if(u<=p){const e=p+1,d=e<l?t[e].el:r;while(u<=p)m(null,t[u]=c?Vr(t[u]):Gr(t[u]),n,d,i,o,a,s,c),u++}}else if(u>p)while(u<=d)q(e[u],i,o,!0),u++;else{const f=u,g=u,v=new Map;for(u=g;u<=p;u++){const e=t[u]=c?Vr(t[u]):Gr(t[u]);null!=e.key&&v.set(e.key,u)}let _,y=0;const b=p-g+1;let I=!1,T=0;const C=new Array(b);for(u=0;u<b;u++)C[u]=0;for(u=f;u<=d;u++){const r=e[u];if(y>=b){q(r,i,o,!0);continue}let l;if(null!=r.key)l=v.get(r.key);else for(_=g;_<=p;_++)if(0===C[_-g]&&kr(r,t[_])){l=_;break}void 0===l?q(r,i,o,!0):(C[l-g]=u+1,l>=T?T=l:I=!0,m(r,t[l],n,null,i,o,a,s,c),y++)}const S=I?$n(C):h["a"];for(_=S.length-1,u=b-1;u>=0;u--){const e=g+u,d=t[e],p=e+1<l?t[e+1].el:r;0===C[u]?m(null,d,n,p,i,o,a,s,c):I&&(_<0||u!==S[_]?B(d,n,p,2):_--)}}},B=(e,t,n,i,o=null)=>{const{el:a,type:s,transition:c,children:u,shapeFlag:l}=e;if(6&l)return void B(e.component.subTree,t,n,i);if(128&l)return void e.suspense.move(t,n,i);if(64&l)return void s.move(e,t,n,$);if(s===fr){r(a,t,n);for(let e=0;e<u.length;e++)B(u[e],t,n,i);return void r(e.anchor,t,n)}if(s===vr)return void I(e,t,n);const d=2!==i&&1&l&&c;if(d)if(0===i)c.beforeEnter(a),r(a,t,n),zn(()=>c.enter(a),o);else{const{leave:e,delayLeave:i,afterLeave:o}=c,s=()=>r(a,t,n),u=()=>{e(a,()=>{s(),o&&o()})};i?i(a,s,u):u()}else r(a,t,n)},q=(e,t,n,r=!1,i=!1)=>{const{type:o,props:a,ref:s,children:c,dynamicChildren:u,shapeFlag:l,patchFlag:d,dirs:p}=e;if(null!=s&&qn(s,null,n,e,!0),256&l)return void t.ctx.deactivate(e);const f=1&l&&p,h=!Ut(e);let g;if(h&&(g=a&&a.onVnodeBeforeUnmount)&&qr(g,t,e),6&l)K(e.component,n,r);else{if(128&l)return void e.suspense.unmount(n,r);f&&Gn(e,null,t,"beforeUnmount"),64&l?e.type.remove(e,t,n,i,$,r):u&&(o!==fr||d>0&&64&d)?W(u,t,n,!1,!0):(o===fr&&384&d||!i&&16&l)&&W(c,t,n),r&&H(e)}(h&&(g=a&&a.onVnodeUnmounted)||f)&&zn(()=>{g&&qr(g,t,e),f&&Gn(e,null,t,"unmounted")},n)},H=e=>{const{type:t,el:n,anchor:r,transition:o}=e;if(t===fr)return void z(n,r);if(t===vr)return void T(e);const a=()=>{i(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&e.shapeFlag&&o&&!o.persisted){const{leave:t,delayLeave:r}=o,i=()=>t(n,a);r?r(e.el,a,i):i()}else a()},z=(e,t)=>{let n;while(e!==t)n=p(e),i(e),e=n;i(t)},K=(e,t,n)=>{const{bum:r,scope:i,update:o,subTree:a,um:s}=e;r&&Object(h["n"])(r),i.stop(),o&&(o.active=!1,q(a,e,t,n)),s&&zn(s,t),zn(()=>{e.isUnmounted=!0},t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},W=(e,t,n,r=!1,i=!1,o=0)=>{for(let a=o;a<e.length;a++)q(e[a],t,n,r,i)},Y=e=>6&e.shapeFlag?Y(e.component.subTree):128&e.shapeFlag?e.suspense.next():p(e.anchor||e.el),J=(e,t,n)=>{null==e?t._vnode&&q(t._vnode,null,null,!0):m(t._vnode||null,e,t,null,null,null,n),Bi(),t._vnode=e},$={p:m,um:q,m:B,r:H,mt:x,mc:M,pc:G,pbc:w,n:Y,o:e};let X,Z;return t&&([X,Z]=t($)),{render:J,hydrate:X,createApp:Bn(J,X)}}function Yn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Jn(e,t,n=!1){const r=e.children,i=t.children;if(Object(h["o"])(r)&&Object(h["o"])(i))for(let o=0;o<r.length;o++){const e=r[o];let t=i[o];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=i[o]=Vr(i[o]),t.el=e.el),n||Jn(e,t))}}function $n(e){const t=e.slice(),n=[0];let r,i,o,a,s;const c=e.length;for(r=0;r<c;r++){const c=e[r];if(0!==c){if(i=n[n.length-1],e[i]<c){t[r]=i,n.push(r);continue}o=0,a=n.length-1;while(o<a)s=o+a>>1,e[n[s]]<c?o=s+1:a=s;c<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}o=n.length,a=n[o-1];while(o-- >0)n[o]=a,a=t[a];return n}const Xn=e=>e.__isTeleport,Zn=e=>e&&(e.disabled||""===e.disabled),Qn=e=>"undefined"!==typeof SVGElement&&e instanceof SVGElement,er=(e,t)=>{const n=e&&e.to;if(Object(h["D"])(n)){if(t){const e=t(n);return e}return null}return n},tr={__isTeleport:!0,process(e,t,n,r,i,o,a,s,c,u){const{mc:l,pc:d,pbc:p,o:{insert:f,querySelector:h,createText:g,createComment:v}}=u,m=Zn(t.props);let{shapeFlag:_,children:y,dynamicChildren:b}=t;if(null==e){const e=t.el=g(""),u=t.anchor=g("");f(e,n,r),f(u,n,r);const d=t.target=er(t.props,h),p=t.targetAnchor=g("");d&&(f(p,d),a=a||Qn(d));const v=(e,t)=>{16&_&&l(y,e,t,i,o,a,s,c)};m?v(n,u):d&&v(d,p)}else{t.el=e.el;const r=t.anchor=e.anchor,l=t.target=e.target,f=t.targetAnchor=e.targetAnchor,g=Zn(e.props),v=g?n:l,_=g?r:f;if(a=a||Qn(l),b?(p(e.dynamicChildren,b,v,i,o,a,s),Jn(e,t,!0)):c||d(e,t,v,_,i,o,a,s,!1),m)g||nr(t,n,r,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const e=t.target=er(t.props,h);e&&nr(t,e,null,u,0)}else g&&nr(t,l,f,u,1)}},remove(e,t,n,r,{um:i,o:{remove:o}},a){const{shapeFlag:s,children:c,anchor:u,targetAnchor:l,target:d,props:p}=e;if(d&&o(l),(a||!Zn(p))&&(o(u),16&s))for(let f=0;f<c.length;f++){const e=c[f];i(e,t,n,!0,!!e.dynamicChildren)}},move:nr,hydrate:rr};function nr(e,t,n,{o:{insert:r},m:i},o=2){0===o&&r(e.targetAnchor,t,n);const{el:a,anchor:s,shapeFlag:c,children:u,props:l}=e,d=2===o;if(d&&r(a,t,n),(!d||Zn(l))&&16&c)for(let p=0;p<u.length;p++)i(u[p],t,n,2);d&&r(s,t,n)}function rr(e,t,n,r,i,o,{o:{nextSibling:a,parentNode:s,querySelector:c}},u){const l=t.target=er(t.props,c);if(l){const c=l._lpa||l.firstChild;16&t.shapeFlag&&(Zn(t.props)?(t.anchor=u(a(e),t,s(e),n,r,i,o),t.targetAnchor=c):(t.anchor=a(e),t.targetAnchor=u(c,t,l,n,r,i,o)),l._lpa=t.targetAnchor&&a(t.targetAnchor))}return t.anchor&&a(t.anchor)}const ir=tr,or="components",ar="directives";function sr(e,t){return dr(or,e,!0,t)||e}const cr=Symbol();function ur(e){return Object(h["D"])(e)?dr(or,e,!1)||e:e||cr}function lr(e){return dr(ar,e)}function dr(e,t,n=!0,r=!1){const i=dt||Qr;if(i){const n=i.type;if(e===or){const e=hi(n);if(e&&(e===t||e===Object(h["e"])(t)||e===Object(h["f"])(Object(h["e"])(t))))return n}const o=pr(i[e]||n[e],t)||pr(i.appContext[e],t);return!o&&r?n:o}}function pr(e,t){return e&&(e[t]||e[Object(h["e"])(t)]||e[Object(h["f"])(Object(h["e"])(t))])}const fr=Symbol(void 0),hr=Symbol(void 0),gr=Symbol(void 0),vr=Symbol(void 0),mr=[];let _r=null;function yr(e=!1){mr.push(_r=e?null:[])}function br(){mr.pop(),_r=mr[mr.length-1]||null}let Ir=1;function Tr(e){Ir+=e}function Cr(e){return e.dynamicChildren=Ir>0?_r||h["a"]:null,br(),Ir>0&&_r&&_r.push(e),e}function Sr(e,t,n,r,i,o){return Cr(Ar(e,t,n,r,i,o,!0))}function Er(e,t,n,r,i){return Cr(Rr(e,t,n,r,i,!0))}function Mr(e){return!!e&&!0===e.__v_isVNode}function kr(e,t){return e.type===t.type&&e.key===t.key}const wr="__vInternal",Or=({key:e})=>null!=e?e:null,Dr=({ref:e,ref_key:t,ref_for:n})=>null!=e?Object(h["D"])(e)||Ye(e)||Object(h["p"])(e)?{i:dt,r:e,k:t,f:!!n}:e:null;function Ar(e,t=null,n=null,r=0,i=null,o=(e===fr?0:1),a=!1,s=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Or(t),ref:t&&Dr(t),scopeId:pt,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null};return s?(Fr(c,n),128&o&&e.normalize(c)):n&&(c.shapeFlag|=Object(h["D"])(n)?8:16),Ir>0&&!a&&_r&&(c.patchFlag>0||6&o)&&32!==c.patchFlag&&_r.push(c),c}const Rr=xr;function xr(e,t=null,n=null,r=0,i=null,o=!1){if(e&&e!==cr||(e=gr),Mr(e)){const r=Nr(e,t,!0);return n&&Fr(r,n),r}if(gi(e)&&(e=e.__vccOpts),t){t=Lr(t);let{class:e,style:n}=t;e&&!Object(h["D"])(e)&&(t.class=Object(h["I"])(e)),Object(h["v"])(n)&&(Fe(n)&&!Object(h["o"])(n)&&(n=Object(h["h"])({},n)),t.style=Object(h["J"])(n))}const a=Object(h["D"])(e)?1:Ct(e)?128:Xn(e)?64:Object(h["v"])(e)?4:Object(h["p"])(e)?2:0;return Ar(e,t,n,r,i,a,o,!0)}function Lr(e){return e?Fe(e)||wr in e?Object(h["h"])({},e):e:null}function Nr(e,t,n=!1){const{props:r,ref:i,patchFlag:o,children:a}=e,s=t?Br(r||{},t):r,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:s,key:s&&Or(s),ref:t&&t.ref?n&&i?Object(h["o"])(i)?i.concat(Dr(t)):[i,Dr(t)]:Dr(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==fr?-1===o?16:16|o:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Nr(e.ssContent),ssFallback:e.ssFallback&&Nr(e.ssFallback),el:e.el,anchor:e.anchor};return c}function Pr(e=" ",t=0){return Rr(hr,null,e,t)}function jr(e,t){const n=Rr(vr,null,e);return n.staticCount=t,n}function Ur(e="",t=!1){return t?(yr(),Er(gr,null,e)):Rr(gr,null,e)}function Gr(e){return null==e||"boolean"===typeof e?Rr(gr):Object(h["o"])(e)?Rr(fr,null,e.slice()):"object"===typeof e?Vr(e):Rr(hr,null,String(e))}function Vr(e){return null===e.el||e.memo?e:Nr(e)}function Fr(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if(Object(h["o"])(t))n=16;else if("object"===typeof t){if(65&r){const n=t.default;return void(n&&(n._c&&(n._d=!1),Fr(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||wr in t?3===r&&dt&&(1===dt.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=dt}}else Object(h["p"])(t)?(t={default:t,_ctx:dt},n=32):(t=String(t),64&r?(n=16,t=[Pr(t)]):n=8);e.children=t,e.shapeFlag|=n}function Br(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)if("class"===e)t.class!==r.class&&(t.class=Object(h["I"])([t.class,r.class]));else if("style"===e)t.style=Object(h["J"])([t.style,r.style]);else if(Object(h["w"])(e)){const n=t[e],i=r[e];n===i||Object(h["o"])(n)&&n.includes(i)||(t[e]=n?[].concat(n,i):i)}else""!==e&&(t[e]=r[e])}return t}function qr(e,t,n,r=null){mi(e,t,7,[n,r])}function Hr(e,t,n,r){let i;const o=n&&n[r];if(Object(h["o"])(e)||Object(h["D"])(e)){i=new Array(e.length);for(let n=0,r=e.length;n<r;n++)i[n]=t(e[n],n,void 0,o&&o[n])}else if("number"===typeof e){0,i=new Array(e);for(let n=0;n<e;n++)i[n]=t(n+1,n,void 0,o&&o[n])}else if(Object(h["v"])(e))if(e[Symbol.iterator])i=Array.from(e,(e,n)=>t(e,n,void 0,o&&o[n]));else{const n=Object.keys(e);i=new Array(n.length);for(let r=0,a=n.length;r<a;r++){const a=n[r];i[r]=t(e[a],a,r,o&&o[r])}}else i=[];return n&&(n[r]=i),i}function zr(e,t,n={},r,i){if(dt.isCE)return Rr("slot","default"===t?null:{name:t},r&&r());let o=e[t];o&&o._c&&(o._d=!1),yr();const a=o&&Kr(o(n)),s=Er(fr,{key:n.key||"_"+t},a||(r?r():[]),a&&1===e._?64:-2);return!i&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),o&&o._c&&(o._d=!0),s}function Kr(e){return e.some(e=>!Mr(e)||e.type!==gr&&!(e.type===fr&&!Kr(e.children)))?e:null}const Wr=e=>e?ri(e)?fi(e)||e.proxy:Wr(e.parent):null,Yr=Object(h["h"])(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Wr(e.parent),$root:e=>Wr(e.root),$emit:e=>e.emit,$options:e=>fn(e),$forceUpdate:e=>()=>Ni(e.update),$nextTick:e=>xi.bind(e.proxy),$watch:e=>Ji.bind(e)}),Jr={get({_:e},t){const{ctx:n,setupState:r,data:i,props:o,accessCache:a,type:s,appContext:c}=e;let u;if("$"!==t[0]){const s=a[t];if(void 0!==s)switch(s){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return o[t]}else{if(r!==h["b"]&&Object(h["k"])(r,t))return a[t]=1,r[t];if(i!==h["b"]&&Object(h["k"])(i,t))return a[t]=2,i[t];if((u=e.propsOptions[0])&&Object(h["k"])(u,t))return a[t]=3,o[t];if(n!==h["b"]&&Object(h["k"])(n,t))return a[t]=4,n[t];cn&&(a[t]=0)}}const l=Yr[t];let d,p;return l?("$attrs"===t&&U(e,"get",t),l(e)):(d=s.__cssModules)&&(d=d[t])?d:n!==h["b"]&&Object(h["k"])(n,t)?(a[t]=4,n[t]):(p=c.config.globalProperties,Object(h["k"])(p,t)?p[t]:void 0)},set({_:e},t,n){const{data:r,setupState:i,ctx:o}=e;if(i!==h["b"]&&Object(h["k"])(i,t))i[t]=n;else if(r!==h["b"]&&Object(h["k"])(r,t))r[t]=n;else if(Object(h["k"])(e.props,t))return!1;return("$"!==t[0]||!(t.slice(1)in e))&&(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:o}},a){let s;return!!n[a]||e!==h["b"]&&Object(h["k"])(e,a)||t!==h["b"]&&Object(h["k"])(t,a)||(s=o[0])&&Object(h["k"])(s,a)||Object(h["k"])(r,a)||Object(h["k"])(Yr,a)||Object(h["k"])(i.config.globalProperties,a)}};const $r=Vn();let Xr=0;function Zr(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||$r,o={uid:Xr++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new v(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Mn(r,i),emitsOptions:ut(r,i),emit:null,emitted:null,propsDefaults:h["b"],inheritAttrs:r.inheritAttrs,ctx:h["b"],data:h["b"],props:h["b"],attrs:h["b"],slots:h["b"],refs:h["b"],setupState:h["b"],setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=ct.bind(null,o),e.ce&&e.ce(o),o}let Qr=null;const ei=()=>Qr||dt,ti=e=>{Qr=e,e.scope.on()},ni=()=>{Qr&&Qr.scope.off(),Qr=null};function ri(e){return 4&e.vnode.shapeFlag}let ii,oi,ai=!1;function si(e,t=!1){ai=t;const{props:n,children:r}=e.vnode,i=ri(e);Tn(e,n,i,t),Pn(e,r);const o=i?ci(e,t):void 0;return ai=!1,o}function ci(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=qe(new Proxy(e.ctx,Jr));const{setup:r}=n;if(r){const n=e.setupContext=r.length>1?pi(e):null;ti(e),N();const i=vi(r,e,0,[e.props,n]);if(j(),ni(),Object(h["y"])(i)){if(i.then(ni,ni),t)return i.then(n=>{ui(e,n,t)}).catch(t=>{_i(t,e,0)});e.asyncDep=i}else ui(e,i,t)}else li(e,t)}function ui(e,t,n){Object(h["p"])(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Object(h["v"])(t)&&(e.setupState=nt(t)),li(e,n)}function li(e,t,n){const r=e.type;if(!e.render){if(!t&&ii&&!r.render){const t=r.template;if(t){0;const{isCustomElement:n,compilerOptions:i}=e.appContext.config,{delimiters:o,compilerOptions:a}=r,s=Object(h["h"])(Object(h["h"])({isCustomElement:n,delimiters:o},i),a);r.render=ii(t,s)}}e.render=r.render||h["d"],oi&&oi(e)}ti(e),N(),un(e),j(),ni()}function di(e){return new Proxy(e.attrs,{get(t,n){return U(e,"get","$attrs"),t[n]}})}function pi(e){const t=t=>{e.exposed=t||{}};let n;return{get attrs(){return n||(n=di(e))},slots:e.slots,emit:e.emit,expose:t}}function fi(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(nt(qe(e.exposed)),{get(t,n){return n in t?t[n]:n in Yr?Yr[n](e):void 0}}))}function hi(e){return Object(h["p"])(e)&&e.displayName||e.name}function gi(e){return Object(h["p"])(e)&&"__vccOpts"in e}function vi(e,t,n,r){let i;try{i=r?e(...r):e()}catch(o){_i(o,t,n)}return i}function mi(e,t,n,r){if(Object(h["p"])(e)){const i=vi(e,t,n,r);return i&&Object(h["y"])(i)&&i.catch(e=>{_i(e,t,n)}),i}const i=[];for(let o=0;o<e.length;o++)i.push(mi(e[o],t,n,r));return i}function _i(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let r=t.parent;const i=t.proxy,o=n;while(r){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,i,o))return;r=r.parent}const a=t.appContext.config.errorHandler;if(a)return void vi(a,null,10,[e,i,o])}yi(e,n,i,r)}function yi(e,t,n,r=!0){console.error(e)}let bi=!1,Ii=!1;const Ti=[];let Ci=0;const Si=[];let Ei=null,Mi=0;const ki=[];let wi=null,Oi=0;const Di=Promise.resolve();let Ai=null,Ri=null;function xi(e){const t=Ai||Di;return e?t.then(this?e.bind(this):e):t}function Li(e){let t=Ci+1,n=Ti.length;while(t<n){const r=t+n>>>1,i=qi(Ti[r]);i<e?t=r+1:n=r}return t}function Ni(e){Ti.length&&Ti.includes(e,bi&&e.allowRecurse?Ci+1:Ci)||e===Ri||(null==e.id?Ti.push(e):Ti.splice(Li(e.id),0,e),Pi())}function Pi(){bi||Ii||(Ii=!0,Ai=Di.then(Hi))}function ji(e){const t=Ti.indexOf(e);t>Ci&&Ti.splice(t,1)}function Ui(e,t,n,r){Object(h["o"])(e)?n.push(...e):t&&t.includes(e,e.allowRecurse?r+1:r)||n.push(e),Pi()}function Gi(e){Ui(e,Ei,Si,Mi)}function Vi(e){Ui(e,wi,ki,Oi)}function Fi(e,t=null){if(Si.length){for(Ri=t,Ei=[...new Set(Si)],Si.length=0,Mi=0;Mi<Ei.length;Mi++)Ei[Mi]();Ei=null,Mi=0,Ri=null,Fi(e,t)}}function Bi(e){if(ki.length){const e=[...new Set(ki)];if(ki.length=0,wi)return void wi.push(...e);for(wi=e,wi.sort((e,t)=>qi(e)-qi(t)),Oi=0;Oi<wi.length;Oi++)wi[Oi]();wi=null,Oi=0}}const qi=e=>null==e.id?1/0:e.id;function Hi(e){Ii=!1,bi=!0,Fi(e),Ti.sort((e,t)=>qi(e)-qi(t));h["d"];try{for(Ci=0;Ci<Ti.length;Ci++){const e=Ti[Ci];e&&!1!==e.active&&vi(e,null,14)}}finally{Ci=0,Ti.length=0,Bi(e),bi=!1,Ai=null,(Ti.length||Si.length||ki.length)&&Hi(e)}}function zi(e,t){return Yi(e,null,t)}const Ki={};function Wi(e,t,n){return Yi(e,t,n)}function Yi(e,t,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:a}=h["b"]){const s=Qr;let c,u,l=!1,d=!1;if(Ye(e)?(c=()=>e.value,l=!!e._shallow):Ge(e)?(c=()=>e,r=!0):Object(h["o"])(e)?(d=!0,l=e.some(Ge),c=()=>e.map(e=>Ye(e)?e.value:Ge(e)?Xi(e):Object(h["p"])(e)?vi(e,s,2):void 0)):c=Object(h["p"])(e)?t?()=>vi(e,s,2):()=>{if(!s||!s.isUnmounted)return u&&u(),mi(e,s,3,[p])}:h["d"],t&&r){const e=c;c=()=>Xi(e())}let p=e=>{u=m.onStop=()=>{vi(e,s,4)}};if(ai)return p=h["d"],t?n&&mi(t,s,3,[c(),d?[]:void 0,p]):c(),h["d"];let f=d?[]:Ki;const g=()=>{if(m.active)if(t){const e=m.run();(r||l||(d?e.some((e,t)=>Object(h["j"])(e,f[t])):Object(h["j"])(e,f)))&&(u&&u(),mi(t,s,3,[e,f===Ki?void 0:f,p]),f=e)}else m.run()};let v;g.allowRecurse=!!t,v="sync"===i?g:"post"===i?()=>zn(g,s&&s.suspense):()=>{!s||s.isMounted?Gi(g):g()};const m=new A(c,v);return t?n?g():f=m.run():"post"===i?zn(m.run.bind(m),s&&s.suspense):m.run(),()=>{m.stop(),s&&s.scope&&Object(h["K"])(s.scope.effects,m)}}function Ji(e,t,n){const r=this.proxy,i=Object(h["D"])(e)?e.includes(".")?$i(r,e):()=>r[e]:e.bind(r,r);let o;Object(h["p"])(t)?o=t:(o=t.handler,n=t);const a=Qr;ti(this);const s=Yi(i,o.bind(r),n);return a?ti(a):ni(),s}function $i(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function Xi(e,t){if(!Object(h["v"])(e)||e["__v_skip"])return e;if(t=t||new Set,t.has(e))return e;if(t.add(e),Ye(e))Xi(e.value,t);else if(Object(h["o"])(e))for(let n=0;n<e.length;n++)Xi(e[n],t);else if(Object(h["B"])(e)||Object(h["t"])(e))e.forEach(e=>{Xi(e,t)});else if(Object(h["x"])(e))for(const n in e)Xi(e[n],t);return e}function Zi(e,t,n){const r=arguments.length;return 2===r?Object(h["v"])(t)&&!Object(h["o"])(t)?Mr(t)?Rr(e,null,[t]):Rr(e,t):Rr(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&Mr(n)&&(n=[n]),Rr(e,t,n))}Symbol("");const Qi="3.2.26",eo="http://www.w3.org/2000/svg",to="undefined"!==typeof document?document:null,no=new Map,ro={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?to.createElementNS(eo,e):to.createElement(e,n?{is:n}:void 0);return"select"===e&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:e=>to.createTextNode(e),createComment:e=>to.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>to.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,r){const i=n?n.previousSibling:t.lastChild;let o=no.get(e);if(!o){const t=to.createElement("template");if(t.innerHTML=r?`<svg>${e}</svg>`:e,o=t.content,r){const e=o.firstChild;while(e.firstChild)o.appendChild(e.firstChild);o.removeChild(e)}no.set(e,o)}return t.insertBefore(o.cloneNode(!0),n),[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function io(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function oo(e,t,n){const r=e.style,i=Object(h["D"])(n);if(n&&!i){for(const e in n)so(r,e,n[e]);if(t&&!Object(h["D"])(t))for(const e in t)null==n[e]&&so(r,e,"")}else{const o=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=o)}}const ao=/\s*!important$/;function so(e,t,n){if(Object(h["o"])(n))n.forEach(n=>so(e,t,n));else if(t.startsWith("--"))e.setProperty(t,n);else{const r=lo(e,t);ao.test(n)?e.setProperty(Object(h["l"])(r),n.replace(ao,""),"important"):e[r]=n}}const co=["Webkit","Moz","ms"],uo={};function lo(e,t){const n=uo[t];if(n)return n;let r=Object(h["e"])(t);if("filter"!==r&&r in e)return uo[t]=r;r=Object(h["f"])(r);for(let i=0;i<co.length;i++){const n=co[i]+r;if(n in e)return uo[t]=n}return t}const po="http://www.w3.org/1999/xlink";function fo(e,t,n,r,i){if(r&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(po,t.slice(6,t.length)):e.setAttributeNS(po,t,n);else{const r=Object(h["C"])(t);null==n||r&&!Object(h["m"])(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}function ho(e,t,n,r,i,o,a){if("innerHTML"===t||"textContent"===t)return r&&a(r,i,o),void(e[t]=null==n?"":n);if("value"===t&&"PROGRESS"!==e.tagName&&!e.tagName.includes("-")){e._value=n;const r=null==n?"":n;return e.value===r&&"OPTION"!==e.tagName||(e.value=r),void(null==n&&e.removeAttribute(t))}if(""===n||null==n){const r=typeof e[t];if("boolean"===r)return void(e[t]=Object(h["m"])(n));if(null==n&&"string"===r)return e[t]="",void e.removeAttribute(t);if("number"===r){try{e[t]=0}catch(s){}return void e.removeAttribute(t)}}try{e[t]=n}catch(c){0}}let go=Date.now,vo=!1;if("undefined"!==typeof window){go()>document.createEvent("Event").timeStamp&&(go=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);vo=!!(e&&Number(e[1])<=53)}let mo=0;const _o=Promise.resolve(),yo=()=>{mo=0},bo=()=>mo||(_o.then(yo),mo=go());function Io(e,t,n,r){e.addEventListener(t,n,r)}function To(e,t,n,r){e.removeEventListener(t,n,r)}function Co(e,t,n,r,i=null){const o=e._vei||(e._vei={}),a=o[t];if(r&&a)a.value=r;else{const[n,s]=Eo(t);if(r){const a=o[t]=Mo(r,i);Io(e,n,a,s)}else a&&(To(e,n,a,s),o[t]=void 0)}}const So=/(?:Once|Passive|Capture)$/;function Eo(e){let t;if(So.test(e)){let n;t={};while(n=e.match(So))e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[Object(h["l"])(e.slice(2)),t]}function Mo(e,t){const n=e=>{const r=e.timeStamp||go();(vo||r>=n.attached-1)&&mi(ko(e,n.value),t,5,[e])};return n.value=e,n.attached=bo(),n}function ko(e,t){if(Object(h["o"])(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(e=>t=>!t._stopped&&e(t))}return t}const wo=/^on[a-z]/,Oo=(e,t,n,r,i=!1,o,a,s,c)=>{"class"===t?io(e,r,i):"style"===t?oo(e,n,r):Object(h["w"])(t)?Object(h["u"])(t)||Co(e,t,n,r,a):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):Do(e,t,r,i))?ho(e,t,r,o,a,s,c):("true-value"===t?e._trueValue=r:"false-value"===t&&(e._falseValue=r),fo(e,t,r,i))};function Do(e,t,n,r){return r?"innerHTML"===t||"textContent"===t||!!(t in e&&wo.test(t)&&Object(h["p"])(n)):"spellcheck"!==t&&"draggable"!==t&&("form"!==t&&(("list"!==t||"INPUT"!==e.tagName)&&(("type"!==t||"TEXTAREA"!==e.tagName)&&((!wo.test(t)||!Object(h["D"])(n))&&t in e))))}"undefined"!==typeof HTMLElement&&HTMLElement;const Ao="transition",Ro="animation",xo=(e,{slots:t})=>Zi(Dt,jo(e),t);xo.displayName="Transition";const Lo={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},No=(xo.props=Object(h["h"])({},Dt.props,Lo),(e,t=[])=>{Object(h["o"])(e)?e.forEach(e=>e(...t)):e&&e(...t)}),Po=e=>!!e&&(Object(h["o"])(e)?e.some(e=>e.length>1):e.length>1);function jo(e){const t={};for(const h in e)h in Lo||(t[h]=e[h]);if(!1===e.css)return t;const{name:n="v",type:r,duration:i,enterFromClass:o=n+"-enter-from",enterActiveClass:a=n+"-enter-active",enterToClass:s=n+"-enter-to",appearFromClass:c=o,appearActiveClass:u=a,appearToClass:l=s,leaveFromClass:d=n+"-leave-from",leaveActiveClass:p=n+"-leave-active",leaveToClass:f=n+"-leave-to"}=e,g=Uo(i),v=g&&g[0],m=g&&g[1],{onBeforeEnter:_,onEnter:y,onEnterCancelled:b,onLeave:I,onLeaveCancelled:T,onBeforeAppear:C=_,onAppear:S=y,onAppearCancelled:E=b}=t,M=(e,t,n)=>{Fo(e,t?l:s),Fo(e,t?u:a),n&&n()},k=(e,t)=>{Fo(e,f),Fo(e,p),t&&t()},w=e=>(t,n)=>{const i=e?S:y,a=()=>M(t,e,n);No(i,[t,a]),Bo(()=>{Fo(t,e?c:o),Vo(t,e?l:s),Po(i)||Ho(t,r,v,a)})};return Object(h["h"])(t,{onBeforeEnter(e){No(_,[e]),Vo(e,o),Vo(e,a)},onBeforeAppear(e){No(C,[e]),Vo(e,c),Vo(e,u)},onEnter:w(!1),onAppear:w(!0),onLeave(e,t){const n=()=>k(e,t);Vo(e,d),Yo(),Vo(e,p),Bo(()=>{Fo(e,d),Vo(e,f),Po(I)||Ho(e,r,m,n)}),No(I,[e,n])},onEnterCancelled(e){M(e,!1),No(b,[e])},onAppearCancelled(e){M(e,!0),No(E,[e])},onLeaveCancelled(e){k(e),No(T,[e])}})}function Uo(e){if(null==e)return null;if(Object(h["v"])(e))return[Go(e.enter),Go(e.leave)];{const t=Go(e);return[t,t]}}function Go(e){const t=Object(h["N"])(e);return t}function Vo(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.add(t)),(e._vtc||(e._vtc=new Set)).add(t)}function Fo(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.remove(t));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function Bo(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let qo=0;function Ho(e,t,n,r){const i=e._endId=++qo,o=()=>{i===e._endId&&r()};if(n)return setTimeout(o,n);const{type:a,timeout:s,propCount:c}=zo(e,t);if(!a)return r();const u=a+"end";let l=0;const d=()=>{e.removeEventListener(u,p),o()},p=t=>{t.target===e&&++l>=c&&d()};setTimeout(()=>{l<c&&d()},s+1),e.addEventListener(u,p)}function zo(e,t){const n=window.getComputedStyle(e),r=e=>(n[e]||"").split(", "),i=r(Ao+"Delay"),o=r(Ao+"Duration"),a=Ko(i,o),s=r(Ro+"Delay"),c=r(Ro+"Duration"),u=Ko(s,c);let l=null,d=0,p=0;t===Ao?a>0&&(l=Ao,d=a,p=o.length):t===Ro?u>0&&(l=Ro,d=u,p=c.length):(d=Math.max(a,u),l=d>0?a>u?Ao:Ro:null,p=l?l===Ao?o.length:c.length:0);const f=l===Ao&&/\b(transform|all)(,|$)/.test(n[Ao+"Property"]);return{type:l,timeout:d,propCount:p,hasTransform:f}}function Ko(e,t){while(e.length<t.length)e=e.concat(e);return Math.max(...t.map((t,n)=>Wo(t)+Wo(e[n])))}function Wo(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Yo(){return document.body.offsetHeight}new WeakMap,new WeakMap;const Jo=e=>{const t=e.props["onUpdate:modelValue"];return Object(h["o"])(t)?e=>Object(h["n"])(t,e):t};const $o={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const i=Object(h["B"])(t);Io(e,"change",()=>{const t=Array.prototype.filter.call(e.options,e=>e.selected).map(e=>n?Object(h["N"])(Zo(e)):Zo(e));e._assign(e.multiple?i?new Set(t):t:t[0])}),e._assign=Jo(r)},mounted(e,{value:t}){Xo(e,t)},beforeUpdate(e,t,n){e._assign=Jo(n)},updated(e,{value:t}){Xo(e,t)}};function Xo(e,t){const n=e.multiple;if(!n||Object(h["o"])(t)||Object(h["B"])(t)){for(let r=0,i=e.options.length;r<i;r++){const i=e.options[r],o=Zo(i);if(n)Object(h["o"])(t)?i.selected=Object(h["G"])(t,o)>-1:i.selected=t.has(o);else if(Object(h["F"])(Zo(i),t))return void(e.selectedIndex!==r&&(e.selectedIndex=r))}n||-1===e.selectedIndex||(e.selectedIndex=-1)}}function Zo(e){return"_value"in e?e._value:e.value}const Qo=["ctrl","shift","alt","meta"],ea={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>Qo.some(n=>e[n+"Key"]&&!t.includes(n))},ta=(e,t)=>(n,...r)=>{for(let e=0;e<t.length;e++){const r=ea[t[e]];if(r&&r(n,t))return}return e(n,...r)},na={beforeMount(e,{value:t},{transition:n}){e._vod="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):ra(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!==!n&&(r?t?(r.beforeEnter(e),ra(e,!0),r.enter(e)):r.leave(e,()=>{ra(e,!1)}):ra(e,t))},beforeUnmount(e,{value:t}){ra(e,t)}};function ra(e,t){e.style.display=t?e._vod:"none"}const ia=Object(h["h"])({patchProp:Oo},ro);let oa;function aa(){return oa||(oa=Kn(ia))}const sa=(...e)=>{const t=aa().createApp(...e);const{mount:n}=t;return t.mount=e=>{const r=ca(e);if(!r)return;const i=t._component;Object(h["p"])(i)||i.render||i.template||(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};function ca(e){if(Object(h["D"])(e)){const t=document.querySelector(e);return t}return e}},"7a77":function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},"7a82":function(e,t,n){var r=n("23e7"),i=n("83ab"),o=n("9bf2");r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperty:o.f})},"7a823":function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("8405");function c(e,t){var{days:n}=t,{hours:r,minutes:i,seconds:o,milliseconds:a}=t;if(e.includes("DD")?e=e.replace("DD",Object(s["h"])(n)):r+=24*n,e.includes("HH")?e=e.replace("HH",Object(s["h"])(r)):i+=60*r,e.includes("mm")?e=e.replace("mm",Object(s["h"])(i)):o+=60*i,e.includes("ss")?e=e.replace("ss",Object(s["h"])(o)):a+=1e3*o,e.includes("S")){var c=Object(s["h"])(a,3);e=e.includes("SSS")?e.replace("SSS",c):e.includes("SS")?e.replace("SS",c.slice(0,2)):e.replace("S",c.charAt(0))}return e}var u=n("7f9b"),l=n("4eda"),[d,p]=Object(o["a"])("count-down"),f={time:Object(a["c"])(0),format:Object(a["e"])("HH:mm:ss"),autoStart:a["g"],millisecond:Boolean},h=Object(i["n"])({name:d,props:f,emits:["change","finish"],setup(e,t){var{emit:n,slots:r}=t,{start:o,pause:a,reset:s,current:d}=Object(u["h"])({time:+e.time,millisecond:e.millisecond,onChange:e=>n("change",e),onFinish:()=>n("finish")}),f=Object(i["e"])(()=>c(e.format,d.value)),h=()=>{s(+e.time),e.autoStart&&o()};return Object(i["X"])(()=>e.time,h,{immediate:!0}),Object(l["a"])({start:o,pause:a,reset:h}),()=>Object(i["m"])("div",{role:"timer",class:p()},[r.default?r.default(d.value):f.value])}}),g=Object(r["a"])(h);t["a"]=g},"7aac":function(e,t,n){"use strict";var r=n("c532");e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},"7b0a":function(e,t,n){},"7b0b":function(e,t,n){var r=n("da84"),i=n("1d80"),o=r.Object;e.exports=function(e){return o(i(e))}},"7bd9":function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("b1d2"),c=n("8405"),u=n("4a89"),l=n("7f9b"),d=n("cdd8"),p=n("543e"),[f,h]=Object(o["a"])("key"),g=Object(i["m"])("svg",{class:h("collapse-icon"),viewBox:"0 0 30 24"},[Object(i["m"])("path",{d:"M26 13h-2v2h2v-2zm-8-3h2V8h-2v2zm2-4h2V4h-2v2zm2 4h4V4h-2v4h-2v2zm-7 14 3-3h-6l3 3zM6 13H4v2h2v-2zm16 0H8v2h14v-2zm-12-3h2V8h-2v2zM28 0l1 1 1 1v15l-1 2H1l-1-2V2l1-1 1-1zm0 2H2v15h26V2zM6 4v2H4V4zm10 2h2V4h-2v2zM8 9v1H4V8zm8 0v1h-2V8zm-6-5v2H8V4zm4 0v2h-2V4z",fill:"currentColor"},null)]),v=Object(i["m"])("svg",{class:h("delete-icon"),viewBox:"0 0 32 22"},[Object(i["m"])("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"},null)]),m=Object(i["n"])({name:f,props:{type:String,text:a["f"],color:String,wider:Boolean,large:Boolean,loading:Boolean},emits:["press"],setup(e,t){var{emit:n,slots:r}=t,o=Object(i["K"])(!1),a=Object(d["a"])(),s=e=>{a.start(e),o.value=!0},c=e=>{a.move(e),a.direction.value&&(o.value=!1)},l=t=>{o.value&&(r.default||Object(u["e"])(t),o.value=!1,n("press",e.text,e.type))},f=()=>{if(e.loading)return Object(i["m"])(p["a"],{class:h("loading-icon")},null);var t=r.default?r.default():e.text;switch(e.type){case"delete":return t||v;case"extra":return t||g;default:return t}};return()=>Object(i["m"])("div",{class:h("wrapper",{wider:e.wider}),onTouchstart:s,onTouchmove:c,onTouchend:l,onTouchcancel:l},[Object(i["m"])("div",{role:"button",tabindex:0,class:h([e.color,{large:e.large,active:o.value,delete:"delete"===e.type}])},[f()])])}}),[_,y]=Object(o["a"])("number-keyboard"),b={show:Boolean,title:String,theme:Object(a["e"])("default"),zIndex:a["f"],teleport:[String,Object],maxlength:Object(a["c"])(1/0),modelValue:Object(a["e"])(""),transition:a["g"],blurOnClose:a["g"],showDeleteKey:a["g"],randomKeyOrder:Boolean,closeButtonText:String,deleteButtonText:String,closeButtonLoading:Boolean,hideOnClickOutside:a["g"],safeAreaInsetBottom:a["g"],extraKey:{type:[String,Array],default:""}},I=Object(i["n"])({name:_,props:b,emits:["show","hide","blur","input","close","delete","update:modelValue"],setup(e,t){var{emit:n,slots:r}=t,o=Object(i["K"])(),a=()=>{var t=Array(9).fill("").map((e,t)=>({text:t+1}));return e.randomKeyOrder&&t.sort(()=>Math.random()>.5?1:-1),t},d=()=>[...a(),{text:e.extraKey,type:"extra"},{text:0},{text:e.showDeleteKey?e.deleteButtonText:"",type:e.showDeleteKey?"delete":""}],p=()=>{var t=a(),{extraKey:n}=e,r=Array.isArray(n)?n:[n];return 1===r.length?t.push({text:0,wider:!0},{text:r[0],type:"extra"}):2===r.length&&t.push({text:r[0],type:"extra"},{text:0},{text:r[1],type:"extra"}),t},f=Object(i["e"])(()=>"custom"===e.theme?p():d()),h=()=>{e.show&&n("blur")},g=()=>{n("close"),e.blurOnClose&&h()},v=()=>n(e.show?"show":"hide"),_=(t,r)=>{if(""!==t){var i=e.modelValue;"delete"===r?(n("delete"),n("update:modelValue",i.slice(0,i.length-1))):"close"===r?g():i.length<e.maxlength&&(n("input",t),n("update:modelValue",i+t))}else"extra"===r&&h()},b=()=>{var{title:t,theme:n,closeButtonText:o}=e,a=r["title-left"],c=o&&"default"===n,u=t||c||a;if(u)return Object(i["m"])("div",{class:y("header")},[a&&Object(i["m"])("span",{class:y("title-left")},[a()]),t&&Object(i["m"])("h2",{class:y("title")},[t]),c&&Object(i["m"])("button",{type:"button",class:[y("close"),s["i"]],onClick:g},[o])])},I=()=>f.value.map(e=>{var t={};return"delete"===e.type&&(t.default=r.delete),"extra"===e.type&&(t.default=r["extra-key"]),Object(i["m"])(m,{key:e.text,text:e.text,type:e.type,wider:e.wider,color:e.color,onPress:_},t)}),T=()=>{if("custom"===e.theme)return Object(i["m"])("div",{class:y("sidebar")},[e.showDeleteKey&&Object(i["m"])(m,{large:!0,text:e.deleteButtonText,type:"delete",onPress:_},{delete:r.delete}),Object(i["m"])(m,{large:!0,text:e.closeButtonText,type:"close",color:"blue",loading:e.closeButtonLoading,onPress:_},null)])};return Object(i["X"])(()=>e.show,t=>{e.transition||n(t?"show":"hide")}),e.hideOnClickOutside&&Object(l["g"])(o,h,{eventName:"touchstart"}),()=>{var t=b(),n=Object(i["m"])(i["d"],{name:e.transition?"van-slide-up":""},{default:()=>[Object(i["ab"])(Object(i["m"])("div",{ref:o,style:Object(c["f"])(e.zIndex),class:y({unfit:!e.safeAreaInsetBottom,"with-title":!!t}),onTouchstart:u["i"],onAnimationend:v,onWebkitAnimationEnd:v},[t,Object(i["m"])("div",{class:y("body")},[Object(i["m"])("div",{class:y("keys")},[I()]),T()])]),[[i["W"],e.show]])]});return e.teleport?Object(i["m"])(i["c"],{to:e.teleport},{default:()=>[n]}):n}}}),T=Object(r["a"])(I);t["a"]=T},"7c73":function(e,t,n){var r,i=n("825a"),o=n("37e8"),a=n("7839"),s=n("d012"),c=n("1be4"),u=n("cc12"),l=n("f772"),d=">",p="<",f="prototype",h="script",g=l("IE_PROTO"),v=function(){},m=function(e){return p+h+d+e+p+"/"+h+d},_=function(e){e.write(m("")),e.close();var t=e.parentWindow.Object;return e=null,t},y=function(){var e,t=u("iframe"),n="java"+h+":";return t.style.display="none",c.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(m("document.F=Object")),e.close(),e.F},b=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}b="undefined"!=typeof document?document.domain&&r?_(r):y():_(r);var e=a.length;while(e--)delete b[f][a[e]];return b()};s[g]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(v[f]=i(e),n=new v,v[f]=null,n[g]=e):n=b(),void 0===t?n:o(n,t)}},"7c7f":function(e,t,n){},"7dd0":function(e,t,n){"use strict";var r=n("23e7"),i=n("c65b"),o=n("c430"),a=n("5e77"),s=n("1626"),c=n("9ed3"),u=n("e163"),l=n("d2bb"),d=n("d44e"),p=n("9112"),f=n("6eeb"),h=n("b622"),g=n("3f8c"),v=n("ae93"),m=a.PROPER,_=a.CONFIGURABLE,y=v.IteratorPrototype,b=v.BUGGY_SAFARI_ITERATORS,I=h("iterator"),T="keys",C="values",S="entries",E=function(){return this};e.exports=function(e,t,n,a,h,v,M){c(n,t,a);var k,w,O,D=function(e){if(e===h&&N)return N;if(!b&&e in x)return x[e];switch(e){case T:return function(){return new n(this,e)};case C:return function(){return new n(this,e)};case S:return function(){return new n(this,e)}}return function(){return new n(this)}},A=t+" Iterator",R=!1,x=e.prototype,L=x[I]||x["@@iterator"]||h&&x[h],N=!b&&L||D(h),P="Array"==t&&x.entries||L;if(P&&(k=u(P.call(new e)),k!==Object.prototype&&k.next&&(o||u(k)===y||(l?l(k,y):s(k[I])||f(k,I,E)),d(k,A,!0,!0),o&&(g[A]=E))),m&&h==C&&L&&L.name!==C&&(!o&&_?p(x,"name",C):(R=!0,N=function(){return i(L,this)})),h)if(w={values:D(C),keys:v?N:D(T),entries:D(S)},M)for(O in w)(b||R||!(O in x))&&f(x,O,w[O]);else r({target:t,proto:!0,forced:b||R},w);return o&&!M||x[I]===N||f(x,I,N,{name:h}),g[t]=N,w}},"7e3e":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("f344"),i=n("8da3");function o(e,t){var{args:n=[],done:o,canceled:a}=t;if(e){var s=e.apply(null,n);Object(i["g"])(s)?s.then(e=>{e?o():a&&a()}).catch(r["d"]):s?o():a&&a()}else o()}},"7ed3":function(e,t,n){var r=n("23e7"),i=n("c65b"),o=n("825a"),a=n("861d"),s=n("c60d"),c=n("d039"),u=n("9bf2"),l=n("06cf"),d=n("e163"),p=n("5c6c");function f(e,t,n){var r,c,h,g=arguments.length<4?e:arguments[3],v=l.f(o(e),t);if(!v){if(a(c=d(e)))return f(c,t,n,g);v=p(0)}if(s(v)){if(!1===v.writable||!a(g))return!1;if(r=l.f(g,t)){if(r.get||r.set||!1===r.writable)return!1;r.value=n,u.f(g,t,r)}else u.f(g,t,p(0,n))}else{if(h=v.set,void 0===h)return!1;i(h,g,n)}return!0}var h=c((function(){var e=function(){},t=u.f(new e,"a",{configurable:!0});return!1!==Reflect.set(e.prototype,"a",1,t)}));r({target:"Reflect",stat:!0,forced:h},{set:f})},"7f78":function(e,t,n){var r=n("23e7"),i=n("825a"),o=n("e163"),a=n("e177");r({target:"Reflect",stat:!0,sham:!a},{getPrototypeOf:function(e){return o(i(e))}})},"7f9a":function(e,t,n){var r=n("da84"),i=n("1626"),o=n("8925"),a=r.WeakMap;e.exports=i(a)&&/native code/.test(o(a))},"7f9b":function(e,t,n){"use strict";n.d(t,"a",(function(){return P})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return R})),n.d(t,"d",(function(){return C})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return E})),n.d(t,"h",(function(){return T})),n.d(t,"i",(function(){return j})),n.d(t,"j",(function(){return S})),n.d(t,"k",(function(){return N})),n.d(t,"l",(function(){return p})),n.d(t,"m",(function(){return l})),n.d(t,"n",(function(){return x})),n.d(t,"o",(function(){return d})),n.d(t,"p",(function(){return w}));var r=n("7a23");const i="undefined"!==typeof window;function o(e){return i?requestAnimationFrame(e):-1}function a(e){i&&cancelAnimationFrame(e)}function s(e){o(()=>o(e))}const c=e=>e===window,u=(e,t)=>({top:0,left:0,right:e,bottom:t,width:e,height:t}),l=e=>{const t=Object(r["U"])(e);if(c(t)){const e=t.innerWidth,n=t.innerHeight;return u(e,n)}return(null==t?void 0:t.getBoundingClientRect)?t.getBoundingClientRect():u(0,0)};function d(e=!1){const t=Object(r["K"])(e),n=(e=!t.value)=>{t.value=e};return[t,n]}function p(e){const t=Object(r["q"])(e,null);if(t){const e=Object(r["o"])(),{link:n,unlink:i,internalChildren:o}=t;n(e),Object(r["D"])(()=>i(e));const a=Object(r["e"])(()=>o.indexOf(e));return{parent:t,index:a}}return{parent:null,index:Object(r["K"])(-1)}}function f(e){const t=[],n=e=>{Array.isArray(e)&&e.forEach(e=>{var i;Object(r["s"])(e)&&(t.push(e),(null==(i=e.component)?void 0:i.subTree)&&n(e.component.subTree.children),e.children&&n(e.children))})};return n(e),t}function h(e,t,n){const r=f(e.subTree.children);n.sort((e,t)=>r.indexOf(e.vnode)-r.indexOf(t.vnode));const i=n.map(e=>e.proxy);t.sort((e,t)=>{const n=i.indexOf(e),r=i.indexOf(t);return n-r})}function g(e){const t=Object(r["J"])([]),n=Object(r["J"])([]),i=Object(r["o"])(),o=o=>{const a=e=>{e.proxy&&(n.push(e),t.push(e.proxy),h(i,t,n))},s=e=>{const r=n.indexOf(e);t.splice(r,1),n.splice(r,1)};Object(r["H"])(e,Object.assign({link:a,unlink:s,children:t,internalChildren:n},o))};return{children:t,linkChildren:o}}const v=1e3,m=60*v,_=60*m,y=24*_;function b(e){const t=Math.floor(e/y),n=Math.floor(e%y/_),r=Math.floor(e%_/m),i=Math.floor(e%m/v),o=Math.floor(e%v);return{total:e,days:t,hours:n,minutes:r,seconds:i,milliseconds:o}}function I(e,t){return Math.floor(e/1e3)===Math.floor(t/1e3)}function T(e){let t,n,s,c;const u=Object(r["K"])(e.time),l=Object(r["e"])(()=>b(u.value)),d=()=>{s=!1,a(t)},p=()=>Math.max(n-Date.now(),0),f=t=>{var n,r;u.value=t,null==(n=e.onChange)||n.call(e,l.value),0===t&&(d(),null==(r=e.onFinish)||r.call(e))},h=()=>{t=o(()=>{s&&(f(p()),u.value>0&&h())})},g=()=>{t=o(()=>{if(s){const e=p();I(e,u.value)&&0!==e||f(e),u.value>0&&g()}})},v=()=>{i&&(e.millisecond?h():g())},m=()=>{s||(n=Date.now()+u.value,s=!0,v())},_=(t=e.time)=>{d(),u.value=t};return Object(r["z"])(d),Object(r["x"])(()=>{c&&(s=!0,c=!1,v())}),Object(r["B"])(()=>{s&&(d(),c=!0)}),{start:m,pause:d,reset:_,current:l}}function C(e){let t;Object(r["C"])(()=>{e(),Object(r["u"])(()=>{t=!0})}),Object(r["x"])(()=>{t&&e()})}function S(e,t,n={}){if(!i)return;const{target:o=window,passive:a=!1,capture:s=!1}=n;let c;const u=n=>{const i=Object(r["U"])(n);i&&!c&&(i.addEventListener(e,t,{capture:s,passive:a}),c=!0)},l=n=>{const i=Object(r["U"])(n);i&&c&&(i.removeEventListener(e,t,s),c=!1)};Object(r["D"])(()=>l(o)),Object(r["B"])(()=>l(o)),C(()=>u(o)),Object(r["r"])(o)&&Object(r["X"])(o,(e,t)=>{l(t),u(e)})}function E(e,t,n={}){if(!i)return;const{eventName:o="click"}=n,a=n=>{const i=Object(r["U"])(e);i&&!i.contains(n.target)&&t(n)};S(o,a,{target:document})}let M,k;function w(){if(!M&&(M=Object(r["K"])(0),k=Object(r["K"])(0),i)){const e=()=>{M.value=window.innerWidth,k.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:M,height:k}}const O=/scroll|auto/i,D=i?window:void 0;function A(e){const t=1;return"HTML"!==e.tagName&&"BODY"!==e.tagName&&e.nodeType===t}function R(e,t=D){let n=e;while(n&&n!==t&&A(n)){const{overflowY:e}=window.getComputedStyle(n);if(O.test(e))return n;n=n.parentNode}return t}function x(e,t=D){const n=Object(r["K"])();return Object(r["C"])(()=>{e.value&&(n.value=R(e.value,t))}),n}let L;function N(){if(!L&&(L=Object(r["K"])("visible"),i)){const e=()=>{L.value=document.hidden?"hidden":"visible"};e(),window.addEventListener("visibilitychange",e)}return L}const P=Symbol("van-field");function j(e){const t=Object(r["q"])(P,null);t&&!t.customValue.value&&(t.customValue.value=e,Object(r["X"])(e,()=>{t.resetValidation(),t.validateWithTrigger("onChange")}))}},"80f6":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n("7a23"),i=Symbol(),o=()=>Object(r["q"])(i,null)},8199:function(e,t,n){},"819b":function(e,t,n){},"81c0":function(e,t,n){},"81e6":function(e,t,n){"use strict";n("68ef"),n("bf60"),n("7b0a")},8217:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("7a23");function i(){var e=Object(r["K"])([]);Object(r["A"])(()=>{e.value=[]});var t=t=>n=>{e.value[t]=n};return[e,t]}},"825a":function(e,t,n){var r=n("da84"),i=n("861d"),o=r.String,a=r.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not an object")}},8270:function(e,t,n){},"83ab":function(e,t,n){var r=n("d039");e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"83b9":function(e,t,n){"use strict";var r=n("d925"),i=n("e683");e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},8405:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"i",(function(){return h})),n.d(t,"b",(function(){return v})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return _})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return I}));var r,i=n("f344"),o=n("4a89"),a=n("8da3");function s(e){if(Object(a["b"])(e))return Object(a["e"])(e)?e+"px":String(e)}function c(e){if(Object(a["b"])(e)){var t=s(e);return{width:t,height:t}}}function u(e){var t={};return void 0!==e&&(t.zIndex=+e),t}function l(){if(!r){var e=document.documentElement,t=e.style.fontSize||window.getComputedStyle(e).fontSize;r=parseFloat(t)}return r}function d(e){return e=e.replace(/rem/g,""),+e*l()}function p(e){return e=e.replace(/vw/g,""),+e*o["k"].value/100}function f(e){return e=e.replace(/vh/g,""),+e*o["j"].value/100}function h(e){if("number"===typeof e)return e;if(i["c"]){if(e.includes("rem"))return d(e);if(e.includes("vw"))return p(e);if(e.includes("vh"))return f(e)}return parseFloat(e)}var g=/-(\w)/g,v=e=>e.replace(g,(e,t)=>t.toUpperCase()),m=e=>e.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"");function _(e,t){void 0===t&&(t=2);var n=e+"";while(n.length<t)n="0"+n;return n}var y=(e,t,n)=>Math.min(Math.max(e,t),n);function b(e,t,n){var r=e.indexOf(t);return-1===r?e:"-"===t&&0!==r?e.slice(0,r):e.slice(0,r+1)+e.slice(r).replace(n,"")}function I(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!0),e=t?b(e,".",/\./g):e.split(".")[0],e=n?b(e,"-",/-/g):e.replace(/-/,"");var r=t?/[^-0-9.]/g:/[^-0-9]/g;return e.replace(r,"")}},8418:function(e,t,n){"use strict";var r=n("a04b"),i=n("9bf2"),o=n("5c6c");e.exports=function(e,t,n){var a=r(t);a in e?i.f(e,a,o(0,n)):e[a]=n}},"848b":function(e,t,n){"use strict";var r=n("5cce").version,i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={};function a(e,t,n){if("object"!==typeof e)throw new TypeError("options must be an object");var r=Object.keys(e),i=r.length;while(i-- >0){var o=r[i],a=t[o];if(a){var s=e[o],c=void 0===s||a(s,o,e);if(!0!==c)throw new TypeError("option "+o+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+o)}}i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,a){if(!1===e)throw new Error(i(r," has been removed"+(t?" in "+t:"")));return t&&!o[r]&&(o[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,a)}},e.exports={assertOptions:a,validators:i}},"861d":function(e,t,n){var r=n("1626");e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},8925:function(e,t,n){var r=n("e330"),i=n("1626"),o=n("c6cd"),a=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return a(e)}),e.exports=o.inspectSource},"8a0b":function(e,t,n){},"8a58":function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("a71a"),n("4d75")},"8aa5":function(e,t,n){"use strict";var r=n("6547").charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},"8da3":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"f",(function(){return a})),n.d(t,"g",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return l}));var r=n("f344"),i=e=>void 0!==e&&null!==e,o=e=>"function"===typeof e,a=e=>null!==e&&"object"===typeof e,s=e=>a(e)&&o(e.then)&&o(e.catch),c=e=>"[object Date]"===Object.prototype.toString.call(e)&&!Number.isNaN(e.getTime());var u=e=>"number"===typeof e||/^\d+(\.\d+)?$/.test(e),l=()=>!!r["c"]&&/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase())},"8df4":function(e,t,n){"use strict";var r=n("7a77");function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e,t=new i((function(t){e=t}));return{token:t,cancel:e}},e.exports=i},"8f80":function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("f691"),a=n("8da3"),s=n("f344"),c=n("8405"),u=n("fe7e"),[l,d,p]=Object(u["a"])("uploader"),f=e=>Array.isArray(e)?e:[e];function h(e,t){return new Promise(n=>{if("file"!==t){var r=new FileReader;r.onload=e=>{n(e.target.result)},"dataUrl"===t?r.readAsDataURL(e):"text"===t&&r.readAsText(e)}else n()})}function g(e,t){return f(e).some(e=>!!e.file&&(Object(a["c"])(t)?t(e.file):e.file.size>t))}function v(e,t){var n=[],r=[];return e.forEach(e=>{g(e,t)?r.push(e):n.push(e)}),{valid:n,invalid:r}}var m=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i,_=e=>m.test(e);function y(e){return!!e.isImage||(e.file&&e.file.type?0===e.file.type.indexOf("image"):e.url?_(e.url):"string"===typeof e.content&&0===e.content.indexOf("data:image"))}var b,I=n("7f9b"),T=n("4eda"),C=n("ad06"),S=n("1da4"),E=n("7e3e"),M=n("b1d2"),k=n("4a89"),w=n("5596"),O=n("e41f"),D=n("cdd8"),A=n("44bf"),R=n("543e"),x=n("2bb1"),L=e=>Math.sqrt(Math.pow(e[0].clientX-e[1].clientX,2)+Math.pow(e[0].clientY-e[1].clientY,2)),N=Object(u["a"])("image-preview")[1],P=Object(i["n"])({props:{src:String,show:Boolean,active:Number,minZoom:Object(o["d"])(o["f"]),maxZoom:Object(o["d"])(o["f"]),rootWidth:Object(o["d"])(Number),rootHeight:Object(o["d"])(Number)},emits:["scale","close"],setup(e,t){var n,r,o,a,s,u,{emit:l}=t,d=Object(i["J"])({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,imageRatio:0,displayWidth:0,displayHeight:0}),p=Object(D["a"])(),f=Object(i["e"])(()=>{var{rootWidth:t,rootHeight:n}=e,r=n/t;return d.imageRatio>r}),h=Object(i["e"])(()=>{var{scale:e,moveX:t,moveY:n,moving:r,zooming:i}=d,o={transitionDuration:i||r?"0s":".3s"};if(1!==e){var a=t/e,s=n/e;o.transform="scale("+e+", "+e+") translate("+a+"px, "+s+"px)"}return o}),g=Object(i["e"])(()=>{if(d.imageRatio){var{rootWidth:t,rootHeight:n}=e,r=f.value?n/d.imageRatio:t;return Math.max(0,(d.scale*r-t)/2)}return 0}),v=Object(i["e"])(()=>{if(d.imageRatio){var{rootWidth:t,rootHeight:n}=e,r=f.value?n:t*d.imageRatio;return Math.max(0,(d.scale*r-n)/2)}return 0}),m=t=>{t=Object(c["c"])(t,+e.minZoom,+e.maxZoom),t!==d.scale&&(d.scale=t,l("scale",{scale:t,index:e.active}))},_=()=>{m(1),d.moveX=0,d.moveY=0},y=()=>{var e=d.scale>1?1:2;m(e),d.moveX=0,d.moveY=0},b=e=>{var{touches:t}=e,{offsetX:i}=p;p.start(e),n=d.moveX,r=d.moveY,u=Date.now(),d.moving=1===t.length&&1!==d.scale,d.zooming=2===t.length&&!i.value,d.zooming&&(o=d.scale,a=L(e.touches))},I=e=>{var{touches:t}=e;if(p.move(e),(d.moving||d.zooming)&&Object(k["e"])(e,!0),d.moving){var{deltaX:i,deltaY:s}=p,u=i.value+n,l=s.value+r;d.moveX=Object(c["c"])(u,-g.value,g.value),d.moveY=Object(c["c"])(l,-v.value,v.value)}if(d.zooming&&2===t.length){var f=L(t),h=o*f/a;m(h)}},T=()=>{var{offsetX:e,offsetY:t}=p,n=Date.now()-u,r=250,i=10;e.value<i&&t.value<i&&n<r&&(s?(clearTimeout(s),s=null,y()):s=setTimeout(()=>{l("close"),s=null},r))},C=e=>{var t=!1;(d.moving||d.zooming)&&(t=!0,d.moving&&n===d.moveX&&r===d.moveY&&(t=!1),e.touches.length||(d.zooming&&(d.moveX=Object(c["c"])(d.moveX,-g.value,g.value),d.moveY=Object(c["c"])(d.moveY,-v.value,v.value),d.zooming=!1),d.moving=!1,n=0,r=0,o=1,d.scale<1&&_())),Object(k["e"])(e,t),T(),p.reset()},S=e=>{var{naturalWidth:t,naturalHeight:n}=e.target;d.imageRatio=n/t};return Object(i["X"])(()=>e.active,_),Object(i["X"])(()=>e.show,e=>{e||_()}),()=>{var t={loading:()=>Object(i["m"])(R["a"],{type:"spinner"},null)};return Object(i["m"])(x["a"],{class:N("swipe-item"),onTouchstart:b,onTouchmove:I,onTouchend:C,onTouchcancel:C},{default:()=>[Object(i["m"])(A["a"],{src:e.src,fit:"contain",class:N("image",{vertical:f.value}),style:h.value,onLoad:S},t)]})}}}),[j,U]=Object(u["a"])("image-preview"),G=["show","transition","overlayStyle","closeOnPopstate"],V={show:Boolean,loop:o["g"],images:Object(o["a"])(),minZoom:Object(o["c"])(1/3),maxZoom:Object(o["c"])(3),overlay:o["g"],closeable:Boolean,showIndex:o["g"],className:o["h"],closeIcon:Object(o["e"])("clear"),transition:String,beforeClose:Function,overlayStyle:Object,swipeDuration:Object(o["c"])(300),startPosition:Object(o["c"])(0),showIndicators:Boolean,closeOnPopstate:o["g"],closeIconPosition:Object(o["e"])("top-right")},F=Object(i["n"])({name:j,props:V,emits:["scale","close","closed","change","update:show"],setup(e,t){var{emit:n,slots:r}=t,o=Object(i["K"])(),a=Object(i["J"])({active:0,rootWidth:0,rootHeight:0}),c=()=>{if(o.value){var e=Object(I["m"])(o.value.$el);a.rootWidth=e.width,a.rootHeight=e.height,o.value.resize()}},u=e=>n("scale",e),l=e=>n("update:show",e),d=()=>{Object(E["a"])(e.beforeClose,{args:[a.active],done:()=>l(!1)})},p=e=>{e!==a.active&&(a.active=e,n("change",e))},f=()=>{if(e.showIndex)return Object(i["m"])("div",{class:U("index")},[r.index?r.index({index:a.active}):a.active+1+" / "+e.images.length])},h=()=>{if(r.cover)return Object(i["m"])("div",{class:U("cover")},[r.cover()])},g=()=>Object(i["m"])(w["a"],{ref:o,lazyRender:!0,loop:e.loop,class:U("swipe"),duration:e.swipeDuration,initialSwipe:e.startPosition,showIndicators:e.showIndicators,indicatorColor:"white",onChange:p},{default:()=>[e.images.map(t=>Object(i["m"])(P,{src:t,show:e.show,active:a.active,maxZoom:e.maxZoom,minZoom:e.minZoom,rootWidth:a.rootWidth,rootHeight:a.rootHeight,onScale:u,onClose:d},null))]}),v=()=>{if(e.closeable)return Object(i["m"])(C["a"],{role:"button",name:e.closeIcon,class:[U("close-icon",e.closeIconPosition),M["i"]],onClick:d},null)},m=()=>n("closed"),_=(e,t)=>{var n;return null==(n=o.value)?void 0:n.swipeTo(e,t)};return Object(T["a"])({swipeTo:_}),Object(i["C"])(c),Object(i["X"])([k["k"],k["j"]],c),Object(i["X"])(()=>e.startPosition,e=>p(+e)),Object(i["X"])(()=>e.show,t=>{var{images:r,startPosition:o}=e;t?(p(+o),Object(i["u"])(()=>{c(),_(+o,{immediate:!0})})):n("close",{index:a.active,url:r[a.active]})}),()=>Object(i["m"])(O["a"],Object(i["t"])({class:[U(),e.className],overlayClass:U("overlay"),onClosed:m,"onUpdate:show":l},Object(s["e"])(e,G)),{default:()=>[v(),g(),f(),h()]})}}),B={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,overlayStyle:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeIconPosition:"top-right"};function q(){({instance:b}=Object(S["a"])({setup(){var{state:e,toggle:t}=Object(S["b"])(),n=()=>{e.images=[]};return()=>Object(i["m"])(F,Object(i["t"])(e,{onClosed:n,"onUpdate:show":t}),null)}}))}var H=function(e,t){if(void 0===t&&(t=0),s["c"])return b||q(),e=Array.isArray(e)?{images:e,startPosition:t}:e,b.open(Object(s["a"])({},B,e)),b};H.Component=Object(r["a"])(F),H.install=e=>{e.use(H.Component)};var z=Object(i["n"])({props:{name:o["f"],item:Object(o["d"])(Object),index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,previewSize:o["f"],beforeDelete:Function},emits:["delete","preview"],setup(e,t){var{emit:n,slots:r}=t,o=()=>{var{status:t,message:n}=e.item;if("uploading"===t||"failed"===t){var r="failed"===t?Object(i["m"])(C["a"],{name:"close",class:d("mask-icon")},null):Object(i["m"])(R["a"],{class:d("loading")},null),o=Object(a["b"])(n)&&""!==n;return Object(i["m"])("div",{class:d("mask")},[r,o&&Object(i["m"])("div",{class:d("mask-message")},[n])])}},u=t=>{var{name:r,item:i,index:o,beforeDelete:a}=e;t.stopPropagation(),Object(E["a"])(a,{args:[i,{name:r,index:o}],done:()=>n("delete")})},l=()=>n("preview"),f=()=>{if(e.deletable&&"uploading"!==e.item.status)return Object(i["m"])("div",{role:"button",class:d("preview-delete"),tabindex:0,"aria-label":p("delete"),onClick:u},[Object(i["m"])(C["a"],{name:"cross",class:d("preview-delete-icon")},null)])},h=()=>{if(r["preview-cover"]){var{index:t,item:n}=e;return Object(i["m"])("div",{class:d("preview-cover")},[r["preview-cover"](Object(s["a"])({index:t},n))])}},g=()=>{var{item:t}=e;return y(t)?Object(i["m"])(A["a"],{fit:e.imageFit,src:t.content||t.url,class:d("preview-image"),width:e.previewSize,height:e.previewSize,lazyLoad:e.lazyLoad,onClick:l},{default:h}):Object(i["m"])("div",{class:d("file"),style:Object(c["e"])(e.previewSize)},[Object(i["m"])(C["a"],{class:d("file-icon"),name:"description"},null),Object(i["m"])("div",{class:[d("file-name"),"van-ellipsis"]},[t.file?t.file.name:t.url]),h()])};return()=>Object(i["m"])("div",{class:d("preview")},[g(),o(),f()])}}),K={name:Object(o["c"])(""),accept:Object(o["e"])("image/*"),capture:String,multiple:Boolean,disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,maxCount:Object(o["c"])(1/0),imageFit:Object(o["e"])("cover"),resultType:Object(o["e"])("dataUrl"),uploadIcon:Object(o["e"])("photograph"),uploadText:String,deletable:o["g"],afterRead:Function,showUpload:o["g"],modelValue:Object(o["a"])(),beforeRead:Function,beforeDelete:Function,previewSize:o["f"],previewImage:o["g"],previewOptions:Object,previewFullImage:o["g"],maxSize:{type:[Number,String,Function],default:1/0}},W=Object(i["n"])({name:l,props:K,emits:["delete","oversize","click-upload","close-preview","click-preview","update:modelValue"],setup(e,t){var n,{emit:r,slots:o}=t,u=Object(i["K"])(),l=[],p=function(t){return void 0===t&&(t=e.modelValue.length),{name:e.name,index:t}},m=()=>{u.value&&(u.value.value="")},_=t=>{if(m(),g(t,e.maxSize)){if(!Array.isArray(t))return void r("oversize",t,p());var n=v(t,e.maxSize);if(t=n.valid,r("oversize",n.invalid,p()),!t.length)return}t=Object(i["J"])(t),r("update:modelValue",[...e.modelValue,...f(t)]),e.afterRead&&e.afterRead(t,p())},b=t=>{var{maxCount:n,modelValue:r,resultType:i}=e;if(Array.isArray(t)){var o=+n-r.length;t.length>o&&(t=t.slice(0,o)),Promise.all(t.map(e=>h(e,i))).then(e=>{var n=t.map((t,n)=>{var r={file:t,status:"",message:""};return e[n]&&(r.content=e[n]),r});_(n)})}else h(t,i).then(e=>{var n={file:t,status:"",message:""};e&&(n.content=e),_(n)})},S=t=>{var{files:n}=t.target;if(!e.disabled&&n&&n.length){var r=1===n.length?n[0]:[].slice.call(n);if(e.beforeRead){var i=e.beforeRead(r,p());if(!i)return void m();if(Object(a["g"])(i))return void i.then(e=>{b(e||r)}).catch(m)}b(r)}},E=()=>r("close-preview"),M=t=>{if(e.previewFullImage){var r=e.modelValue.filter(y),i=r.map(e=>(e.file&&!e.url&&(e.url=URL.createObjectURL(e.file),l.push(e.url)),e.url)).filter(Boolean);n=H(Object(s["a"])({images:i,startPosition:r.indexOf(t),onClose:E},e.previewOptions))}},k=()=>{n&&n.close()},w=(t,n)=>{var i=e.modelValue.slice(0);i.splice(n,1),r("update:modelValue",i),r("delete",t,p(n))},O=(t,n)=>{var a=["imageFit","deletable","previewSize","beforeDelete"],c=Object(s["a"])(Object(s["e"])(e,a),Object(s["e"])(t,a,!0));return Object(i["m"])(z,Object(i["t"])({item:t,index:n,onClick:()=>r("click-preview",t,p(n)),onDelete:()=>w(t,n),onPreview:()=>M(t)},Object(s["e"])(e,["name","lazyLoad"]),c),{"preview-cover":o["preview-cover"]})},D=()=>{if(e.previewImage)return e.modelValue.map(O)},A=e=>r("click-upload",e),R=()=>{if(!(e.modelValue.length>=e.maxCount)&&e.showUpload){var t=e.readonly?null:Object(i["m"])("input",{ref:u,type:"file",class:d("input"),accept:e.accept,capture:e.capture,multiple:e.multiple,disabled:e.disabled,onChange:S},null);return o.default?Object(i["m"])("div",{class:d("input-wrapper"),onClick:A},[o.default(),t]):Object(i["m"])("div",{class:d("upload",{readonly:e.readonly}),style:Object(c["e"])(e.previewSize),onClick:A},[Object(i["m"])(C["a"],{name:e.uploadIcon,class:d("upload-icon")},null),e.uploadText&&Object(i["m"])("span",{class:d("upload-text")},[e.uploadText]),t])}},x=()=>{u.value&&!e.disabled&&u.value.click()};return Object(i["z"])(()=>{l.forEach(e=>URL.revokeObjectURL(e))}),Object(T["a"])({chooseFile:x,closeImagePreview:k}),Object(I["i"])(()=>e.modelValue),()=>Object(i["m"])("div",{class:d()},[Object(i["m"])("div",{class:d("wrapper",{disabled:e.disabled})},[D(),R()])])}}),Y=Object(r["a"])(W);t["a"]=Y},"8fec":function(e,t,n){"use strict";n("68ef"),n("e3b3"),n("3c71")},"90e3":function(e,t,n){var r=n("e330"),i=0,o=Math.random(),a=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+o,36)}},9112:function(e,t,n){var r=n("83ab"),i=n("9bf2"),o=n("5c6c");e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},"91d5":function(e,t,n){"use strict";n("68ef"),n("72cf")},9263:function(e,t,n){"use strict";var r=n("c65b"),i=n("e330"),o=n("577e"),a=n("ad6d"),s=n("9f7f"),c=n("5692"),u=n("7c73"),l=n("69f3").get,d=n("fce3"),p=n("107c"),f=c("native-string-replace",String.prototype.replace),h=RegExp.prototype.exec,g=h,v=i("".charAt),m=i("".indexOf),_=i("".replace),y=i("".slice),b=function(){var e=/a/,t=/b*/g;return r(h,e,"a"),r(h,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),I=s.BROKEN_CARET,T=void 0!==/()??/.exec("")[1],C=b||T||I||d||p;C&&(g=function(e){var t,n,i,s,c,d,p,C=this,S=l(C),E=o(e),M=S.raw;if(M)return M.lastIndex=C.lastIndex,t=r(g,M,E),C.lastIndex=M.lastIndex,t;var k=S.groups,w=I&&C.sticky,O=r(a,C),D=C.source,A=0,R=E;if(w&&(O=_(O,"y",""),-1===m(O,"g")&&(O+="g"),R=y(E,C.lastIndex),C.lastIndex>0&&(!C.multiline||C.multiline&&"\n"!==v(E,C.lastIndex-1))&&(D="(?: "+D+")",R=" "+R,A++),n=new RegExp("^(?:"+D+")",O)),T&&(n=new RegExp("^"+D+"$(?!\\s)",O)),b&&(i=C.lastIndex),s=r(h,w?n:C,R),w?s?(s.input=y(s.input,A),s[0]=y(s[0],A),s.index=C.lastIndex,C.lastIndex+=s[0].length):C.lastIndex=0:b&&s&&(C.lastIndex=C.global?s.index+s[0].length:i),T&&s&&s.length>1&&r(f,s[0],n,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(s[c]=void 0)})),s&&k)for(s.groups=d=u(null),c=0;c<k.length;c++)p=k[c],d[p[0]]=s[p[1]];return s}),e.exports=g},9312:function(e,t,n){},9483:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r,i=function(){return Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))};function o(e,t){void 0===t&&(t={});var n=t.registrationOptions;void 0===n&&(n={}),delete t.registrationOptions;var o=function(e){var n=[],r=arguments.length-1;while(r-- >0)n[r]=arguments[r+1];t&&t[e]&&t[e].apply(t,n)};"serviceWorker"in navigator&&r.then((function(){i()?(c(e,o,n),navigator.serviceWorker.ready.then((function(e){o("ready",e)})).catch((function(e){return a(o,e)}))):(s(e,o,n),navigator.serviceWorker.ready.then((function(e){o("ready",e)})).catch((function(e){return a(o,e)})))}))}function a(e,t){navigator.onLine||e("offline"),e("error",t)}function s(e,t,n){navigator.serviceWorker.register(e,n).then((function(e){t("registered",e),e.waiting?t("updated",e):e.onupdatefound=function(){t("updatefound",e);var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?t("updated",e):t("cached",e))}}})).catch((function(e){return a(t,e)}))}function c(e,t,n){fetch(e).then((function(r){404===r.status?(t("error",new Error("Service worker not found at "+e)),u()):-1===r.headers.get("content-type").indexOf("javascript")?(t("error",new Error("Expected "+e+" to have javascript content-type, but received "+r.headers.get("content-type"))),u()):s(e,t,n)})).catch((function(e){return a(t,e)}))}function u(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){return a(emit,e)}))}"undefined"!==typeof window&&(r="undefined"!==typeof Promise?new Promise((function(e){return window.addEventListener("load",e)})):{then:function(e){return window.addEventListener("load",e)}})},"94ca":function(e,t,n){var r=n("d039"),i=n("1626"),o=/#|\.prototype\./,a=function(e,t){var n=c[s(e)];return n==l||n!=u&&(i(t)?r(t):!!t)},s=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=a.data={},u=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},"96b0":function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return l}));var r=n("f344"),i=n("d3fb"),o=Object(r["a"])({},i["b"],{filter:Function,columnsOrder:Array,formatter:{type:Function,default:(e,t)=>t}}),a=Object.keys(i["b"]);function s(e,t){var n=-1,r=Array(e);while(++n<e)r[n]=t(n);return r}function c(e){if(!e)return 0;while(Number.isNaN(parseInt(e,10))){if(!(e.length>1))return 0;e=e.slice(1)}return parseInt(e,10)}var u=(e,t)=>32-new Date(e,t-1,32).getDate(),l=(e,t)=>{var n=["setValues","setIndexes","setColumnIndex","setColumnValue"];return new Proxy(e,{get:(e,r)=>n.includes(r)?function(){e[r](...arguments),t()}:e[r]})}},"96cf":function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(R){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,o=Object.create(i.prototype),a=new O(r||[]);return o._invoke=E(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",h="completed",g={};function v(){}function m(){}function _(){}var y={};c(y,o,(function(){return this}));var b=Object.getPrototypeOf,I=b&&b(b(D([])));I&&I!==n&&r.call(I,o)&&(y=I);var T=_.prototype=v.prototype=Object.create(y);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,o,a,s){var c=l(e[i],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"===typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;function o(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}this._invoke=o}function E(e,t,n){var r=d;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return A()}n.method=i,n.arg=o;while(1){var a=n.delegate;if(a){var s=M(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=l(e,t,n);if("normal"===c.type){if(r=n.done?h:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}function M(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator["return"]&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function D(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){while(++i<e.length)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:A}}function A(){return{value:t,done:!0}}return m.prototype=_,c(T,"constructor",_),c(_,"constructor",m),m.displayName=c(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,s,"GeneratorFunction")),e.prototype=Object.create(T),e},e.awrap=function(e){return{__await:e}},C(S.prototype),c(S.prototype,a,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(T),c(T,s,"Generator"),c(T,o,(function(){return this})),c(T,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=D,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(w),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=r}catch(i){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},9896:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("7a23"),i=n("fe7e"),o=n("f691"),a=n("7f9b"),s=n("4eda"),[c,u]=Object(i["a"])("checkbox-group"),l={max:o["f"],disabled:Boolean,iconSize:o["f"],direction:String,modelValue:Object(o["a"])(),checkedColor:String},d=Symbol(c);t["b"]=Object(r["n"])({name:c,props:l,emits:["change","update:modelValue"],setup(e,t){var{emit:n,slots:i}=t,{children:o,linkChildren:c}=Object(a["f"])(d),l=e=>n("update:modelValue",e),p=function(e){void 0===e&&(e={}),"boolean"===typeof e&&(e={checked:e});var{checked:t,skipDisabled:n}=e,r=o.filter(e=>!!e.props.bindGroup&&(e.props.disabled&&n?e.checked.value:null!=t?t:!e.checked.value)),i=r.map(e=>e.name);l(i)};return Object(r["X"])(()=>e.modelValue,e=>n("change",e)),Object(s["a"])({toggleAll:p}),Object(a["i"])(()=>e.modelValue),c({props:e,updateValue:l}),()=>Object(r["m"])("div",{class:u([e.direction])},[null==i.default?void 0:i.default()])}})},"99af":function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("d039"),a=n("e8b5"),s=n("861d"),c=n("7b0b"),u=n("07fa"),l=n("8418"),d=n("65f0"),p=n("1dde"),f=n("b622"),h=n("2d00"),g=f("isConcatSpreadable"),v=9007199254740991,m="Maximum allowed index exceeded",_=i.TypeError,y=h>=51||!o((function(){var e=[];return e[g]=!1,e.concat()[0]!==e})),b=p("concat"),I=function(e){if(!s(e))return!1;var t=e[g];return void 0!==t?!!t:a(e)},T=!y||!b;r({target:"Array",proto:!0,forced:T},{concat:function(e){var t,n,r,i,o,a=c(this),s=d(a,0),p=0;for(t=-1,r=arguments.length;t<r;t++)if(o=-1===t?a:arguments[t],I(o)){if(i=u(o),p+i>v)throw _(m);for(n=0;n<i;n++,p++)n in o&&l(s,p,o[n])}else{if(p>=v)throw _(m);l(s,p++,o)}return s.length=p,s}})},"9a1f":function(e,t,n){var r=n("da84"),i=n("c65b"),o=n("59ed"),a=n("825a"),s=n("0d51"),c=n("35a1"),u=r.TypeError;e.exports=function(e,t){var n=arguments.length<2?c(e):t;if(o(n))return a(i(n,e));throw u(s(e)+" is not iterable")}},"9b7e":function(e,t,n){},"9bdd":function(e,t,n){var r=n("825a"),i=n("2a62");e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(a){i(e,"throw",a)}}},"9bf2":function(e,t,n){var r=n("da84"),i=n("83ab"),o=n("0cfb"),a=n("825a"),s=n("a04b"),c=r.TypeError,u=Object.defineProperty;t.f=i?u:function(e,t,n){if(a(e),t=s(t),a(n),o)try{return u(e,t,n)}catch(r){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},"9cb7":function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("09fe"),n("9b7e"),n("ea82")},"9e6a":function(e,t,n){"use strict";var r=n("d233"),i=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},a=function(e,t){for(var n={},r=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,a=t.parameterLimit===1/0?void 0:t.parameterLimit,s=r.split(t.delimiter,a),c=0;c<s.length;++c){var u,l,d=s[c],p=d.indexOf("]="),f=-1===p?d.indexOf("="):p+1;-1===f?(u=t.decoder(d,o.decoder),l=t.strictNullHandling?null:""):(u=t.decoder(d.slice(0,f),o.decoder),l=t.decoder(d.slice(f+1),o.decoder)),i.call(n,u)?n[u]=[].concat(n[u]).concat(l):n[u]=l}return n},s=function(e,t,n){for(var r=t,i=e.length-1;i>=0;--i){var o,a=e[i];if("[]"===a)o=[],o=o.concat(r);else{o=n.plainObjects?Object.create(null):{};var s="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,c=parseInt(s,10);!isNaN(c)&&a!==s&&String(c)===s&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(o=[],o[c]=r):o[s]=r}r=o}return r},c=function(e,t,n){if(e){var r=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,c=o.exec(r),u=c?r.slice(0,c.index):r,l=[];if(u){if(!n.plainObjects&&i.call(Object.prototype,u)&&!n.allowPrototypes)return;l.push(u)}var d=0;while(null!==(c=a.exec(r))&&d<n.depth){if(d+=1,!n.plainObjects&&i.call(Object.prototype,c[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(c[1])}return c&&l.push("["+r.slice(c.index)+"]"),s(l,t,n)}};e.exports=function(e,t){var n=t?r.assign({},t):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!==typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"===typeof n.delimiter||r.isRegExp(n.delimiter)?n.delimiter:o.delimiter,n.depth="number"===typeof n.depth?n.depth:o.depth,n.arrayLimit="number"===typeof n.arrayLimit?n.arrayLimit:o.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"===typeof n.decoder?n.decoder:o.decoder,n.allowDots="boolean"===typeof n.allowDots?n.allowDots:o.allowDots,n.plainObjects="boolean"===typeof n.plainObjects?n.plainObjects:o.plainObjects,n.allowPrototypes="boolean"===typeof n.allowPrototypes?n.allowPrototypes:o.allowPrototypes,n.parameterLimit="number"===typeof n.parameterLimit?n.parameterLimit:o.parameterLimit,n.strictNullHandling="boolean"===typeof n.strictNullHandling?n.strictNullHandling:o.strictNullHandling,""===e||null===e||"undefined"===typeof e)return n.plainObjects?Object.create(null):{};for(var i="string"===typeof e?a(e,n):e,s=n.plainObjects?Object.create(null):{},u=Object.keys(i),l=0;l<u.length;++l){var d=u[l],p=c(d,i[d],n);s=r.merge(s,p,n)}return r.compact(s)}},"9ed2":function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),[s,c]=Object(o["a"])("divider"),u={dashed:Boolean,hairline:a["g"],contentPosition:Object(a["e"])("center")},l=Object(i["n"])({name:s,props:u,setup(e,t){var{slots:n}=t;return()=>Object(i["m"])("div",{role:"separator",class:c({dashed:e.dashed,hairline:e.hairline,["content-"+e.contentPosition]:!!n.default})},[null==n.default?void 0:n.default()])}}),d=Object(r["a"])(l);t["a"]=d},"9ed3":function(e,t,n){"use strict";var r=n("ae93").IteratorPrototype,i=n("7c73"),o=n("5c6c"),a=n("d44e"),s=n("3f8c"),c=function(){return this};e.exports=function(e,t,n,u){var l=t+" Iterator";return e.prototype=i(r,{next:o(+!u,n)}),a(e,l,!1,!0),s[l]=c,e}},"9ee3":function(e,t,n){},"9f14":function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f344"),s=n("5642"),c=n("7f9b"),u=n("3e39"),[l,d]=Object(o["a"])("radio"),p=Object(i["n"])({name:l,props:u["a"],emits:["update:modelValue"],setup(e,t){var{emit:n,slots:r}=t,{parent:o}=Object(c["l"])(s["a"]),l=()=>{var t=o?o.props.modelValue:e.modelValue;return t===e.name},p=()=>{o?o.updateValue(e.name):n("update:modelValue",e.name)};return()=>Object(i["m"])(u["b"],Object(i["t"])({bem:d,role:"radio",parent:o,checked:l(),onToggle:p},e),Object(a["e"])(r,["default","icon"]))}}),f=Object(r["a"])(p);t["a"]=f},"9f7f":function(e,t,n){var r=n("d039"),i=n("da84"),o=i.RegExp,a=r((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),s=a||r((function(){return!o("a","y").sticky})),c=a||r((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:c,MISSED_STICKY:s,UNSUPPORTED_Y:a}},"9ff4":function(e,t,n){"use strict";(function(e){function r(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return C})),n.d(t,"c",(function(){return M})),n.d(t,"d",(function(){return E})),n.d(t,"e",(function(){return X})),n.d(t,"f",(function(){return ee})),n.d(t,"g",(function(){return ie})),n.d(t,"h",(function(){return D})),n.d(t,"i",(function(){return se})),n.d(t,"j",(function(){return ne})),n.d(t,"k",(function(){return x})),n.d(t,"l",(function(){return Q})),n.d(t,"m",(function(){return c})),n.d(t,"n",(function(){return re})),n.d(t,"o",(function(){return L})),n.d(t,"p",(function(){return U})),n.d(t,"q",(function(){return o})),n.d(t,"r",(function(){return v})),n.d(t,"s",(function(){return W})),n.d(t,"t",(function(){return N})),n.d(t,"u",(function(){return O})),n.d(t,"v",(function(){return F})),n.d(t,"w",(function(){return w})),n.d(t,"x",(function(){return K})),n.d(t,"y",(function(){return B})),n.d(t,"z",(function(){return Y})),n.d(t,"A",(function(){return m})),n.d(t,"B",(function(){return P})),n.d(t,"C",(function(){return s})),n.d(t,"D",(function(){return G})),n.d(t,"E",(function(){return V})),n.d(t,"F",(function(){return y})),n.d(t,"G",(function(){return b})),n.d(t,"H",(function(){return r})),n.d(t,"I",(function(){return f})),n.d(t,"J",(function(){return u})),n.d(t,"K",(function(){return A})),n.d(t,"L",(function(){return I})),n.d(t,"M",(function(){return te})),n.d(t,"N",(function(){return oe})),n.d(t,"O",(function(){return z}));const i="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",o=r(i);const a="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",s=r(a);function c(e){return!!e||""===e}function u(e){if(L(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=G(r)?p(r):u(r);if(i)for(const e in i)t[e]=i[e]}return t}return G(e)||F(e)?e:void 0}const l=/;(?![^(]*\))/g,d=/:(.+)/;function p(e){const t={};return e.split(l).forEach(e=>{if(e){const n=e.split(d);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function f(e){let t="";if(G(e))t=e;else if(L(e))for(let n=0;n<e.length;n++){const r=f(e[n]);r&&(t+=r+" ")}else if(F(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const h="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",g="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",v=r(h),m=r(g);function _(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=y(e[r],t[r]);return n}function y(e,t){if(e===t)return!0;let n=j(e),r=j(t);if(n||r)return!(!n||!r)&&e.getTime()===t.getTime();if(n=L(e),r=L(t),n||r)return!(!n||!r)&&_(e,t);if(n=F(e),r=F(t),n||r){if(!n||!r)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const n in e){const r=e.hasOwnProperty(n),i=t.hasOwnProperty(n);if(r&&!i||!r&&i||!y(e[n],t[n]))return!1}}return String(e)===String(t)}function b(e,t){return e.findIndex(e=>y(e,t))}const I=e=>null==e?"":L(e)||F(e)&&(e.toString===q||!U(e.toString))?JSON.stringify(e,T,2):String(e),T=(e,t)=>t&&t.__v_isRef?T(e,t.value):N(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[t,n])=>(e[t+" =>"]=n,e),{})}:P(t)?{[`Set(${t.size})`]:[...t.values()]}:!F(t)||L(t)||K(t)?t:String(t),C={},S=[],E=()=>{},M=()=>!1,k=/^on[^a-z]/,w=e=>k.test(e),O=e=>e.startsWith("onUpdate:"),D=Object.assign,A=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},R=Object.prototype.hasOwnProperty,x=(e,t)=>R.call(e,t),L=Array.isArray,N=e=>"[object Map]"===H(e),P=e=>"[object Set]"===H(e),j=e=>e instanceof Date,U=e=>"function"===typeof e,G=e=>"string"===typeof e,V=e=>"symbol"===typeof e,F=e=>null!==e&&"object"===typeof e,B=e=>F(e)&&U(e.then)&&U(e.catch),q=Object.prototype.toString,H=e=>q.call(e),z=e=>H(e).slice(8,-1),K=e=>"[object Object]"===H(e),W=e=>G(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,Y=r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),J=e=>{const t=Object.create(null);return n=>{const r=t[n];return r||(t[n]=e(n))}},$=/-(\w)/g,X=J(e=>e.replace($,(e,t)=>t?t.toUpperCase():"")),Z=/\B([A-Z])/g,Q=J(e=>e.replace(Z,"-$1").toLowerCase()),ee=J(e=>e.charAt(0).toUpperCase()+e.slice(1)),te=J(e=>e?"on"+ee(e):""),ne=(e,t)=>!Object.is(e,t),re=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},ie=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},oe=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ae;const se=()=>ae||(ae="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{})}).call(this,n("c8ba"))},"9ffb":function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("7f9b"),c=n("56b6"),[u,l]=Object(o["a"])("col"),d={tag:Object(a["e"])("div"),span:Object(a["c"])(0),offset:a["f"]},p=Object(i["n"])({name:u,props:d,setup(e,t){var{slots:n}=t,{parent:r,index:o}=Object(s["l"])(c["a"]),a=Object(i["e"])(()=>{if(r){var{spaces:e}=r;if(e&&e.value&&e.value[o.value]){var{left:t,right:n}=e.value[o.value];return{paddingLeft:t?t+"px":null,paddingRight:n?n+"px":null}}}});return()=>{var{tag:t,span:r,offset:o}=e;return Object(i["m"])(t,{style:a.value,class:l({[r]:r,["offset-"+o]:o})},{default:()=>[null==n.default?void 0:n.default()]})}}}),f=Object(r["a"])(p);t["a"]=f},a04b:function(e,t,n){var r=n("c04e"),i=n("d9b5");e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},a37c:function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("8da3"),c=n("7f9b"),u=n("4eda"),l=n("1c51"),d=n("ad06"),[p,f]=Object(o["a"])("notice-bar"),h={text:String,mode:String,color:String,delay:Object(a["c"])(1),speed:Object(a["c"])(60),leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:null}},g=Object(i["n"])({name:p,props:h,emits:["close","replay"],setup(e,t){var n,{emit:r,slots:o}=t,a=0,p=0,h=Object(i["K"])(),g=Object(i["K"])(),v=Object(i["J"])({show:!0,offset:0,duration:0}),m=()=>o["left-icon"]?o["left-icon"]():e.leftIcon?Object(i["m"])(d["a"],{class:f("left-icon"),name:e.leftIcon},null):void 0,_=()=>"closeable"===e.mode?"cross":"link"===e.mode?"arrow":void 0,y=t=>{"closeable"===e.mode&&(v.show=!1,r("close",t))},b=()=>{if(o["right-icon"])return o["right-icon"]();var e=_();return e?Object(i["m"])(d["a"],{name:e,class:f("right-icon"),onClick:y},null):void 0},I=()=>{v.offset=a,v.duration=0,Object(c["e"])(()=>{Object(c["b"])(()=>{v.offset=-p,v.duration=(p+a)/+e.speed,r("replay")})})},T=()=>{var t=!1===e.scrollable&&!e.wrapable,n={transform:v.offset?"translateX("+v.offset+"px)":"",transitionDuration:v.duration+"s"};return Object(i["m"])("div",{ref:h,role:"marquee",class:f("wrap")},[Object(i["m"])("div",{ref:g,style:n,class:[f("content"),{"van-ellipsis":t}],onTransitionend:I},[o.default?o.default():e.text])])},C=()=>{var{delay:t,speed:r,scrollable:i}=e,o=Object(s["b"])(t)?1e3*+t:0;a=0,p=0,v.offset=0,v.duration=0,clearTimeout(n),n=setTimeout(()=>{if(h.value&&g.value&&!1!==i){var e=Object(c["m"])(h).width,t=Object(c["m"])(g).width;(i||t>e)&&Object(c["b"])(()=>{a=e,p=t,v.offset=-p,v.duration=p/+r})}},o)};return Object(l["b"])(C),Object(c["d"])(C),Object(c["j"])("pageshow",C),Object(u["a"])({reset:C}),Object(i["X"])(()=>[e.text,e.scrollable],C),()=>{var{color:t,wrapable:n,background:r}=e;return Object(i["ab"])(Object(i["m"])("div",{role:"alert",class:f({wrapable:n}),style:{color:t,background:r}},[m(),T(),b()]),[[i["W"],v.show]])}}}),v=Object(r["a"])(g);t["a"]=v},a3e2:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("ad06"),[c,u]=Object(o["a"])("tag"),l={size:String,mark:Boolean,show:a["g"],type:Object(a["e"])("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean},d=Object(i["n"])({name:c,props:l,emits:["close"],setup(e,t){var{slots:n,emit:r}=t,o=e=>{e.stopPropagation(),r("close",e)},a=()=>e.plain?{color:e.textColor||e.color,borderColor:e.color}:{color:e.textColor,background:e.color},c=()=>{var{type:t,mark:r,plain:c,round:l,size:d,closeable:p}=e,f={mark:r,plain:c,round:l};d&&(f[d]=d);var h=p&&Object(i["m"])(s["a"],{name:"cross",class:u("close"),onClick:o},null);return Object(i["m"])("span",{style:a(),class:u([f,t])},[null==n.default?void 0:n.default(),h])};return()=>Object(i["m"])(i["d"],{name:e.closeable?"van-fade":void 0},{default:()=>[e.show?c():null]})}}),p=Object(r["a"])(d);t["b"]=p},a434:function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("23cb"),a=n("5926"),s=n("07fa"),c=n("7b0b"),u=n("65f0"),l=n("8418"),d=n("1dde"),p=d("splice"),f=i.TypeError,h=Math.max,g=Math.min,v=9007199254740991,m="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!p},{splice:function(e,t){var n,r,i,d,p,_,y=c(this),b=s(y),I=o(e,b),T=arguments.length;if(0===T?n=r=0:1===T?(n=0,r=b-I):(n=T-2,r=g(h(a(t),0),b-I)),b+n-r>v)throw f(m);for(i=u(y,r),d=0;d<r;d++)p=I+d,p in y&&l(i,d,y[p]);if(i.length=r,n<r){for(d=I;d<b-r;d++)p=d+r,_=d+n,p in y?y[_]=y[p]:delete y[_];for(d=b;d>b-r+n;d--)delete y[d-1]}else if(n>r)for(d=b-r;d>I;d--)p=d+r-1,_=d+n-1,p in y?y[_]=y[p]:delete y[_];for(d=0;d<n;d++)y[d+I]=arguments[d+2];return y.length=b-r+n,i}})},a44c:function(e,t,n){"use strict";n("68ef"),n("dc1b")},a4b4:function(e,t,n){var r=n("342f");e.exports=/web0s(?!.*chrome)/i.test(r)},a4d3:function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("d066"),a=n("2ba4"),s=n("c65b"),c=n("e330"),u=n("c430"),l=n("83ab"),d=n("4930"),p=n("d039"),f=n("1a2d"),h=n("e8b5"),g=n("1626"),v=n("861d"),m=n("3a9b"),_=n("d9b5"),y=n("825a"),b=n("7b0b"),I=n("fc6a"),T=n("a04b"),C=n("577e"),S=n("5c6c"),E=n("7c73"),M=n("df75"),k=n("241c"),w=n("057f"),O=n("7418"),D=n("06cf"),A=n("9bf2"),R=n("d1e7"),x=n("f36a"),L=n("6eeb"),N=n("5692"),P=n("f772"),j=n("d012"),U=n("90e3"),G=n("b622"),V=n("e538"),F=n("746f"),B=n("d44e"),q=n("69f3"),H=n("b727").forEach,z=P("hidden"),K="Symbol",W="prototype",Y=G("toPrimitive"),J=q.set,$=q.getterFor(K),X=Object[W],Z=i.Symbol,Q=Z&&Z[W],ee=i.TypeError,te=i.QObject,ne=o("JSON","stringify"),re=D.f,ie=A.f,oe=w.f,ae=R.f,se=c([].push),ce=N("symbols"),ue=N("op-symbols"),le=N("string-to-symbol-registry"),de=N("symbol-to-string-registry"),pe=N("wks"),fe=!te||!te[W]||!te[W].findChild,he=l&&p((function(){return 7!=E(ie({},"a",{get:function(){return ie(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=re(X,t);r&&delete X[t],ie(e,t,n),r&&e!==X&&ie(X,t,r)}:ie,ge=function(e,t){var n=ce[e]=E(Q);return J(n,{type:K,tag:e,description:t}),l||(n.description=t),n},ve=function(e,t,n){e===X&&ve(ue,t,n),y(e);var r=T(t);return y(n),f(ce,r)?(n.enumerable?(f(e,z)&&e[z][r]&&(e[z][r]=!1),n=E(n,{enumerable:S(0,!1)})):(f(e,z)||ie(e,z,S(1,{})),e[z][r]=!0),he(e,r,n)):ie(e,r,n)},me=function(e,t){y(e);var n=I(t),r=M(n).concat(Te(n));return H(r,(function(t){l&&!s(ye,n,t)||ve(e,t,n[t])})),e},_e=function(e,t){return void 0===t?E(e):me(E(e),t)},ye=function(e){var t=T(e),n=s(ae,this,t);return!(this===X&&f(ce,t)&&!f(ue,t))&&(!(n||!f(this,t)||!f(ce,t)||f(this,z)&&this[z][t])||n)},be=function(e,t){var n=I(e),r=T(t);if(n!==X||!f(ce,r)||f(ue,r)){var i=re(n,r);return!i||!f(ce,r)||f(n,z)&&n[z][r]||(i.enumerable=!0),i}},Ie=function(e){var t=oe(I(e)),n=[];return H(t,(function(e){f(ce,e)||f(j,e)||se(n,e)})),n},Te=function(e){var t=e===X,n=oe(t?ue:I(e)),r=[];return H(n,(function(e){!f(ce,e)||t&&!f(X,e)||se(r,ce[e])})),r};if(d||(Z=function(){if(m(Q,this))throw ee("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?C(arguments[0]):void 0,t=U(e),n=function(e){this===X&&s(n,ue,e),f(this,z)&&f(this[z],t)&&(this[z][t]=!1),he(this,t,S(1,e))};return l&&fe&&he(X,t,{configurable:!0,set:n}),ge(t,e)},Q=Z[W],L(Q,"toString",(function(){return $(this).tag})),L(Z,"withoutSetter",(function(e){return ge(U(e),e)})),R.f=ye,A.f=ve,D.f=be,k.f=w.f=Ie,O.f=Te,V.f=function(e){return ge(G(e),e)},l&&(ie(Q,"description",{configurable:!0,get:function(){return $(this).description}}),u||L(X,"propertyIsEnumerable",ye,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:Z}),H(M(pe),(function(e){F(e)})),r({target:K,stat:!0,forced:!d},{for:function(e){var t=C(e);if(f(le,t))return le[t];var n=Z(t);return le[t]=n,de[n]=t,n},keyFor:function(e){if(!_(e))throw ee(e+" is not a symbol");if(f(de,e))return de[e]},useSetter:function(){fe=!0},useSimple:function(){fe=!1}}),r({target:"Object",stat:!0,forced:!d,sham:!l},{create:_e,defineProperty:ve,defineProperties:me,getOwnPropertyDescriptor:be}),r({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:Ie,getOwnPropertySymbols:Te}),r({target:"Object",stat:!0,forced:p((function(){O.f(1)}))},{getOwnPropertySymbols:function(e){return O.f(b(e))}}),ne){var Ce=!d||p((function(){var e=Z();return"[null]"!=ne([e])||"{}"!=ne({a:e})||"{}"!=ne(Object(e))}));r({target:"JSON",stat:!0,forced:Ce},{stringify:function(e,t,n){var r=x(arguments),i=t;if((v(t)||void 0!==e)&&!_(e))return h(t)||(t=function(e,t){if(g(i)&&(t=s(i,this,e,t)),!_(t))return t}),r[1]=t,a(ne,null,r)}})}if(!Q[Y]){var Se=Q.valueOf;L(Q,Y,(function(e){return s(Se,this)}))}B(Z,K),j[z]=!0},a526:function(e,t,n){},a52c:function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("9312"),n("ae73")},a630:function(e,t,n){var r=n("23e7"),i=n("4df4"),o=n("1c7e"),a=!o((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:a},{from:i})},a640:function(e,t,n){"use strict";var r=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},a71a:function(e,t,n){},a79d:function(e,t,n){"use strict";var r=n("23e7"),i=n("c430"),o=n("fea9"),a=n("d039"),s=n("d066"),c=n("1626"),u=n("4840"),l=n("cdf9"),d=n("6eeb"),p=!!o&&a((function(){o.prototype["finally"].call({then:function(){}},(function(){}))}));if(r({target:"Promise",proto:!0,real:!0,forced:p},{finally:function(e){var t=u(this,s("Promise")),n=c(e);return this.then(n?function(n){return l(t,e()).then((function(){return n}))}:e,n?function(n){return l(t,e()).then((function(){throw n}))}:e)}}),!i&&c(o)){var f=s("Promise").prototype["finally"];o.prototype["finally"]!==f&&d(o.prototype,"finally",f,{unsafe:!0})}},a822:function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("f344"),c=n("b1d2"),u=n("0b33"),l=n("5e46"),d=n("ad06"),[p,f,h]=Object(o["a"])("cascader"),g={title:String,options:Object(a["a"])(),closeable:a["g"],swipeable:a["g"],closeIcon:Object(a["e"])("cross"),modelValue:a["f"],fieldNames:Object,placeholder:String,activeColor:String},v=Object(i["n"])({name:p,props:g,emits:["close","change","finish","click-tab","update:modelValue"],setup(e,t){var{slots:n,emit:r}=t,o=Object(i["K"])([]),a=Object(i["K"])(0),{text:p,value:g,children:v}=Object(s["a"])({text:"text",value:"value",children:"children"},e.fieldNames),m=(e,t)=>{for(var n of e){if(n[g]===t)return[n];if(n[v]){var r=m(n[v],t);if(r)return[n,...r]}}},_=()=>{var{options:t,modelValue:n}=e;if(void 0!==n){var r=m(t,n);if(r){var s=t;return o.value=r.map(e=>{var t={options:s,selected:e},n=s.find(t=>t[g]===e[g]);return n&&(s=n[v]),t}),s&&o.value.push({options:s,selected:null}),void Object(i["u"])(()=>{a.value=o.value.length-1})}}o.value=[{options:t,selected:null}]},y=(e,t)=>{if(!e.disabled){if(o.value[t].selected=e,o.value.length>t+1&&(o.value=o.value.slice(0,t+1)),e[v]){var n={options:e[v],selected:null};o.value[t+1]?o.value[t+1]=n:o.value.push(n),Object(i["u"])(()=>{a.value++})}var s=o.value.map(e=>e.selected).filter(Boolean);r("update:modelValue",e[g]);var c={value:e[g],tabIndex:t,selectedOptions:s};r("change",c),e[v]||r("finish",c)}},b=()=>r("close"),I=e=>{var{name:t,title:n}=e;return r("click-tab",t,n)},T=()=>Object(i["m"])("div",{class:f("header")},[Object(i["m"])("h2",{class:f("title")},[n.title?n.title():e.title]),e.closeable?Object(i["m"])(d["a"],{name:e.closeIcon,class:[f("close-icon"),c["i"]],onClick:b},null):null]),C=(t,r,o)=>{var{disabled:a}=t,s=!(!r||t[g]!==r[g]),c=t.color||(s?e.activeColor:void 0),u=n.option?n.option({option:t,selected:s}):Object(i["m"])("span",null,[t[p]]);return Object(i["m"])("li",{role:"menuitemradio",class:[f("option",{selected:s,disabled:a}),t.className],style:{color:c},tabindex:a?void 0:s?0:-1,"aria-checked":s,"aria-disabled":a||void 0,onClick:()=>y(t,o)},[u,s?Object(i["m"])(d["a"],{name:"success",class:f("selected-icon")},null):null])},S=(e,t,n)=>Object(i["m"])("ul",{role:"menu",class:f("options")},[e.map(e=>C(e,t,n))]),E=(t,r)=>{var o,a,{options:s,selected:c}=t,l=e.placeholder||h("select"),d=c?c[p]:l;return Object(i["m"])(u["a"],{title:d,titleClass:f("tab",{unselected:!c})},{default:()=>[null==(o=n["options-top"])?void 0:o.call(n,{tabIndex:r}),S(s,c,r),null==(a=n["options-bottom"])?void 0:a.call(n,{tabIndex:r})]})},M=()=>Object(i["m"])(l["a"],{active:a.value,"onUpdate:active":e=>a.value=e,animated:!0,class:f("tabs"),color:e.activeColor,swipeThreshold:0,swipeable:e.swipeable,"onClick-tab":I},{default:()=>[o.value.map(E)]});return _(),Object(i["X"])(()=>e.options,_,{deep:!0}),Object(i["X"])(()=>e.modelValue,e=>{if(void 0!==e){var t=o.value.map(e=>{var t;return null==(t=e.selected)?void 0:t[g]});if(t.includes(e))return}_()}),()=>Object(i["m"])("div",{class:f()},[T(),M()])}}),m=Object(r["a"])(v);t["a"]=m},a909:function(e,t,n){"use strict";n("68ef"),n("0a6e")},a9e3:function(e,t,n){"use strict";var r=n("83ab"),i=n("da84"),o=n("e330"),a=n("94ca"),s=n("6eeb"),c=n("1a2d"),u=n("7156"),l=n("3a9b"),d=n("d9b5"),p=n("c04e"),f=n("d039"),h=n("241c").f,g=n("06cf").f,v=n("9bf2").f,m=n("408a"),_=n("58a8").trim,y="Number",b=i[y],I=b.prototype,T=i.TypeError,C=o("".slice),S=o("".charCodeAt),E=function(e){var t=p(e,"number");return"bigint"==typeof t?t:M(t)},M=function(e){var t,n,r,i,o,a,s,c,u=p(e,"number");if(d(u))throw T("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=_(u),t=S(u,0),43===t||45===t){if(n=S(u,2),88===n||120===n)return NaN}else if(48===t){switch(S(u,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(o=C(u,2),a=o.length,s=0;s<a;s++)if(c=S(o,s),c<48||c>i)return NaN;return parseInt(o,r)}return+u};if(a(y,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var k,w=function(e){var t=arguments.length<1?0:b(E(e)),n=this;return l(I,n)&&f((function(){m(n)}))?u(Object(t),n,w):t},O=r?h(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),D=0;O.length>D;D++)c(b,k=O[D])&&!c(w,k)&&v(w,k,g(b,k));w.prototype=I,I.constructor=w,s(i,y,w)}},ab13:function(e,t,n){var r=n("b622"),i=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,"/./"[e](t)}catch(r){}}return!1}},ab71:function(e,t,n){"use strict";n("68ef"),n("e3b3"),n("6ab3")},abc5:function(e,t,n){"use strict";(function(e){function r(){return i().__VUE_DEVTOOLS_GLOBAL_HOOK__}function i(){return"undefined"!==typeof navigator&&"undefined"!==typeof window?window:"undefined"!==typeof e?e:{}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o}));const o="function"===typeof Proxy}).call(this,n("c8ba"))},ac16:function(e,t,n){var r=n("23e7"),i=n("825a"),o=n("06cf").f;r({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var n=o(i(e),t);return!(n&&!n.configurable)&&delete e[t]}})},ac1e:function(e,t,n){"use strict";n("68ef"),n("e3b3")},ac1f:function(e,t,n){"use strict";var r=n("23e7"),i=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ac28:function(e,t,n){"use strict";var r=n("c199"),i=n("5531"),o=Object(r["a"])(i["b"]);t["a"]=o},acac:function(e,t,n){"use strict";var r=n("e330"),i=n("e2cc"),o=n("f183").getWeakData,a=n("825a"),s=n("861d"),c=n("19aa"),u=n("2266"),l=n("b727"),d=n("1a2d"),p=n("69f3"),f=p.set,h=p.getterFor,g=l.find,v=l.findIndex,m=r([].splice),_=0,y=function(e){return e.frozen||(e.frozen=new b)},b=function(){this.entries=[]},I=function(e,t){return g(e.entries,(function(e){return e[0]===t}))};b.prototype={get:function(e){var t=I(this,e);if(t)return t[1]},has:function(e){return!!I(this,e)},set:function(e,t){var n=I(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=v(this.entries,(function(t){return t[0]===e}));return~t&&m(this.entries,t,1),!!~t}},e.exports={getConstructor:function(e,t,n,r){var l=e((function(e,i){c(e,p),f(e,{type:t,id:_++,frozen:void 0}),void 0!=i&&u(i,e[r],{that:e,AS_ENTRIES:n})})),p=l.prototype,g=h(t),v=function(e,t,n){var r=g(e),i=o(a(t),!0);return!0===i?y(r).set(t,n):i[r.id]=n,e};return i(p,{delete:function(e){var t=g(this);if(!s(e))return!1;var n=o(e);return!0===n?y(t)["delete"](e):n&&d(n,t.id)&&delete n[t.id]},has:function(e){var t=g(this);if(!s(e))return!1;var n=o(e);return!0===n?y(t).has(e):n&&d(n,t.id)}}),i(p,n?{get:function(e){var t=g(this);if(s(e)){var n=o(e);return!0===n?y(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return v(this,e,t)}}:{add:function(e){return v(this,e,!0)}}),l}}},ad06:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("8405"),c=n("471a"),u=n("3c2b"),[l,d]=Object(o["a"])("icon"),p=e=>null==e?void 0:e.includes("/"),f={dot:Boolean,tag:Object(a["e"])("i"),name:String,size:a["f"],badge:a["f"],color:String,classPrefix:String},h=Object(i["n"])({name:l,props:f,setup(e,t){var{slots:n}=t,r=Object(i["q"])(u["a"],null),o=Object(i["e"])(()=>e.classPrefix||(null==r?void 0:r.iconPrefix)||d());return()=>{var{tag:t,dot:r,name:a,size:u,badge:l,color:f}=e,h=p(a);return Object(i["m"])(c["a"],{dot:r,tag:t,content:l,class:[o.value,h?"":o.value+"-"+a],style:{color:f,fontSize:Object(s["a"])(u)}},{default:()=>[null==n.default?void 0:n.default(),h&&Object(i["m"])("img",{class:d("image"),src:a},null)]})}}}),g=Object(r["a"])(h);t["b"]=g},ad6d:function(e,t,n){"use strict";var r=n("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},addb:function(e,t,n){var r=n("4dae"),i=Math.floor,o=function(e,t){var n=e.length,c=i(n/2);return n<8?a(e,t):s(e,o(r(e,0,c),t),o(r(e,c),t),t)},a=function(e,t){var n,r,i=e.length,o=1;while(o<i){r=o,n=e[o];while(r&&t(e[r-1],n)>0)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},s=function(e,t,n,r){var i=t.length,o=n.length,a=0,s=0;while(a<i||s<o)e[a+s]=a<i&&s<o?r(t[a],n[s])<=0?t[a++]:n[s++]:a<i?t[a++]:n[s++];return e};e.exports=o},ade3:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("7a82");function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},ae39:function(e,t,n){},ae73:function(e,t,n){},ae93:function(e,t,n){"use strict";var r,i,o,a=n("d039"),s=n("1626"),c=n("7c73"),u=n("e163"),l=n("6eeb"),d=n("b622"),p=n("c430"),f=d("iterator"),h=!1;[].keys&&(o=[].keys(),"next"in o?(i=u(u(o)),i!==Object.prototype&&(r=i)):h=!0);var g=void 0==r||a((function(){var e={};return r[f].call(e)!==e}));g?r={}:p&&(r=c(r)),s(r[f])||l(r,f,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:h}},ae9e:function(e,t,n){},aec8:function(e,t,n){},afd4:function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("d8ac"),n("81c0"),n("4a22")},b041:function(e,t,n){"use strict";var r=n("00ee"),i=n("f5df");e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},b070:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return a}));var r=n("7a23"),i={to:[String,Object],url:String,replace:Boolean};function o(e){var{to:t,url:n,replace:r,$router:i}=e;t&&i?i[r?"replace":"push"](t):n&&(r?location.replace(n):location.href=n)}function a(){var e=Object(r["o"])().proxy;return()=>o(e)}},b0c0:function(e,t,n){var r=n("83ab"),i=n("5e77").EXISTS,o=n("e330"),a=n("9bf2").f,s=Function.prototype,c=o(s.toString),u=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,l=o(u.exec),d="name";r&&!i&&a(s,d,{configurable:!0,get:function(){try{return l(u,c(this))[1]}catch(e){return""}}})},b1d2:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"i",(function(){return l})),n.d(t,"h",(function(){return d}));var r="van-hairline",i=r+"--top",o=r+"--left",a=r+"--bottom",s=r+"--surround",c=r+"--top-bottom",u=r+"-unset--top-bottom",l="van-haptics-feedback",d=Symbol("van-form")},b258:function(e,t,n){},b2cc:function(e,t,n){},b313:function(e,t,n){"use strict";var r=String.prototype.replace,i=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return r.call(e,i,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},b3bc:function(e,t,n){!function(t,r){e.exports=r(n("e23e"))}(window,(function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){"use strict";n.d(t,"e",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return v})),n.d(t,"a",(function(){return y})),n.d(t,"h",(function(){return b}));const r="undefined"!=typeof window,i=("undefined"!=typeof wx&&wx.getSystemInfoSync,r&&window.navigator&&window.navigator.userAgent||""),o=/AppleWebKit\/([\d.]+)/i.exec(i),a=(o&&parseFloat(o.pop()),/iPad/i.test(i)),s=(/iPhone/i.test(i),/iPod/i.test(i),function(){const e=i.match(/OS (\d+)_/i);e&&e[1]&&e[1]}(),/Android/i.test(i)),c=(function(){const e=i.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);t&&n&&parseFloat(e[1]+"."+e[2])}(),s&&/webkit/i.test(i),/Firefox/i.test(i),/Edge/i.test(i)),u=(!c&&/Chrome/i.test(i),function(){const e=i.match(/Chrome\/(\d+)/);e&&e[1]&&parseFloat(e[1])}(),/MSIE/.test(i),/MSIE\s8\.0/.test(i),function(){const e=/MSIE\s(\d+)\.\d/.exec(i);let t=e&&parseFloat(e[1]);!t&&/Trident\/7.0/i.test(i)&&/rv:11.0/.test(i)&&(t=11)}(),/Safari/i.test(i),/TBS\/\d+/i.test(i));(function(){const e=i.match(/TBS\/(\d+)/i);e&&e[1]&&e[1]})(),!u&&/MQQBrowser\/\d+/i.test(i),!u&&/ QQBrowser\/\d+/i.test(i),/(micromessenger|webbrowser)/i.test(i),/Windows/i.test(i),/MAC OS X/i.test(i),/MicroMessenger/i.test(i),n(2),n(1);const l=function(e){return"map"===m(e)},d=function(e){return"set"===m(e)},p=function(e){return"file"===m(e)},f=function(e){if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);if(null===t)return!0;let n=t;for(;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n},h=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"array"===m(e)},g=function(e){return h(e)||function(e){return null!==e&&"object"==typeof e}(e)},v=function(e){return e instanceof Error},m=function(e){return Object.prototype.toString.call(e).match(/^\[object (.*)\]$/)[1].toLowerCase()};let _=0;Date.now||(Date.now=function(){return(new Date).getTime()});const y={now:function(){0===_&&(_=Date.now()-1);const e=Date.now()-_;return e>4294967295?(_+=4294967295,Date.now()-_):e},utc:function(){return Math.round(Date.now()/1e3)}},b=function(e){return JSON.stringify(e,["message","code"])}},function(e,t,n){"use strict";n.r(t);var r=n(3),i=n(0);let o=0;const a=new Map;function s(){const e=new Date;return"TSignaling "+e.toLocaleTimeString("en-US",{hour12:!1})+"."+function(e){let t;switch(e.toString().length){case 1:t="00"+e;break;case 2:t="0"+e;break;default:t=e}return t}(e.getMilliseconds())+":"}const c={_data:[],_length:0,_visible:!1,arguments2String(e){let t;if(1===e.length)t=s()+e[0];else{t=s();for(let n=0,r=e.length;n<r;n++)Object(i.b)(e[n])?Object(i.d)(e[n])?t+=Object(i.h)(e[n]):t+=JSON.stringify(e[n]):t+=e[n],t+=" "}return t},debug:function(){if(o<=-1){const e=this.arguments2String(arguments);c.record(e,"debug"),r.a.debug(e)}},log:function(){if(o<=0){const e=this.arguments2String(arguments);c.record(e,"log"),r.a.log(e)}},info:function(){if(o<=1){const e=this.arguments2String(arguments);c.record(e,"info"),r.a.info(e)}},warn:function(){if(o<=2){const e=this.arguments2String(arguments);c.record(e,"warn"),r.a.warn(e)}},error:function(){if(o<=3){const e=this.arguments2String(arguments);c.record(e,"error"),r.a.error(e)}},time:function(e){a.set(e,i.a.now())},timeEnd:function(e){if(a.has(e)){const t=i.a.now()-a.get(e);return a.delete(e),t}return r.a.warn(`未找到对应label: ${e}, 请在调用 logger.timeEnd 前，调用 logger.time`),0},setLevel:function(e){e<4&&r.a.log(s()+"set level from "+o+" to "+e),o=e},record:function(e,t){1100===c._length&&(c._data.splice(0,100),c._length=1e3),c._length++,c._data.push(`${e} [${t}] \n`)},getLog:function(){return c._data}};t.default=c},function(e,t,n){"use strict";n.r(t),t.default={MSG_PRIORITY_HIGH:"High",MSG_PRIORITY_NORMAL:"Normal",MSG_PRIORITY_LOW:"Low",MSG_PRIORITY_LOWEST:"Lowest",KICKED_OUT_MULT_ACCOUNT:"multipleAccount",KICKED_OUT_MULT_DEVICE:"multipleDevice",KICKED_OUT_USERSIG_EXPIRED:"userSigExpired",NET_STATE_CONNECTED:"connected",NET_STATE_CONNECTING:"connecting",NET_STATE_DISCONNECTED:"disconnected",ENTER_ROOM_SUCCESS:"JoinedSuccess",ALREADY_IN_ROOM:"AlreadyInGroup"}},function(e,t,n){"use strict";(function(e){let n,r;n="undefined"!=typeof console?console:void 0!==e&&e.console?e.console:"undefined"!=typeof window&&window.console?window.console:{};const i=function(){},o=["assert","clear","count","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];let a=o.length;for(;a--;)r=o[a],console[r]||(n[r]=i);t.a=n}).call(this,n(9))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NEW_INVITATION_RECEIVED:"ts_new_invitation_received",INVITEE_ACCEPTED:"ts_invitee_accepted",INVITEE_REJECTED:"ts_invitee_rejected",INVITATION_CANCELLED:"ts_invitation_cancelled",INVITATION_TIMEOUT:"ts_invitation_timeout",SDK_READY:"ts_im_ready",SDK_NOT_READY:"ts_im_not_ready",TEXT_MESSAGE_RECEIVED:"ts_text_message_received",CUSTOM_MESSAGE_RECEIVED:"ts_custom_message_received",REMOTE_USER_JOIN:"ts_remote_user_join",REMOTE_USER_LEAVE:"ts_remote_user_leave",KICKED_OUT:"ts_kicked_out",NET_STATE_CHANGE:"ts_net_state_change",MESSAGE_SENT_BY_ME:"ts_message_sent_by_me"}},function(e,t,n){"use strict";var r,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorCode=t.BusinessID=t.ActionType=void 0,function(e){e[e.INVITE=1]="INVITE",e[e.CANCEL_INVITE=2]="CANCEL_INVITE",e[e.ACCEPT_INVITE=3]="ACCEPT_INVITE",e[e.REJECT_INVITE=4]="REJECT_INVITE",e[e.INVITE_TIMEOUT=5]="INVITE_TIMEOUT"}(r||(r={})),t.ActionType=r,function(e){e[e.SIGNAL=1]="SIGNAL"}(i||(i={})),t.BusinessID=i,function(e){e[e.ERR_INVALID_PARAMETERS=6017]="ERR_INVALID_PARAMETERS",e[e.ERR_SDK_SIGNALING_INVALID_INVITE_ID=8010]="ERR_SDK_SIGNALING_INVALID_INVITE_ID",e[e.ERR_SDK_SIGNALING_NO_PERMISSION=8011]="ERR_SDK_SIGNALING_NO_PERMISSION"}(o||(o={})),t.ErrorCode=o},function(t,n){t.exports=e},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0});var a=n(5),s=n(8),c=n(4),u=n(2),l=n(1),d=n(10),p=n(11),f=n(12),h=n(13),g=n(6),v=n(15).version,m=n(16),_=function(){function e(e){if(this._outerEmitter=null,this._safetyCallbackFactory=null,this._tim=null,this._imSDKAppID=0,this._userID=null,this._groupID="",this._isHandling=!1,this._inviteInfoMap=new Map,this._isRejectNotifyAll=!1,this.offlineSupport=!0,l.default.info("TSignaling version:"+v),d.default(e.SDKAppID))return l.default.error("TSignaling 请传入 SDKAppID !!!"),null;d.default(e.offlineSupport)||"boolean"!=typeof e.offlineSupport?this.offlineSupport=!0:this.offlineSupport=e.offlineSupport,this._outerEmitter=new s.default,this._outerEmitter._emit=this._outerEmitter.emit,this._outerEmitter.emit=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=[n,{name:e[0],data:e[1]}];this._outerEmitter._emit.apply(this._outerEmitter,o(r))}.bind(this),this._safetyCallbackFactory=new f.default,e.tim?this._tim=e.tim:this._tim=g.create({SDKAppID:e.SDKAppID,scene:"TSignaling"}),e.isRejectNotifyAll&&(this._isRejectNotifyAll=!0),this.messageClient=new m.default({tim:this._tim}),this._imSDKAppID=e.SDKAppID,this._tim.on(g.EVENT.SDK_READY,this._onIMReady.bind(this)),this._tim.on(g.EVENT.SDK_NOT_READY,this._onIMNotReady.bind(this)),this._tim.on(g.EVENT.KICKED_OUT,this._onKickedOut.bind(this)),this._tim.on(g.EVENT.NET_STATE_CHANGE,this._onNetStateChange.bind(this)),this._tim.on(g.EVENT.MESSAGE_RECEIVED,this._onMessageReceived.bind(this))}return e.prototype.setLogLevel=function(e){l.default.setLevel(e),this._tim.setLogLevel(e)},e.prototype.login=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){return l.default.log("TSignaling.login",e),this._userID=e.userID,[2,this._tim.login(e)]}))}))},e.prototype.logout=function(){return r(this,void 0,void 0,(function(){return i(this,(function(e){return l.default.log("TSignaling.logout"),this._userID="",this._inviteInfoMap.clear(),[2,this._tim.logout()]}))}))},e.prototype.on=function(e,t,n){l.default.log("TSignaling.on eventName:"+e),this._outerEmitter.on(e,this._safetyCallbackFactory.defense(e,t,n),n)},e.prototype.off=function(e,t){l.default.log("TSignaling.off eventName:"+e);var n=this._safetyCallbackFactory.find(e,t);null!==n&&(this._outerEmitter.off(e,n),this._safetyCallbackFactory.delete(e,t))},e.prototype.joinGroup=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){return l.default.log("TSignaling.joinGroup groupID:"+e),this._groupID=e,[2,this._tim.joinGroup({groupID:e})]}))}))},e.prototype.quitGroup=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){return l.default.log("TSignaling.quitGroup groupID:"+e),[2,this._tim.quitGroup(e)]}))}))},e.prototype.sendTextMessage=function(e){return r(this,void 0,void 0,(function(){var t;return i(this,(function(n){return t=this._tim.createTextMessage({to:e.to,conversationType:!0===e.groupFlag?g.TYPES.CONV_GROUP:g.TYPES.CONV_C2C,priority:e.priority||g.TYPES.MSG_PRIORITY_NORMAL,payload:{text:e.text}}),[2,this._tim.sendMessage(t)]}))}))},e.prototype.sendCustomMessage=function(e){return r(this,void 0,void 0,(function(){var t;return i(this,(function(n){return t=this._tim.createCustomMessage({to:e.to,conversationType:!0===e.groupFlag?g.TYPES.CONV_GROUP:g.TYPES.CONV_C2C,priority:e.priority||g.TYPES.MSG_PRIORITY_NORMAL,payload:{data:e.data||"",description:e.description||"",extension:e.extension||""}}),[2,this._tim.sendMessage(t)]}))}))},e.prototype.invite=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o,s,c,u;return i(this,(function(i){switch(i.label){case 0:return t=h.generate(),l.default.log("TSignaling.invite",e,"inviteID="+t),d.default(e)||d.default(e.userID)?[2,Promise.reject(new p.default({code:a.ErrorCode.ERR_INVALID_PARAMETERS,message:"userID is invalid"}))]:(n=e.userID,r=e.data,o=e.timeout,s=e.offlinePushInfo,c={businessID:a.BusinessID.SIGNAL,inviteID:t,inviter:this._userID,actionType:a.ActionType.INVITE,inviteeList:[n],data:r,timeout:d.default(o)?0:o,groupID:""},[4,this._sendCustomMessage(n,c,s)]);case 1:return 0===(u=i.sent()).code?(l.default.log("TSignaling.invite ok"),this._inviteInfoMap.set(t,c),this._startTimer(c,!0),[2,{inviteID:t,code:u.code,data:u.data}]):[2,u]}}))}))},e.prototype.inviteSync=function(e,t,n){var r=h.generate();l.default.log("TSignaling.inviteSync",e,"inviteID="+r),(d.default(e)||d.default(e.userID))&&n&&n(a.ErrorCode.ERR_INVALID_PARAMETERS,"userID is missing");var i=e.userID,o=e.data,s=e.timeout,c=e.offlinePushInfo,u={businessID:a.BusinessID.SIGNAL,inviteID:r,inviter:this._userID,actionType:a.ActionType.INVITE,inviteeList:[i],data:o,timeout:d.default(s)?0:s,groupID:""};return this._sendCustomMessageSync(i,u,(function(){l.default.log("TSignaling.inviteSync ok"),t&&t()}),(function(e,t){n&&n(e,t)}),c),r},e.prototype.inviteInGroup=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o,s,c,u,f;return i(this,(function(i){switch(i.label){case 0:return t=h.generate(),l.default.log("TSignaling.inviteInGroup",e,"inviteID="+t),d.default(e)||d.default(e.groupID)?[2,Promise.reject(new p.default({code:a.ErrorCode.ERR_INVALID_PARAMETERS,message:"groupID is invalid"}))]:(n=e.groupID,r=e.inviteeList,o=e.data,s=e.timeout,c=e.offlinePushInfo,u={businessID:a.BusinessID.SIGNAL,inviteID:t,inviter:this._userID,actionType:a.ActionType.INVITE,inviteeList:r,data:o,timeout:d.default(s)?0:s,groupID:n},[4,this._sendCustomMessage(n,u,c)]);case 1:return 0===(f=i.sent()).code?(l.default.log("TSignaling.inviteInGroup ok"),this._inviteInfoMap.set(t,u),this._startTimer(u,!0),[2,{inviteID:t,code:f.code,data:f.data}]):[2,f]}}))}))},e.prototype.inviteInGroupSync=function(e,t,n){var r=h.generate();l.default.log("TSignaling.inviteInGroupSync",e,"inviteID="+r),(d.default(e)||d.default(e.groupID))&&n&&n(a.ErrorCode.ERR_INVALID_PARAMETERS,"groupID is missing");var i=e.groupID,o=e.inviteeList,s=e.data,c=e.timeout,u=e.offlinePushInfo,p={businessID:a.BusinessID.SIGNAL,inviteID:r,inviter:this._userID,actionType:a.ActionType.INVITE,inviteeList:o,data:s,timeout:d.default(c)?0:c,groupID:i};return this._sendCustomMessageSync(i,p,(function(){l.default.log("TSignaling.inviteInGroupSync ok"),t&&t()}),(function(e,t){n&&n(e,t)}),u),r},e.prototype.cancel=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o,s,c,u,f,h;return i(this,(function(i){switch(i.label){case 0:return l.default.log("TSignaling.cancel",e),d.default(e)||d.default(e.inviteID)||!this._inviteInfoMap.has(e.inviteID)||this._isHandling?[2,Promise.reject(new p.default({code:a.ErrorCode.ERR_SDK_SIGNALING_INVALID_INVITE_ID,message:"inviteID is invalid or invitation has been processed"}))]:(this._isHandling=!0,t=e.inviteID,n=e.data,r=this._inviteInfoMap.get(t),o=r.inviter,s=r.groupID,c=r.inviteeList,o!==this._userID?[3,2]:(u={businessID:a.BusinessID.SIGNAL,inviteID:t,inviter:o,actionType:a.ActionType.CANCEL_INVITE,inviteeList:c,data:n,timeout:0,groupID:s},f=s||c[0],[4,this._sendCustomMessage(f,u)]));case 1:return h=i.sent(),this._isHandling=!1,h&&0===h.code?(l.default.log("TSignaling.cancel ok"),this._deleteInviteInfoByID(t),[2,{inviteID:t,code:h.code,data:h.data}]):[2,h];case 2:return l.default.error("TSignaling.cancel unmatched inviter="+o+" and userID="+this._userID),this._isHandling=!1,[2,Promise.reject(new p.default({code:a.ErrorCode.ERR_SDK_SIGNALING_NO_PERMISSION,message:"信令请求无权限，比如取消非自己发起的邀请，接受或则拒绝非发给自己的邀请"}))]}}))}))},e.prototype.accept=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o,s,c,u,f;return i(this,(function(i){switch(i.label){case 0:return l.default.log("TSignaling.accept",e),d.default(e)||d.default(e.inviteID)||!this._inviteInfoMap.has(e.inviteID)||this._isHandling?[2,Promise.reject(new p.default({code:a.ErrorCode.ERR_SDK_SIGNALING_INVALID_INVITE_ID,message:"inviteID is invalid or invitation has been processed"}))]:(this._isHandling=!0,t=e.inviteID,n=e.data,r=this._inviteInfoMap.get(t),o=r.inviter,s=r.groupID,r.inviteeList.includes(this._userID)?(c={businessID:a.BusinessID.SIGNAL,inviteID:t,inviter:o,actionType:a.ActionType.ACCEPT_INVITE,inviteeList:[this._userID],data:n,timeout:0,groupID:s},u=s||o,[4,this._sendCustomMessage(u,c)]):[3,2]);case 1:return f=i.sent(),this._isHandling=!1,f&&0===f.code?(l.default.log("TSignaling.accept ok"),this._updateLocalInviteInfo(c),[2,{inviteID:t,code:f.code,data:f.data}]):[2,f];case 2:return l.default.error("TSignaling.accept inviteeList do not include userID="+this._userID+". inviteID="+t+" groupID="+s),this._isHandling=!1,[2,Promise.reject(new p.default({code:a.ErrorCode.ERR_SDK_SIGNALING_INVALID_INVITE_ID,message:"inviteID is invalid or invitation has been processed"}))]}}))}))},e.prototype.reject=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o,s,c,u,f;return i(this,(function(i){switch(i.label){case 0:return l.default.log("TSignaling.reject",e),d.default(e)||d.default(e.inviteID)||!this._inviteInfoMap.has(e.inviteID)||this._isHandling?[2,Promise.reject(new p.default({code:a.ErrorCode.ERR_SDK_SIGNALING_INVALID_INVITE_ID,message:"inviteID is invalid or invitation has been processed"}))]:(this._isHandling=!0,t=e.inviteID,n=e.data,r=this._inviteInfoMap.get(t),o=r.inviter,s=r.groupID,r.inviteeList.includes(this._userID)?(c={businessID:a.BusinessID.SIGNAL,inviteID:t,inviter:o,actionType:a.ActionType.REJECT_INVITE,inviteeList:[this._userID],data:n,timeout:0,groupID:s},u=s||o,[4,this._sendCustomMessage(u,c)]):[3,2]);case 1:return f=i.sent(),this._isHandling=!1,f&&0===f.code?(l.default.log("TSignaling.reject ok"),this._updateLocalInviteInfo(c),[2,{inviteID:t,code:f.code,data:f.data}]):[2,f];case 2:return l.default.error("TSignaling.reject inviteeList do not include userID="+this._userID+". inviteID="+t+" groupID="+s),this._isHandling=!1,[2,Promise.reject(new p.default({code:a.ErrorCode.ERR_SDK_SIGNALING_INVALID_INVITE_ID,message:"inviteID is invalid or invitation has been processed"}))]}}))}))},e.prototype._onIMReady=function(e){return r(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return l.default.log("TSignaling._onIMReady"),this._outerEmitter.emit(c.default.SDK_READY),!0!==this.offlineSupport?[3,2]:[4,this.messageClient.getHistoricalSignaling()];case 1:e=t.sent(),!d.default(e)&&this._onMessageReceived({data:e}),t.label=2;case 2:return[2]}}))}))},e.prototype._onIMNotReady=function(e){l.default.log("TSignaling.onSdkNotReady"),this._outerEmitter.emit(c.default.SDK_NOT_READY)},e.prototype._onKickedOut=function(e){l.default.log("TSignaling._onKickedOut"),this._outerEmitter.emit(c.default.KICKED_OUT,e.data)},e.prototype._onNetStateChange=function(e){l.default.log("TSignaling._onNetStateChange"),this._outerEmitter.emit(c.default.NET_STATE_CHANGE,e.data)},e.prototype._onMessageReceived=function(e){var t=this;l.default.log("TSignaling._onMessageReceived inviteID="+JSON.stringify(e));var n=e.data,r=n.filter((function(e){return e.type===g.TYPES.MSG_TEXT}));l.default.log("TSignaling._onMessageReceived textMessages"+JSON.stringify(r)),d.default(r)||this._outerEmitter.emit(c.default.TEXT_MESSAGE_RECEIVED,r);var i=n.filter((function(e){return e.type===g.TYPES.MSG_GRP_TIP&&e.payload.operationType===g.TYPES.GRP_TIP_MBR_JOIN}));d.default(i)||this._outerEmitter.emit(c.default.REMOTE_USER_JOIN,i);var o=n.filter((function(e){return e.type===g.TYPES.MSG_GRP_TIP&&e.payload.operationType===g.TYPES.GRP_TIP_MBR_QUIT}));d.default(o)||this._outerEmitter.emit(c.default.REMOTE_USER_LEAVE,o);var s=n.filter((function(e){return e.type===g.TYPES.MSG_CUSTOM})),u=[];s.forEach((function(e){var n,r=e.payload.data,i=!0;try{n=JSON.parse(r)}catch(e){i=!1}if(i){var o=n.businessID,s=n.actionType;if(1===o)switch(s){case a.ActionType.INVITE:t._onNewInvitationReceived(n);break;case a.ActionType.REJECT_INVITE:t._onInviteeRejected(n);break;case a.ActionType.ACCEPT_INVITE:t._onInviteeAccepted(n);break;case a.ActionType.CANCEL_INVITE:t._onInvitationCancelled(n);break;case a.ActionType.INVITE_TIMEOUT:t._onInvitationTimeout(n)}else{if("av_call"===o)return!0;l.default.warn("TSignaling._onMessageReceived unknown businessID="+o),u.push(e)}}else u.push(e)})),d.default(u)||this._outerEmitter.emit(c.default.CUSTOM_MESSAGE_RECEIVED,u)},e.prototype._hasLocalInviteInfo=function(e,t){var n=e.inviteID,r=e.groupID;if(l.default.log("TSignaling._hasLocalInviteInfo inviteID="+n+" groupID="+r),!this._inviteInfoMap.has(n))return!1;var i=this._inviteInfoMap.get(n).inviteeList;return!r||(t?i.length>0:i.length>0&&i.includes(this._userID))},e.prototype._startTimer=function(e,t){var n=this;void 0===t&&(t=!0);var r=e.timeout;if(l.default.log("TSignaling._startTimer timeout="+r+" isInvitator="+t+" timeoutStatus="+(0===r)),0!==r)var i=t?r+5:r,o=1,a=setInterval((function(){var r=n._hasLocalInviteInfo(e,t);l.default.log("TSignaling.setInterval hasInviteInfo="+r),o<i&&r?++o:(r&&n._sendTimeoutNotice(e,t),clearInterval(a))}),1e3)},e.prototype._sendTimeoutNotice=function(e,t){return r(this,void 0,void 0,(function(){var n,r,o,s,u,d,p,f;return i(this,(function(i){switch(i.label){case 0:return n=e.inviteID,r=e.groupID,o=e.inviteeList,s=e.inviter,u=e.data,d=t?r||o[0]:r||s,l.default.log("TSignaling._sendTimeoutNotice inviteID="+n+" to="+d+" isInvitator="+t),p={businessID:a.BusinessID.SIGNAL,inviteID:n,inviter:s,actionType:a.ActionType.INVITE_TIMEOUT,inviteeList:t?o:[this._userID],data:u,timeout:0,groupID:r},[4,this._sendCustomMessage(d,p)];case 1:return(f=i.sent())&&0===f.code&&(this._outerEmitter.emit(c.default.INVITATION_TIMEOUT,{inviter:s,inviteID:n,groupID:r,inviteeList:p.inviteeList,isSelfTimeout:!0}),t?this._deleteInviteInfoByID(n):this._updateLocalInviteInfo(p)),[2,f]}}))}))},e.prototype._onNewInvitationReceived=function(t){var n=t.inviteID,r=t.inviter,i=t.inviteeList,o=t.groupID,a=t.data,s=i.includes(this._userID);l.default.log("TSignaling._onNewInvitationReceived",t,"myselfIncluded="+s);var c=JSON.parse(a),u=o&&d.default(c.room_id);d.default(c.room_id)&&c.call_end>0||u?this._outerEmitter.emit(e.EVENT.NEW_INVITATION_RECEIVED,{inviteID:n,inviter:r,groupID:o,inviteeList:i,data:t.data||""}):(o&&s||!o)&&(this._inviteInfoMap.set(n,t),this._outerEmitter.emit(e.EVENT.NEW_INVITATION_RECEIVED,{inviteID:n,inviter:r,groupID:o,inviteeList:i,data:t.data||""}),this._startTimer(t,!1))},e.prototype._onInviteeRejected=function(e){var t=e.inviteID,n=e.inviter,r=e.groupID,i=this._inviteInfoMap.has(t);l.default.log("TSignaling._onInviteeRejected inviteID="+t+" hasInviteID="+i+" inviter="+n+" groupID="+r+" _isRejectNotifyAll="+this._isRejectNotifyAll),(r&&i||!r||this._isRejectNotifyAll)&&(this._updateLocalInviteInfo(e),this._outerEmitter.emit(c.default.INVITEE_REJECTED,{inviteID:t,inviter:n,groupID:r,invitee:e.inviteeList[0],data:e.data||""}))},e.prototype._onInviteeAccepted=function(e){var t=e.inviteID,n=e.inviter,r=e.groupID,i=this._inviteInfoMap.has(t);l.default.log("TSignaling._onInviteeAccepted inviteID="+t+" hasInviteID="+i+" inviter="+n+" groupID="+r),(r&&i||!r)&&(this._updateLocalInviteInfo(e),this._outerEmitter.emit(c.default.INVITEE_ACCEPTED,{inviteID:t,inviter:n,groupID:r,invitee:e.inviteeList[0],data:e.data||""}))},e.prototype._onInvitationCancelled=function(e){var t=e.inviteID,n=e.inviter,r=e.groupID,i=this._inviteInfoMap.has(t);l.default.log("TSignaling._onInvitationCancelled inviteID="+t+" hasInviteID="+i+" inviter="+n+" groupID="+r),(r&&i||!r)&&(this._deleteInviteInfoByID(t),this._outerEmitter.emit(c.default.INVITATION_CANCELLED,{inviteID:t,inviter:n,groupID:r,data:e.data||""}))},e.prototype._onInvitationTimeout=function(e){var t=e.inviteID,n=e.inviter,r=e.groupID,i=e.data,o=this._inviteInfoMap.has(t);l.default.log("TSignaling._onInvitationTimeout inviteID="+t+" hasInviteID="+o+" inviter="+n+" groupID="+r),l.default.log("TSignaling._onInvitationTimeout data="+e.data);var a=JSON.parse(i),s=r&&(0===a.call_end||d.default(a.room_id));d.default(a.room_id)&&a.call_end>0||s||(r&&o||!r)&&(this._updateLocalInviteInfo(e),this._outerEmitter.emit(c.default.INVITATION_TIMEOUT,{inviteID:t,inviter:n,groupID:r,inviteeList:e.inviteeList,isSelfTimeout:!1}))},e.prototype._updateLocalInviteInfo=function(e){var t=e.inviteID,n=e.inviter,r=e.inviteeList,i=e.groupID;if(l.default.log("TSignaling._updateLocalInviteInfo inviteID="+t+" inviter="+n+" groupID="+i),i){if(this._inviteInfoMap.has(t)){var o=r[0],a=this._inviteInfoMap.get(t).inviteeList;a.includes(o)&&(a.splice(a.indexOf(o),1),l.default.log("TSignaling._updateLocalInviteInfo remove "+o+" from localInviteeList. "+a.length+" invitees left")),0===a.length&&this._deleteInviteInfoByID(t)}}else this._deleteInviteInfoByID(t)},e.prototype._deleteInviteInfoByID=function(e){this._inviteInfoMap.has(e)&&(l.default.log("TSignaling._deleteInviteInfoByID remove "+e+" from inviteInfoMap."),this._inviteInfoMap.delete(e))},e.prototype._sendCustomMessage=function(e,t,n){var o,s,u,d;return r(this,void 0,void 0,(function(){var r,p,f,h,v,m;return i(this,(function(i){switch(i.label){case 0:return r=t.groupID,p=this._tim.createCustomMessage({to:e,conversationType:r?g.TYPES.CONV_GROUP:g.TYPES.CONV_C2C,priority:g.TYPES.MSG_PRIORITY_HIGH,payload:{data:JSON.stringify(t)}}),t.actionType!==a.ActionType.INVITE?[3,2]:(h={title:(f=n||{}).title||"",description:f.description||"您有一个通话请求",androidOPPOChannelID:f.androidOPPOChannelID||"",extension:this._handleOfflineInfo(t,f.extension||"")},l.default.log("TSignaling.offlinePushInfo "+JSON.stringify(h)),[4,this._tim.sendMessage(p,{offlinePushInfo:{title:h.title,description:h.description,androidOPPOChannelID:h.androidOPPOChannelID,extension:h.extension}})]);case 1:return v=i.sent(),(null===(o=null==v?void 0:v.data)||void 0===o?void 0:o.message)&&this._outerEmitter.emit(c.default.MESSAGE_SENT_BY_ME,null===(s=null==v?void 0:v.data)||void 0===s?void 0:s.message),[2,v];case 2:return[4,this._tim.sendMessage(p)];case 3:return m=i.sent(),(null===(u=null==m?void 0:m.data)||void 0===u?void 0:u.message)&&this._outerEmitter.emit(c.default.MESSAGE_SENT_BY_ME,null===(d=null==m?void 0:m.data)||void 0===d?void 0:d.message),[2,m]}}))}))},e.prototype._sendCustomMessageSync=function(e,t,n,o,a){return r(this,void 0,void 0,(function(){var r;return i(this,(function(i){switch(i.label){case 0:return[4,this._sendCustomMessage(e,t,a)];case 1:return 0===(r=i.sent()).code?(this._inviteInfoMap.set(t.inviteID,t),this._startTimer(t,!0),n()):o(r.code,r.message||""),[2]}}))}))},e.prototype._handleOfflineInfo=function(e,t){var n=JSON.parse(e.data),r={action:e.actionType,call_type:n.call_type,room_id:n.room_id,call_id:e.inviteID,timeout:n.timeout,version:4,invited_list:e.inviteeList};e.groupID&&(r.group_id=e.groupID);var i={entity:{action:2,chatType:e.groupID?2:1,content:JSON.stringify(r),sendTime:parseInt(Date.now()/1e3+""),sender:e.inviter,version:1},userData:t||""},o=JSON.stringify(i);return l.default.log("TSignaling._handleOfflineInfo "+o),o},e.EVENT=c.default,e.TYPES=u.default,e}();t.default=_},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));const r=Function.prototype.apply,i=new WeakMap;function o(e){return i.has(e)||i.set(e,{}),i.get(e)}class a{constructor(e=null,t=console){const n=o(this);return n._events=new Set,n._callbacks={},n._console=t,n._maxListeners=null===e?null:parseInt(e,10),this}_addCallback(e,t,n,r){return this._getCallbacks(e).push({callback:t,context:n,weight:r}),this._getCallbacks(e).sort((e,t)=>e.weight>t.weight),this}_getCallbacks(e){return o(this)._callbacks[e]}_getCallbackIndex(e,t){return this._has(e)?this._getCallbacks(e).findIndex(e=>e.callback===t):null}_achieveMaxListener(e){return null!==o(this)._maxListeners&&o(this)._maxListeners<=this.listenersNumber(e)}_callbackIsExists(e,t,n){const r=this._getCallbackIndex(e,t),i=-1!==r?this._getCallbacks(e)[r]:void 0;return-1!==r&&i&&i.context===n}_has(e){return o(this)._events.has(e)}on(e,t,n=null,r=1){const i=o(this);if("function"!=typeof t)throw new TypeError(t+" is not a function");return this._has(e)?(this._achieveMaxListener(e)&&i._console.warn(`Max listeners (${i._maxListeners}) for event "${e}" is reached!`),this._callbackIsExists(...arguments)&&i._console.warn(`Event "${e}" already has the callback ${t}.`)):(i._events.add(e),i._callbacks[e]=[]),this._addCallback(...arguments),this}once(e,t,n=null,i=1){const o=(...i)=>(this.off(e,o),r.call(t,n,i));return this.on(e,o,n,i)}off(e,t=null){const n=o(this);let r;return this._has(e)&&(null===t?(n._events.delete(e),n._callbacks[e]=null):(r=this._getCallbackIndex(e,t),-1!==r&&(n._callbacks[e].splice(r,1),this.off(...arguments)))),this}emit(e,...t){return this._has(e)&&this._getCallbacks(e).forEach(e=>r.call(e.callback,e.context,t)),this}clear(){const e=o(this);return e._events.clear(),e._callbacks={},this}listenersNumber(e){return this._has(e)?this._getCallbacks(e).length:null}}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var r=n(0);const i=Object.prototype.hasOwnProperty;t.default=function(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return 0===e;if("string"==typeof e)return 0===e.length;if("function"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return""===e.message;if(Object(r.f)(e)){for(const t in e)if(i.call(e,t))return!1;return!0}return!!(Object(r.e)(e)||Object(r.g)(e)||Object(r.c)(e))&&0===e.size}},function(e,t,n){"use strict";n.r(t);class r extends Error{constructor(e){super(),this.code=e.code,this.message=e.message,this.data=e.data||{}}}t.default=r},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(4),o=n.n(i);t.default=class{constructor(){this._funcMap=new Map}defense(e,t,n){if("string"!=typeof e)return null;if(0===e.length)return null;if("function"!=typeof t)return null;if(this._funcMap.has(e)&&this._funcMap.get(e).has(t))return this._funcMap.get(e).get(t);this._funcMap.has(e)||this._funcMap.set(e,new Map);let r=null;return this._funcMap.get(e).has(t)?r=this._funcMap.get(e).get(t):(r=this._pack(e,t,n),this._funcMap.get(e).set(t,r)),r}defenseOnce(e,t,n){return"function"!=typeof t?null:this._pack(e,t,n)}find(e,t){return"string"!=typeof e||0===e.length||"function"!=typeof t?null:this._funcMap.has(e)?this._funcMap.get(e).has(t)?this._funcMap.get(e).get(t):(r.default.log(`SafetyCallback.find: 找不到 func —— ${e}/${""!==t.name?t.name:"[anonymous]"}`),null):(r.default.log(`SafetyCallback.find: 找不到 eventName-${e} 对应的 func`),null)}delete(e,t){return"function"==typeof t&&!!this._funcMap.has(e)&&!!this._funcMap.get(e).has(t)&&(this._funcMap.get(e).delete(t),0===this._funcMap.get(e).size&&this._funcMap.delete(e),!0)}_pack(e,t,n){return function(){try{t.apply(n,Array.from(arguments))}catch(t){const i=Object.values(o.a).indexOf(e),a=Object.keys(o.a)[i];r.default.error(`接入侧事件 EVENT.${a} 对应的回调函数逻辑存在问题，请检查！`,t)}}}}},function(e,t,n){
/**
 * UUID.js - RFC-compliant UUID Generator for JavaScript
 *
 * @file
 * @author  LiosK
 * @version v4.2.13
 * @license Apache License 2.0: Copyright (c) 2010-2023 LiosK
 */
var r;r=function(t){"use strict";function r(){var e=i._getRandomInt;this.timestamp=0,this.tick=0,this.sequence=e(14),this.node=1099511627776*(1|e(8))+e(40)}function i(){}return i.generate=function(){var e=i._getRandomInt,t=i._hexAligner;return t(e(32),8)+"-"+t(e(16),4)+"-"+t(16384|e(12),4)+"-"+t(32768|e(14),4)+"-"+t(e(48),12)},i._getRandomInt=function(e){if(e<0||e>53)return NaN;var t=0|1073741824*Math.random();return e>30?t+1073741824*(0|Math.random()*(1<<e-30)):t>>>30-e},i._hexAligner=function(e,t){for(var n=e.toString(16),r=t-n.length,i="0";r>0;r>>>=1,i+=i)1&r&&(n=i+n);return n},i.overwrittenUUID=t,function(){var e=i._getRandomInt;i.useMathRandom=function(){i._getRandomInt=e};var t=null,r=e;"undefined"!=typeof window&&(t=window.crypto||window.msCrypto)?t.getRandomValues&&"undefined"!=typeof Uint32Array&&(r=function(e){if(e<0||e>53)return NaN;var n=new Uint32Array(e>32?2:1);return n=t.getRandomValues(n)||n,e>32?n[0]+4294967296*(n[1]>>>64-e):n[0]>>>32-e}):(t=n(14))&&t.randomBytes&&(r=function(e){if(e<0||e>53)return NaN;var n=t.randomBytes(e>32?8:4),r=n.readUInt32BE(0);return e>32?r+4294967296*(n.readUInt32BE(4)>>>64-e):r>>>32-e}),i._getRandomInt=r}(),i.FIELD_NAMES=["timeLow","timeMid","timeHiAndVersion","clockSeqHiAndReserved","clockSeqLow","node"],i.FIELD_SIZES=[32,16,16,8,8,48],i.genV4=function(){var e=i._getRandomInt;return(new i)._init(e(32),e(16),16384|e(12),128|e(6),e(8),e(48))},i.parse=function(e){var t;if(t=/^\s*(urn:uuid:|\{)?([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{2})([0-9a-f]{2})-([0-9a-f]{12})(\})?\s*$/i.exec(e)){var n=t[1]||"",r=t[8]||"";if(n+r===""||"{"===n&&"}"===r||"urn:uuid:"===n.toLowerCase()&&""===r)return(new i)._init(parseInt(t[2],16),parseInt(t[3],16),parseInt(t[4],16),parseInt(t[5],16),parseInt(t[6],16),parseInt(t[7],16))}return null},i.prototype._init=function(){var e=i.FIELD_NAMES,t=i.FIELD_SIZES,n=i._binAligner,r=i._hexAligner;this.intFields=new Array(6),this.bitFields=new Array(6),this.hexFields=new Array(6);for(var o=0;o<6;o++){var a=parseInt(arguments[o]||0);this.intFields[o]=this.intFields[e[o]]=a,this.bitFields[o]=this.bitFields[e[o]]=n(a,t[o]),this.hexFields[o]=this.hexFields[e[o]]=r(a,t[o]>>>2)}return this.version=this.intFields.timeHiAndVersion>>>12&15,this.bitString=this.bitFields.join(""),this.hexNoDelim=this.hexFields.join(""),this.hexString=this.hexFields[0]+"-"+this.hexFields[1]+"-"+this.hexFields[2]+"-"+this.hexFields[3]+this.hexFields[4]+"-"+this.hexFields[5],this.urn="urn:uuid:"+this.hexString,this},i._binAligner=function(e,t){for(var n=e.toString(2),r=t-n.length,i="0";r>0;r>>>=1,i+=i)1&r&&(n=i+n);return n},i.prototype.toString=function(){return this.hexString},i.prototype.equals=function(e){if(!(e instanceof i))return!1;for(var t=0;t<6;t++)if(this.intFields[t]!==e.intFields[t])return!1;return!0},i.NIL=(new i)._init(0,0,0,0,0,0),i.genV1=function(){null==i._state&&i.resetState();var e=(new Date).getTime(),t=i._state;e!=t.timestamp?(e<t.timestamp&&t.sequence++,t.timestamp=e,t.tick=i._getRandomInt(12)):t.tick<9992?t.tick+=1+i._getRandomInt(3):t.sequence++;var n=i._getTimeFieldValues(t.timestamp),r=n.low+t.tick,o=4095&n.hi|4096;t.sequence&=16383;var a=t.sequence>>>8|128,s=255&t.sequence;return(new i)._init(r,n.mid,o,a,s,t.node)},i.resetState=function(){i._state=new r},i._tsRatio=1/4,i._state=null,i._getTimeFieldValues=function(e){var t=e-Date.UTC(1582,9,15),n=t/4294967296*1e4&268435455;return{low:1e4*(268435455&t)%4294967296,mid:65535&n,hi:n>>>16,timestamp:t}},i.genV6=function(){null==i._state&&i.resetState();var e=(new Date).getTime(),t=i._state;e!=t.timestamp?(e<t.timestamp&&t.sequence++,t.timestamp=e,t.tick=i._getRandomInt(12)):t.tick<9992?t.tick+=1+i._getRandomInt(3):t.sequence++;var n=t.timestamp-Date.UTC(1582,9,15),r=Math.floor(n/268435456*1e4)%4294967296,o=(1e4*(268435455&n)&268435455)+t.tick,a=o>>>12,s=4095&o|24576;t.sequence&=16383;var c=t.sequence>>>8|128,u=255&t.sequence;return(new i)._init(r,a,s,c,u,t.node)},"object"==typeof e.exports&&(e.exports=i),i}(r)},function(e,t){},function(e){e.exports=JSON.parse('{"name":"tsignaling","version":"1.0.5","description":"腾讯云 Web 信令 SDK","main":"./src/index.ts","scripts":{"lint":"./node_modules/.bin/eslint ./src","fix":"./node_modules/.bin/eslint --fix ./src","ts2js":"tsc src/index.ts --outDir build/ts2js","doc":"npm run ts2js && npm run doc:clean && npm run doc:build","doc:build":"./node_modules/.bin/jsdoc -c build/jsdoc/jsdoc.json && node ./build/jsdoc/fix-doc.js","doc:clean":"node ./build/jsdoc/clean-doc.js","build:wx":"cross-env NODE_ENV=wx webpack --config webpack.prod.config.js","build:web":"node node_modules/cross-env/src/bin/cross-env.js NODE_ENV=web node_modules/webpack/bin/webpack.js --config webpack.prod.config.js","build:package":"node build/package-bundle.js","prerelease":"npm run changelog && npm run build:web && npm run build:wx && npm run build:package && node ./build/copy.js","start:wx":"cross-env NODE_ENV=wx  webpack-dev-server --config webpack.config.js","start:web":"node node_modules/cross-env/src/bin/cross-env.js NODE_ENV=web node_modules/webpack-dev-server/bin/webpack-dev-server.js --config webpack.dev.config.js","build_withcopy":"npm run build:web && cp dist/npm/tsignaling-js.js ../TIM-demo-web/node_modules/tsignaling/tsignaling-js.js","build_withcopy:mp":"npm run build:wx && cp dist/npm/tsignaling-wx.js ../TIM-demo-mini/static/component/TRTCCalling/utils/tsignaling-wx.js","changelog":"cp CHANGELOG.md build/jsdoc/tutorials/CHANGELOG.md"},"husky":{"hooks":{"pre-commit":"npm run lint"}},"lint-staged":{"*.{.ts,.tsx}":["eslint","git add"]},"keywords":["腾讯云","即时通信","信令"],"author":"","license":"ISC","devDependencies":{"conventional-changelog-cli":"^2.1.1","cross-env":"^7.0.2","fs-extra":"^9.0.1","html-webpack-plugin":"^4.3.0","ts-loader":"^7.0.5","typescript":"^3.9.9","webpack":"^4.43.0","@types/node":"18.11.9","webpack-cli":"^3.3.11","webpack-dev-server":"^3.11.0"},"dependencies":{"@typescript-eslint/eslint-plugin":"^4.22.1","@typescript-eslint/parser":"^4.22.1","EventEmitter":"^1.0.0","docdash-blue":"^1.1.3","eslint":"^5.16.0","eslint-config-google":"^0.13.0","eslint-plugin-classes":"^0.1.1","jsdoc":"^3.6.4","jsdoc-plugin-typescript":"^2.0.5","pretty":"^2.0.0","replace":"^1.2.0","uuidjs":"^4.2.5"}}')},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(5),c=n(6),u=function(){function e(){Object.defineProperty(this,"currentTime",{get:function(){return(new Date).getTime()}})}return e.prototype.doFilter=function(e){return o(this,void 0,void 0,(function(){return a(this,(function(e){return[2]}))}))},e}(),l=function(){function e(){this.filterList=[],this.result=[]}return e.prototype.register=function(e){this.filterList.push(e)},e.prototype.run=function(e){return void 0===e&&(e=[]),o(this,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:this.result=e,t=0,r.label=1;case 1:return t<this.filterList.length?(n=this,[4,this.filterList[t].doFilter(this.result)]):[3,4];case 2:n.result=r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2,this.result]}}))}))},e}(),d=function(e){function t(t){var n=e.call(this)||this;return n.tim=null,n.expiredTime=3e4,n.maxCircleLength=20,n.tim=t.tim,n}return i(t,e),t.prototype.doFilter=function(e){return o(this,void 0,void 0,(function(){var e,t,n,r,i,o,s,c;return a(this,(function(a){switch(a.label){case 0:return e=[],[4,this.tim.getConversationList()];case 1:if(t=a.sent(),n=t.code,r=t.data,i=r.conversationList.length,o=i<=20?i:this.maxCircleLength,0===n)for(s=0;s<o;s++)(c=r.conversationList[s]).unreadCount>0&&c.lastMessage.lastTime&&1e3*c.lastMessage.lastTime>this.currentTime-this.expiredTime&&e.push(c);return[2,e]}}))}))},t}(u),p=function(e){function t(t){var n=e.call(this)||this;return n.tim=null,n.expiredTime=3e4,n.tim=t.tim,n}return i(t,e),t.prototype.doFilter=function(e){return o(this,void 0,void 0,(function(){var t,n,r,i,o,s,u,l,d=this;return a(this,(function(a){switch(a.label){case 0:t=[],n=0,a.label=1;case 1:return n<e.length?(r=e[n],i=r.conversationID,o=r.unreadCount,[4,this.tim.getMessageList({conversationID:i,count:o<=15?o:15})]):[3,4];case 2:s=a.sent(),u=s.code,l=s.data,0===u&&t.push(l.messageList.filter((function(e){return e.type===c.TYPES.MSG_CUSTOM&&e.time&&1e3*e.time>d.currentTime-d.expiredTime}))),a.label=3;case 3:return n++,[3,1];case 4:return[2,t.flat().sort((function(e,t){return e.time-t.time}))]}}))}))},t}(u),f=function(e){function t(){return e.call(this)||this}return i(t,e),t.prototype.doFilter=function(e){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,e.filter((function(e){var t=!1;try{t=JSON.parse(e.payload.data).businessID===s.BusinessID.SIGNAL}catch(e){}return t}))]}))}))},t}(u),h=function(e){function t(){return e.call(this)||this}return i(t,e),t.prototype.doFilter=function(e){return o(this,void 0,void 0,(function(){var t,n,r;return a(this,(function(i){return Array.isArray(e)?0===e.length?[2,[]]:(t=new Map,e.forEach((function(e,n){var r=JSON.parse(e.payload.data),i=r.inviteID,o=r.actionType;!t.has(i)||t.get(i).actionType!==s.ActionType.INVITE||o!==s.ActionType.CANCEL_INVITE&&o!==s.ActionType.ACCEPT_INVITE&&o!==s.ActionType.REJECT_INVITE&&o!==s.ActionType.INVITE_TIMEOUT?t.set(i,{index:n,actionType:o}):t.delete(i)})),n=[],t.forEach((function(e){e.actionType===s.ActionType.INVITE&&n.push(e.index)})),0===n.length?[2,[]]:(r=[],n.sort((function(e,t){return e-t})).forEach((function(t){r.push(e[t])})),[2,r])):[2,[]]}))}))},t}(u),g=function(){function e(e){this.tim=null;var t=e.tim;this.tim=t}return e.prototype.getHistoricalSignaling=function(){return o(this,void 0,void 0,(function(){var e;return a(this,(function(t){return(e=new l).register(new d({tim:this.tim})),e.register(new p({tim:this.tim})),e.register(new f),e.register(new h),[2,e.run()]}))}))},e}();t.default=g}]).default}))},b50d:function(e,t,n){"use strict";var r=n("c532"),i=n("467f"),o=n("7aac"),a=n("30b5"),s=n("83b9"),c=n("c345"),u=n("3934"),l=n("2d83"),d=n("2444"),p=n("7a77");e.exports=function(e){return new Promise((function(t,n){var f,h=e.data,g=e.headers,v=e.responseType;function m(){e.cancelToken&&e.cancelToken.unsubscribe(f),e.signal&&e.signal.removeEventListener("abort",f)}r.isFormData(h)&&delete g["Content-Type"];var _=new XMLHttpRequest;if(e.auth){var y=e.auth.username||"",b=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";g.Authorization="Basic "+btoa(y+":"+b)}var I=s(e.baseURL,e.url);function T(){if(_){var r="getAllResponseHeaders"in _?c(_.getAllResponseHeaders()):null,o=v&&"text"!==v&&"json"!==v?_.response:_.responseText,a={data:o,status:_.status,statusText:_.statusText,headers:r,config:e,request:_};i((function(e){t(e),m()}),(function(e){n(e),m()}),a),_=null}}if(_.open(e.method.toUpperCase(),a(I,e.params,e.paramsSerializer),!0),_.timeout=e.timeout,"onloadend"in _?_.onloadend=T:_.onreadystatechange=function(){_&&4===_.readyState&&(0!==_.status||_.responseURL&&0===_.responseURL.indexOf("file:"))&&setTimeout(T)},_.onabort=function(){_&&(n(l("Request aborted",e,"ECONNABORTED",_)),_=null)},_.onerror=function(){n(l("Network Error",e,null,_)),_=null},_.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||d.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",_)),_=null},r.isStandardBrowserEnv()){var C=(e.withCredentials||u(I))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;C&&(g[e.xsrfHeaderName]=C)}"setRequestHeader"in _&&r.forEach(g,(function(e,t){"undefined"===typeof h&&"content-type"===t.toLowerCase()?delete g[t]:_.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(_.withCredentials=!!e.withCredentials),v&&"json"!==v&&(_.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&_.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&_.upload&&_.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(f=function(e){_&&(n(!e||e&&e.type?new p("canceled"):e),_.abort(),_=null)},e.cancelToken&&e.cancelToken.subscribe(f),e.signal&&(e.signal.aborted?f():e.signal.addEventListener("abort",f))),h||(h=null),_.send(h)}))}},b575:function(e,t,n){var r,i,o,a,s,c,u,l,d=n("da84"),p=n("0366"),f=n("06cf").f,h=n("2cf4").set,g=n("1cdc"),v=n("d4c3"),m=n("a4b4"),_=n("605d"),y=d.MutationObserver||d.WebKitMutationObserver,b=d.document,I=d.process,T=d.Promise,C=f(d,"queueMicrotask"),S=C&&C.value;S||(r=function(){var e,t;_&&(e=I.domain)&&e.exit();while(i){t=i.fn,i=i.next;try{t()}catch(n){throw i?a():o=void 0,n}}o=void 0,e&&e.enter()},g||_||m||!y||!b?!v&&T&&T.resolve?(u=T.resolve(void 0),u.constructor=T,l=p(u.then,u),a=function(){l(r)}):_?a=function(){I.nextTick(r)}:(h=p(h,d),a=function(){h(r)}):(s=!0,c=b.createTextNode(""),new y(r).observe(c,{characterData:!0}),a=function(){c.data=s=!s})),e.exports=S||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,a()),o=t}},b622:function(e,t,n){var r=n("da84"),i=n("5692"),o=n("1a2d"),a=n("90e3"),s=n("4930"),c=n("fdbf"),u=i("wks"),l=r.Symbol,d=l&&l["for"],p=c?l:l&&l.withoutSetter||a;e.exports=function(e){if(!o(u,e)||!s&&"string"!=typeof u[e]){var t="Symbol."+e;s&&o(l,e)?u[e]=l[e]:u[e]=c&&d?d(t):p(t)}return u[e]}},b64b:function(e,t,n){var r=n("23e7"),i=n("7b0b"),o=n("df75"),a=n("d039"),s=a((function(){o(1)}));r({target:"Object",stat:!0,forced:s},{keys:function(e){return o(i(e))}})},b650:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f344"),s=n("f691"),c=n("4a89"),u=n("b1d2"),l=n("b070"),d=n("ad06"),p=n("543e"),[f,h]=Object(o["a"])("button"),g=Object(a["a"])({},l["b"],{tag:Object(s["e"])("button"),text:String,icon:String,type:Object(s["e"])("default"),size:Object(s["e"])("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:Object(s["e"])("button"),loadingSize:s["f"],loadingText:String,loadingType:String,iconPosition:Object(s["e"])("left")}),v=Object(i["n"])({name:f,props:g,emits:["click"],setup(e,t){var{emit:n,slots:r}=t,o=Object(l["c"])(),a=()=>r.loading?r.loading():Object(i["m"])(p["a"],{size:e.loadingSize,type:e.loadingType,class:h("loading")},null),s=()=>e.loading?a():r.icon?Object(i["m"])("div",{class:h("icon")},[r.icon()]):e.icon?Object(i["m"])(d["a"],{name:e.icon,class:h("icon"),classPrefix:e.iconPrefix},null):void 0,f=()=>{var t;if(t=e.loading?e.loadingText:r.default?r.default():e.text,t)return Object(i["m"])("span",{class:h("text")},[t])},g=()=>{var{color:t,plain:n}=e;if(t){var r={color:n?t:"white"};return n||(r.background=t),t.includes("gradient")?r.border=0:r.borderColor=t,r}},v=t=>{e.loading?Object(c["e"])(t):e.disabled||(n("click",t),o())};return()=>{var{tag:t,type:n,size:r,block:o,round:a,plain:c,square:l,loading:d,disabled:p,hairline:m,nativeType:_,iconPosition:y}=e,b=[h([n,r,{plain:c,block:o,round:a,square:l,loading:d,disabled:p,hairline:m}]),{[u["d"]]:m}];return Object(i["m"])(t,{type:_,class:b,style:g(),disabled:p,onClick:v},{default:()=>[Object(i["m"])("div",{class:h("content")},["left"===y&&s(),f(),"right"===y&&s()])]})}}}),m=Object(r["a"])(v);t["b"]=m},b727:function(e,t,n){var r=n("0366"),i=n("e330"),o=n("44ad"),a=n("7b0b"),s=n("07fa"),c=n("65f0"),u=i([].push),l=function(e){var t=1==e,n=2==e,i=3==e,l=4==e,d=6==e,p=7==e,f=5==e||d;return function(h,g,v,m){for(var _,y,b=a(h),I=o(b),T=r(g,v),C=s(I),S=0,E=m||c,M=t?E(h,C):n||p?E(h,0):void 0;C>S;S++)if((f||S in I)&&(_=I[S],y=T(_,S,b),e))if(t)M[S]=y;else if(y)switch(e){case 3:return!0;case 5:return _;case 6:return S;case 2:u(M,_)}else switch(e){case 4:return!1;case 7:u(M,_)}return d?-1:i||l?l:M}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},b807:function(e,t,n){},b85c:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("277d");var r=n("06c5");function i(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Object(r["a"])(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n["return"]||n["return"]()}finally{if(c)throw a}}}}},bb2f:function(e,t,n){var r=n("d039");e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bc1b:function(e,t,n){},bc3a:function(e,t,n){e.exports=n("cee4")},bcd3:function(e,t,n){},bda7:function(e,t,n){"use strict";n("68ef"),n("cb51"),n("ae9e"),n("8270"),n("b807")},be39:function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("e3b3"),n("bc1b"),n("3b42")},be7f:function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("1a04"),n("1146")},be81:function(e,t,n){},be93:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("7a23"),i=n("fe7e"),o=n("f691"),a=n("8405"),s=n("b1d2"),c=n("7f9b"),[u,l]=Object(i["a"])("grid"),d={square:Boolean,center:o["g"],border:o["g"],gutter:o["f"],reverse:Boolean,iconSize:o["f"],direction:String,clickable:Boolean,columnNum:Object(o["c"])(4)},p=Symbol(u);t["b"]=Object(r["n"])({name:u,props:d,setup(e,t){var{slots:n}=t,{linkChildren:i}=Object(c["f"])(p);return i({props:e}),()=>Object(r["m"])("div",{style:{paddingLeft:Object(a["a"])(e.gutter)},class:[l(),{[s["e"]]:e.border&&!e.gutter}]},[null==n.default?void 0:n.default()])}})},bee2:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("7a82");function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},bf60:function(e,t,n){},c04e:function(e,t,n){var r=n("da84"),i=n("c65b"),o=n("861d"),a=n("d9b5"),s=n("dc4a"),c=n("485a"),u=n("b622"),l=r.TypeError,d=u("toPrimitive");e.exports=function(e,t){if(!o(e)||a(e))return e;var n,r=s(e,d);if(r){if(void 0===t&&(t="default"),n=i(r,e,t),!o(n)||a(n))return n;throw l("Can't convert object to primitive value")}return void 0===t&&(t="number"),c(e,t)}},c0b6:function(e,t,n){var r=n("23e7"),i=n("0538");r({target:"Function",proto:!0},{bind:i})},c0c2:function(e,t,n){},c194:function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("1a04")},c199:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("8405");function i(e){return e.install=t=>{var{name:n}=e;t.component(n,e),t.component(Object(r["b"])("-"+n),e)},e}},c345:function(e,t,n){"use strict";var r=n("c532"),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},c36e:function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("8da3"),c=n("4a89"),u=n("8405"),l=n("7e3e"),d=n("7f9b"),p=n("cdd8"),f=n("4eda"),[h,g]=Object(o["a"])("swipe-cell"),v={name:Object(a["c"])(""),disabled:Boolean,leftWidth:a["f"],rightWidth:a["f"],beforeClose:Function,stopPropagation:Boolean},m=Object(i["n"])({name:h,props:v,emits:["open","close","click"],setup(e,t){var n,r,o,{emit:a,slots:h}=t,v=Object(i["K"])(),m=Object(i["K"])(),_=Object(i["K"])(),y=Object(i["J"])({offset:0,dragging:!1}),b=Object(p["a"])(),I=e=>e.value?Object(d["m"])(e).width:0,T=Object(i["e"])(()=>Object(s["b"])(e.leftWidth)?+e.leftWidth:I(m)),C=Object(i["e"])(()=>Object(s["b"])(e.rightWidth)?+e.rightWidth:I(_)),S=t=>{n=!0,y.offset="left"===t?T.value:-C.value,a("open",{name:e.name,position:t})},E=t=>{y.offset=0,n&&(n=!1,a("close",{name:e.name,position:t}))},M=e=>{var t=Math.abs(y.offset),r=.15,i=n?1-r:r,o="left"===e?T.value:C.value;o&&t>o*i?S(e):E(e)},k=t=>{e.disabled||(o=y.offset,b.start(t))},w=t=>{if(!e.disabled){var{deltaX:i}=b;if(b.move(t),b.isHorizontal()){r=!0,y.dragging=!0;var a=!n||i.value*o<0;a&&Object(c["e"])(t,e.stopPropagation),y.offset=Object(u["c"])(i.value+o,-C.value,T.value)}}},O=()=>{y.dragging&&(y.dragging=!1,M(y.offset>0?"left":"right"),setTimeout(()=>{r=!1},0))},D=function(t){void 0===t&&(t="outside"),a("click",t),n&&!r&&Object(l["a"])(e.beforeClose,{args:[{name:e.name,position:t}],done:()=>E(t)})},A=(e,t)=>n=>{t&&n.stopPropagation(),D(e)},R=(e,t)=>{var n=h[e];if(n)return Object(i["m"])("div",{ref:t,class:g(e),onClick:A(e,!0)},[n()])};return Object(f["a"])({open:S,close:E}),Object(d["g"])(v,()=>D("outside"),{eventName:"touchstart"}),()=>{var e={transform:"translate3d("+y.offset+"px, 0, 0)",transitionDuration:y.dragging?"0s":".6s"};return Object(i["m"])("div",{ref:v,class:g(),onClick:A("cell"),onTouchstart:k,onTouchmove:w,onTouchend:O,onTouchcancel:O},[Object(i["m"])("div",{class:g("wrapper"),style:e},[R("left",m),null==h.default?void 0:h.default(),R("right",_)])])}}}),_=Object(r["a"])(m);t["a"]=_},c3a6:function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743")},c401:function(e,t,n){"use strict";var r=n("c532"),i=n("2444");e.exports=function(e,t,n){var o=this||i;return r.forEach(n,(function(n){e=n.call(o,e,t)})),e}},c430:function(e,t){e.exports=!1},c532:function(e,t,n){"use strict";var r=n("1d2b"),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function a(e){return"undefined"===typeof e}function s(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function c(e){return"[object ArrayBuffer]"===i.call(e)}function u(e){return"undefined"!==typeof FormData&&e instanceof FormData}function l(e){var t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function d(e){return"string"===typeof e}function p(e){return"number"===typeof e}function f(e){return null!==e&&"object"===typeof e}function h(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function g(e){return"[object Date]"===i.call(e)}function v(e){return"[object File]"===i.call(e)}function m(e){return"[object Blob]"===i.call(e)}function _(e){return"[object Function]"===i.call(e)}function y(e){return f(e)&&_(e.pipe)}function b(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams}function I(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function T(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function C(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function S(){var e={};function t(t,n){h(e[n])&&h(t)?e[n]=S(e[n],t):h(t)?e[n]=S({},t):o(t)?e[n]=t.slice():e[n]=t}for(var n=0,r=arguments.length;n<r;n++)C(arguments[n],t);return e}function E(e,t,n){return C(t,(function(t,i){e[i]=n&&"function"===typeof t?r(t,n):t})),e}function M(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}e.exports={isArray:o,isArrayBuffer:c,isBuffer:s,isFormData:u,isArrayBufferView:l,isString:d,isNumber:p,isObject:f,isPlainObject:h,isUndefined:a,isDate:g,isFile:v,isBlob:m,isFunction:_,isStream:y,isURLSearchParams:b,isStandardBrowserEnv:T,forEach:C,merge:S,extend:E,trim:I,stripBOM:M}},c60d:function(e,t,n){var r=n("1a2d");e.exports=function(e){return void 0!==e&&(r(e,"value")||r(e,"writable"))}},c65b:function(e,t){var n=Function.prototype.call;e.exports=n.bind?n.bind(n):function(){return n.apply(n,arguments)}},c6b6:function(e,t,n){var r=n("e330"),i=r({}.toString),o=r("".slice);e.exports=function(e){return o(i(e),8,-1)}},c6cd:function(e,t,n){var r=n("da84"),i=n("ce4e"),o="__core-js_shared__",a=r[o]||i(o,{});e.exports=a},c760:function(e,t,n){var r=n("23e7");r({target:"Reflect",stat:!0},{has:function(e,t){return t in e}})},c8af:function(e,t,n){"use strict";var r=n("c532");e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},c8d2:function(e,t,n){var r=n("5e77").PROPER,i=n("d039"),o=n("5899"),a="​᠎";e.exports=function(e){return i((function(){return!!o[e]()||a[e]()!==a||r&&o[e].name!==e}))}},c906:function(e,t,n){var r=n("23e7"),i=n("4fad");r({target:"Object",stat:!0,forced:Object.isExtensible!==i},{isExtensible:i})},c975:function(e,t,n){"use strict";var r=n("23e7"),i=n("e330"),o=n("4d64").indexOf,a=n("a640"),s=i([].indexOf),c=!!s&&1/s([1],1,-0)<0,u=a("indexOf");r({target:"Array",proto:!0,forced:c||!u},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return c?s(this,e,t)||0:o(this,e,t)}})},ca19:function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("8405"),c=n("ad06"),u=n("7f9b"),[l,d]=Object(o["a"])("sidebar"),p=Symbol(l),f={modelValue:Object(a["c"])(0)},h=Object(i["n"])({name:l,props:f,emits:["change","update:modelValue"],setup(e,t){var{emit:n,slots:r}=t,{linkChildren:o}=Object(u["f"])(p),a=()=>+e.modelValue,s=e=>{e!==a()&&(n("update:modelValue",e),n("change",e))};return o({getActive:a,setActive:s}),()=>Object(i["m"])("div",{role:"tablist",class:d()},[null==r.default?void 0:r.default()])}}),g=Object(r["a"])(h),v=n("f344"),m=n("b070"),_=n("471a"),[y,b]=Object(o["a"])("sidebar-item"),I=Object(v["a"])({},m["b"],{dot:Boolean,title:String,badge:a["f"],disabled:Boolean}),T=Object(i["n"])({name:y,props:I,emits:["click"],setup(e,t){var{emit:n,slots:r}=t,o=Object(m["c"])(),{parent:a,index:s}=Object(u["l"])(p);if(a){var c=()=>{e.disabled||(n("click",s.value),a.setActive(s.value),o())};return()=>{var{dot:t,badge:n,title:o,disabled:u}=e,l=s.value===a.getActive();return Object(i["m"])("div",{role:"tab",class:b({select:l,disabled:u}),tabindex:u?void 0:0,"aria-selected":l,onClick:c},[Object(i["m"])(_["a"],{dot:t,content:n,class:b("text")},{default:()=>[r.title?r.title():o]})])}}}}),C=Object(r["a"])(T),[S,E]=Object(o["a"])("tree-select"),M={max:Object(a["c"])(1/0),items:Object(a["a"])(),height:Object(a["c"])(300),selectedIcon:Object(a["e"])("success"),mainActiveIndex:Object(a["c"])(0),activeId:{type:[Number,String,Array],default:0}},k=Object(i["n"])({name:S,props:M,emits:["click-nav","click-item","update:activeId","update:mainActiveIndex"],setup(e,t){var{emit:n,slots:r}=t,o=t=>Array.isArray(e.activeId)?e.activeId.includes(t):e.activeId===t,a=t=>{var r=()=>{if(!t.disabled){var r;if(Array.isArray(e.activeId)){r=e.activeId.slice();var i=r.indexOf(t.id);-1!==i?r.splice(i,1):r.length<e.max&&r.push(t.id)}else r=t.id;n("update:activeId",r),n("click-item",t)}};return Object(i["m"])("div",{key:t.id,class:["van-ellipsis",E("item",{active:o(t.id),disabled:t.disabled})],onClick:r},[t.text,o(t.id)&&Object(i["m"])(c["a"],{name:e.selectedIcon,class:E("selected")},null)])},u=e=>{n("update:mainActiveIndex",e),n("click-nav",e)},l=()=>{var t=e.items.map(e=>Object(i["m"])(C,{dot:e.dot,title:e.text,badge:e.badge,class:[E("nav-item"),e.className],disabled:e.disabled},null));return Object(i["m"])(g,{class:E("nav"),modelValue:e.mainActiveIndex,onChange:u},{default:()=>[t]})},d=()=>{if(r.content)return r.content();var t=e.items[+e.mainActiveIndex]||{};return t.children?t.children.map(a):void 0};return()=>Object(i["m"])("div",{class:E(),style:{height:Object(s["a"])(e.height)}},[l(),Object(i["m"])("div",{class:E("content")},[d()])])}}),w=Object(r["a"])(k);t["a"]=w},ca84:function(e,t,n){var r=n("e330"),i=n("1a2d"),o=n("fc6a"),a=n("4d64").indexOf,s=n("d012"),c=r([].push);e.exports=function(e,t){var n,r=o(e),u=0,l=[];for(n in r)!i(s,n)&&i(r,n)&&c(l,n);while(t.length>u)i(r,n=t[u++])&&(~a(l,n)||c(l,n));return l}},caad:function(e,t,n){"use strict";var r=n("23e7"),i=n("4d64").includes,o=n("44d2");r({target:"Array",proto:!0},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},cb51:function(e,t,n){},cc12:function(e,t,n){var r=n("da84"),i=n("861d"),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},cca6:function(e,t,n){var r=n("23e7"),i=n("60da");r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},cdd8:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("7a23"),i=10;function o(e,t){return e>t&&e>i?"horizontal":t>e&&t>i?"vertical":""}function a(){var e=Object(r["K"])(0),t=Object(r["K"])(0),n=Object(r["K"])(0),i=Object(r["K"])(0),a=Object(r["K"])(0),s=Object(r["K"])(0),c=Object(r["K"])(""),u=()=>"vertical"===c.value,l=()=>"horizontal"===c.value,d=()=>{n.value=0,i.value=0,a.value=0,s.value=0,c.value=""},p=n=>{d(),e.value=n.touches[0].clientX,t.value=n.touches[0].clientY},f=r=>{var u=r.touches[0];n.value=u.clientX<0?0:u.clientX-e.value,i.value=u.clientY-t.value,a.value=Math.abs(n.value),s.value=Math.abs(i.value),c.value||(c.value=o(a.value,s.value))};return{move:f,start:p,reset:d,startX:e,startY:t,deltaX:n,deltaY:i,offsetX:a,offsetY:s,direction:c,isVertical:u,isHorizontal:l}}},cdf9:function(e,t,n){var r=n("825a"),i=n("861d"),o=n("f069");e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e),a=n.resolve;return a(t),n.promise}},ce4e:function(e,t,n){var r=n("da84"),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},cee4:function(e,t,n){"use strict";var r=n("c532"),i=n("1d2b"),o=n("0a06"),a=n("4a7b"),s=n("2444");function c(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n.create=function(t){return c(a(e,t))},n}var u=c(s);u.Axios=o,u.Cancel=n("7a77"),u.CancelToken=n("8df4"),u.isCancel=n("2e67"),u.VERSION=n("5cce").version,u.all=function(e){return Promise.all(e)},u.spread=n("0df6"),u.isAxiosError=n("5f02"),e.exports=u,e.exports.default=u},d012:function(e,t){e.exports={}},d039:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},d066:function(e,t,n){var r=n("da84"),i=n("1626"),o=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e]):r[e]&&r[e][t]}},d0c2:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("7a23");function i(e){var t=Object(r["K"])(!1);return Object(r["X"])(e,e=>{e&&(t.value=e)},{immediate:!0}),e=>()=>t.value?e():null}},d1ba:function(e,t,n){"use strict";n.d(t,"b",(function(){return O}));var r=n("7a23"),i=n("fe7e"),o=n("f691"),a=n("f344"),s=n("b1d2"),c=n("8da3"),u=n("8405"),l=n("4a89");function d(e){return Array.isArray(e)?!e.length:0!==e&&!e}function p(e,t){return(!t.required||!d(e))&&!(t.pattern&&!t.pattern.test(String(e)))}function f(e,t){return new Promise(n=>{var r=t.validator(e,t);if(Object(c["g"])(r))return r.then(n);n(r)})}function h(e,t){var{message:n}=t;return Object(c["c"])(n)?n(e,t):n||""}function g(e){var{target:t}=e;t.composing=!0}function v(e){var{target:t}=e;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}function m(e,t){var n=Object(l["b"])();e.style.height="auto";var r=e.scrollHeight;if(Object(c["f"])(t)){var{maxHeight:i,minHeight:o}=t;void 0!==i&&(r=Math.min(r,i)),void 0!==o&&(r=Math.max(r,o))}r&&(e.style.height=r+"px",Object(l["g"])(n))}function _(e){return"number"===e?{type:"text",inputmode:"decimal"}:"digit"===e?{type:"tel",inputmode:"numeric"}:{type:e}}function y(e){return[...e].length}function b(e,t){return[...e].slice(0,t).join("")}var I=n("68b4"),T=n("7f9b"),C=n("1f4d"),S=n("4eda"),E=n("ad06"),M=n("7744"),[k,w]=Object(i["a"])("field"),O={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:o["f"],formatter:Function,clearIcon:Object(o["e"])("clear"),modelValue:Object(o["c"])(""),inputAlign:String,placeholder:String,autocomplete:String,errorMessage:String,clearTrigger:Object(o["e"])("focus"),formatTrigger:Object(o["e"])("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},D=Object(a["a"])({},I["a"],O,{rows:o["f"],type:Object(o["e"])("text"),rules:Array,autosize:[Boolean,Object],labelWidth:o["f"],labelClass:o["h"],labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});t["a"]=Object(r["n"])({name:k,props:D,emits:["blur","focus","clear","keypress","click-input","click-left-icon","click-right-icon","update:modelValue"],setup(e,t){var{emit:n,slots:i}=t,o=Object(C["a"])(),a=Object(r["J"])({focused:!1,validateFailed:!1,validateMessage:""}),d=Object(r["K"])(),I=Object(r["K"])(),{parent:k}=Object(T["l"])(s["h"]),O=()=>{var t;return String(null!=(t=e.modelValue)?t:"")},D=t=>Object(c["b"])(e[t])?e[t]:k&&Object(c["b"])(k.props[t])?k.props[t]:void 0,A=Object(r["e"])(()=>{var t=D("readonly");if(e.clearable&&!t){var n=""!==O(),r="always"===e.clearTrigger||"focus"===e.clearTrigger&&a.focused;return n&&r}return!1}),R=Object(r["e"])(()=>I.value&&i.input?I.value():e.modelValue),x=e=>e.reduce((e,t)=>e.then(()=>{if(!a.validateFailed){var{value:e}=R;return t.formatter&&(e=t.formatter(e,t)),p(e,t)?t.validator?f(e,t).then(n=>{n&&"string"===typeof n?(a.validateFailed=!0,a.validateMessage=n):!1===n&&(a.validateFailed=!0,a.validateMessage=h(e,t))}):void 0:(a.validateFailed=!0,void(a.validateMessage=h(e,t)))}}),Promise.resolve()),L=()=>{a.validateFailed&&(a.validateFailed=!1,a.validateMessage="")},N=function(t){return void 0===t&&(t=e.rules),new Promise(n=>{L(),t?x(t).then(()=>{a.validateFailed?n({name:e.name,message:a.validateMessage}):n()}):n()})},P=t=>{if(k&&e.rules){var n=k.props.validateTrigger===t,r=e.rules.filter(e=>e.trigger?e.trigger===t:n);r.length&&N(r)}},j=t=>{var{maxlength:n}=e;if(Object(c["b"])(n)&&y(t)>n){var r=O();return r&&y(r)===+n?r:b(t,+n)}return t},U=function(t,r){if(void 0===r&&(r="onChange"),t=j(t),"number"===e.type||"digit"===e.type){var i="number"===e.type;t=Object(u["d"])(t,i,i)}e.formatter&&r===e.formatTrigger&&(t=e.formatter(t)),d.value&&d.value.value!==t&&(d.value.value=t),t!==e.modelValue&&n("update:modelValue",t)},G=e=>{e.target.composing||U(e.target.value)},V=()=>{var e;return null==(e=d.value)?void 0:e.blur()},F=()=>{var e;return null==(e=d.value)?void 0:e.focus()},B=()=>{var t=d.value;"textarea"===e.type&&e.autosize&&t&&m(t,e.autosize)},q=e=>{a.focused=!0,n("focus",e),Object(r["u"])(B),D("readonly")&&V()},H=e=>{D("readonly")||(a.focused=!1,U(O(),"onBlur"),n("blur",e),P("onBlur"),Object(r["u"])(B),Object(l["f"])())},z=e=>n("click-input",e),K=e=>n("click-left-icon",e),W=e=>n("click-right-icon",e),Y=e=>{Object(l["e"])(e),n("update:modelValue",""),n("clear",e)},J=Object(r["e"])(()=>"boolean"===typeof e.error?e.error:!!(k&&k.props.showError&&a.validateFailed)||void 0),$=Object(r["e"])(()=>{var e=D("labelWidth");if(e)return{width:Object(u["a"])(e)}}),X=t=>{var r=13;if(t.keyCode===r){var i=k&&k.props.submitOnEnter;i||"textarea"===e.type||Object(l["e"])(t),"search"===e.type&&V()}n("keypress",t)},Z=()=>e.id||o+"-input",Q=()=>{var t=w("control",[D("inputAlign"),{error:J.value,custom:!!i.input,"min-height":"textarea"===e.type&&!e.autosize}]);if(i.input)return Object(r["m"])("div",{class:t,onClick:z},[i.input()]);var n={id:Z(),ref:d,name:e.name,rows:void 0!==e.rows?+e.rows:void 0,class:t,value:e.modelValue,disabled:D("disabled"),readonly:D("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,"aria-labelledby":e.label?o+"-label":void 0,onBlur:H,onFocus:q,onInput:G,onClick:z,onChange:v,onKeypress:X,onCompositionend:v,onCompositionstart:g};return"textarea"===e.type?Object(r["m"])("textarea",n,null):Object(r["m"])("input",Object(r["t"])(_(e.type),n),null)},ee=()=>{var t=i["left-icon"];if(e.leftIcon||t)return Object(r["m"])("div",{class:w("left-icon"),onClick:K},[t?t():Object(r["m"])(E["a"],{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},te=()=>{var t=i["right-icon"];if(e.rightIcon||t)return Object(r["m"])("div",{class:w("right-icon"),onClick:W},[t?t():Object(r["m"])(E["a"],{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},ne=()=>{if(e.showWordLimit&&e.maxlength){var t=y(O());return Object(r["m"])("div",{class:w("word-limit")},[Object(r["m"])("span",{class:w("word-num")},[t]),Object(r["l"])("/"),e.maxlength])}},re=()=>{if(!k||!1!==k.props.showErrorMessage){var t=e.errorMessage||a.validateMessage;if(t){var n=i["error-message"],o=D("errorMessageAlign");return Object(r["m"])("div",{class:w("error-message",o)},[n?n({message:t}):t])}}},ie=()=>{var t=D("colon")?":":"";return i.label?[i.label(),t]:e.label?Object(r["m"])("label",{id:o+"-label",for:Z()},[e.label+t]):void 0},oe=()=>[Object(r["m"])("div",{class:w("body")},[Q(),A.value&&Object(r["m"])(E["a"],{name:e.clearIcon,class:w("clear"),onTouchstart:Y},null),te(),i.button&&Object(r["m"])("div",{class:w("button")},[i.button()])]),ne(),re()];return Object(S["a"])({blur:V,focus:F,validate:N,formValue:R,resetValidation:L}),Object(r["H"])(T["a"],{customValue:I,resetValidation:L,validateWithTrigger:P}),Object(r["X"])(()=>e.modelValue,()=>{U(O()),L(),P("onChange"),Object(r["u"])(B)}),Object(r["C"])(()=>{U(O(),e.formatTrigger),Object(r["u"])(B)}),()=>{var t=D("disabled"),n=D("labelAlign"),o=ie(),a=ee();return Object(r["m"])(M["a"],{size:e.size,icon:e.leftIcon,class:w({error:J.value,disabled:t,["label-"+n]:n}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:$.value,valueClass:w("value"),titleClass:[w("label",[n,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:a?()=>a:null,title:o?()=>o:null,value:oe,extra:i.extra})}}})},d1cf:function(e,t,n){"use strict";n("68ef"),n("e3b3"),n("a526")},d1e1:function(e,t,n){"use strict";var r=n("c199"),i=n("56b6"),o=Object(r["a"])(i["b"]);t["a"]=o},d1e7:function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},d233:function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e){var t;while(e.length){var n=e.pop();if(t=n.obj[n.prop],Array.isArray(t)){for(var r=[],i=0;i<t.length;++i)"undefined"!==typeof t[i]&&r.push(t[i]);n.obj[n.prop]=r}}return t},a=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)"undefined"!==typeof e[r]&&(n[r]=e[r]);return n},s=function e(t,n,i){if(!n)return t;if("object"!==typeof n){if(Array.isArray(t))t.push(n);else{if("object"!==typeof t)return[t,n];(i.plainObjects||i.allowPrototypes||!r.call(Object.prototype,n))&&(t[n]=!0)}return t}if("object"!==typeof t)return[t].concat(n);var o=t;return Array.isArray(t)&&!Array.isArray(n)&&(o=a(t,i)),Array.isArray(t)&&Array.isArray(n)?(n.forEach((function(n,o){r.call(t,o)?t[o]&&"object"===typeof t[o]?t[o]=e(t[o],n,i):t.push(n):t[o]=n})),t):Object.keys(n).reduce((function(t,o){var a=n[o];return r.call(t,o)?t[o]=e(t[o],a,i):t[o]=a,t}),o)},c=function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},u=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},l=function(e){if(0===e.length)return e;for(var t="string"===typeof e?e:String(e),n="",r=0;r<t.length;++r){var o=t.charCodeAt(r);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?n+=t.charAt(r):o<128?n+=i[o]:o<2048?n+=i[192|o>>6]+i[128|63&o]:o<55296||o>=57344?n+=i[224|o>>12]+i[128|o>>6&63]+i[128|63&o]:(r+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(r)),n+=i[240|o>>18]+i[128|o>>12&63]+i[128|o>>6&63]+i[128|63&o])}return n},d=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],a=i.obj[i.prop],s=Object.keys(a),c=0;c<s.length;++c){var u=s[c],l=a[u];"object"===typeof l&&null!==l&&-1===n.indexOf(l)&&(t.push({obj:a,prop:u}),n.push(l))}return o(t)},p=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},f=function(e){return null!==e&&"undefined"!==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))};e.exports={arrayToObject:a,assign:c,compact:d,decode:u,encode:l,isBuffer:f,isRegExp:p,merge:s}},d28b:function(e,t,n){var r=n("746f");r("iterator")},d2bb:function(e,t,n){var r=n("e330"),i=n("825a"),o=n("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),e(n,[]),t=n instanceof Array}catch(a){}return function(n,r){return i(n),o(r),t?e(n,r):n.__proto__=r,n}}():void 0)},d314:function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("8405"),c=n("04b0"),u=n("7f9b"),l=n("4eda"),d=n("7744"),p=n("ad06"),f=n("e41f"),[h,g]=Object(o["a"])("dropdown-item"),v={title:String,options:Object(a["a"])(),disabled:Boolean,teleport:[String,Object],lazyRender:a["g"],modelValue:a["h"],titleClass:a["h"]},m=Object(i["n"])({name:h,props:v,emits:["open","opened","close","closed","change","update:modelValue"],setup(e,t){var{emit:n,slots:r}=t,o=Object(i["J"])({showPopup:!1,transition:!0,showWrapper:!1}),{parent:a,index:h}=Object(u["l"])(c["a"]);if(a){var v=e=>()=>n(e),m=v("open"),_=v("close"),y=v("opened"),b=()=>{o.showWrapper=!1,n("closed")},I=t=>{e.teleport&&t.stopPropagation()},T=function(e,t){void 0===e&&(e=!o.showPopup),void 0===t&&(t={}),e!==o.showPopup&&(o.showPopup=e,o.transition=!t.immediate,e&&(o.showWrapper=!0))},C=()=>{if(r.title)return r.title();if(e.title)return e.title;var t=e.options.find(t=>t.value===e.modelValue);return t?t.text:""},S=t=>{var{activeColor:r}=a.props,s=t.value===e.modelValue,c=()=>{o.showPopup=!1,t.value!==e.modelValue&&(n("update:modelValue",t.value),n("change",t.value))},u=()=>{if(s)return Object(i["m"])(p["a"],{class:g("icon"),color:r,name:"success"},null)};return Object(i["m"])(d["a"],{role:"menuitem",key:t.value,icon:t.icon,title:t.text,class:g("option",{active:s}),style:{color:s?r:""},tabindex:s?0:-1,clickable:!0,onClick:c},{value:u})},E=()=>{var{offset:t}=a,{zIndex:n,overlay:c,duration:u,direction:l,closeOnClickOverlay:d}=a.props,p=Object(s["f"])(n);return"down"===l?p.top=t.value+"px":p.bottom=t.value+"px",Object(i["ab"])(Object(i["m"])("div",{style:p,class:g([l]),onClick:I},[Object(i["m"])(f["a"],{show:o.showPopup,"onUpdate:show":e=>o.showPopup=e,role:"menu",class:g("content"),overlay:c,position:"down"===l?"top":"bottom",duration:o.transition?u:0,lazyRender:e.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":a.id+"-"+h.value,closeOnClickOverlay:d,onOpen:m,onClose:_,onOpened:y,onClosed:b},{default:()=>[e.options.map(S),null==r.default?void 0:r.default()]})]),[[i["W"],o.showWrapper]])};return Object(l["a"])({state:o,toggle:T,renderTitle:C}),()=>e.teleport?Object(i["m"])(i["c"],{to:e.teleport},{default:()=>[E()]}):E()}}}),_=Object(r["a"])(m);t["a"]=_},d399:function(e,t,n){"use strict";var r=n("626a");t["a"]=r["a"]},d3b7:function(e,t,n){var r=n("00ee"),i=n("6eeb"),o=n("b041");r||i(Object.prototype,"toString",o,{unsafe:!0})},d3fb:function(e,t,n){"use strict";n.d(t,"b",(function(){return w}));var r=n("7a23"),i=n("fe7e"),o=n("f691"),a=n("f344"),s=n("8405"),c=n("b1d2"),u=n("4a89"),l=n("7f9b"),d=n("4eda"),p=n("543e"),f=n("8da3");function h(e){if(!Object(f["b"])(e))return e;if(Array.isArray(e))return e.map(e=>h(e));if(Object(f["f"])(e)){var t={};return Object.keys(e).forEach(n=>{t[n]=h(e[n])}),t}return e}var g=n("cdd8"),v=200,m=300,_=15,[y,b]=Object(i["a"])("picker-column");function I(e){var{transform:t}=window.getComputedStyle(e),n=t.slice(7,t.length-1).split(", ")[5];return Number(n)}var T=Symbol(y),C=e=>Object(f["f"])(e)&&e.disabled,S=Object(r["n"])({name:y,props:{textKey:Object(o["d"])(String),readonly:Boolean,allowHtml:Boolean,className:o["h"],itemHeight:Object(o["d"])(Number),defaultIndex:Object(o["b"])(0),swipeDuration:Object(o["d"])(o["f"]),initialOptions:Object(o["a"])(),visibleItemCount:Object(o["d"])(o["f"])},emits:["change"],setup(e,t){var n,i,o,a,c,{emit:p,slots:y}=t,S=Object(r["K"])(),E=Object(r["J"])({index:e.defaultIndex,offset:0,duration:0,options:h(e.initialOptions)}),M=Object(g["a"])(),k=()=>E.options.length,w=()=>e.itemHeight*(+e.visibleItemCount-1)/2,O=e=>{e=Object(s["c"])(e,0,k());for(var t=e;t<k();t++)if(!C(E.options[t]))return t;for(var n=e-1;n>=0;n--)if(!C(E.options[n]))return n},D=(t,r)=>{t=O(t)||0;var i=-t*e.itemHeight,o=()=>{t!==E.index&&(E.index=t,r&&p("change",t))};n&&i!==E.offset?c=o:o(),E.offset=i},A=t=>{JSON.stringify(t)!==JSON.stringify(E.options)&&(E.options=h(t),D(e.defaultIndex))},R=t=>{n||e.readonly||(c=null,E.duration=v,D(t,!0))},x=t=>Object(f["f"])(t)&&e.textKey in t?t[e.textKey]:t,L=t=>Object(s["c"])(Math.round(-t/e.itemHeight),0,k()-1),N=(t,n)=>{var r=Math.abs(t/n);t=E.offset+r/.003*(t<0?-1:1);var i=L(t);E.duration=+e.swipeDuration,D(i,!0)},P=()=>{n=!1,E.duration=0,c&&(c(),c=null)},j=t=>{if(!e.readonly){if(M.start(t),n){var r=I(S.value);E.offset=Math.min(0,r-w()),i=E.offset}else i=E.offset;E.duration=0,o=Date.now(),a=i,c=null}},U=t=>{if(!e.readonly){M.move(t),M.isVertical()&&(n=!0,Object(u["e"])(t,!0)),E.offset=Object(s["c"])(i+M.deltaY.value,-k()*e.itemHeight,e.itemHeight);var r=Date.now();r-o>m&&(o=r,a=E.offset)}},G=()=>{if(!e.readonly){var t=E.offset-a,r=Date.now()-o,i=r<m&&Math.abs(t)>_;if(i)N(t,r);else{var s=L(E.offset);E.duration=v,D(s,!0),setTimeout(()=>{n=!1},0)}}},V=()=>{var t={height:e.itemHeight+"px"};return E.options.map((n,i)=>{var o=x(n),a=C(n),s={role:"button",style:t,tabindex:a?-1:0,class:b("item",{disabled:a,selected:i===E.index}),onClick:()=>R(i)},c={class:"van-ellipsis",[e.allowHtml?"innerHTML":"textContent"]:o};return Object(r["m"])("li",s,[y.option?y.option(n):Object(r["m"])("div",c,null)])})},F=e=>{for(var{options:t}=E,n=0;n<t.length;n++)if(x(t[n])===e)return D(n)},B=()=>E.options[E.index];return D(E.index),Object(l["l"])(T),Object(d["a"])({state:E,setIndex:D,getValue:B,setValue:F,setOptions:A,stopMomentum:P}),Object(r["X"])(()=>e.initialOptions,A),Object(r["X"])(()=>e.defaultIndex,e=>D(e)),()=>Object(r["m"])("div",{class:[b(),e.className],onTouchstart:j,onTouchmove:U,onTouchend:G,onTouchcancel:G},[Object(r["m"])("ul",{ref:S,style:{transform:"translate3d(0, "+(E.offset+w())+"px, 0)",transitionDuration:E.duration+"ms",transitionProperty:E.duration?"all":"none"},class:b("wrapper"),onTransitionend:P},[V()])])}}),[E,M,k]=Object(i["a"])("picker"),w={title:String,loading:Boolean,readonly:Boolean,allowHtml:Boolean,itemHeight:Object(o["c"])(44),showToolbar:o["g"],swipeDuration:Object(o["c"])(1e3),visibleItemCount:Object(o["c"])(6),cancelButtonText:String,confirmButtonText:String},O=Object(a["a"])({},w,{columns:Object(o["a"])(),valueKey:String,defaultIndex:Object(o["c"])(0),toolbarPosition:Object(o["e"])("top"),columnsFieldNames:Object});t["a"]=Object(r["n"])({name:E,props:O,emits:["confirm","cancel","change"],setup(e,t){var{emit:n,slots:i}=t;var o=Object(r["K"])([]),{text:f,values:h,children:g}=Object(a["a"])({text:e.valueKey||"text",values:"values",children:"children"},e.columnsFieldNames),{children:v,linkChildren:m}=Object(l["f"])(T);m();var _=Object(r["e"])(()=>Object(s["i"])(e.itemHeight)),y=Object(r["e"])(()=>{var t=e.columns[0];if("object"===typeof t){if(g in t)return"cascade";if(h in t)return"object"}return"plain"}),b=()=>{var t=[],n={[g]:e.columns};while(n&&n[g]){var r,i=n[g],a=null!=(r=n.defaultIndex)?r:+e.defaultIndex;while(i[a]&&i[a].disabled){if(!(a<i.length-1)){a=0;break}a++}t.push({[h]:n[g],className:n.className,defaultIndex:a}),n=i[a]}o.value=t},I=()=>{var{columns:t}=e;"plain"===y.value?o.value=[{[h]:t}]:"cascade"===y.value?b():o.value=t},C=()=>v.map(e=>e.state.index),E=(e,t)=>{var n=v[e];n&&n.setOptions(t)},w=t=>{for(var n={[g]:e.columns},r=C(),i=0;i<=t;i++)n=n[g][r[i]];while(n&&n[g])t++,E(t,n[g]),n=n[g][n.defaultIndex||0]},O=e=>v[e],D=e=>{var t=O(e);if(t)return t.getValue()},A=(e,t)=>{var n=O(e);n&&(n.setValue(t),"cascade"===y.value&&w(e))},R=e=>{var t=O(e);if(t)return t.state.index},x=(e,t)=>{var n=O(e);n&&(n.setIndex(t),"cascade"===y.value&&w(e))},L=e=>{var t=O(e);if(t)return t.state.options},N=()=>v.map(e=>e.getValue()),P=e=>{e.forEach((e,t)=>{A(t,e)})},j=e=>{e.forEach((e,t)=>{x(t,e)})},U=e=>{"plain"===y.value?n(e,D(0),R(0)):n(e,N(),C())},G=e=>{"cascade"===y.value&&w(e),"plain"===y.value?n("change",D(0),R(0)):n("change",N(),e)},V=()=>{v.forEach(e=>e.stopMomentum()),U("confirm")},F=()=>U("cancel"),B=()=>i.title?i.title():e.title?Object(r["m"])("div",{class:[M("title"),"van-ellipsis"]},[e.title]):void 0,q=()=>{var t=e.cancelButtonText||k("cancel");return Object(r["m"])("button",{type:"button",class:[M("cancel"),c["i"]],onClick:F},[i.cancel?i.cancel():t])},H=()=>{var t=e.confirmButtonText||k("confirm");return Object(r["m"])("button",{type:"button",class:[M("confirm"),c["i"]],onClick:V},[i.confirm?i.confirm():t])},z=()=>{if(e.showToolbar){var t=i.toolbar||i.default;return Object(r["m"])("div",{class:M("toolbar")},[t?t():[q(),B(),H()]])}},K=()=>o.value.map((t,n)=>{var o;return Object(r["m"])(S,{textKey:f,readonly:e.readonly,allowHtml:e.allowHtml,className:t.className,itemHeight:_.value,defaultIndex:null!=(o=t.defaultIndex)?o:+e.defaultIndex,swipeDuration:e.swipeDuration,initialOptions:t[h],visibleItemCount:e.visibleItemCount,onChange:()=>G(n)},{option:i.option})}),W=()=>{var t=_.value*+e.visibleItemCount,n={height:_.value+"px"},i={height:t+"px"},o={backgroundSize:"100% "+(t-_.value)/2+"px"};return Object(r["m"])("div",{class:M("columns"),style:i,onTouchmove:u["e"]},[K(),Object(r["m"])("div",{class:M("mask"),style:o},null),Object(r["m"])("div",{class:[c["g"],M("frame")],style:n},null)])};return Object(r["X"])(()=>e.columns,I,{immediate:!0}),Object(d["a"])({confirm:V,getValues:N,setValues:P,getIndexes:C,setIndexes:j,getColumnIndex:R,setColumnIndex:x,getColumnValue:D,setColumnValue:A,getColumnValues:L,setColumnValues:E}),()=>{var t,n;return Object(r["m"])("div",{class:M()},["top"===e.toolbarPosition?z():null,e.loading?Object(r["m"])(p["a"],{class:M("loading")},null):null,null==(t=i["columns-top"])?void 0:t.call(i),W(),null==(n=i["columns-bottom"])?void 0:n.call(i),"bottom"===e.toolbarPosition?z():null])}}})},d44e:function(e,t,n){var r=n("9bf2").f,i=n("1a2d"),o=n("b622"),a=o("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!i(e,a)&&r(e,a,{configurable:!0,value:t})}},d4c3:function(e,t,n){var r=n("342f"),i=n("da84");e.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==i.Pebble},d4ec:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},d4ef:function(e,t,n){},d58f:function(e,t,n){var r=n("da84"),i=n("59ed"),o=n("7b0b"),a=n("44ad"),s=n("07fa"),c=r.TypeError,u=function(e){return function(t,n,r,u){i(n);var l=o(t),d=a(l),p=s(l),f=e?p-1:0,h=e?-1:1;if(r<2)while(1){if(f in d){u=d[f],f+=h;break}if(f+=h,e?f<0:p<=f)throw c("Reduce of empty array with no initial value")}for(;e?f>=0:p>f;f+=h)f in d&&(u=n(u,d[f],f,l));return u}};e.exports={left:u(!1),right:u(!0)}},d784:function(e,t,n){"use strict";n("ac1f");var r=n("e330"),i=n("6eeb"),o=n("9263"),a=n("d039"),s=n("b622"),c=n("9112"),u=s("species"),l=RegExp.prototype;e.exports=function(e,t,n,d){var p=s(e),f=!a((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),h=f&&!a((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[u]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!f||!h||n){var g=r(/./[p]),v=t(p,""[e],(function(e,t,n,i,a){var s=r(e),c=t.exec;return c===o||c===l.exec?f&&!a?{done:!0,value:g(t,n,i)}:{done:!0,value:s(n,t,i)}:{done:!1}}));i(String.prototype,e,v[0]),i(l,p,v[1])}d&&c(l[p],"sham",!0)}},d81d:function(e,t,n){"use strict";var r=n("23e7"),i=n("b727").map,o=n("1dde"),a=o("map");r({target:"Array",proto:!0,forced:!a},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},d86b:function(e,t,n){var r=n("d039");e.exports=r((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},d8ac:function(e,t,n){},d925:function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},d961:function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f344"),s=n("f691"),c=n("4a89"),u=n("d1ba"),l=n("1f4d"),d=n("4eda"),p=n("565f"),[f,h,g]=Object(o["a"])("search"),v=Object(a["a"])({},u["b"],{label:String,shape:Object(s["e"])("square"),leftIcon:Object(s["e"])("search"),clearable:s["g"],actionText:String,background:String,showAction:Boolean}),m=Object(i["n"])({name:f,props:v,emits:["search","cancel","update:modelValue"],setup(e,t){var{emit:n,slots:r,attrs:o}=t,s=Object(l["a"])(),f=Object(i["K"])(),v=()=>{r.action||(n("update:modelValue",""),n("cancel"))},m=t=>{var r=13;t.keyCode===r&&(Object(c["e"])(t),n("search",e.modelValue))},_=()=>e.id||s+"-input",y=()=>{if(r.label||e.label)return Object(i["m"])("label",{class:h("label"),for:_()},[r.label?r.label():e.label])},b=()=>{if(e.showAction){var t=e.actionText||g("cancel");return Object(i["m"])("div",{class:h("action"),role:"button",tabindex:0,onClick:v},[r.action?r.action():t])}},I=()=>{var e;return null==(e=f.value)?void 0:e.blur()},T=()=>{var e;return null==(e=f.value)?void 0:e.focus()},C=Object.keys(u["b"]),S=()=>{var t=Object(a["a"])({},o,Object(a["e"])(e,C),{id:_()}),s=e=>n("update:modelValue",e);return Object(i["m"])(p["a"],Object(i["t"])({ref:f,type:"search",class:h("field"),border:!1,onKeypress:m,"onUpdate:modelValue":s},t),Object(a["e"])(r,["left-icon","right-icon"]))};return Object(d["a"])({focus:T,blur:I}),()=>Object(i["m"])("div",{class:h({"show-action":e.showAction}),style:{background:e.background}},[null==r.left?void 0:r.left(),Object(i["m"])("div",{class:h("content",e.shape)},[y(),S()]),b()])}}),_=Object(r["a"])(m);t["a"]=_},d998:function(e,t,n){var r=n("342f");e.exports=/MSIE|Trident/.test(r)},d9b5:function(e,t,n){var r=n("da84"),i=n("d066"),o=n("1626"),a=n("3a9b"),s=n("fdbf"),c=r.Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return o(t)&&a(t.prototype,c(e))}},da3c:function(e,t,n){"use strict";n("68ef"),n("cb51"),n("ae9e"),n("8270"),n("786d"),n("b807"),n("f319")},da84:function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n("c8ba"))},dbb4:function(e,t,n){var r=n("23e7"),i=n("83ab"),o=n("56ef"),a=n("fc6a"),s=n("06cf"),c=n("8418");r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){var t,n,r=a(e),i=s.f,u=o(r),l={},d=0;while(u.length>d)n=i(r,t=u[d++]),void 0!==n&&c(l,t,n);return l}})},dc0f:function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("b1d2"),s=n("2a84"),c=n("7f9b"),u=n("ad06"),[l,d]=Object(o["a"])("step"),p=Object(i["n"])({name:l,setup(e,t){var{slots:n}=t,{parent:r,index:o}=Object(c["l"])(s["a"]);if(r){var l=r.props,p=()=>{var e=+l.active;return o.value<e?"finish":o.value===e?"process":"waiting"},f=()=>"process"===p(),h=Object(i["e"])(()=>({background:"finish"===p()?l.activeColor:l.inactiveColor})),g=Object(i["e"])(()=>f()?{color:l.activeColor}:p()?void 0:{color:l.inactiveColor}),v=()=>r.onClickStep(o.value),m=()=>{var{iconPrefix:e,finishIcon:t,activeIcon:r,activeColor:o,inactiveIcon:a}=l;return f()?n["active-icon"]?n["active-icon"]():Object(i["m"])(u["a"],{class:d("icon","active"),name:r,color:o,classPrefix:e},null):"finish"===p()&&(t||n["finish-icon"])?n["finish-icon"]?n["finish-icon"]():Object(i["m"])(u["a"],{class:d("icon","finish"),name:t,color:o,classPrefix:e},null):n["inactive-icon"]?n["inactive-icon"]():a?Object(i["m"])(u["a"],{class:d("icon"),name:a,classPrefix:e},null):Object(i["m"])("i",{class:d("circle"),style:h.value},null)};return()=>{var e=p();return Object(i["m"])("div",{class:[a["a"],d([l.direction,{[e]:e}])]},[Object(i["m"])("div",{class:d("title",{active:f()}),style:g.value,onClick:v},[null==n.default?void 0:n.default()]),Object(i["m"])("div",{class:d("circle-container"),onClick:v},[m()]),Object(i["m"])("div",{class:d("line"),style:h.value},null)])}}}}),f=Object(r["a"])(p);t["a"]=f},dc1b:function(e,t,n){},dc4a:function(e,t,n){var r=n("59ed");e.exports=function(e,t){var n=e[t];return null==n?void 0:r(n)}},ddb0:function(e,t,n){var r=n("da84"),i=n("fdbc"),o=n("785a"),a=n("e260"),s=n("9112"),c=n("b622"),u=c("iterator"),l=c("toStringTag"),d=a.values,p=function(e,t){if(e){if(e[u]!==d)try{s(e,u,d)}catch(r){e[u]=d}if(e[l]||s(e,l,t),i[t])for(var n in a)if(e[n]!==a[n])try{s(e,n,a[n])}catch(r){e[n]=a[n]}}};for(var f in i)p(r[f]&&r[f].prototype,f);p(o,"DOMTokenList")},dde9:function(e,t,n){},df75:function(e,t,n){var r=n("ca84"),i=n("7839");e.exports=Object.keys||function(e){return r(e,i)}},df7c:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e){"string"!==typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}function i(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,r="/"===a.charAt(0))}return t=n(i(t.split("/"),(function(e){return!!e})),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),a="/"===o(e,-1);return e=n(i(e.split("/"),(function(e){return!!e})),!r).join("/"),e||r||(e="."),e&&a&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,c=0;c<a;c++)if(i[c]!==o[c]){s=c;break}var u=[];for(c=s;c<i.length;c++)u.push("..");return u=u.concat(o.slice(s)),u.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(t=e.charCodeAt(o),47===t){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=r(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=a+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var o="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("4362"))},e01a:function(e,t,n){"use strict";var r=n("23e7"),i=n("83ab"),o=n("da84"),a=n("e330"),s=n("1a2d"),c=n("1626"),u=n("3a9b"),l=n("577e"),d=n("9bf2").f,p=n("e893"),f=o.Symbol,h=f&&f.prototype;if(i&&c(f)&&(!("description"in h)||void 0!==f().description)){var g={},v=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),t=u(h,this)?new f(e):void 0===e?f():f(e);return""===e&&(g[t]=!0),t};p(v,f),v.prototype=h,h.constructor=v;var m="Symbol(test)"==String(f("test")),_=a(h.toString),y=a(h.valueOf),b=/^Symbol\((.*)\)[^)]+$/,I=a("".replace),T=a("".slice);d(h,"description",{configurable:!0,get:function(){var e=y(this),t=_(e);if(s(g,e))return"";var n=m?T(t,7,-1):I(t,b,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:v})}},e15d:function(e,t,n){},e163:function(e,t,n){var r=n("da84"),i=n("1a2d"),o=n("1626"),a=n("7b0b"),s=n("f772"),c=n("e177"),u=s("IE_PROTO"),l=r.Object,d=l.prototype;e.exports=c?l.getPrototypeOf:function(e){var t=a(e);if(i(t,u))return t[u];var n=t.constructor;return o(n)&&t instanceof n?n.prototype:t instanceof l?d:null}},e177:function(e,t,n){var r=n("d039");e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},e17f:function(e,t,n){"use strict";n("68ef"),n("d4ef"),n("cb51"),n("3743"),n("e3b3"),n("bc1b"),n("1703"),n("a71a"),n("4d75"),n("2fcb")},e23e:function(e,t,n){"use strict";(function(t){!function(t,n){e.exports=n()}(0,(function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function p(e,t,n){return(p=d()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&l(i,n.prototype),i}).apply(null,arguments)}function f(e){var t="function"==typeof Map?new Map:void 0;return(f=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return p(e,arguments,u(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,e)})(e)}function h(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function m(e){var t=d();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}function _(e,t){return b(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||T(e,t)||S()}function y(e){return function(e){if(Array.isArray(e))return C(e)}(e)||I(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e){if(Array.isArray(e))return e}function I(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function T(e,t){if(e){if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=T(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}var M="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};function k(e,t){return e(t={exports:{}},t.exports),t.exports}var w,O,D=function(e){return e&&e.Math==Math&&e},A=D("object"==typeof globalThis&&globalThis)||D("object"==typeof window&&window)||D("object"==typeof self&&self)||D("object"==typeof M&&M)||function(){return this}()||Function("return this")(),R=function(e){try{return!!e()}catch(n){return!0}},x=!R((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),L=!R((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),N=Function.prototype.call,P=L?N.bind(N):function(){return N.apply(N,arguments)},j={}.propertyIsEnumerable,U=Object.getOwnPropertyDescriptor,G={f:U&&!j.call({1:2},1)?function(e){var t=U(this,e);return!!t&&t.enumerable}:j},V=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},F=Function.prototype,B=F.bind,q=F.call,H=L&&B.bind(q,q),z=L?function(e){return e&&H(e)}:function(e){return e&&function(){return q.apply(e,arguments)}},K=z({}.toString),W=z("".slice),Y=function(e){return W(K(e),8,-1)},J=A.Object,$=z("".split),X=R((function(){return!J("z").propertyIsEnumerable(0)}))?function(e){return"String"==Y(e)?$(e,""):J(e)}:J,Z=A.TypeError,Q=function(e){if(null==e)throw Z("Can't call method on "+e);return e},ee=function(e){return X(Q(e))},te=function(e){return"function"==typeof e},ne=function(e){return"object"==typeof e?null!==e:te(e)},re=function(e){return te(e)?e:void 0},ie=function(e,t){return arguments.length<2?re(A[e]):A[e]&&A[e][t]},oe=z({}.isPrototypeOf),ae=ie("navigator","userAgent")||"",se=A.process,ce=A.Deno,ue=se&&se.versions||ce&&ce.version,le=ue&&ue.v8;le&&(O=(w=le.split("."))[0]>0&&w[0]<4?1:+(w[0]+w[1])),!O&&ae&&(!(w=ae.match(/Edge\/(\d+)/))||w[1]>=74)&&(w=ae.match(/Chrome\/(\d+)/))&&(O=+w[1]);var de=O,pe=!!Object.getOwnPropertySymbols&&!R((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&de&&de<41})),fe=pe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,he=A.Object,ge=fe?function(e){return"symbol"==typeof e}:function(e){var t=ie("Symbol");return te(t)&&oe(t.prototype,he(e))},ve=A.String,me=function(e){try{return ve(e)}catch(n){return"Object"}},_e=A.TypeError,ye=function(e){if(te(e))return e;throw _e(me(e)+" is not a function")},be=function(e,t){var n=e[t];return null==n?void 0:ye(n)},Ie=A.TypeError,Te=Object.defineProperty,Ce=function(e,t){try{Te(A,e,{value:t,configurable:!0,writable:!0})}catch(r){A[e]=t}return t},Se=A["__core-js_shared__"]||Ce("__core-js_shared__",{}),Ee=k((function(e){(e.exports=function(e,t){return Se[e]||(Se[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.0",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.0/LICENSE",source:"https://github.com/zloirock/core-js"})})),Me=A.Object,ke=function(e){return Me(Q(e))},we=z({}.hasOwnProperty),Oe=Object.hasOwn||function(e,t){return we(ke(e),t)},De=0,Ae=Math.random(),Re=z(1..toString),xe=function(e){return"Symbol("+(void 0===e?"":e)+")_"+Re(++De+Ae,36)},Le=Ee("wks"),Ne=A.Symbol,Pe=Ne&&Ne.for,je=fe?Ne:Ne&&Ne.withoutSetter||xe,Ue=function(e){if(!Oe(Le,e)||!pe&&"string"!=typeof Le[e]){var t="Symbol."+e;pe&&Oe(Ne,e)?Le[e]=Ne[e]:Le[e]=fe&&Pe?Pe(t):je(t)}return Le[e]},Ge=A.TypeError,Ve=Ue("toPrimitive"),Fe=function(e,t){if(!ne(e)||ge(e))return e;var n,r=be(e,Ve);if(r){if(void 0===t&&(t="default"),n=P(r,e,t),!ne(n)||ge(n))return n;throw Ge("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var n,r;if("string"===t&&te(n=e.toString)&&!ne(r=P(n,e)))return r;if(te(n=e.valueOf)&&!ne(r=P(n,e)))return r;if("string"!==t&&te(n=e.toString)&&!ne(r=P(n,e)))return r;throw Ie("Can't convert object to primitive value")}(e,t)},Be=function(e){var t=Fe(e,"string");return ge(t)?t:t+""},qe=A.document,He=ne(qe)&&ne(qe.createElement),ze=function(e){return He?qe.createElement(e):{}},Ke=!x&&!R((function(){return 7!=Object.defineProperty(ze("div"),"a",{get:function(){return 7}}).a})),We=Object.getOwnPropertyDescriptor,Ye={f:x?We:function(e,t){if(e=ee(e),t=Be(t),Ke)try{return We(e,t)}catch(r){}if(Oe(e,t))return V(!P(G.f,e,t),e[t])}},Je=x&&R((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),$e=A.String,Xe=A.TypeError,Ze=function(e){if(ne(e))return e;throw Xe($e(e)+" is not an object")},Qe=A.TypeError,et=Object.defineProperty,nt=Object.getOwnPropertyDescriptor,rt={f:x?Je?function(e,t,n){if(Ze(e),t=Be(t),Ze(n),"function"==typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n.writable){var r=nt(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:"configurable"in n?n.configurable:r.configurable,enumerable:"enumerable"in n?n.enumerable:r.enumerable,writable:!1})}return et(e,t,n)}:et:function(e,t,n){if(Ze(e),t=Be(t),Ze(n),Ke)try{return et(e,t,n)}catch(i){}if("get"in n||"set"in n)throw Qe("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},it=x?function(e,t,n){return rt.f(e,t,V(1,n))}:function(e,t,n){return e[t]=n,e},ot=z(Function.toString);te(Se.inspectSource)||(Se.inspectSource=function(e){return ot(e)});var at,st,ct,ut=Se.inspectSource,lt=A.WeakMap,dt=te(lt)&&/native code/.test(ut(lt)),pt=Ee("keys"),ft=function(e){return pt[e]||(pt[e]=xe(e))},ht={},gt=A.TypeError,vt=A.WeakMap;if(dt||Se.state){var mt=Se.state||(Se.state=new vt),_t=z(mt.get),yt=z(mt.has),bt=z(mt.set);at=function(e,t){if(yt(mt,e))throw new gt("Object already initialized");return t.facade=e,bt(mt,e,t),t},st=function(e){return _t(mt,e)||{}},ct=function(e){return yt(mt,e)}}else{var It=ft("state");ht[It]=!0,at=function(e,t){if(Oe(e,It))throw new gt("Object already initialized");return t.facade=e,it(e,It,t),t},st=function(e){return Oe(e,It)?e[It]:{}},ct=function(e){return Oe(e,It)}}var Tt={set:at,get:st,has:ct,enforce:function(e){return ct(e)?st(e):at(e,{})},getterFor:function(e){return function(t){var n;if(!ne(t)||(n=st(t)).type!==e)throw gt("Incompatible receiver, "+e+" required");return n}}},Ct=Function.prototype,St=x&&Object.getOwnPropertyDescriptor,Et=Oe(Ct,"name"),Mt={EXISTS:Et,PROPER:Et&&"something"===function(){}.name,CONFIGURABLE:Et&&(!x||x&&St(Ct,"name").configurable)},kt=k((function(e){var t=Mt.CONFIGURABLE,n=Tt.get,r=Tt.enforce,i=String(String).split("String");(e.exports=function(e,n,o,a){var s,c=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,l=!!a&&!!a.noTargetGet,d=a&&void 0!==a.name?a.name:n;te(o)&&("Symbol("===String(d).slice(0,7)&&(d="["+String(d).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Oe(o,"name")||t&&o.name!==d)&&it(o,"name",d),(s=r(o)).source||(s.source=i.join("string"==typeof d?d:""))),e!==A?(c?!l&&e[n]&&(u=!0):delete e[n],u?e[n]=o:it(e,n,o)):u?e[n]=o:Ce(n,o)})(Function.prototype,"toString",(function(){return te(this)&&n(this).source||ut(this)}))})),wt=Math.ceil,Ot=Math.floor,Dt=function(e){var t=+e;return t!=t||0===t?0:(t>0?Ot:wt)(t)},At=Math.max,Rt=Math.min,xt=function(e,t){var n=Dt(e);return n<0?At(n+t,0):Rt(n,t)},Lt=Math.min,Nt=function(e){return e>0?Lt(Dt(e),9007199254740991):0},Pt=function(e){return Nt(e.length)},jt=function(e){return function(t,n,r){var i,o=ee(t),a=Pt(o),s=xt(r,a);if(e&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}},Ut={includes:jt(!0),indexOf:jt(!1)},Gt=Ut.indexOf,Vt=z([].push),Ft=function(e,t){var n,r=ee(e),i=0,o=[];for(n in r)!Oe(ht,n)&&Oe(r,n)&&Vt(o,n);for(;t.length>i;)Oe(r,n=t[i++])&&(~Gt(o,n)||Vt(o,n));return o},Bt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],qt=Bt.concat("length","prototype"),Ht={f:Object.getOwnPropertyNames||function(e){return Ft(e,qt)}},zt={f:Object.getOwnPropertySymbols},Kt=z([].concat),Wt=ie("Reflect","ownKeys")||function(e){var t=Ht.f(Ze(e)),n=zt.f;return n?Kt(t,n(e)):t},Yt=function(e,t,n){for(var r=Wt(t),i=rt.f,o=Ye.f,a=0;a<r.length;a++){var s=r[a];Oe(e,s)||n&&Oe(n,s)||i(e,s,o(t,s))}},Jt=/#|\.prototype\./,$t=function(e,t){var n=Zt[Xt(e)];return n==en||n!=Qt&&(te(t)?R(t):!!t)},Xt=$t.normalize=function(e){return String(e).replace(Jt,".").toLowerCase()},Zt=$t.data={},Qt=$t.NATIVE="N",en=$t.POLYFILL="P",tn=$t,nn=Ye.f,rn=function(e,t){var n,r,i,o,a,s=e.target,c=e.global,u=e.stat;if(n=c?A:u?A[s]||Ce(s,{}):(A[s]||{}).prototype)for(r in t){if(o=t[r],i=e.noTargetGet?(a=nn(n,r))&&a.value:n[r],!tn(c?r:s+(u?".":"#")+r,e.forced)&&void 0!==i){if(typeof o==typeof i)continue;Yt(o,i)}(e.sham||i&&i.sham)&&it(o,"sham",!0),kt(n,r,o,e)}},on={};on[Ue("toStringTag")]="z";var an="[object z]"===String(on),sn=Ue("toStringTag"),cn=A.Object,un="Arguments"==Y(function(){return arguments}()),ln=an?Y:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=cn(e),sn))?n:un?Y(t):"Object"==(r=Y(t))&&te(t.callee)?"Arguments":r},dn=A.String,pn=function(e){if("Symbol"===ln(e))throw TypeError("Cannot convert a Symbol value to a string");return dn(e)},fn="\t\n\v\f\r                　\u2028\u2029\ufeff",hn=z("".replace),gn="["+fn+"]",vn=RegExp("^"+gn+gn+"*"),mn=RegExp(gn+gn+"*$"),_n=function(e){return function(t){var n=pn(Q(t));return 1&e&&(n=hn(n,vn,"")),2&e&&(n=hn(n,mn,"")),n}},yn={start:_n(1),end:_n(2),trim:_n(3)},bn=yn.trim,In=A.parseInt,Tn=A.Symbol,Cn=Tn&&Tn.iterator,Sn=/^[+-]?0x/i,En=z(Sn.exec),Mn=8!==In(fn+"08")||22!==In(fn+"0x16")||Cn&&!R((function(){In(Object(Cn))}))?function(e,t){var n=bn(pn(e));return In(n,t>>>0||(En(Sn,n)?16:10))}:In;rn({global:!0,forced:parseInt!=Mn},{parseInt:Mn});var kn=z([].slice),wn=A.Function,On=z([].concat),Dn=z([].join),An={},Rn=function(e,t,n){if(!Oe(An,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";An[t]=wn("C,a","return new C("+Dn(r,",")+")")}return An[t](e,n)},xn=L?wn.bind:function(e){var t=ye(this),n=t.prototype,r=kn(arguments,1),i=function(){var n=On(r,kn(arguments));return this instanceof i?Rn(t,n.length,n):t.apply(e,n)};return ne(n)&&(i.prototype=n),i};rn({target:"Function",proto:!0,forced:Function.bind!==xn},{bind:xn});var Ln,Nn=Object.keys||function(e){return Ft(e,Bt)},Pn={f:x&&!Je?Object.defineProperties:function(e,t){Ze(e);for(var n,r=ee(t),i=Nn(t),o=i.length,a=0;o>a;)rt.f(e,n=i[a++],r[n]);return e}},jn=ie("document","documentElement"),Un=ft("IE_PROTO"),Gn=function(){},Vn=function(e){return"<script>"+e+"<\/script>"},Fn=function(e){e.write(Vn("")),e.close();var t=e.parentWindow.Object;return e=null,t},Bn=function(){try{Ln=new ActiveXObject("htmlfile")}catch(i){}var e,t;Bn="undefined"!=typeof document?document.domain&&Ln?Fn(Ln):((t=ze("iframe")).style.display="none",jn.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Vn("document.F=Object")),e.close(),e.F):Fn(Ln);for(var n=Bt.length;n--;)delete Bn.prototype[Bt[n]];return Bn()};ht[Un]=!0;var qn=Object.create||function(e,t){var n;return null!==e?(Gn.prototype=Ze(e),n=new Gn,Gn.prototype=null,n[Un]=e):n=Bn(),void 0===t?n:Pn.f(n,t)};rn({target:"Object",stat:!0,sham:!x},{create:qn});var Hn=z(z.bind),zn=function(e,t){return ye(e),void 0===t?e:L?Hn(e,t):function(){return e.apply(t,arguments)}},Kn=Array.isArray||function(e){return"Array"==Y(e)},Wn=function(){},Yn=[],Jn=ie("Reflect","construct"),$n=/^\s*(?:class|function)\b/,Xn=z($n.exec),Zn=!$n.exec(Wn),Qn=function(e){if(!te(e))return!1;try{return Jn(Wn,Yn,e),!0}catch(n){return!1}},er=function(e){if(!te(e))return!1;switch(ln(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Zn||!!Xn($n,ut(e))}catch(n){return!0}};er.sham=!0;var tr=!Jn||R((function(){var e;return Qn(Qn.call)||!Qn(Object)||!Qn((function(){e=!0}))||e}))?er:Qn,nr=Ue("species"),rr=A.Array,ir=function(e,t){return new(function(e){var t;return Kn(e)&&(t=e.constructor,(tr(t)&&(t===rr||Kn(t.prototype))||ne(t)&&null===(t=t[nr]))&&(t=void 0)),void 0===t?rr:t}(e))(0===t?0:t)},or=z([].push),ar=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,a=7==e,s=5==e||o;return function(c,u,l,d){for(var p,f,h=ke(c),g=X(h),v=zn(u,l),m=Pt(g),_=0,y=d||ir,b=t?y(c,m):n||a?y(c,0):void 0;m>_;_++)if((s||_ in g)&&(f=v(p=g[_],_,h),e))if(t)b[_]=f;else if(f)switch(e){case 3:return!0;case 5:return p;case 6:return _;case 2:or(b,p)}else switch(e){case 4:return!1;case 7:or(b,p)}return o?-1:r||i?i:b}},sr={forEach:ar(0),map:ar(1),filter:ar(2),some:ar(3),every:ar(4),find:ar(5),findIndex:ar(6),filterReject:ar(7)},cr=function(e,t){var n=[][e];return!!n&&R((function(){n.call(null,t||function(){throw 1},1)}))},ur=sr.forEach,lr=cr("forEach")?[].forEach:function(e){return ur(this,e,arguments.length>1?arguments[1]:void 0)};rn({target:"Array",proto:!0,forced:[].forEach!=lr},{forEach:lr});var dr=an?{}.toString:function(){return"[object "+ln(this)+"]"};an||kt(Object.prototype,"toString",dr,{unsafe:!0});var pr={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},fr=ze("span").classList,hr=fr&&fr.constructor&&fr.constructor.prototype,gr=hr===Object.prototype?void 0:hr,vr=function(e){if(e&&e.forEach!==lr)try{it(e,"forEach",lr)}catch(n){e.forEach=lr}};for(var mr in pr)pr[mr]&&vr(A[mr]&&A[mr].prototype);vr(gr);var _r=R((function(){Nn(1)}));rn({target:"Object",stat:!0,forced:_r},{keys:function(e){return Nn(ke(e))}});var yr=function(e,t,n){var r,i;Ze(e);try{if(!(r=be(e,"return"))){if("throw"===t)throw n;return n}r=P(r,e)}catch(a){i=!0,r=a}if("throw"===t)throw n;if(i)throw r;return Ze(r),n},br=function(e,t,n,r){try{return r?t(Ze(n)[0],n[1]):t(n)}catch(o){yr(e,"throw",o)}},Ir={},Tr=Ue("iterator"),Cr=Array.prototype,Sr=function(e){return void 0!==e&&(Ir.Array===e||Cr[Tr]===e)},Er=function(e,t,n){var r=Be(t);r in e?rt.f(e,r,V(0,n)):e[r]=n},Mr=Ue("iterator"),kr=function(e){if(null!=e)return be(e,Mr)||be(e,"@@iterator")||Ir[ln(e)]},wr=A.TypeError,Or=function(e,t){var n=arguments.length<2?kr(e):t;if(ye(n))return Ze(P(n,e));throw wr(me(e)+" is not iterable")},Dr=A.Array,Ar=function(e){var t=ke(e),n=tr(this),r=arguments.length,i=r>1?arguments[1]:void 0,o=void 0!==i;o&&(i=zn(i,r>2?arguments[2]:void 0));var a,s,c,u,l,d,p=kr(t),f=0;if(!p||this==Dr&&Sr(p))for(a=Pt(t),s=n?new this(a):Dr(a);a>f;f++)d=o?i(t[f],f):t[f],Er(s,f,d);else for(l=(u=Or(t,p)).next,s=n?new this:[];!(c=P(l,u)).done;f++)d=o?br(u,i,[c.value,f],!0):c.value,Er(s,f,d);return s.length=f,s},Rr=Ue("iterator"),xr=!1;try{var Lr=0,Nr={next:function(){return{done:!!Lr++}},return:function(){xr=!0}};Nr[Rr]=function(){return this},Array.from(Nr,(function(){throw 2}))}catch(Lk){}var Pr=function(e,t){if(!t&&!xr)return!1;var n=!1;try{var r={};r[Rr]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(Lk){}return n},jr=!Pr((function(e){Array.from(e)}));rn({target:"Array",stat:!0,forced:jr},{from:Ar});var Ur,Gr,Vr,Fr=z("".charAt),Br=z("".charCodeAt),qr=z("".slice),Hr=function(e){return function(t,n){var r,i,o=pn(Q(t)),a=Dt(n),s=o.length;return a<0||a>=s?e?"":void 0:(r=Br(o,a))<55296||r>56319||a+1===s||(i=Br(o,a+1))<56320||i>57343?e?Fr(o,a):r:e?qr(o,a,a+2):i-56320+(r-55296<<10)+65536}},zr={codeAt:Hr(!1),charAt:Hr(!0)},Kr=!R((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Wr=ft("IE_PROTO"),Yr=A.Object,Jr=Yr.prototype,$r=Kr?Yr.getPrototypeOf:function(e){var t=ke(e);if(Oe(t,Wr))return t[Wr];var n=t.constructor;return te(n)&&t instanceof n?n.prototype:t instanceof Yr?Jr:null},Xr=Ue("iterator"),Zr=!1;[].keys&&("next"in(Vr=[].keys())?(Gr=$r($r(Vr)))!==Object.prototype&&(Ur=Gr):Zr=!0),(null==Ur||R((function(){var e={};return Ur[Xr].call(e)!==e})))&&(Ur={}),te(Ur[Xr])||kt(Ur,Xr,(function(){return this}));var Qr={IteratorPrototype:Ur,BUGGY_SAFARI_ITERATORS:Zr},ei=rt.f,ti=Ue("toStringTag"),ni=function(e,t,n){e&&!n&&(e=e.prototype),e&&!Oe(e,ti)&&ei(e,ti,{configurable:!0,value:t})},ri=Qr.IteratorPrototype,ii=function(){return this},oi=function(e,t,n,r){var i=t+" Iterator";return e.prototype=qn(ri,{next:V(+!r,n)}),ni(e,i,!1),Ir[i]=ii,e},ai=A.String,si=A.TypeError,ci=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=z(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(Lk){}return function(n,r){return Ze(n),function(e){if("object"==typeof e||te(e))return e;throw si("Can't set "+ai(e)+" as a prototype")}(r),t?e(n,r):n.__proto__=r,n}}():void 0),ui=Mt.PROPER,li=Mt.CONFIGURABLE,di=Qr.IteratorPrototype,pi=Qr.BUGGY_SAFARI_ITERATORS,fi=Ue("iterator"),hi=function(){return this},gi=function(e,t,n,r,i,o,a){oi(n,t,r);var s,c,u,l=function(e){if(e===i&&g)return g;if(!pi&&e in f)return f[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",p=!1,f=e.prototype,h=f[fi]||f["@@iterator"]||i&&f[i],g=!pi&&h||l(i),v="Array"==t&&f.entries||h;if(v&&(s=$r(v.call(new e)))!==Object.prototype&&s.next&&($r(s)!==di&&(ci?ci(s,di):te(s[fi])||kt(s,fi,hi)),ni(s,d,!0)),ui&&"values"==i&&h&&"values"!==h.name&&(li?it(f,"name","values"):(p=!0,g=function(){return P(h,this)})),i)if(c={values:l("values"),keys:o?g:l("keys"),entries:l("entries")},a)for(u in c)(pi||p||!(u in f))&&kt(f,u,c[u]);else rn({target:t,proto:!0,forced:pi||p},c);return f[fi]!==g&&kt(f,fi,g,{name:i}),Ir[t]=g,c},vi=zr.charAt,mi=Tt.set,_i=Tt.getterFor("String Iterator");gi(String,"String",(function(e){mi(this,{type:"String Iterator",string:pn(e),index:0})}),(function(){var e,t=_i(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=vi(n,r),t.index+=e.length,{value:e,done:!1})}));var yi={SDK_READY:"sdkStateReady",SDK_NOT_READY:"sdkStateNotReady",SDK_DESTROY:"sdkDestroy",MESSAGE_RECEIVED:"onMessageReceived",MESSAGE_MODIFIED:"onMessageModified",MESSAGE_REVOKED:"onMessageRevoked",MESSAGE_READ_BY_PEER:"onMessageReadByPeer",MESSAGE_READ_RECEIPT_RECEIVED:"onMessageReadReceiptReceived",MESSAGE_EXTENSIONS_UPDATED:"onMessageExtensionsUpdated",MESSAGE_EXTENSIONS_DELETED:"onMessageExtensionsDeleted",CONVERSATION_LIST_UPDATED:"onConversationListUpdated",TOTAL_UNREAD_MESSAGE_COUNT_UPDATED:"onTotalUnreadMessageCountUpdated",CONVERSATION_GROUP_LIST_UPDATED:"onConversationGroupListUpdated",CONVERSATION_IN_GROUP_UPDATED:"onConversationInGroupUpdated",GROUP_LIST_UPDATED:"onGroupListUpdated",GROUP_SYSTEM_NOTICE_RECEIVED:"receiveGroupSystemNotice",GROUP_ATTRIBUTES_UPDATED:"groupAttributesUpdated",GROUP_COUNTER_UPDATED:"onGroupCounterUpdated",TOPIC_CREATED:"onTopicCreated",TOPIC_DELETED:"onTopicDeleted",TOPIC_UPDATED:"onTopicUpdated",PROFILE_UPDATED:"onProfileUpdated",USER_STATUS_UPDATED:"onUserStatusUpdated",BLACKLIST_UPDATED:"blacklistUpdated",FRIEND_LIST_UPDATED:"onFriendListUpdated",FRIEND_GROUP_LIST_UPDATED:"onFriendGroupListUpdated",FRIEND_APPLICATION_LIST_UPDATED:"onFriendApplicationListUpdated",KICKED_OUT:"kickedOut",ERROR:"error",NET_STATE_CHANGE:"netStateChange",SDK_RELOAD:"sdkReload"},bi={MSG_TEXT:"TIMTextElem",MSG_IMAGE:"TIMImageElem",MSG_SOUND:"TIMSoundElem",MSG_AUDIO:"TIMSoundElem",MSG_FILE:"TIMFileElem",MSG_FACE:"TIMFaceElem",MSG_VIDEO:"TIMVideoFileElem",MSG_GEO:"TIMLocationElem",MSG_LOCATION:"TIMLocationElem",MSG_GRP_TIP:"TIMGroupTipElem",MSG_GRP_SYS_NOTICE:"TIMGroupSystemNoticeElem",MSG_CUSTOM:"TIMCustomElem",MSG_MERGER:"TIMRelayElem",MSG_PRIORITY_HIGH:"High",MSG_PRIORITY_NORMAL:"Normal",MSG_PRIORITY_LOW:"Low",MSG_PRIORITY_LOWEST:"Lowest",CONV_C2C:"C2C",CONV_GROUP:"GROUP",CONV_TOPIC:"TOPIC",CONV_SYSTEM:"@TIM#SYSTEM",CONV_AT_ME:1,CONV_AT_ALL:2,CONV_AT_ALL_AT_ME:3,CONV_MARK_TYPE_STAR:1,CONV_MARK_TYPE_UNREAD:2,CONV_MARK_TYPE_FOLD:4,CONV_MARK_TYPE_HIDE:8,GRP_PRIVATE:"Private",GRP_WORK:"Private",GRP_PUBLIC:"Public",GRP_CHATROOM:"ChatRoom",GRP_MEETING:"ChatRoom",GRP_AVCHATROOM:"AVChatRoom",GRP_COMMUNITY:"Community",GRP_MBR_ROLE_OWNER:"Owner",GRP_MBR_ROLE_ADMIN:"Admin",GRP_MBR_ROLE_MEMBER:"Member",GRP_MBR_ROLE_CUSTOM:"Custom",GRP_TIP_MBR_JOIN:1,GRP_TIP_MBR_QUIT:2,GRP_TIP_MBR_KICKED_OUT:3,GRP_TIP_MBR_SET_ADMIN:4,GRP_TIP_MBR_CANCELED_ADMIN:5,GRP_TIP_GRP_PROFILE_UPDATED:6,GRP_TIP_MBR_PROFILE_UPDATED:7,GRP_TIP_BAN_AVCHATROOM_MEMBER:10,GRP_TIP_UNBAN_AVCHATROOM_MEMBER:11,MSG_REMIND_ACPT_AND_NOTE:"AcceptAndNotify",MSG_REMIND_ACPT_NOT_NOTE:"AcceptNotNotify",MSG_REMIND_DISCARD:"Discard",GENDER_UNKNOWN:"Gender_Type_Unknown",GENDER_FEMALE:"Gender_Type_Female",GENDER_MALE:"Gender_Type_Male",KICKED_OUT_MULT_ACCOUNT:"multipleAccount",KICKED_OUT_MULT_DEVICE:"multipleDevice",KICKED_OUT_USERSIG_EXPIRED:"userSigExpired",KICKED_OUT_REST_API:"REST_API_Kick",ALLOW_TYPE_ALLOW_ANY:"AllowType_Type_AllowAny",ALLOW_TYPE_NEED_CONFIRM:"AllowType_Type_NeedConfirm",ALLOW_TYPE_DENY_ANY:"AllowType_Type_DenyAny",FORBID_TYPE_NONE:"AdminForbid_Type_None",FORBID_TYPE_SEND_OUT:"AdminForbid_Type_SendOut",JOIN_OPTIONS_FREE_ACCESS:"FreeAccess",JOIN_OPTIONS_NEED_PERMISSION:"NeedPermission",JOIN_OPTIONS_DISABLE_APPLY:"DisableApply",JOIN_STATUS_SUCCESS:"JoinedSuccess",JOIN_STATUS_ALREADY_IN_GROUP:"AlreadyInGroup",JOIN_STATUS_WAIT_APPROVAL:"WaitAdminApproval",GRP_PROFILE_OWNER_ID:"ownerID",GRP_PROFILE_CREATE_TIME:"createTime",GRP_PROFILE_LAST_INFO_TIME:"lastInfoTime",GRP_PROFILE_MEMBER_NUM:"memberNum",GRP_PROFILE_MAX_MEMBER_NUM:"maxMemberNum",GRP_PROFILE_JOIN_OPTION:"joinOption",GRP_PROFILE_INTRODUCTION:"introduction",GRP_PROFILE_NOTIFICATION:"notification",GRP_PROFILE_MUTE_ALL_MBRS:"muteAllMembers",SNS_ADD_TYPE_SINGLE:"Add_Type_Single",SNS_ADD_TYPE_BOTH:"Add_Type_Both",SNS_DELETE_TYPE_SINGLE:"Delete_Type_Single",SNS_DELETE_TYPE_BOTH:"Delete_Type_Both",SNS_APPLICATION_TYPE_BOTH:"Pendency_Type_Both",SNS_APPLICATION_SENT_TO_ME:"Pendency_Type_ComeIn",SNS_APPLICATION_SENT_BY_ME:"Pendency_Type_SendOut",SNS_APPLICATION_AGREE:"Response_Action_Agree",SNS_APPLICATION_AGREE_AND_ADD:"Response_Action_AgreeAndAdd",SNS_CHECK_TYPE_BOTH:"CheckResult_Type_Both",SNS_CHECK_TYPE_SINGLE:"CheckResult_Type_Single",SNS_TYPE_NO_RELATION:"CheckResult_Type_NoRelation",SNS_TYPE_A_WITH_B:"CheckResult_Type_AWithB",SNS_TYPE_B_WITH_A:"CheckResult_Type_BWithA",SNS_TYPE_BOTH_WAY:"CheckResult_Type_BothWay",NET_STATE_CONNECTED:"connected",NET_STATE_CONNECTING:"connecting",NET_STATE_DISCONNECTED:"disconnected",MSG_AT_ALL:"__kImSDK_MesssageAtALL__",READ_ALL_C2C_MSG:"readAllC2CMessage",READ_ALL_GROUP_MSG:"readAllGroupMessage",READ_ALL_MSG:"readAllMessage",USER_STATUS_UNKNOWN:0,USER_STATUS_ONLINE:1,USER_STATUS_OFFLINE:2,USER_STATUS_UNLOGINED:3},Ii=Ue("species"),Ti=function(e){return de>=51||!R((function(){var t=[];return(t.constructor={})[Ii]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Ci=sr.map,Si=Ti("map");rn({target:"Array",proto:!0,forced:!Si},{map:function(e){return Ci(this,e,arguments.length>1?arguments[1]:void 0)}});var Ei=function(){function e(){i(this,e),this.cache=[],this.options=null}return a(e,[{key:"use",value:function(e){if("function"!=typeof e)throw"middleware must be a function";return this.cache.push(e),this}},{key:"next",value:function(e){if(this.middlewares&&this.middlewares.length>0)return this.middlewares.shift().call(this,this.options,this.next.bind(this))}},{key:"run",value:function(e){return this.middlewares=this.cache.map((function(e){return e})),this.options=e,this.next()}}]),e}(),Mi=Mt.EXISTS,ki=rt.f,wi=Function.prototype,Oi=z(wi.toString),Di=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,Ai=z(Di.exec);x&&!Mi&&ki(wi,"name",{configurable:!0,get:function(){try{return Ai(Di,Oi(this))[1]}catch(Lk){return""}}});var Ri=Ue("isConcatSpreadable"),xi=A.TypeError,Li=de>=51||!R((function(){var e=[];return e[Ri]=!1,e.concat()[0]!==e})),Ni=Ti("concat"),Pi=function(e){if(!ne(e))return!1;var t=e[Ri];return void 0!==t?!!t:Kn(e)};rn({target:"Array",proto:!0,forced:!Li||!Ni},{concat:function(e){var t,n,r,i,o,a=ke(this),s=ir(a,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(Pi(o=-1===t?a:arguments[t])){if(c+(i=Pt(o))>9007199254740991)throw xi("Maximum allowed index exceeded");for(n=0;n<i;n++,c++)n in o&&Er(s,c,o[n])}else{if(c>=9007199254740991)throw xi("Maximum allowed index exceeded");Er(s,c++,o)}return s.length=c,s}});var ji=function(e,t,n){var r,i;return ci&&te(r=t.constructor)&&r!==n&&ne(i=r.prototype)&&i!==n.prototype&&ci(e,i),e},Ui=z(1..valueOf),Gi=Ht.f,Vi=Ye.f,Fi=rt.f,Bi=yn.trim,qi=A.Number,Hi=qi.prototype,zi=A.TypeError,Ki=z("".slice),Wi=z("".charCodeAt),Yi=function(e){var t=Fe(e,"number");return"bigint"==typeof t?t:Ji(t)},Ji=function(e){var t,n,r,i,o,a,s,c,u=Fe(e,"number");if(ge(u))throw zi("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=Bi(u),43===(t=Wi(u,0))||45===t){if(88===(n=Wi(u,2))||120===n)return NaN}else if(48===t){switch(Wi(u,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(a=(o=Ki(u,2)).length,s=0;s<a;s++)if((c=Wi(o,s))<48||c>i)return NaN;return parseInt(o,r)}return+u};if(tn("Number",!qi(" 0o1")||!qi("0b1")||qi("+0x1"))){for(var $i,Xi=function(e){var t=arguments.length<1?0:qi(Yi(e)),n=this;return oe(Hi,n)&&R((function(){Ui(n)}))?ji(Object(t),n,Xi):t},Zi=x?Gi(qi):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Qi=0;Zi.length>Qi;Qi++)Oe(qi,$i=Zi[Qi])&&!Oe(Xi,$i)&&Fi(Xi,$i,Vi(qi,$i));Xi.prototype=Hi,Hi.constructor=Xi,kt(A,"Number",Xi)}var eo=R((function(){$r(1)}));rn({target:"Object",stat:!0,forced:eo,sham:!Kr},{getPrototypeOf:function(e){return $r(ke(e))}}),rn({target:"Array",stat:!0},{isArray:Kn});var to=function(){var e=Ze(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},no=A.RegExp,ro=R((function(){var e=no("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),io=ro||R((function(){return!no("a","y").sticky})),oo={BROKEN_CARET:ro||R((function(){var e=no("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),MISSED_STICKY:io,UNSUPPORTED_Y:ro},ao=A.RegExp,so=R((function(){var e=ao(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),co=A.RegExp,uo=R((function(){var e=co("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),lo=Tt.get,po=Ee("native-string-replace",String.prototype.replace),fo=RegExp.prototype.exec,ho=fo,go=z("".charAt),vo=z("".indexOf),mo=z("".replace),_o=z("".slice),yo=function(){var e=/a/,t=/b*/g;return P(fo,e,"a"),P(fo,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),bo=oo.BROKEN_CARET,Io=void 0!==/()??/.exec("")[1];(yo||Io||bo||so||uo)&&(ho=function(e){var t,n,r,i,o,a,s,c=this,u=lo(c),l=pn(e),d=u.raw;if(d)return d.lastIndex=c.lastIndex,t=P(ho,d,l),c.lastIndex=d.lastIndex,t;var p=u.groups,f=bo&&c.sticky,h=P(to,c),g=c.source,v=0,m=l;if(f&&(h=mo(h,"y",""),-1===vo(h,"g")&&(h+="g"),m=_o(l,c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==go(l,c.lastIndex-1))&&(g="(?: "+g+")",m=" "+m,v++),n=new RegExp("^(?:"+g+")",h)),Io&&(n=new RegExp("^"+g+"$(?!\\s)",h)),yo&&(r=c.lastIndex),i=P(fo,f?n:c,m),f?i?(i.input=_o(i.input,v),i[0]=_o(i[0],v),i.index=c.lastIndex,c.lastIndex+=i[0].length):c.lastIndex=0:yo&&i&&(c.lastIndex=c.global?i.index+i[0].length:r),Io&&i&&i.length>1&&P(po,i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&p)for(i.groups=a=qn(null),o=0;o<p.length;o++)a[(s=p[o])[0]]=i[s[1]];return i});var To=ho;rn({target:"RegExp",proto:!0,forced:/./.exec!==To},{exec:To});var Co=Date.prototype,So=z(Co.toString),Eo=z(Co.getTime);"Invalid Date"!=String(new Date(NaN))&&kt(Co,"toString",(function(){var e=Eo(this);return e==e?So(this):"Invalid Date"}));var Mo=Mt.PROPER,ko=RegExp.prototype,wo=ko.toString,Oo=z(to),Do=R((function(){return"/a/b"!=wo.call({source:"a",flags:"b"})})),Ao=Mo&&"toString"!=wo.name;(Do||Ao)&&kt(RegExp.prototype,"toString",(function(){var e=Ze(this),t=pn(e.source),n=e.flags;return"/"+t+"/"+pn(void 0===n&&oe(ko,e)&&!("flags"in ko)?Oo(e):n)}),{unsafe:!0});var Ro=Ue("species"),xo=RegExp.prototype,Lo=function(e,t,n,r){var i=Ue(e),o=!R((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),a=o&&!R((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[Ro]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return t=!0,null},n[i](""),!t}));if(!o||!a||n){var s=z(/./[i]),c=t(i,""[e],(function(e,t,n,r,i){var a=z(e),c=t.exec;return c===To||c===xo.exec?o&&!i?{done:!0,value:s(t,n,r)}:{done:!0,value:a(n,t,r)}:{done:!1}}));kt(String.prototype,e,c[0]),kt(xo,i,c[1])}r&&it(xo[i],"sham",!0)},No=zr.charAt,Po=function(e,t,n){return t+(n?No(e,t).length:1)},jo=A.TypeError,Uo=function(e,t){var n=e.exec;if(te(n)){var r=P(n,e,t);return null!==r&&Ze(r),r}if("RegExp"===Y(e))return P(To,e,t);throw jo("RegExp#exec called on incompatible receiver")};Lo("match",(function(e,t,n){return[function(t){var n=Q(this),r=null==t?void 0:be(t,e);return r?P(r,t,n):new RegExp(t)[e](pn(n))},function(e){var r=Ze(this),i=pn(e),o=n(t,r,i);if(o.done)return o.value;if(!r.global)return Uo(r,i);var a=r.unicode;r.lastIndex=0;for(var s,c=[],u=0;null!==(s=Uo(r,i));){var l=pn(s[0]);c[u]=l,""===l&&(r.lastIndex=Po(i,Nt(r.lastIndex),a)),u++}return 0===u?null:c}]}));var Go=A.Date,Vo=z(Go.prototype.getTime);rn({target:"Date",stat:!0},{now:function(){return Vo(new Go)}});var Fo=Ue("unscopables"),Bo=Array.prototype;null==Bo[Fo]&&rt.f(Bo,Fo,{configurable:!0,value:qn(null)});var qo=function(e){Bo[Fo][e]=!0},Ho=Ut.includes;rn({target:"Array",proto:!0},{includes:function(e){return Ho(this,e,arguments.length>1?arguments[1]:void 0)}}),qo("includes");var zo=Ue("match"),Ko=function(e){var t;return ne(e)&&(void 0!==(t=e[zo])?!!t:"RegExp"==Y(e))},Wo=A.TypeError,Yo=function(e){if(Ko(e))throw Wo("The method doesn't accept regular expressions");return e},Jo=Ue("match"),$o=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[Jo]=!1,"/./"[e](t)}catch(i){}}return!1},Xo=z("".indexOf);rn({target:"String",proto:!0,forced:!$o("includes")},{includes:function(e){return!!~Xo(pn(Q(this)),pn(Yo(e)),arguments.length>1?arguments[1]:void 0)}});var Zo=A.RangeError,Qo=z((function(e){var t=pn(Q(this)),n="",r=Dt(e);if(r<0||1/0==r)throw Zo("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n})),ea=z("".slice),ta=Math.ceil,na=function(e){return function(t,n,r){var i,o,a=pn(Q(t)),s=Nt(n),c=a.length,u=void 0===r?" ":pn(r);return s<=c||""==u?a:((o=Qo(u,ta((i=s-c)/u.length))).length>i&&(o=ea(o,0,i)),e?a+o:o+a)}},ra={start:na(!1),end:na(!0)}.start,ia=A.RangeError,oa=Math.abs,aa=Date.prototype,sa=aa.toISOString,ca=z(aa.getTime),ua=z(aa.getUTCDate),la=z(aa.getUTCFullYear),da=z(aa.getUTCHours),pa=z(aa.getUTCMilliseconds),fa=z(aa.getUTCMinutes),ha=z(aa.getUTCMonth),ga=z(aa.getUTCSeconds),va=R((function(){return"0385-07-25T07:06:39.999Z"!=sa.call(new Date(-50000000000001))}))||!R((function(){sa.call(new Date(NaN))}))?function(){if(!isFinite(ca(this)))throw ia("Invalid time value");var e=la(this),t=pa(this),n=e<0?"-":e>9999?"+":"";return n+ra(oa(e),n?6:4,0)+"-"+ra(ha(this)+1,2,0)+"-"+ra(ua(this),2,0)+"T"+ra(da(this),2,0)+":"+ra(fa(this),2,0)+":"+ra(ga(this),2,0)+"."+ra(t,3,0)+"Z"}:sa;rn({target:"Date",proto:!0,forced:Date.prototype.toISOString!==va},{toISOString:va});var ma=Function.prototype,_a=ma.apply,ya=ma.call,ba="object"==typeof Reflect&&Reflect.apply||(L?ya.bind(_a):function(){return ya.apply(_a,arguments)}),Ia=Math.floor,Ta=z("".charAt),Ca=z("".replace),Sa=z("".slice),Ea=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Ma=/\$([$&'`]|\d{1,2})/g,ka=function(e,t,n,r,i,o){var a=n+e.length,s=r.length,c=Ma;return void 0!==i&&(i=ke(i),c=Ea),Ca(o,c,(function(o,c){var u;switch(Ta(c,0)){case"$":return"$";case"&":return e;case"`":return Sa(t,0,n);case"'":return Sa(t,a);case"<":u=i[Sa(c,1,-1)];break;default:var l=+c;if(0===l)return o;if(l>s){var d=Ia(l/10);return 0===d?o:d<=s?void 0===r[d-1]?Ta(c,1):r[d-1]+Ta(c,1):o}u=r[l-1]}return void 0===u?"":u}))},wa=Ue("replace"),Oa=Math.max,Da=Math.min,Aa=z([].concat),Ra=z([].push),xa=z("".indexOf),La=z("".slice),Na="$0"==="a".replace(/./,"$0"),Pa=!!/./[wa]&&""===/./[wa]("a","$0");Lo("replace",(function(e,t,n){var r=Pa?"$":"$0";return[function(e,n){var r=Q(this),i=null==e?void 0:be(e,wa);return i?P(i,e,r,n):P(t,pn(r),e,n)},function(e,i){var o=Ze(this),a=pn(e);if("string"==typeof i&&-1===xa(i,r)&&-1===xa(i,"$<")){var s=n(t,o,a,i);if(s.done)return s.value}var c=te(i);c||(i=pn(i));var u=o.global;if(u){var l=o.unicode;o.lastIndex=0}for(var d=[];;){var p=Uo(o,a);if(null===p)break;if(Ra(d,p),!u)break;""===pn(p[0])&&(o.lastIndex=Po(a,Nt(o.lastIndex),l))}for(var f,h="",g=0,v=0;v<d.length;v++){for(var m=pn((p=d[v])[0]),_=Oa(Da(Dt(p.index),a.length),0),y=[],b=1;b<p.length;b++)Ra(y,void 0===(f=p[b])?f:String(f));var I=p.groups;if(c){var T=Aa([m],y,_,a);void 0!==I&&Ra(T,I);var C=pn(ba(i,void 0,T))}else C=ka(m,a,_,y,I,i);_>=g&&(h+=La(a,g,_)+C,g=_+m.length)}return h+La(a,g)}]}),!!R((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!Na||Pa);var ja=rt.f,Ua=Tt.set,Ga=Tt.getterFor("Array Iterator"),Va=gi(Array,"Array",(function(e,t){Ua(this,{type:"Array Iterator",target:ee(e),index:0,kind:t})}),(function(){var e=Ga(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),Fa=Ir.Arguments=Ir.Array;if(qo("keys"),qo("values"),qo("entries"),x&&"values"!==Fa.name)try{ja(Fa,"name",{value:"values"})}catch(Lk){}var Ba=Ue("iterator"),qa=Ue("toStringTag"),Ha=Va.values,za=function(e,t){if(e){if(e[Ba]!==Ha)try{it(e,Ba,Ha)}catch(Lk){e[Ba]=Ha}if(e[qa]||it(e,qa,t),pr[t])for(var n in Va)if(e[n]!==Va[n])try{it(e,n,Va[n])}catch(Lk){e[n]=Va[n]}}};for(var Ka in pr)za(A[Ka]&&A[Ka].prototype,Ka);za(gr,"DOMTokenList");var Wa=Ti("slice"),Ya=Ue("species"),Ja=A.Array,$a=Math.max;rn({target:"Array",proto:!0,forced:!Wa},{slice:function(e,t){var n,r,i,o=ee(this),a=Pt(o),s=xt(e,a),c=xt(void 0===t?a:t,a);if(Kn(o)&&(n=o.constructor,(tr(n)&&(n===Ja||Kn(n.prototype))||ne(n)&&null===(n=n[Ya]))&&(n=void 0),n===Ja||void 0===n))return kn(o,s,c);for(r=new(void 0===n?Ja:n)($a(c-s,0)),i=0;s<c;s++,i++)s in o&&Er(r,i,o[s]);return r.length=i,r}});var Xa=z([].join),Za=X!=Object,Qa=cr("join",",");rn({target:"Array",proto:!0,forced:Za||!Qa},{join:function(e){return Xa(ee(this),void 0===e?",":e)}});var es=Ut.indexOf,ts=z([].indexOf),ns=!!ts&&1/ts([1],1,-0)<0,rs=cr("indexOf");rn({target:"Array",proto:!0,forced:ns||!rs},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return ns?ts(this,e,t)||0:es(this,e,t)}});var is=A.Array,os=Math.max,as=function(e,t,n){for(var r=Pt(e),i=xt(t,r),o=xt(void 0===n?r:n,r),a=is(os(o-i,0)),s=0;i<o;i++,s++)Er(a,s,e[i]);return a.length=s,a},ss=Ht.f,cs="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],us={f:function(e){return cs&&"Window"==Y(e)?function(e){try{return ss(e)}catch(Lk){return as(cs)}}(e):ss(ee(e))}},ls=us.f,ds=R((function(){return!Object.getOwnPropertyNames(1)}));rn({target:"Object",stat:!0,forced:ds},{getOwnPropertyNames:ls});var ps=sr.find,fs=!0;"find"in[]&&Array(1).find((function(){fs=!1})),rn({target:"Array",proto:!0,forced:fs},{find:function(e){return ps(this,e,arguments.length>1?arguments[1]:void 0)}}),qo("find");var hs,gs=Ye.f,vs=z("".startsWith),ms=z("".slice),_s=Math.min,ys=$o("startsWith"),bs=!(ys||(hs=gs(String.prototype,"startsWith"),!hs||hs.writable));rn({target:"String",proto:!0,forced:!bs&&!ys},{startsWith:function(e){var t=pn(Q(this));Yo(e);var n=Nt(_s(arguments.length>1?arguments[1]:void 0,t.length)),r=pn(e);return vs?vs(t,r,n):ms(t,n,n+r.length)===r}});var Is,Ts,Cs,Ss,Es=A.Promise,Ms=function(e,t,n){for(var r in t)kt(e,r,t[r],n);return e},ks=Ue("species"),ws=function(e){var t=ie(e),n=rt.f;x&&t&&!t[ks]&&n(t,ks,{configurable:!0,get:function(){return this}})},Os=A.TypeError,Ds=function(e,t){if(oe(t,e))return e;throw Os("Incorrect invocation")},As=A.TypeError,Rs=function(e,t){this.stopped=e,this.result=t},xs=Rs.prototype,Ls=function(e,t,n){var r,i,o,a,s,c,u,l=n&&n.that,d=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),h=zn(t,l),g=function(e){return r&&yr(r,"normal",e),new Rs(!0,e)},v=function(e){return d?(Ze(e),f?h(e[0],e[1],g):h(e[0],e[1])):f?h(e,g):h(e)};if(p)r=e;else{if(!(i=kr(e)))throw As(me(e)+" is not iterable");if(Sr(i)){for(o=0,a=Pt(e);a>o;o++)if((s=v(e[o]))&&oe(xs,s))return s;return new Rs(!1)}r=Or(e,i)}for(c=r.next;!(u=P(c,r)).done;){try{s=v(u.value)}catch(Lk){yr(r,"throw",Lk)}if("object"==typeof s&&s&&oe(xs,s))return s}return new Rs(!1)},Ns=A.TypeError,Ps=function(e){if(tr(e))return e;throw Ns(me(e)+" is not a constructor")},js=Ue("species"),Us=function(e,t){var n,r=Ze(e).constructor;return void 0===r||null==(n=Ze(r)[js])?t:Ps(n)},Gs=A.TypeError,Vs=function(e,t){if(e<t)throw Gs("Not enough arguments");return e},Fs=/(?:ipad|iphone|ipod).*applewebkit/i.test(ae),Bs="process"==Y(A.process),qs=A.setImmediate,Hs=A.clearImmediate,zs=A.process,Ks=A.Dispatch,Ws=A.Function,Ys=A.MessageChannel,Js=A.String,$s=0,Xs={};try{Is=A.location}catch(Lk){}var Zs=function(e){if(Oe(Xs,e)){var t=Xs[e];delete Xs[e],t()}},Qs=function(e){return function(){Zs(e)}},ec=function(e){Zs(e.data)},tc=function(e){A.postMessage(Js(e),Is.protocol+"//"+Is.host)};qs&&Hs||(qs=function(e){Vs(arguments.length,1);var t=te(e)?e:Ws(e),n=kn(arguments,1);return Xs[++$s]=function(){ba(t,void 0,n)},Ts($s),$s},Hs=function(e){delete Xs[e]},Bs?Ts=function(e){zs.nextTick(Qs(e))}:Ks&&Ks.now?Ts=function(e){Ks.now(Qs(e))}:Ys&&!Fs?(Ss=(Cs=new Ys).port2,Cs.port1.onmessage=ec,Ts=zn(Ss.postMessage,Ss)):A.addEventListener&&te(A.postMessage)&&!A.importScripts&&Is&&"file:"!==Is.protocol&&!R(tc)?(Ts=tc,A.addEventListener("message",ec,!1)):Ts="onreadystatechange"in ze("script")?function(e){jn.appendChild(ze("script")).onreadystatechange=function(){jn.removeChild(this),Zs(e)}}:function(e){setTimeout(Qs(e),0)});var nc,rc,ic,oc,ac,sc,cc,uc,lc={set:qs,clear:Hs},dc=/ipad|iphone|ipod/i.test(ae)&&void 0!==A.Pebble,pc=/web0s(?!.*chrome)/i.test(ae),fc=Ye.f,hc=lc.set,gc=A.MutationObserver||A.WebKitMutationObserver,vc=A.document,mc=A.process,_c=A.Promise,yc=fc(A,"queueMicrotask"),bc=yc&&yc.value;bc||(nc=function(){var e,t;for(Bs&&(e=mc.domain)&&e.exit();rc;){t=rc.fn,rc=rc.next;try{t()}catch(Lk){throw rc?oc():ic=void 0,Lk}}ic=void 0,e&&e.enter()},Fs||Bs||pc||!gc||!vc?!dc&&_c&&_c.resolve?((cc=_c.resolve(void 0)).constructor=_c,uc=zn(cc.then,cc),oc=function(){uc(nc)}):Bs?oc=function(){mc.nextTick(nc)}:(hc=zn(hc,A),oc=function(){hc(nc)}):(ac=!0,sc=vc.createTextNode(""),new gc(nc).observe(sc,{characterData:!0}),oc=function(){sc.data=ac=!ac}));var Ic=bc||function(e){var t={fn:e,next:void 0};ic&&(ic.next=t),rc||(rc=t,oc()),ic=t},Tc=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=ye(t),this.reject=ye(n)},Cc={f:function(e){return new Tc(e)}},Sc=function(e,t){if(Ze(e),ne(t)&&t.constructor===e)return t;var n=Cc.f(e);return(0,n.resolve)(t),n.promise},Ec=function(e){try{return{error:!1,value:e()}}catch(Lk){return{error:!0,value:Lk}}},Mc=function(){this.head=null,this.tail=null};Mc.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var kc,wc,Oc,Dc,Ac=Mc,Rc="object"==typeof window,xc=lc.set,Lc=Ue("species"),Nc="Promise",Pc=Tt.getterFor(Nc),jc=Tt.set,Uc=Tt.getterFor(Nc),Gc=Es&&Es.prototype,Vc=Es,Fc=Gc,Bc=A.TypeError,qc=A.document,Hc=A.process,zc=Cc.f,Kc=zc,Wc=!!(qc&&qc.createEvent&&A.dispatchEvent),Yc=te(A.PromiseRejectionEvent),Jc=!1,$c=tn(Nc,(function(){var e=ut(Vc),t=e!==String(Vc);if(!t&&66===de)return!0;if(de>=51&&/native code/.test(e))return!1;var n=new Vc((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(n.constructor={})[Lc]=r,!(Jc=n.then((function(){}))instanceof r)||!t&&Rc&&!Yc})),Xc=$c||!Pr((function(e){Vc.all(e).catch((function(){}))})),Zc=function(e){var t;return!(!ne(e)||!te(t=e.then))&&t},Qc=function(e,t){var n,r,i,o=t.value,a=1==t.state,s=a?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{s?(a||(2===t.rejection&&iu(t),t.rejection=1),!0===s?n=o:(l&&l.enter(),n=s(o),l&&(l.exit(),i=!0)),n===e.promise?u(Bc("Promise-chain cycle")):(r=Zc(n))?P(r,n,c,u):c(n)):u(o)}catch(Lk){l&&!i&&l.exit(),u(Lk)}},eu=function(e,t){e.notified||(e.notified=!0,Ic((function(){for(var n,r=e.reactions;n=r.get();)Qc(n,e);e.notified=!1,t&&!e.rejection&&nu(e)})))},tu=function(e,t,n){var r,i;Wc?((r=qc.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),A.dispatchEvent(r)):r={promise:t,reason:n},!Yc&&(i=A["on"+e])?i(r):"unhandledrejection"===e&&function(e,t){var n=A.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},nu=function(e){P(xc,A,(function(){var t,n=e.facade,r=e.value;if(ru(e)&&(t=Ec((function(){Bs?Hc.emit("unhandledRejection",r,n):tu("unhandledrejection",n,r)})),e.rejection=Bs||ru(e)?2:1,t.error))throw t.value}))},ru=function(e){return 1!==e.rejection&&!e.parent},iu=function(e){P(xc,A,(function(){var t=e.facade;Bs?Hc.emit("rejectionHandled",t):tu("rejectionhandled",t,e.value)}))},ou=function(e,t,n){return function(r){e(t,r,n)}},au=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,eu(e,!0))},su=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Bc("Promise can't be resolved itself");var r=Zc(t);r?Ic((function(){var n={done:!1};try{P(r,t,ou(su,n,e),ou(au,n,e))}catch(Lk){au(n,Lk,e)}})):(e.value=t,e.state=1,eu(e,!1))}catch(Lk){au({done:!1},Lk,e)}}};if($c&&(Fc=(Vc=function(e){Ds(this,Fc),ye(e),P(kc,this);var t=Pc(this);try{e(ou(su,t),ou(au,t))}catch(Lk){au(t,Lk)}}).prototype,(kc=function(e){jc(this,{type:Nc,done:!1,notified:!1,parent:!1,reactions:new Ac,rejection:!1,state:0,value:void 0})}).prototype=Ms(Fc,{then:function(e,t){var n=Uc(this),r=zc(Us(this,Vc));return n.parent=!0,r.ok=!te(e)||e,r.fail=te(t)&&t,r.domain=Bs?Hc.domain:void 0,0==n.state?n.reactions.add(r):Ic((function(){Qc(r,n)})),r.promise},catch:function(e){return this.then(void 0,e)}}),wc=function(){var e=new kc,t=Pc(e);this.promise=e,this.resolve=ou(su,t),this.reject=ou(au,t)},Cc.f=zc=function(e){return e===Vc||e===Oc?new wc(e):Kc(e)},te(Es)&&Gc!==Object.prototype)){Dc=Gc.then,Jc||(kt(Gc,"then",(function(e,t){var n=this;return new Vc((function(e,t){P(Dc,n,e,t)})).then(e,t)}),{unsafe:!0}),kt(Gc,"catch",Fc.catch,{unsafe:!0}));try{delete Gc.constructor}catch(Lk){}ci&&ci(Gc,Fc)}rn({global:!0,wrap:!0,forced:$c},{Promise:Vc}),ni(Vc,Nc,!1),ws(Nc),Oc=ie(Nc),rn({target:Nc,stat:!0,forced:$c},{reject:function(e){var t=zc(this);return P(t.reject,void 0,e),t.promise}}),rn({target:Nc,stat:!0,forced:$c},{resolve:function(e){return Sc(this,e)}}),rn({target:Nc,stat:!0,forced:Xc},{all:function(e){var t=this,n=zc(t),r=n.resolve,i=n.reject,o=Ec((function(){var n=ye(t.resolve),o=[],a=0,s=1;Ls(e,(function(e){var c=a++,u=!1;s++,P(n,t,e).then((function(e){u||(u=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=zc(t),r=n.reject,i=Ec((function(){var i=ye(t.resolve);Ls(e,(function(e){P(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var cu=oo.UNSUPPORTED_Y,uu=Math.min,lu=[].push,du=z(/./.exec),pu=z(lu),fu=z("".slice);Lo("split",(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=pn(Q(this)),i=void 0===n?4294967295:n>>>0;if(0===i)return[];if(void 0===e)return[r];if(!Ko(e))return P(t,r,e,i);for(var o,a,s,c=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,d=new RegExp(e.source,u+"g");(o=P(To,d,r))&&!((a=d.lastIndex)>l&&(pu(c,fu(r,l,o.index)),o.length>1&&o.index<r.length&&ba(lu,c,as(o,1)),s=o[0].length,l=a,c.length>=i));)d.lastIndex===o.index&&d.lastIndex++;return l===r.length?!s&&du(d,"")||pu(c,""):pu(c,fu(r,l)),c.length>i?as(c,0,i):c}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:P(t,this,e,n)}:t,[function(t,n){var i=Q(this),o=null==t?void 0:be(t,e);return o?P(o,t,i,n):P(r,pn(i),t,n)},function(e,i){var o=Ze(this),a=pn(e),s=n(r,o,a,i,r!==t);if(s.done)return s.value;var c=Us(o,RegExp),u=o.unicode,l=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(cu?"g":"y"),d=new c(cu?"^(?:"+o.source+")":o,l),p=void 0===i?4294967295:i>>>0;if(0===p)return[];if(0===a.length)return null===Uo(d,a)?[a]:[];for(var f=0,h=0,g=[];h<a.length;){d.lastIndex=cu?0:h;var v,m=Uo(d,cu?fu(a,h):a);if(null===m||(v=uu(Nt(d.lastIndex+(cu?h:0)),a.length))===f)h=Po(a,h,u);else{if(pu(g,fu(a,f,h)),g.length===p)return g;for(var _=1;_<=m.length-1;_++)if(pu(g,m[_]),g.length===p)return g;h=f=v}}return pu(g,fu(a,f)),g}]}),!!R((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),cu);var hu=zr.codeAt;rn({target:"String",proto:!0},{codePointAt:function(e){return hu(this,e)}});var gu=yn.trim,vu=z("".charAt),mu=A.parseFloat,_u=A.Symbol,yu=_u&&_u.iterator,bu=1/mu(fn+"-0")!=-1/0||yu&&!R((function(){mu(Object(yu))}))?function(e){var t=gu(pn(e)),n=mu(t);return 0===n&&"-"==vu(t,0)?-0:n}:mu;rn({global:!0,forced:parseFloat!=bu},{parseFloat:bu});var Iu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this,e),this.high=t,this.low=n}return a(e,[{key:"equal",value:function(e){return null!==e&&this.low===e.low&&this.high===e.high}},{key:"toString",value:function(){var e=Number(this.high).toString(16),t=Number(this.low).toString(16);if(t.length<8)for(var n=8-t.length;n;)t="0"+t,n--;return e+t}}]),e}(),Tu={TEST:{CHINA:{DEFAULT:"wss://wss-dev.tim.qq.com"},OVERSEA:{DEFAULT:"wss://wss-dev.tim.qq.com"},SINGAPORE:{DEFAULT:"wss://wsssgp-dev.im.qcloud.com"},KOREA:{DEFAULT:"wss://wsskr-dev.im.qcloud.com"},GERMANY:{DEFAULT:"wss://wssger-dev.im.qcloud.com"},IND:{DEFAULT:"wss://wssind-dev.im.qcloud.com"},JPN:{DEFAULT:"wss://wssjpn-dev.im.qcloud.com"},USA:{DEFAULT:"wss://wssusa-dev.im.qcloud.com"}},PRODUCTION:{CHINA:{DEFAULT:"wss://wss.im.qcloud.com",BACKUP:"wss://wss.tim.qq.com",STAT:"https://events.im.qcloud.com"},OVERSEA:{DEFAULT:"wss://wss.im.qcloud.com",BACKUP:"wss://wss.my-imcloud.com",STAT:"https://api.my-imcloud.com"},SINGAPORE:{DEFAULT:"wss://wsssgp.im.qcloud.com",BACKUP:"wss://wsssgp.my-imcloud.com",STAT:"https://apisgp.my-imcloud.com"},KOREA:{DEFAULT:"wss://wsskr.im.qcloud.com",BACKUP:"wss://wsskr.my-imcloud.com",STAT:"https://apikr.my-imcloud.com"},GERMANY:{DEFAULT:"wss://wssger.im.qcloud.com",BACKUP:"wss://wssger.my-imcloud.com",STAT:"https://apiger.my-imcloud.com"},IND:{DEFAULT:"wss://wssind.my-imcloud.com",BACKUP:"wss://wssind.im.qcloud.com",STAT:"https://apiind.my-imcloud.com"},JPN:{DEFAULT:"wss://wssjpn.im.qcloud.com",BACKUP:"wss://wssjpn.my-imcloud.com",STAT:"https://apijpn.my-imcloud.com"},USA:{DEFAULT:"wss://wssusa.im.qcloud.com",BACKUP:"wss://wssusa.my-imcloud.com",STAT:"https://apiusa.my-imcloud.com"}}},Cu={ANDROID:2,IOS:3,MAC:4,WEB:7,WX_MP:8,QQ_MP:9,TT_MP:10,BAIDU_MP:11,ALI_MP:12,IPAD:13,UNI_NATIVE_APP:15},Su="1.7.3",Eu=537048168,Mu="CHINA",ku="OVERSEA",wu="SINGAPORE",Ou="KOREA",Du="GERMANY",Au="IND",Ru="JPN",xu="USA",Lu={HOST:{CURRENT:{DEFAULT:"wss://wss.im.qcloud.com",STAT:"https://events.im.qcloud.com"},setCurrent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mu;this.CURRENT=Tu.PRODUCTION[e]}},NAME:{OPEN_IM:"openim",OPEN_IM_MSG_EXT:"openim_msg_ext_http_svc",GROUP:"group_open_http_svc",GROUP_AVCHATROOM:"group_open_avchatroom_http_svc",GROUP_COMMUNITY:"million_group_open_http_svc",GROUP_ATTR:"group_open_attr_http_svc",FRIEND:"sns",PROFILE:"profile",RECENT_CONTACT:"recentcontact",PIC:"openpic",BIG_GROUP_NO_AUTH:"group_open_http_noauth_svc",BIG_GROUP_LONG_POLLING:"group_open_long_polling_http_svc",BIG_GROUP_LONG_POLLING_NO_AUTH:"group_open_long_polling_http_noauth_svc",IM_OPEN_STAT:"imopenstat",WEB_IM:"webim",IM_COS_SIGN:"im_cos_sign_svr",CUSTOM_UPLOAD:"im_cos_msg",HEARTBEAT:"heartbeat",IM_OPEN_PUSH:"im_open_push",IM_OPEN_STATUS:"im_open_status",IM_LONG_MESSAGE:"im_long_msg",IM_CONFIG_MANAGER:"im_sdk_config_mgr",STAT_SERVICE:"StatSvc",OVERLOAD_PUSH:"OverLoadPush",IM_MSG_AUDIT_MGR:"im_msg_audit_mgr",TUIROOM_SVR:"tui_room_svr",IM_OPEN_TRANSLATE:"im_open_translate"},CMD:{LOGIN:"wslogin",LOGOUT_LONG_POLL:"longpollinglogout",LOGOUT:"wslogout",HELLO:"wshello",STAT_BACKGROUND:"ws_stat_background",STAT_FOREGROUND:"ws_stat_foreground",SET_TOKEN:"ws_stat_settoken",PORTRAIT_GET:"portrait_get_all",PORTRAIT_SET:"portrait_set",GET_LONG_POLL_ID:"getlongpollingid",LONG_POLL:"longpolling",AVCHATROOM_LONG_POLL:"get_msg",ADD_FRIEND:"friend_add",UPDATE_FRIEND:"friend_update",GET_FRIEND_LIST:"friend_get",GET_FRIEND_PROFILE:"friend_get_specified",DELETE_FRIEND:"friend_delete",CHECK_FRIEND:"friend_check",GET_FRIEND_GROUP_LIST:"group_get",RESPOND_FRIEND_APPLICATION:"friend_response",GET_FRIEND_APPLICATION_LIST:"pendency_get",DELETE_FRIEND_APPLICATION:"pendency_delete",REPORT_FRIEND_APPLICATION:"pendency_report",GET_GROUP_APPLICATION:"get_pendency",CREATE_FRIEND_GROUP:"group_add",DELETE_FRIEND_GROUP:"group_delete",UPDATE_FRIEND_GROUP:"group_update",GET_BLACKLIST:"black_list_get",ADD_BLACKLIST:"black_list_add",DELETE_BLACKLIST:"black_list_delete",CREATE_GROUP:"create_group",GET_JOINED_GROUPS:"get_joined_group_list",SET_GROUP_ATTRIBUTES:"set_group_attr",MODIFY_GROUP_ATTRIBUTES:"modify_group_attr",DELETE_GROUP_ATTRIBUTES:"delete_group_attr",CLEAR_GROUP_ATTRIBUTES:"clear_group_attr",GET_GROUP_ATTRIBUTES:"get_group_attr",SEND_MESSAGE:"sendmsg",REVOKE_C2C_MESSAGE:"msgwithdraw",DELETE_C2C_MESSAGE:"delete_c2c_msg_ramble",MODIFY_C2C_MESSAGE:"modify_c2c_msg",MODIFY_C2C_MESSAGE_EXTENSIONS:"set_key_values",GET_C2C_MESSAGE_EXTENSIONS:"get_key_values",SEND_GROUP_MESSAGE:"send_group_msg",REVOKE_GROUP_MESSAGE:"group_msg_recall",DELETE_GROUP_MESSAGE:"delete_group_ramble_msg_by_seq",MODIFY_GROUP_MESSAGE:"modify_group_msg",MODIFY_GROUP_MESSAGE_EXTENSIONS:"group_set_key_values",GET_GROUP_MESSAGE_EXTENSIONS:"group_get_key_values",GET_GROUP_INFO:"get_group_self_member_info",GET_GROUP_MEMBER_INFO:"get_specified_group_member_info",GET_GROUP_MEMBER_LIST:"get_group_member_info",GET_AVCHATROOM_MEMBER_LIST:"get_members",MARK_AVCHATROOM_MEMBER_INFO:"modify_user_info",QUIT_GROUP:"quit_group",CHANGE_GROUP_OWNER:"change_group_owner",DESTROY_GROUP:"destroy_group",ADD_GROUP_MEMBER:"add_group_member",DELETE_GROUP_MEMBER:"delete_group_member",BAN_AVCHATROOM_MEMBER:"ban_group_member",SEARCH_GROUP_BY_ID:"get_group_public_info",APPLY_JOIN_GROUP:"apply_join_group",HANDLE_APPLY_JOIN_GROUP:"handle_apply_join_group",HANDLE_GROUP_INVITATION:"handle_invite_join_group",MODIFY_GROUP_INFO:"modify_group_base_info",MODIFY_GROUP_MEMBER_INFO:"modify_group_member_info",DELETE_GROUP_SYSTEM_MESSAGE:"deletemsg",DELETE_GROUP_AT_TIPS:"deletemsg",GET_GROUP_NOTIFY:"get_group_notify",GET_CONVERSATION_LIST:"get",PAGING_GET_CONVERSATION_LIST:"page_get",DELETE_CONVERSATION:"delete",CLEAR_HISTORY_MESSAGE:"clear_msg",PIN_CONVERSATION:"top",SET_CONVERSATION_CUSTOM_DATA:"mark_contact",MARK_CONVERSATION:"mark_contact",CREATE_CONVERSATION_GROUP:"create_contact_group",DELETE_CONVERSATION_GROUP:"del_contact_group",UPDATE_CONVERSATION_GROUP:"update_contact_group",GET_CONVERSATION_GROUP_LIST:"get_contact_group",GET_MESSAGES:"getmsg",GET_C2C_ROAM_MESSAGES:"getroammsg",SET_C2C_PEER_MUTE_NOTIFICATIONS:"set_c2c_peer_mute_notifications",GET_C2C_PEER_MUTE_NOTIFICATIONS:"get_c2c_peer_mute_notifications",GET_GROUP_ROAM_MESSAGES:"group_msg_get",GET_READ_RECEIPT:"get_group_msg_receipt",GET_READ_RECEIPT_DETAIL:"get_group_msg_receipt_detail",SEND_READ_RECEIPT:"group_msg_receipt",SEND_C2C_READ_RECEIPT:"c2c_msg_read_receipt",SET_C2C_MESSAGE_READ:"msgreaded",GET_PEER_READ_TIME:"get_peer_read_time",SET_GROUP_MESSAGE_READ:"msg_read_report",FILE_READ_AND_WRITE_AUTHKEY:"authkey",FILE_UPLOAD:"pic_up",COS_SIGN:"cos",COS_PRE_SIG:"pre_sig",VIDEO_COVER:"video_cover",TIM_WEB_REPORT_V2:"tim_web_report_v2",BIG_DATA_HALLWAY_AUTH_KEY:"authkey",GET_ONLINE_MEMBER_NUM:"get_online_member_num",ALIVE:"alive",MESSAGE_PUSH:"msg_push",MULTI_MESSAGE_PUSH:"multi_msg_push_ws",MESSAGE_PUSH_ACK:"ws_msg_push_ack",STATUS_FORCE_OFFLINE:"stat_forceoffline",DOWNLOAD_MERGER_MESSAGE:"get_relay_json_msg",UPLOAD_MERGER_MESSAGE:"save_relay_json_msg",FETCH_CLOUD_CONTROL_CONFIG:"fetch_config",PUSHED_CLOUD_CONTROL_CONFIG:"push_configv2",FETCH_COMMERCIAL_CONFIG:"fetch_imsdk_purchase_bitsv2",PUSHED_COMMERCIAL_CONFIG:"push_imsdk_purchase_bitsv2",KICK_OTHER:"KickOther",OVERLOAD_NOTIFY:"notify2",SET_ALL_MESSAGE_READ:"read_all_unread_msg",CREATE_TOPIC:"create_topic",DELETE_TOPIC:"destroy_topic",UPDATE_TOPIC_PROFILE:"modify_topic",GET_TOPIC_LIST:"get_topic",SET_SELF_STATUS:"ws_set_custom_status",GET_USER_STATUS:"ws_get_user_status",SUBSCRIBE_USER_STATUS:"ws_status_subscribe",UNSUBSCRIBE_USER_STATUS:"ws_status_unsubscribe",GET_RPOFANITY_LIST:"get_local_words",TRANSLATE_TEXT:"ws_batch_trans_text",UPDATE_GROUP_COUNTER:"update_group_counter",GET_GROUP_COUNTER:"get_group_counter"},CHANNEL:{SOCKET:1,XHR:2,AUTO:0},NAME_VERSION:{openim:"v4",group_open_http_svc:"v4",sns:"v4",profile:"v4",recentcontact:"v4",openpic:"v4",group_open_http_noauth_svc:"v4",group_open_long_polling_http_svc:"v4",group_open_long_polling_http_noauth_svc:"v4",imopenstat:"v4",im_cos_sign_svr:"v4",im_cos_msg:"v4",webim:"v4",im_open_push:"v4",im_open_status:"v4"}},Nu={SEARCH_MSG:new Iu(0,Math.pow(2,0)).toString(),SEARCH_GRP_SNS:new Iu(0,Math.pow(2,1)).toString(),AVCHATROOM_HISTORY_MSG:new Iu(0,Math.pow(2,2)).toString(),GRP_COMMUNITY:new Iu(0,Math.pow(2,3)).toString(),MSG_TO_SPECIFIED_GRP_MBR:new Iu(0,Math.pow(2,4)).toString(),AVCHATROOM_MBR_LIST:new Iu(0,Math.pow(2,6)).toString(),USER_STATUS:new Iu(0,Math.pow(2,7)).toString(),CONV_MARK:new Iu(0,Math.pow(2,9)).toString(),CONV_GROUP:new Iu(0,Math.pow(2,10)).toString(),AVCHATROOM_BAN_MBR:new Iu(0,Math.pow(2,11)).toString(),MSG_EXT:new Iu(0,Math.pow(2,13)).toString(),GRP_COUNTER:new Iu(0,Math.pow(2,15)).toString()},Pu="c2c_text_message",ju="c2c_custom_message",Uu="group_text_message",Gu="group_custom_message",Vu="user_profile",Fu="group_profile",Bu="group_member_profile";Lu.HOST.setCurrent(Mu);var qu,Hu,zu,Ku="undefined"!=typeof wx&&"function"==typeof wx.getSystemInfoSync&&Boolean(wx.getSystemInfoSync().fontSizeSetting),Wu="undefined"!=typeof qq&&"function"==typeof qq.getSystemInfoSync&&Boolean(qq.getSystemInfoSync().fontSizeSetting),Yu="undefined"!=typeof tt&&"function"==typeof tt.getSystemInfoSync&&Boolean(tt.getSystemInfoSync().fontSizeSetting),Ju="undefined"!=typeof swan&&"function"==typeof swan.getSystemInfoSync&&Boolean(swan.getSystemInfoSync().fontSizeSetting),$u="undefined"!=typeof my&&"function"==typeof my.getSystemInfoSync&&Boolean(my.getSystemInfoSync().fontSizeSetting),Xu="undefined"!=typeof uni&&"undefined"==typeof window,Zu="undefined"!=typeof uni,Qu=Ku||Wu||Yu||Ju||$u||Xu,el=("undefined"!=typeof uni||"undefined"!=typeof window)&&!Qu,tl=Wu?qq:Yu?tt:Ju?swan:$u?my:Ku?wx:Xu?uni:{},nl=(qu="WEB",vl?qu="WEB":Wu?qu="QQ_MP":Yu?qu="TT_MP":Ju?qu="BAIDU_MP":$u?qu="ALI_MP":Ku?qu="WX_MP":Xu&&(qu="UNI_NATIVE_APP"),Cu[qu]),rl=el&&window&&window.navigator&&window.navigator.userAgent||"",il=/AppleWebKit\/([\d.]+)/i.exec(rl),ol=(il&&parseFloat(il.pop()),/iPad/i.test(rl)),al=/iPhone/i.test(rl)&&!ol,sl=/iPod/i.test(rl),cl=al||ol||sl,ul=function(){var e=rl.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),ll=/Android/i.test(rl),dl=function(){var e=rl.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),pl=(ll&&/webkit/i.test(rl),/Firefox/i.test(rl),/Edge/i.test(rl)),fl=(!pl&&/Chrome/i.test(rl),function(){var e=rl.match(/Chrome\/(\d+)/);e&&e[1]&&parseFloat(e[1])}(),/MSIE/.test(rl)||rl.indexOf("Trident")>-1&&rl.indexOf("rv:11.0")>-1),hl=(/MSIE\s8\.0/.test(rl),function(){var e=/MSIE\s(\d+)\.\d/.exec(rl),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(rl)&&/rv:11.0/.test(rl)&&(t=11),t}()),gl=(/Safari/i.test(rl),/TBS\/\d+/i.test(rl)),vl=(function(){var e=rl.match(/TBS\/(\d+)/i);e&&e[1]&&e[1]}(),!gl&&/MQQBrowser\/\d+/i.test(rl),!gl&&/ QQBrowser\/\d+/i.test(rl),/(micromessenger|webbrowser)/i.test(rl)),ml=/Windows/i.test(rl),_l=/MAC OS X/i.test(rl),yl=(/MicroMessenger/i.test(rl),el&&"undefined"!=typeof Worker&&!fl),bl=ll||cl,Il=el&&void 0!==window.tencent_cloud_im_csig_flutter_for_web_25F_cy,Tl="undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};Hu="undefined"!=typeof console?console:void 0!==Tl&&Tl.console?Tl.console:"undefined"!=typeof window&&window.console?window.console:{};for(var Cl=function(){},Sl=["assert","clear","count","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],El=Sl.length;El--;)zu=Sl[El],console[zu]||(Hu[zu]=Cl);var Ml=Hu,kl=0,wl=function(){return(new Date).getTime()+kl},Ol=function(){kl=0},Dl=function(){return Math.floor(wl()/1e3)},Al=0;function Rl(){return Gd()?"%c TIM %c":"TIM"}function xl(){var e,t=((e=new Date).setTime(wl()),e);return t.toLocaleTimeString("en-US",{hour12:!1})+"."+function(e){var t;switch(e.toString().length){case 1:t="00"+e;break;case 2:t="0"+e;break;default:t=e}return t}(t.getMilliseconds())}var Ll={arguments2String:function(e){var t="";if(1===e.length)t=e[0];else for(var n=0,r=e.length;n<r;n++)Ql(e[n])?td(e[n])?t+=sd(e[n]):t+=JSON.stringify(e[n]):t+=e[n],t+=" ";return t},_exec:function(e,t){Gd()?Ml[e](Rl(),"background:#0abf5b; padding:1px; border-radius:3px; color: #fff","background:transparent",xl(),t):Ml[e]("".concat(Rl()," ").concat(xl()," ").concat(t))},d:function(){if(Al<=-1){var e=this.arguments2String(arguments);this._exec("debug",e)}},l:function(){if(Al<=0){var e=this.arguments2String(arguments);this._exec("log",e)}},log:function(){if(Al<=0){var e=this.arguments2String(arguments);this._exec("log",e)}},i:function(){if(Al<=1){var e=this.arguments2String(arguments);this._exec("info",e)}},w:function(){if(Al<=2){var e=this.arguments2String(arguments);this._exec("warn",e)}},e:function(){if(Al<=3){var e=this.arguments2String(arguments);this._exec("error",e)}},setLevel:function(e){e<4&&this._exec("log","set level from "+Al+" to "+e),Al=e},getLevel:function(){return Al}},Nl={JPG:1,JPEG:1,GIF:2,PNG:3,BMP:4,UNKNOWN:255},Pl={NICK:"Tag_Profile_IM_Nick",GENDER:"Tag_Profile_IM_Gender",BIRTHDAY:"Tag_Profile_IM_BirthDay",LOCATION:"Tag_Profile_IM_Location",SELFSIGNATURE:"Tag_Profile_IM_SelfSignature",ALLOWTYPE:"Tag_Profile_IM_AllowType",LANGUAGE:"Tag_Profile_IM_Language",AVATAR:"Tag_Profile_IM_Image",MESSAGESETTINGS:"Tag_Profile_IM_MsgSettings",ADMINFORBIDTYPE:"Tag_Profile_IM_AdminForbidType",LEVEL:"Tag_Profile_IM_Level",ROLE:"Tag_Profile_IM_Role"},jl={UNKNOWN:"Gender_Type_Unknown",FEMALE:"Gender_Type_Female",MALE:"Gender_Type_Male"},Ul={NONE:"AdminForbid_Type_None",SEND_OUT:"AdminForbid_Type_SendOut"},Gl={NEED_CONFIRM:"AllowType_Type_NeedConfirm",ALLOW_ANY:"AllowType_Type_AllowAny",DENY_ANY:"AllowType_Type_DenyAny"},Vl="JoinedSuccess",Fl="WaitAdminApproval",Bl="@TGS#_",ql="@TOPIC#_",Hl=["url"],zl=function(e){return"map"===nd(e)},Kl=function(e){return"file"===nd(e)},Wl=function(e){return null!==e&&("number"==typeof e&&!isNaN(e-0)||"object"===r(e)&&e.constructor===Number)},Yl=function(e){return"string"==typeof e},Jl=function(e){return null!==e&&"object"===r(e)},$l=function(e){if("object"!==r(e)||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n},Xl=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"array"===nd(e)},Zl=function(e){return void 0===e},Ql=function(e){return Xl(e)||Jl(e)},ed=function(e){return"function"==typeof e},td=function(e){return e instanceof Error},nd=function(e){return Object.prototype.toString.call(e).match(/^\[object (.*)\]$/)[1].toLowerCase()},rd=function(e){if("string"!=typeof e)return!1;var t=e[0];return!/[^a-zA-Z0-9]/.test(t)},id=0;Date.now||(Date.now=function(){return(new Date).getTime()});var od=function(){0===id&&(id=Date.now()-1);var e=Date.now()-id;return e>4294967295?(id+=4294967295,Date.now()-id):e},ad=function e(t,n,r,i){if(!Ql(t)||!Ql(n))return 0;for(var o,a=0,s=Object.keys(n),c=0,u=s.length;c<u;c++)if(o=s[c],!(Zl(n[o])||r&&r.includes(o)))if(Ql(t[o])&&Ql(n[o]))a+=e(t[o],n[o],r,i);else{if(i&&i.includes(n[o]))continue;t[o]!==n[o]&&(t[o]=n[o],a+=1)}return a},sd=function(e){return JSON.stringify(e,["message","code"])},cd=function(e){if(0===e.length)return 0;for(var t=0,n=0,r="undefined"!=typeof document&&void 0!==document.characterSet?document.characterSet:"UTF-8";void 0!==e[t];)n+=e[t++].charCodeAt[t]<=255?1:!1===r?3:2;return n},ud=function(e){var t=e||99999999;return Math.round(Math.random()*t)},ld="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",dd=ld.length,pd=function(e,t){for(var n in e)if(e[n]===t)return!0;return!1},fd={},hd=function(e){return-1===e.indexOf("http://")||-1===e.indexOf("https://")?"https://"+e:e.replace(/https|http/,"https")},gd=function e(t){if(0===Object.getOwnPropertyNames(t).length)return Object.create(null);var n=Array.isArray(t)?[]:Object.create(null),i="";for(var o in t)null!==t[o]?void 0!==t[o]?(i=r(t[o]),["string","number","function","boolean"].indexOf(i)>=0?n[o]=t[o]:n[o]=e(t[o])):n[o]=void 0:n[o]=null;return n};function vd(e,t){Xl(e)&&Xl(t)&&t.forEach((function(t){var n=t.key,r=t.value,i=e.find((function(e){return e.key===n}));i?i.value=r:e.push({key:n,value:r})}))}var md=function(e){return e===bi.GRP_PUBLIC},_d=function(e){return e===bi.GRP_AVCHATROOM},yd=function(e){var t=e.type,n=e.groupID;return t===bi.GRP_COMMUNITY||"".concat(n).startsWith(Bl)&&!"".concat(n).includes(ql)},bd=function(e){return"".concat(e).startsWith(Bl)&&"".concat(e).includes(ql)},Id=function(e){return Yl(e)&&e.slice(0,3)===bi.CONV_C2C},Td=function(e){return Yl(e)&&e.slice(0,5)===bi.CONV_GROUP},Cd=function(e){return Yl(e)&&e===bi.CONV_SYSTEM};function Sd(e,t){var n={};return Object.keys(e).forEach((function(r){n[r]=t(e[r],r)})),n}function Ed(e){return Qu?new Promise((function(t,n){tl.getImageInfo({src:e,success:function(e){t({width:e.width,height:e.height})},fail:function(){t({width:0,height:0})}})})):fl&&9===hl?Promise.resolve({width:0,height:0}):new Promise((function(t,n){var r=new Image;r.onload=function(){t({width:this.width,height:this.height}),r=null},r.onerror=function(){t({width:0,height:0}),r=null},r.src=e}))}function Md(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return"".concat(e()+e()).concat(e()).concat(e()).concat(e()).concat(e()).concat(e()).concat(e())}function kd(){var e="unknown";if(_l&&(e="mac"),ml&&(e="windows"),cl&&(e="ios"),ll&&(e="android"),Qu)try{var t=tl.getSystemInfoSync().platform;void 0!==t&&(e=t)}catch(Lk){}return e}function wd(e,t){e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var r=0;r<n;r++){var i=parseInt(e[r]),o=parseInt(t[r]);if(i>o)return 1;if(i<o)return-1}return 0}function Od(e){var t=e.originUrl,n=void 0===t?void 0:t,r=e.originWidth,i=e.originHeight,o=e.min,a=void 0===o?198:o,s=parseInt(r),c=parseInt(i),u={url:void 0,width:0,height:0};if((s<=c?s:c)<=a)u.url=n,u.width=s,u.height=c;else{c<=s?(u.width=Math.ceil(s*a/c),u.height=a):(u.width=a,u.height=Math.ceil(c*a/s));var l=n&&n.indexOf("?")>-1?"".concat(n,"&"):"".concat(n,"?");u.url="".concat(l,198===a?"imageView2/3/w/198/h/198":"imageView2/3/w/720/h/720")}return Zl(n)?h(u,Hl):u}function Dd(e){var t=e[2];e[2]=e[1],e[1]=t;for(var n=0;n<e.length;n++)e[n].setType(n)}function Ad(e){var t=e.servcmd;return t.slice(t.indexOf(".")+1)}function Rd(e,t){return Math.round(Number(e)*Math.pow(10,t))/Math.pow(10,t)}function xd(e,t){return e.includes(t)}function Ld(e,t){return e.includes(t)}function Nd(e){return e.split(ql)[0]}var Pd=function(e,t,n){if(Zl(t))return"";switch(e){case bi.MSG_TEXT:return t.text;case bi.MSG_IMAGE:return n?"[Image]":"[图片]";case bi.MSG_LOCATION:return n?"[Location]":"[位置]";case bi.MSG_AUDIO:return n?"[Voice]":"[语音]";case bi.MSG_VIDEO:return n?"[Video]":"[视频]";case bi.MSG_FILE:return n?"[File]":"[文件]";case bi.MSG_CUSTOM:return n?"[Custom Messages]":"[自定义消息]";case bi.MSG_GRP_TIP:return n?"[Group Notification]":"[群提示消息]";case bi.MSG_GRP_SYS_NOTICE:return n?"[Group System Message]":"[群系统通知]";case bi.MSG_FACE:return n?"[Animated Sticker]":"[动画表情]";case bi.MSG_MERGER:return n?"[Chat Record]":"[聊天记录]";default:return""}};function jd(e){return e===bi.MSG_TEXT||e===bi.MSG_CUSTOM||e===bi.MSG_LOCATION||e===bi.MSG_FACE}function Ud(e){var t=[];if(!Yl(e))return t;var n=e.length;if(0===n)return t;for(var r=n-1;r>=0;r--)"1"===e[r]&&t.push(Math.pow(2,n-r-1));return t}function Gd(){return!fl&&!Qu}function Vd(e){return"the length of userIDList cannot exceed ".concat(e)}var Fd=Object.prototype.hasOwnProperty;function Bd(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return 0===e;if("string"==typeof e)return 0===e.length;if("function"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return""===e.message;if($l(e)){for(var t in e)if(Fd.call(e,t))return!1;return!0}return!(!zl(e)&&(n=e,"set"!==nd(n))&&!Kl(e))&&0===e.size;var n}function qd(e,t,n){if(void 0===t)return!0;var r=!0;if($l(t))Object.keys(t).forEach((function(i){var o=1===e.length?e[0][i]:void 0;r=!!Hd(o,t[i],n,i)&&r}));else if(Xl(t))for(var i=0;i<t.length;i++)r=!!Hd(e[i],t[i],n,t[i].name)&&r;if(r)return r;throw new Error("Params validate failed.")}function Hd(e,t,n,r){if(void 0===t)return!0;var i=!0;if(t.required&&Bd(e)&&(Ll.e("[".concat(n,'] Missing required params: "').concat(r,'".')),i=!1),!Bd(e)){var o=nd(e),a=t.type.toLowerCase();o!==a&&("asyncfunction"===o&&"function"===a||(Ll.e("[".concat(n,'] Invalid params: type check failed for "').concat(r,'".Expected ').concat(t.type,".")),i=!1))}return t.validator&&!t.validator(e)&&(Ll.e("[".concat(n,"] Invalid params: custom validator check failed for params.")),i=!1),i}var zd={f:Ue},Kd=A,Wd=rt.f,Yd=sr.forEach,Jd=ft("hidden"),$d=Ue("toPrimitive"),Xd=Tt.set,Zd=Tt.getterFor("Symbol"),Qd=Object.prototype,ep=A.Symbol,tp=ep&&ep.prototype,np=A.TypeError,rp=A.QObject,ip=ie("JSON","stringify"),op=Ye.f,ap=rt.f,sp=us.f,cp=G.f,up=z([].push),lp=Ee("symbols"),dp=Ee("op-symbols"),pp=Ee("string-to-symbol-registry"),fp=Ee("symbol-to-string-registry"),hp=Ee("wks"),gp=!rp||!rp.prototype||!rp.prototype.findChild,vp=x&&R((function(){return 7!=qn(ap({},"a",{get:function(){return ap(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=op(Qd,t);r&&delete Qd[t],ap(e,t,n),r&&e!==Qd&&ap(Qd,t,r)}:ap,mp=function(e,t){var n=lp[e]=qn(tp);return Xd(n,{type:"Symbol",tag:e,description:t}),x||(n.description=t),n},_p=function(e,t,n){e===Qd&&_p(dp,t,n),Ze(e);var r=Be(t);return Ze(n),Oe(lp,r)?(n.enumerable?(Oe(e,Jd)&&e[Jd][r]&&(e[Jd][r]=!1),n=qn(n,{enumerable:V(0,!1)})):(Oe(e,Jd)||ap(e,Jd,V(1,{})),e[Jd][r]=!0),vp(e,r,n)):ap(e,r,n)},yp=function(e,t){Ze(e);var n=ee(t),r=Nn(n).concat(Cp(n));return Yd(r,(function(t){x&&!P(bp,n,t)||_p(e,t,n[t])})),e},bp=function(e){var t=Be(e),n=P(cp,this,t);return!(this===Qd&&Oe(lp,t)&&!Oe(dp,t))&&(!(n||!Oe(this,t)||!Oe(lp,t)||Oe(this,Jd)&&this[Jd][t])||n)},Ip=function(e,t){var n=ee(e),r=Be(t);if(n!==Qd||!Oe(lp,r)||Oe(dp,r)){var i=op(n,r);return!i||!Oe(lp,r)||Oe(n,Jd)&&n[Jd][r]||(i.enumerable=!0),i}},Tp=function(e){var t=sp(ee(e)),n=[];return Yd(t,(function(e){Oe(lp,e)||Oe(ht,e)||up(n,e)})),n},Cp=function(e){var t=e===Qd,n=sp(t?dp:ee(e)),r=[];return Yd(n,(function(e){!Oe(lp,e)||t&&!Oe(Qd,e)||up(r,lp[e])})),r};if(pe||(tp=(ep=function(){if(oe(tp,this))throw np("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?pn(arguments[0]):void 0,t=xe(e),n=function(e){this===Qd&&P(n,dp,e),Oe(this,Jd)&&Oe(this[Jd],t)&&(this[Jd][t]=!1),vp(this,t,V(1,e))};return x&&gp&&vp(Qd,t,{configurable:!0,set:n}),mp(t,e)}).prototype,kt(tp,"toString",(function(){return Zd(this).tag})),kt(ep,"withoutSetter",(function(e){return mp(xe(e),e)})),G.f=bp,rt.f=_p,Pn.f=yp,Ye.f=Ip,Ht.f=us.f=Tp,zt.f=Cp,zd.f=function(e){return mp(Ue(e),e)},x&&(ap(tp,"description",{configurable:!0,get:function(){return Zd(this).description}}),kt(Qd,"propertyIsEnumerable",bp,{unsafe:!0}))),rn({global:!0,wrap:!0,forced:!pe,sham:!pe},{Symbol:ep}),Yd(Nn(hp),(function(e){!function(e){var t=Kd.Symbol||(Kd.Symbol={});Oe(t,e)||Wd(t,e,{value:zd.f(e)})}(e)})),rn({target:"Symbol",stat:!0,forced:!pe},{for:function(e){var t=pn(e);if(Oe(pp,t))return pp[t];var n=ep(t);return pp[t]=n,fp[n]=t,n},keyFor:function(e){if(!ge(e))throw np(e+" is not a symbol");if(Oe(fp,e))return fp[e]},useSetter:function(){gp=!0},useSimple:function(){gp=!1}}),rn({target:"Object",stat:!0,forced:!pe,sham:!x},{create:function(e,t){return void 0===t?qn(e):yp(qn(e),t)},defineProperty:_p,defineProperties:yp,getOwnPropertyDescriptor:Ip}),rn({target:"Object",stat:!0,forced:!pe},{getOwnPropertyNames:Tp,getOwnPropertySymbols:Cp}),rn({target:"Object",stat:!0,forced:R((function(){zt.f(1)}))},{getOwnPropertySymbols:function(e){return zt.f(ke(e))}}),ip){var Sp=!pe||R((function(){var e=ep();return"[null]"!=ip([e])||"{}"!=ip({a:e})||"{}"!=ip(Object(e))}));rn({target:"JSON",stat:!0,forced:Sp},{stringify:function(e,t,n){var r=kn(arguments),i=t;if((ne(t)||void 0!==e)&&!ge(e))return Kn(t)||(t=function(e,t){if(te(i)&&(t=P(i,this,e,t)),!ge(t))return t}),r[1]=t,ba(ip,null,r)}})}if(!tp[$d]){var Ep=tp.valueOf;kt(tp,$d,(function(e){return P(Ep,this)}))}ni(ep,"Symbol"),ht[Jd]=!0;var Mp=rt.f,kp=A.Symbol,wp=kp&&kp.prototype;if(x&&te(kp)&&(!("description"in wp)||void 0!==kp().description)){var Op={},Dp=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:pn(arguments[0]),t=oe(wp,this)?new kp(e):void 0===e?kp():kp(e);return""===e&&(Op[t]=!0),t};Yt(Dp,kp),Dp.prototype=wp,wp.constructor=Dp;var Ap="Symbol(test)"==String(kp("test")),Rp=z(wp.toString),xp=z(wp.valueOf),Lp=/^Symbol\((.*)\)[^)]+$/,Np=z("".replace),Pp=z("".slice);Mp(wp,"description",{configurable:!0,get:function(){var e=xp(this),t=Rp(e);if(Oe(Op,e))return"";var n=Ap?Pp(t,7,-1):Np(t,Lp,"$1");return""===n?void 0:n}}),rn({global:!0,forced:!0},{Symbol:Dp})}var jp={UNSEND:"unSend",SUCCESS:"success",FAIL:"fail"},Up={NOT_START:"notStart",PENDING:"pending",RESOLVED:"resolved",REJECTED:"rejected"},Gp=function(e){if(!e)return!1;if(Id(e)||Td(e)||Cd(e))return!0;var t=pf("InvalidConversationID",e);return t&&Ll.w(t),!1},Vp=function(e){""!==e.desc&&""!==pf("API_REFER")&&Ll.w("[".concat(e.api,"] | ").concat(e.param," | ").concat(e.desc,", ").concat(pf("API_REFER")).concat(e.api))},Fp=function(){return pf("StringRequiredLog")},Bp=function(e){return pf("NonEmptyStringRequiredLog",e)},qp=function(){return pf("NumberRequiredLog")},Hp=function(){return pf("UndefinedNotAllowedLog")},zp=function(){return pf("FileRequiredLog")},Kp=function(){return pf("FunctionRequiredLog")},Wp=function(){return pf("ArrayRequiredLog")},Yp=function(){return pf("NonEmptyArrayLog")},Jp=function(){return pf("CallbackMissingLog")},$p=function(){return pf("PositiveIntegerRequiredLog")},Xp=function(e,t){return pf("StringNotLongerThanLog",e,t)},Zp=function(e,t){return pf("NumberLessThanLog",e,t)},Qp=function(e){return pf("KeyValueStringRequiredLog",e)},ef=function(){return pf("PlainObjectRequiredLog")},tf=function(){return pf("NonEmptyContentRequiredLog")},nf=function(){return pf("FileNotSelectedLog")},rf=function(){return pf("MessageInstanceRequiredLog")},of=function(){return pf("NonAnonymousFunctionLog")},af=function(){return pf("MessageExtensionNotAvailableLog")},sf={type:"String",required:!0},cf={type:"Array",required:!0},uf={type:"Object",required:!0},lf={type:"Boolean",required:!0},df={type:"number",required:!0},pf=null,ff={hookGetAPITips:function(e){pf=e},login:{userID:sf,userSig:sf},addToBlacklist:{userIDList:cf},removeFromBlacklist:{userIDList:cf},on:[{name:"eventName",type:"String",validator:function(e){return"string"==typeof e&&0!==e.length||(Vp({api:"on",param:"eventName",desc:Bp("eventName")}),!1)}},{name:"handler",type:"Function",validator:function(e){return"function"!=typeof e?(Vp({api:"on",param:"handler",desc:Kp()}),!1):(""===e.name&&Vp({api:"on",param:"handler",desc:of()}),!0)}}],once:[{name:"eventName",type:"String",validator:function(e){return"string"==typeof e&&0!==e.length||(Vp({api:"once",param:"eventName",desc:Bp("eventName")}),!1)}},{name:"handler",type:"Function",validator:function(e){return"function"!=typeof e?(Vp({api:"once",param:"handler",desc:Kp()}),!1):(""===e.name&&Vp({api:"once",param:"handler",desc:of()}),!0)}}],off:[{name:"eventName",type:"String",validator:function(e){return"string"==typeof e&&0!==e.length||(Vp({api:"off",param:"eventName",desc:Bp("eventName")}),!1)}},{name:"handler",type:"Function",validator:function(e){return"function"!=typeof e?(Vp({api:"off",param:"handler",desc:Kp()}),!1):(""===e.name&&Vp({api:"off",param:"handler",desc:of()}),!0)}}],sendMessage:[n({name:"message"},uf)],setMessageExtensions:[n(n({name:"message"},uf),{},{validator:function(e){return e.status===jp.SUCCESS&&!0===e.isSupportExtension||(Vp({api:"setMessageExtensions",param:"message",desc:af()}),!1)}}),n({name:"extensions"},cf)],getMessageExtensions:[n(n({name:"message"},uf),{},{validator:function(e){return e.status===jp.SUCCESS&&!0===e.isSupportExtension||(Vp({api:"getMessageExtensions",param:"message",desc:af()}),!1)}})],deleteMessageExtensions:[n(n({name:"message"},uf),{},{validator:function(e){return e.status===jp.SUCCESS&&!0===e.isSupportExtension||(Vp({api:"deleteMessageExtensions",param:"message",desc:af()}),!1)}})],getMessageList:{conversationID:n(n({},sf),{},{validator:function(e){return Gp(e)}}),nextReqMessageID:{type:"String"},count:{type:"Number",validator:function(e){return!(!Zl(e)&&!/^[1-9][0-9]*$/.test(e))||(Vp({api:"getMessageList",param:"count",desc:$p()}),!1)}}},getMessageListHopping:{conversationID:n(n({},sf),{},{validator:function(e){return Gp(e)}}),sequence:{type:"Number"},time:{type:"Number"},direction:{type:"Number",validator:function(e){return!(!Zl(e)&&0!==e&&1!==e)||(Vp({api:"getMessageListHopping",param:"direction",desc:pf("0Or1RequiredLog")}),!1)}},count:{type:"Number",validator:function(e){return!(!Zl(e)&&!/^[1-9][0-9]*$/.test(e))||(Vp({api:"getMessageListHopping",param:"count",desc:$p}),!1)}}},setMessageRead:{conversationID:n(n({},sf),{},{validator:function(e){return Gp(e)}})},setAllMessageRead:{scope:{type:"String",required:!1,validator:function(e){return!e||-1!==[bi.READ_ALL_C2C_MSG,bi.READ_ALL_GROUP_MSG,bi.READ_ALL_MSG].indexOf(e)||(Vp({api:"setAllMessageRead",param:"scope",desc:"TIM.TYPES.READ_ALL_C2C_MSG or TIM.TYPES.READ_ALL_GROUP_MSG or TIM.TYPES.READ_ALL_MSG required"}),!1)}}},getConversationProfile:[n(n({name:"conversationID"},sf),{},{validator:function(e){return Gp(e)}})],deleteConversation:[n(n({name:"conversationID"},sf),{},{validator:function(e){return Gp(e)}})],clearHistoryMessage:[n(n({name:"conversationID"},sf),{},{validator:function(e){return Gp(e)}})],pinConversation:{conversationID:n(n({},sf),{},{validator:function(e){return Gp(e)}}),isPinned:n({},lf)},setConversationCustomData:{conversationIDList:n({},cf),customData:{type:"String",validator:function(e){return Yl(e)?!(e.length>256)||(Vp({api:"setConversationCustomData",param:"customData",desc:Xp("customData",256)}),!1):(Vp({api:"setConversationCustomData",param:"customData",desc:Fp()}),!1)}}},markConversation:{conversationIDList:n({},cf),markType:{type:"number",validator:function(e){return Wl(e)?e<=0?(Vp({api:"markConversation",param:"markType",desc:(t="markType",n=0,pf("NumberGreaterThanLog",t,n))}),!1):!(e>=Math.pow(2,64))||(Vp({api:"markConversation",param:"markType",desc:Zp("markType","Math.pow(2,64)")}),!1):(Vp({api:"markConversation",param:"markType",desc:qp()}),!1);var t,n}},enableMark:n({},lf)},createConversationGroup:{conversationIDList:n({},cf),groupName:n(n({},sf),{},{validator:function(e){return!!e&&(!(e.length>32)||(Vp({api:"createConversationGroup",param:"groupName",desc:Xp("groupName",32)}),!1))}})},deleteConversationGroup:[n({name:"groupName"},sf)],renameConversationGroup:{oldName:n({},sf),newName:n(n({},sf),{},{validator:function(e){return!!e&&(!(e.length>32)||(Vp({api:"renameConversationGroup",param:"newName",desc:Xp("newName",32)}),!1))}})},addConversationsToGroup:{conversationIDList:n({},cf),groupName:n({},sf)},deleteConversationsFromGroup:{conversationIDList:n({},cf),groupName:n({},sf)},getGroupList:{groupProfileFilter:{type:"Array"}},getGroupProfile:{groupID:sf,groupCustomFieldFilter:{type:"Array"},memberCustomFieldFilter:{type:"Array"}},getGroupProfileAdvance:{groupIDList:cf},createGroup:{name:sf},joinGroup:{groupID:sf,type:{type:"String"},applyMessage:{type:"String"}},quitGroup:[n({name:"groupID"},sf)],handleApplication:{message:uf,handleAction:sf,handleMessage:{type:"String"}},changeGroupOwner:{groupID:sf,newOwnerID:sf},updateGroupProfile:{groupID:sf,muteAllMembers:{type:"Boolean"}},dismissGroup:[n({name:"groupID"},sf)],searchGroupByID:[n({name:"groupID"},sf)],initGroupAttributes:{groupID:sf,groupAttributes:n(n({},uf),{},{validator:function(e){var t=!0;return Object.keys(e).forEach((function(n){if(!Yl(e[n]))return Vp({api:"initGroupAttributes",param:"groupAttributes",desc:Qp("value")}),t=!1})),t}})},setGroupAttributes:{groupID:sf,groupAttributes:n(n({},uf),{},{validator:function(e){var t=!0;return Object.keys(e).forEach((function(n){if(!Yl(e[n]))return Vp({api:"setGroupAttributes",param:"groupAttributes",desc:Qp("value")}),t=!1})),t}})},deleteGroupAttributes:{groupID:sf,keyList:{type:"Array",validator:function(e){if(Zl(e)||!Xl(e))return Vp({api:"deleteGroupAttributes",param:"keyList",desc:Wp()}),!1;if(!Bd(e)){var t=!0;return e.forEach((function(e){if(!Yl(e))return Vp({api:"deleteGroupAttributes",param:"keyList",desc:pf("StringArrayRequiredLog")}),t=!1})),t}return!0}}},getGroupAttributes:{groupID:sf,keyList:{type:"Array",validator:function(e){if(Zl(e)||!Xl(e))return Vp({api:"getGroupAttributes",param:"keyList",desc:Wp()}),!1;if(!Bd(e)){var t=!0;return e.forEach((function(e){if(!Yl(e))return Vp({api:"getGroupAttributes",param:"keyList",desc:Qp("key")}),t=!1})),t}return!0}}},setGroupCounters:{groupID:sf,counters:uf},increaseGroupCounter:{groupID:sf,key:sf,value:df},decreaseGroupCounter:{groupID:sf,key:sf,value:df},getGroupCounters:{groupID:sf},getGroupMemberList:{groupID:sf,count:{type:"Number"}},getGroupMemberProfile:{groupID:sf,userIDList:cf,memberCustomFieldFilter:{type:"Array"}},addGroupMember:{groupID:sf,userIDList:cf},setGroupMemberRole:{groupID:sf,userID:sf,role:sf},setGroupMemberMuteTime:{groupID:sf,userID:sf,muteTime:{type:"Number",validator:function(e){return e>=0}}},setGroupMemberNameCard:{groupID:sf,userID:{type:"String"},nameCard:{type:"String",validator:function(e){return Yl(e)?(e.length,!0):(Vp({api:"setGroupMemberNameCard",param:"nameCard",desc:Fp()}),!1)}}},setGroupMemberCustomField:{groupID:sf,userID:{type:"String"},memberCustomField:cf},deleteGroupMember:{groupID:sf},markGroupMemberList:{groupID:sf,markType:{type:"number",validator:function(e){return Wl(e)?!(e<1e3)||(Vp({api:"markGroupMemberList",param:"markType",desc:(t="markType",n=1e3,pf("NumberGreaterOrEqualLog",t,n))}),!1):(Vp({api:"markGroupMemberList",param:"markType",desc:qp()}),!1);var t,n}},userIDList:n({},cf),enableMark:n({},lf)},createTextMessage:{to:sf,conversationType:sf,payload:n(n({},uf),{},{validator:function(e){return $l(e)?Yl(e.text)?0!==e.text.length||(Vp({api:"createTextMessage",param:"payload.text",desc:tf()}),!1):(Vp({api:"createTextMessage",param:"payload.text",desc:Fp()}),!1):(Vp({api:"createTextMessage",param:"payload",desc:ef()}),!1)}})},createTextAtMessage:{to:sf,conversationType:sf,payload:n(n({},uf),{},{validator:function(e){return $l(e)?Yl(e.text)?0===e.text.length?(Vp({api:"createTextAtMessage",param:"payload.text",desc:tf()}),!1):!(e.atUserList&&!Xl(e.atUserList))||(Vp({api:"createTextAtMessage",param:"payload.atUserList",desc:Wp()}),!1):(Vp({api:"createTextAtMessage",param:"payload.text",desc:Fp()}),!1):(Vp({api:"createTextAtMessage",param:"payload",desc:ef()}),!1)}})},createCustomMessage:{to:sf,conversationType:sf,payload:n(n({},uf),{},{validator:function(e){return $l(e)?e.data&&!Yl(e.data)?(Vp({api:"createCustomMessage",param:"payload.data",desc:Fp()}),!1):e.description&&!Yl(e.description)?(Vp({api:"createCustomMessage",param:"payload.description",desc:Fp()}),!1):!(e.extension&&!Yl(e.extension))||(Vp({api:"createCustomMessage",param:"payload.extension",desc:Fp()}),!1):(Vp({api:"createCustomMessage",param:"payload",desc:ef()}),!1)}})},createImageMessage:{to:sf,conversationType:sf,payload:n(n({},uf),{},{validator:function(e){if(!$l(e))return Vp({api:"createImageMessage",param:"payload",desc:ef()}),!1;if(Zl(e.file))return Vp({api:"createImageMessage",param:"payload.file",desc:Hp()}),!1;if(el){if(!(e.file instanceof HTMLInputElement||Kl(e.file)))return $l(e.file)&&"undefined"!=typeof uni?0!==e.file.tempFilePaths.length&&0!==e.file.tempFiles.length||(Vp({api:"createImageMessage",param:"payload.file",desc:nf()}),!1):(Vp({api:"createImageMessage",param:"payload.file",desc:zp()}),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return Vp({api:"createImageMessage",param:"payload.file",desc:nf()}),!1}return!0},onProgress:{type:"Function",required:!1,validator:function(e){return Zl(e)&&Vp({api:"createImageMessage",param:"onProgress",desc:Jp()}),!0}}})},createAudioMessage:{to:sf,conversationType:sf,payload:n(n({},uf),{},{validator:function(e){return!!$l(e)||(Vp({api:"createAudioMessage",param:"payload",desc:ef()}),!1)}}),onProgress:{type:"Function",required:!1,validator:function(e){return Zl(e)&&Vp({api:"createAudioMessage",param:"onProgress",desc:Jp()}),!0}}},createVideoMessage:{to:sf,conversationType:sf,payload:n(n({},uf),{},{validator:function(e){if(!$l(e))return Vp({api:"createVideoMessage",param:"payload",desc:ef()}),!1;if(Zl(e.file))return Vp({api:"createVideoMessage",param:"payload.file",desc:Hp()}),!1;if(el){if(!(e.file instanceof HTMLInputElement||Kl(e.file)))return $l(e.file)&&"undefined"!=typeof uni?!!Kl(e.file.tempFile)||(Vp({api:"createVideoMessage",param:"payload.file",desc:nf()}),!1):(Vp({api:"createVideoMessage",param:"payload.file",desc:zp()}),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return Vp({api:"createVideoMessage",param:"payload.file",desc:nf()}),!1}return!0}}),onProgress:{type:"Function",required:!1,validator:function(e){return Zl(e)&&Vp({api:"createVideoMessage",param:"onProgress",desc:Jp()}),!0}}},createFaceMessage:{to:sf,conversationType:sf,payload:n(n({},uf),{},{validator:function(e){return $l(e)?Wl(e.index)?!!Yl(e.data)||(Vp({api:"createFaceMessage",param:"payload.data",desc:Fp()}),!1):(Vp({api:"createFaceMessage",param:"payload.index",desc:qp()}),!1):(Vp({api:"createFaceMessage",param:"payload",desc:ef()}),!1)}})},createFileMessage:{to:sf,conversationType:sf,payload:n(n({},uf),{},{validator:function(e){if(!$l(e))return Vp({api:"createFileMessage",param:"payload",desc:ef()}),!1;if(Zl(e.file))return Vp({api:"createFileMessage",param:"payload.file",desc:Hp()}),!1;if(el){if(!(e.file instanceof HTMLInputElement||Kl(e.file)))return $l(e.file)&&"undefined"!=typeof uni?0!==e.file.tempFilePaths.length&&0!==e.file.tempFiles.length||(Vp({api:"createFileMessage",param:"payload.file",desc:nf()}),!1):(Vp({api:"createFileMessage",param:"payload.file",desc:zp()}),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return Vp({api:"createFileMessage",param:"payload.file",desc:nf()}),!1}return!0}}),onProgress:{type:"Function",required:!1,validator:function(e){return Zl(e)&&Vp({api:"createFileMessage",param:"onProgress",desc:Jp()}),!0}}},createLocationMessage:{to:sf,conversationType:sf,payload:n(n({},uf),{},{validator:function(e){return $l(e)?Yl(e.description)?Wl(e.longitude)?!!Wl(e.latitude)||(Vp({api:"createLocationMessage",param:"payload.latitude",desc:qp()}),!1):(Vp({api:"createLocationMessage",param:"payload.longitude",desc:qp()}),!1):(Vp({api:"createLocationMessage",param:"payload.description",desc:Fp()}),!1):(Vp({api:"createLocationMessage",param:"payload",desc:ef()}),!1)}})},createMergerMessage:{to:sf,conversationType:sf,payload:n(n({},uf),{},{validator:function(e){if(Bd(e.messageList))return Vp({api:"createMergerMessage",param:"payload.messageList",desc:Yp()}),!1;if(Bd(e.compatibleText))return Vp({api:"createMergerMessage",param:"payload.compatibleText",desc:Bp("compatibleText")}),!1;var t=!1;return e.messageList.forEach((function(e){e.status===jp.FAIL&&(t=!0)})),!t||(Vp({api:"createMergerMessage",param:"payload.messageList",desc:pf("MergeFailedMessageLog")}),!1)}})},revokeMessage:[n(n({name:"message"},uf),{},{validator:function(e){return Bd(e)?(Vp({api:"revokeMessage",param:"message",desc:rf()}),!1):e.conversationType===bi.CONV_SYSTEM?(Vp({api:"revokeMessage",param:"message",desc:pf("MessageCanBeRevokedDesc")}),!1):!0!==e.isRevoked||(Vp({api:"revokeMessage",param:"message",desc:pf("MessageRevokedLog")}),!1)}})],deleteMessage:[n(n({name:"messageList"},cf),{},{validator:function(e){return!Bd(e)||(Vp({api:"deleteMessage",param:"messageList",desc:Yp()}),!1)}})],translateText:{sourceTextList:cf,sourceLanguage:sf,targetLanguage:sf},modifyMessage:[n(n({name:"message"},uf),{},{validator:function(e){return Bd(e)?(Vp({api:"modifyMessage",param:"message",desc:rf()}),!1):e.conversationType===bi.CONV_SYSTEM?(Vp({api:"modifyMessage",param:"message",desc:pf("MessageCanBeModifiedLog")}),!1):!0!==e._onlineOnlyFlag||(Vp({api:"modifyMessage",param:"message",desc:pf("OnlineMessageNotSupportLog")}),!1)}})],getUserProfile:{userIDList:{type:"Array",validator:function(e){return Xl(e)?(0===e.length&&Vp({api:"getUserProfile",param:"userIDList",desc:Yp()}),!0):(Vp({api:"getUserProfile",param:"userIDList",desc:Wp()}),!1)}}},updateMyProfile:{profileCustomField:{type:"Array",validator:function(e){return!!Zl(e)||!!Xl(e)||(Vp({api:"updateMyProfile",param:"profileCustomField",desc:Wp()}),!1)}}},setSelfStatus:{customStatus:{type:"String",validator:function(e){return!!Yl(e)||(Vp({api:"setSelfStatus",param:"customStatus",desc:Fp()}),!1)}}},getUserStatus:{userIDList:{type:"Array",validator:function(e){return Xl(e)?0!==e.length||(Vp({api:"getUserStatus",param:"userIDList",desc:Yp()}),!1):(Vp({api:"getUserStatus",param:"userIDList",desc:Wp()}),!1)}}},subscribeUserStatus:{userIDList:{type:"Array",validator:function(e){return Xl(e)?0!==e.length||(Vp({api:"subscribeUserStatus",param:"userIDList",desc:Yp()}),!1):(Vp({api:"subscribeUserStatus",param:"userIDList",desc:Wp()}),!1)}}},unsubscribeUserStatus:{userIDList:{type:"Array",validator:function(e){return!e||!!Xl(e)||(Vp({api:"subscribeUserStatus",param:"userIDList",desc:Wp()}),!1)}}},addFriend:{to:sf,source:{type:"String",required:!0,validator:function(e){return!!e&&(e.startsWith("AddSource_Type_")?!(e.replace("AddSource_Type_","").length>8)||(Vp({api:"addFriend",param:"source",desc:Xp("keyword",8)}),!1):(Vp({api:"addFriend",param:"source",desc:pf("SourcePrefixLog")}),!1))}},remark:{type:"String",required:!1,validator:function(e){return!(Yl(e)&&e.length>96)||(Vp({api:"addFriend",param:"remark",desc:Xp("remark",96)}),!1)}}},deleteFriend:{userIDList:cf},checkFriend:{userIDList:cf},getFriendProfile:{userIDList:cf},updateFriend:{userID:sf,remark:{type:"String",required:!1,validator:function(e){return!(Yl(e)&&e.length>96)||(Vp({api:"updateFriend",param:"remark",desc:Xp("remark",96)}),!1)}},friendCustomField:{type:"Array",required:!1,validator:function(e){if(e){if(!Xl(e))return Vp({api:"updateFriend",param:"friendCustomField",desc:Wp()}),!1;var t=!0;return e.forEach((function(e){return Yl(e.key)&&-1!==e.key.indexOf("Tag_SNS_Custom")?Yl(e.value)?e.key.replace("Tag_SNS_Custom_","").length>8?(Vp({api:"updateFriend",param:"friendCustomField",desc:Xp("keyword",8)}),t=!1):void 0:(Vp({api:"updateFriend",param:"friendCustomField",desc:Qp("value")}),t=!1):(Vp({api:"updateFriend",param:"friendCustomField",desc:pf("FriendCustomFieldPrefixLog")}),t=!1)})),t}return!0}}},acceptFriendApplication:{userID:sf},refuseFriendApplication:{userID:sf},deleteFriendApplication:{userID:sf},createFriendGroup:{name:sf},deleteFriendGroup:{name:sf},addToFriendGroup:{name:sf,userIDList:cf},removeFromFriendGroup:{name:sf,userIDList:cf},renameFriendGroup:{oldName:sf,newName:sf},sendMessageReadReceipt:[{name:"messageList",type:"Array",validator:function(e){return Xl(e)?0!==e.length||(Vp({api:"sendMessageReadReceipt",param:"messageList",desc:Yp()}),!1):(Vp({api:"sendMessageReadReceipt",param:"messageList",desc:Wp()}),!1)}}],getMessageReadReceiptList:[{name:"messageList",type:"Array",validator:function(e){return Xl(e)?0!==e.length||(Vp({api:"getMessageReadReceiptList",param:"messageList",desc:Yp()}),!1):(Vp({api:"getMessageReadReceiptList",param:"messageList",desc:Wp()}),!1)}}],createTopicInCommunity:{groupID:sf,topicName:sf},deleteTopicFromCommunity:{groupID:sf,topicIDList:{type:"Array",validator:function(e){return!e||!!Xl(e)||(Vp({api:"deleteTopicFromCommunity",param:"topicIDList",desc:Wp()}),!1)}}},updateTopicProfile:{groupID:sf,topicID:sf},getTopicList:{groupID:sf,topicIDList:{type:"Array",validator:function(e){return!e||!!Xl(e)||(Vp({api:"getTopicList",param:"topicIDList",desc:Wp()}),!1)}}}},hf={login:1,logout:1,on:1,once:1,off:1,setLogLevel:1,registerPlugin:1,destroy:1,createTextMessage:1,createTextAtMessage:1,createImageMessage:1,createAudioMessage:1,createVideoMessage:1,createCustomMessage:1,createFaceMessage:1,createFileMessage:1,createLocationMessage:1,createMergerMessage:1,downloadMergerMessage:1,createForwardMessage:1,sendMessage:1,resendMessage:1,revokeMessage:1,deleteMessage:1,translateText:1,modifyMessage:1,sendMessageReadReceipt:1,getGroupMessageReadMemberList:1,getMessageReadReceiptList:1,setMessageExtensions:1,getMessageExtensions:1,deleteMessageExtensions:1,getMessageList:1,findMessage:1,getMessageListHopping:1,setMessageRead:1,setAllMessageRead:1,getConversationList:1,getConversationProfile:1,deleteConversation:1,pinConversation:1,getTotalUnreadMessageCount:1,setConversationCustomData:1,markConversation:1,createConversationGroup:1,getConversationGroupList:1,deleteConversationGroup:1,renameConversationGroup:1,addConversationsToGroup:1,deleteConversationsFromGroup:1,clearHistoryMessage:1,getGroupList:1,getGroupProfile:1,createGroup:1,joinGroup:1,updateGroupProfile:1,quitGroup:1,dismissGroup:1,changeGroupOwner:1,searchGroupByID:1,setMessageRemindType:1,getGroupApplicationList:1,handleGroupApplication:1,initGroupAttributes:1,setGroupAttributes:1,deleteGroupAttributes:1,getGroupAttributes:1,setGroupCounters:1,increaseGroupCounter:1,decreaseGroupCounter:1,getGroupCounters:1,getJoinedCommunityList:1,createTopicInCommunity:1,deleteTopicFromCommunity:1,updateTopicProfile:1,getTopicList:1,getGroupMemberProfile:1,getGroupMemberList:1,addGroupMember:1,deleteGroupMember:1,setGroupMemberNameCard:1,setGroupMemberMuteTime:1,setGroupMemberRole:1,setGroupMemberCustomField:1,getGroupOnlineMemberCount:1,markGroupMemberList:1,getMyProfile:1,getUserProfile:1,updateMyProfile:1,setSelfStatus:1,getUserStatus:1,subscribeUserStatus:1,unsubscribeUserStatus:1,getBlacklist:1,addToBlacklist:1,removeFromBlacklist:1,getFriendList:1,addFriend:1,deleteFriend:1,checkFriend:1,updateFriend:1,getFriendProfile:1,getFriendApplicationList:1,refuseFriendApplication:1,deleteFriendApplication:1,acceptFriendApplication:1,setFriendApplicationRead:1,getFriendGroupList:1,createFriendGroup:1,renameFriendGroup:1,deleteFriendGroup:1,addToFriendGroup:1,removeFromFriendGroup:1,callExperimentalAPI:1},gf=!!Es&&R((function(){Es.prototype.finally.call({then:function(){}},(function(){}))}));if(rn({target:"Promise",proto:!0,real:!0,forced:gf},{finally:function(e){var t=Us(this,ie("Promise")),n=te(e);return this.then(n?function(n){return Sc(t,e()).then((function(){return n}))}:e,n?function(n){return Sc(t,e()).then((function(){throw n}))}:e)}}),te(Es)){var vf=ie("Promise").prototype.finally;Es.prototype.finally!==vf&&kt(Es.prototype,"finally",vf,{unsafe:!0})}var mf=R((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})),_f=Object.isExtensible,yf=R((function(){_f(1)}))||mf?function(e){return!!ne(e)&&(!mf||"ArrayBuffer"!=Y(e))&&(!_f||_f(e))}:_f,bf=!R((function(){return Object.isExtensible(Object.preventExtensions({}))})),If=k((function(e){var t=rt.f,n=!1,r=xe("meta"),i=0,o=function(e){t(e,r,{value:{objectID:"O"+i++,weakData:{}}})},a=e.exports={enable:function(){a.enable=function(){},n=!0;var e=Ht.f,t=z([].splice),i={};i[r]=1,e(i).length&&(Ht.f=function(n){for(var i=e(n),o=0,a=i.length;o<a;o++)if(i[o]===r){t(i,o,1);break}return i},rn({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:us.f}))},fastKey:function(e,t){if(!ne(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!Oe(e,r)){if(!yf(e))return"F";if(!t)return"E";o(e)}return e[r].objectID},getWeakData:function(e,t){if(!Oe(e,r)){if(!yf(e))return!0;if(!t)return!1;o(e)}return e[r].weakData},onFreeze:function(e){return bf&&n&&yf(e)&&!Oe(e,r)&&o(e),e}};ht[r]=!0})),Tf=(If.enable,If.fastKey,If.getWeakData,If.onFreeze,rt.f),Cf=If.fastKey,Sf=Tt.set,Ef=Tt.getterFor;!function(e,t,n){var r=-1!==e.indexOf("Map"),i=-1!==e.indexOf("Weak"),o=r?"set":"add",a=A[e],s=a&&a.prototype,c=a,u={},l=function(e){var t=z(s[e]);kt(s,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!ne(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return i&&!ne(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!ne(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(tn(e,!te(a)||!(i||s.forEach&&!R((function(){(new a).entries().next()})))))c=n.getConstructor(t,e,r,o),If.enable();else if(tn(e,!0)){var d=new c,p=d[o](i?{}:-0,1)!=d,f=R((function(){d.has(1)})),h=Pr((function(e){new a(e)})),g=!i&&R((function(){for(var e=new a,t=5;t--;)e[o](t,t);return!e.has(-0)}));h||((c=t((function(e,t){Ds(e,s);var n=ji(new a,e,c);return null!=t&&Ls(t,n[o],{that:n,AS_ENTRIES:r}),n}))).prototype=s,s.constructor=c),(f||g)&&(l("delete"),l("has"),r&&l("get")),(g||p)&&l(o),i&&s.clear&&delete s.clear}u[e]=c,rn({global:!0,forced:c!=a},u),ni(c,e),i||n.setStrong(c,e,r)}("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(e,t,n,r){var i=e((function(e,i){Ds(e,o),Sf(e,{type:t,index:qn(null),first:void 0,last:void 0,size:0}),x||(e.size=0),null!=i&&Ls(i,e[r],{that:e,AS_ENTRIES:n})})),o=i.prototype,a=Ef(t),s=function(e,t,n){var r,i,o=a(e),s=c(e,t);return s?s.value=n:(o.last=s={index:i=Cf(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=s),r&&(r.next=s),x?o.size++:e.size++,"F"!==i&&(o.index[i]=s)),e},c=function(e,t){var n,r=a(e),i=Cf(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return Ms(o,{clear:function(){for(var e=a(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,x?e.size=0:this.size=0},delete:function(e){var t=a(this),n=c(this,e);if(n){var r=n.next,i=n.previous;delete t.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),t.first==n&&(t.first=r),t.last==n&&(t.last=i),x?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=a(this),r=zn(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!c(this,e)}}),Ms(o,n?{get:function(e){var t=c(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),x&&Tf(o,"size",{get:function(){return a(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=Ef(t),o=Ef(r);gi(e,t,(function(e,t){Sf(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),ws(t)}});var Mf=/MSIE .\./.test(ae),kf=A.Function,wf=function(e){return function(t,n){var r=Vs(arguments.length,1)>2,i=te(t)?t:kf(t),o=r?kn(arguments,2):void 0;return e(r?function(){ba(i,this,o)}:i,n)}};rn({global:!0,bind:!0,forced:Mf},{setTimeout:wf(A.setTimeout),setInterval:wf(A.setInterval)});var Of=sr.filter,Df=Ti("filter");rn({target:"Array",proto:!0,forced:!Df},{filter:function(e){return Of(this,e,arguments.length>1?arguments[1]:void 0)}});var Af,Rf=1,xf=2,Lf=3,Nf=4,Pf=6,jf=7,Uf=8,Gf=9,Vf=10,Ff=11,Bf=12,qf=13,Hf=14,zf=15,Kf=16,Wf=17,Yf=18,Jf=19,$f=20,Xf=21,Zf=22,Qf=23,eh=24,th=25,nh=26,rh=27,ih=28,oh=29,ah=30,sh=31,ch=32,uh=function(){function e(t){i(this,e),this._m=t,this._n=""}return a(e,[{key:"isLoggedIn",value:function(){return this._m.getModule(Bf).isLoggedIn()}},{key:"isOversea",value:function(){return this._m.getModule(Bf).isOversea()}},{key:"isPrivateNetWork",value:function(){return this._m.getModule(Bf).isPrivateNetWork()}},{key:"getMyUserID",value:function(){return this._m.getModule(Bf).getUserID()}},{key:"getMyTinyID",value:function(){return this._m.getModule(Bf).getTinyID()}},{key:"getSDKAppID",value:function(){return this._m.getModule(Bf).getSDKAppID()}},{key:"isIntl",value:function(){return this._m.getModule(Bf).isIntl()}},{key:"isDevMode",value:function(){return this._m.getModule(Bf).isDevMode()}},{key:"getModule",value:function(e){return this._m.getModule(e)}},{key:"getPlatform",value:function(){return nl}},{key:"getNetworkType",value:function(){return this._m.getModule(zf).getNetworkType()}},{key:"probeNetwork",value:function(e){return this._m.getModule(zf).probe(e)}},{key:"getCloudConfig",value:function(e){return this._m.getModule(Qf).getCloudConfig(e)}},{key:"emitOuterEvent",value:function(e,t){this._m.getOuterEmitterInstance().emit(e,t)}},{key:"emitInnerEvent",value:function(e,t){this._m.getInnerEmitterInstance().emit(e,t)}},{key:"getInnerEmitterInstance",value:function(){return this._m.getInnerEmitterInstance()}},{key:"generateTjgID",value:function(e){return this._m.getModule(Bf).getTinyID()+"-"+e.random}},{key:"filterModifiedMessage",value:function(e){if(!Bd(e)){var t=e.filter((function(e){return!0===e.isModified}));t.length>0&&this.emitOuterEvent(yi.MESSAGE_MODIFIED,t)}}},{key:"filterUnmodifiedMessage",value:function(e){return Bd(e)?[]:e.filter((function(e){return!1===e.isModified}))}},{key:"request",value:function(e){return this._m.getModule($f).request(e)}},{key:"canIUse",value:function(e){return this._m.getModule(rh).canIUse(e)}},{key:"getErrorMessage",value:function(e,t,n){return this._m.getErrorMessage(e,t,n)}},{key:"outputWarning",value:function(e,t,n){var r=this.getErrorMessage(e,t,n);r&&Ll.w(r)}}]),e}(),lh="wslogin",dh="wslogout",ph="wshello",fh="KickOther",hh="getmsg",gh="authkey",vh="sendmsg",mh="send_group_msg",_h="portrait_get_all",yh="portrait_set",bh="black_list_get",Ih="black_list_add",Th="black_list_delete",Ch="msgwithdraw",Sh="msgreaded",Eh="set_c2c_peer_mute_notifications",Mh="get_c2c_peer_mute_notifications",kh="getroammsg",wh="get_peer_read_time",Oh="delete_c2c_msg_ramble",Dh="modify_c2c_msg",Ah="set_key_values",Rh="get_key_values",xh="page_get",Lh="get",Nh="delete",Ph="clear_msg",jh="top",Uh="deletemsg",Gh="set_conv_custom_data",Vh="mark_contact",Fh="create_contact_group",Bh="del_contact_group",qh="update_contact_group",Hh="add_conv_to_group",zh="del_conv_from_group",Kh="get_contact_group",Wh="get_joined_group_list",Yh="get_group_self_member_info",Jh="create_group",$h="destroy_group",Xh="modify_group_base_info",Zh="apply_join_group",Qh="apply_join_group_noauth",eg="quit_group",tg="get_group_public_info",ng="change_group_owner",rg="handle_apply_join_group",ig="handle_invite_join_group",og="group_msg_recall",ag="msg_read_report",sg="read_all_unread_msg",cg="group_msg_get",ug="get_group_msg_receipt",lg="group_msg_receipt",dg="c2c_msg_read_receipt",pg="get_group_msg_receipt_detail",fg="get_pendency",hg="deletemsg",gg="get_msg",vg="get_msg_noauth",mg="get_online_member_num",_g="delete_group_ramble_msg_by_seq",yg="modify_group_msg",bg="set_group_attr",Ig="modify_group_attr",Tg="delete_group_attr",Cg="clear_group_attr",Sg="get_group_attr",Eg="group_set_key_values",Mg="group_get_key_values",kg="get_group_notify",wg="update_group_counter",Og="get_group_counter",Dg="get_group_member_info",Ag="get_members",Rg="get_specified_group_member_info",xg="add_group_member",Lg="delete_group_member",Ng="ban_group_member",Pg="modify_group_member_info",jg="modify_user_info",Ug="cos",Gg="pre_sig",Vg="video_cover",Fg="tim_web_report_v2",Bg="alive",qg="msg_push",Hg="multi_msg_push_ws",zg="ws_msg_push_ack",Kg="stat_forceoffline",Wg="save_relay_json_msg",Yg="get_relay_json_msg",Jg="fetch_config",$g="push_configv2",Xg="fetch_imsdk_purchase_bitsv2",Zg="push_imsdk_purchase_bitsv2",Qg="notify2",ev="create_topic",tv="destroy_topic",nv="modify_topic",rv="get_topic",iv="ws_set_custom_status",ov="ws_get_user_status",av="ws_status_subscribe",sv="ws_status_unsubscribe",cv="ws_stat_background",uv="ws_stat_foreground",lv="ws_stat_settoken",dv="get_local_words",pv="ws_batch_trans_text",fv=2e3,hv=2002,gv=2003,vv=2022,mv=2023,_v=2024,yv=2025,bv=2040,Iv=2041,Tv=2100,Cv=2101,Sv=2105,Ev=2106,Mv=2108,kv=2109,wv=2110,Ov=2111,Dv=2112,Av=2114,Rv=2115,xv=2116,Lv=2117,Nv=2251,Pv=2252,jv=2253,Uv=2300,Gv=2301,Vv=2350,Fv=2351,Bv=2352,qv=2400,Hv=2401,zv=2402,Kv=2403,Wv=2450,Yv=2451,Jv=2452,$v=2453,Xv=2480,Zv=2481,Qv=2500,em=2501,tm=2502,nm=2503,rm=2600,im=2601,om=2602,am=2603,sm=2620,cm=2621,um=2622,lm=2623,dm=2660,pm=2661,fm=2662,hm=2681,gm=2682,vm=2683,mm=2684,_m=2685,ym=2686,bm=2721,Im=2722,Tm=2742,Cm=2800,Sm=2801,Em=2805,Mm=2903,km=2905,wm=2996,Om=2997,Dm=2998,Am=2999,Rm=3e3,xm=3001,Lm=3002,Nm=3003,Pm=3004,jm=3005,Um=3006,Gm=3021,Vm=3122,Fm=3123,Bm=20002,qm=70001,Hm=1002,zm=60022,Km="networkRTT",Wm="messageE2EDelay",Ym="sendMessageC2C",Jm="sendMessageGroup",$m="sendMessageGroupAV",Xm="sendMessageRichMedia",Zm="cosUpload",Qm="messageReceivedGroup",e_="messageReceivedGroupAVPush",t_="messageReceivedGroupAVPull",n_=(s(Af={},Km,2),s(Af,Wm,3),s(Af,Ym,4),s(Af,Jm,5),s(Af,$m,6),s(Af,Xm,7),s(Af,Qm,8),s(Af,e_,9),s(Af,t_,10),s(Af,Zm,11),Af),r_={info:4,warning:5,error:6},i_={wifi:1,"2g":2,"3g":3,"4g":4,"5g":5,unknown:6,none:7,online:8},o_={login:4},a_=function(){function e(t){i(this,e),this._n="SSOLogData",this.eventType=o_[t]||0,this.timestamp=0,this.networkType=8,this.code=0,this.message="",this.moreMessage="",this.extension=t,this.costTime=0,this.duplicate=!1,this.level=4,this.uiPlatform=void 0,this._sentFlag=!1,this._startts=wl()}return a(e,[{key:"updateTimeStamp",value:function(){this.timestamp=wl()}},{key:"start",value:function(e){return this._startts=e,this}},{key:"end",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._sentFlag){var n=wl();0===this.costTime&&(this.costTime=n-this._startts),this.setMoreMessage("startts:".concat(this._startts," endts:").concat(n)),t?(this._sentFlag=!0,this._eventStatModule&&this._eventStatModule.pushIn(this)):setTimeout((function(){e._sentFlag=!0,e._eventStatModule&&e._eventStatModule.pushIn(e)}),0)}}},{key:"setError",value:function(e,t,n){if(!(e instanceof Error))return Ll.w("".concat(this._n,".setError value not instanceof Error, please check!")),this;if(this._sentFlag)return this;if(this.setNetworkType(n),t)e.code&&this.setCode(e.code),e.message&&this.setMoreMessage(e.message);else{var r=Em;this.setCode(r)}return this.setLevel("error"),this}},{key:"setCode",value:function(e){return Zl(e)||this._sentFlag||("ECONNABORTED"===e&&(this.code=103),Wl(e)?this.code=e:Ll.w("".concat(this._n,".setCode value not a number, please check!"),e,r(e))),this}},{key:"setMessage",value:function(e){return Zl(e)||this._sentFlag||(Wl(e)&&(this.message=e.toString()),Yl(e)&&(this.message=e)),this}},{key:"setCostTime",value:function(e){return this.costTime=e,this}},{key:"setLevel",value:function(e){return Zl(e)||this._sentFlag||(this.level=r_[e]),this}},{key:"setMoreMessage",value:function(e){return Bd(this.moreMessage)?this.moreMessage="".concat(e):this.moreMessage+=" ".concat(e),this}},{key:"setNetworkType",value:function(e){if(Zl(e))Ll.w("".concat(this._n,".setNetworkType value is undefined, please check!"));else{var t=i_[e.toLowerCase()];Zl(t)||(this.networkType=t)}return this}},{key:"getStartTs",value:function(){return this._startts}},{key:"setUIPlatform",value:function(e){this.uiPlatform=e}}],[{key:"bindEventStatModule",value:function(t){e.prototype._eventStatModule=t}}]),e}(),s_=G.f,c_=z(s_),u_=z([].push),l_=function(e){return function(t){for(var n,r=ee(t),i=Nn(r),o=i.length,a=0,s=[];o>a;)n=i[a++],x&&!c_(r,n)||u_(s,e?[n,r[n]]:r[n]);return s}},d_={entries:l_(!0),values:l_(!1)}.values;rn({target:"Object",stat:!0},{values:function(e){return d_(e)}});var p_=function(){function e(t){i(this,e),this.type=bi.MSG_TEXT,this.content={text:t.text||""}}return a(e,[{key:"setText",value:function(e){this.content.text=e}},{key:"sendable",value:function(){return 0!==this.content.text.length}}]),e}(),f_=Ue("iterator"),h_=!R((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[f_]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),g_=Object.assign,v_=Object.defineProperty,m_=z([].concat),__=!g_||R((function(){if(x&&1!==g_({b:1},g_(v_({},"a",{enumerable:!0,get:function(){v_(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=g_({},e)[n]||"abcdefghijklmnopqrst"!=Nn(g_({},t)).join("")}))?function(e,t){for(var n=ke(e),r=arguments.length,i=1,o=zt.f,a=G.f;r>i;)for(var s,c=X(arguments[i++]),u=o?m_(Nn(c),o(c)):Nn(c),l=u.length,d=0;l>d;)s=u[d++],x&&!P(a,c,s)||(n[s]=c[s]);return n}:g_,y_=/[^\0-\u007E]/,b_=/[.\u3002\uFF0E\uFF61]/g,I_="Overflow: input needs wider integers to process",T_=A.RangeError,C_=z(b_.exec),S_=Math.floor,E_=String.fromCharCode,M_=z("".charCodeAt),k_=z([].join),w_=z([].push),O_=z("".replace),D_=z("".split),A_=z("".toLowerCase),R_=function(e){return e+22+75*(e<26)},x_=function(e,t,n){var r=0;for(e=n?S_(e/700):e>>1,e+=S_(e/t);e>455;)e=S_(e/35),r+=36;return S_(r+36*e/(e+38))},L_=function(e){var t,n,r=[],i=(e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=M_(e,n++);if(i>=55296&&i<=56319&&n<r){var o=M_(e,n++);56320==(64512&o)?w_(t,((1023&i)<<10)+(1023&o)+65536):(w_(t,i),n--)}else w_(t,i)}return t}(e)).length,o=128,a=0,s=72;for(t=0;t<e.length;t++)(n=e[t])<128&&w_(r,E_(n));var c=r.length,u=c;for(c&&w_(r,"-");u<i;){var l=2147483647;for(t=0;t<e.length;t++)(n=e[t])>=o&&n<l&&(l=n);var d=u+1;if(l-o>S_((2147483647-a)/d))throw T_(I_);for(a+=(l-o)*d,o=l,t=0;t<e.length;t++){if((n=e[t])<o&&++a>2147483647)throw T_(I_);if(n==o){for(var p=a,f=36;;){var h=f<=s?1:f>=s+26?26:f-s;if(p<h)break;var g=p-h,v=36-h;w_(r,E_(R_(h+g%v))),p=S_(g/v),f+=36}w_(r,E_(R_(p))),s=x_(a,d,u==c),a=0,u++}}a++,o++}return k_(r,"")},N_=Math.floor,P_=function(e,t){var n=e.length,r=N_(n/2);return n<8?j_(e,t):U_(e,P_(as(e,0,r),t),P_(as(e,r),t),t)},j_=function(e,t){for(var n,r,i=e.length,o=1;o<i;){for(r=o,n=e[o];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},U_=function(e,t,n,r){for(var i=t.length,o=n.length,a=0,s=0;a<i||s<o;)e[a+s]=a<i&&s<o?r(t[a],n[s])<=0?t[a++]:n[s++]:a<i?t[a++]:n[s++];return e},G_=P_,V_=Ue("iterator"),F_=Tt.set,B_=Tt.getterFor("URLSearchParams"),q_=Tt.getterFor("URLSearchParamsIterator"),H_=ie("fetch"),z_=ie("Request"),K_=ie("Headers"),W_=z_&&z_.prototype,Y_=K_&&K_.prototype,J_=A.RegExp,$_=A.TypeError,X_=A.decodeURIComponent,Z_=A.encodeURIComponent,Q_=z("".charAt),ey=z([].join),ty=z([].push),ny=z("".replace),ry=z([].shift),iy=z([].splice),oy=z("".split),ay=z("".slice),sy=/\+/g,cy=Array(4),uy=function(e){return cy[e-1]||(cy[e-1]=J_("((?:%[\\da-f]{2}){"+e+"})","gi"))},ly=function(e){try{return X_(e)}catch(Lk){return e}},dy=function(e){var t=ny(e,sy," "),n=4;try{return X_(t)}catch(Lk){for(;n;)t=ny(t,uy(n--),ly);return t}},py=/[!'()~]|%20/g,fy={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},hy=function(e){return fy[e]},gy=function(e){return ny(Z_(e),py,hy)},vy=oi((function(e,t){F_(this,{type:"URLSearchParamsIterator",iterator:Or(B_(e).entries),kind:t})}),"Iterator",(function(){var e=q_(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),!0),_y=function(e){this.entries=[],this.url=null,void 0!==e&&(ne(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===Q_(e,0)?ay(e,1):e:pn(e)))};_y.prototype={type:"URLSearchParams",bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,i,o,a,s,c=kr(e);if(c)for(n=(t=Or(e,c)).next;!(r=P(n,t)).done;){if(o=(i=Or(Ze(r.value))).next,(a=P(o,i)).done||(s=P(o,i)).done||!P(o,i).done)throw $_("Expected sequence with length 2");ty(this.entries,{key:pn(a.value),value:pn(s.value)})}else for(var u in e)Oe(e,u)&&ty(this.entries,{key:u,value:pn(e[u])})},parseQuery:function(e){if(e)for(var t,n,r=oy(e,"&"),i=0;i<r.length;)(t=r[i++]).length&&(n=oy(t,"="),ty(this.entries,{key:dy(ry(n)),value:dy(ey(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],ty(n,gy(e.key)+"="+gy(e.value));return ey(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var yy=function(){Ds(this,by);var e=arguments.length>0?arguments[0]:void 0;F_(this,new _y(e))},by=yy.prototype;if(Ms(by,{append:function(e,t){Vs(arguments.length,2);var n=B_(this);ty(n.entries,{key:pn(e),value:pn(t)}),n.updateURL()},delete:function(e){Vs(arguments.length,1);for(var t=B_(this),n=t.entries,r=pn(e),i=0;i<n.length;)n[i].key===r?iy(n,i,1):i++;t.updateURL()},get:function(e){Vs(arguments.length,1);for(var t=B_(this).entries,n=pn(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){Vs(arguments.length,1);for(var t=B_(this).entries,n=pn(e),r=[],i=0;i<t.length;i++)t[i].key===n&&ty(r,t[i].value);return r},has:function(e){Vs(arguments.length,1);for(var t=B_(this).entries,n=pn(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){Vs(arguments.length,1);for(var n,r=B_(this),i=r.entries,o=!1,a=pn(e),s=pn(t),c=0;c<i.length;c++)(n=i[c]).key===a&&(o?iy(i,c--,1):(o=!0,n.value=s));o||ty(i,{key:a,value:s}),r.updateURL()},sort:function(){var e=B_(this);G_(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=B_(this).entries,r=zn(e,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new vy(this,"keys")},values:function(){return new vy(this,"values")},entries:function(){return new vy(this,"entries")}},{enumerable:!0}),kt(by,V_,by.entries,{name:"entries"}),kt(by,"toString",(function(){return B_(this).serialize()}),{enumerable:!0}),ni(yy,"URLSearchParams"),rn({global:!0,forced:!h_},{URLSearchParams:yy}),!h_&&te(K_)){var Iy=z(Y_.has),Ty=z(Y_.set),Cy=function(e){if(ne(e)){var t,n=e.body;if("URLSearchParams"===ln(n))return t=e.headers?new K_(e.headers):new K_,Iy(t,"content-type")||Ty(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),qn(e,{body:V(0,pn(n)),headers:V(0,t)})}return e};if(te(H_)&&rn({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return H_(e,arguments.length>1?Cy(arguments[1]):{})}}),te(z_)){var Sy=function(e){return Ds(this,W_),new z_(e,arguments.length>1?Cy(arguments[1]):{})};W_.constructor=Sy,Sy.prototype=W_,rn({global:!0,forced:!0},{Request:Sy})}}var Ey,My={URLSearchParams:yy,getState:B_},ky=Pn.f,wy=zr.codeAt,Oy=Tt.set,Dy=Tt.getterFor("URL"),Ay=My.URLSearchParams,Ry=My.getState,xy=A.URL,Ly=A.TypeError,Ny=A.parseInt,Py=Math.floor,jy=Math.pow,Uy=z("".charAt),Gy=z(/./.exec),Vy=z([].join),Fy=z(1..toString),By=z([].pop),qy=z([].push),Hy=z("".replace),zy=z([].shift),Ky=z("".split),Wy=z("".slice),Yy=z("".toLowerCase),Jy=z([].unshift),$y=/[a-z]/i,Xy=/[\d+-.a-z]/i,Zy=/\d/,Qy=/^0x/i,eb=/^[0-7]+$/,tb=/^\d+$/,nb=/^[\da-f]+$/i,rb=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ib=/[\0\t\n\r #/:<>?@[\\\]^|]/,ob=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,ab=/[\t\n\r]/g,sb=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)Jy(t,e%256),e=Py(e/256);return Vy(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=Fy(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},cb={},ub=__({},cb,{" ":1,'"':1,"<":1,">":1,"`":1}),lb=__({},ub,{"#":1,"?":1,"{":1,"}":1}),db=__({},lb,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),pb=function(e,t){var n=wy(e,0);return n>32&&n<127&&!Oe(t,e)?e:encodeURIComponent(e)},fb={ftp:21,file:null,http:80,https:443,ws:80,wss:443},hb=function(e,t){var n;return 2==e.length&&Gy($y,Uy(e,0))&&(":"==(n=Uy(e,1))||!t&&"|"==n)},gb=function(e){var t;return e.length>1&&hb(Wy(e,0,2))&&(2==e.length||"/"===(t=Uy(e,2))||"\\"===t||"?"===t||"#"===t)},vb=function(e){return"."===e||"%2e"===Yy(e)},mb={},_b={},yb={},bb={},Ib={},Tb={},Cb={},Sb={},Eb={},Mb={},kb={},wb={},Ob={},Db={},Ab={},Rb={},xb={},Lb={},Nb={},Pb={},jb={},Ub=function(e,t,n){var r,i,o,a=pn(e);if(t){if(i=this.parse(a))throw Ly(i);this.searchParams=null}else{if(void 0!==n&&(r=new Ub(n,!0)),i=this.parse(a,null,r))throw Ly(i);(o=Ry(new Ay)).bindURL(this),this.searchParams=o}};Ub.prototype={type:"URL",parse:function(e,t,n){var r,i,o,a,s,c=this,u=t||mb,l=0,d="",p=!1,f=!1,h=!1;for(e=pn(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=Hy(e,ob,"")),e=Hy(e,ab,""),r=Ar(e);l<=r.length;){switch(i=r[l],u){case mb:if(!i||!Gy($y,i)){if(t)return"Invalid scheme";u=yb;continue}d+=Yy(i),u=_b;break;case _b:if(i&&(Gy(Xy,i)||"+"==i||"-"==i||"."==i))d+=Yy(i);else{if(":"!=i){if(t)return"Invalid scheme";d="",u=yb,l=0;continue}if(t&&(c.isSpecial()!=Oe(fb,d)||"file"==d&&(c.includesCredentials()||null!==c.port)||"file"==c.scheme&&!c.host))return;if(c.scheme=d,t)return void(c.isSpecial()&&fb[c.scheme]==c.port&&(c.port=null));d="","file"==c.scheme?u=Db:c.isSpecial()&&n&&n.scheme==c.scheme?u=bb:c.isSpecial()?u=Sb:"/"==r[l+1]?(u=Ib,l++):(c.cannotBeABaseURL=!0,qy(c.path,""),u=Nb)}break;case yb:if(!n||n.cannotBeABaseURL&&"#"!=i)return"Invalid scheme";if(n.cannotBeABaseURL&&"#"==i){c.scheme=n.scheme,c.path=as(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,u=jb;break}u="file"==n.scheme?Db:Tb;continue;case bb:if("/"!=i||"/"!=r[l+1]){u=Tb;continue}u=Eb,l++;break;case Ib:if("/"==i){u=Mb;break}u=Lb;continue;case Tb:if(c.scheme=n.scheme,i==Ey)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=as(n.path),c.query=n.query;else if("/"==i||"\\"==i&&c.isSpecial())u=Cb;else if("?"==i)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=as(n.path),c.query="",u=Pb;else{if("#"!=i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=as(n.path),c.path.length--,u=Lb;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=as(n.path),c.query=n.query,c.fragment="",u=jb}break;case Cb:if(!c.isSpecial()||"/"!=i&&"\\"!=i){if("/"!=i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,u=Lb;continue}u=Mb}else u=Eb;break;case Sb:if(u=Eb,"/"!=i||"/"!=Uy(d,l+1))continue;l++;break;case Eb:if("/"!=i&&"\\"!=i){u=Mb;continue}break;case Mb:if("@"==i){p&&(d="%40"+d),p=!0,o=Ar(d);for(var g=0;g<o.length;g++){var v=o[g];if(":"!=v||h){var m=pb(v,db);h?c.password+=m:c.username+=m}else h=!0}d=""}else if(i==Ey||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()){if(p&&""==d)return"Invalid authority";l-=Ar(d).length+1,d="",u=kb}else d+=i;break;case kb:case wb:if(t&&"file"==c.scheme){u=Rb;continue}if(":"!=i||f){if(i==Ey||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()){if(c.isSpecial()&&""==d)return"Invalid host";if(t&&""==d&&(c.includesCredentials()||null!==c.port))return;if(a=c.parseHost(d))return a;if(d="",u=xb,t)return;continue}"["==i?f=!0:"]"==i&&(f=!1),d+=i}else{if(""==d)return"Invalid host";if(a=c.parseHost(d))return a;if(d="",u=Ob,t==wb)return}break;case Ob:if(!Gy(Zy,i)){if(i==Ey||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()||t){if(""!=d){var _=Ny(d,10);if(_>65535)return"Invalid port";c.port=c.isSpecial()&&_===fb[c.scheme]?null:_,d=""}if(t)return;u=xb;continue}return"Invalid port"}d+=i;break;case Db:if(c.scheme="file","/"==i||"\\"==i)u=Ab;else{if(!n||"file"!=n.scheme){u=Lb;continue}if(i==Ey)c.host=n.host,c.path=as(n.path),c.query=n.query;else if("?"==i)c.host=n.host,c.path=as(n.path),c.query="",u=Pb;else{if("#"!=i){gb(Vy(as(r,l),""))||(c.host=n.host,c.path=as(n.path),c.shortenPath()),u=Lb;continue}c.host=n.host,c.path=as(n.path),c.query=n.query,c.fragment="",u=jb}}break;case Ab:if("/"==i||"\\"==i){u=Rb;break}n&&"file"==n.scheme&&!gb(Vy(as(r,l),""))&&(hb(n.path[0],!0)?qy(c.path,n.path[0]):c.host=n.host),u=Lb;continue;case Rb:if(i==Ey||"/"==i||"\\"==i||"?"==i||"#"==i){if(!t&&hb(d))u=Lb;else if(""==d){if(c.host="",t)return;u=xb}else{if(a=c.parseHost(d))return a;if("localhost"==c.host&&(c.host=""),t)return;d="",u=xb}continue}d+=i;break;case xb:if(c.isSpecial()){if(u=Lb,"/"!=i&&"\\"!=i)continue}else if(t||"?"!=i)if(t||"#"!=i){if(i!=Ey&&(u=Lb,"/"!=i))continue}else c.fragment="",u=jb;else c.query="",u=Pb;break;case Lb:if(i==Ey||"/"==i||"\\"==i&&c.isSpecial()||!t&&("?"==i||"#"==i)){if(".."===(s=Yy(s=d))||"%2e."===s||".%2e"===s||"%2e%2e"===s?(c.shortenPath(),"/"==i||"\\"==i&&c.isSpecial()||qy(c.path,"")):vb(d)?"/"==i||"\\"==i&&c.isSpecial()||qy(c.path,""):("file"==c.scheme&&!c.path.length&&hb(d)&&(c.host&&(c.host=""),d=Uy(d,0)+":"),qy(c.path,d)),d="","file"==c.scheme&&(i==Ey||"?"==i||"#"==i))for(;c.path.length>1&&""===c.path[0];)zy(c.path);"?"==i?(c.query="",u=Pb):"#"==i&&(c.fragment="",u=jb)}else d+=pb(i,lb);break;case Nb:"?"==i?(c.query="",u=Pb):"#"==i?(c.fragment="",u=jb):i!=Ey&&(c.path[0]+=pb(i,cb));break;case Pb:t||"#"!=i?i!=Ey&&("'"==i&&c.isSpecial()?c.query+="%27":c.query+="#"==i?"%23":pb(i,cb)):(c.fragment="",u=jb);break;case jb:i!=Ey&&(c.fragment+=pb(i,ub))}l++}},parseHost:function(e){var t,n,r;if("["==Uy(e,0)){if("]"!=Uy(e,e.length-1))return"Invalid host";if(!(t=function(e){var t,n,r,i,o,a,s,c=[0,0,0,0,0,0,0,0],u=0,l=null,d=0,p=function(){return Uy(e,d)};if(":"==p()){if(":"!=Uy(e,1))return;d+=2,l=++u}for(;p();){if(8==u)return;if(":"!=p()){for(t=n=0;n<4&&Gy(nb,p());)t=16*t+Ny(p(),16),d++,n++;if("."==p()){if(0==n)return;if(d-=n,u>6)return;for(r=0;p();){if(i=null,r>0){if(!("."==p()&&r<4))return;d++}if(!Gy(Zy,p()))return;for(;Gy(Zy,p());){if(o=Ny(p(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;d++}c[u]=256*c[u]+i,2!=++r&&4!=r||u++}if(4!=r)return;break}if(":"==p()){if(d++,!p())return}else if(p())return;c[u++]=t}else{if(null!==l)return;d++,l=++u}}if(null!==l)for(a=u-l,u=7;0!=u&&a>0;)s=c[u],c[u--]=c[l+a-1],c[l+--a]=s;else if(8!=u)return;return c}(Wy(e,1,-1))))return"Invalid host";this.host=t}else if(this.isSpecial()){if(e=function(e){var t,n,r=[],i=D_(O_(A_(e),b_,"."),".");for(t=0;t<i.length;t++)n=i[t],w_(r,C_(y_,n)?"xn--"+L_(n):n);return k_(r,".")}(e),Gy(rb,e))return"Invalid host";if(null===(t=function(e){var t,n,r,i,o,a,s,c=Ky(e,".");if(c.length&&""==c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=c[r]))return e;if(o=10,i.length>1&&"0"==Uy(i,0)&&(o=Gy(Qy,i)?16:8,i=Wy(i,8==o?1:2)),""===i)a=0;else{if(!Gy(10==o?tb:8==o?eb:nb,i))return e;a=Ny(i,o)}qy(n,a)}for(r=0;r<t;r++)if(a=n[r],r==t-1){if(a>=jy(256,5-t))return null}else if(a>255)return null;for(s=By(n),r=0;r<n.length;r++)s+=n[r]*jy(256,3-r);return s}(e)))return"Invalid host";this.host=t}else{if(Gy(ib,e))return"Invalid host";for(t="",n=Ar(e),r=0;r<n.length;r++)t+=pb(n[r],cb);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return Oe(fb,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&hb(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,a=e.path,s=e.query,c=e.fragment,u=t+":";return null!==i?(u+="//",e.includesCredentials()&&(u+=n+(r?":"+r:"")+"@"),u+=sb(i),null!==o&&(u+=":"+o)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?a[0]:a.length?"/"+Vy(a,"/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},setHref:function(e){var t=this.parse(e);if(t)throw Ly(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new Gb(e.path[0]).origin}catch(Lk){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+sb(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(pn(e)+":",mb)},getUsername:function(){return this.username},setUsername:function(e){var t=Ar(pn(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=pb(t[n],db)}},getPassword:function(){return this.password},setPassword:function(e){var t=Ar(pn(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=pb(t[n],db)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?sb(e):sb(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,kb)},getHostname:function(){var e=this.host;return null===e?"":sb(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,wb)},getPort:function(){var e=this.port;return null===e?"":pn(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=pn(e))?this.port=null:this.parse(e,Ob))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+Vy(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,xb))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=pn(e))?this.query=null:("?"==Uy(e,0)&&(e=Wy(e,1)),this.query="",this.parse(e,Pb)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=pn(e))?("#"==Uy(e,0)&&(e=Wy(e,1)),this.fragment="",this.parse(e,jb)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Gb=function(e){var t=Ds(this,Vb),n=Vs(arguments.length,1)>1?arguments[1]:void 0,r=Oy(t,new Ub(e,!1,n));x||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},Vb=Gb.prototype,Fb=function(e,t){return{get:function(){return Dy(this)[e]()},set:t&&function(e){return Dy(this)[t](e)},configurable:!0,enumerable:!0}};if(x&&ky(Vb,{href:Fb("serialize","setHref"),origin:Fb("getOrigin"),protocol:Fb("getProtocol","setProtocol"),username:Fb("getUsername","setUsername"),password:Fb("getPassword","setPassword"),host:Fb("getHost","setHost"),hostname:Fb("getHostname","setHostname"),port:Fb("getPort","setPort"),pathname:Fb("getPathname","setPathname"),search:Fb("getSearch","setSearch"),searchParams:Fb("getSearchParams"),hash:Fb("getHash","setHash")}),kt(Vb,"toJSON",(function(){return Dy(this).serialize()}),{enumerable:!0}),kt(Vb,"toString",(function(){return Dy(this).serialize()}),{enumerable:!0}),xy){var Bb=xy.createObjectURL,qb=xy.revokeObjectURL;Bb&&kt(Gb,"createObjectURL",zn(Bb,xy)),qb&&kt(Gb,"revokeObjectURL",zn(qb,xy))}ni(Gb,"URL"),rn({global:!0,forced:!h_,sham:!x},{URL:Gb}),rn({target:"Object",stat:!0,forced:Object.assign!==__},{assign:__});var Hb=function(){function e(t){i(this,e),this._imageMemoryURL="",Qu?this.createImageDataASURLInWXMiniApp(t.file):this.createImageDataASURLInWeb(t.file),this._initImageInfoModel(),this.type=bi.MSG_IMAGE,this._percent=0,this.content={imageFormat:t.imageFormat||Nl.UNKNOWN,uuid:t.uuid,imageInfoArray:[]},this.initImageInfoArray(t.imageInfoArray),this._autoFixUrl()}return a(e,[{key:"_initImageInfoModel",value:function(){var e=this;this._ImageInfoModel=function(t){this.instanceID=ud(9999999),this.sizeType=t.type||0,this.type=0,this.size=t.size||0,this.width=t.width||0,this.height=t.height||0,this.imageUrl=t.url||"",this.url=t.url||e._imageMemoryURL||e._defaultImage},this._ImageInfoModel.prototype={setSizeType:function(e){this.sizeType=e},setType:function(e){this.type=e},setImageUrl:function(e){e&&(this.imageUrl=e)},getImageUrl:function(){return this.imageUrl}}}},{key:"initImageInfoArray",value:function(e){for(var t=0,n=null,r=null;t<=2;)r=Zl(e)||Zl(e[t])?{type:0,size:0,width:0,height:0,url:""}:e[t],(n=new this._ImageInfoModel(r)).setSizeType(t+1),n.setType(t),this.addImageInfo(n),t++;this.updateAccessSideImageInfoArray()}},{key:"updateImageInfoArray",value:function(e){for(var t,n=this.content.imageInfoArray.length,r=0;r<n;r++)t=this.content.imageInfoArray[r],e[r].size&&(t.size=e[r].size),e[r].url&&t.setImageUrl(e[r].url),e[r].width&&(t.width=e[r].width),e[r].height&&(t.height=e[r].height)}},{key:"_autoFixUrl",value:function(){for(var e=this.content.imageInfoArray.length,t="",n="",r=["http","https"],i=null,o=0;o<e;o++)this.content.imageInfoArray[o].url&&""!==(i=this.content.imageInfoArray[o]).imageUrl&&(n=i.imageUrl.slice(0,i.imageUrl.indexOf("://")+1),t=i.imageUrl.slice(i.imageUrl.indexOf("://")+1),r.indexOf(n)<0&&(n="https:"),this.content.imageInfoArray[o].setImageUrl([n,t].join("")))}},{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateImageFormat",value:function(e){this.content.imageFormat=Nl[e.toUpperCase()]||Nl.UNKNOWN}},{key:"createImageDataASURLInWeb",value:function(e){void 0!==e&&e.files.length>0&&(this._imageMemoryURL=window.URL.createObjectURL(e.files[0]))}},{key:"createImageDataASURLInWXMiniApp",value:function(e){e&&e.url&&(this._imageMemoryURL=e.url)}},{key:"replaceImageInfo",value:function(e,t){this.content.imageInfoArray[t]instanceof this._ImageInfoModel||(this.content.imageInfoArray[t]=e)}},{key:"addImageInfo",value:function(e){this.content.imageInfoArray.length>=3||this.content.imageInfoArray.push(e)}},{key:"updateAccessSideImageInfoArray",value:function(){var e=this.content.imageInfoArray,t=e[0],n=t.width,r=void 0===n?0:n,i=t.height,o=void 0===i?0:i;0!==r&&0!==o&&(Dd(e),Object.assign(e[2],Od({originWidth:r,originHeight:o,min:720})))}},{key:"sendable",value:function(){return 0!==this.content.imageInfoArray.length&&""!==this.content.imageInfoArray[0].imageUrl&&0!==this.content.imageInfoArray[0].size}}]),e}(),zb=function(){function e(t){i(this,e),this.type=bi.MSG_FACE,this.content=t||null}return a(e,[{key:"sendable",value:function(){return null!==this.content}}]),e}(),Kb=function(){function e(t){i(this,e),this.type=bi.MSG_AUDIO,this._percent=0,this.content={downloadFlag:2,second:t.second,size:t.size,url:t.url,remoteAudioUrl:t.url||"",uuid:t.uuid}}return a(e,[{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateAudioUrl",value:function(e){this.content.remoteAudioUrl=e}},{key:"sendable",value:function(){return""!==this.content.remoteAudioUrl}}]),e}(),Wb={from:!0,groupID:!0,groupName:!0,to:!0},Yb=function(){function e(t){i(this,e),this.type=bi.MSG_GRP_TIP,this.content={},this._initContent(t)}return a(e,[{key:"_initContent",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case"remarkInfo":break;case"groupProfile":t.content.groupProfile={},t._initGroupProfile(e[n]);break;case"operatorInfo":break;case"memberInfoList":case"msgMemberInfo":t._updateMemberList(e[n]);break;case"memberExtraInfo":case"onlineMemberInfo":break;case"memberNum":t.content[n]=e[n],t.content.memberCount=e[n];break;case"newGroupProfile":t.content.newGroupProfile={},t._initNewGroupProfile(e[n]);break;default:t.content[n]=e[n]}})),this.content.userIDList||(this.content.userIDList=[this.content.operatorID])}},{key:"_initGroupProfile",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var r=t[n];Wb[r]&&(this.content.groupProfile[r]=e[r])}}},{key:"_updateMemberList",value:function(e){Bd(this.content.memberList)?this.content.memberList=e:this.content.memberList.forEach((function(t){e.forEach((function(e){t.userID===e.userID&&Object.assign(t,e)}))}))}},{key:"_initNewGroupProfile",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var r=t[n];this.content.newGroupProfile[r]="muteAllMembers"!==r?e[r]:1===e[r]}}}]),e}(),Jb={from:!0,groupID:!0,groupName:!0,to:!0},$b=function(){function e(t){i(this,e),this.type=bi.MSG_GRP_SYS_NOTICE,this.content={},this._initContent(t)}return a(e,[{key:"_initContent",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case"memberInfoList":break;case"remarkInfo":t.content.handleMessage=e[n];break;case"groupProfile":t.content.groupProfile={},t._initGroupProfile(e[n]);break;default:t.content[n]=e[n]}}))}},{key:"_initGroupProfile",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var r=t[n];Jb[r]&&("groupName"===r?this.content.groupProfile.name=e[r]:this.content.groupProfile[r]=e[r])}}}]),e}(),Xb=Math.min,Zb=[].lastIndexOf,Qb=!!Zb&&1/[1].lastIndexOf(1,-0)<0,eI=cr("lastIndexOf"),tI=Qb||!eI?function(e){if(Qb)return ba(Zb,this,arguments)||0;var t=ee(this),n=Pt(t),r=n-1;for(arguments.length>1&&(r=Xb(r,Dt(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:Zb;rn({target:"Array",proto:!0,forced:tI!==[].lastIndexOf},{lastIndexOf:tI});var nI=function(){function e(t){i(this,e),this.type=bi.MSG_FILE,this._percent=0;var n=this._getFileInfo(t);this.content={downloadFlag:2,fileUrl:t.url||"",uuid:t.uuid,fileName:n.name||"",fileSize:n.size||0}}return a(e,[{key:"_getFileInfo",value:function(e){if(!Zl(e.fileName)&&!Zl(e.fileSize))return{size:e.fileSize,name:e.fileName};var t=e.file.files[0];if(Xu){if(t.path&&-1!==t.path.indexOf(".")){var n=t.path.slice(t.path.lastIndexOf(".")+1).toLowerCase();t.type=n,t.name||(t.name="".concat(ud(999999),".").concat(n))}t.name||(t.type="",t.name=t.path.slice(t.path.lastIndexOf("/")+1).toLowerCase()),t.suffix&&(t.type=t.suffix),t.url||(t.url=t.path)}return{size:t.size,name:t.name}}},{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateFileUrl",value:function(e){this.content.fileUrl=e}},{key:"sendable",value:function(){return""!==this.content.fileUrl&&""!==this.content.fileName&&0!==this.content.fileSize}}]),e}(),rI=function(){function e(t){i(this,e),this.type=bi.MSG_CUSTOM,this.content={data:t.data||"",description:t.description||"",extension:t.extension||""}}return a(e,[{key:"setData",value:function(e){return this.content.data=e,this}},{key:"setDescription",value:function(e){return this.content.description=e,this}},{key:"setExtension",value:function(e){return this.content.extension=e,this}},{key:"sendable",value:function(){return 0!==this.content.data.length||0!==this.content.description.length||0!==this.content.extension.length}}]),e}(),iI=function(){function e(t){i(this,e),this.type=bi.MSG_VIDEO,this._percent=0,this.content={remoteVideoUrl:t.remoteVideoUrl||t.videoUrl||"",videoFormat:t.videoFormat,videoSecond:parseInt(t.videoSecond,10),videoSize:t.videoSize,videoUrl:t.videoUrl,videoDownloadFlag:2,videoUUID:t.videoUUID,thumbUUID:t.thumbUUID,thumbFormat:t.thumbFormat,thumbWidth:t.thumbWidth,snapshotWidth:t.thumbWidth,thumbHeight:t.thumbHeight,snapshotHeight:t.thumbHeight,thumbSize:t.thumbSize,snapshotSize:t.thumbSize,thumbDownloadFlag:2,thumbUrl:t.thumbUrl,snapshotUrl:t.thumbUrl}}return a(e,[{key:"updatePercent",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:"updateVideoUrl",value:function(e){e&&(this.content.remoteVideoUrl=e)}},{key:"updateSnapshotInfo",value:function(e){var t=e.snapshotUrl,n=e.snapshotWidth,r=e.snapshotHeight;Bd(t)||(this.content.thumbUrl=this.content.snapshotUrl=t),Bd(n)||(this.content.thumbWidth=this.content.snapshotWidth=Number(n)),Bd(r)||(this.content.thumbHeight=this.content.snapshotHeight=Number(r))}},{key:"sendable",value:function(){return""!==this.content.remoteVideoUrl}}]),e}(),oI=function(){function e(t){i(this,e),this.type=bi.MSG_LOCATION;var n=t.description,r=t.longitude,o=t.latitude;this.content={description:n,longitude:r,latitude:o}}return a(e,[{key:"sendable",value:function(){return!0}}]),e}(),aI=function(){function e(t){if(i(this,e),this.from=t.from,this.messageSender=t.from,this.time=t.time,this.messageSequence=t.sequence,this.clientSequence=t.clientSequence||t.sequence,this.messageRandom=t.random,this.cloudCustomData=t.cloudCustomData||"",this.clientTime=t.clientTime||void 0,t.ID)this.ID=t.ID||"",this.nick=t.nick||"",this.avatar=t.avatar||"",this.messageBody=[{type:t.type,payload:t.payload}],t.conversationType.startsWith(bi.CONV_C2C)?this.receiverUserID=t.to:t.conversationType.startsWith(bi.CONV_GROUP)&&(this.receiverGroupID=t.to),this.messageReceiver=t.to;else{this.nick=t.nick||"",this.avatar=t.avatar||"",this.messageBody=[];var n=t.elements[0].type,r=t.elements[0].content;this._patchRichMediaPayload(n,r),n===bi.MSG_MERGER?this.messageBody.push({type:n,payload:new sI(r).content}):this.messageBody.push({type:n,payload:r}),t.groupID&&(this.receiverGroupID=t.groupID,this.messageReceiver=t.groupID),t.to&&(this.receiverUserID=t.to,this.messageReceiver=t.to),this.ID="".concat(t.tinyID,"-").concat(t.clientTime,"-").concat(t.random)}}return a(e,[{key:"_patchRichMediaPayload",value:function(e,t){e===bi.MSG_IMAGE?t.imageInfoArray.forEach((function(e){!e.imageUrl&&e.url&&(e.imageUrl=e.url,e.sizeType=e.type,1===e.type?e.type=0:3===e.type&&(e.type=1))})):e===bi.MSG_VIDEO?!t.remoteVideoUrl&&t.videoUrl&&(t.remoteVideoUrl=t.videoUrl):e===bi.MSG_AUDIO?!t.remoteAudioUrl&&t.url&&(t.remoteAudioUrl=t.url):e===bi.MSG_FILE&&!t.fileUrl&&t.url&&(t.fileUrl=t.url,t.url=void 0)}}]),e}(),sI=function(){function e(t){if(i(this,e),this.type=bi.MSG_MERGER,this.content={downloadKey:"",pbDownloadKey:"",messageList:[],title:"",abstractList:[],compatibleText:"",version:0,layersOverLimit:!1},t.downloadKey){var n=t.downloadKey,r=t.pbDownloadKey,o=t.title,a=t.abstractList,s=t.compatibleText,c=t.version;this.content.downloadKey=n,this.content.pbDownloadKey=r,this.content.title=o,this.content.abstractList=a,this.content.compatibleText=s,this.content.version=c||0}else if(Bd(t.messageList))1===t.layersOverLimit&&(this.content.layersOverLimit=!0);else{var u=t.messageList,l=t.title,d=t.abstractList,p=t.compatibleText,f=t.version,h=[];u.forEach((function(e){if(!Bd(e)){var t=new aI(e);h.push(t)}})),this.content.messageList=h,this.content.title=l,this.content.abstractList=d,this.content.compatibleText=p,this.content.version=f||0}}return a(e,[{key:"sendable",value:function(){return!Bd(this.content.messageList)||!Bd(this.content.downloadKey)}}]),e}(),cI={1:bi.MSG_PRIORITY_HIGH,2:bi.MSG_PRIORITY_NORMAL,3:bi.MSG_PRIORITY_LOW,4:bi.MSG_PRIORITY_LOWEST},uI=function(){function e(t){i(this,e),this.ID="",this.conversationID=t.conversationID||null,this.conversationType=t.conversationType||bi.CONV_C2C,this.conversationSubType=t.conversationSubType,this.time=t.time||Math.ceil(Date.now()/1e3),this.sequence=t.sequence||0,this.clientSequence=t.clientSequence||t.sequence||0,this.random=t.random||0===t.random?t.random:ud(),this.priority=this._computePriority(t.priority),this.nick=t.nick||"",this.avatar=t.avatar||"",this.isPeerRead=!1,this.nameCard="",this._elements=[],this.isPlaceMessage=t.isPlaceMessage||0,this.isRevoked=2===t.isPlaceMessage||8===t.msgFlagBits,this.from=t.from||null,this.to=t.to||null,this.flow="",this.isSystemMessage=t.isSystemMessage||!1,this.protocol=t.protocol||"JSON",this.isResend=!1,this.isRead=!1,this.status=t.status||jp.SUCCESS,this._onlineOnlyFlag=!1,this._groupAtInfoList=[],this._relayFlag=!1,this.atUserList=[],this.cloudCustomData=t.cloudCustomData||"",this.isDeleted=!1,this.isModified=!1,this._isExcludedFromUnreadCount=!(!t.messageControlInfo||1!==t.messageControlInfo.excludedFromUnreadCount),this._isExcludedFromLastMessage=!(!t.messageControlInfo||1!==t.messageControlInfo.excludedFromLastMessage),this.clientTime=t.clientTime||Dl()||0,this.senderTinyID=t.senderTinyID||t.tinyID||"",this.readReceiptInfo=t.readReceiptInfo||{readCount:void 0,unreadCount:void 0,isPeerRead:void 0},this.needReadReceipt=!0===t.needReadReceipt||1===t.needReadReceipt,this.version=t.messageVersion||0,this.isBroadcastMessage=t.isBroadcastMessage||!1,this._receiverList=t.receiverList||void 0,this.isSupportExtension=!0===t.isSupportExtension||1===t.isSupportExtension,this.revoker=t.revokerInfo&&t.revokerInfo.revoker||null,this.reInitialize(t.currentUser),this.extractGroupInfo(t.groupProfile||null),this.handleGroupAtInfo(t),this.initC2CReadReceiptInfo(t.readReceiptSentByPeer)}return a(e,[{key:"elements",get:function(){return this._elements}},{key:"getElements",value:function(){return this._elements}},{key:"extractGroupInfo",value:function(e){if(null!==e){Yl(e.nick)&&(this.nick=e.nick),Yl(e.avatar)&&(this.avatar=e.avatar);var t=e.messageFromAccountExtraInformation;$l(t)&&Yl(t.nameCard)&&(this.nameCard=t.nameCard)}}},{key:"handleGroupAtInfo",value:function(e){var t=this;e.payload&&e.payload.atUserList&&e.payload.atUserList.forEach((function(e){e!==bi.MSG_AT_ALL?(t._groupAtInfoList.push({groupAtAllFlag:0,groupAtUserID:e}),t.atUserList.push(e)):(t._groupAtInfoList.push({groupAtAllFlag:1}),t.atUserList.push(bi.MSG_AT_ALL))})),Xl(e.groupAtInfo)&&e.groupAtInfo.forEach((function(e){0===e.groupAtAllFlag?t.atUserList.push(e.groupAtUserID):1===e.groupAtAllFlag&&t.atUserList.push(bi.MSG_AT_ALL)}))}},{key:"getGroupAtInfoList",value:function(){return this._groupAtInfoList}},{key:"_initProxy",value:function(){this._elements[0]&&(this.payload=this._elements[0].content,this.type=this._elements[0].type)}},{key:"reInitialize",value:function(e){e&&(this.status=this.from?jp.SUCCESS:jp.UNSEND,!this.from&&(this.from=e)),this._initFlow(e),this._initSequence(e),this._concatConversationID(e),this.generateMessageID()}},{key:"isSendable",value:function(){return 0!==this._elements.length&&"function"==typeof this._elements[0].sendable&&this._elements[0].sendable()}},{key:"_initTo",value:function(e){this.conversationType===bi.CONV_GROUP&&(this.to=e.groupID)}},{key:"_initSequence",value:function(e){0===this.clientSequence&&e&&(this.clientSequence=function(e){if(!e)return!1;if(void 0===fd[e]){var t=new Date,n="3".concat(t.getHours()).slice(-2),r="0".concat(t.getMinutes()).slice(-2),i="0".concat(t.getSeconds()).slice(-2);fd[e]=parseInt([n,r,i,"0001"].join("")),n=null,r=null,i=null,Ll.l("autoIncrementIndex start index:".concat(fd[e]))}return fd[e]++}(e)),0===this.sequence&&this.conversationType===bi.CONV_C2C&&(this.sequence=this.clientSequence)}},{key:"generateMessageID",value:function(){this.from===bi.CONV_SYSTEM&&(this.senderTinyID="144115198244471703"),this.ID="".concat(this.senderTinyID,"-").concat(this.clientTime,"-").concat(this.random)}},{key:"_initFlow",value:function(e){""!==e&&(e===this.from?(this.flow="out",this.isRead=!0):this.flow="in")}},{key:"_concatConversationID",value:function(e){var t=this.to,n="",r=this.conversationType;r!==bi.CONV_SYSTEM?(n=r===bi.CONV_C2C?e===this.from?t:this.from:this.to,this.conversationID="".concat(r).concat(n)):this.conversationID=bi.CONV_SYSTEM}},{key:"isElement",value:function(e){return e instanceof p_||e instanceof Hb||e instanceof zb||e instanceof Kb||e instanceof nI||e instanceof iI||e instanceof Yb||e instanceof $b||e instanceof rI||e instanceof oI||e instanceof sI}},{key:"setElement",value:function(e){var t=this;if(this.isElement(e))return this._elements=[e],void this._initProxy();var n=function(e){if(e.type&&e.content)switch(e.type){case bi.MSG_TEXT:t.setTextElement(e.content);break;case bi.MSG_IMAGE:t.setImageElement(e.content);break;case bi.MSG_AUDIO:t.setAudioElement(e.content);break;case bi.MSG_FILE:t.setFileElement(e.content);break;case bi.MSG_VIDEO:t.setVideoElement(e.content);break;case bi.MSG_CUSTOM:t.setCustomElement(e.content);break;case bi.MSG_LOCATION:t.setLocationElement(e.content);break;case bi.MSG_GRP_TIP:t.setGroupTipElement(e.content);break;case bi.MSG_GRP_SYS_NOTICE:t.setGroupSystemNoticeElement(e.content);break;case bi.MSG_FACE:t.setFaceElement(e.content);break;case bi.MSG_MERGER:t.setMergerElement(e.content)}};if(Xl(e))for(var r=0;r<e.length;r++)n(e[r]);else n(e);this._initProxy()}},{key:"clearElement",value:function(){this._elements.length=0}},{key:"setTextElement",value:function(e){var t="string"==typeof e?e:e.text,n=new p_({text:t});this._elements.push(n)}},{key:"setImageElement",value:function(e){var t=new Hb(e);this._elements.push(t)}},{key:"setAudioElement",value:function(e){var t=new Kb(e);this._elements.push(t)}},{key:"setFileElement",value:function(e){var t=new nI(e);this._elements.push(t)}},{key:"setVideoElement",value:function(e){var t=new iI(e);this._elements.push(t)}},{key:"setLocationElement",value:function(e){var t=new oI(e);this._elements.push(t)}},{key:"setCustomElement",value:function(e){var t=new rI(e);this._elements.push(t)}},{key:"setGroupTipElement",value:function(e){var t={},n=e.operationType;if(Bd(e.memberInfoList)?e.operatorInfo&&(t=e.operatorInfo):n!==bi.GRP_TIP_MBR_JOIN&&n!==bi.GRP_TIP_MBR_KICKED_OUT&&n!==bi.GRP_TIP_MBR_SET_ADMIN&&n!==bi.GRP_TIP_MBR_CANCELED_ADMIN||(t=e.memberInfoList[0]),!Bd(e.memberExtraInfo)){var r=e.memberExtraInfo.reason;e.msgMemberInfo.forEach((function(e){e.reason=r}))}var i=t,o=i.nick,a=i.avatar;Yl(o)&&(this.nick=o),Yl(a)&&(this.avatar=a);var s=new Yb(e);this._elements.push(s)}},{key:"setGroupSystemNoticeElement",value:function(e){var t=new $b(e);this._elements.push(t)}},{key:"setFaceElement",value:function(e){var t=new zb(e);this._elements.push(t)}},{key:"setMergerElement",value:function(e){var t=new sI(e);this._elements.push(t)}},{key:"setIsRead",value:function(e){this.isRead=e}},{key:"setRelayFlag",value:function(e){this._relayFlag=e}},{key:"getRelayFlag",value:function(){return this._relayFlag}},{key:"_computePriority",value:function(e){if(Zl(e))return bi.MSG_PRIORITY_NORMAL;if(Yl(e)&&-1!==Object.values(cI).indexOf(e))return e;if(Wl(e)){var t=""+e;if(-1!==Object.keys(cI).indexOf(t))return cI[t]}return bi.MSG_PRIORITY_NORMAL}},{key:"setNickAndAvatar",value:function(e){var t=e.nick,n=e.avatar;Yl(t)&&(this.nick=t),Yl(n)&&(this.avatar=n)}},{key:"setNameCard",value:function(e){Yl(e)&&(this.nameCard=e)}},{key:"initC2CReadReceiptInfo",value:function(e){this.conversationType===bi.CONV_C2C&&!0===this.needReadReceipt&&(this.readReceiptInfo.isPeerRead=1===e)}}]),e}(),lI=function(e){return{code:0,data:e||{}}},dI=function(e){c(n,e);var t=m(n);function n(e){var r;i(this,n),r=t.call(this);var o=e.code,a=e.message,s=e.data;return r.code=o,r.message=a||r._getErrorMessage(r.code),r.data=s||{},r}return a(n)}(f(Error)),pI=null,fI=function(e){pI=e},hI=function(e){return Promise.resolve(lI(e))},gI=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof dI)return t&&null!==pI&&pI.emit(yi.ERROR,e),Promise.reject(e);if(e instanceof Error){var n=new dI({code:Mm});return t&&null!==pI&&pI.emit(yi.ERROR,n),Promise.reject(n)}if(!Zl(e)&&!Zl(e.code)){var r=new dI(e);return t&&null!==pI&&pI.emit(yi.ERROR,r),Promise.reject(r)}},vI=function(e){c(r,e);var t=m(r);function r(e){var n;return i(this,r),(n=t.call(this,e))._n="C2CModule",n._messageFromUnreadDBMap=new Map,n._signalingFromUnreadDBList=[],n}return a(r,[{key:"onNewC2CMessage",value:function(e){var t=e.dataList,n=e.isInstantMessage,r=e.C2CRemainingUnreadList,i=e.C2CPairUnreadList;Ll.d("".concat(this._n,".onNewC2CMessage count:").concat(t.length," isInstantMessage:").concat(n));var o=this._newC2CMessageStoredAndSummary({dataList:t,C2CRemainingUnreadList:r,C2CPairUnreadList:i,isInstantMessage:n}),a=o.conversationOptionsList,s=o.messageList,c=o.isUnreadC2CMessage;this.filterModifiedMessage(s),a.length>0&&this.getModule(Ff).onNewMessage({conversationOptionsList:a,isInstantMessage:n,isUnreadC2CMessage:c});var u=this.filterUnmodifiedMessage(s);n&&u.length>0&&this.emitOuterEvent(yi.MESSAGE_RECEIVED,u),s.length=0}},{key:"_newC2CMessageStoredAndSummary",value:function(e){for(var t=e.dataList,n=e.C2CRemainingUnreadList,r=e.C2CPairUnreadList,i=e.isInstantMessage,o=null,a=[],s=[],c={},u=this.getModule(Kf),l=this.getModule(nh),d=!1,p=this.getModule(Ff),f=0,h=t.length;f<h;f++)if(this._isSignaling(t[f]))this._signalingFromUnreadDBList.push(t[f].eventArray[0].c2CNotifyMsgArray[0]);else{var g=t[f];g.currentUser=this.getMyUserID(),g.conversationType=bi.CONV_C2C,g.isSystemMessage=!!g.isSystemMessage,(Zl(g.nick)||Zl(g.avatar))&&(d=!0,Ll.d("".concat(this._n,"._newC2CMessageStoredAndSummary nick or avatar missing!"))),o=new uI(g),g.elements=u.parseElements(g.elements,g.from),o.setElement(g.elements),o.setNickAndAvatar({nick:g.nick,avatar:g.avatar});var v=o.conversationID;if(i){if(1===this._messageFromUnreadDBMap.get(o.ID))continue;var m=!1;if(o.from!==this.getMyUserID()){var _=p.getLatestMessageSentByPeer(v);if(_){var y=_.nick,b=_.avatar;d?o.setNickAndAvatar({nick:y,avatar:b}):y===o.nick&&b===o.avatar||(m=!0)}}else{var I=p.getLatestMessageSentByMe(v);if(I){var T=I.nick,C=I.avatar;T===o.nick&&C===o.avatar||p.modifyMessageSentByMe({conversationID:v,latestNick:o.nick,latestAvatar:o.avatar})}}var S=1===t[f].isModified;if(p.isMessageSentByCurrentInstance(o)?o.isModified=S:S=!1,0===g.msgLifeTime)o._onlineOnlyFlag=!0,p.isMessageSentByCurrentInstance(o)||s.push(o);else{if(!p.pushIntoMessageList(s,o,S))continue;m&&(p.modifyMessageSentByPeer({conversationID:v,latestNick:o.nick,latestAvatar:o.avatar}),p.updateUserProfileSpecifiedKey({conversationID:v,nick:o.nick,avatar:o.avatar}))}i&&o.clientTime>0&&l.addMessageDelay(o.clientTime)}else this._messageFromUnreadDBMap.set(o.ID,1);if(0!==g.msgLifeTime){if(!1===o._onlineOnlyFlag){var E=p.getLastMessageTime(v);if(Wl(E)&&o.time<E)continue;if(Zl(c[v])){var M=0;"in"===o.flow&&(o._isExcludedFromUnreadCount||(M=1)),c[v]=a.push({conversationID:v,unreadCount:M,type:o.conversationType,subType:o.conversationSubType,lastMessage:o._isExcludedFromLastMessage?"":o})-1}else{var k=c[v];a[k].type=o.conversationType,a[k].subType=o.conversationSubType,a[k].lastMessage=o._isExcludedFromLastMessage?"":o,"in"===o.flow&&(o._isExcludedFromUnreadCount||a[k].unreadCount++)}}}else o._onlineOnlyFlag=!0}this._handleSignalingFromUnreadDB();var w=!1;if(Xl(r))for(var O=function(e,t){if(r[e].unreadCount>0){w=!0;var n=a.find((function(t){return t.conversationID==="C2C".concat(r[e].from)}));n?n.unreadCount=r[e].unreadCount:a.push({conversationID:"C2C".concat(r[e].from),unreadCount:r[e].unreadCount,type:bi.CONV_C2C})}},D=0,A=r.length;D<A;D++)O(D);if(Xl(n))for(var R=function(e,t){a.find((function(t){return t.conversationID==="C2C".concat(n[e].from)}))||a.push({conversationID:"C2C".concat(n[e].from),type:bi.CONV_C2C,lastMsgTime:n[e].lastMsgTime})},x=0,L=n.length;x<L;x++)R(x);return{conversationOptionsList:a,messageList:s,isUnreadC2CMessage:w}}},{key:"_isSignaling",value:function(e){var t=e.eventArray;return!(!Xl(t)||10!==t[0].event)}},{key:"_handleSignalingFromUnreadDB",value:function(){var e=this._signalingFromUnreadDBList.length;if(Ll.l("".concat(this._n,"._handleSignalingFromUnreadDB signalingCount:").concat(e)),0!==e){var t=[];this._signalingFromUnreadDBList.forEach((function(e){e.hasOwnProperty("c2cMessageRevokedNotify")&&t.push(e)})),this.onC2CMessageRevoked({dataList:t}),this._signalingFromUnreadDBList.length=0,t.length=0}}},{key:"onC2CMessageRevoked",value:function(e){var t=this,n=this.getModule(Ff),r=[],i=null,o=!0;e.dataList.forEach((function(e){if(e.c2cMessageRevokedNotify){var a=e.c2cMessageRevokedNotify.revokedInfos;Zl(a)||a.forEach((function(e){var a=t.getMyUserID()===e.from?"".concat(bi.CONV_C2C).concat(e.to):"".concat(bi.CONV_C2C).concat(e.from);i=n.revoke(a,e.sequence,e.random);var s=e.revokerInfo&&e.revokerInfo.revoker;if(i)i.revoker=s,r.push(i);else{var c={conversationID:a,sequence:e.sequence,time:e.time,revoker:s};n.isLastMessageRevoked(c)&&(r.push(c),o=!1)}}))}})),0!==r.length&&(n.onMessageRevoked(r),!0===o&&(Ll.l("".concat(this._n,".onC2CMessageRevoked count:").concat(r.length)),this.emitOuterEvent(yi.MESSAGE_REVOKED,r)))}},{key:"onC2CMessageReadReceipt",value:function(e){var t=this;e.dataList.forEach((function(e){if(!Bd(e.c2cMessageReadReceipt)){var n=e.c2cMessageReadReceipt.to;e.c2cMessageReadReceipt.uinPairReadArray.forEach((function(e){var r=e.peerReadTime;Ll.d("".concat(t._n,"._onC2CMessageReadReceipt to:").concat(n," peerReadTime:").concat(r));var i="".concat(bi.CONV_C2C).concat(n),o=t.getModule(Ff);o.recordPeerReadTime(i,r),o.updateMessageIsPeerReadProperty(i,r)}))}}))}},{key:"onC2CMessageReadNotice",value:function(e){var t=this;e.dataList.forEach((function(e){if(!Bd(e.c2cMessageReadNotice)){var n=t.getModule(Ff);e.c2cMessageReadNotice.uinPairReadArray.forEach((function(e){var r=e.from,i=e.peerReadTime;Ll.d("".concat(t._n,".onC2CMessageReadNotice from:").concat(r," lastReadTime:").concat(i));var o="".concat(bi.CONV_C2C).concat(r);n.updateIsReadAfterReadReport({conversationID:o,lastMessageTime:i}),n.updateUnreadCount(o)}))}}))}},{key:"onC2CMessageModified",value:function(e){Ll.d("".concat(this._n,".onC2CMessageModified options:"),JSON.stringify(e));var t=this.getModule(Ff);e.dataList.forEach((function(e){t.onMessageModified(n(n({},e),{},{conversationType:bi.CONV_C2C}))}))}},{key:"onReadReceiptList",value:function(e){Ll.d("".concat(this._n,".onReadReceiptList options:"),JSON.stringify(e));var t=e.dataList,n=t.userID,r=t.readReceiptList;this.getModule(Ff).updateReadReceiptInfo({userID:n,readReceiptList:r})}},{key:"sendMessage",value:function(e,t){var n=this._createC2CMessagePack(e,t);return this.request(n)}},{key:"_createC2CMessagePack",value:function(e,t){var n=null;t&&(t.offlinePushInfo&&(n=t.offlinePushInfo),!0===t.onlineUserOnly&&(n?n.disablePush=!0:n={disablePush:!0}));var r="";Yl(e.cloudCustomData)&&e.cloudCustomData.length>0&&(r=e.cloudCustomData);var i=[];if($l(t)&&$l(t.messageControlInfo)){var o=t.messageControlInfo,a=o.excludedFromUnreadCount,s=o.excludedFromLastMessage,c=o.excludedFromContentModeration;!0===a&&i.push("NoUnread"),!0===s&&i.push("NoLastMsg"),!0===c&&i.push("NoMsgCheck")}var u=this.isOnlineMessage(e,t)?0:void 0;return{protocolName:vh,tjgID:this.generateTjgID(e),requestData:{fromAccount:this.getMyUserID(),toAccount:e.to,msgBody:e.getElements(),cloudCustomData:r,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:u,nick:e.nick,avatar:e.avatar,offlinePushInfo:n?{pushFlag:!0===n.disablePush?1:0,title:n.title||"",desc:n.description||"",ext:n.extension||"",apnsInfo:{badgeMode:!0===n.ignoreIOSBadge?1:0,isVoipPush:this._isVoipPush(n)},androidInfo:{OPPOChannelID:n.androidOPPOChannelID||""}}:void 0,messageControlInfo:0!==u?i:void 0,clientTime:e.clientTime,needReadReceipt:!0===e.needReadReceipt?1:0,isSupportExtension:!0===e.isSupportExtension?1:0}}}},{key:"_isVoipPush",value:function(e){var t=void 0;return Zl(e.disableVoipPush)||(t=!1===e.disableVoipPush?1:0),t}},{key:"isOnlineMessage",value:function(e,t){return!(!t||!0!==t.onlineUserOnly)}},{key:"revokeMessage",value:function(e){return this.request({protocolName:Ch,requestData:{msgInfo:{fromAccount:e.from,toAccount:e.to,msgSeq:e.sequence,msgRandom:e.random,msgTimeStamp:e.time}}})}},{key:"deleteMessage",value:function(e){var t=e.to,n=e.keyList;return Ll.l("".concat(this._n,".deleteMessage toAccount:").concat(t," count:").concat(n.length)),this.request({protocolName:Oh,requestData:{fromAccount:this.getMyUserID(),to:t,keyList:n}})}},{key:"modifyRemoteMessage",value:function(e){var t=e.from,n=e.to,r=e.version,i=void 0===r?0:r,o=e.sequence,a=e.random,s=e.time,c=e.payload,u=e.type,l=e.cloudCustomData,d=void 0;return jd(u)&&(d=[]).push({type:u,content:c}),this.request({protocolName:Dh,requestData:{from:t,to:n,version:i,sequence:o,random:a,time:s,elements:d,cloudCustomData:l}})}},{key:"setMessageRead",value:function(e){var t=this,n=e.conversationID,r=e.lastMessageTime,i="".concat(this._n,".setMessageRead");Ll.l("".concat(i," conversationID:").concat(n," lastMessageTime:").concat(r)),Wl(r)||this.outputWarning("DoNotModifyLastTime");var o=new a_("setC2CMessageRead");return o.setMessage("conversationID:".concat(n," lastMessageTime:").concat(r)),this.request({protocolName:Sh,requestData:{C2CMsgReaded:{cookie:"",C2CMsgReadedItem:[{toAccount:n.replace("C2C",""),lastMessageTime:r,receipt:1}]}}}).then((function(){o.setNetworkType(t.getNetworkType()).end(),Ll.l("".concat(i," ok"));var e=t.getModule(Ff);return e.updateIsReadAfterReadReport({conversationID:n,lastMessageTime:r}),e.updateUnreadCount(n),lI()})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];o.setError(e,r,i).end()})),Ll.l("".concat(i," failed. error:"),e),gI(e)}))}},{key:"getRoamingMessage",value:function(e){var t=this,n="".concat(this._n,".getRoamingMessage"),r=e.peerAccount,i=e.conversationID,o=e.count,a=e.lastMessageTime,s=e.messageKey,c="peerAccount:".concat(r," count:").concat(o||15," lastMessageTime:").concat(a||0," messageKey:").concat(s);Ll.l("".concat(n," ").concat(c));var u=new a_("getC2CRoamingMessages");return this.request({protocolName:kh,requestData:{peerAccount:r,count:o||15,lastMessageTime:a||0,messageKey:s}}).then((function(e){var r=e.data,o=r.complete,a=r.messageList,s=r.messageKey,l=r.lastMessageTime;Zl(a)?Ll.l("".concat(n," ok. complete:").concat(o," but messageList is undefined!")):Ll.l("".concat(n," ok. complete:").concat(o," count:").concat(a.length)),u.setNetworkType(t.getNetworkType()).setMessage("".concat(c," complete:").concat(o," length:").concat(a.length)).end();var d=t.getModule(Ff);1===o&&d.setCompleted(i);var p=d.onRoamingMessage(a,i);d.modifyMessageList(i),d.updateIsRead(i),d.updateRoamingMessageKeyAndTime(i,s,l);var f=d.getPeerReadTime(i);if(Ll.l("".concat(n," update isPeerRead property. conversationID:").concat(i," peerReadTime:").concat(f)),f)d.updateMessageIsPeerReadProperty(i,f);else{var h=i.replace(bi.CONV_C2C,"");t.getRemotePeerReadTime([h]).then((function(){d.updateMessageIsPeerReadProperty(i,d.getPeerReadTime(i))}))}var g="";if(p.length>0)g=p[0].ID;else{var v=d.getLocalOldestMessage(i);v&&(g=v.ID)}return Ll.l("".concat(n," nextReqID:").concat(g," stored message count:").concat(p.length)),{nextReqID:g,storedMessageList:p}})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];u.setMessage(c).setError(e,r,i).end()})),Ll.w("".concat(n," failed. error:"),e),gI(e)}))}},{key:"getRoamingMessagesHopping",value:function(e){var t=this,n="".concat(this._n,".getRoamingMessagesHopping"),r=e.peerAccount,i=e.time,o=void 0===i?0:i,a=e.count,s=e.direction,c="".concat(bi.CONV_C2C).concat(r),u="peerAccount:".concat(r," count:").concat(a," time:").concat(o," direction:").concat(s);Ll.l("".concat(n," ").concat(u));var l=new a_("getC2CRoamingMessagesHopping");return this.request({protocolName:kh,requestData:{peerAccount:r,count:a+1,lastMessageTime:o,direction:s}}).then((function(e){var r=e.data,i=r.complete,o=r.messageList,a=void 0===o?[]:o,d=r.lastMessageTime;Ll.l("".concat(n," ok. complete:").concat(i," count:").concat(a.length)),l.setNetworkType(t.getNetworkType()).setMessage("".concat(u," complete:").concat(i," length:").concat(a.length)).end(),1!==i&&(1===s?a.pop():a.shift());var p=t.getModule(Ff).onRoamingMessage(a,c,!1);t._modifyMessageList(c,p);var f=t._computeResult({complete:i,lastMessageTime:d,resultList:p});return lI(f)})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];l.setMessage(u).setError(e,r,i).end()})),Ll.w("".concat(n," failed. error:"),e),gI(e)}))}},{key:"_computeResult",value:function(e){var t=e.complete,n=void 0===t?0:t,r=e.lastMessageTime,i=e.resultList,o={messageList:y(void 0===i?[]:i),isCompleted:!1,nextMessageTime:""};return 1===n?(o.isCompleted=!0,o):(o.nextMessageTime=r,o)}},{key:"_modifyMessageList",value:function(e,t){var n=this.getModule(Ff).getLocalConversation(e);if(n)for(var r=n.userProfile.nick,i=n.userProfile.avatar,o=this.getModule(Nf).getNickAndAvatarByUserID(this.getMyUserID()),a=o.nick,s=o.avatar,c=t.length-1;c>=0;c--){var u=t[c];"in"===u.flow&&(u.nick!==r&&u.setNickAndAvatar({nick:r}),u.avatar!==i&&u.setNickAndAvatar({avatar:i})),"out"===u.flow&&(u.nick!==a&&u.setNickAndAvatar({nick:a}),u.avatar!==s&&u.setNickAndAvatar({avatar:s}))}}},{key:"getRemotePeerReadTime",value:function(e){var t=this,n="".concat(this._n,".getRemotePeerReadTime");if(Bd(e))return Ll.w("".concat(n," userIDList is empty!")),Promise.resolve();var r=new a_("getPeerReadTime");return Ll.l("".concat(n," userIDList:").concat(e)),this.request({protocolName:wh,requestData:{userIDList:e}}).then((function(i){var o=i.data.peerReadTimeList;Ll.l("".concat(n," ok. peerReadTimeList:").concat(o));for(var a="",s=t.getModule(Ff),c=0;c<e.length;c++)a+="".concat(e[c],"-").concat(o[c]," "),o[c]>0&&s.recordPeerReadTime("C2C".concat(e[c]),o[c]);r.setNetworkType(t.getNetworkType()).setMessage(a).end()})).catch((function(e){t.probeNetwork().then((function(t){var n=_(t,2),i=n[0],o=n[1];r.setError(e,i,o).end()})),Ll.w("".concat(n," failed. error:"),e)}))}},{key:"sendReadReceipt",value:function(e){var t=this,n=e[0].conversationID.replace(bi.CONV_C2C,""),r=new a_("sendC2CReadReceipt");r.setMessage("peerAccount:".concat(n));var i=this.getMyUserID(),o=e.filter((function(e){return e.from!==i&&!0===e.needReadReceipt})).map((function(e){return{fromAccount:e.from,toAccount:e.to,sequence:e.sequence,random:e.random,time:e.time,clientTime:e.clientTime}}));if(0===o.length)return gI({code:Av});var a="".concat(this._n,".sendReadReceipt");return Ll.l("".concat(a,". peerAccount:").concat(n," messageInfoList length:").concat(o.length)),this.request({protocolName:dg,requestData:{peerAccount:n,messageInfoList:o}}).then((function(e){return r.end(),Ll.l("".concat(a," ok")),lI()})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),i=n[0],o=n[1];r.setError(e,i,o).end()})),Ll.w("".concat(a," failed. error:"),e),gI(e)}))}},{key:"getReadReceiptList",value:function(e){var t="".concat(this._n,".getReadReceiptList"),n=this.getMyUserID(),r=e.filter((function(e){return e.from===n&&!0===e.needReadReceipt}));return Ll.l("".concat(t," userID:").concat(n," messageList length:").concat(r.length)),hI({messageList:r})}},{key:"getMessageExtensions",value:function(e,t){return Ll.l("".concat(this._n,".getMessageExtensions startSequence:").concat(t)),this.request({protocolName:Rh,requestData:{from:e.from,to:e.to,messageKey:this._getMessageKey(e),startSequence:t}})}},{key:"modifyMessageExtensions",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Ll.l("".concat(this._n,".modifyMessageExtensions operateType:").concat(n)),this.request({protocolName:Ah,requestData:{from:e.from,to:e.to,messageKey:this._getMessageKey(e),extensionList:t,operateType:n}})}},{key:"_getMessageKey",value:function(e){var t=e.clientSequence,n=e.random,r=e.time;return"".concat(t,"_").concat(n,"_").concat(r)}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset")),this._messageFromUnreadDBMap.clear(),this._signalingFromUnreadDBList.length=0}}]),r}(uh),mI=ae.match(/firefox\/(\d+)/i),_I=!!mI&&+mI[1],yI=/MSIE|Trident/.test(ae),bI=ae.match(/AppleWebKit\/(\d+)\./),II=!!bI&&+bI[1],TI=[],CI=z(TI.sort),SI=z(TI.push),EI=R((function(){TI.sort(void 0)})),MI=R((function(){TI.sort(null)})),kI=cr("sort"),wI=!R((function(){if(de)return de<70;if(!(_I&&_I>3)){if(yI)return!0;if(II)return II<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)TI.push({k:t+r,v:n})}for(TI.sort((function(e,t){return t.v-e.v})),r=0;r<TI.length;r++)t=TI[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));rn({target:"Array",proto:!0,forced:EI||!MI||!kI||!wI},{sort:function(e){void 0!==e&&ye(e);var t=ke(this);if(wI)return void 0===e?CI(t):CI(t,e);var n,r,i=[],o=Pt(t);for(r=0;r<o;r++)r in t&&SI(i,t[r]);for(G_(i,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:pn(t)>pn(n)?1:-1}}(e)),n=i.length,r=0;r<n;)t[r]=i[r++];for(;r<o;)delete t[r++];return t}});var OI=sr.findIndex,DI=!0;"findIndex"in[]&&Array(1).findIndex((function(){DI=!1})),rn({target:"Array",proto:!0,forced:DI},{findIndex:function(e){return OI(this,e,arguments.length>1?arguments[1]:void 0)}}),qo("findIndex");var AI=function(){function e(){i(this,e),this.list=new Map,this._n="MessageListHandler",this._latestMessageSentByPeerMap=new Map,this._latestMessageSentByMeMap=new Map}return a(e,[{key:"getLocalOldestMessageByConversationID",value:function(e){if(!e)return null;if(!this.list.has(e))return null;var t=this.list.get(e).values();return t?t.next().value:null}},{key:"pushIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.conversationID,r=!0;this.list.has(n)||this.list.set(n,new Map);var i=this._getUniqueIDOfMessage(e),o=this.list.get(n).has(i);if(o){var a=this.list.get(n).get(i);if(!t||!0===a.isModified)return!1}return this.list.get(n).set(i,e),this._setLatestMessageSentByPeer(n,e),this._setLatestMessageSentByMe(n,e),r}},{key:"unshift",value:function(e,t){var n;if(Xl(e)?e.length>0&&(n=e[0].conversationID,this._unshiftMultipleMessages(e,t)):(n=e.conversationID,this._unshiftSingleMessage(e,t)),n&&n.startsWith(bi.CONV_C2C)){var r=Array.from(this.list.get(n).values()),i=r.length;if(0===i)return;for(var o=i-1;o>=0;o--)if("out"===r[o].flow){this._setLatestMessageSentByMe(n,r[o]);break}for(var a=i-1;a>=0;a--)if("in"===r[a].flow){this._setLatestMessageSentByPeer(n,r[a]);break}}}},{key:"_unshiftSingleMessage",value:function(e,t){var n=e.conversationID,r=this._getUniqueIDOfMessage(e);if(!this.list.has(n))return this.list.set(n,new Map),this.list.get(n).set(r,e),void t.push(e);var i=this.list.get(n),o=Array.from(i);i.has(r)||(o.unshift([r,e]),this.list.set(n,new Map(o)),t.push(e))}},{key:"_unshiftMultipleMessages",value:function(e,t){for(var n=e.length,r=[],i=e[0].conversationID,o=this.list.get(i),a=this.list.has(i)?Array.from(o):[],s=0;s<n;s++){var c=this._getUniqueIDOfMessage(e[s]);o&&o.has(c)||(r.push([c,e[s]]),t.push(e[s]))}this.list.set(i,new Map(r.concat(a)))}},{key:"remove",value:function(e){var t=e.conversationID,n=this._getUniqueIDOfMessage(e);this.list.has(t)&&this.list.get(t).delete(n)}},{key:"revoke",value:function(e,t,n){if(Ll.d("revoke message",e,t,n),this.list.has(e)){var r,i=E(this.list.get(e));try{for(i.s();!(r=i.n()).done;){var o=_(r.value,2)[1];if(o.sequence===t&&(Zl(n)||o.random===n))return o.isRevoked=!0,o}}catch(s){i.e(s)}finally{i.f()}}return null}},{key:"removeByConversationID",value:function(e){this.list.has(e)&&(this.list.delete(e),this._latestMessageSentByPeerMap.delete(e),this._latestMessageSentByMeMap.delete(e))}},{key:"findMessage",value:function(e){var t,n=null,r=E(this.list);try{for(r.s();!(t=r.n()).done;)for(var i=y(_(t.value,2)[1].values()),o=i.length,a=0;a<o;a++)if(i[a].ID===e){n=i[a];break}}catch(c){r.e(c)}finally{r.f()}return n}},{key:"updateMessageIsPeerReadProperty",value:function(e,t){var n=[];if(this.list.has(e)){var r,i=E(this.list.get(e));try{for(i.s();!(r=i.n()).done;){var o=_(r.value,2)[1];o.time<=t&&!o.isPeerRead&&"out"===o.flow&&(o.isPeerRead=!0,n.push(o))}}catch(s){i.e(s)}finally{i.f()}Ll.l("".concat(this._n,".updateMessageIsPeerReadProperty conversationID:").concat(e," peerReadTime:").concat(t," count:").concat(n.length))}return n}},{key:"updateMessageIsModifiedProperty",value:function(e){var t=e.conversationID;if(this.list.has(t)){var n=this._getUniqueIDOfMessage(e),r=this.list.get(t).get(n);r&&(r.isModified=!0)}}},{key:"hasLocalMessageList",value:function(e){return this.list.has(e)}},{key:"getLocalMessageList",value:function(e){return this.hasLocalMessageList(e)?y(this.list.get(e).values()):[]}},{key:"hasLocalMessage",value:function(e,t){for(var n=!1,r=this.getLocalMessageList(e),i=r.length,o=0;o<i;o++)r[o].ID===t&&(n=!0);return n}},{key:"getLocalMessage",value:function(e,t){for(var n=null,r=this.getLocalMessageList(e),i=r.length,o=0;o<i;o++)if(r[o].ID===t){n=r[o];break}return n}},{key:"getLocalLastMessage",value:function(e){var t=this.getLocalMessageList(e);return t[t.length-1]}},{key:"getLocalOldestMessage",value:function(e){return this.getLocalMessageList(e)[0]}},{key:"_setLatestMessageSentByPeer",value:function(e,t){e.startsWith(bi.CONV_C2C)&&"in"===t.flow&&this._latestMessageSentByPeerMap.set(e,t)}},{key:"_setLatestMessageSentByMe",value:function(e,t){e.startsWith(bi.CONV_C2C)&&"out"===t.flow&&this._latestMessageSentByMeMap.set(e,t)}},{key:"getLatestMessageSentByPeer",value:function(e){return this._latestMessageSentByPeerMap.get(e)}},{key:"getLatestMessageSentByMe",value:function(e){return this._latestMessageSentByMeMap.get(e)}},{key:"modifyMessageSentByPeer",value:function(e){var t=e.conversationID,n=e.latestNick,r=e.latestAvatar,i=this.list.get(t);if(!Bd(i)){var o=Array.from(i.values()),a=o.length;if(0!==a){for(var s=null,c=0,u=!1,l=a-1;l>=0;l--)"in"===o[l].flow&&((s=o[l]).nick!==n&&(s.setNickAndAvatar({nick:n}),u=!0),s.avatar!==r&&(s.setNickAndAvatar({avatar:r}),u=!0),u&&(c+=1));Ll.l("".concat(this._n,".modifyMessageSentByPeer conversationID:").concat(t," count:").concat(c))}}}},{key:"modifyMessageSentByMe",value:function(e){var t=e.conversationID,n=e.latestNick,r=e.latestAvatar,i=this.list.get(t);if(!Bd(i)){var o=Array.from(i.values()),a=o.length;if(0!==a){for(var s=null,c=0,u=!1,l=a-1;l>=0;l--)"out"===o[l].flow&&((s=o[l]).nick!==n&&(s.setNickAndAvatar({nick:n}),u=!0),s.avatar!==r&&(s.setNickAndAvatar({avatar:r}),u=!0),u&&(c+=1));Ll.l("".concat(this._n,".modifyMessageSentByMe conversationID:").concat(t," count:").concat(c))}}}},{key:"getTopicConversationIDList",value:function(e){return y(this.list.keys()).filter((function(t){return t.startsWith("".concat(bi.CONV_GROUP).concat(e))}))}},{key:"traversal",value:function(){if(0!==this.list.size&&-1===Ll.getLevel()){console.group("conversationID-messageCount");var e,t=E(this.list);try{for(t.s();!(e=t.n()).done;){var n=_(e.value,2),r=n[0],i=n[1];console.log("".concat(r,"-").concat(i.size))}}catch(a){t.e(a)}finally{t.f()}console.groupEnd()}}},{key:"onMessageModified",value:function(e,t){if(!this.list.has(e))return{isUpdated:!1,message:null};var n=this._getUniqueIDOfMessage(t),r=this.list.get(e).has(n);if(Ll.d("".concat(this._n,".onMessageModified conversationID:").concat(e," uniqueID:").concat(n," has:").concat(r)),r){var i=this.list.get(e).get(n),o=t.messageVersion,a=t.elements,s=t.cloudCustomData;return i.version<o?(i.version=o,i._elements=JSON.parse(JSON.stringify(a)),i.payload=JSON.parse(JSON.stringify(a[0].content)),i.type=a[0].type,i.cloudCustomData=s,i.isModified=!0,{isUpdated:!0,message:i}):{isUpdated:!1,message:i}}return{isUpdated:!1,message:null}}},{key:"_getUniqueIDOfMessage",value:function(e){var t=e.from,n=e.to,r=e.random,i=e.sequence,o=e.time;return"".concat(t,"-").concat(n,"-").concat(r,"-").concat(i,"-").concat(o)}},{key:"reset",value:function(){this.list.clear(),this._latestMessageSentByPeerMap.clear(),this._latestMessageSentByMeMap.clear()}}]),e}(),RI="_a2KeyAndTinyIDUpdated",xI="_cloudConfigUpdated",LI="_profileUpdated";function NI(e){this.mixin(e)}NI.mixin=function(e){var t=e.prototype||e;t._isReady=!1,t.ready=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return this._isReady?void(t?e.call(this):setTimeout(e,1)):(this._readyQueue=this._readyQueue||[],void this._readyQueue.push(e))},t.triggerReady=function(){var e=this;this._isReady=!0,setTimeout((function(){var t=e._readyQueue;e._readyQueue=[],t&&t.length>0&&t.forEach((function(e){e.call(this)}),e)}),1)},t.resetReady=function(){this._isReady=!1,this._readyQueue=[]},t.isReady=function(){return this._isReady}};var PI=["jpg","jpeg","gif","png","bmp","image","webp"],jI=["mp4","quicktime","mov"],UI=1,GI=2,VI=3,FI=255,BI=function(){function e(t){var n=this;i(this,e),Bd(t)||(this.userID=t.userID||"",this.nick=t.nick||"",this.gender=t.gender||"",this.birthday=t.birthday||0,this.location=t.location||"",this.selfSignature=t.selfSignature||"",this.allowType=t.allowType||bi.ALLOW_TYPE_ALLOW_ANY,this.language=t.language||0,this.avatar=t.avatar||"",this.messageSettings=t.messageSettings||0,this.adminForbidType=t.adminForbidType||bi.FORBID_TYPE_NONE,this.level=t.level||0,this.role=t.role||0,this.lastUpdatedTime=0,this.profileCustomField=[],Bd(t.profileCustomField)||t.profileCustomField.forEach((function(e){n.profileCustomField.push({key:e.key,value:e.value})})))}return a(e,[{key:"validate",value:function(e){var t=!0,n="";if(Bd(e))return{valid:!1,tips:"empty options"};if(e.profileCustomField)for(var r=e.profileCustomField.length,i=null,o=0;o<r;o++){if(i=e.profileCustomField[o],!Yl(i.key)||-1===i.key.indexOf("Tag_Profile_Custom"))return{valid:!1,tips:"The prefix of keys of the custom profile key-value pairs (which is profileCustomField) must be Tag_Profile_Custom"};if(!Yl(i.value))return{valid:!1,tips:"The type of values of the custom profile key-value pairs (which is profileCustomField) must be String"}}for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if("profileCustomField"===a)continue;if(Bd(e[a])&&!Yl(e[a])&&!Wl(e[a])){n="key:"+a+", invalid value:"+e[a],t=!1;continue}switch(a){case"nick":Yl(e[a])||(n="nick must be a string",t=!1),cd(e[a])>500&&(n="nick name limited: must less than or equal to ".concat(500," bytes, current size: ").concat(cd(e[a])," bytes"),t=!1);break;case"gender":pd(jl,e.gender)||(n="key:gender, invalid value:"+e.gender,t=!1);break;case"birthday":Wl(e.birthday)||(n="birthday must be a number",t=!1);break;case"location":Yl(e.location)||(n="location must be a string",t=!1);break;case"selfSignature":Yl(e.selfSignature)||(n="selfSignature must be a string",t=!1);break;case"allowType":pd(Gl,e.allowType)||(n="key:allowType, invalid value:"+e.allowType,t=!1);break;case"language":Wl(e.language)||(n="language must be a number",t=!1);break;case"avatar":Yl(e.avatar)||(n="avatar must be a string",t=!1);break;case"messageSettings":0!==e.messageSettings&&1!==e.messageSettings&&(n="messageSettings must be 0 or 1",t=!1);break;case"adminForbidType":pd(Ul,e.adminForbidType)||(n="key:adminForbidType, invalid value:"+e.adminForbidType,t=!1);break;case"level":Wl(e.level)||(n="level must be a number",t=!1);break;case"role":Wl(e.role)||(n="role must be a number",t=!1);break;default:n="unknown key:"+a+"  "+e[a],t=!1}}return{valid:t,tips:n}}}]),e}(),qI=a((function e(t){i(this,e),this.value=t,this.next=null})),HI=function(){function e(t){i(this,e),this.MAX_LENGTH=t,this.pTail=null,this.pNodeToDel=null,this.map=new Map}return a(e,[{key:"set",value:function(e){var t=new qI(e);if(this.map.size<this.MAX_LENGTH)null===this.pTail?(this.pTail=t,this.pNodeToDel=t):(this.pTail.next=t,this.pTail=t),this.map.set(e,1);else{var n=this.pNodeToDel;this.pNodeToDel=this.pNodeToDel.next,this.map.delete(n.value),n.next=null,n=null,this.pTail.next=t,this.pTail=t,this.map.set(e,1)}}},{key:"has",value:function(e){return this.map.has(e)}},{key:"delete",value:function(e){this.has(e)&&this.map.delete(e)}},{key:"tail",value:function(){return this.pTail}},{key:"size",value:function(){return this.map.size}},{key:"data",value:function(){return Array.from(this.map.keys())}},{key:"reset",value:function(){for(var e;null!==this.pNodeToDel;)e=this.pNodeToDel,this.pNodeToDel=this.pNodeToDel.next,e.next=null,e=null;this.pTail=null,this.map.clear()}}]),e}(),zI=["groupID","name","avatar","type","introduction","notification","ownerID","selfInfo","createTime","infoSequence","lastInfoTime","lastMessage","nextMessageSeq","memberNum","maxMemberNum","memberList","joinOption","groupCustomField","muteAllMembers","isSupportTopic","_lastRevokedTime"],KI=function(){function e(t){i(this,e),this.groupID="",this.name="",this.avatar="",this.type="",this.introduction="",this.notification="",this.ownerID="",this.createTime="",this.infoSequence="",this.lastInfoTime="",this.selfInfo={messageRemindType:"",joinTime:"",nameCard:"",role:"",userID:"",memberCustomField:void 0,readedSequence:0,excludedUnreadSequenceList:void 0},this.lastMessage={lastTime:"",lastSequence:"",fromAccount:"",messageForShow:""},this.nextMessageSeq="",this.memberNum="",this.memberCount="",this.maxMemberNum="",this.maxMemberCount="",this.joinOption="",this.groupCustomField=[],this.muteAllMembers=!1,this.isSupportTopic=!1,this._lastRevokedTime=0,this._initGroup(t)}return a(e,[{key:"memberNum",get:function(){return this.memberCount},set:function(e){}},{key:"maxMemberNum",get:function(){return this.maxMemberCount},set:function(e){}},{key:"_initGroup",value:function(e){for(var t in e)zI.indexOf(t)<0||("selfInfo"!==t?("memberNum"===t&&(this.memberCount=e[t]),"maxMemberNum"===t&&(this.maxMemberCount=e[t]),"isSupportTopic"!==t?this[t]=e[t]:this.isSupportTopic=1===e[t]):this.updateSelfInfo(e[t]))}},{key:"updateGroup",value:function(e){var t=this;e.appid=void 0,e.grossTopicNextMsgSeq=void 0,e.selfInfo&&(e.selfInfo.grossTopicReadSeq=void 0);var n=JSON.parse(JSON.stringify(e));n.lastMsgTime&&(this.lastMessage.lastTime=n.lastMsgTime),Zl(n.muteAllMembers)||("On"===n.muteAllMembers?n.muteAllMembers=!0:n.muteAllMembers=!1),n.groupCustomField&&vd(this.groupCustomField,n.groupCustomField),Zl(n.memberNum)||(this.memberCount=n.memberNum),Zl(n.maxMemberNum)||(this.maxMemberCount=n.maxMemberNum),Zl(n.isSupportTopic)||(this.isSupportTopic=Wl(n.isSupportTopic)?1===n.isSupportTopic:n.isSupportTopic),ad(this,n,["members","errorCode","lastMsgTime","groupCustomField","memberNum","maxMemberNum","isSupportTopic"]),Xl(n.members)&&n.members.length>0&&n.members.forEach((function(e){e.userID===t.selfInfo.userID&&ad(t.selfInfo,e,["sequence"])}))}},{key:"updateSelfInfo",value:function(e){var t={nameCard:e.nameCard,joinTime:e.joinTime,role:e.role,messageRemindType:e.messageRemindType,readedSequence:e.readedSequence,excludedUnreadSequenceList:e.excludedUnreadSequenceList};ad(this.selfInfo,n({},t),[],["",null,void 0,0,NaN])}},{key:"setSelfNameCard",value:function(e){this.selfInfo.nameCard=e}}]),e}(),WI=function(e,t){return Zl(e)?{lastTime:0,lastSequence:0,fromAccount:0,messageForShow:"",payload:null,type:"",isRevoked:!1,cloudCustomData:"",onlineOnlyFlag:!1,nick:"",nameCard:"",version:0,isPeerRead:!1,revoker:null}:e instanceof uI?{lastTime:e.time||0,lastSequence:e.sequence||0,fromAccount:e.from||"",messageForShow:Pd(e.type,e.payload,t),payload:e.payload||null,type:e.type||null,isRevoked:e.isRevoked||!1,cloudCustomData:e.cloudCustomData||"",onlineOnlyFlag:e._onlineOnlyFlag||!1,nick:e.nick||"",nameCard:e.nameCard||"",version:e.version||0,isPeerRead:e.isPeerRead||!1,revoker:e.revoker||null}:n(n({},e),{},{messageForShow:Pd(e.type,e.payload,t)})},YI=function(){function e(t,n){i(this,e),this.conversationID=t.conversationID||"",this.unreadCount=t.unreadCount||0,this.type=t.type||"",this.lastMessage=WI(t.lastMessage,n),t.lastMsgTime&&(this.lastMessage.lastTime=t.lastMsgTime),this._isInfoCompleted=!1,this.peerReadTime=t.peerReadTime||0,this.groupAtInfoList=[],this.remark="",this.isPinned=t.isPinned||!1,this.messageRemindType="",this.markList=t.markList||[],this.customData=t.customData||"",this.conversationGroupList=t.conversationGroupList||[],this._initProfile(t)}return a(e,[{key:"toAccount",get:function(){return this.conversationID.startsWith(bi.CONV_C2C)?this.conversationID.replace(bi.CONV_C2C,""):this.conversationID.startsWith(bi.CONV_GROUP)?this.conversationID.replace(bi.CONV_GROUP,""):""}},{key:"subType",get:function(){return this.groupProfile?this.groupProfile.type:""}},{key:"_initProfile",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case"userProfile":t.userProfile=e.userProfile;break;case"groupProfile":t.groupProfile=e.groupProfile}})),Zl(this.userProfile)&&this.type===bi.CONV_C2C?this.userProfile=new BI({userID:e.conversationID.replace("C2C","")}):Zl(this.groupProfile)&&this.type===bi.CONV_GROUP&&(this.groupProfile=new KI({groupID:e.conversationID.replace("GROUP","")}))}},{key:"updateUnreadCount",value:function(e){var t=e.nextUnreadCount,n=e.isFromGetConversations,r=e.isUnreadC2CMessage;Zl(t)||(_d(this.subType)?this.unreadCount=0:n&&this.type===bi.CONV_GROUP||n&&this.type===bi.CONV_TOPIC||r&&this.type===bi.CONV_C2C?this.unreadCount=t:this.unreadCount=this.unreadCount+t)}},{key:"updateLastMessage",value:function(e){this.lastMessage=WI(e)}},{key:"updateGroupAtInfoList",value:function(e){if(!this._isNeedMergeGroupAtInfo(e)){var t,n=(b(t=e.groupAtType)||I(t)||T(t)||S()).slice(0);-1!==n.indexOf(bi.CONV_AT_ME)&&-1!==n.indexOf(bi.CONV_AT_ALL)&&(n=[bi.CONV_AT_ALL_AT_ME]);var r={from:e.from,groupID:e.groupID,topicID:e.topicID,messageSequence:e.sequence,atTypeArray:n,__random:e.__random,__sequence:e.__sequence};this.groupAtInfoList.push(r)}}},{key:"_isNeedMergeGroupAtInfo",value:function(e){var t=e.groupID,n=e.sequence;if(!yd({groupID:t}))return!1;var r=!1;return this.groupAtInfoList.forEach((function(t){t.messageSequence===n&&(t.atTypeArray.indexOf(bi.CONV_AT_ME)>-1&&e.groupAtType.indexOf(bi.CONV_AT_ALL)>-1&&(t.atTypeArray=[bi.CONV_AT_ALL_AT_ME]),t.atTypeArray.indexOf(bi.CONV_AT_ALL)>-1&&e.groupAtType.indexOf(bi.CONV_AT_ME)>-1&&(t.atTypeArray=[bi.CONV_AT_ALL_AT_ME],t.__random=e.__random,t.__sequence=e.__sequence),r=!0)})),r}},{key:"clearGroupAtInfoList",value:function(){this.groupAtInfoList.length=0}},{key:"reduceUnreadCount",value:function(){return this.unreadCount>=1&&(this.unreadCount-=1,!0)}},{key:"isLastMessageRevoked",value:function(e){var t=e.sequence,n=e.time;return this.type===bi.CONV_C2C&&t===this.lastMessage.lastSequence&&n===this.lastMessage.lastTime||this.type===bi.CONV_GROUP&&t===this.lastMessage.lastSequence}},{key:"setLastMessageRevoked",value:function(e){this.lastMessage.isRevoked=e}},{key:"setLastMessageRevoker",value:function(e){this.lastMessage.revoker=e}}]),e}(),JI=function(){function e(t){i(this,e),this._conversationModule=t,this._n="MessageRemindHandler",this._updateSequence=0}return a(e,[{key:"getC2CMessageRemindType",value:function(){var e=this,t="".concat(this._n,".getC2CMessageRemindType");return this._conversationModule.request({protocolName:Mh,updateSequence:this._updateSequence}).then((function(n){Ll.l("".concat(t," ok"));var r=n.data,i=r.updateSequence,o=r.muteFlagList;e._updateSequence=i,e._patchC2CMessageRemindType(o)})).catch((function(e){Ll.e("".concat(t," failed. error:"),e)}))}},{key:"_patchC2CMessageRemindType",value:function(e){var t=this,n=0,r="";Xl(e)&&e.length>0&&e.forEach((function(e){var i=e.userID,o=e.muteFlag;0===o?r=bi.MSG_REMIND_ACPT_AND_NOTE:1===o?r=bi.MSG_REMIND_DISCARD:2===o&&(r=bi.MSG_REMIND_ACPT_NOT_NOTE),!0===t._conversationModule.patchMessageRemindType({ID:i,isC2CConversation:!0,messageRemindType:r})&&(n+=1)})),Ll.l("".concat(this._n,"._patchC2CMessageRemindType count:").concat(n))}},{key:"set",value:function(e){return e.groupID?this._setGroupMessageRemindType(e):Xl(e.userIDList)?this._setC2CMessageRemindType(e):void 0}},{key:"_setGroupMessageRemindType",value:function(e){var t=this,n="".concat(this._n,"._setGroupMessageRemindType"),r=e.groupID,i=e.messageRemindType,o="groupID:".concat(r," messageRemindType:").concat(i),a=new a_("setMessageRemindType");return a.setMessage(o),this._getModule(Gf).modifyGroupMemberInfo({groupID:r,messageRemindType:i,userID:this._conversationModule.getMyUserID()}).then((function(){a.setNetworkType(t._conversationModule.getNetworkType()).end(),Ll.l("".concat(n," ok. ").concat(o));var r=t.onGroupMessageRemindTypeUpdated(e);return t._conversationModule.emitTotalUnreadMessageCountUpdate(),lI(r)})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];a.setError(e,r,i).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"onGroupMessageRemindTypeUpdated",value:function(e){var t=e.groupID,n=e.messageRemindType,r=this._getModule(jf).getLocalGroupProfile(t);if(r&&(r.selfInfo.messageRemindType=n),bd(t)){var i=t,o=Nd(i),a=this._getModule(Vf).getLocalTopic(o,i);return a&&(a.updateSelfInfo({messageRemindType:n}),this._conversationModule.emitOuterEvent(yi.TOPIC_UPDATED,{groupID:o,topic:a})),{topic:a}}return this._conversationModule.patchMessageRemindType({ID:t,isC2CConversation:!1,messageRemindType:n})&&this._emitConversationUpdate(),{group:r}}},{key:"_setC2CMessageRemindType",value:function(e){var t=this,n="".concat(this._n,"._setC2CMessageRemindType"),r=e.userIDList,i=e.messageRemindType,o=r.slice(0,30),a=0;i===bi.MSG_REMIND_DISCARD?a=1:i===bi.MSG_REMIND_ACPT_NOT_NOTE&&(a=2);var s="userIDList:".concat(o," messageRemindType:").concat(i),c=new a_("setMessageRemindType");return c.setMessage(s),this._conversationModule.request({protocolName:Eh,requestData:{userIDList:o,muteFlag:a}}).then((function(e){c.setNetworkType(t._conversationModule.getNetworkType()).end();var r=e.data,a=r.updateSequence,s=r.errorList;t._updateSequence=a;var u=[],l=[];Xl(s)&&s.forEach((function(e){u.push(e.userID),l.push({userID:e.userID,code:e.errorCode})}));var d=o.filter((function(e){return-1===u.indexOf(e)}));Ll.l("".concat(n," ok. successUserIDList:").concat(d," failureUserIDList:").concat(JSON.stringify(l)));var p=0;return d.forEach((function(e){t._conversationModule.patchMessageRemindType({ID:e,isC2CConversation:!0,messageRemindType:i})&&(p+=1)})),p>=1&&t._emitConversationUpdate(),o.length=u.length=0,t._conversationModule.emitTotalUnreadMessageCountUpdate(),hI({successUserIDList:d.map((function(e){return{userID:e}})),failureUserIDList:l})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];c.setError(e,r,i).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"_getModule",value:function(e){return this._conversationModule.getModule(e)}},{key:"_emitConversationUpdate",value:function(){this._conversationModule.emitConversationUpdate(!0,!1)}},{key:"setUpdateSequence",value:function(e){this._updateSequence=e}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset")),this._updateSequence=0}}]),e}(),$I=Ti("splice"),XI=A.TypeError,ZI=Math.max,QI=Math.min;rn({target:"Array",proto:!0,forced:!$I},{splice:function(e,t){var n,r,i,o,a,s,c=ke(this),u=Pt(c),l=xt(e,u),d=arguments.length;if(0===d?n=r=0:1===d?(n=0,r=u-l):(n=d-2,r=QI(ZI(Dt(t),0),u-l)),u+n-r>9007199254740991)throw XI("Maximum allowed length exceeded");for(i=ir(c,r),o=0;o<r;o++)(a=l+o)in c&&Er(i,o,c[a]);if(i.length=r,n<r){for(o=l;o<u-r;o++)s=o+n,(a=o+r)in c?c[s]=c[a]:delete c[s];for(o=u;o>u-r+n;o--)delete c[o-1]}else if(n>r)for(o=u-r;o>l;o--)s=o+n-1,(a=o+r-1)in c?c[s]=c[a]:delete c[s];for(o=0;o<n;o++)c[o+l]=arguments[o+2];return c.length=u-r+n,i}});var eT=function(){function e(t){i(this,e),this._conversationModule=t,this._n="ConvGroupHandler",this._convGroupMap=new Map,this._startIndex=0,this._pagingStatus=Up.NOT_START}return a(e,[{key:"setConvCustomData",value:function(e){var t=this,n="".concat(this._n,".").concat("setConvCustomData"),r=e.conversationIDList,i=e.customData;Ll.l("".concat(n," options:"),e);var o=new a_("setConvCustomData");o.setMessage(JSON.stringify(e));var a={fromAccount:this._getMyUserID(),itemList:[]},s=[],c=[];return r.forEach((function(e){if(!t._hasLocalConversation(e))return t._onConversationNotFound(c,e),!0;if(!Id(e)&&!Td(e))return t._onConversationIDInvalid(c,e),!0;var n={operationType:2,contactItem:void 0,customMark:i};Id(e)?n.contactItem={type:1,toAccount:e.replace(bi.CONV_C2C,"")}:Td(e)&&(n.contactItem={type:2,groupID:e.replace(bi.CONV_GROUP,"")}),a.itemList.push(n)})),c.length===r.length?hI({successConversationIDList:s,failureConversationIDList:c}):this._conversationModule.request({protocolName:Gh,requestData:a}).then((function(e){o.setNetworkType(t._conversationModule.getNetworkType()).end(),Ll.l("".concat(n," ok"));var r=e.data.resultItem;if(Xl(r)){var a,u,l=!1;r.forEach((function(e){a=t._concatConversationID(e.contactItem),0===e.resultCode?(s.push(a),(u=t._getLocalConversation(a))&&u.customData!==i&&(u.customData=i,l=!0)):c.push({conversationID:a,code:e.resultCode,message:e.resultInfo})})),!0===l&&t._emitConversationUpdate()}return lI({successConversationIDList:s,failureConversationIDList:c})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];o.setError(e,r,i).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"markConversation",value:function(e){var t=this;if(!this._conversationModule.canIUse(Nu.CONV_MARK))return gI({code:Vm});var n="".concat(this._n,".").concat("markConversation"),r=e.conversationIDList,i=e.markType,o=e.enableMark;Ll.l("".concat(n," options:"),e);var a=new a_("markConversation");a.setMessage(JSON.stringify(e));var s=void 0,c=void 0,u=this._getFlagBit(i);!0===o?c=[u]:s=[u];var l={fromAccount:this._getMyUserID(),itemList:[]},d=[],p=[];return r.forEach((function(e){if(!t._hasLocalConversation(e))return t._onConversationNotFound(p,e),!0;if(!Id(e)&&!Td(e))return t._onConversationIDInvalid(p,e),!0;var n={operationType:1,contactItem:void 0,clearMark:s,setMark:c};Id(e)?n.contactItem={type:1,toAccount:e.replace(bi.CONV_C2C,"")}:Td(e)&&(n.contactItem={type:2,groupID:e.replace(bi.CONV_GROUP,"")}),l.itemList.push(n)})),p.length===r.length?hI({successConversationIDList:d,failureConversationIDList:p}):this._conversationModule.request({protocolName:Vh,requestData:l}).then((function(e){a.setNetworkType(t._conversationModule.getNetworkType()).end(),Ll.l("".concat(n," ok"));var r=e.data.resultItem;if(Xl(r)){var s,c,u=!1;r.forEach((function(e){if(s=t._concatConversationID(e.contactItem),0===e.resultCode){if(d.push(s),c=t._getLocalConversation(s)){var n=c.markList.indexOf(i);!0===o?-1===n&&(c.markList.push(i),u=!0):-1!==n&&(c.markList.splice(n,1),u=!0)}}else p.push({conversationID:s,code:e.resultCode,message:e.resultInfo})})),!0===u&&t._emitConversationUpdate()}return lI({successConversationIDList:d,failureConversationIDList:p})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];a.setError(e,r,i).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"getLocalConvGroupList",value:function(){var e=this;return Ll.l("".concat(this._n,".getLocalConvGroupList pagingStatus:").concat(this._pagingStatus)),this._pagingStatus===Up.REJECTED?this.getRemoteConvGroupList().then((function(){return lI(y(e._convGroupMap.values()))})):hI(y(this._convGroupMap.values()))}},{key:"getRemoteConvGroupList",value:function(){var e=this,t="".concat(this._n,".getRemoteConvGroupList");return this._pagingStatus=Up.PENDING,this._conversationModule.request({protocolName:Kh,requestData:{fromAccount:this._getMyUserID(),startIndex:this._startIndex,startTime:Dl()}}).then((function(n){var r,i,o=n.data,a=o.completeFlag,s=o.contactItem,c=o.nextStartIndex,u=void 0===c?0:c,l=o.groupItem;if(e._startIndex=u,Ll.l("".concat(t," completeFlag:").concat(a," nextStartIndex:").concat(u)),Xl(l)&&l.forEach((function(t){var n=t.convGroupID,r=t.groupName;e._convGroupMap.set(n,r)})),Xl(s)&&s.forEach((function(t){var n=t.standardMark,o=t.customData,a=t.convGroupIDList;if(r=e._concatConversationID(t),(i=e._getLocalConversation(r))&&(i.markList=Ud(n),i.customData=o||"",Xl(a))){var s=[];a.forEach((function(t){e._convGroupMap.has(t)&&s.push(e._convGroupMap.get(t))})),i.conversationGroupList=[].concat(s),s.length=0}})),0===a)return e.getRemoteConvGroupList();1===a&&(e._pagingStatus=Up.RESOLVED,e._emitConversationUpdate(),e._emitConvGroupListUpdate())})).catch((function(n){e._pagingStatus=Up.REJECTED,Ll.w("".concat(t," failed. error:"),n)}))}},{key:"createConvGroup",value:function(e){var t=this;if(!this._conversationModule.canIUse(Nu.CONV_GROUP))return gI({code:Vm});var n="".concat(this._n,".").concat("createConvGroup");Ll.l("".concat(n," options:"),e);var r=new a_("createConvGroup");r.setMessage(JSON.stringify(e));var i=e.groupName,o=e.conversationIDList,a={fromAccount:this._getMyUserID(),itemList:[{groupName:i,contactItem:[]}]},s=[],c=[];return o.forEach((function(e){return t._hasLocalConversation(e)?Id(e)||Td(e)?void(Id(e)?a.itemList[0].contactItem.push({type:1,toAccount:e.replace(bi.CONV_C2C,"")}):Td(e)&&a.itemList[0].contactItem.push({type:2,groupID:e.replace(bi.CONV_GROUP,"")})):(t._onConversationIDInvalid(c,e),!0):(t._onConversationNotFound(c,e),!0)})),c.length===o.length?hI({successConversationIDList:s,failureConversationIDList:c}):this._conversationModule.request({protocolName:Fh,requestData:a}).then((function(e){r.setNetworkType(t._conversationModule.getNetworkType()).end(),Ll.l("".concat(n," ok"));var o=e.data.groupResultItem[0],a=o.groupItem,u=o.resultItem;if($l(a)&&(t._convGroupMap.set(a.convGroupID,a.groupName),t._emitConvGroupListUpdate()),Xl(u)){var l,d,p=!1;u.forEach((function(e){l=t._concatConversationID(e.contactItem),0===e.resultCode?(s.push(l),(d=t._getLocalConversation(l))&&-1===d.conversationGroupList.indexOf(i)&&(d.conversationGroupList.push(i),p=!0)):c.push({conversationID:l,code:e.resultCode,message:e.resultInfo})})),!0===p&&(t._emitConversationUpdate(),t._emitConvGroupListUpdate())}return lI({successConversationIDList:s,failureConversationIDList:c})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=_(t,2),i=n[0],o=n[1];r.setError(e,i,o).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"deleteConvGroup",value:function(e){var t=this;if(!this._conversationModule.canIUse(Nu.CONV_GROUP))return gI({code:Vm});var n="".concat(this._n,".").concat("deleteConvGroup");Ll.l("".concat(n," groupName:").concat(e));var r=new a_("deleteConvGroup");return r.setMessage(e),this._conversationModule.request({protocolName:Bh,requestData:{fromAccount:this._getMyUserID(),groupName:[e]}}).then((function(i){r.setNetworkType(t._conversationModule.getNetworkType()).end(),Ll.l("".concat(n," ok"));var o=i.data.groupItem;if(Xl(o)){var a=!1;o.forEach((function(e){t._convGroupMap.has(e.convGroupID)&&(t._convGroupMap.delete(e.convGroupID),a=!0)})),!0===a&&t._emitConvGroupListUpdate()}t._eraseFromConversationGroupList([e])})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=_(t,2),i=n[0],o=n[1];r.setError(e,i,o).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"renameConvGroup",value:function(e){var t=this;if(!this._conversationModule.canIUse(Nu.CONV_GROUP))return gI({code:Vm});var n="".concat(this._n,".").concat("renameConvGroup");Ll.l("".concat(n," options:"),e);var r=new a_("renameConvGroup");r.setMessage(JSON.stringify(e));var i=e.oldName,o=e.newName;return this._conversationModule.request({protocolName:qh,requestData:{fromAccount:this._getMyUserID(),updateType:1,updateGroup:{updateGroupType:1,oldName:i,newName:o}}}).then((function(e){r.setNetworkType(t._conversationModule.getNetworkType()).end(),Ll.l("".concat(n," ok"));var a=e.data.updateGroupResult.convGroupID;t._convGroupMap.set(a,o),t._emitConvGroupListUpdate();var s,c,u=t._conversationModule.getLocalConversationList(),l=!1;u.forEach((function(e){s=e.conversationGroupList,-1!==(c=s.indexOf(i))&&(s.splice(c,1,o),l=!0)})),!0===l&&t._emitConversationUpdate()})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=_(t,2),i=n[0],o=n[1];r.setError(e,i,o).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"addConvsToGroup",value:function(e){var t=this;if(!this._conversationModule.canIUse(Nu.CONV_GROUP))return gI({code:Vm});var n="".concat(this._n,".").concat("addConvsToGroup");Ll.l("".concat(n," options:"),e);var r=new a_("addConvsToGroup");r.setMessage(JSON.stringify(e));var i=e.conversationIDList,o=e.groupName,a={fromAccount:this._getMyUserID(),updateType:1,updateGroup:{updateGroupType:2,groupName:o,updateItem:[]}},s=[],c=[];return i.forEach((function(e){return t._hasLocalConversation(e)?Id(e)||Td(e)?void(Id(e)?a.updateGroup.updateItem.push({operationType:1,contactItem:{type:1,toAccount:e.replace(bi.CONV_C2C,"")}}):Td(e)&&a.updateGroup.updateItem.push({operationType:1,contactItem:{type:2,groupID:e.replace(bi.CONV_GROUP,"")}})):(t._onConversationIDInvalid(c,e),!0):(t._onConversationNotFound(c,e),!0)})),c.length===i.length?hI({successConversationIDList:s,failureConversationIDList:c}):this._conversationModule.request({protocolName:Hh,requestData:a}).then((function(e){r.setNetworkType(t._conversationModule.getNetworkType()).end(),Ll.l("".concat(n," ok"));var i=e.data.updateGroupResult.contactResultItem;if(Xl(i)){var a,u,l=!1;i.forEach((function(e){a=t._concatConversationID(e.contactItem),0===e.resultCode?(u=t._getLocalConversation(a))&&-1===u.conversationGroupList.indexOf(o)&&(u.conversationGroupList.push(o),s.push(a),l=!0):c.push({conversationID:a,code:e.resultCode,message:e.resultInfo})})),!0===l&&(t._emitConversationUpdate(),t._emitConvInGroupUpdate(o))}return lI({successConversationIDList:s,failureConversationIDList:c})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=_(t,2),i=n[0],o=n[1];r.setError(e,i,o).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"deleteConvsFromGroup",value:function(e){var t=this;if(!this._conversationModule.canIUse(Nu.CONV_GROUP))return gI({code:Vm});var n="".concat(this._n,".").concat("deleteConvsFromGroup");Ll.l("".concat(n," options:"),e);var r=new a_("deleteConvsFromGroup");r.setMessage(JSON.stringify(e));var i=e.conversationIDList,o=e.groupName,a={fromAccount:this._getMyUserID(),updateType:1,updateGroup:{updateGroupType:2,groupName:o,updateItem:[]}},s=[],c=[];return i.forEach((function(e){return t._hasLocalConversation(e)?Id(e)||Td(e)?void(Id(e)?a.updateGroup.updateItem.push({operationType:2,contactItem:{type:1,toAccount:e.replace(bi.CONV_C2C,"")}}):Td(e)&&a.updateGroup.updateItem.push({operationType:2,contactItem:{type:2,groupID:e.replace(bi.CONV_GROUP,"")}})):(t._onConversationIDInvalid(c,e),!0):(t._onConversationNotFound(c,e),!0)})),c.length===i.length?hI({successConversationIDList:s,failureConversationIDList:c}):this._conversationModule.request({protocolName:zh,requestData:a}).then((function(e){r.setNetworkType(t._conversationModule.getNetworkType()).end(),Ll.l("".concat(n," ok"));var i=e.data.updateGroupResult.contactResultItem;if(Xl(i)){var a,u,l=!1;i.forEach((function(e){if(a=t._concatConversationID(e.contactItem),0===e.resultCode){if(u=t._getLocalConversation(a)){var n=u.conversationGroupList.indexOf(o);-1!==n&&(u.conversationGroupList.splice(n,1),s.push(a),l=!0)}}else c.push({conversationID:a,code:e.resultCode,message:e.resultInfo})})),!0===l&&(t._emitConversationUpdate(),t._emitConvInGroupUpdate(o))}return lI({successConversationIDList:s,failureConversationIDList:c})})).catch((function(e){return t._conversationModule.probeNetwork().then((function(t){var n=_(t,2),i=n[0],o=n[1];r.setError(e,i,o).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"onConvMarkUpdated",value:function(e){var t=this;if(!Bd(e)){var n,r;Ll.d("".concat(this._n,".onConvMarkUpdated markItemList:"),e);var i=!1;e.forEach((function(e){var o=e.recentContactItem,a=e.optType,s=e.standardMark,c=e.customMark;if(n=t._concatConversationID(o),r=t._getLocalConversation(n))if(1===a){var u=Ud(s);!0!==function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}(r.markList,u)&&(r.markList=u,i=!0)}else 2===a&&r.customData!==c&&void 0!==c&&(r.customData=c,i=!0)})),!0===i&&this._emitConversationUpdate()}}},{key:"onConvGroupCreated",value:function(e){var t=this;Ll.d("".concat(this._n,".onConvGroupCreated resultList:"),e);var n=!1,r=!1;Xl(e)&&(e.forEach((function(e){var i=e.msgGroupItem,o=i.groupID,a=i.groupName;t._convGroupMap.get(o)!==a&&(t._convGroupMap.set(o,a),r=!0);var s,c,u=e.msgRecentContactItem;Xl(u)&&u.forEach((function(e){s=t._concatConversationID(e),(c=t._getLocalConversation(s))&&-1===c.conversationGroupList.indexOf(a)&&(c.conversationGroupList.push(a),n=!0)}))})),!0===n&&this._emitConversationUpdate(),!0===r&&this._emitConvGroupListUpdate())}},{key:"onConvGroupDeleted",value:function(e){var t=this;Ll.d("".concat(this._n,".onConvGroupDeleted groupItemList:"),e);var n=[];if(Xl(e)){var r=!1;e.forEach((function(e){var i=e.groupID,o=e.groupName;t._convGroupMap.has(i)&&(t._convGroupMap.delete(i),r=!0,n.push(o))})),!0===r&&this._emitConvGroupListUpdate()}this._eraseFromConversationGroupList(n)}},{key:"_eraseFromConversationGroupList",value:function(e){Bd(e)||(this._conversationModule.getLocalConversationList().forEach((function(t){t.conversationGroupList=t.conversationGroupList.filter((function(t){return!e.includes(t)}))})),this._emitConversationUpdate())}},{key:"onConvGroupNameUpdated",value:function(e){Ll.d("".concat(this._n,".onConvGroupNameUpdated options:"),e);var t=e.groupID,n=e.groupName,r=e.oldGroupName;if(this._convGroupMap.get(t)!==n){this._convGroupMap.set(t,n),this._emitConvGroupListUpdate();var i,o,a=this._conversationModule.getLocalConversationList(),s=!1;a.forEach((function(e){i=e.conversationGroupList,-1!==(o=i.indexOf(r))&&(i.splice(o,1,n),s=!0)})),!0===s&&this._emitConversationUpdate()}}},{key:"onConvInGroupUpdated",value:function(e){var t=this;Ll.d("".concat(this._n,".onConvInGroupUpdated options:"),e);var n=e.oldGroupName,r=e.recentContactUpdateGroupItem;if(Xl(r)){var i,o,a,s=!1;r.forEach((function(e){var r=e.contactOptType,c=e.recentContactItem;i=t._concatConversationID(c),(o=t._getLocalConversation(i))&&(a=o.conversationGroupList.indexOf(n),1===r?-1===a&&(o.conversationGroupList.push(n),s=!0):2===r&&-1!==a&&(o.conversationGroupList.splice(a,1),s=!0))})),!0===s&&(this._emitConversationUpdate(),this._emitConvInGroupUpdate(n))}}},{key:"onConvAddedToOrDeletedFromGroup",value:function(e){var t=this;Ll.d("".concat(this._n,".onConvAddedToOrDeletedFromGroup options:"),e);var n=e.msgRecentContactItem,r=e.msgRecentContactUpdateContactItem,i=this._concatConversationID(n),o=this._getLocalConversation(i);if(o&&Xl(r)){var a,s=!1;r.forEach((function(e){var n=e.groupOptType,r=e.recentContactGroupItem.groupName;a=o.conversationGroupList.indexOf(r),1===n?-1===a&&(o.conversationGroupList.push(r),s=!0):2===n&&-1!==a&&(o.conversationGroupList.splice(a,1),s=!0),!0===s&&t._emitConvInGroupUpdate(r)})),!0===s&&this._emitConversationUpdate()}}},{key:"onConvGroupListSynced",value:function(e){var t=this;Xl(e)&&0!==e.length&&(Ll.l("".concat(this._n,".onConvGroupListSynced groupItemList:"),e),e.forEach((function(e){t._convGroupMap.set(e.convGroupID,e.groupName)})))}},{key:"getConvGroupListByID",value:function(e){var t=this;if(!Bd(e)){var n=[];return e.forEach((function(e){t._convGroupMap.has(e)&&n.push(t._convGroupMap.get(e))})),n}}},{key:"_onConversationNotFound",value:function(e,t){e.push({conversationID:t,code:Qv,message:this._conversationModule.getErrorMessage(Qv)})}},{key:"_onConversationIDInvalid",value:function(e,t){e.push({conversationID:t,code:nm,message:this._conversationModule.getErrorMessage(nm)})}},{key:"_getFlagBit",value:function(e){for(var t=e.toString(2),n=t.length,r=n-1;r>=0;r--)if("1"===t[r])return n-r-1}},{key:"_concatConversationID",value:function(e){var t,n=e.type,r=e.to,i=e.groupID,o=e.userID;return 1===n?Zl(o)?Zl(r)||(t="".concat(bi.CONV_C2C).concat(r)):t="".concat(bi.CONV_C2C).concat(o):2===n&&(t="".concat(bi.CONV_GROUP).concat(i)),t}},{key:"_getMyUserID",value:function(){return this._conversationModule.getMyUserID()}},{key:"_insertConversationGroup",value:function(e,t){var n=this._getLocalConversation(e);if(n){var r=n.conversationGroupList;-1===r.indexOf(t)&&r.push(t)}}},{key:"_getLocalConversation",value:function(e){return this._conversationModule.getLocalConversation(e)}},{key:"_hasLocalConversation",value:function(e){return this._conversationModule.hasLocalConversation(e)}},{key:"_emitConversationUpdate",value:function(){this._conversationModule.emitConversationUpdate(!0,!1)}},{key:"_emitConvGroupListUpdate",value:function(){this._conversationModule.emitOuterEvent(yi.CONVERSATION_GROUP_LIST_UPDATED,y(this._convGroupMap.values()))}},{key:"_emitConvInGroupUpdate",value:function(e){var t={groupName:e,conversationList:[]},n=this._conversationModule.getLocalConversationList();t.conversationList=n.filter((function(t){return t.conversationGroupList.includes(e)})),this._conversationModule.emitOuterEvent(yi.CONVERSATION_IN_GROUP_UPDATED,t)}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset")),this._convGroupMap.clear(),this._startIndex=0,this._pagingStatus=Up.NOT_START}}]),e}(),tT=function(e){c(r,e);var t=m(r);function r(e){var n;return i(this,r),(n=t.call(this,e))._n="ConversationModule",NI.mixin(g(n)),n._messageListHandler=new AI,n._messageRemindHandler=new JI(g(n)),n._convGroupHandler=new eT(g(n)),n.singlyLinkedList=new HI(100),n._pagingStatus=Up.NOT_START,n._pagingTimeStamp=0,n._pagingStartIndex=0,n._pagingPinnedTimeStamp=0,n._pagingPinnedStartIndex=0,n._pagingConvIDMap=new Map,n._convIDFromUnreadDBMap=new Map,n._conversationMap=new Map,n._tmpGroupList=[],n._tmpGroupAtTipsList=[],n._peerReadTimeMap=new Map,n._completedMap=new Map,n._roamingMessageKeyAndTimeMap=new Map,n._roamingMessageSequenceMap=new Map,n._remoteGroupReadSequenceMap=new Map,n._convTotalUnreadCount=0,n._initListeners(),n}return a(r,[{key:"_initListeners",value:function(){var e=this.getInnerEmitterInstance();e.on(RI,this._initLocalConversationList,this),e.on(LI,this._onProfileUpdated,this)}},{key:"onCheckTimer",value:function(e){e%60==0&&this._messageListHandler.traversal()}},{key:"_initLocalConversationList",value:function(){var e=this,t=new a_("_initLocalConversationList");Ll.l("".concat(this._n,".").concat("_initLocalConversationList"));var n="",r=this._getStorageConversationList(),i=this.isIntl();if(r){for(var o=r.length,a=0;a<o;a++){var s=r[a];if(s){if(s.conversationID==="".concat(bi.CONV_C2C,"@TLS#ERROR")||s.conversationID==="".concat(bi.CONV_C2C,"@TLS#NOT_FOUND"))continue;if(s.groupProfile){var c=s.groupProfile.type;if(_d(c))continue}}this._conversationMap.set(r[a].conversationID,new YI(r[a],i))}this.emitConversationUpdate(!0,!1),n="count:".concat(o)}else n="count:0";t.setNetworkType(this.getNetworkType()).setMessage(n).end(),this.getModule(Pf)||this.triggerReady(),this.ready((function(){e._tmpGroupList.length>0&&(e.updateConversationGroupProfile(e._tmpGroupList),e._tmpGroupList.length=0)})),this.syncConversationList()}},{key:"onMessageSent",value:function(e){this._onSendOrReceiveMessage({conversationOptionsList:e.conversationOptionsList,isInstantMessage:!0})}},{key:"onNewMessage",value:function(e){this._onSendOrReceiveMessage(e)}},{key:"_onSendOrReceiveMessage",value:function(e){var t=this,n=e.conversationOptionsList,r=e.isInstantMessage,i=void 0===r||r,o=e.isUnreadC2CMessage,a=void 0!==o&&o,s=e.updateUnreadCount,c=void 0===s||s;this._isReady?0!==n.length&&(this._getC2CPeerReadTime(n),this._updateLocalConversationList({conversationOptionsList:n,isInstantMessage:i,isUnreadC2CMessage:a,isFromGetConversations:!1,updateUnreadCount:c}),i||(this._convIDFromUnreadDBMap=new Map([].concat(y(this._convIDFromUnreadDBMap),y(n.map((function(e){return[e.conversationID,1]}))))),this._diffAndDeleteConversation()),this._setStorageConversationList(),n.filter((function(e){return e.type===bi.CONV_TOPIC})).length>0||this.emitConversationUpdate()):this.ready((function(){t._onSendOrReceiveMessage(e)}))}},{key:"updateConversationGroupProfile",value:function(e){var t=this;if(!Xl(e)||0!==e.length)if(0!==this._conversationMap.size){var n=!1;e.forEach((function(e){var r="GROUP".concat(e.groupID);if(t._conversationMap.has(r)){n=!0;var i=t._conversationMap.get(r);i.groupProfile=JSON.parse(JSON.stringify(e)),i.lastMessage.lastSequence<e.nextMessageSeq&&(i.lastMessage.lastSequence=e.nextMessageSeq-1),i.subType||(i.subType=e.type)}})),n&&this.emitConversationUpdate(!0,!1)}else this._tmpGroupList=e}},{key:"_updateConversationUserProfile",value:function(e){var t=this;e.data.forEach((function(e){var n="C2C".concat(e.userID);t._conversationMap.has(n)&&(t._conversationMap.get(n).userProfile=e)})),this.emitConversationUpdate(!0,!1)}},{key:"onMessageRevoked",value:function(e){var t=this;if(0!==e.length){var n=null,r=!1,i=[];e.forEach((function(e){(n=t._conversationMap.get(e.conversationID))&&(n.type===bi.CONV_TOPIC?i.push(e):(n.reduceUnreadCount()&&(r=!0),n.isLastMessageRevoked({sequence:e.sequence,time:e.time})&&(n.setLastMessageRevoked(!0),n.setLastMessageRevoker(e.revoker),r=!0)))})),this.getModule(Vf).onMessageRevoked(i),r&&(this.emitConversationUpdate(!0,!1),this.emitTotalUnreadMessageCountUpdate())}}},{key:"isLastMessageRevoked",value:function(e){var t=!1,n=e.conversationID,r=e.sequence,i=e.time,o=this._conversationMap.get(n);return o&&(t=o.type===bi.CONV_TOPIC?this.getModule(Vf).isLastMessageRevoked({topicID:n.replace(bi.CONV_GROUP,""),sequence:r}):o.isLastMessageRevoked({sequence:r,time:i})),Ll.l("".concat(this._n,".isLastMessageRevoked options:").concat(JSON.stringify(e)," ret:").concat(t)),t}},{key:"onMessageDeleted",value:function(e){var t=this;if(0!==e.length){var n=null;e.forEach((function(e){(n=t._messageListHandler.getLocalMessage(e.conversationID,e.ID))&&(n.isDeleted=!0),e!==n&&(e.isDeleted=!0)}));for(var r=e[0].conversationID,i=this._messageListHandler.getLocalMessageList(r),o={},a=i.length-1;a>=0;a--)if(!i[a].isDeleted){o=i[a];break}var s=this._conversationMap.get(r);if(s){var c=!1;s.lastMessage.lastSequence===o.sequence&&s.lastMessage.lastTime===o.time||(Bd(o)&&(o=void 0),s.updateLastMessage(o),s.type!==bi.CONV_TOPIC&&(c=!0),Ll.l("".concat(this._n,".onMessageDeleted. update conversationID:").concat(r," with lastMessage:"),s.lastMessage)),r.startsWith(bi.CONV_C2C)&&this.updateUnreadCount(r),c&&this.emitConversationUpdate(!0,!1)}}}},{key:"onMessageModified",value:function(e){var t=e.conversationType,n=e.from,r=e.to,i=e.time,o=e.sequence,a=e.elements,s=e.cloudCustomData,c=e.messageVersion,u=this.getMyUserID(),l="".concat(t).concat(r);r===u&&t===bi.CONV_C2C&&(l="".concat(t).concat(n));var d=this._messageListHandler.onMessageModified(l,e),p=d.isUpdated,f=d.message;!0===p&&this.emitOuterEvent(yi.MESSAGE_MODIFIED,[f]);var h=this._isTopicConversation(l);if(Ll.l("".concat(this._n,".onMessageModified isUpdated:").concat(p," isTopicMessage:").concat(h," from:").concat(n," to:").concat(r)),h)this.getModule(Vf).onMessageModified(e);else{var g=this._conversationMap.get(l);if(g){var v=g.lastMessage;Ll.d("".concat(this._n.onMessageModified," lastMessage:"),JSON.stringify(v),"options:",JSON.stringify(e)),v&&v.lastTime===i&&v.lastSequence===o&&v.version!==c&&(v.type=a[0].type,v.payload=a[0].content,v.messageForShow=Pd(v.type,v.payload,this.isIntl()),v.cloudCustomData=s,v.version=c,this.emitConversationUpdate(!0,!1))}}return f}},{key:"onNewGroupAtTips",value:function(e){var t=this,r=e.dataList,i=null;r.forEach((function(e){e.groupAtTips?i=e.groupAtTips:e.elements?i=n(n({},e.elements),{},{sync:!0}):e.groupAtType&&(i=n(n({},e),{},{sync:!0})),i.__random=e.random,i.__sequence=e.clientSequence,t._tmpGroupAtTipsList.push(i)})),Ll.d("".concat(this._n,".onNewGroupAtTips isReady:").concat(this._isReady),this._tmpGroupAtTipsList),this._isReady&&this._handleGroupAtTipsList()}},{key:"_handleGroupAtTipsList",value:function(){var e=this;if(0!==this._tmpGroupAtTipsList.length){var t=!1;this._tmpGroupAtTipsList.forEach((function(n){var r=n.groupID,i=n.from,o=n.topicID,a=void 0===o?void 0:o,s=n.sync,c=void 0!==s&&s;if(i!==e.getMyUserID())if(Zl(a)){var u=e._conversationMap.get("".concat(bi.CONV_GROUP).concat(r));u&&(u.updateGroupAtInfoList(n),t=!0)}else{var l=e._conversationMap.get("".concat(bi.CONV_GROUP).concat(a));if(l){l.updateGroupAtInfoList(n);var d=e.getModule(Vf),p=l.groupAtInfoList;d.onConversationProxy({topicID:a,groupAtInfoList:p})}Bd(l)&&c&&(e.updateTopicConversation([{conversationID:"".concat(bi.CONV_GROUP).concat(a),type:bi.CONV_TOPIC}]),e._conversationMap.get("".concat(bi.CONV_GROUP).concat(a)).updateGroupAtInfoList(n))}})),t&&this.emitConversationUpdate(!0,!1),this._tmpGroupAtTipsList.length=0}}},{key:"_getC2CPeerReadTime",value:function(e){var t=this,n=[];if(e.forEach((function(e){t._conversationMap.has(e.conversationID)||e.type!==bi.CONV_C2C||n.push(e.conversationID.replace(bi.CONV_C2C,""))})),n.length>0){Ll.d("".concat(this._n,"._getC2CPeerReadTime userIDList:").concat(n));var r=this.getModule(Pf);r&&r.getRemotePeerReadTime(n)}}},{key:"_getStorageConversationList",value:function(){return this.getModule(qf).getItem("conversationMap")}},{key:"_setStorageConversationList",value:function(){var e=this.getLocalConversationList().filter((function(e){return e.type===bi.CONV_C2C||e.type===bi.CONV_GROUP&&e.lastMessage.type!==bi.MSG_GRP_TIP})).slice(0,20).map((function(e){return{conversationID:e.conversationID,type:e.type,subType:e.subType,lastMessage:e.lastMessage,groupProfile:e.groupProfile,userProfile:e.userProfile}}));this.getModule(qf).setItem("conversationMap",e)}},{key:"emitConversationUpdate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getLocalConversationList();if(t){var r=this.getModule(jf);r&&r.updateGroupLastMessage(n)}e&&this.emitOuterEvent(yi.CONVERSATION_LIST_UPDATED)}},{key:"getLocalConversationList",value:function(){return y(this._conversationMap.values()).filter((function(e){return e.type!==bi.CONV_TOPIC}))}},{key:"getLocalConversation",value:function(e){return this._conversationMap.get(e)}},{key:"hasLocalConversation",value:function(e){return this._conversationMap.has(e)}},{key:"getLocalOldestMessage",value:function(e){return this._messageListHandler.getLocalOldestMessage(e)}},{key:"syncConversationList",value:function(){var e=this,t=new a_("syncConversationList");return this._pagingStatus===Up.NOT_START&&this._conversationMap.clear(),this._pagingGetConversationList().then((function(n){return e._pagingStatus=Up.RESOLVED,e._diffAndDeleteConversation(),e.emitConversationUpdate(!0,!1),e._setStorageConversationList(),e._handleC2CPeerReadTime(),e._patchConversationProperties(),t.setMessage(e._conversationMap.size).setNetworkType(e.getNetworkType()).end(),n})).catch((function(n){return e._pagingStatus=Up.REJECTED,t.setMessage(e._pagingTimeStamp),e.probeNetwork().then((function(e){var r=_(e,2),i=r[0],o=r[1];t.setError(n,i,o).end()})),gI(n)}))}},{key:"_diffAndDeleteConversation",value:function(){var e=this;if(this._isSyncCompleted()){var t=[];this._conversationMap.forEach((function(n,r){!e._pagingConvIDMap.has(r)&&e._convIDFromUnreadDBMap.has(r)&&(e._conversationMap.delete(r),t.push(r))})),Ll.l("".concat(this._n,"._diffAndDeleteConversation list:").concat(t))}}},{key:"_patchConversationProperties",value:function(){var e=this,t=Date.now(),n=this.checkAndPatchRemark(),r=this._messageRemindHandler.getC2CMessageRemindType(),i=this.getModule(jf).getGroupList();Promise.all([n,r,i]).then((function(){var n=Date.now()-t;Ll.l("".concat(e._n,"._patchConversationProperties ok. cost ").concat(n," ms")),e.emitConversationUpdate(!0,!1),e.emitTotalUnreadMessageCountUpdate()}))}},{key:"_pagingGetConversationList",value:function(){var e=this,t="".concat(this._n,"._pagingGetConversationList");return Ll.l("".concat(t," timeStamp:").concat(this._pagingTimeStamp," startIndex:").concat(this._pagingStartIndex)+" pinnedTimeStamp:".concat(this._pagingPinnedTimeStamp," pinnedStartIndex:").concat(this._pagingPinnedStartIndex)),this._pagingStatus=Up.PENDING,this.request({protocolName:xh,requestData:{fromAccount:this.getMyUserID(),timeStamp:this._pagingTimeStamp,startIndex:this._pagingStartIndex,pinnedTimeStamp:this._pagingPinnedTimeStamp,pinnedStartIndex:this._pagingPinnedStartIndex,orderType:1}}).then((function(n){var r=n.data,i=r.completeFlag,o=r.conversations,a=void 0===o?[]:o,s=r.timeStamp,c=r.startIndex,u=r.pinnedTimeStamp,l=r.pinnedStartIndex,d=r.groupItem;if(Ll.l("".concat(t," ok. completeFlag:").concat(i," count:").concat(a.length," isReady:").concat(e._isReady)),e._convGroupHandler.onConvGroupListSynced(d),a.length>0){var p=e._getConversationOptions(a);e._pagingConvIDMap=new Map([].concat(y(e._pagingConvIDMap),y(p.map((function(e){return[e.conversationID,1]}))))),e._updateLocalConversationList({conversationOptionsList:p,isFromGetConversations:!0}),e.isLoggedIn()&&e.emitConversationUpdate()}if(!e._isReady){if(!e.isLoggedIn())return hI();e.triggerReady()}return e._pagingTimeStamp=s,e._pagingStartIndex=c,e._pagingPinnedTimeStamp=u,e._pagingPinnedStartIndex=l,1!==i?e._pagingGetConversationList():(e._handleGroupAtTipsList(),e._convGroupHandler.getRemoteConvGroupList(),hI())})).catch((function(n){throw e.isLoggedIn()&&(e._isReady||(Ll.w("".concat(t," failed. error:"),n),e.triggerReady())),n}))}},{key:"_updateLocalConversationList",value:function(e){var t,n=e.isFromGetConversations,r=e.isInstantMessage,i=Date.now();t=this._getTmpConversationListMapping(e),this._conversationMap=new Map(this._sortConversationList([].concat(y(t.toBeUpdatedConversationList),y(this._conversationMap)))),n||(this._updateUserOrGroupProfile(t.newConversationList),r&&this.emitTotalUnreadMessageCountUpdate()),Ll.d("".concat(this._n,"._updateLocalConversationList cost ").concat(Date.now()-i," ms"))}},{key:"_getTmpConversationListMapping",value:function(e){for(var t=e.conversationOptionsList,n=e.isFromGetConversations,r=e.isInstantMessage,i=e.isUnreadC2CMessage,o=void 0!==i&&i,a=e.updateUnreadCount,s=[],c=[],u=this.getModule(jf),l=this.getModule(Uf),d=this.isIntl(),p=0,f=t.length;p<f;p++){var h=new YI(t[p],d),g=h.conversationID;if(g!=="".concat(bi.CONV_C2C,"@TLS#ERROR")&&g!=="".concat(bi.CONV_C2C,"@TLS#NOT_FOUND"))if(this._conversationMap.has(g)){var v=this._conversationMap.get(g),m=["unreadCount","allowType","adminForbidType","payload","isPinned"];!1===r&&m.push("lastMessage");var _=t[p].lastMessage,y=!Zl(_);y||t[p].type===bi.CONV_TOPIC||this._onLastMessageNotExist(t[p]),Zl(r)&&y&&null===v.lastMessage.payload&&(v.lastMessage.payload=_.payload),Bd(v.lastMessage.revoker)||(v.lastMessage.revoker=null),ad(v,h,m,[null,void 0,"",0,NaN]),!0===a&&v.updateUnreadCount({nextUnreadCount:h.unreadCount,isFromGetConversations:n,isUnreadC2CMessage:o}),r&&y&&(_.payload&&(v.lastMessage.payload=_.payload),v.type===bi.CONV_GROUP&&(v.lastMessage.nameCard=_.nameCard,v.lastMessage.nick=_.nick)),y&&v.lastMessage.cloudCustomData!==_.cloudCustomData&&(v.lastMessage.cloudCustomData=_.cloudCustomData||""),this._conversationMap.delete(g),s.push([g,v])}else{if(h.type===bi.CONV_GROUP&&u){var b=h.groupProfile.groupID,I=u.getLocalGroupProfile(b);I&&(h.groupProfile=I,!0===a&&h.updateUnreadCount({nextUnreadCount:0}))}else if(h.type===bi.CONV_C2C){var T=g.replace(bi.CONV_C2C,"");l&&l.isMyFriend(T)&&(h.remark=l.getFriendRemark(T))}c.push(h),s.push([g,h])}}var C=this.getModule(Vf);return s.forEach((function(e){if(e[1].type===bi.CONV_TOPIC){var t=e[1],n=t.conversationID,r=t.unreadCount,i=t.groupAtInfoList;C.onConversationProxy({topicID:n.replace(bi.CONV_GROUP,""),unreadCount:r,groupAtInfoList:Bd(i)?void 0:i})}})),{toBeUpdatedConversationList:s,newConversationList:c}}},{key:"_onLastMessageNotExist",value:function(e){new a_("lastMessageNotExist").setMessage("".concat(JSON.stringify(e))).setNetworkType(this.getNetworkType()).end()}},{key:"_sortConversationList",value:function(e){var t=[],n=[],r=[],i=[];return e.forEach((function(e){!0===e[1].isPinned?Bd(e[1].lastMessage.lastTime)?n.push(e):t.push(e):Bd(e[1].lastMessage.lastTime)?i.push(e):r.push(e)})),t.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})).concat(n).concat(r.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime}))).concat(i)}},{key:"_sortConversationListAndEmitEvent",value:function(){this._conversationMap=new Map(this._sortConversationList(y(this._conversationMap))),this.emitConversationUpdate(!0,!1)}},{key:"_updateUserOrGroupProfile",value:function(e){var t=this;if(0!==e.length){var n=[],r=[],i=this.getModule(Nf),o=this.getModule(jf);e.forEach((function(e){if(e.type===bi.CONV_C2C)n.push(e.toAccount);else if(e.type===bi.CONV_GROUP){var t=e.toAccount;o.hasLocalGroup(t)?e.groupProfile=o.getLocalGroupProfile(t):r.push(t)}})),Ll.l("".concat(this._n,"._updateUserOrGroupProfile c2cUserIDList:").concat(n," groupIDList:").concat(r)),n.length>0&&i.getUserProfile({userIDList:n}).then((function(e){var n=e.data;Xl(n)?n.forEach((function(e){t._doUpdateUserProfile("C2C".concat(e.userID),e)})):t._doUpdateUserProfile("C2C".concat(n.userID),n)})),r.length>0&&o.getGroupProfileAdvance({groupIDList:r,responseFilter:{groupBaseInfoFilter:["Type","Name","FaceUrl"]}}).then((function(e){e.data.successGroupList.forEach((function(e){var n="GROUP".concat(e.groupID);if(t._conversationMap.has(n)){var r=t._conversationMap.get(n);ad(r.groupProfile,e,[],[null,void 0,"",0,NaN]),!r.subType&&e.type&&(r.subType=e.type)}}))}))}}},{key:"_doUpdateUserProfile",value:function(e,t){this.hasLocalConversation(e)&&(this.getLocalConversation(e).userProfile=t)}},{key:"_getConversationOptions",value:function(e){var t=this,r=[],i=e.filter((function(e){var t=e.type,n=e.userID;return 1===t&&"@TLS#NOT_FOUND"!==n&&"@TLS#ERROR"!==n||2===t})),o=this.getMyUserID(),a=i.map((function(e){if(Zl(e.lastMsg)&&(e.lastMsg={elements:[]}),1===e.type){var i={userID:e.userID,nick:e.peerNick,avatar:e.peerAvatar};return r.push(i),{conversationID:"C2C".concat(e.userID),type:"C2C",lastMessage:{lastTime:e.time,lastSequence:e.sequence,fromAccount:e.lastC2CMsgFromAccount,messageForShow:e.messageShow,type:e.lastMsg.elements[0]?e.lastMsg.elements[0].type:null,payload:e.lastMsg.elements[0]?t._amendLayersOverLimitProperty(e.lastMsg.elements[0].content):null,cloudCustomData:e.lastMsg.cloudCustomData||"",isRevoked:8===e.lastMessageFlag,onlineOnlyFlag:!1,nick:"",nameCard:"",version:0,isPeerRead:e.lastC2CMsgFromAccount===o&&e.time<=e.c2cPeerReadTime,revoker:e.lastMsg.revokerInfo?e.lastMsg.revokerInfo.revoker:null},userProfile:new BI(i),peerReadTime:e.c2cPeerReadTime,isPinned:1===e.isPinned,messageRemindType:"",customData:e.customMark||"",markList:Ud(e.standardMark),conversationGroupList:t._convGroupHandler.getConvGroupListByID(e.contactGroupId)}}return{conversationID:"GROUP".concat(e.groupID),type:"GROUP",lastMessage:n(n({lastTime:e.time,lastSequence:e.messageReadSeq+e.unreadCount,fromAccount:e.msgGroupFromAccount,messageForShow:e.messageShow},t._patchTypeAndPayload(e)),{},{cloudCustomData:e.lastMsg.cloudCustomData||"",isRevoked:2===e.lastMessageFlag,onlineOnlyFlag:!1,nick:e.senderNick||"",nameCard:e.senderNameCard||"",revoker:e.lastMsg.revokerInfo?e.lastMsg.revokerInfo.revoker:null}),groupProfile:new KI({groupID:e.groupID,name:e.groupNick,avatar:e.groupImage}),unreadCount:e.unreadCount,peerReadTime:0,isPinned:1===e.isPinned,messageRemindType:"",version:0,customData:e.customMark||"",markList:Ud(e.standardMark),conversationGroupList:t._convGroupHandler.getConvGroupListByID(e.contactGroupId)}}));return r.length>0&&this.getModule(Nf).onConversationsProfileUpdated(r),a}},{key:"_patchTypeAndPayload",value:function(e){var t=e.lastMsg,r=t.event,i=void 0===r?void 0:r,o=t.elements,a=void 0===o?[]:o,s=t.groupTips,c=void 0===s?{}:s;if(!Zl(i)&&!Bd(c)){var u=new uI(c);u.setElement({type:bi.MSG_GRP_TIP,content:n(n({},c.elements),{},{groupProfile:c.groupProfile})});var l=JSON.parse(JSON.stringify(u.payload));return u=null,{type:bi.MSG_GRP_TIP,payload:l}}return{type:a[0]?a[0].type:null,payload:a[0]?this._amendLayersOverLimitProperty(a[0].content):null}}},{key:"_amendLayersOverLimitProperty",value:function(e){var t=e.layersOverLimit;return 0===t?e.layersOverLimit=!1:1===t&&(e.layersOverLimit=!0),e}},{key:"getLocalMessageList",value:function(e){return this._messageListHandler.getLocalMessageList(e)}},{key:"deleteLocalMessage",value:function(e){e instanceof uI&&this._messageListHandler.remove(e)}},{key:"onConversationDeleted",value:function(e){var t=this;Ll.l("".concat(this._n,".onConversationDeleted")),Xl(e)&&e.forEach((function(e){var n=e.type,r=e.userID,i=e.groupID,o="";1===n?o="".concat(bi.CONV_C2C).concat(r):2===n&&(o="".concat(bi.CONV_GROUP).concat(i)),t.deleteLocalConversation(o)}))}},{key:"onConversationPinned",value:function(e){var t=this;if(Xl(e)){var n=!1;e.forEach((function(e){var r,i=e.type,o=e.userID,a=e.groupID;1===i?r=t.getLocalConversation("".concat(bi.CONV_C2C).concat(o)):2===i&&(r=t.getLocalConversation("".concat(bi.CONV_GROUP).concat(a))),r&&(Ll.l("".concat(t._n,".onConversationPinned conversationID:").concat(r.conversationID," isPinned:").concat(r.isPinned)),r.isPinned||(r.isPinned=!0,n=!0))})),n&&this._sortConversationListAndEmitEvent()}}},{key:"onConversationUnpinned",value:function(e){var t=this;if(Xl(e)){var n=!1;e.forEach((function(e){var r,i=e.type,o=e.userID,a=e.groupID;1===i?r=t.getLocalConversation("".concat(bi.CONV_C2C).concat(o)):2===i&&(r=t.getLocalConversation("".concat(bi.CONV_GROUP).concat(a))),r&&(Ll.l("".concat(t._n,".onConversationUnpinned conversationID:").concat(r.conversationID," isPinned:").concat(r.isPinned)),r.isPinned&&(r.isPinned=!1,n=!0))})),n&&this._sortConversationListAndEmitEvent()}}},{key:"getMessageList",value:function(e){var t=this,n=e.conversationID,r=e.nextReqMessageID,i=e.count,o="".concat(this._n,".getMessageList"),a=this.getLocalConversation(n),s="";if(a&&a.groupProfile&&(s=a.groupProfile.type),_d(s))return Ll.l("".concat(o," not available in avchatroom. conversationID:").concat(n)),hI({messageList:[],nextReqMessageID:"",isCompleted:!0});(Zl(i)||i>15)&&(i=15),!r&&this._isNotInCommunity(n)&&(this._messageListHandler.removeByConversationID(n),this._completedMap.delete(n),this._roamingMessageSequenceMap.delete(n));var c=this._computeRemainingCount({conversationID:n,nextReqMessageID:r}),u=this._completedMap.has(n);if(Ll.l("".concat(o," conversationID:").concat(n," nextReqMessageID:").concat(r)+" remainingCount:".concat(c," count:").concat(i," isCompleted:").concat(u)),this._needGetHistory({conversationID:n,remainingCount:c,count:i}))return this.getHistoryMessages({conversationID:n,nextReqMessageID:r,count:20}).then((function(e){var r=e.nextReqID,i=e.storedMessageList,a=t._completedMap.has(n),s=i;c>0&&(s=t._messageListHandler.getLocalMessageList(n).slice(0,i.length+c));var u={nextReqMessageID:a?"":r,messageList:s,isCompleted:a};return Ll.l("".concat(o," ret.nextReqMessageID:").concat(u.nextReqMessageID," ret.isCompleted:").concat(u.isCompleted," ret.length:").concat(s.length)),lI(u)}));this.modifyMessageList(n);var l=this._getMessageListFromMemory({conversationID:n,nextReqMessageID:r,count:i});return hI(l)}},{key:"_getMessageListFromMemory",value:function(e){var t=e.conversationID,n=e.nextReqMessageID,r=e.count,i="".concat(this._n,"._getMessageListFromMemory"),o=this._messageListHandler.getLocalMessageList(t),a=o.length,s=0,c={isCompleted:!1,nextReqMessageID:"",messageList:[]};return n?(s=o.findIndex((function(e){return e.ID===n})))>r?(c.messageList=o.slice(s-r,s),c.nextReqMessageID=o[s-r].ID):(c.messageList=o.slice(0,s),c.isCompleted=!0):a>r?(s=a-r,c.messageList=o.slice(s,a),c.nextReqMessageID=o[s].ID):(c.messageList=o.slice(0,a),c.isCompleted=!0),Ll.l("".concat(i," conversationID:").concat(t)+" ret.nextReqMessageID:".concat(c.nextReqMessageID," ret.isCompleted:").concat(c.isCompleted," ret.length:").concat(c.messageList.length)),c}},{key:"getMessageListHopping",value:function(e){var t=e.conversationID,n=e.sequence,r=e.time,i=e.count,o=e.direction,a=void 0===o?0:o;if((Zl(i)||i>15)&&(i=15),t.startsWith(bi.CONV_C2C)){var s=this.getModule(Pf),c=t.replace(bi.CONV_C2C,"");return s.getRoamingMessagesHopping({peerAccount:c,time:r,count:i,direction:a})}if(t.startsWith(bi.CONV_GROUP)){var u=this.getModule(jf),l=t.replace(bi.CONV_GROUP,"");return u.getRoamingMessagesHopping({groupID:l,sequence:n,count:i,direction:a})}}},{key:"_computeRemainingCount",value:function(e){var t=e.conversationID,n=e.nextReqMessageID,r=this._messageListHandler.getLocalMessageList(t),i=r.length;if(!n)return i;var o=0;return Id(t)?o=r.findIndex((function(e){return e.ID===n})):Td(t)&&(o=-1!==n.indexOf("-")?r.findIndex((function(e){return e.ID===n})):r.findIndex((function(e){return e.sequence===n}))),-1===o&&(o=0),o}},{key:"_getMessageListSize",value:function(e){return this._messageListHandler.getLocalMessageList(e).length}},{key:"_needGetHistory",value:function(e){var t=e.conversationID,n=e.remainingCount,r=e.count,i=this.getLocalConversation(t),o="";return i&&i.groupProfile&&(o=i.groupProfile.type),!Cd(t)&&!_d(o)&&!(Td(t)&&this._isPagingGetGroupListCompleted()&&this._getLocalGroupCount()<=4e3&&!this._hasLocalGroup(t)&&!this._isTopicConversation(t))&&n<=r&&!this._completedMap.has(t)}},{key:"_isTopicConversation",value:function(e){var t=e.replace(bi.CONV_GROUP,"");return bd(t)}},{key:"getHistoryMessages",value:function(e){var t=e.conversationID,n=e.count;if(t===bi.CONV_SYSTEM)return hI();var r=15;n>20&&(r=20);var i=null;if(Id(t)){var o=this._roamingMessageKeyAndTimeMap.has(t);return(i=this.getModule(Pf))?i.getRoamingMessage({conversationID:t,peerAccount:t.replace(bi.CONV_C2C,""),count:r,lastMessageTime:o?this._roamingMessageKeyAndTimeMap.get(t).lastMessageTime:0,messageKey:o?this._roamingMessageKeyAndTimeMap.get(t).messageKey:""}):gI({code:Dm})}if(Td(t)){if(!(i=this.getModule(jf)))return gI({code:Dm});var a=null;this._conversationMap.has(t)&&(a=this._conversationMap.get(t).lastMessage);var s=0;a&&(s=a.lastSequence);var c=this._roamingMessageSequenceMap.get(t);return i.getRoamingMessage({conversationID:t,groupID:t.replace(bi.CONV_GROUP,""),count:r,sequence:c||s})}return hI()}},{key:"patchConversationLastMessage",value:function(e){var t=this.getLocalConversation(e);if(t){var n=t.lastMessage,r=n.messageForShow,i=n.payload;if(Bd(r)||Bd(i)){var o=this._messageListHandler.getLocalMessageList(e);if(0===o.length)return;var a=o[o.length-1];Ll.l("".concat(this._n,".patchConversationLastMessage conversationID:").concat(e," payload:"),a.payload),t.updateLastMessage(a)}}}},{key:"onRoamingMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.startsWith(bi.CONV_C2C)?bi.CONV_C2C:bi.CONV_GROUP,o=null,a=[],s=[],c=0,u=e.length,l=null,d=i===bi.CONV_GROUP,p=this.getModule(Kf),f=function(){c=d?e.length-1:0,u=d?0:e.length},h=function(){d?--c:++c},g=function(){return d?c>=u:c<u};for(f();g();h())if(d&&1===e[c].sequence&&r&&this.setCompleted(t),1!==e[c].isPlaceMessage)if((o=new uI(e[c])).to=e[c].to,i!==bi.CONV_GROUP||Zl(e[c].topicID)||(o.to=e[c].topicID),o.isSystemMessage=!!e[c].isSystemMessage,o.conversationType=i,4===e[c].event?l={type:bi.MSG_GRP_TIP,content:n(n({},e[c].elements),{},{groupProfile:e[c].groupProfile})}:(e[c].elements=p.parseElements(e[c].elements,e[c].from),l=e[c].elements),d||o.setNickAndAvatar({nick:e[c].nick,avatar:e[c].avatar}),Bd(l)){var v=new a_("emptyMessageBody");v.setMessage("from:".concat(o.from," to:").concat(o.to," sequence:").concat(o.sequence," event:").concat(e[c].event)),v.setNetworkType(this.getNetworkType()).setLevel("warning").end()}else o.setElement(l),o.reInitialize(this.getMyUserID()),a.push(o);return f=h=g=null,r?(this._messageListHandler.unshift(a,s),a=null,s):(s=null,a)}},{key:"findMessage",value:function(e){return this._messageListHandler.findMessage(e)}},{key:"_isNotInCommunity",value:function(e){var t=!1;if(e.startsWith(bi.CONV_GROUP)&&this._isTopicConversation(e)){var n=Nd(e.replace(bi.CONV_GROUP,""));this.getModule(jf).hasLocalGroup(n)||(t=!0)}return t}},{key:"deleteTopicRoamingMessageInfo",value:function(e){var t=this;yd({groupID:e})&&this._messageListHandler.getTopicConversationIDList(e).forEach((function(e){t._messageListHandler.removeByConversationID(e),t._completedMap.delete(e),t._roamingMessageSequenceMap.delete(e)}))}},{key:"deleteGroupRomaingMessageInfo",value:function(e){var t="".concat(bi.CONV_GROUP).concat(e);this._messageListHandler.removeByConversationID(t),this._completedMap.delete(t),this._roamingMessageSequenceMap.delete(t)}},{key:"setMessageRead",value:function(e){var t=e.conversationID,n=this.getLocalConversation(t);if(Ll.l("".concat(this._n,".setMessageRead conversationID:").concat(t," unreadCount:").concat(n?n.unreadCount:0)),!n)return hI();if(n.type!==bi.CONV_GROUP&&n.type!==bi.CONV_TOPIC||Bd(n.groupAtInfoList)||this.deleteGroupAtTips(t),0===n.unreadCount)return hI();if(n.type===bi.CONV_GROUP&&!this._hasLocalGroup(t))return 0!==n.unreadCount&&(n.unreadCount=0,this.emitConversationUpdate(!0,!1)),hI();var r=this._messageListHandler.getLocalLastMessage(t),i=n.lastMessage.lastTime;r&&i<r.time&&(i=r.time);var o=n.lastMessage.lastSequence;if(r&&o<r.sequence&&(o=r.sequence),n.type===bi.CONV_TOPIC&&Zl(r)){var a=this.getModule(Vf),s=t.replace(bi.CONV_GROUP,""),c=Nd(s),u=a.getLocalTopic(c,s);u&&(o=u.nextMessageSeq-1)}var l=null;switch(n.type){case bi.CONV_C2C:return(l=this.getModule(Pf))?l.setMessageRead({conversationID:t,lastMessageTime:i}):gI({code:Dm});case bi.CONV_GROUP:case bi.CONV_TOPIC:return(l=this.getModule(jf))?l.setMessageRead({conversationID:t,lastMessageSeq:o}):gI({code:Dm});case bi.CONV_SYSTEM:return n.unreadCount=0,this.emitConversationUpdate(!0,!1),hI();default:return hI()}}},{key:"setAllMessageRead",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n="setAllMessageRead",r="".concat(this._n,".").concat(n);t.scope||(t.scope=bi.READ_ALL_MSG),Ll.l("".concat(r," options:"),t);var i=this._createSetAllMessageReadPack(t);if(0===i.readAllC2CMessage&&0===i.groupMessageReadInfoList.length)return hI();var o=new a_(n);return this.request({protocolName:sg,requestData:i}).then((function(n){var r=n.data,i=e._handleAllMessageRead(r);return o.setMessage("scope:".concat(t.scope," failureGroups:").concat(JSON.stringify(i))).setNetworkType(e.getNetworkType()).end(),hI()})).catch((function(t){return e.probeNetwork().then((function(e){var n=_(e,2),r=n[0],i=n[1];o.setError(t,r,i).end()})),Ll.w("".concat(r," failed. error:"),t),gI({code:t&&t.code?t.code:Dv,message:t&&t.message?t.message:void 0})}))}},{key:"setConversationCustomData",value:function(e){return this._convGroupHandler.setConvCustomData(e)}},{key:"markConversation",value:function(e){return this._convGroupHandler.markConversation(e)}},{key:"getConversationGroupList",value:function(){return this._convGroupHandler.getLocalConvGroupList()}},{key:"createConversationGroup",value:function(e){return this._convGroupHandler.createConvGroup(e)}},{key:"deleteConversationGroup",value:function(e){return this._convGroupHandler.deleteConvGroup(e)}},{key:"renameConversationGroup",value:function(e){return this._convGroupHandler.renameConvGroup(e)}},{key:"addConversationsToGroup",value:function(e){return this._convGroupHandler.addConvsToGroup(e)}},{key:"deleteConversationsFromGroup",value:function(e){return this._convGroupHandler.deleteConvsFromGroup(e)}},{key:"onConversationMarkUpdated",value:function(e){this._convGroupHandler.onConvMarkUpdated(e)}},{key:"onConversationGroupCreated",value:function(e){this._convGroupHandler.onConvGroupCreated(e)}},{key:"onConversationGroupDeleted",value:function(e){this._convGroupHandler.onConvGroupDeleted(e)}},{key:"onConversationGroupNameUpdated",value:function(e){this._convGroupHandler.onConvGroupNameUpdated(e)}},{key:"onConversationInGroupUpdated",value:function(e){this._convGroupHandler.onConvInGroupUpdated(e)}},{key:"onConversationAddedToOrDeletedFromGroup",value:function(e){this._convGroupHandler.onConvAddedToOrDeletedFromGroup(e)}},{key:"_getConversationLastMessageSequence",value:function(e){var t=this._messageListHandler.getLocalLastMessage(e.conversationID),n=e.lastMessage.lastSequence;return t&&n<t.sequence&&(n=t.sequence),n}},{key:"_getConversationLastMessageTime",value:function(e){var t=this._messageListHandler.getLocalLastMessage(e.conversationID),n=e.lastMessage.lastTime;return t&&n<t.time&&(n=t.time),n}},{key:"_createSetAllMessageReadPack",value:function(e){var t,n={readAllC2CMessage:0,groupMessageReadInfoList:[]},r=e.scope,i=E(this._conversationMap);try{for(i.s();!(t=i.n()).done;){var o=_(t.value,2)[1];if(o.unreadCount>0)if(o.type===bi.CONV_C2C&&0===n.readAllC2CMessage){if(r===bi.READ_ALL_MSG)n.readAllC2CMessage=1;else if(r===bi.READ_ALL_C2C_MSG){n.readAllC2CMessage=1;break}}else if(o.type===bi.CONV_GROUP&&(r===bi.READ_ALL_GROUP_MSG||r===bi.READ_ALL_MSG)){var a=this._getConversationLastMessageSequence(o);n.groupMessageReadInfoList.push({groupID:o.groupProfile.groupID,messageSequence:a})}}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"onPushedAllMessageRead",value:function(e){this._handleAllMessageRead(e)}},{key:"_handleAllMessageRead",value:function(e){var t=e.groupMessageReadInfoList,n=e.readAllC2CMessage,r=this._parseGroupReadInfo(t);return this._updateAllConversationUnreadCount({readAllC2CMessage:n})>=1&&(this.emitConversationUpdate(!0,!1),this.emitTotalUnreadMessageCountUpdate()),r}},{key:"_parseGroupReadInfo",value:function(e){var t=[];if(e&&e.length)for(var n=0,r=e.length;n<r;n++){var i=e[n],o=i.groupID,a=i.sequence,s=i.retCode,c=i.lastMessageSeq;Zl(s)?this._remoteGroupReadSequenceMap.set(o,c):(this._remoteGroupReadSequenceMap.set(o,a),0!==s&&t.push("".concat(o,"-").concat(a,"-").concat(s)))}return t}},{key:"_updateAllConversationUnreadCount",value:function(e){var t,n=e.readAllC2CMessage,r=0,i=E(this._conversationMap);try{for(i.s();!(t=i.n()).done;){var o=_(t.value,2),a=o[0],s=o[1];if(s.unreadCount>=1){if(1===n&&s.type===bi.CONV_C2C){var c=this._getConversationLastMessageTime(s);this.updateIsReadAfterReadReport({conversationID:a,lastMessageTime:c})}else if(s.type===bi.CONV_GROUP){var u=a.replace(bi.CONV_GROUP,"");if(this._remoteGroupReadSequenceMap.has(u)){var l=this._remoteGroupReadSequenceMap.get(u),d=this._getConversationLastMessageSequence(s);this.updateIsReadAfterReadReport({conversationID:a,remoteReadSequence:l}),d>=l&&this._remoteGroupReadSequenceMap.delete(u)}}this.updateUnreadCount(a,!1)&&(r+=1)}}}catch(f){i.e(f)}finally{i.f()}return r}},{key:"isRemoteRead",value:function(e){var t=e.conversationID,n=e.sequence,r=t.replace(bi.CONV_GROUP,""),i=!1;if(this._remoteGroupReadSequenceMap.has(r)){var o=this._remoteGroupReadSequenceMap.get(r);n<=o&&(i=!0,Ll.l("".concat(this._n,".isRemoteRead conversationID:").concat(t," messageSequence:").concat(n," remoteReadSequence:").concat(o))),n>=o+10&&this._remoteGroupReadSequenceMap.delete(r)}return i}},{key:"updateIsReadAfterReadReport",value:function(e){var t=e.conversationID,n=e.lastMessageSeq,r=e.lastMessageTime,i=this._messageListHandler.getLocalMessageList(t);if(0!==i.length)for(var o,a=i.length-1;a>=0;a--)if(o=i[a],!(r&&o.time>r||n&&o.sequence>n)){if("in"===o.flow&&o.isRead)break;o.setIsRead(!0)}}},{key:"updateUnreadCount",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!1,r=this.getLocalConversation(e),i=this._messageListHandler.getLocalMessageList(e);if(r){var o=r.unreadCount,a=i.filter((function(e){return!e.isRead&&!e._onlineOnlyFlag&&!e.isDeleted})).length;if(o!==a&&(r.unreadCount=a,n=!0,Ll.l("".concat(this._n,".updateUnreadCount from ").concat(o," to ").concat(a,", conversationID:").concat(e)),!0===t&&(this.emitConversationUpdate(!0,!1),this.emitTotalUnreadMessageCountUpdate())),n&&r.type===bi.CONV_TOPIC){var s=r.unreadCount,c=this.getModule(Vf),u=e.replace(bi.CONV_GROUP,"");c.onConversationProxy({topicID:u,unreadCount:s})}return n}}},{key:"clearGroupAtInfoList",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getLocalConversation(e);if(n&&n.groupAtInfoList.length>0){if(n.clearGroupAtInfoList(),Ll.l("".concat(this._n,".clearGroupAtInfoList conversationID:").concat(e)),n.type===bi.CONV_TOPIC){var r=n.groupAtInfoList,i=this.getModule(Vf),o=e.replace(bi.CONV_GROUP,"");i.onConversationProxy({topicID:o,groupAtInfoList:r})}!0===t&&this.emitConversationUpdate(!0,!1)}}},{key:"updateReadReceiptInfo",value:function(e){var t=this,n=e.userID,r=void 0===n?void 0:n,i=e.groupID,o=void 0===i?void 0:i,a=e.readReceiptList;if(!Bd(a)){var s=[];if(Zl(r)){if(!Zl(o)){var c="".concat(bi.CONV_GROUP).concat(o);a.forEach((function(e){var n=e.tinyID,r=e.clientTime,i=e.random,a=e.readCount,u=e.unreadCount,l="".concat(n,"-").concat(r,"-").concat(i),d=t._messageListHandler.getLocalMessage(c,l),p={groupID:o,messageID:l,readCount:0,unreadCount:0};d&&(Wl(a)&&(d.readReceiptInfo.readCount=a,p.readCount=a),Wl(u)&&(d.readReceiptInfo.unreadCount=u,p.unreadCount=u),s.push(p))}))}}else{var u="".concat(bi.CONV_C2C).concat(r);a.forEach((function(e){var n=e.tinyID,i=e.clientTime,o=e.random,a="".concat(n,"-").concat(i,"-").concat(o),c=t._messageListHandler.getLocalMessage(u,a);if(c){c.readReceiptInfo.isPeerRead=!0;var l={userID:r,messageID:a,isPeerRead:!0};s.push(l)}}))}s.length>0&&this.emitOuterEvent(yi.MESSAGE_READ_RECEIPT_RECEIVED,s)}}},{key:"recomputeGroupUnreadCount",value:function(e){var t=e.conversationID,n=e.count,r=this.getLocalConversation(t);if(r){var i=r.unreadCount,o=i-n;o<0&&(o=0),r.unreadCount=o,Ll.l("".concat(this._n,".recomputeGroupUnreadCount from ").concat(i," to ").concat(o,", conversationID:").concat(t))}}},{key:"updateIsRead",value:function(e){var t=this.getLocalConversation(e),n=this.getLocalMessageList(e);if(t&&0!==n.length&&!Cd(t.type)){for(var r=[],i=0,o=n.length;i<o;i++)"in"!==n[i].flow?"out"!==n[i].flow||n[i].isRead||n[i].setIsRead(!0):r.push(n[i]);var a=0;if(t.type===bi.CONV_C2C){var s=r.slice(-t.unreadCount).filter((function(e){return e.isRevoked})).length;a=r.length-t.unreadCount-s}else a=r.length-t.unreadCount;for(var c=0;c<a&&!r[c].isRead;c++)r[c].setIsRead(!0)}}},{key:"deleteGroupAtTips",value:function(e){var t=this,n="".concat(this._n,".deleteGroupAtTips");Ll.l("".concat(n));var r=this._conversationMap.get(e);if(!r)return Promise.resolve();var i=r.groupAtInfoList;if(0===i.length)return Promise.resolve();var o=void 0;e.startsWith(bi.CONV_GROUP)&&(o=e.replace(bi.CONV_GROUP,""));var a=y(i);if((yd({groupID:o})||bd(o))&&0===(a=i.filter((function(e){return!e.atTypeArray.includes(bi.CONV_AT_ALL)}))).length)return this.clearGroupAtInfoList(e,!1),Promise.resolve();var s=this.getMyUserID();return this.request({protocolName:Uh,requestData:{messageListToDelete:a.map((function(e){return{from:e.from,to:s,messageSeq:e.__sequence,messageRandom:e.__random,groupID:Zl(e.topicID)?e.groupID:e.topicID}}))}}).then((function(){return Ll.l("".concat(n," ok. count:").concat(i.length)),t.clearGroupAtInfoList(e,!1),Promise.resolve()})).catch((function(e){return Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"appendToMessageList",value:function(e){this._messageListHandler.pushIn(e)}},{key:"setMessageRandom",value:function(e){this.singlyLinkedList.set(e.random)}},{key:"deleteMessageRandom",value:function(e){this.singlyLinkedList.delete(e.random)}},{key:"pushIntoMessageList",value:function(e,t,n){return!(!this._messageListHandler.pushIn(t,n)||this._isMessageFromCurrentInstance(t)&&!n)&&(e.push(t),!0)}},{key:"_isMessageFromCurrentInstance",value:function(e){return this.singlyLinkedList.has(e.random)}},{key:"revoke",value:function(e,t,n){return this._messageListHandler.revoke(e,t,n)}},{key:"getPeerReadTime",value:function(e){return this._peerReadTimeMap.get(e)}},{key:"recordPeerReadTime",value:function(e,t){this._peerReadTimeMap.has(e)?this._peerReadTimeMap.get(e)<t&&this._peerReadTimeMap.set(e,t):this._peerReadTimeMap.set(e,t)}},{key:"updateMessageIsPeerReadProperty",value:function(e,t){if(e.startsWith(bi.CONV_C2C)&&t>0){var n=this._messageListHandler.updateMessageIsPeerReadProperty(e,t);if(n.length>0&&this.emitOuterEvent(yi.MESSAGE_READ_BY_PEER,n),this._conversationMap.has(e)){var r=this._conversationMap.get(e).lastMessage;Bd(r)||r.fromAccount===this.getMyUserID()&&r.lastTime<=t&&!r.isPeerRead&&(r.isPeerRead=!0,this.emitConversationUpdate(!0,!1))}}}},{key:"updateMessageIsModifiedProperty",value:function(e){this._messageListHandler.updateMessageIsModifiedProperty(e)}},{key:"setCompleted",value:function(e){Ll.l("".concat(this._n,".setCompleted. conversationID:").concat(e)),this._completedMap.set(e,!0)}},{key:"updateRoamingMessageKeyAndTime",value:function(e,t,n){this._roamingMessageKeyAndTimeMap.set(e,{messageKey:t,lastMessageTime:n})}},{key:"updateRoamingMessageSequence",value:function(e,t){this._roamingMessageSequenceMap.set(e,t)}},{key:"getConversationList",value:function(e){var t=this,n="getConversationList",r="".concat(this._n,".").concat(n),i="pagingStatus:".concat(this._pagingStatus,", local conversation count:").concat(this._conversationMap.size,", options:").concat(e);if(Ll.l("".concat(r,". ").concat(i)),this._pagingStatus===Up.REJECTED){var o=new a_(n);return o.setMessage(i),this.syncConversationList().then((function(){o.setNetworkType(t.getNetworkType()).end();var n=t._getConversationList(e);return lI({conversationList:n,isSyncCompleted:t._isSyncCompleted()})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];o.setError(e,r,i).end()})),Ll.e("".concat(r," failed. error:"),e),gI(e)}))}if(0===this._conversationMap.size){var a=new a_(n);return a.setMessage(i),this.syncConversationList().then((function(){a.setNetworkType(t.getNetworkType()).end();var n=t._getConversationList(e);return lI({conversationList:n,isSyncCompleted:t._isSyncCompleted()})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];a.setError(e,r,i).end()})),Ll.e("".concat(r," failed. error:"),e),gI(e)}))}var s=this._getConversationList(e);return Ll.l("".concat(r,". returned conversation count:").concat(s.length)),hI({conversationList:s,isSyncCompleted:this._isSyncCompleted()})}},{key:"_getConversationList",value:function(e){if(Zl(e))return this.getLocalConversationList();if(Xl(e))return 0===e.length?[]:this.getLocalConversationList().filter((function(t){return e.includes(t.conversationID)}));if($l(e)){var t=e.type,n=e.markType,r=e.groupName;return this.getLocalConversationList().filter((function(e){return(t!==bi.CONV_C2C&&t!==bi.CONV_GROUP||e.type===t)&&(!Yl(r)||e.conversationGroupList.includes(r))&&(!Wl(n)||e.markList.includes(n))}))}return[]}},{key:"_handleC2CPeerReadTime",value:function(){var e,t=E(this._conversationMap);try{for(t.s();!(e=t.n()).done;){var n=_(e.value,2),r=n[0],i=n[1];i.type===bi.CONV_C2C&&(Ll.d("".concat(this._n,"._handleC2CPeerReadTime conversationID:").concat(r," peerReadTime:").concat(i.peerReadTime)),this.recordPeerReadTime(r,i.peerReadTime))}}catch(a){t.e(a)}finally{t.f()}}},{key:"_isPagingGetGroupListCompleted",value:function(){return this.getModule(jf).isPagingGetCompleted()}},{key:"_getLocalGroupCount",value:function(){return this.getModule(jf).getLocalGroupList().length}},{key:"_hasLocalGroup",value:function(e){return this.getModule(jf).hasLocalGroup(e.replace(bi.CONV_GROUP,""))}},{key:"getConversationProfile",value:function(e){var t,n=this;if((t=this._conversationMap.has(e)?this._conversationMap.get(e):new YI({conversationID:e,type:e.slice(0,3)===bi.CONV_C2C?bi.CONV_C2C:bi.CONV_GROUP},this.isIntl()))._isInfoCompleted||t.type===bi.CONV_SYSTEM)return hI({conversation:t});if(Td(e)&&!this._hasLocalGroup(e))return hI({conversation:t});var r="".concat(this._n,".").concat("getConversationProfile"),i=new a_("getConversationProfile");return Ll.l("".concat(r,". conversationID:").concat(e," remark:").concat(t.remark," lastMessage:"),t.lastMessage),this._updateUserOrGroupProfileCompletely(t).then((function(o){i.setNetworkType(n.getNetworkType()).setMessage("conversationID:".concat(e," unreadCount:").concat(o.data.conversation.unreadCount)).end();var a=n.getModule(Uf);if(a&&t.type===bi.CONV_C2C){var s=e.replace(bi.CONV_C2C,"");if(a.isMyFriend(s)){var c=a.getFriendRemark(s);t.remark!==c&&(t.remark=c,Ll.l("".concat(r,". conversationID:").concat(e," patch remark:").concat(t.remark)))}}return Ll.l("".concat(r," ok. conversationID:").concat(e)),o})).catch((function(t){return n.probeNetwork().then((function(n){var r=_(n,2),o=r[0],a=r[1];i.setError(t,o,a).setMessage("conversationID:".concat(e)).end()})),Ll.e("".concat(r," failed. error:"),t),gI(t)}))}},{key:"_updateUserOrGroupProfileCompletely",value:function(e){var t=this;return e.type===bi.CONV_C2C?this.getModule(Nf).getUserProfile({userIDList:[e.toAccount]}).then((function(n){var r=n.data;return 0===r.length?gI(new dI({code:em})):(e.userProfile=r[0],e._isInfoCompleted=!0,t._unshiftConversation(e),hI({conversation:e}))})):this.getModule(jf).getGroupProfile({groupID:e.toAccount}).then((function(n){return e.groupProfile=n.data.group,e._isInfoCompleted=!0,t._unshiftConversation(e),hI({conversation:e})}))}},{key:"_unshiftConversation",value:function(e){e instanceof YI&&!this._conversationMap.has(e.conversationID)&&(this._conversationMap=new Map([[e.conversationID,e]].concat(y(this._conversationMap))),this._setStorageConversationList(),this.emitConversationUpdate(!0,!1))}},{key:"_onProfileUpdated",value:function(e){var t=this;e.data.forEach((function(e){var n=e.userID;if(n===t.getMyUserID())t._onMyProfileModified({latestNick:e.nick,latestAvatar:e.avatar});else{var r=t._conversationMap.get("".concat(bi.CONV_C2C).concat(n));r&&(r.userProfile=e)}}))}},{key:"_isSyncCompleted",value:function(){return this._pagingStatus===Up.RESOLVED}},{key:"deleteConversation",value:function(e){var t=this,n={fromAccount:this.getMyUserID(),toAccount:void 0,type:void 0,toGroupID:void 0};if(!this._conversationMap.has(e))return gI({code:Qv});var r=this._conversationMap.get(e).type;if(r===bi.CONV_C2C)n.type=1,n.toAccount=e.replace(bi.CONV_C2C,"");else{if(r!==bi.CONV_GROUP)return r===bi.CONV_SYSTEM?(this.getModule(jf).deleteGroupSystemNotice({messageList:this._messageListHandler.getLocalMessageList(e)}),this.deleteLocalConversation(e),hI({conversationID:e})):gI({code:tm});if(!this._hasLocalGroup(e))return this.deleteLocalConversation(e),hI({conversationID:e});n.type=2,n.toGroupID=e.replace(bi.CONV_GROUP,"")}var i="".concat(this._n,".").concat("deleteConversation"),o=new a_("deleteConversation");return o.setMessage("conversationID:".concat(e)),Ll.l("".concat(i,". conversationID:").concat(e)),this.setMessageRead({conversationID:e}).then((function(){return t.request({protocolName:Nh,requestData:n})})).then((function(){return o.setNetworkType(t.getNetworkType()).end(),Ll.l("".concat(i," ok")),t.deleteLocalConversation(e),hI({conversationID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];o.setError(e,r,i).end()})),Ll.e("".concat(i," failed. error:"),e),gI(e)}))}},{key:"clearHistoryMessage",value:function(e){var t=this,n={fromAccount:this.getMyUserID(),toAccount:void 0,type:void 0,toGroupID:void 0};if(!this._conversationMap.has(e))return gI({code:Qv});var r=this._conversationMap.get(e).type;if(r===bi.CONV_C2C)n.type=1,n.toAccount=e.replace(bi.CONV_C2C,"");else{if(r!==bi.CONV_GROUP)return r===bi.CONV_SYSTEM?(this.getModule(jf).deleteGroupSystemNotice({messageList:this._messageListHandler.getLocalMessageList(e)}),hI({conversationID:e})):gI({code:tm});n.type=2,n.toGroupID=e.replace(bi.CONV_GROUP,"")}var i="".concat(this._n,".").concat("clearHistoryMessage"),o=new a_("clearHistoryMessage");return o.setMessage("conversationID:".concat(e)),Ll.l("".concat(i,". conversationID:").concat(e)),this.setMessageRead({conversationID:e}).then((function(){return t.request({protocolName:Ph,requestData:n})})).then((function(){o.setNetworkType(t.getNetworkType()).end(),Ll.l("".concat(i," ok")),t._messageListHandler.removeByConversationID(e),t.setCompleted(e);var n=t.getLocalConversation(e);return n&&(n.updateLastMessage(),t._sortConversationListAndEmitEvent()),hI({conversationID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];o.setError(e,r,i).end()})),Ll.e("".concat(i," failed. error:"),e),gI(e)}))}},{key:"pinConversation",value:function(e){var t=this,n=e.conversationID,r=e.isPinned;if(!this._conversationMap.has(n))return gI({code:Qv});var i=this.getLocalConversation(n);if(i.isPinned===r)return hI({conversationID:n});var o="".concat(this._n,".").concat("pinConversation"),a=new a_("pinConversation");a.setMessage("conversationID:".concat(n," isPinned:").concat(r)),Ll.l("".concat(o,". conversationID:").concat(n," isPinned:").concat(r));var s=null;return Id(n)?s={type:1,toAccount:n.replace(bi.CONV_C2C,"")}:Td(n)&&(s={type:2,groupID:n.replace(bi.CONV_GROUP,"")}),this.request({protocolName:jh,requestData:{fromAccount:this.getMyUserID(),operationType:!0===r?1:2,itemList:[s]}}).then((function(){return a.setNetworkType(t.getNetworkType()).end(),Ll.l("".concat(o," ok")),i.isPinned!==r&&(i.isPinned=r,t._sortConversationListAndEmitEvent()),lI({conversationID:n})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];a.setError(e,r,i).end()})),Ll.e("".concat(o," failed. error:"),e),gI(e)}))}},{key:"setMessageRemindType",value:function(e){return this._messageRemindHandler.set(e)}},{key:"patchMessageRemindType",value:function(e){var t=e.ID,n=e.isC2CConversation,r=e.messageRemindType,i=!1,o=this.getLocalConversation(n?"".concat(bi.CONV_C2C).concat(t):"".concat(bi.CONV_GROUP).concat(t));return o&&o.messageRemindType!==r&&(o.messageRemindType=r,i=!0),Ll.d("".concat(this._n,".patchMessageRemindType options:"),e,"ret:".concat(i)),i}},{key:"onC2CMessageRemindTypeSynced",value:function(e){var t=this,n="".concat(this._n,".onC2CMessageRemindTypeSynced");Ll.d(n,e),e.dataList.forEach((function(e){if(!Bd(e.muteNotificationsSync)){var r,i=e.muteNotificationsSync,o=i.to,a=i.updateSequence,s=i.muteFlag;t._messageRemindHandler.setUpdateSequence(a),0===s?r=bi.MSG_REMIND_ACPT_AND_NOTE:1===s?r=bi.MSG_REMIND_DISCARD:2===s&&(r=bi.MSG_REMIND_ACPT_NOT_NOTE);var c=0;t.patchMessageRemindType({ID:o,isC2CConversation:!0,messageRemindType:r})&&(c+=1),Ll.l("".concat(n," updateCount:").concat(c)),c>=1&&t.emitConversationUpdate(!0,!1)}}))}},{key:"onGroupMessageRemindTypeSynced",value:function(e){Ll.d("".concat(this._n,".onGroupMessageRemindTypeSynced options:"),e),this._messageRemindHandler.onGroupMessageRemindTypeUpdated(e)}},{key:"deleteLocalConversation",value:function(e){var t=this._conversationMap.has(e);if(Ll.l("".concat(this._n,".deleteLocalConversation conversationID:").concat(e," has:").concat(t)),t){this._conversationMap.delete(e),this._roamingMessageKeyAndTimeMap.has(e)&&this._roamingMessageKeyAndTimeMap.delete(e),this._roamingMessageSequenceMap.has(e)&&this._roamingMessageSequenceMap.delete(e),this._setStorageConversationList(),this._messageListHandler.removeByConversationID(e),this._completedMap.delete(e);var n=!this._isTopicConversation(e);this.emitConversationUpdate(n,!1)}}},{key:"isMessageSentByCurrentInstance",value:function(e){return!(!this._messageListHandler.hasLocalMessage(e.conversationID,e.ID)&&!this.singlyLinkedList.has(e.random))}},{key:"modifyMessageList",value:function(e){if(e.startsWith(bi.CONV_C2C)&&this._conversationMap.has(e)){var t=this._conversationMap.get(e),n=Date.now();this._messageListHandler.modifyMessageSentByPeer({conversationID:e,latestNick:t.userProfile.nick,latestAvatar:t.userProfile.avatar});var r=this.getModule(Nf).getNickAndAvatarByUserID(this.getMyUserID());this._messageListHandler.modifyMessageSentByMe({conversationID:e,latestNick:r.nick,latestAvatar:r.avatar}),Ll.l("".concat(this._n,".modifyMessageList conversationID:").concat(e," cost ").concat(Date.now()-n," ms"))}}},{key:"updateUserProfileSpecifiedKey",value:function(e){Ll.l("".concat(this._n,".updateUserProfileSpecifiedKey options:"),e);var t=e.conversationID,n=e.nick,r=e.avatar;if(this._conversationMap.has(t)){var i=this._conversationMap.get(t).userProfile;Yl(n)&&i.nick!==n&&(i.nick=n),Yl(r)&&i.avatar!==r&&(i.avatar=r),this.emitConversationUpdate(!0,!1)}}},{key:"_onMyProfileModified",value:function(e){var t=this,r=this.getLocalConversationList(),i=Date.now();r.forEach((function(r){t.modifyMessageSentByMe(n({conversationID:r.conversationID},e))})),Ll.l("".concat(this._n,"._onMyProfileModified. modify all messages sent by me, cost ").concat(Date.now()-i," ms"))}},{key:"modifyMessageSentByMe",value:function(e){this._messageListHandler.modifyMessageSentByMe(e)}},{key:"getLatestMessageSentByMe",value:function(e){return this._messageListHandler.getLatestMessageSentByMe(e)}},{key:"modifyMessageSentByPeer",value:function(e){this._messageListHandler.modifyMessageSentByPeer(e)}},{key:"getLatestMessageSentByPeer",value:function(e){return this._messageListHandler.getLatestMessageSentByPeer(e)}},{key:"pushIntoNoticeResult",value:function(e,t){return!(!this._messageListHandler.pushIn(t)||this.singlyLinkedList.has(t.random))&&(e.push(t),!0)}},{key:"getLocalLastMessage",value:function(e){return this._messageListHandler.getLocalLastMessage(e)}},{key:"checkAndPatchRemark",value:function(){var e=Promise.resolve();if(0===this._conversationMap.size)return e;var t=this.getModule(Uf);if(!t)return e;var n=y(this._conversationMap.values()).filter((function(e){return e.type===bi.CONV_C2C}));if(0===n.length)return e;var r=0;return n.forEach((function(e){var n=e.conversationID.replace(bi.CONV_C2C,"");if(t.isMyFriend(n)){var i=t.getFriendRemark(n);e.remark!==i&&(e.remark=i,r+=1)}})),Ll.l("".concat(this._n,".checkAndPatchRemark. c2c conversation count:").concat(n.length,", patched count:").concat(r)),e}},{key:"updateTopicConversation",value:function(e){this._updateLocalConversationList({conversationOptionsList:e,isFromGetConversations:!0})}},{key:"sendReadReceipt",value:function(e){var t=e[0],n=null;return t.conversationType===bi.CONV_C2C?n=this._m.getModule(Pf):t.conversationType===bi.CONV_GROUP&&(n=this._m.getModule(jf)),n?n.sendReadReceipt(e):gI({code:Dm})}},{key:"getReadReceiptList",value:function(e){var t=e[0],n=null;return t.conversationType===bi.CONV_C2C?n=this._m.getModule(Pf):t.conversationType===bi.CONV_GROUP&&(n=this._m.getModule(jf)),n?n.getReadReceiptList(e):gI({code:Dm})}},{key:"getLastMessageTime",value:function(e){var t=this.getLocalConversation(e);return t?t.lastMessage.lastTime:0}},{key:"getTotalUnreadMessageCount",value:function(){var e=this.getLocalConversationList(),t=0;return e.forEach((function(e){e.type!==bi.CONV_SYSTEM&&(""!==e.messageRemindType&&e.messageRemindType!==bi.MSG_REMIND_ACPT_AND_NOTE||(t+=e.unreadCount))})),t}},{key:"emitTotalUnreadMessageCountUpdate",value:function(){var e=this.getTotalUnreadMessageCount();this._convTotalUnreadCount!==e&&(Ll.l("".concat(this._n,".emitTotalUnreadMessageCountUpdate from ").concat(this._convTotalUnreadCount," to ").concat(e)),this._convTotalUnreadCount=e,this.emitOuterEvent(yi.TOTAL_UNREAD_MESSAGE_COUNT_UPDATED))}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset")),this._pagingStatus=Up.NOT_START,this._messageListHandler.reset(),this._messageRemindHandler.reset(),this._roamingMessageKeyAndTimeMap.clear(),this._roamingMessageSequenceMap.clear(),this.singlyLinkedList.reset(),this._peerReadTimeMap.clear(),this._completedMap.clear(),this._conversationMap.clear(),this._pagingTimeStamp=0,this._pagingStartIndex=0,this._pagingPinnedTimeStamp=0,this._pagingPinnedStartIndex=0,this._remoteGroupReadSequenceMap.clear(),this._convTotalUnreadCount=0,this.resetReady()}}]),r}(uh),nT=function(){function e(t){i(this,e),this._groupModule=t,this._n="GroupTipsHandler",this._cachedGroupTipsMap=new Map,this._checkCountMap=new Map,this.MAX_CHECK_COUNT=4,this._getTopicPendingMap=new Map}return a(e,[{key:"onCheckTimer",value:function(e){e%1==0&&this._cachedGroupTipsMap.size>0&&this._checkCachedGroupTips()}},{key:"_checkCachedGroupTips",value:function(){var e=this;this._cachedGroupTipsMap.forEach((function(t,n){var r=e._checkCountMap.get(n),i=e._groupModule.hasLocalGroup(n);Ll.l("".concat(e._n,"._checkCachedGroupTips groupID:").concat(n," hasLocalGroup:").concat(i," checkCount:").concat(r)),i?(e._notifyCachedGroupTips(n),e._checkCountMap.delete(n),e._groupModule.deleteUnjoinedAVChatRoom(n)):r>=e.MAX_CHECK_COUNT?(e._deleteCachedGroupTips(n),e._checkCountMap.delete(n)):(r++,e._checkCountMap.set(n,r))}))}},{key:"onNewGroupTips",value:function(e){Ll.d("".concat(this._n,".onReceiveGroupTips count:").concat(e.dataList.length));var t=this.newGroupTipsStoredAndSummary(e),n=t.eventDataList,r=t.result,i=t.AVChatRoomMessageList;i.length>0&&this._groupModule.onAVChatRoomMessage(i),n.length>0&&(this._groupModule.updateNextMessageSeq(n),this._groupModule.getModule(Ff).onNewMessage({conversationOptionsList:n,isInstantMessage:!0})),r.length>0&&(this._groupModule.emitOuterEvent(yi.MESSAGE_RECEIVED,r),this.handleMessageList(r))}},{key:"newGroupTipsStoredAndSummary",value:function(e){for(var t=this,r=e.event,i=e.dataList,o=null,a=[],s=[],c={},u=[],l=function(e,l){var d=gd(i[e]);if(6===r){if(t._groupModule.isGroupAttributesUpdatedNotice(d))return"continue";if(t._groupModule.isGroupCountersNotice(d))return"continue"}var p=d.groupProfile,f=p.groupID,h=p.communityType,g=void 0===h?0:h,v=p.topicID,m=void 0===v?void 0:v,_=p.invisible,y=void 0,b=t._groupModule.isMessageFromTopic(g,m);if(b){y=bi.CONV_TOPIC,d.to=m;var I=t._groupModule.getModule(Vf);I.hasLocalTopic(f,m)||t._getTopicPendingMap.has(m)||(t._getTopicPendingMap.set(m,1),I.getTopicList({groupID:f,topicIDList:[m]}).finally((function(){t._getTopicPendingMap.delete(m)})))}var T=t._groupModule.hasLocalGroup(f);if(!T&&t._groupModule.isUnjoinedAVChatRoom(f))return"continue";if(!T&&!b)return t._cacheGroupTipsAndProbe({groupID:f,event:r,item:d}),"continue";if(t._groupModule.isMessageFromOrToAVChatroom(f))return d.event=r,u.push(d),"continue";if(d.currentUser=t._groupModule.getMyUserID(),d.conversationType=bi.CONV_GROUP,(o=new uI(d)).setElement({type:bi.MSG_GRP_TIP,content:n(n({},d.elements),{},{groupProfile:d.groupProfile})}),o.isSystemMessage=!1,1===_)return t._qualityStat(o),"continue";var C=t._groupModule.getModule(Ff),S=o,E=S.conversationID,M=S.sequence;if(6===r)o._onlineOnlyFlag=!0,s.push(o);else if(!C.pushIntoNoticeResult(s,o))return"continue";if(t._groupModule.isMessageFromCommunityOfTopic(g,m))return"continue";if(6===r&&C.getLocalConversation(E))return"continue";6!==r&&t._qualityStat(o);var k=C.isRemoteRead({conversationID:E,sequence:M});if(Zl(c[E])){var w=0;"in"===o.flow&&(o._isExcludedFromUnreadCount||o._onlineOnlyFlag||k||(w=1)),c[E]=a.push({conversationID:E,unreadCount:w,type:Zl(y)?o.conversationType:y,subType:o.conversationSubType,lastMessage:o._isExcludedFromLastMessage?"":o})-1}else{var O=c[E];a[O].type=o.conversationType,a[O].subType=o.conversationSubType,a[O].lastMessage=o._isExcludedFromLastMessage?"":o,"in"===o.flow&&(o._isExcludedFromUnreadCount||o._onlineOnlyFlag||k||a[O].unreadCount++)}},d=0,p=i.length;d<p;d++)l(d);return{eventDataList:a,result:s,AVChatRoomMessageList:u}}},{key:"_qualityStat",value:function(e){this._groupModule.getModule(nh).addMessageSequence({key:Qm,message:e})}},{key:"handleMessageList",value:function(e){var t=this;e.forEach((function(e){switch(e.payload.operationType){case 1:t._onNewMemberComeIn(e);break;case 2:t._onMemberQuit(e);break;case 3:t._onMemberKickedOut(e);break;case 4:t._onMemberSetAdmin(e);break;case 5:t._onMemberCancelledAdmin(e);break;case 6:t._onGroupProfileModified(e);break;case 7:t._onMemberInfoModified(e);break;case 8:t._onTopicProfileUpdated(e);break;default:Ll.w("".concat(t._n,".handleMessageList unknown operationType:").concat(e.payload.operationType))}}))}},{key:"_onNewMemberComeIn",value:function(e){var t=e.payload,n=t.memberNum,r=t.groupProfile.groupID,i=this._groupModule.getLocalGroupProfile(r);i&&Wl(n)&&i.memberCount!==n&&(i.memberCount=n,this._updateConversationGroupProfile(i))}},{key:"_onMemberQuit",value:function(e){var t=e.payload,n=t.memberNum,r=t.groupProfile.groupID,i=this._groupModule.getLocalGroupProfile(r);i&&Wl(n)&&i.memberCount!==n&&(i.memberCount=n,this._updateConversationGroupProfile(i)),this._groupModule.getModule(Gf).deleteLocalGroupMembers(r,e.payload.userIDList)}},{key:"_onMemberKickedOut",value:function(e){var t=e.payload,n=t.memberNum,r=t.groupProfile.groupID,i=this._groupModule.getLocalGroupProfile(r);i&&Wl(n)&&i.memberCount!==n&&(i.memberCount=n,this._updateConversationGroupProfile(i)),this._groupModule.getModule(Gf).deleteLocalGroupMembers(r,e.payload.userIDList)}},{key:"_updateConversationGroupProfile",value:function(e){this._groupModule.getModule(Ff).updateConversationGroupProfile([e])}},{key:"_onMemberSetAdmin",value:function(e){var t=e.payload.groupProfile.groupID,n=e.payload.userIDList,r=this._groupModule.getModule(Gf);n.forEach((function(e){var n=r.getLocalGroupMemberInfo(t,e);n&&n.updateRole(bi.GRP_MBR_ROLE_ADMIN)}))}},{key:"_onMemberCancelledAdmin",value:function(e){var t=e.payload.groupProfile.groupID,n=e.payload.userIDList,r=this._groupModule.getModule(Gf);n.forEach((function(e){var n=r.getLocalGroupMemberInfo(t,e);n&&n.updateRole(bi.GRP_MBR_ROLE_MEMBER)}))}},{key:"_onGroupProfileModified",value:function(e){var t=this,n=e.payload,r=n.newGroupProfile,i=n.groupProfile.groupID,o=this._groupModule.getLocalGroupProfile(i);Object.keys(r).forEach((function(e){switch(e){case"ownerID":t._ownerChanged(o,r);break;case"muteAllMembers":o.muteAllMembers=r.muteAllMembers;break;case"joinOption":o.joinOption=r.joinOption;break;default:o[e]=r[e]}}));var a=!o.isSupportTopic;this._groupModule.emitGroupListUpdate(!0,a)}},{key:"_ownerChanged",value:function(e,t){var n=e.groupID,r=this._groupModule.getLocalGroupProfile(n),i=this._groupModule.getMyUserID();if(i===t.ownerID){r.updateGroup({selfInfo:{role:bi.GRP_MBR_ROLE_OWNER}});var o=this._groupModule.getModule(Gf),a=o.getLocalGroupMemberInfo(n,i),s=this._groupModule.getLocalGroupProfile(n).ownerID,c=o.getLocalGroupMemberInfo(n,s);a&&a.updateRole(bi.GRP_MBR_ROLE_OWNER),c&&c.updateRole(bi.GRP_MBR_ROLE_MEMBER)}}},{key:"_onMemberInfoModified",value:function(e){var t=e.to,n=e.payload,r=n.groupProfile,i=n.memberList,o=r.groupID;bd(t)&&this._updateTopicMuteTime(e);var a=this._groupModule.getModule(Gf);i.forEach((function(e){var t=a.getLocalGroupMemberInfo(o,e.userID);t&&Wl(e.muteTime)&&t.updateMuteUntil(e.muteTime)}))}},{key:"_updateTopicMuteTime",value:function(e){var t=e.to,n=e.payload,r=n.groupProfile,i=n.memberList,o=void 0===i?[]:i,a=this._groupModule.getModule(Vf),s=r.groupID,c=a.getLocalTopic(s,t);if(c){for(var u=!1,l=0;l<o.length;l++){var d=o[l];if(d.userID===this._groupModule.getMyUserID()&&d.muteTime>=0){c.updateSelfInfo({muteTime:d.muteTime}),u=!0;break}}u&&this._groupModule.emitOuterEvent(yi.TOPIC_UPDATED,{groupID:s,topic:c})}}},{key:"_onTopicProfileUpdated",value:function(e){var t=e.payload,r=t.groupProfile.groupID,i=t.newTopicInfo;this._groupModule.getModule(Vf).onTopicProfileUpdated(n({groupID:r,topicID:e.to},i))}},{key:"_cacheGroupTips",value:function(e,t){this._cachedGroupTipsMap.has(e)||this._cachedGroupTipsMap.set(e,[]),this._cachedGroupTipsMap.get(e).push(t)}},{key:"_deleteCachedGroupTips",value:function(e){this._cachedGroupTipsMap.has(e)&&this._cachedGroupTipsMap.delete(e)}},{key:"_notifyCachedGroupTips",value:function(e){var t=this,n=this._cachedGroupTipsMap.get(e)||[];n.forEach((function(e){t.onNewGroupTips(e)})),this._deleteCachedGroupTips(e),Ll.l("".concat(this._n,"._notifyCachedGroupTips groupID:").concat(e," count:").concat(n.length))}},{key:"_cacheGroupTipsAndProbe",value:function(e){var t=this,n=e.groupID,r=e.event,i=e.item;this._cacheGroupTips(n,{event:r,dataList:[i]}),this._groupModule.getGroupSimplifiedInfo(n).then((function(e){e.type===bi.GRP_AVCHATROOM?t._groupModule.hasLocalGroup(n)?t._notifyCachedGroupTips(n):t._groupModule.setUnjoinedAVChatRoom(n):(t._groupModule.updateGroupMap([e]),t._notifyCachedGroupTips(n))})),this._checkCountMap.has(n)||this._checkCountMap.set(n,0),Ll.l("".concat(this._n,"._cacheGroupTipsAndProbe groupID:").concat(n))}},{key:"reset",value:function(){this._cachedGroupTipsMap.clear(),this._checkCountMap.clear(),this._getTopicPendingMap.clear()}}]),e}(),rT=function(){function e(t){i(this,e),this._groupModule=t,this._n="CommonGroupHandler",this.tempConversationList=null,this._cachedGroupMessageMap=new Map,this._checkCountMap=new Map,this.MAX_CHECK_COUNT=4,this._getTopicPendingMap=new Map,this._isPagingGetCompleted=!1,t.getInnerEmitterInstance().once(RI,this._initGroupList,this)}return a(e,[{key:"onCheckTimer",value:function(e){e%1==0&&this._cachedGroupMessageMap.size>0&&this._checkCachedGroupMessage()}},{key:"_checkCachedGroupMessage",value:function(){var e=this;this._cachedGroupMessageMap.forEach((function(t,n){var r=e._checkCountMap.get(n),i=e._groupModule.hasLocalGroup(n);Ll.l("".concat(e._n,"._checkCachedGroupMessage groupID:").concat(n," hasLocalGroup:").concat(i," checkCount:").concat(r)),i?(e._notifyCachedGroupMessage(n),e._checkCountMap.delete(n),e._groupModule.deleteUnjoinedAVChatRoom(n)):r>=e.MAX_CHECK_COUNT?(e._deleteCachedGroupMessage(n),e._checkCountMap.delete(n)):(r++,e._checkCountMap.set(n,r))}))}},{key:"_initGroupList",value:function(){var e=this;Ll.l("".concat(this._n,"._initGroupList"));var t=new a_("getGroupListInStorage"),n=this._groupModule.getStorageGroupList();if(Xl(n)&&n.length>0){n.forEach((function(t){e._groupModule.initGroupMap(t)})),this._groupModule.emitGroupListUpdate(!0,!1);var r=this._groupModule.getLocalGroupList().length;t.setNetworkType(this._groupModule.getNetworkType()).setMessage("group count:".concat(r)).end()}else t.setNetworkType(this._groupModule.getNetworkType()).setMessage("group count:0").end();Ll.l("".concat(this._n,"._initGroupList ok"))}},{key:"handleUpdateGroupLastMessage",value:function(e){var t="".concat(this._n,".handleUpdateGroupLastMessage");if(Ll.l("".concat(t," conversation count:").concat(e.length,", local group count:").concat(this._groupModule.getLocalGroupList().length)),0!==this._groupModule.getGroupMap().size){for(var r,i,o,a=!1,s=0,c=e.length;s<c;s++)(r=e[s]).type===bi.CONV_GROUP&&(i=r.conversationID.split(/^GROUP/)[1],(o=this._groupModule.getLocalGroupProfile(i))&&(o.lastMessage=n({},r.lastMessage),a=!0));a&&(this._groupModule.sortLocalGroupList(),this._groupModule.emitGroupListUpdate(!0,!1))}else this.tempConversationList=e}},{key:"onNewGroupMessage",value:function(e){Ll.d("".concat(this._n,".onNewGroupMessage count:").concat(e.dataList.length));var t=this._newGroupMessageStoredAndSummary(e),n=t.conversationOptionsList,r=t.messageList,i=t.AVChatRoomMessageList;i.length>0&&this._groupModule.onAVChatRoomMessage(i),this._groupModule.filterModifiedMessage(r),n.length>0&&(this._groupModule.updateNextMessageSeq(n),this._groupModule.getModule(Ff).onNewMessage({conversationOptionsList:n,isInstantMessage:e.isInstantMessage||!0,updateUnreadCount:e.updateUnreadCount||!0}));var o=this._groupModule.filterUnmodifiedMessage(r);o.length>0&&this._groupModule.emitOuterEvent(yi.MESSAGE_RECEIVED,o),r.length=0}},{key:"_newGroupMessageStoredAndSummary",value:function(e){var t=this,n=e.dataList,r=e.event,i=e.isInstantMessage,o=null,a=[],s=[],c=[],u={},l=this._groupModule.getModule(Kf),d=n.length;d>1&&n.sort((function(e,t){return e.sequence-t.sequence}));for(var p=function(e){var d=gd(n[e]),p=d.groupProfile,f=p.groupID,h=p.communityType,g=void 0===h?0:h,v=p.topicID,m=void 0===v?void 0:v,_=p.invisible,y=void 0,b=t._groupModule.isMessageFromTopic(g,m);if(b){y=bi.CONV_TOPIC,d.to=m;var I=t._groupModule.getModule(Vf);I.hasLocalTopic(f,m)||t._getTopicPendingMap.has(m)||(t._getTopicPendingMap.set(m,1),I.getTopicList({groupID:f,topicIDList:[m]}).finally((function(){t._getTopicPendingMap.delete(m)})))}var T=t._groupModule.hasLocalGroup(f);if(!T&&t._groupModule.isUnjoinedAVChatRoom(f))return"continue";if(!T&&!b)return t._cacheGroupMessageAndProbe({groupID:f,event:r,item:d}),"continue";if(t._groupModule.isMessageFromOrToAVChatroom(f))return d.event=r,c.push(d),"continue";if(d.currentUser=t._groupModule.getMyUserID(),d.conversationType=bi.CONV_GROUP,d.isSystemMessage=!!d.isSystemMessage,o=new uI(d),d.elements=l.parseElements(d.elements,d.from),o.setElement(d.elements),1===_)return t._qualityStat(i,o),"continue";var C=1===n[e].isModified,S=t._groupModule.getModule(Ff);if(S.isMessageSentByCurrentInstance(o)?o.isModified=C:C=!1,1===d.onlineOnlyFlag)o._onlineOnlyFlag=!0,S.isMessageSentByCurrentInstance(o)||s.push(o);else{if(t._groupModule.isMessageFromCommunityOfTopic(g,m))return s.push(o),"continue";if(!S.pushIntoMessageList(s,o,C))return"continue";t._qualityStat(i,o);var E=o,M=E.conversationID,k=E.sequence,w=S.isRemoteRead({conversationID:M,sequence:k});if(Zl(u[M])){var O=0;"in"===o.flow&&(o._isExcludedFromUnreadCount||w||(O=1)),u[M]=a.push({conversationID:M,unreadCount:O,type:Zl(y)?o.conversationType:y,subType:o.conversationSubType,lastMessage:o._isExcludedFromLastMessage?"":o})-1}else{var D=u[M];a[D].type=Zl(y)?o.conversationType:y,a[D].subType=o.conversationSubType,a[D].lastMessage=o._isExcludedFromLastMessage?"":o,"in"===o.flow&&(o._isExcludedFromUnreadCount||w||a[D].unreadCount++)}}},f=0;f<d;f++)p(f);return{conversationOptionsList:a,messageList:s,AVChatRoomMessageList:c}}},{key:"_qualityStat",value:function(e,t){var n=this._groupModule.getModule(nh);n.addMessageSequence({key:Qm,message:t}),e&&t.clientTime>0&&n.addMessageDelay(t.clientTime)}},{key:"onGroupMessageRevoked",value:function(e){var t=this._groupModule.getModule(Ff),n=[],r=null,i=!0;e.dataList.forEach((function(e){var o=e.elements.revokedInfos;Zl(o)||o.forEach((function(e){var o=Bd(e.topicID)?"GROUP".concat(e.groupID):"GROUP".concat(e.topicID);r=t.revoke(o,e.sequence,e.random);var a=e.revokerInfo&&e.revokerInfo.revoker;if(r)r.revoker=a,n.push(r);else{var s={conversationID:o,to:e.topicID||"",sequence:e.sequence,time:e.time,revoker:a};t.isLastMessageRevoked(s)&&(n.push(s),i=!1)}}))})),0!==n.length&&(t.onMessageRevoked(n),!0===i&&(Ll.l("".concat(this._n,".onGroupMessageRevoked count:").concat(n.length)),this._groupModule.emitOuterEvent(yi.MESSAGE_REVOKED,n)))}},{key:"_groupListTreeShaking",value:function(e){for(var t=new Map(y(this._groupModule.getGroupMap())),n=0,r=e.length;n<r;n++)t.delete(e[n].groupID);this._groupModule.hasJoinedAVChatRoom()&&this._groupModule.getJoinedAVChatRoom().forEach((function(e){t.delete(e)})),this._groupModule.getGroupMap().forEach((function(e,n){e.isSupportTopic&&t.delete(n)}));for(var i=y(t.keys()),o=0,a=i.length;o<a;o++)this._groupModule.deleteGroup(i[o])}},{key:"getGroupList",value:function(e){var t=this,n="".concat(this._n,".").concat("getGroupList"),r=new a_("getGroupList");Ll.l("".concat(n));var i={introduction:"Introduction",notification:"Notification",createTime:"CreateTime",ownerID:"Owner_Account",lastInfoTime:"LastInfoTime",memberNum:"MemberNum",maxMemberNum:"MaxMemberNum",joinOption:"ApplyJoinOption",muteAllMembers:"ShutUpAllMember"},o=["Type","Name","FaceUrl","NextMsgSeq","LastMsgTime","AtInfoList","LastRecallTime"],a=[];e&&e.groupProfileFilter&&e.groupProfileFilter.forEach((function(e){i[e]&&o.push(i[e])}));var s=(e||{}).isGroupWithTopicOnly,c=void 0!==s&&s;return this._pagingGetGroupList({limit:50,offset:0,groupBaseInfoFilter:o,groupList:a,isGroupWithTopicOnly:c}).then((function(){Ll.l("".concat(n," ok. count:").concat(a.length," isGroupWithTopicOnly:").concat(c)),c||t._groupListTreeShaking(a),t._groupModule.updateGroupMap(a);var e=t._groupModule.getLocalGroupList().length;r.setNetworkType(t._groupModule.getNetworkType()).setMessage("remote count:".concat(a.length,", after tree shaking, local count:").concat(e,", isGroupWithTopicOnly:").concat(c)).end(),t.tempConversationList&&(t.handleUpdateGroupLastMessage(t.tempConversationList),t.tempConversationList=null),t._groupModule.patchGroupMessageRemindType(),t._groupModule.recomputeUnreadCount(),t._groupModule.emitGroupListUpdate(!0,!c);var i=t._groupModule.getLocalGroupList();if(c){var o=i.filter((function(e){return!0===e.isSupportTopic}));return lI({groupList:o})}return t._isPagingGetCompleted=!0,lI({groupList:i})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=_(t,2),i=n[0],o=n[1];r.setError(e,i,o).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"isPagingGetCompleted",value:function(){return this._isPagingGetCompleted}},{key:"_pagingGetGroupList",value:function(e){var t=this,n="".concat(this._n,".").concat("_pagingGetGroupList"),r=e.isCommunityRelay,i=void 0!==r&&r,o=e.isGroupWithTopicOnly,a=void 0!==o&&o,s=e.limit,c=e.offset,u=e.groupBaseInfoFilter,l=e.groupList;if(a)return this._pagingGetGroupListWithTopic({limit:s,offset:c,groupBaseInfoFilter:u,groupList:l});var d=new a_("_pagingGetGroupList");return this._groupModule.request({protocolName:Wh,requestData:{type:i?bi.GRP_COMMUNITY:void 0,memberAccount:this._groupModule.getMyUserID(),limit:s,offset:c,responseFilter:{groupBaseInfoFilter:u,selfInfoFilter:["Role","JoinTime","MsgFlag","MsgSeq"]}}}).then((function(e){var r=e.data,o=r.groups,a=void 0===o?[]:o,p=r.totalCount;l.push.apply(l,y(a)),t._handleGroupAtInfoWithoutTopic(i,a);var f=c+s,h=!(p>f),g="offset:".concat(c," totalCount:").concat(p," isCompleted:").concat(h," ")+"currentCount:".concat(l.length," isCommunityRelay:").concat(i);return d.setNetworkType(t._groupModule.getNetworkType()).setMessage("".concat(g)).end(),i||h?!i&&h?(Ll.l("".concat(n," start to get community list")),c=0,t._pagingGetGroupList({limit:s,offset:c,groupBaseInfoFilter:u,groupList:l,isCommunityRelay:!0})):i&&!h?(c=f,t._pagingGetGroupList({limit:s,offset:c,groupBaseInfoFilter:u,groupList:l,isCommunityRelay:!0})):(Ll.l("".concat(n," ok. totalCount:").concat(l.length)),lI({groupList:l})):(c=f,t._pagingGetGroupList({limit:s,offset:c,groupBaseInfoFilter:u,groupList:l}))})).catch((function(e){return 11e3!==e.code&&t._groupModule.probeNetwork().then((function(t){var n=_(t,2),r=n[0],o=n[1];d.setMessage("isCommunityRelay:".concat(i)).setError(e,r,o).end()})),i?(11e3===e.code&&(d=null,Ll.l("".concat(n," ok. community unavailable"))),hI({groupList:l})):gI(e)}))}},{key:"_pagingGetGroupListWithTopic",value:function(e){var t=this,n="".concat(this._n,"._pagingGetGroupListWithTopic"),r=e.limit,i=e.offset,o=e.groupBaseInfoFilter,a=e.groupList,s=new a_("pagingGetGroupListWithTopic");return this._groupModule.request({protocolName:Wh,requestData:{type:bi.GRP_COMMUNITY,memberAccount:this._groupModule.getMyUserID(),limit:r,offset:i,responseFilter:{groupBaseInfoFilter:o,selfInfoFilter:["Role","JoinTime","MsgFlag","MsgSeq"]},isSupportTopic:1}}).then((function(e){var c=e.data,u=c.groups,l=void 0===u?[]:u,d=c.totalCount;a.push.apply(a,y(l));var p=i+r,f=!(d>p),h="offset:".concat(i," totalCount:").concat(d," isCompleted:").concat(f," ")+"currentCount:".concat(a.length);return s.setNetworkType(t._groupModule.getNetworkType()).setMessage("".concat(h)).end(),f?(Ll.l("".concat(n," ok. totalCount:").concat(a.length)),lI({groupList:a})):(i=p,t._pagingGetGroupListWithTopic({limit:r,offset:i,groupBaseInfoFilter:o,groupList:a}))})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];s.setError(e,r,i).end()})),gI(e)}))}},{key:"_cacheGroupMessage",value:function(e,t){this._cachedGroupMessageMap.has(e)||this._cachedGroupMessageMap.set(e,[]),this._cachedGroupMessageMap.get(e).push(t)}},{key:"_deleteCachedGroupMessage",value:function(e){this._cachedGroupMessageMap.has(e)&&this._cachedGroupMessageMap.delete(e)}},{key:"_notifyCachedGroupMessage",value:function(e){var t=this,n=this._cachedGroupMessageMap.get(e)||[];n.forEach((function(e){t.onNewGroupMessage(e)})),this._deleteCachedGroupMessage(e),Ll.l("".concat(this._n,"._notifyCachedGroupMessage groupID:").concat(e," count:").concat(n.length))}},{key:"_cacheGroupMessageAndProbe",value:function(e){var t=this,n=e.groupID,r=e.event,i=e.item;this._cacheGroupMessage(n,{event:r,dataList:[i]}),this._groupModule.getGroupSimplifiedInfo(n).then((function(e){e.type===bi.GRP_AVCHATROOM?t._groupModule.hasLocalGroup(n)?t._notifyCachedGroupMessage(n):t._groupModule.setUnjoinedAVChatRoom(n):(t._groupModule.updateGroupMap([e]),t._notifyCachedGroupMessage(n))})),this._checkCountMap.has(n)||this._checkCountMap.set(n,0),Ll.l("".concat(this._n,"._cacheGroupMessageAndProbe groupID:").concat(n))}},{key:"_handleGroupAtInfoWithoutTopic",value:function(e,t){var r=this;e&&0!==t.length&&t.forEach((function(e){var t=e.groupID,i=e.groupAtInfoList,o=[];Zl(i)||(i.forEach((function(e){o.push(n(n({},e),{},{groupID:t}))})),r._groupModule.getModule(Ff).onNewGroupAtTips({dataList:o}))}))}},{key:"reset",value:function(){this._cachedGroupMessageMap.clear(),this._checkCountMap.clear(),this._getTopicPendingMap.clear(),this._isPagingGetCompleted=!1,this._groupModule.getInnerEmitterInstance().once(RI,this._initGroupList,this)}}]),e}(),iT=1,oT=2,aT=3,sT=4,cT=5,uT=function(){function e(t){i(this,e),this._groupModule=t,this._n="GroupAttributesHandler",this._groupAttributesMap=new Map,this.CACHE_EXPIRE_TIME=3e4,this._groupModule.getInnerEmitterInstance().on(xI,this._onCloudConfigUpdated,this)}return a(e,[{key:"_onCloudConfigUpdated",value:function(){var e=this._groupModule.getCloudConfig("grp_attr_cache_time");Zl(e)||(this.CACHE_EXPIRE_TIME=Number(e))}},{key:"updateLocalMainSequenceOnReconnected",value:function(){this._groupAttributesMap.forEach((function(e){e.localMainSequence=0}))}},{key:"isGroupAttributesUpdatedNotice",value:function(e){var t=e.to,n=e.elements.newGroupProfile,r=!Zl(n)&&!Bd(n.groupAttributeOption);return r&&this._onGroupAttributesUpdated({groupID:t,groupAttributeOption:n.groupAttributeOption}),r}},{key:"_onGroupAttributesUpdated",value:function(e){var t=this,n=e.groupID,r=e.groupAttributeOption,i=r.mainSequence,o=r.isWithChangedAttributeInfo,a=r.groupAttributeList,s=void 0===a?[]:a,c=r.operationType;if(Ll.l("".concat(this._n,".onGroupAttributesUpdated. ")+"groupID:".concat(n," isWithChangedAttributeInfo:").concat(o," operationType:").concat(c)),!Zl(c)){if(1===o)return this._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:i,groupAttributeList:s,operationType:c}),void this._emitGroupAttributesUpdated(n);if(this._hasLocalGroupAttributes(n)){var u=this._getLocalGroupAttributes(n).avChatRoomKey;this._getGroupAttributes({groupID:n,avChatRoomKey:u}).then((function(){t._emitGroupAttributesUpdated(n)}))}}}},{key:"initGroupAttributesCache",value:function(e){var t=e.groupID,n=e.avChatRoomKey,r=void 0===n?void 0:n;this._groupAttributesMap.set(t,{lastUpdateTime:0,localMainSequence:0,remoteMainSequence:0,attributes:new Map,avChatRoomKey:r}),Ll.l("".concat(this._n,".initGroupAttributesCache groupID:").concat(t," avChatRoomKey:").concat(r))}},{key:"initGroupAttributes",value:function(e){var t=this,n=e.groupID,r=e.groupAttributes,i=this._getLocalGroupAttributes(n),o=i.remoteMainSequence,a=i.avChatRoomKey,s=new a_("initGroupAttributes");return s.setMessage("groupID:".concat(n," avChatRoomKey:").concat(a," mainSequence:").concat(o)),this._groupModule.request({protocolName:bg,requestData:{groupID:n,avChatRoomKey:a,mainSequence:o,groupAttributeList:this._transformGroupAttributes(r)}}).then((function(e){var i=e.data,o=i.mainSequence,a=y(i.groupAttributeList);return a.forEach((function(e){e.value=r[e.key]})),t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:o,groupAttributeList:a,operationType:iT}),s.setNetworkType(t._groupModule.getNetworkType()).end(),Ll.l("".concat(t._n,".").concat("initGroupAttributes"," ok. groupID:").concat(n)),lI({groupAttributes:r})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];s.setError(e,r,i).end()})),gI(e)}))}},{key:"setGroupAttributes",value:function(e){var t=this,n="".concat(this._n,".").concat("setGroupAttributes"),r=e.groupID,i=e.groupAttributes,o=this._getLocalGroupAttributes(r),a=o.remoteMainSequence,s=o.avChatRoomKey,c=o.attributes,u=this._transformGroupAttributes(i);u.forEach((function(e){var t=e.key;e.sequence=0,c.has(t)&&(e.sequence=c.get(t).sequence)}));var l=new a_("setGroupAttributes");return l.setMessage("groupID:".concat(r," groupAttributes:").concat(JSON.stringify(i))),Ll.l("".concat(n,". groupID:").concat(r," mainSequence:").concat(a)),this._groupModule.request({protocolName:Ig,requestData:{groupID:r,avChatRoomKey:s,mainSequence:a,groupAttributeList:u}}).then((function(e){var o=e.data,a=o.mainSequence,s=y(o.groupAttributeList);return s.forEach((function(e){e.value=i[e.key]})),t._refreshCachedGroupAttributes({groupID:r,remoteMainSequence:a,groupAttributeList:s,operationType:oT}),l.setNetworkType(t._groupModule.getNetworkType()).end(),Ll.l("".concat(n," ok.")),lI({groupAttributes:i})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];l.setError(e,r,i).end()})),gI(e)}))}},{key:"deleteGroupAttributes",value:function(e){var t=this,n=e.groupID,r=e.keyList,i=void 0===r?[]:r,o=this._getLocalGroupAttributes(n),a=o.remoteMainSequence,s=o.avChatRoomKey,c=o.attributes,u=y(c.keys()),l=Cg,d=aT,p={groupID:n,avChatRoomKey:s,mainSequence:a},f=[];i.length>0&&(u=[],l=Tg,d=sT,i.forEach((function(e){var t=0;c.has(e)&&(t=c.get(e).sequence,u.push(e)),f.push({key:e,sequence:t})})),p.groupAttributeList=f);var h=new a_("deleteGroupAttributes");return h.setMessage("groupID:".concat(n," mainSequence:").concat(a," keyList:").concat(i," protocolName:").concat(l)),this._groupModule.request({protocolName:l,requestData:p}).then((function(e){var r=e.data.mainSequence;return t._refreshCachedGroupAttributes({groupID:n,remoteMainSequence:r,groupAttributeList:f,operationType:d}),h.setNetworkType(t._groupModule.getNetworkType()).end(),Ll.l("".concat(t._n,".").concat("deleteGroupAttributes"," ok. groupID:").concat(n)),lI({keyList:u})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];h.setError(e,r,i).end()})),gI(e)}))}},{key:"getGroupAttributes",value:function(e){var t=this,n="".concat(this._n,".").concat("getGroupAttributes"),r=e.groupID,i=this._getLocalGroupAttributes(r),o=i.avChatRoomKey,a=i.lastUpdateTime,s=i.localMainSequence,c=i.remoteMainSequence,u=new a_("getGroupAttributes");if(u.setMessage("groupID:".concat(r," localMainSequence:").concat(s," remoteMainSequence:").concat(c," keyList:").concat(e.keyList)),Date.now()-a>=this.CACHE_EXPIRE_TIME||s<c)return this._getGroupAttributes({groupID:r,avChatRoomKey:o}).then((function(i){u.setMoreMessage("get attributes from remote. count:".concat(i.length)).setNetworkType(t._groupModule.getNetworkType()).end(),Ll.l("".concat(n," from remote. groupID:").concat(r));var o=t._getCachedAttributes(e);return lI({groupAttributes:o})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];u.setError(e,r,i).end()})),gI(e)}));u.setMoreMessage("get attributes from cache").setNetworkType(this._groupModule.getNetworkType()).end(),Ll.l("".concat(n," from cache. groupID:").concat(r));var l=this._getCachedAttributes(e);return hI({groupAttributes:l})}},{key:"_getGroupAttributes",value:function(e){var t=this,r=0;return Zl(e.avChatRoomKey)||(r=1),this._groupModule.request({protocolName:Sg,requestData:n(n({},e),{},{groupType:r})}).then((function(n){var r=n.data,i=r.mainSequence,o=r.groupAttributeList,a=y(o);return Zl(i)||t._refreshCachedGroupAttributes({groupID:e.groupID,remoteMainSequence:i,groupAttributeList:a,operationType:cT}),Ll.l("".concat(t._n,"._getGroupAttributes ok. groupID:").concat(e.groupID)),o})).catch((function(e){return gI(e)}))}},{key:"_refreshCachedGroupAttributes",value:function(e){var t=e.groupID,n=e.remoteMainSequence,r=e.groupAttributeList,i=e.operationType;if(this._hasLocalGroupAttributes(t)){var o=this._getLocalGroupAttributes(t),a=o.localMainSequence;if(i===cT||n-a==1)o.remoteMainSequence=n,o.localMainSequence=n,o.lastUpdateTime=Date.now(),this._updateCachedAttributes({groupAttributes:o,groupAttributeList:r,operationType:i});else{if(a===n)return;o.remoteMainSequence=n}this._groupAttributesMap.set(t,o);var s="operationType:".concat(i," localMainSequence:").concat(a," remoteMainSequence:").concat(n);Ll.l("".concat(this._n,"._refreshCachedGroupAttributes. ").concat(s))}}},{key:"_getCachedAttributes",value:function(e){var t=e.groupID,n=e.keyList,r=void 0===n?[]:n,i={};if(this._hasLocalGroupAttributes(t)){var o=this._getLocalGroupAttributes(t).attributes;if(r.length>0)r.forEach((function(e){o.has(e)&&(i[e]=o.get(e).value)}));else{var a,s=E(o.keys());try{for(s.s();!(a=s.n()).done;){var c=a.value;i[c]=o.get(c).value}}catch(l){s.e(l)}finally{s.f()}}}return i}},{key:"_updateCachedAttributes",value:function(e){var t=e.groupAttributes,n=e.groupAttributeList,r=e.operationType;r!==aT?r!==sT?(r===iT&&t.attributes.clear(),n.forEach((function(e){var n=e.key,r=e.value,i=e.sequence;t.attributes.set(n,{value:r,sequence:i})}))):n.forEach((function(e){t.attributes.delete(e.key)})):t.attributes.clear()}},{key:"_hasLocalGroupAttributes",value:function(e){return this._groupAttributesMap.has(e)}},{key:"_getLocalGroupAttributes",value:function(e){return this._hasLocalGroupAttributes(e)||this.initGroupAttributesCache({groupID:e}),this._groupAttributesMap.get(e)}},{key:"_transformGroupAttributes",value:function(e){var t=[];return Object.keys(e).forEach((function(n){t.push({key:n,value:e[n]})})),t}},{key:"_emitGroupAttributesUpdated",value:function(e){var t=this._getCachedAttributes({groupID:e});this._groupModule.emitOuterEvent(yi.GROUP_ATTRIBUTES_UPDATED,{groupID:e,groupAttributes:t})}},{key:"deleteLocalGroupAttributes",value:function(e){this._hasLocalGroupAttributes(e)&&this._groupAttributesMap.delete(e)}},{key:"reset",value:function(){this._groupAttributesMap.clear(),this.CACHE_EXPIRE_TIME=3e4}}]),e}(),lT="Set",dT="Increase",pT="Decrease",fT=function(){function e(t){i(this,e),this._groupModule=t,this._n="GroupCountersHandler",this._groupCountersMap=new Map,this.EXPIRE_TIME=3e4,this._groupModule.getInnerEmitterInstance().on(xI,this._onCloudConfigUpdated,this)}return a(e,[{key:"_onCloudConfigUpdated",value:function(){var e=this._groupModule.getCloudConfig("grp_counter_expire_time");Zl(e)||(this.EXPIRE_TIME=Number(e))}},{key:"isGroupCountersNotice",value:function(e){var t=e.to,n=e.elements.groupCounterInfo,r=!1;return Bd(n)||(this._onGroupCountersUpdated({groupID:t,groupCounterInfo:n}),r=!0),r}},{key:"_onGroupCountersUpdated",value:function(e){var t=this,n=e.groupID;e.groupCounterInfo.forEach((function(e){var r=e.type,i=e.groupCounterSeq,o=e.counterList,a=void 0===o?[]:o;0!==r&&2!==r||(t._updateLocalGroupCounters({groupID:n,groupCounterSeq:i,counterList:a}),a.forEach((function(e){t._groupModule.emitOuterEvent(yi.GROUP_COUNTER_UPDATED,{groupID:n,key:e.key,value:e.value})}))),1===r&&t._deleteLocalGroupCounters({groupID:n,groupCounterSeq:i,counterList:a})})),Ll.l("".concat(this._n,"._onGroupCountersUpdated groupID:").concat(n))}},{key:"initGroupCountersCache",value:function(e){var t=e.groupID,n=e.avChatRoomKey;this._groupCountersMap.set(t,{lastUpdateTime:0,groupCounterSeq:0,counters:new Map,avChatRoomKey:n}),Ll.l("".concat(this._n,".initGroupCountersCache groupID:").concat(t," avChatRoomKey:").concat(n))}},{key:"setGroupCounters",value:function(e){var t=this;if(!this._groupModule.canIUse(Nu.GRP_COUNTER))return gI({code:Vm});var n="".concat(this._n,".setGroupCounters"),r=e.groupID,i=e.counters,o=this._convertObjectToList(i),a=this._getLocalGroupCounters(r).avChatRoomKey,s="groupID:".concat(r," count:").concat(o.length),c=new a_("setGroupCounters");return c.setMessage("".concat(s)),Ll.l("".concat(n,". ").concat(s)),this._updateGroupCounters({groupID:r,counterList:o,avChatRoomKey:a,mode:lT}).then((function(e){return c.end(),Ll.l("".concat(n," ok.")),lI({counters:e})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];c.setError(e,r,i).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"increaseGroupCounter",value:function(e){var t=this;if(!this._groupModule.canIUse(Nu.GRP_COUNTER))return gI({code:Vm});var n="".concat(this._n,".increaseGroupCounters"),r=e.groupID,i=e.key,o=e.value,a=this._getLocalGroupCounters(r).avChatRoomKey,s="groupID:".concat(r," key:").concat(i," value:").concat(o),c=new a_("increaseGroupCounter");c.setMessage("".concat(s)),Ll.l("".concat(n,". ").concat(s));var u=[{key:i,value:o}];return this._updateGroupCounters({groupID:r,counterList:u,avChatRoomKey:a,mode:dT}).then((function(e){return c.end(),Ll.l("".concat(n," ok.")),lI({counters:e})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];c.setError(e,r,i).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"decreaseGroupCounter",value:function(e){var t=this;if(!this._groupModule.canIUse(Nu.GRP_COUNTER))return gI({code:Vm});var n="".concat(this._n,".decreaseGroupCounter"),r=e.groupID,i=e.key,o=e.value,a=this._getLocalGroupCounters(r).avChatRoomKey,s="groupID:".concat(r," key:").concat(i," value:").concat(o),c=new a_("decreaseGroupCounter");c.setMessage("".concat(s)),Ll.l("".concat(n,". ").concat(s));var u=[{key:i,value:o}];return this._updateGroupCounters({groupID:r,counterList:u,avChatRoomKey:a,mode:pT}).then((function(e){return c.end(),Ll.l("".concat(n," ok.")),lI({counters:e})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];c.setError(e,r,i).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"getGroupCounters",value:function(e){var t=this;if(!this._groupModule.canIUse(Nu.GRP_COUNTER))return gI({code:Vm});var n="".concat(this._n,".getGroupCounters"),r=e.groupID,i=e.keyList,o=void 0===i?[]:i,a=this._getLocalGroupCounters(r),s=a.avChatRoomKey,c=a.lastUpdateTime,u=new a_("getGroupCounters");if(u.setMessage("groupID:".concat(r)),Date.now()-c>=this.EXPIRE_TIME)return this._getRemoteGroupCounters({groupID:r,avChatRoomKey:s}).then((function(e){u.setMoreMessage("from remote. count:".concat(e.length)).end(),Ll.l("".concat(n," from remote. groupID:").concat(r));var i=t._getLocalCounters(r,o);return lI({counters:i})})).catch((function(e){return t._groupModule.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];u.setError(e,r,i).end()})),gI(e)}));u.setMoreMessage("from cache").end(),Ll.l("".concat(n," from cache. groupID:").concat(r));var l=this._getLocalCounters(r,o);return hI({counters:l})}},{key:"_getRemoteGroupCounters",value:function(e){var t=this;return this._groupModule.request({protocolName:Og,requestData:n({},e)}).then((function(n){var r=n.data,i=r.counterList,o=void 0===i?[]:i,a=r.groupCounterSeq;return t._updateLocalGroupCounters({groupID:e.groupID,counterList:o,groupCounterSeq:a}),Ll.l("".concat(t._n,"._getRemoteGroupCounters ok. groupID:").concat(e.groupID)),o})).catch((function(e){return gI(e)}))}},{key:"_convertObjectToList",value:function(e){var t=[];return Object.keys(e).forEach((function(n){t.push({key:n,value:e[n]})})),t}},{key:"_updateGroupCounters",value:function(e){var t="".concat(this._n,"._updateGroupCounters"),r=e.groupID,i=e.avChatRoomKey,o=e.mode;return Ll.l("".concat(t,". groupID:").concat(r," avChatRoomKey:").concat(i," mode:").concat(o)),this._groupModule.request({protocolName:wg,requestData:n({},e)}).then((function(e){Ll.l("".concat(t," ok."));var n=e.data.counterList,r={};return(void 0===n?[]:n).forEach((function(e){var t=e.key,n=e.value;r[t]=n})),r})).catch((function(e){return gI(e)}))}},{key:"_hasLocalGroupCounters",value:function(e){return this._groupCountersMap.has(e)}},{key:"_getLocalGroupCounters",value:function(e){return this._hasLocalGroupCounters(e)||this.initGroupCountersCache({groupID:e}),this._groupCountersMap.get(e)}},{key:"_updateLocalGroupCounters",value:function(e){var t=e.groupID,n=e.counterList,r=void 0===n?[]:n,i=e.groupCounterSeq;if(this._hasLocalGroupCounters(t)){var o=this._getLocalGroupCounters(t),a=o.counters,s=o.avChatRoomKey,c=o.groupCounterSeq;if(i>0&&i<c)return;r.forEach((function(e){var t=e.key,n=e.value;a.set(t,n)})),this._groupCountersMap.set(t,{lastUpdateTime:Date.now(),groupCounterSeq:i,counters:a,avChatRoomKey:s})}}},{key:"_deleteLocalGroupCounters",value:function(e){var t=e.groupID,n=e.counterList,r=void 0===n?[]:n,i=e.groupCounterSeq;if(this._hasLocalGroupCounters(t)){var o=this._getLocalGroupCounters(t),a=o.counters,s=o.avChatRoomKey;r.forEach((function(e){a.delete(e.key)})),this._groupCountersMap.set(t,{lastUpdateTime:Date.now(),groupCounterSeq:i,counters:a,avChatRoomKey:s})}}},{key:"_getLocalCounters",value:function(e,t){var n={};if(!this._hasLocalGroupCounters(e))return n;var r=this._getLocalGroupCounters(e).counters;if(t.length>0)t.forEach((function(e){r.has(e)&&(n[e]=r.get(e))}));else{var i,o=E(r.keys());try{for(o.s();!(i=o.n()).done;){var a=i.value;n[a]=r.get(a)}}catch(c){o.e(c)}finally{o.f()}}return n}},{key:"reset",value:function(){this._groupCountersMap.clear(),this.EXPIRE_TIME=3e4}}]),e}(),hT=function(){function e(t){i(this,e);var n=t.manager,r=t.groupID,o=t.onInit,a=t.onSuccess,s=t.onFail;this._n="Polling",this._manager=n,this._groupModule=n._groupModule,this._onInit=o,this._onSuccess=a,this._onFail=s,this._groupID=r,this._timeoutID=-1,this._isRunning=!1,this._protocolName=gg}return a(e,[{key:"start",value:function(){var e=this._groupModule.isLoggedIn();e||(this._protocolName=vg),Ll.l("".concat(this._n,".start pollingInterval:").concat(this._manager.getPollingInterval()," isLoggedIn:").concat(e)),this._isRunning=!0,this._request()}},{key:"isRunning",value:function(){return this._isRunning}},{key:"_request",value:function(){var e=this,t=this._onInit(this._groupID);this._groupModule.request({protocolName:this._protocolName,requestData:t}).then((function(t){e._onSuccess(e._groupID,t),e.isRunning()&&(clearTimeout(e._timeoutID),e._timeoutID=setTimeout(e._request.bind(e),e._manager.getPollingInterval()))})).catch((function(t){e._onFail(e._groupID,t),e.isRunning()&&(clearTimeout(e._timeoutID),e._timeoutID=setTimeout(e._request.bind(e),e._manager.MAX_POLLING_INTERVAL))}))}},{key:"stop",value:function(){Ll.l("".concat(this._n,".stop")),this._timeoutID>0&&(clearTimeout(this._timeoutID),this._timeoutID=-1),this._isRunning=!1}}]),e}(),gT={3:!0,4:!0,5:!0,6:!0,17:!0},vT=function(){function e(t){i(this,e),this._groupModule=t,this._n="AVChatRoomHandler",this._joinedGroupMap=new Map,this._pollingRequestInfoMap=new Map,this._pollingInstanceMap=new Map,this.sequencesLinkedList=new HI(200),this.messageIDLinkedList=new HI(100),this.receivedMessageCount=0,this._reportMessageStackedCount=0,this._onlineMemberCountMap=new Map,this.DEFAULT_EXPIRE_TIME=60,this.DEFAULT_POLLING_INTERVAL=300,this.MAX_POLLING_INTERVAL=2e3,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL,this.DEFAULT_POLLING_NO_MESSAGE_COUNT=20,this.DEFAULT_POLLING_INTERVAL_PLUS=2e3,this._pollingNoMessageCount=0,this._startBroadcastSeq=1,this._broadcastMessageIDMap=new Map}return a(e,[{key:"hasJoinedAVChatRoom",value:function(){return this._joinedGroupMap.size>0}},{key:"checkJoinedAVChatRoomByID",value:function(e){return this._joinedGroupMap.has(e)}},{key:"getJoinedAVChatRoom",value:function(){return this._joinedGroupMap.size>0?y(this._joinedGroupMap.keys()):null}},{key:"_updateRequestData",value:function(e){var t=this._pollingRequestInfoMap.get(e);return e===y(this._pollingInstanceMap.keys())[0]?n(n({},t),{},{startBroadcastSeq:this._startBroadcastSeq}):n({},t)}},{key:"_handleSuccess",value:function(e,t){var n=t.data,r=n.key,i=n.nextSeq,o=n.rspMsgList,a=n.errorCode,s=n.nextBroadcastSeq,c=n.broadcastMessageList;if(0!==a){var u=this._pollingRequestInfoMap.get(e),l=new a_("longPollingAVError"),d=u?"".concat(u.key,"-").concat(u.startSeq):"requestInfo is undefined";l.setMessage("".concat(e,"-").concat(d,"-").concat(t.errorInfo)).setCode(t.errorCode).setNetworkType(this._groupModule.getNetworkType()).end(!0)}else{if(!this.checkJoinedAVChatRoomByID(e))return;Yl(r)&&Wl(i)&&this._pollingRequestInfoMap.set(e,{key:r,startSeq:i}),Wl(s)&&s>this._startBroadcastSeq&&(this._startBroadcastSeq=s),Xl(o)&&o.length>0?(o.forEach((function(e){e.to=e.groupID})),this.onMessage(o)):(this._pollingNoMessageCount+=1,this._pollingNoMessageCount===this.DEFAULT_POLLING_NO_MESSAGE_COUNT&&(this._pollingInterval=this.DEFAULT_POLLING_INTERVAL+this.DEFAULT_POLLING_INTERVAL_PLUS)),this._onBroadcastMessage(c)}}},{key:"_handleFailure",value:function(e,t){}},{key:"onMessage",value:function(e){if(Xl(e)&&0!==e.length){0!==this._pollingNoMessageCount&&(this._pollingNoMessageCount=0,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL);var t=null,n=[],r=this._getModule(Ff),i=this._getModule(nh),o=e.length;o>1&&e.sort((function(e,t){return e.sequence-t.sequence}));for(var a=this._getModule(Bf),s=0;s<o;s++)if(gT[e[s].event]){if(6===e[s].event){if(this._groupModule.isGroupAttributesUpdatedNotice(e[s]))continue;if(this._groupModule.isGroupCountersNotice(e[s]))continue}this.receivedMessageCount+=1,t=this.packMessage(e[s],e[s].event);var c=1===e[s].isModified,u=1===e[s].isHistoryMessage;if((a.isUnlimitedAVChatRoom()||!this.sequencesLinkedList.has(t.sequence))&&!this.messageIDLinkedList.has(t.ID)){var l=t.conversationID;if(this.receivedMessageCount%50==0?this._getModule(Zf).detectFirstRound(l,this.sequencesLinkedList.data()):this.receivedMessageCount%80==0&&this._getModule(Zf).detectSecondRound(l,this.sequencesLinkedList.data()),null!==this.sequencesLinkedList.tail()){var d=this.sequencesLinkedList.tail().value,p=t.sequence-d;p>1&&p<=20?this._getModule(Zf).onMessageMaybeLost(l,d+1,p-1):p<-1&&p>=-20&&this._getModule(Zf).onMessageMaybeLost(l,t.sequence+1,Math.abs(p)-1)}this.sequencesLinkedList.set(t.sequence),this.messageIDLinkedList.set(t.ID);var f=!1;if(this._isMessageSentByCurrentInstance(t)?c&&(f=!0,t.isModified=c,r.updateMessageIsModifiedProperty(t)):f=!0,f){if(t.conversationType===bi.CONV_SYSTEM&&5===t.payload.operationType&&this._onGroupDismissed(t.payload.groupProfile.groupID),!u&&t.conversationType!==bi.CONV_SYSTEM){var h=t.conversationID.replace(bi.CONV_GROUP,"");this._pollingInstanceMap.has(h)?this._groupModule.isLoggedIn()&&i.addMessageSequence({key:t_,message:t}):(t.type!==bi.MSG_GRP_TIP&&t.clientTime>0&&i.addMessageDelay(t.clientTime),i.addMessageSequence({key:e_,message:t}))}n.push(t)}}}else Ll.w("".concat(this._n,".onMessage unknown event:").concat(e[s].event));if(0!==n.length){this._groupModule.filterModifiedMessage(n);var g=this.packConversationOption(n);g.length>0&&this._getModule(Ff).onNewMessage({conversationOptionsList:g,isInstantMessage:!0}),Ll.d("".concat(this._n,".onMessage count:").concat(n.length)),this._checkMessageStacked(n);var v=this._groupModule.filterUnmodifiedMessage(n);v.length>0&&this._groupModule.emitOuterEvent(yi.MESSAGE_RECEIVED,v),n.length=0}}}},{key:"_onGroupDismissed",value:function(e){Ll.l("".concat(this._n,"._onGroupDismissed groupID:").concat(e)),this._groupModule.deleteLocalGroupAndConversation(e),this.reset(e)}},{key:"_checkMessageStacked",value:function(e){var t="MessageStacked",n=e.length;n>=100&&(this._groupModule.outputWarning(t),this._reportMessageStackedCount<5&&(new a_(t).setNetworkType(this._groupModule.getNetworkType()).setMessage("count:".concat(n," groupID:").concat(y(this._joinedGroupMap.keys()))).setLevel("warning").end(),this._reportMessageStackedCount+=1))}},{key:"_isMessageSentByCurrentInstance",value:function(e){return!!this._getModule(Ff).isMessageSentByCurrentInstance(e)}},{key:"packMessage",value:function(e,t){e.currentUser=this._groupModule.getMyUserID(),e.conversationType=5===t?bi.CONV_SYSTEM:bi.CONV_GROUP,e.isSystemMessage=!!e.isSystemMessage;var n=new uI(e),r=this.packElements(e,t);return n.setElement(r),n}},{key:"packElements",value:function(e,t){return 4===t||6===t?(this._updateMemberCountByGroupTips(e),{type:bi.MSG_GRP_TIP,content:n(n({},e.elements),{},{groupProfile:e.groupProfile})}):5===t?{type:bi.MSG_GRP_SYS_NOTICE,content:n(n({},e.elements),{},{groupProfile:n(n({},e.groupProfile),{},{groupID:e.groupID})})}:this._getModule(Kf).parseElements(e.elements,e.from)}},{key:"packConversationOption",value:function(e){for(var t=new Map,n=0;n<e.length;n++){var r=e[n],i=r.conversationID;if(t.has(i)){var o=t.get(i);o.lastMessage=r,"in"===r.flow&&o.unreadCount++}else t.set(i,{conversationID:r.conversationID,unreadCount:"out"===r.flow?0:1,type:r.conversationType,subType:r.conversationSubType,lastMessage:r})}return y(t.values())}},{key:"_updateMemberCountByGroupTips",value:function(e){var t=e.groupProfile.groupID,n=e.elements.onlineMemberInfo,r=void 0===n?void 0:n;if(!Bd(r)){var i=r.onlineMemberNum,o=void 0===i?0:i,a=r.expireTime,s=void 0===a?this.DEFAULT_EXPIRE_TIME:a,c=this._onlineMemberCountMap.get(t)||{},u=Date.now();Bd(c)?Object.assign(c,{lastReqTime:0,lastSyncTime:0,latestUpdateTime:u,memberCount:o,expireTime:s}):(c.latestUpdateTime=u,c.memberCount=o),Ll.d("".concat(this._n,"._updateMemberCountByGroupTips info:"),c),this._onlineMemberCountMap.set(t,c)}}},{key:"_onBroadcastMessage",value:function(e){if(!Bd(e)){for(var t=[],n=e.length,r=null,i=0;i<n;i++)gT[e[i].event]?((r=this.packMessage(e[i],e[i].event)).isBroadcastMessage=!0,this._broadcastMessageIDMap.has(r.ID)||(t.push(r),this._broadcastMessageIDMap.set(r.ID,1))):Ll.w("".concat(this._n,"._onBroadcastMessage unknown event:").concat(e[i].event));t.length>0&&this._groupModule.emitOuterEvent(yi.MESSAGE_RECEIVED,t)}}},{key:"start",value:function(e){if(this._pollingInstanceMap.has(e)){var t=this._pollingInstanceMap.get(e);t.isRunning()||t.start()}else{var n=new hT({manager:this,groupID:e,onInit:this._updateRequestData.bind(this),onSuccess:this._handleSuccess.bind(this),onFail:this._handleFailure.bind(this)});n.start(),this._pollingInstanceMap.set(e,n),Ll.l("".concat(this._n,".start groupID:").concat(e))}}},{key:"handleJoinResult",value:function(e){var t=this;return this._preCheck().then((function(){var n=e.longPollingKey,r=e.group,i=r.groupID;return t._joinedGroupMap.set(i,r),t._groupModule.updateGroupMap([r]),t._groupModule.deleteUnjoinedAVChatRoom(i),t._groupModule.emitGroupListUpdate(!0,!1),Zl(n)?hI({status:Vl,group:r}):Promise.resolve()}))}},{key:"startRunLoop",value:function(e){var t=this;return this.handleJoinResult(e).then((function(){var n=e.longPollingKey,r=e.group,i=e.startSeq,o=void 0===i?0:i,a=r.groupID;return t._pollingRequestInfoMap.set(a,{key:n,startSeq:o}),t.start(a),t._groupModule.isLoggedIn()?hI({status:Vl,group:r}):hI({status:Vl})}))}},{key:"_preCheck",value:function(){if(this._getModule(Bf).isUnlimitedAVChatRoom())return Promise.resolve();if(!this.hasJoinedAVChatRoom())return Promise.resolve();var e=_(this._joinedGroupMap.entries().next().value,2),t=e[0],n=e[1];if(this._groupModule.isLoggedIn()){if(n.selfInfo.role!==bi.GRP_MBR_ROLE_OWNER&&n.ownerID!==this._groupModule.getMyUserID())return this._groupModule.quitGroup(t);this._groupModule.deleteLocalGroupAndConversation(t)}else this._groupModule.deleteLocalGroupAndConversation(t);return this.reset(t),Promise.resolve()}},{key:"joinWithoutAuth",value:function(e){var t=this,n=e.groupID,r="".concat(this._n,".").concat("joinWithoutAuth"),i=new a_("joinWithoutAuth");return this._groupModule.request({protocolName:Qh,requestData:e}).then((function(e){var o=e.data.longPollingKey;if(t._groupModule.probeNetwork().then((function(e){var t=_(e,2),r=(t[0],t[1]);i.setNetworkType(r).setMessage("groupID:".concat(n," longPollingKey:").concat(o)).end(!0)})),Zl(o))return gI({code:fm});Ll.l("".concat(r," ok. groupID:").concat(n)),t._getModule(Ff).setCompleted("".concat(bi.CONV_GROUP).concat(n));var a=new KI({groupID:n});return t.startRunLoop({group:a,longPollingKey:o}),lI({status:Vl})})).catch((function(e){return Ll.e("".concat(r," failed. groupID:").concat(n," error:"),e),t._groupModule.probeNetwork().then((function(t){var r=_(t,2),o=r[0],a=r[1];i.setError(e,o,a).setMessage("groupID:".concat(n)).end(!0)})),gI(e)})).finally((function(){t._groupModule.getModule(Hf).reportAtOnce()}))}},{key:"getGroupOnlineMemberCount",value:function(e){var t=this._onlineMemberCountMap.get(e)||{},n=Date.now();return Bd(t)||n-t.lastSyncTime>1e3*t.expireTime&&n-t.latestUpdateTime>1e4&&n-t.lastReqTime>3e3?(t.lastReqTime=n,this._onlineMemberCountMap.set(e,t),this._getGroupOnlineMemberCount(e).then((function(e){return lI({memberCount:e.memberCount})})).catch((function(e){return gI(e)}))):hI({memberCount:t.memberCount})}},{key:"_getGroupOnlineMemberCount",value:function(e){var t=this,n="".concat(this._n,".").concat("_getGroupOnlineMemberCount");return this._groupModule.request({protocolName:mg,requestData:{groupID:e}}).then((function(r){var i=t._onlineMemberCountMap.get(e)||{},o=r.data,a=o.onlineMemberNum,s=void 0===a?0:a,c=o.expireTime,u=void 0===c?t.DEFAULT_EXPIRE_TIME:c;Ll.l("".concat(n," ok. groupID:").concat(e," memberCount:").concat(s," expireTime:").concat(u));var l=Date.now();return Bd(i)&&(i.lastReqTime=l),t._onlineMemberCountMap.set(e,Object.assign(i,{lastSyncTime:l,latestUpdateTime:l,memberCount:s,expireTime:u})),{memberCount:s}})).catch((function(r){return Ll.w("".concat(n," failed. error:"),r),new a_("_getGroupOnlineMemberCount").setCode(r.code).setMessage("groupID:".concat(e," error:").concat(JSON.stringify(r))).setNetworkType(t._groupModule.getNetworkType()).end(),Promise.reject(r)}))}},{key:"_getModule",value:function(e){return this._groupModule.getModule(e)}},{key:"setPollingInterval",value:function(e){Zl(e)||(Wl(e)?this._pollingInterval=this.DEFAULT_POLLING_INTERVAL=e:this._pollingInterval=this.DEFAULT_POLLING_INTERVAL=parseInt(e,10))}},{key:"setPollingIntervalPlus",value:function(e){Zl(e)||(Wl(e)?this.DEFAULT_POLLING_INTERVAL_PLUS=e:this.DEFAULT_POLLING_INTERVAL_PLUS=parseInt(e,10))}},{key:"setPollingNoMessageCount",value:function(e){Zl(e)||(Wl(e)?this.DEFAULT_POLLING_NO_MESSAGE_COUNT=e:this.DEFAULT_POLLING_NO_MESSAGE_COUNT=parseInt(e,10))}},{key:"getPollingInterval",value:function(){return this._pollingInterval}},{key:"onAVChatRoomMemberBanned",value:function(e){var t=e.payload.groupProfile.groupID;Ll.l("".concat(this._n,".onAVChatRoomMemberBanned groupID:").concat(t)),this._groupModule.deleteLocalGroupAndConversation(t),this.reset(t)}},{key:"restartPolling",value:function(){Ll.l("".concat(this._n,".restartPolling count:").concat(this._pollingInstanceMap.size));var e,t=E(this._pollingInstanceMap.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;n.stop(),n.start()}}catch(i){t.e(i)}finally{t.f()}}},{key:"reset",value:function(e){if(e){Ll.l("".concat(this._n,".reset groupID:").concat(e));var t=this._pollingInstanceMap.get(e);t&&t.stop(),this._pollingInstanceMap.delete(e),this._joinedGroupMap.delete(e),this._pollingRequestInfoMap.delete(e),this._onlineMemberCountMap.delete(e)}else{Ll.l("".concat(this._n,".reset all"));var n,r=E(this._pollingInstanceMap.values());try{for(r.s();!(n=r.n()).done;)n.value.stop()}catch(o){r.e(o)}finally{r.f()}this._pollingInstanceMap.clear(),this._joinedGroupMap.clear(),this._pollingRequestInfoMap.clear(),this._onlineMemberCountMap.clear(),this._broadcastMessageIDMap.clear()}this.sequencesLinkedList.reset(),this.messageIDLinkedList.reset(),this.receivedMessageCount=0,this._reportMessageStackedCount=0,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL=300,this.DEFAULT_POLLING_NO_MESSAGE_COUNT=20,this.DEFAULT_POLLING_INTERVAL_PLUS=2e3,this._pollingNoMessageCount=0}}]),e}(),mT=1,_T=15,yT=function(){function e(t){i(this,e),this._groupModule=t,this._n="GroupSystemNoticeHandler",this.pendencyMap=new Map}return a(e,[{key:"onNewGroupSystemNotice",value:function(e){var t=e.dataList,n=e.isSyncingEnded,r=e.isInstantMessage;Ll.d("".concat(this._n,".onReceiveSystemNotice count:").concat(t.length));var i=this.newSystemNoticeStoredAndSummary({notifiesList:t,isInstantMessage:r}),o=i.eventDataList,a=i.result;o.length>0&&(this._groupModule.getModule(Ff).onNewMessage({conversationOptionsList:o,isInstantMessage:r}),this._onReceivedGroupSystemNotice({result:a,isInstantMessage:r})),r?a.length>0&&this._groupModule.emitOuterEvent(yi.MESSAGE_RECEIVED,a):!0===n&&this._clearGroupSystemNotice()}},{key:"newSystemNoticeStoredAndSummary",value:function(e){var t=e.notifiesList,r=e.isInstantMessage,i=null,o=t.length,a=0,s=[],c={conversationID:bi.CONV_SYSTEM,unreadCount:0,type:bi.CONV_SYSTEM,subType:null,lastMessage:null};for(a=0;a<o;a++){var u=t[a],l=u.groupProfile,d=l.communityType,p=void 0===d?0:d,f=l.topicID,h=void 0===f?void 0:f,g=u.elements,v=g.topicIDList,m=void 0===v?void 0:v,_=g.operationType;if(!(2!==p||Bd(h)&&Bd(m))){if([17,18,20].includes(_)){this._handleTopicSystemNotice(u);continue}Bd(h)||(u.to=h)}u.elements.operationType!==_T&&(u.currentUser=this._groupModule.getMyUserID(),u.conversationType=bi.CONV_SYSTEM,u.conversationID=bi.CONV_SYSTEM,(i=new uI(u)).setElement({type:bi.MSG_GRP_SYS_NOTICE,content:n(n({},u.elements),{},{groupProfile:n({},u.groupProfile)})}),i.isSystemMessage=!0,(1===i.sequence&&1===i.random||2===i.sequence&&2===i.random)&&(i.sequence=ud(),i.random=ud(),i.generateMessageID(),Ll.l("".concat(this._n,".newSystemNoticeStoredAndSummary sequence and random maybe duplicated, regenerate. ID:").concat(i.ID))),this._groupModule.getModule(Ff).pushIntoNoticeResult(s,i)&&(r?c.unreadCount++:i.setIsRead(!0),c.subType=i.conversationSubType))}return c.lastMessage=s[s.length-1],{eventDataList:s.length>0?[c]:[],result:s}}},{key:"_clearGroupSystemNotice",value:function(){var e=this;this._getPendencyList().then((function(t){t.forEach((function(t){e.pendencyMap.set("".concat(t.from,"_").concat(t.groupID,"_").concat(t.to),t)}));var n=e._groupModule.getModule(Ff).getLocalMessageList(bi.CONV_SYSTEM),r=[];n.forEach((function(t){var n=t.payload,i=n.operatorID,o=n.operationType,a=n.groupProfile;if(o===mT){var s="".concat(i,"_").concat(a.groupID,"_").concat(a.to),c=e.pendencyMap.get(s);c&&Wl(c.handled)&&0!==c.handled&&r.push(t)}})),e.deleteGroupSystemNotice({messageList:r})}))}},{key:"deleteGroupSystemNotice",value:function(e){var t=this,n="".concat(this._n,".deleteGroupSystemNotice");return Xl(e.messageList)&&0!==e.messageList.length?(Ll.l("".concat(n," ")+e.messageList.map((function(e){return e.ID}))),this._groupModule.request({protocolName:hg,requestData:{messageListToDelete:e.messageList.map((function(e){return{from:bi.CONV_SYSTEM,messageSeq:e.clientSequence,messageRandom:e.random}}))}}).then((function(){Ll.l("".concat(n," ok"));var r=t._groupModule.getModule(Ff);return e.messageList.forEach((function(e){r.deleteLocalMessage(e)})),lI()})).catch((function(e){return Ll.e("".concat(n," error:"),e),gI(e)}))):hI()}},{key:"_getPendencyList",value:function(e){var t=this;return this._groupModule.request({protocolName:fg,requestData:{startTime:e&&e.startTime?e.startTime:0,limit:e&&e.limit?e.limit:10,handleAccount:this._groupModule.getMyUserID()}}).then((function(e){var n=e.data.pendencyList;return 0!==e.data.nextStartTime?t._getPendencyList({startTime:e.data.nextStartTime}).then((function(e){return[].concat(y(n),y(e))})):n}))}},{key:"getGroupApplicationList",value:function(){var e=this;return this._getPendencyList().then((function(t){var n=[];return t.forEach((function(t){e.pendencyMap.set("".concat(t.from,"_").concat(t.groupID,"_").concat(t.to),t),0===t.handled&&n.push({applicant:t.from,applicantNick:t.fromUserNickName,groupName:t.groupName,groupID:t.groupID,authentication:t.authentication,messageKey:t.time})})),hI({applicationList:n})}))}},{key:"_onReceivedGroupSystemNotice",value:function(e){var t=this,n=e.result;e.isInstantMessage&&n.forEach((function(e){switch(e.payload.operationType){case 1:break;case 2:t._onApplyGroupRequestAgreed(e);break;case 3:break;case 4:t._onMemberKicked(e);break;case 5:t._onGroupDismissed(e);break;case 6:break;case 7:t._onInviteGroup(e);break;case 8:t._onQuitGroup(e);break;case 9:t._onSetManager(e);break;case 10:t._onDeleteManager(e);break;case 11:case 12:case 15:break;case 20:t._onMessageRemindTypeSynced(e);break;case 21:t._groupModule.onAVChatRoomMemberBanned(e)}}))}},{key:"_onApplyGroupRequestAgreed",value:function(e){var t=this,n=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(n)||this._groupModule.getGroupProfile({groupID:n}).then((function(e){var n=e.data.group;if(n){t._groupModule.updateGroupMap([n]);var r=!n.isSupportTopic;t._groupModule.emitGroupListUpdate(!0,r)}}))}},{key:"_onMemberKicked",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t)}},{key:"_onGroupDismissed",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t);var n=this._groupModule._AVChatRoomHandler;n&&n.checkJoinedAVChatRoomByID(t)&&n.reset(t)}},{key:"_onInviteGroup",value:function(e){var t=this,n=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(n)||this._groupModule.getGroupProfile({groupID:n}).then((function(e){var n=e.data.group;n&&(t._groupModule.updateGroupMap([n]),t._groupModule.emitGroupListUpdate())}))}},{key:"_onQuitGroup",value:function(e){var t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t)}},{key:"_onSetManager",value:function(e){var t=e.payload.groupProfile,n=t.to,r=t.groupID,i=this._groupModule.getModule(Gf).getLocalGroupMemberInfo(r,n);i&&i.updateRole(bi.GRP_MBR_ROLE_ADMIN)}},{key:"_onDeleteManager",value:function(e){var t=e.payload.groupProfile,n=t.to,r=t.groupID,i=this._groupModule.getModule(Gf).getLocalGroupMemberInfo(r,n);i&&i.updateRole(bi.GRP_MBR_ROLE_MEMBER)}},{key:"_onMessageRemindTypeSynced",value:function(e){var t=e.payload.groupProfile.groupID,n=e.payload.messageRemindType;this._groupModule.getModule(Ff).onGroupMessageRemindTypeSynced({groupID:t,messageRemindType:n})}},{key:"_handleTopicSystemNotice",value:function(e){var t=e.groupProfile,n=t.groupID,r=t.topicID,i=e.elements,o=i.operationType,a=i.topicIDList,s=i.messageRemindType,c=this._groupModule.getModule(Vf);17===o?c.onTopicCreated({groupID:n,topicID:r}):18===o?c.onTopicDeleted({groupID:n,topicIDList:a}):20===o&&c.onTopicMessageRemindTypeUpdated({groupID:n,topicID:r,messageRemindType:s})}},{key:"reset",value:function(){this.pendencyMap.clear()}}]),e}(),bT=["relayFlag"],IT=function(e){c(r,e);var t=m(r);function r(e){var n;return i(this,r),(n=t.call(this,e))._n="GroupModule",n._commonGroupHandler=null,n._AVChatRoomHandler=null,n._groupSystemNoticeHandler=null,n._commonGroupHandler=new rT(g(n)),n._groupAttributesHandler=new uT(g(n)),n._groupCountersHandler=new fT(g(n)),n._AVChatRoomHandler=new vT(g(n)),n._groupTipsHandler=new nT(g(n)),n._groupSystemNoticeHandler=new yT(g(n)),n.groupMap=new Map,n._unjoinedAVChatRoomList=new Map,n._receiptDetailCompleteMap=new Map,n.getInnerEmitterInstance().on(xI,n._onCloudConfigUpdated,g(n)),n}return a(r,[{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("polling_interval"),t=this.getCloudConfig("polling_interval_plus"),n=this.getCloudConfig("polling_no_msg_count");this._AVChatRoomHandler&&(Ll.l("".concat(this._n,"._onCloudConfigUpdated pollingInterval:").concat(e)+" pollingIntervalPlus:".concat(t," pollingNoMessageCount:").concat(n)),this._AVChatRoomHandler.setPollingInterval(e),this._AVChatRoomHandler.setPollingIntervalPlus(t),this._AVChatRoomHandler.setPollingNoMessageCount(n))}},{key:"onCheckTimer",value:function(e){this.isLoggedIn()&&(this._commonGroupHandler.onCheckTimer(e),this._groupTipsHandler.onCheckTimer(e))}},{key:"guardForAVChatRoom",value:function(e){var t=this;if(e.conversationType===bi.CONV_GROUP){var n=bd(e.to)?Nd(e.to):e.to;return this.hasLocalGroup(n)?hI():this.getGroupProfile({groupID:n}).then((function(r){var i=r.data.group.type;if(Ll.l("".concat(t._n,".guardForAVChatRoom. groupID:").concat(n," type:").concat(i)),i===bi.GRP_AVCHATROOM){var o=Cv;return gI(new dI({code:o,message:t.getErrorMessage(o,e.from,n),data:{message:e}}))}return hI()}))}return hI()}},{key:"checkJoinedAVChatRoomByID",value:function(e){return!!this._AVChatRoomHandler&&this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)}},{key:"onNewGroupMessage",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.onNewGroupMessage(e)}},{key:"updateNextMessageSeq",value:function(e){var t=this;if(Xl(e)){var n=this.getModule(Vf);e.forEach((function(e){var r=e.conversationID.replace(bi.CONV_GROUP,"");bd(r)&&n.updateLastMessage(r,e.lastMessage),t.groupMap.has(r)&&(t.groupMap.get(r).nextMessageSeq=e.lastMessage.sequence+1)}))}}},{key:"onNewGroupTips",value:function(e){this._groupTipsHandler&&this._groupTipsHandler.onNewGroupTips(e)}},{key:"onGroupMessageRevoked",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.onGroupMessageRevoked(e)}},{key:"onNewGroupSystemNotice",value:function(e){this._groupSystemNoticeHandler&&this._groupSystemNoticeHandler.onNewGroupSystemNotice(e)}},{key:"onGroupMessageReadNotice",value:function(e){var t=this;e.dataList.forEach((function(e){var n=e.elements.groupMessageReadNotice;if(!Zl(n)){var r=t.getModule(Ff);n.forEach((function(e){var n=e.groupID,i=e.topicID,o=void 0===i?void 0:i,a=e.lastMessageSeq;Ll.d("".concat(t._n,".onGroupMessageReadNotice groupID:").concat(n," lastMessageSeq:").concat(a));var s="".concat(bi.CONV_GROUP).concat(n),c=!0;Bd(o)||(s="".concat(bi.CONV_GROUP).concat(o),c=!1),r.updateIsReadAfterReadReport({conversationID:s,lastMessageSeq:a}),r.updateUnreadCount(s,c),r.clearGroupAtInfoList(s,c)}))}}))}},{key:"onReadReceiptList",value:function(e){var t=this;Ll.d("".concat(this._n,".onReadReceiptList options:"),JSON.stringify(e)),e.dataList.forEach((function(e){var n=e.groupProfile,r=e.elements,i=n.groupID,o=t.getModule(Ff),a=r.readReceiptList;o.updateReadReceiptInfo({groupID:i,readReceiptList:a})}))}},{key:"onGroupMessageModified",value:function(e){Ll.d("".concat(this._n,".onGroupMessageModified options:"),JSON.stringify(e));var t=this.getModule(Ff);e.dataList.forEach((function(e){t.onMessageModified(n(n({},e),{},{conversationType:bi.CONV_GROUP,to:e.topicID?e.topicID:e.groupID}))}))}},{key:"deleteGroupSystemNotice",value:function(e){this._groupSystemNoticeHandler&&this._groupSystemNoticeHandler.deleteGroupSystemNotice(e)}},{key:"initGroupMap",value:function(e){this.groupMap.set(e.groupID,new KI(e))}},{key:"deleteGroup",value:function(e){this.groupMap.delete(e)}},{key:"updateGroupMap",value:function(e){var t,n=this,r=this.getModule(Ff);e.forEach((function(e){t=e.groupID,n.groupMap.has(t)?n.groupMap.get(t).updateGroup(e):(n.groupMap.set(t,new KI(e)),r.deleteGroupRomaingMessageInfo(t))}));var i,o=this.getMyUserID(),a=E(this.groupMap);try{for(a.s();!(i=a.n()).done;){var s=_(i.value,2)[1];s.selfInfo.userID=o,"Owner"===s.selfInfo.role&&(s.ownerID=o)}}catch(u){a.e(u)}finally{a.f()}this._setStorageGroupList()}},{key:"getStorageGroupList",value:function(){return this.getModule(qf).getItem("groupMap")}},{key:"_setStorageGroupList",value:function(){var e=this.getLocalGroupList().filter((function(e){var t=e.type;return!_d(t)})).filter((function(e){return!e.isSupportTopic})).slice(0,20).map((function(e){return{groupID:e.groupID,name:e.name,avatar:e.avatar,type:e.type}}));this.getModule(qf).setItem("groupMap",e)}},{key:"getGroupMap",value:function(){return this.groupMap}},{key:"getLocalGroupList",value:function(){return y(this.groupMap.values())}},{key:"getLocalGroupProfile",value:function(e){return this.groupMap.get(e)}},{key:"sortLocalGroupList",value:function(){var e=y(this.groupMap).filter((function(e){var t=_(e,2);return t[0],!Bd(t[1].lastMessage)}));e.sort((function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})),this.groupMap=new Map(y(e))}},{key:"updateGroupLastMessage",value:function(e){this._commonGroupHandler&&this._commonGroupHandler.handleUpdateGroupLastMessage(e)}},{key:"emitGroupListUpdate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getLocalGroupList();if(e&&this.emitOuterEvent(yi.GROUP_LIST_UPDATED),t){var r=JSON.parse(JSON.stringify(n)),i=this.getModule(Ff);i.updateConversationGroupProfile(r)}}},{key:"patchGroupMessageRemindType",value:function(){var e=this.getLocalGroupList(),t=this.getModule(Ff),n=0;e.forEach((function(e){!0===t.patchMessageRemindType({ID:e.groupID,isC2CConversation:!1,messageRemindType:e.selfInfo.messageRemindType})&&(n+=1)})),Ll.l("".concat(this._n,".patchGroupMessageRemindType count:").concat(n))}},{key:"recomputeUnreadCount",value:function(){var e=this.getLocalGroupList(),t=this.getModule(Ff);e.forEach((function(e){var n=e.groupID,r=e.selfInfo,i=r.excludedUnreadSequenceList,o=r.readedSequence;if(Xl(i)){var a=0;i.forEach((function(t){t>=o&&t<=e.nextMessageSeq-1&&(a+=1)})),a>=1&&t.recomputeGroupUnreadCount({conversationID:"".concat(bi.CONV_GROUP).concat(n),count:a})}}))}},{key:"getMyNameCardByGroupID",value:function(e){var t=this.getLocalGroupProfile(e);return t?t.selfInfo.nameCard:""}},{key:"isPagingGetCompleted",value:function(){return!!this._commonGroupHandler&&this._commonGroupHandler.isPagingGetCompleted()}},{key:"getGroupList",value:function(e){return this._commonGroupHandler?this._commonGroupHandler.getGroupList(e):hI()}},{key:"getGroupProfile",value:function(e){var t=this,n="".concat(this._n,".").concat("getGroupProfile"),r=new a_("getGroupProfile"),i=e.groupID,o=e.groupCustomFieldFilter;Ll.l("".concat(n," groupID:").concat(i));var a={groupIDList:[i],responseFilter:{groupBaseInfoFilter:["Type","Name","Introduction","Notification","FaceUrl","Owner_Account","CreateTime","InfoSeq","LastInfoTime","LastMsgTime","MemberNum","MaxMemberNum","ApplyJoinOption","NextMsgSeq","ShutUpAllMember"],groupCustomFieldFilter:o,memberInfoFilter:["Role","JoinTime","MsgSeq","MsgFlag","NameCard"]}};return this.getGroupProfileAdvance(a).then((function(e){var o,a=e.data,s=a.successGroupList,c=a.failureGroupList;return Ll.l("".concat(n," ok")),c.length>0?gI(c[0]):(_d(s[0].type)&&!t.hasLocalGroup(i)?o=new KI(s[0]):(t.updateGroupMap(s),o=t.getLocalGroupProfile(i)),o.isSupportTopic||t.getModule(Ff).updateConversationGroupProfile([o]),r.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(i," type:").concat(o.type," muteAllMembers:").concat(o.muteAllMembers," ownerID:").concat(o.ownerID)).end(),lI({group:o}))})).catch((function(i){return t.probeNetwork().then((function(t){var n=_(t,2),o=n[0],a=n[1];r.setError(i,o,a).setMessage("groupID:".concat(e.groupID)).end()})),Ll.e("".concat(n," failed. error:"),i),gI(i)}))}},{key:"getGroupProfileAdvance",value:function(e){var t="".concat(this._n,".getGroupProfileAdvance"),r=e.groupIDList;Xl(r)&&r.length>50&&(this.outputWarning("GetGroupProfileLimit"),r.length=50);var i=[],o=[];r.forEach((function(e){yd({groupID:e})?o.push(e):i.push(e)}));var a=[];if(i.length>0){var s=this._getGroupProfileAdvance(n(n({},e),{},{groupIDList:i}));a.push(s)}if(o.length>0){var c=this._getGroupProfileAdvance(n(n({},e),{},{groupIDList:o,relayFlag:i.length>0}));a.push(c)}return Promise.all(a).then((function(e){var t=[],n=[];return e.forEach((function(e){t.push.apply(t,y(e.successGroupList)),n.push.apply(n,y(e.failureGroupList))})),lI({successGroupList:t,failureGroupList:n})})).catch((function(e){return Ll.e("".concat(t," failed. error:"),e),gI(e)}))}},{key:"_getGroupProfileAdvance",value:function(e){var t=this,n=e.relayFlag,r=void 0!==n&&n,i=h(e,bT);return this.request({protocolName:Yh,requestData:i}).then((function(e){Ll.l("".concat(t._n,"._getGroupProfileAdvance ok."));var n=e.data.groups;return{successGroupList:n.filter((function(e){return Zl(e.errorCode)||0===e.errorCode})),failureGroupList:n.filter((function(e){return e.errorCode&&0!==e.errorCode})).map((function(e){return new dI({code:e.errorCode,message:e.errorInfo,data:{groupID:e.groupID}})}))}})).catch((function(t){return r&&yd({groupID:e.groupIDList[0]})?{successGroupList:[],failureGroupList:[]}:gI(t)}))}},{key:"createGroup",value:function(e){var t=this,r="".concat(this._n,".").concat("createGroup"),i=e.type,o=e.groupID;if(e.name&&!1===this._filterProfanity("name",e))return gI({code:Fm});if(e.introduction&&!1===this._filterProfanity("introduction",e))return gI({code:Fm});if(e.notification&&!1===this._filterProfanity("notification",e))return gI({code:Fm});if(!["Public","Private","ChatRoom","AVChatRoom","Community"].includes(i))return gI({code:rm});if(!yd({type:i})){if(!Bd(o)&&yd({groupID:o}))return gI({code:om});e.isSupportTopic=void 0}if(_d(i)&&!Zl(e.memberList)&&e.memberList.length>0&&(e.memberList=void 0),md(i)||Zl(e.joinOption)||(e.joinOption=void 0),yd({type:i})){if(!Bd(o)&&!yd({groupID:o}))return gI({code:om});e.isSupportTopic=!0===e.isSupportTopic?1:0}var a=new a_("createGroup");Ll.l("".concat(r," options:"),e);var s=null,c=[];return this.request({protocolName:Jh,requestData:n(n({},e),{},{ownerID:this.getMyUserID(),webPushFlag:1})}).then((function(i){var o=i.data,u=o.groupID,l=o.overLimitUserIDList,d=void 0===l?[]:l;if(s=u,c=d,a.setNetworkType(t.getNetworkType()).setMessage("groupType:".concat(e.type," groupID:").concat(u," overLimitUserIDList=").concat(d)).end(),Ll.l("".concat(r," ok groupID:").concat(u," overLimitUserIDList:"),d),e.type===bi.GRP_AVCHATROOM)return t.getGroupProfile({groupID:u});if(e.type===bi.GRP_COMMUNITY&&1===e.isSupportTopic)return t.getGroupProfile({groupID:u});Bd(e.memberList)||Bd(d)||(e.memberList=e.memberList.filter((function(e){return-1===d.indexOf(e.userID)}))),t.updateGroupMap([n(n({},e),{},{groupID:u})]);var p=t.getModule(xf),f=p.createCustomMessage({to:u,conversationType:bi.CONV_GROUP,payload:{data:"group_create",extension:t.isIntl()?"".concat(t.getMyUserID()," created a group"):"".concat(t.getMyUserID(),"创建群组")}});return p.sendMessageInstance(f),t.emitGroupListUpdate(),t.getGroupProfile({groupID:u})})).then((function(e){var t=e.data.group,n=t.selfInfo,r=n.nameCard,i=n.joinTime;return t.updateSelfInfo({nameCard:r,joinTime:i,messageRemindType:bi.MSG_REMIND_ACPT_AND_NOTE,role:bi.GRP_MBR_ROLE_OWNER}),lI({group:t,overLimitUserIDList:c})})).catch((function(i){if(a.setMessage("groupType:".concat(e.type)),t.probeNetwork().then((function(e){var t=_(e,2),n=t[0],r=t[1];a.setError(i,n,r).end()})),10010===i.code||10007===i.code){t.updateGroupMap([n(n({},e),{},{groupID:s})]);var o=t.getLocalGroupProfile(s);return Ll.l("".concat(r," success, but failed to get group profile.")),lI({group:o,overLimitUserIDList:c})}return Ll.e("".concat(r," failed. error:"),i),gI(i)}))}},{key:"dismissGroup",value:function(e){var t=this,n="".concat(this._n,".").concat("dismissGroup");if(this.hasLocalGroup(e)&&this.getLocalGroupProfile(e).type===bi.GRP_WORK)return gI(new dI({code:um}));var r=new a_("dismissGroup");return r.setMessage("groupID:".concat(e)),Ll.l("".concat(n," groupID:").concat(e)),this.request({protocolName:$h,requestData:{groupID:e}}).then((function(){return r.setNetworkType(t.getNetworkType()).end(),Ll.l("".concat(n," ok")),t.deleteLocalGroupAndConversation(e),t.checkJoinedAVChatRoomByID(e)&&t._AVChatRoomHandler.reset(e),lI({groupID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),i=n[0],o=n[1];r.setError(e,i,o).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"updateGroupProfile",value:function(e){var t=this,n="".concat(this._n,".").concat("updateGroupProfile");if(!this.hasLocalGroup(e.groupID)||md(this.getLocalGroupProfile(e.groupID).type)||Zl(e.joinOption)||(Ll.w("".concat(n," joinOption is unavailable for Work/Meeting/AVChatRoom/Community")),e.joinOption=void 0),Zl(e.muteAllMembers)||(e.muteAllMembers?e.muteAllMembers="On":e.muteAllMembers="Off"),e.name&&!1===this._filterProfanity("name",e))return gI({code:Fm});if(e.introduction&&!1===this._filterProfanity("introduction",e))return gI({code:Fm});if(e.notification&&!1===this._filterProfanity("notification",e))return gI({code:Fm});var r=new a_("updateGroupProfile");return r.setMessage(JSON.stringify(e)),Ll.l("".concat(n," groupID:").concat(e.groupID)),this.request({protocolName:Xh,requestData:e}).then((function(){return r.setNetworkType(t.getNetworkType()).end(),Ll.l("".concat(n," ok")),t.hasLocalGroup(e.groupID)&&(t.groupMap.get(e.groupID).updateGroup(e),t._setStorageGroupList()),lI({group:t.groupMap.get(e.groupID)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),i=n[0],o=n[1];r.setError(e,i,o).end()})),Ll.l("".concat(n," failed. error:"),e),gI(e)}))}},{key:"_filterProfanity",value:function(e,t){var n=this.getModule(oh);if(!n)return!0;var r=n.filterText(t[e],Fu),i=r.isAllowedToSend,o=r.modifiedText;return!0===i&&(t[e]=o,!0)}},{key:"joinGroup",value:function(e){var t=this,n=e.groupID,r=e.type,i="".concat(this._n,".joinGroup");if(r===bi.GRP_WORK)return gI({code:im});if(this.deleteUnjoinedAVChatRoom(n),this.hasLocalGroup(n)){if(!this.isLoggedIn())return hI({status:bi.JOIN_STATUS_ALREADY_IN_GROUP});var o=new a_("applyJoinGroup");return this.getGroupProfile({groupID:n}).then((function(){return o.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(n," joinedStatus:").concat(bi.JOIN_STATUS_ALREADY_IN_GROUP)).end(),hI({status:bi.JOIN_STATUS_ALREADY_IN_GROUP})})).catch((function(r){return o.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(n," unjoined")).end(),Ll.w("".concat(i," ").concat(n," was unjoined, now join!")),t.groupMap.delete(n),t.applyJoinGroup(e)}))}return Ll.l("".concat(i," groupID:").concat(n)),this.isLoggedIn()?this.applyJoinGroup(e):this._AVChatRoomHandler.joinWithoutAuth(e)}},{key:"applyJoinGroup",value:function(e){var t=this,r="".concat(this._n,".").concat("applyJoinGroup"),i=e.groupID;if(!Bd(e.applyMessage)&&!1===this._filterProfanity("applyMessage",e))return gI({code:Fm});var o=new a_("applyJoinGroup"),a=n({},e),s=this.canIUse(Nu.AVCHATROOM_HISTORY_MSG);return s&&(a.historyMessageFlag=1),this.getModule(Ff).deleteTopicRoamingMessageInfo(i),this.request({protocolName:Zh,requestData:a}).then((function(e){var n=e.data,a=n.joinedStatus,c=n.longPollingKey,u=n.startSeq,l=n.avChatRoomFlag,d=n.avChatRoomKey,p=n.messageList,f="groupID:".concat(i," joinedStatus:").concat(a," longPollingKey:").concat(c," startSeq:").concat(u)+" avChatRoomFlag:".concat(l," canGetAVChatRoomHistoryMessage:").concat(s,",")+" history message count:".concat(Bd(p)?0:p.length);switch(o.setNetworkType(t.getNetworkType()).setMessage("".concat(f)).end(),Ll.l("".concat(r," ok. ").concat(f)),a){case Fl:return lI({status:Fl});case Vl:return t.getGroupProfile({groupID:i}).then((function(e){var n=e.data.group;return t._handleJoinResult({group:n,avChatRoomFlag:l,longPollingKey:c,startSeq:u,avChatRoomKey:d,messageList:p})})).catch((function(){var e=new KI({groupID:i});return t._handleJoinResult({group:e,avChatRoomFlag:l,longPollingKey:c,startSeq:u,avChatRoomKey:d,messageList:p})}));default:var h=new dI({code:dm});return Ll.e("".concat(r," failed. error:"),h),gI(h)}})).catch((function(e){return o.setMessage("groupID:".concat(i)),t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];o.setError(e,r,i).end()})),Ll.e("".concat(r," failed. error:"),e),gI(e)}))}},{key:"_handleJoinResult",value:function(e){var t,n=this,r=e.group,i=e.avChatRoomFlag,o=e.longPollingKey,a=e.startSeq,s=e.avChatRoomKey,c=e.messageList,u=r.groupID;return 1===i?(this.getModule(Ff).setCompleted("".concat(bi.CONV_GROUP).concat(u)),this._groupAttributesHandler.initGroupAttributesCache({groupID:u,avChatRoomKey:s}),this._groupCountersHandler.initGroupCountersCache({groupID:u,avChatRoomKey:s}),(t=Zl(o)?this._AVChatRoomHandler.handleJoinResult({group:r}):this._AVChatRoomHandler.startRunLoop({group:r,longPollingKey:o,startSeq:a})).then((function(){n._onAVChatRoomHistoryMessage(c)})),t):(this.emitGroupListUpdate(!0,!1),lI({status:Vl,group:r}))}},{key:"quitGroup",value:function(e){var t=this,n="".concat(this._n,".").concat("quitGroup");Ll.l("".concat(n," groupID:").concat(e));var r=this.checkJoinedAVChatRoomByID(e);if(!r&&!this.hasLocalGroup(e))return gI({code:lm});if(r&&!this.isLoggedIn())return Ll.l("".concat(n," anonymously ok. groupID:").concat(e)),this.deleteLocalGroupAndConversation(e),this._AVChatRoomHandler.reset(e),hI({groupID:e});var i=new a_("quitGroup");return i.setMessage("groupID:".concat(e)),this.request({protocolName:eg,requestData:{groupID:e}}).then((function(){return i.setNetworkType(t.getNetworkType()).end(),Ll.l("".concat(n," ok")),t.deleteLocalGroupAndConversation(e),r&&t._AVChatRoomHandler.reset(e),t._groupAttributesHandler.deleteLocalGroupAttributes(e),lI({groupID:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],o=n[1];i.setError(e,r,o).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"searchGroupByID",value:function(e){var t=this,n="".concat(this._n,".").concat("searchGroupByID"),r={groupIDList:[e]},i=new a_("searchGroupByID");return i.setMessage("groupID:".concat(e)),Ll.l("".concat(n," groupID:").concat(e)),this.request({protocolName:tg,requestData:r}).then((function(e){var r=e.data.groupProfile;if(0!==r[0].errorCode)throw new dI({code:r[0].errorCode,message:r[0].errorInfo});return i.setNetworkType(t.getNetworkType()).end(),Ll.l("".concat(n," ok")),lI({group:new KI(r[0])})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],o=n[1];i.setError(e,r,o).end()})),Ll.w("".concat(n," failed. error:"),e),gI(e)}))}},{key:"changeGroupOwner",value:function(e){var t=this,n="".concat(this._n,".").concat("changeGroupOwner");if(this.hasLocalGroup(e.groupID)&&this.getLocalGroupProfile(e.groupID).type===bi.GRP_AVCHATROOM)return gI({code:sm});if(e.newOwnerID===this.getMyUserID())return gI({code:cm});var r=new a_("changeGroupOwner");return r.setMessage("groupID:".concat(e.groupID," newOwnerID:").concat(e.newOwnerID)),Ll.l("".concat(n," groupID:").concat(e.groupID)),this.request({protocolName:ng,requestData:e}).then((function(){r.setNetworkType(t.getNetworkType()).end(),Ll.l("".concat(n," ok"));var i=e.groupID,o=e.newOwnerID;t.groupMap.get(i).ownerID=o;var a=t.getModule(Gf).getLocalGroupMemberList(i);if(a instanceof Map){var s=a.get(t.getMyUserID());Zl(s)||(s.updateRole("Member"),t.groupMap.get(i).selfInfo.role="Member");var c=a.get(o);Zl(c)||c.updateRole("Owner")}return t.emitGroupListUpdate(!0,!1),lI({group:t.groupMap.get(i)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),i=n[0],o=n[1];r.setError(e,i,o).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"getGroupApplicationList",value:function(){return this._groupSystemNoticeHandler.getGroupApplicationList()}},{key:"handleGroupApplication",value:function(e){var t,n,r,i,o=this,a="".concat(this._n,".").concat("handleGroupApplication"),s=e.handleAction,c=e.handleMessage,u=e.message,l=e.application;u?(t=u.payload.operatorID,n=u.payload.groupProfile.groupID,r=u.payload.authentication,i=u.payload.messageKey):l&&(t=l.applicant,n=l.groupID,r=l.authentication,i=l.messageKey);var d=new a_("handleGroupApplication");return d.setMessage("groupID:".concat(n)),Ll.l("".concat(a," groupID:").concat(n)),this.request({protocolName:rg,requestData:{handleAction:s,handleMessage:c,applicant:t,groupID:n,authentication:r,messageKey:i}}).then((function(){return d.setNetworkType(o.getNetworkType()).end(),Ll.l("".concat(a," ok")),u&&o._groupSystemNoticeHandler.deleteGroupSystemNotice({messageList:[e.message]}),lI({group:o.getLocalGroupProfile(n)})})).catch((function(e){return o.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];d.setError(e,r,i).end()})),Ll.e("".concat(a," failed. error"),e),gI(e)}))}},{key:"handleGroupInvitation",value:function(e){var t=this,r="".concat(this._n,".").concat("handleGroupInvitation"),i=e.message.payload,o=i.groupProfile.groupID,a=i.authentication,s=i.messageKey,c=i.operatorID,u=e.handleAction,l=new a_("handleGroupInvitation");return l.setMessage("groupID:".concat(o," inviter:").concat(c," handleAction:").concat(u)),Ll.l("".concat(r," groupID:").concat(o," inviter:").concat(c," handleAction:").concat(u)),this.request({protocolName:ig,requestData:n(n({},e),{},{inviter:c,groupID:o,authentication:a,messageKey:s})}).then((function(){return l.setNetworkType(t.getNetworkType()).end(),Ll.l("".concat(r," ok")),t._groupSystemNoticeHandler.deleteGroupSystemNotice({messageList:[e.message]}),lI({group:t.getLocalGroupProfile(o)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];l.setError(e,r,i).end()})),Ll.e("".concat(r," failed. error"),e),gI(e)}))}},{key:"getGroupOnlineMemberCount",value:function(e){return this._AVChatRoomHandler?this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)?this._AVChatRoomHandler.getGroupOnlineMemberCount(e):hI({memberCount:0}):gI({code:Dm})}},{key:"hasLocalGroup",value:function(e){return this.groupMap.has(e)}},{key:"deleteLocalGroupAndConversation",value:function(e){var t=this.checkJoinedAVChatRoomByID(e);if(Ll.l("".concat(this._n,".deleteLocalGroupAndConversation isJoinedAVChatRoom:").concat(t)),t&&this.getModule(Ff).deleteLocalConversation("".concat(bi.CONV_GROUP).concat(e)),yd({groupID:e})){var n=this.getLocalGroupProfile(e);n&&!0===n.isSupportTopic&&this.getModule(Vf).deleteTopicListInCommunity(e)}this._deleteLocalGroup(e),this.emitGroupListUpdate(!0,!1)}},{key:"_deleteLocalGroup",value:function(e){this.groupMap.delete(e),this.getModule(Gf).deleteGroupMemberList(e),this._setStorageGroupList()}},{key:"sendMessage",value:function(e,t){if(Xl(e._receiverList)&&e._receiverList.length>0&&!this.canIUse(Nu.MSG_TO_SPECIFIED_GRP_MBR))return gI({code:Vm});var n=this.createGroupMessagePack(e,t);return this.request(n)}},{key:"createGroupMessagePack",value:function(e,t){var n=null;t&&t.offlinePushInfo&&(n=t.offlinePushInfo);var r="";Yl(e.cloudCustomData)&&e.cloudCustomData.length>0&&(r=e.cloudCustomData);var i=[];if($l(t)&&$l(t.messageControlInfo)){var o=t.messageControlInfo,a=o.excludedFromUnreadCount,s=o.excludedFromLastMessage,c=o.excludedFromContentModeration;!0===a&&i.push("NoUnread"),!0===s&&i.push("NoLastMsg"),!0===c&&i.push("NoMsgCheck")}var u=void 0;Xl(e._receiverList)&&e._receiverList.length>0&&(u=e._receiverList,e._receiverList.length>50&&(u=e._receiverList.slice(0,50),this.outputWarning("ReceiverListLimit")));var l=this.isOnlineMessage(e,t)?1:0,d=e.getGroupAtInfoList(),p={fromAccount:this.getMyUserID(),groupID:e.to,msgBody:e.getElements(),cloudCustomData:r,random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:e.type!==bi.MSG_TEXT||Bd(d)?void 0:d,onlineOnlyFlag:l,clientTime:e.clientTime,offlinePushInfo:n?{pushFlag:!0===n.disablePush?1:0,title:n.title||"",desc:n.description||"",ext:n.extension||"",apnsInfo:{badgeMode:!0===n.ignoreIOSBadge?1:0,isVoipPush:this._isVoipPush(n)},androidInfo:{OPPOChannelID:n.androidOPPOChannelID||""}}:void 0,messageControlInfo:0===l?i:void 0,needReadReceipt:!0!==e.needReadReceipt||this.isMessageFromOrToAVChatroom(e.to)?0:1,receiverList:u,isSupportExtension:!0===e.isSupportExtension?1:0};return bd(e.to)&&(p.groupID=Nd(e.to),p.topicID=e.to),{protocolName:mh,tjgID:this.generateTjgID(e),requestData:p}}},{key:"_isVoipPush",value:function(e){var t=void 0;return Zl(e.disableVoipPush)||(t=!1===e.disableVoipPush?1:0),t}},{key:"revokeMessage",value:function(e){var t={groupID:e.to,msgSeqList:[{msgSeq:e.sequence}]};return bd(e.to)&&(t.groupID=Nd(e.to),t.topicID=e.to),this.request({protocolName:og,requestData:t})}},{key:"deleteMessage",value:function(e){var t=e.to,n=e.keyList;Ll.l("".concat(this._n,".deleteMessage groupID:").concat(t," count:").concat(n.length));var r={groupID:t,deleter:this.getMyUserID(),keyList:n};return bd(t)&&(r.groupID=Nd(t),r.topicID=t),this.request({protocolName:_g,requestData:r})}},{key:"modifyRemoteMessage",value:function(e){var t=e.to,n=e.sequence,r=e.payload,i=e.type,o=e.version,a=void 0===o?0:o,s=e.cloudCustomData,c=t,u=void 0;bd(t)&&(c=Nd(t),u=t);var l=void 0;return jd(i)&&(l=[]).push({type:i,content:r}),this.request({protocolName:yg,requestData:{groupID:c,topicID:u,sequence:n,version:a,elements:l,cloudCustomData:s}})}},{key:"getRoamingMessage",value:function(e){var t=this,n="".concat(this._n,".getRoamingMessage"),r=e.conversationID,i=e.groupID,o=e.sequence,a=new a_("getGroupRoamingMessages"),s=0,c=void 0;return bd(i)&&(i=Nd(c=i)),this._computeLastSequence({groupID:i,topicID:c,sequence:o}).then((function(e){return s=e,Ll.l("".concat(n," groupID:").concat(i," startSequence:").concat(s)),t.request({protocolName:cg,requestData:{groupID:i,count:21,sequence:s,topicID:c}})})).then((function(e){var o=e.data,u=o.messageList,l=o.complete,d=o.invisibleSequenceList,p=void 0===d?[]:d;Zl(u)?Ll.l("".concat(n," ok. complete:").concat(l," but messageList is undefined!")):Ll.l("".concat(n," ok. complete:").concat(l," count:").concat(u.length));var f=t._getMinSequence(p,u)-1;a.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(i," topicID:").concat(c," startSequence:").concat(s," complete:").concat(l," nextSequence:").concat(f)).end();var h=t.getModule(Ff),g=[];return Bd(u)||(h.updateRoamingMessageSequence(r,f),g=h.onRoamingMessage(u,r),h.updateIsRead(r),h.patchConversationLastMessage(r)),2===l&&(h.setCompleted(r),f=""),Ll.l("".concat(n," nextReqID:").concat(f,", stored message count:").concat(g.length,", invisible sequence count:").concat(p.length)),{nextReqID:f+"",storedMessageList:g}})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],o=n[1];a.setError(e,r,o).setMessage("groupID:".concat(i," topicID:").concat(c," startSequence:").concat(s)).end()})),Ll.w("".concat(n," failed. error:"),e),gI(e)}))}},{key:"_getGroupIDOfMessage",value:function(e){return e.conversationID.replace(bi.CONV_GROUP,"")}},{key:"_getMinSequence",value:function(e,t){var n=0;Bd(t)||(n=t[t.length-1].sequence);var r=0;return Bd(e)||(r=e[e.length-1]),Ll.l("".concat(this._n,"._getMinSequence minVisibleSequence:").concat(n," minInvisibleSequence:").concat(r)),r>0&&r<n?r:n}},{key:"getReadReceiptList",value:function(e){var t=this,n="".concat(this._n,".").concat("getReadReceiptList"),r=this._getGroupIDOfMessage(e[0]),i=this.getMyUserID(),o=e.filter((function(e){return e.from===i&&!0===e.needReadReceipt})).map((function(e){return{sequence:e.sequence}}));if(Ll.l("".concat(n," groupID:").concat(r," sequenceList:").concat(JSON.stringify(o))),0===o.length)return hI({messageList:e});var a=new a_("getReadReceiptList");return a.setMessage("groupID:".concat(r)),this.request({protocolName:ug,requestData:{groupID:r,sequenceList:o}}).then((function(t){a.end(),Ll.l("".concat(n," ok"));var r=t.data.readReceiptList;return Xl(r)&&r.forEach((function(t){e.forEach((function(e){0===t.code&&t.sequence===e.sequence&&(e.readReceiptInfo.readCount=t.readCount,e.readReceiptInfo.unreadCount=t.unreadCount)}))})),lI({messageList:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];a.setError(e,r,i).end()})),Ll.w("".concat(n," failed. error:"),e),gI(e)}))}},{key:"sendReadReceipt",value:function(e){var t=this,n="".concat(this._n,".").concat("sendReadReceipt"),r=this._getGroupIDOfMessage(e[0]),i=new a_("sendReadReceipt");i.setMessage("groupID:".concat(r));var o=this.getMyUserID(),a=e.filter((function(e){return e.from!==o&&!0===e.needReadReceipt})).map((function(e){return{sequence:e.sequence}}));return 0===a.length?gI({code:Av}):(Ll.l("".concat(n,". sequenceList:").concat(JSON.stringify(a))),this.request({protocolName:lg,requestData:{groupID:r,sequenceList:a}}).then((function(e){return i.end(),Ll.l("".concat(n," ok")),lI()})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],o=n[1];i.setError(e,r,o).end()})),Ll.w("".concat(n," failed. error:"),e),gI(e)})))}},{key:"getReadReceiptDetail",value:function(e){var t=this,n=e.message,r=e.filter,i=e.cursor,o=e.count,a=this._getGroupIDOfMessage(n),s=n.ID,c=n.sequence,u="".concat(this._n,".").concat("getReadReceiptDetail"),l=this._receiptDetailCompleteMap.get(s)||!1,d=0!==r&&1!==r?0:r,p=Yl(i)?i:"",f=!Wl(o)||o<=0||o>=100?100:o,h="groupID:".concat(a," sequence:").concat(c," cursor:").concat(p," filter:").concat(d," completeFlag:").concat(l);Ll.l("".concat(u," ").concat(h));var g={cursor:"",isCompleted:!1,messageID:s,unreadUserIDList:[],readUserIDList:[]},v=new a_("getReadReceiptDetail");return v.setMessage(h),this.request({protocolName:pg,requestData:{groupID:a,sequence:c,flag:d,cursor:p,count:f}}).then((function(e){v.end();var n=e.data,r=n.cursor,i=n.isCompleted,o=n.unreadUserIDList,a=n.readUserIDList;return g.cursor=r,1===i&&(g.isCompleted=!0,t._receiptDetailCompleteMap.set(s,!0)),0===d?g.readUserIDList=a.map((function(e){return e.userID})):1===d&&(g.unreadUserIDList=o.map((function(e){return e.userID}))),Ll.l("".concat(u," ok")),lI(g)})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];v.setError(e,r,i).end()})),Ll.w("".concat(u," failed. error:"),e),gI(e)}))}},{key:"getRoamingMessagesHopping",value:function(e){var t=this,n="".concat(this._n,".getRoamingMessagesHopping"),r=new a_("getGroupRoamingMessagesHopping"),i=e.groupID,o=e.count,a=e.sequence,s=e.direction,c=a;1===s&&(c=a+o-1);var u=void 0;bd(i)&&(i=Nd(u=i));var l="".concat(u?"topicID:".concat(u):"groupID:".concat(i)," sequence:").concat(a," direction:").concat(s);return Ll.l("".concat(n," ").concat(l)),this.request({protocolName:cg,requestData:{groupID:i,topicID:u,count:o,sequence:c}}).then((function(i){var o=i.data,c=o.messageList,u=o.complete,d="complete:".concat(u," count:").concat(c?c.length:0);if(Ll.l("".concat(n," ok. ").concat(d)),r.setNetworkType(t.getNetworkType()).setMessage("".concat(l," ").concat(d)).end(),2===u||Bd(c)){var p=t._computeResult();return lI(p)}var f="".concat(bi.CONV_GROUP).concat(e.groupID),h=t.getModule(Ff).onRoamingMessage(c,f,!1),g=t._computeResult({direction:s,sequence:a,remoteMessageList:c,processedMessageList:h});return lI(g)})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),s=n[0],c=n[1];r.setError(e,s,c).setMessage("groupID:".concat(i," sequence:").concat(a," count:").concat(o)).end()})),Ll.w("".concat(n," failed. error:"),e),gI(e)}))}},{key:"_computeResult",value:function(e){var t={messageList:[],isCompleted:!1,nextMessageSeq:""};if(Zl(e))return t.isCompleted=!0,t;var n=e.direction,r=e.sequence,i=e.remoteMessageList,o=void 0===i?[]:i,a=e.processedMessageList,s=void 0===a?[]:a,c=o.length;return 1===n?(t.nextMessageSeq=o[0].sequence+1,s.forEach((function(e){e.sequence>=r&&t.messageList.push(e)})),0===t.messageList.length&&o[0].sequence<r&&(t.isCompleted=!0,t.nextMessageSeq=""),t):(t.nextMessageSeq=o[c-1].sequence-1,t.messageList=y(s),0===t.nextMessageSeq&&(t.isCompleted=!0,t.nextMessageSeq=""),t)}},{key:"setMessageRead",value:function(e){var t=this,n=e.conversationID,r=e.lastMessageSeq,i="".concat(this._n,".setMessageRead");Ll.l("".concat(i," conversationID:").concat(n," lastMessageSeq:").concat(r)),Wl(r)||this.outputWarning("DoNotModifyLastSeq");var o=new a_("setGroupMessageRead");o.setMessage("".concat(n,"-").concat(r));var a=n.replace(bi.CONV_GROUP,""),s=void 0;return bd(a)&&(a=Nd(s=a)),this.request({protocolName:ag,requestData:{groupID:a,topicID:s,messageReadSeq:r}}).then((function(){o.setNetworkType(t.getNetworkType()).end(),Ll.l("".concat(i," ok."));var e=t.getModule(Ff);e.updateIsReadAfterReadReport({conversationID:n,lastMessageSeq:r});var c=!0;if(!Zl(s)){c=!1;var u=t.getModule(Vf).getLocalTopic(a,s);u&&u.updateSelfInfo({readedSequence:r})}return e.updateUnreadCount(n,c),lI()})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];o.setError(e,r,i).end()})),Ll.l("".concat(i," failed. error:"),e),gI(e)}))}},{key:"_computeLastSequence",value:function(e){var t=e.groupID,n=e.topicID,r=void 0===n?void 0:n,i=e.sequence;return i>0?Promise.resolve(i):Zl(r)||this.hasLocalGroup(t)?Zl(r)?this.getGroupLastSequence(t):this.getTopicLastSequence({groupID:t,topicID:r}):Promise.resolve(0)}},{key:"getGroupLastSequence",value:function(e){var t=this,n="".concat(this._n,".").concat("getGroupLastSequence"),r=new a_("getGroupLastSequence"),i=0,o="";if(this.hasLocalGroup(e)){var a=this.getLocalGroupProfile(e),s=a.lastMessage;if(s.lastSequence>0&&!1===s.onlineOnlyFlag)return i=s.lastSequence,o="got lastSequence:".concat(i," from local group profile[lastMessage.lastSequence]. groupID:").concat(e),Ll.l("".concat(n," ").concat(o)),r.setNetworkType(this.getNetworkType()).setMessage("".concat(o)).end(),Promise.resolve(i);if(a.nextMessageSeq>1)return i=a.nextMessageSeq-1,o="got lastSequence:".concat(i," from local group profile[nextMessageSeq]. groupID:").concat(e),Ll.l("".concat(n," ").concat(o)),r.setNetworkType(this.getNetworkType()).setMessage("".concat(o)).end(),Promise.resolve(i)}var c="GROUP".concat(e),u=this.getModule(Ff).getLocalConversation(c);if(u&&u.lastMessage.lastSequence&&!1===u.lastMessage.onlineOnlyFlag)return i=u.lastMessage.lastSequence,o="got lastSequence:".concat(i," from local conversation profile[lastMessage.lastSequence]. groupID:").concat(e),Ll.l("".concat(n," ").concat(o)),r.setNetworkType(this.getNetworkType()).setMessage("".concat(o)).end(),Promise.resolve(i);var l={groupIDList:[e],responseFilter:{groupBaseInfoFilter:["NextMsgSeq"]}};return this.getGroupProfileAdvance(l).then((function(a){var s=a.data.successGroupList;return Bd(s)?Ll.l("".concat(n," successGroupList is empty. groupID:").concat(e)):(i=s[0].nextMessageSeq-1,o="got lastSequence:".concat(i," from getGroupProfileAdvance. groupID:").concat(e),Ll.l("".concat(n," ").concat(o))),r.setNetworkType(t.getNetworkType()).setMessage("".concat(o)).end(),i})).catch((function(i){return t.probeNetwork().then((function(t){var n=_(t,2),o=n[0],a=n[1];r.setError(i,o,a).setMessage("get lastSequence failed from getGroupProfileAdvance. groupID:".concat(e)).end()})),Ll.w("".concat(n," failed. error:"),i),gI(i)}))}},{key:"getTopicLastSequence",value:function(e){var t=this,n=e.groupID,r=e.topicID,i="".concat(this._n,".").concat("getTopicLastSequence"),o=new a_("getTopicLastSequence"),a=0,s="",c=this.getModule(Vf);return c.hasLocalTopic(n,r)?(a=c.getLocalTopic(n,r).nextMessageSeq-1,s="get lastSequence:".concat(a," from local topic info[nextMessageSeq]. topicID:").concat(r),Ll.l("".concat(i," ").concat(s)),o.setNetworkType(this.getNetworkType()).setMessage("".concat(s)).end(),Promise.resolve(a)):c.getTopicList({groupID:n,topicIDList:[r]}).then((function(e){var n=e.data.successTopicList;return Bd(n)?Ll.l("".concat(i," successTopicList is empty. topicID:").concat(r)):(a=n[0].nextMessageSeq-1,s="get lastSequence:".concat(a," from getTopicList. topicID:").concat(r),Ll.l("".concat(i," ").concat(s))),o.setNetworkType(t.getNetworkType()).setMessage("".concat(s)).end(),a})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),i=n[0],a=n[1];o.setError(e,i,a).setMessage("get lastSequence failed from getTopicList. topicID:".concat(r)).end()})),Ll.w("".concat(i," failed. error:"),e),gI(e)}))}},{key:"isMessageFromOrToAVChatroom",value:function(e){return!!this._AVChatRoomHandler&&this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)}},{key:"hasJoinedAVChatRoom",value:function(){return this._AVChatRoomHandler?this._AVChatRoomHandler.hasJoinedAVChatRoom():0}},{key:"getJoinedAVChatRoom",value:function(){return this._AVChatRoomHandler?this._AVChatRoomHandler.getJoinedAVChatRoom():[]}},{key:"isOnlineMessage",value:function(e,t){return!(!this._canIUseOnlineOnlyFlag(e)||!t||!0!==t.onlineUserOnly)}},{key:"_canIUseOnlineOnlyFlag",value:function(e){var t=this.getJoinedAVChatRoom();return!t||!t.includes(e.to)||e.conversationType!==bi.CONV_GROUP}},{key:"_onAVChatRoomHistoryMessage",value:function(e){if(!Bd(e)){Ll.l("".concat(this._n,"._onAVChatRoomHistoryMessage count:").concat(e.length));var t=[];e.forEach((function(e){t.push(n(n({},e),{},{isHistoryMessage:1}))})),this.onAVChatRoomMessage(t)}}},{key:"onAVChatRoomMessage",value:function(e){this._AVChatRoomHandler&&this._AVChatRoomHandler.onMessage(e)}},{key:"onAVChatRoomMemberBanned",value:function(e){this._AVChatRoomHandler&&this._AVChatRoomHandler.onAVChatRoomMemberBanned(e)}},{key:"getGroupSimplifiedInfo",value:function(e){var t=this,n=new a_("getGroupSimplifiedInfo"),r={groupIDList:[e],responseFilter:{groupBaseInfoFilter:["Type","Name"]}};return this.getGroupProfileAdvance(r).then((function(r){var i=r.data.successGroupList;return n.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(e," type:").concat(i[0].type)).end(),i[0]})).catch((function(r){t.probeNetwork().then((function(t){var i=_(t,2),o=i[0],a=i[1];n.setError(r,o,a).setMessage("groupID:".concat(e)).end()}))}))}},{key:"setUnjoinedAVChatRoom",value:function(e){this._unjoinedAVChatRoomList.set(e,1)}},{key:"deleteUnjoinedAVChatRoom",value:function(e){this._unjoinedAVChatRoomList.has(e)&&this._unjoinedAVChatRoomList.delete(e)}},{key:"isUnjoinedAVChatRoom",value:function(e){return this._unjoinedAVChatRoomList.has(e)}},{key:"isGroupAttributesUpdatedNotice",value:function(e){return this._groupAttributesHandler.isGroupAttributesUpdatedNotice(e)}},{key:"updateLocalMainSequenceOnReconnected",value:function(){this._groupAttributesHandler.updateLocalMainSequenceOnReconnected()}},{key:"initGroupAttributes",value:function(e){return this._groupAttributesHandler.initGroupAttributes(e)}},{key:"setGroupAttributes",value:function(e){return this._groupAttributesHandler.setGroupAttributes(e)}},{key:"deleteGroupAttributes",value:function(e){return this._groupAttributesHandler.deleteGroupAttributes(e)}},{key:"getGroupAttributes",value:function(e){return this._groupAttributesHandler.getGroupAttributes(e)}},{key:"isMessageFromTopic",value:function(e,t){return 2===e&&!Bd(t)}},{key:"isMessageFromCommunityOfTopic",value:function(e,t){return 2===e&&Bd(t)}},{key:"getMessageExtensions",value:function(e,t){return Ll.l("".concat(this._n,".getMessageExtensions startSequence:").concat(t)),this.request({protocolName:Mg,requestData:{groupID:e.to,messageSequence:e.sequence,startSequence:t}})}},{key:"modifyMessageExtensions",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Ll.l("".concat(this._n,".modifyMessageExtensions operateType:").concat(n)),this.request({protocolName:Eg,requestData:{groupID:e.to,messageSequence:e.sequence,extensionList:t,operateType:n}})}},{key:"getGroupNotify",value:function(e){var t=this;if(this.hasLocalGroup(e)){var r=this.getLocalGroupProfile(e),i=r.type,o=r.isSupportTopic;if(!_d(i)&&!o){var a="".concat(this._n,".getGroupNotify"),s=this._getGroupLastRevokedTime(e),c=1e3*wl();Ll.l("".concat(a," groupID:").concat(e," type:").concat(i," beginTime:").concat(s," endTime:").concat(c)),this.request({protocolName:kg,requestData:{type:yd({type:i,groupID:e})?bi.GRP_COMMUNITY:void 0,groupID:e,beginTime:s,endTime:c}}).then((function(r){var i=r.data,o=i.nextRevokedTime,s=i.notifyList;Ll.l("".concat(a," ok. groupID:").concat(e," nextRevokedTime:").concat(o));var c={dataList:[{elements:{revokedInfos:[]}}]};Xl(s)&&s.forEach((function(t){c.dataList[0].elements.revokedInfos.push({groupID:e,sequence:t.sequence,random:t.random,revokerInfo:n({},t.revokerInfo)})})),t.onGroupMessageRevoked(c),0!==o?(t._setGroupLastRevokedTime(e,o),t.getGroupNotify(e)):t._setGroupLastRevokedTime(e,1e3*wl())})).catch((function(e){Ll.e("".concat(a," failed. error:"),e)}))}}}},{key:"_getGroupLastRevokedTime",value:function(e){return this.hasLocalGroup(e)?this.getLocalGroupProfile(e)._lastRevokedTime:0}},{key:"_setGroupLastRevokedTime",value:function(e,t){this.hasLocalGroup(e)&&(this.getLocalGroupProfile(e)._lastRevokedTime=t)}},{key:"isGroupCountersNotice",value:function(e){return this._groupCountersHandler.isGroupCountersNotice(e)}},{key:"setGroupCounters",value:function(e){return this._groupCountersHandler.setGroupCounters(e)}},{key:"increaseGroupCounter",value:function(e){return this._groupCountersHandler.increaseGroupCounter(e)}},{key:"decreaseGroupCounter",value:function(e){return this._groupCountersHandler.decreaseGroupCounter(e)}},{key:"getGroupCounters",value:function(e){return this._groupCountersHandler.getGroupCounters(e)}},{key:"restartPolling",value:function(){this._AVChatRoomHandler&&this._AVChatRoomHandler.restartPolling()}},{key:"reset",value:function(){this.groupMap.clear(),this._unjoinedAVChatRoomList.clear(),this._receiptDetailCompleteMap.clear(),this._commonGroupHandler.reset(),this._groupSystemNoticeHandler.reset(),this._groupTipsHandler.reset(),this._groupAttributesHandler.reset(),this._groupCountersHandler.reset(),this._AVChatRoomHandler&&this._AVChatRoomHandler.reset()}}]),r}(uh),TT=function(){function e(t){i(this,e),this.userID="",this.avatar="",this.nick="",this.role="",this.joinTime="",this.lastSendMsgTime="",this.nameCard="",this.muteUntil=0,this.memberCustomField=[],this._initMember(t)}return a(e,[{key:"_initMember",value:function(e){this.updateMember(e)}},{key:"updateMember",value:function(e){var t=[null,void 0,"",0,NaN];e.memberCustomField&&vd(this.memberCustomField,e.memberCustomField),ad(this,e,["memberCustomField","marks"],t)}},{key:"updateRole",value:function(e){["Owner","Admin","Member"].indexOf(e)<0||(this.role=e)}},{key:"updateMuteUntil",value:function(e){Zl(e)||(this.muteUntil=Math.floor((Date.now()+1e3*e)/1e3))}},{key:"updateNameCard",value:function(e){Zl(e)||(this.nameCard=e)}},{key:"updateMemberCustomField",value:function(e){e&&vd(this.memberCustomField,e)}}]),e}(),CT=function(e){c(r,e);var t=m(r);function r(e){var n;return i(this,r),(n=t.call(this,e))._n="GroupMemberModule",n.groupMemberListMap=new Map,n.getInnerEmitterInstance().on(LI,n._onProfileUpdated,g(n)),n}return a(r,[{key:"_onProfileUpdated",value:function(e){for(var t=this,n=e.data,r=function(e){var r=n[e];t.groupMemberListMap.forEach((function(e){e.has(r.userID)&&e.get(r.userID).updateMember({nick:r.nick,avatar:r.avatar})}))},i=0;i<n.length;i++)r(i)}},{key:"deleteGroupMemberList",value:function(e){this.groupMemberListMap.delete(e)}},{key:"getGroupMemberList",value:function(e){var t=this,n=e.groupID,r=e.offset,i=void 0===r?0:r,o=e.count,a=void 0===o?15:o,s=e.filter,c=void 0===s?void 0:s,u="".concat(this._n,".").concat("getGroupMemberList"),l=this.getModule(jf),d=l.hasLocalGroup(n);if(Ll.l("".concat(u," groupID:").concat(n," offset:").concat(i," count:").concat(a," hasLocalGroup:").concat(d)),!d)return hI({memberList:[],offset:0});if(l.getLocalGroupProfile(n).type===bi.GRP_AVCHATROOM){if(this.canIUse(Nu.AVCHATROOM_MBR_LIST))return this._getAVChatRoomMemberList({groupID:n,offset:i,filter:c});this.outputWarning("LiveOnlineMember")}var p=new a_("getGroupMemberList"),f=0,h={groupID:n,limit:a>100?100:a};yd({groupID:n})?h.next="".concat(i):(h.offset=i,f=i+a);var g=[];return this.request({protocolName:Dg,requestData:h}).then((function(e){var r=e.data,i=r.members,o=r.memberNum,a=r.next,s=void 0===a?void 0:a;if(Zl(s)||(f=Bd(s)?0:s),!Xl(i)||0===i.length)return f=0,Promise.resolve([]);var c=t.getModule(jf);return c.hasLocalGroup(n)&&(c.getLocalGroupProfile(n).memberNum=o),g=t._updateLocalGroupMemberMap(n,i),t.getModule(Nf).getUserProfile({userIDList:i.map((function(e){return e.userID})),tagList:[Pl.NICK,Pl.AVATAR]})})).then((function(e){var r=e.data;if(!Xl(r)||0===r.length)return hI({memberList:[],offset:f});var o=r.map((function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}}));return t._updateLocalGroupMemberMap(n,o),g.length<a&&(f=0),p.setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(n," offset:").concat(i," count:").concat(a)).end(),Ll.l("".concat(u," ok.")),lI({memberList:g,offset:f})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];p.setError(e,r,i).end()})),Ll.e("".concat(u," failed. error:"),e),gI(e)}))}},{key:"_getAVChatRoomMemberList",value:function(e){var t=this,n=e.groupID,r=e.offset,i=e.filter,o="".concat(this._n,".").concat("_getAVChatRoomMemberList"),a=new a_("_getAVChatRoomMemberList");return a.setMessage("groupID:".concat(n," offset:").concat(r," filter:").concat(i)),this.request({protocolName:Ag,requestData:{groupID:n,offset:r,filter:i}}).then((function(e){var r=e.data,i=r.memberList,s=void 0===i?[]:i,c=r.offset,u=void 0===c?0:c;a.setNetworkType(t.getNetworkType()).end(),Ll.l("".concat(o," ok. member count:").concat(s.length,", next request timestamp:").concat(u));var l=t._updateLocalGroupMemberMap(n,s);return lI({memberList:l,offset:u})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];a.setError(e,r,i).end()})),Ll.e("".concat(o," failed. error:"),e),gI(e)}))}},{key:"getGroupMemberProfile",value:function(e){var t=this,r="".concat(this._n,".").concat("getGroupMemberProfile"),i=new a_("getGroupMemberProfile");i.setMessage(e.userIDList.length>5?"userIDList.length:".concat(e.userIDList.length):"userIDList:".concat(e.userIDList)),Ll.l("".concat(r," groupID:").concat(e.groupID," userIDList:").concat(e.userIDList.join(","))),e.userIDList.length>50&&(e.userIDList=e.userIDList.slice(0,50));var o=e.groupID,a=e.userIDList;return this._getGroupMemberProfileAdvance(n(n({},e),{},{userIDList:a})).then((function(e){var n=e.data.members;return Xl(n)&&0!==n.length?(t._updateLocalGroupMemberMap(o,n),t.getModule(Nf).getUserProfile({userIDList:n.map((function(e){return e.userID})),tagList:[Pl.NICK,Pl.AVATAR]})):hI([])})).then((function(e){var n=e.data.map((function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}}));t._updateLocalGroupMemberMap(o,n);var r=a.filter((function(e){return t.hasLocalGroupMember(o,e)})).map((function(e){return t.getLocalGroupMemberInfo(o,e)}));return i.setNetworkType(t.getNetworkType()).end(),lI({memberList:r})}))}},{key:"addGroupMember",value:function(e){var t=this,n="".concat(this._n,".").concat("addGroupMember"),r=e.groupID,i=this.getModule(jf).getLocalGroupProfile(r),o=i.type,a=new a_("addGroupMember");if(a.setMessage("groupID:".concat(r," groupType:").concat(o)),_d(o)){var s=new dI({code:pm});return a.setError(s,!0,this.getNetworkType()).end(),gI(s)}return e.userIDList=e.userIDList.map((function(e){return{userID:e}})),Ll.l("".concat(n," groupID:").concat(r)),this.request({protocolName:xg,requestData:e}).then((function(r){var o=r.data.members;Ll.l("".concat(n," ok"));var s=o.filter((function(e){return 1===e.result})).map((function(e){return e.userID})),c=o.filter((function(e){return 0===e.result})).map((function(e){return e.userID})),u=o.filter((function(e){return 2===e.result})).map((function(e){return e.userID})),l=o.filter((function(e){return 4===e.result})).map((function(e){return e.userID})),d="groupID:".concat(e.groupID,", ")+"successUserIDList:".concat(s,", ")+"failureUserIDList:".concat(c,", ")+"existedUserIDList:".concat(u,", ")+"overLimitUserIDList:".concat(l);return a.setNetworkType(t.getNetworkType()).setMoreMessage(d).end(),0===s.length?lI({successUserIDList:s,failureUserIDList:c,existedUserIDList:u,overLimitUserIDList:l}):(i.memberCount+=s.length,t._updateConversationGroupProfile(i),lI({successUserIDList:s,failureUserIDList:c,existedUserIDList:u,overLimitUserIDList:l,group:i}))})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];a.setError(e,r,i).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"deleteGroupMember",value:function(e){var t=this,n="".concat(this._n,".").concat("deleteGroupMember"),r=e.groupID,i=e.userIDList,o=this.getModule(jf).getLocalGroupProfile(r);if(Zl(o))return gI({code:am});if(_d(o.type))return this.canIUse(Nu.AVCHATROOM_BAN_MBR)?this._banAVChatRoomMember(e):gI({code:Vm});var a=new a_("deleteGroupMember"),s="groupID:".concat(r," ").concat(i.length>5?"userIDList.length:".concat(i.length):"userIDList:".concat(i));return a.setMessage(s),Ll.l("".concat(n," groupID:").concat(r," userIDList:"),i),this.request({protocolName:Lg,requestData:e}).then((function(){return a.setNetworkType(t.getNetworkType()).end(),Ll.l("".concat(n," ok")),o.memberCount-=1,t._updateConversationGroupProfile(o),t.deleteLocalGroupMembers(r,i),lI({group:o,userIDList:i})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];a.setError(e,r,i).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"_updateConversationGroupProfile",value:function(e){this.getModule(Ff).updateConversationGroupProfile([e])}},{key:"_banAVChatRoomMember",value:function(e){var t=this,n="".concat(this._n,".").concat("deleteGroupMember"),r=e.groupID,i=e.userIDList,o="groupID:".concat(r," ").concat(i.length>5?"userIDList.length:".concat(i.length):"userIDList:".concat(i)),a=new a_("deleteGroupMember");a.setMessage(o),Ll.l("".concat(n," groupID:").concat(r," userIDList:"),i);var s=this.getModule(jf).getLocalGroupProfile(r);return Zl(e.duration)||0===e.duration?gI({code:ym}):this.request({protocolName:Ng,requestData:e}).then((function(){return a.setNetworkType(t.getNetworkType()).end(),Ll.l("".concat(n," ok")),t.deleteLocalGroupMembers(r,i),lI({group:s,userIDList:i})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];a.setError(e,r,i).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"setGroupMemberMuteTime",value:function(e){var t=this,n=e.groupID,r=e.userID,i=e.muteTime,o="".concat(this._n,".").concat("setGroupMemberMuteTime");if(r===this.getMyUserID())return gI(new dI({code:_m}));Ll.l("".concat(o," groupID:").concat(n," userID:").concat(r));var a=new a_("setGroupMemberMuteTime");return a.setMessage("groupID:".concat(n," userID:").concat(r," muteTime:").concat(i)),this.modifyGroupMemberInfo({groupID:n,userID:r,muteTime:i}).then((function(e){a.setNetworkType(t.getNetworkType()).end(),Ll.l("".concat(o," ok"));var r=t.getModule(jf);return lI({group:r.getLocalGroupProfile(n),member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];a.setError(e,r,i).end()})),Ll.e("".concat(o," failed. error:"),e),gI(e)}))}},{key:"setGroupMemberRole",value:function(e){var t=this,n="".concat(this._n,".").concat("setGroupMemberRole"),r=e.groupID,i=e.userID,o=e.role,a=this.getModule(jf).getLocalGroupProfile(r);if(a.selfInfo.role!==bi.GRP_MBR_ROLE_OWNER)return gI({code:hm});if([bi.GRP_WORK,bi.GRP_AVCHATROOM].includes(a.type))return gI({code:gm});var s=[bi.GRP_MBR_ROLE_ADMIN,bi.GRP_MBR_ROLE_MEMBER];if(yd({groupID:r})&&s.push(bi.GRP_MBR_ROLE_CUSTOM),s.indexOf(o)<0)return gI({code:vm});if(i===this.getMyUserID())return gI({code:mm});var c=new a_("setGroupMemberRole");return c.setMessage("groupID:".concat(r," userID:").concat(i," role:").concat(o)),Ll.l("".concat(n," groupID:").concat(r," userID:").concat(i)),this.modifyGroupMemberInfo({groupID:r,userID:i,role:o}).then((function(e){return c.setNetworkType(t.getNetworkType()).end(),Ll.l("".concat(n," ok")),lI({group:a,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];c.setError(e,r,i).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"_filterProfanity",value:function(e,t){var n=this.getModule(oh);if(!n)return!0;var r=n.filterText(t[e],Bu),i=r.isAllowedToSend,o=r.modifiedText;return!0===i&&(t[e]=o,!0)}},{key:"setGroupMemberNameCard",value:function(e){var t=this,n="".concat(this._n,".").concat("setGroupMemberNameCard");if(e.nameCard&&!1===this._filterProfanity("nameCard",e))return gI({code:Fm});var r=e.groupID,i=e.userID,o=void 0===i?this.getMyUserID():i,a=e.nameCard;Ll.l("".concat(n," groupID:").concat(r," userID:").concat(o));var s=new a_("setGroupMemberNameCard");return s.setMessage("groupID:".concat(r," userID:").concat(o," nameCard:").concat(a)),this.modifyGroupMemberInfo({groupID:r,userID:o,nameCard:a}).then((function(e){Ll.l("".concat(n," ok")),s.setNetworkType(t.getNetworkType()).end();var i=t.getModule(jf).getLocalGroupProfile(r);return o===t.getMyUserID()&&i&&i.setSelfNameCard(a),lI({group:i,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];s.setError(e,r,i).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"setGroupMemberCustomField",value:function(e){var t=this,n="".concat(this._n,".").concat("setGroupMemberCustomField"),r=e.groupID,i=e.userID,o=void 0===i?this.getMyUserID():i,a=e.memberCustomField;Ll.l("".concat(n," groupID:").concat(r," userID:").concat(o));var s=new a_("setGroupMemberCustomField");return s.setMessage("groupID:".concat(r," userID:").concat(o," memberCustomField:").concat(JSON.stringify(a))),this.modifyGroupMemberInfo({groupID:r,userID:o,memberCustomField:a}).then((function(e){s.setNetworkType(t.getNetworkType()).end(),Ll.l("".concat(n," ok"));var i=t.getModule(jf).getLocalGroupProfile(r);return lI({group:i,member:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];s.setError(e,r,i).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"modifyGroupMemberInfo",value:function(e){var t=this,r=e.groupID,i=e.userID,o=void 0;return bd(r)&&(r=Nd(o=r)),this.request({protocolName:Pg,requestData:n(n({},e),{},{groupID:r,topicID:o})}).then((function(){if(t.hasLocalGroupMember(r,i)){var n=t.getLocalGroupMemberInfo(r,i);return Zl(e.muteTime)||n.updateMuteUntil(e.muteTime),Zl(e.role)||n.updateRole(e.role),Zl(e.nameCard)||n.updateNameCard(e.nameCard),Zl(e.memberCustomField)||n.updateMemberCustomField(e.memberCustomField),n}return t.getGroupMemberProfile({groupID:r,userIDList:[i]}).then((function(e){return _(e.data.memberList,1)[0]}))}))}},{key:"markGroupMemberList",value:function(e){var t=this,n="".concat(this._n,".").concat("markGroupMemberList"),r=e.groupID,i=e.markType,o=e.enableMark,a=e.userIDList,s=void 0===a?[]:a,c="groupID:".concat(r," markType:").concat(i," enableMark:").concat(o," userIDList count: ").concat(s.length);Ll.l("".concat(n," ").concat(c));var u=2,l=[];!0===o&&(u=1);var d=y(s);s.length>500&&(d=s.slice(0,500),Ll.w("".concat(n," ").concat(Vd(500)))),d.forEach((function(e){l.push({userID:e,markType:[i]})})),d=null;var p=new a_("markGroupMemberList");return p.setMessage("".concat(c)),this.request({protocolName:jg,requestData:{groupID:r,operationType:u,memberList:l}}).then((function(e){var r=e.data.memberList,i=void 0===r?[]:r,o=[],a=[];i.length===s.length?o.push.apply(o,y(s)):(i.forEach((function(e){o.push(e.userID)})),s.forEach((function(e){o.includes(e)||a.push(e)})));var c="success count:".concat(o.length," fail count:").concat(a.length);return p.setNetworkType(t.getNetworkType()).setMessage(c).end(),Ll.l("".concat(n," ok. ").concat(c)),lI({successUserIDList:o,failureUserIDList:a})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];p.setError(e,r,i).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"_getGroupMemberProfileAdvance",value:function(e){return this.request({protocolName:Rg,requestData:n(n({},e),{},{memberInfoFilter:e.memberInfoFilter?e.memberInfoFilter:["Role","JoinTime","NameCard","ShutUpUntil"]})})}},{key:"_updateLocalGroupMemberMap",value:function(e,t){var n=this;return Xl(t)&&0!==t.length?t.map((function(t){return n.hasLocalGroupMember(e,t.userID)?n.getLocalGroupMemberInfo(e,t.userID).updateMember(t):n.setLocalGroupMember(e,new TT(t)),n.getLocalGroupMemberInfo(e,t.userID)})):[]}},{key:"deleteLocalGroupMembers",value:function(e,t){var n=this.groupMemberListMap.get(e);n&&t.forEach((function(e){n.delete(e)}))}},{key:"getLocalGroupMemberInfo",value:function(e,t){return this.groupMemberListMap.has(e)?this.groupMemberListMap.get(e).get(t):null}},{key:"setLocalGroupMember",value:function(e,t){if(this.groupMemberListMap.has(e))this.groupMemberListMap.get(e).set(t.userID,t);else{var n=(new Map).set(t.userID,t);this.groupMemberListMap.set(e,n)}}},{key:"getLocalGroupMemberList",value:function(e){return this.groupMemberListMap.get(e)}},{key:"hasLocalGroupMember",value:function(e,t){return this.groupMemberListMap.has(e)&&this.groupMemberListMap.get(e).has(t)}},{key:"hasLocalGroupMemberMap",value:function(e){return this.groupMemberListMap.has(e)}},{key:"reset",value:function(){this.groupMemberListMap.clear()}}]),r}(uh),ST=["topicID","topicName","avatar","introduction","notification","unreadCount","muteAllMembers","customData","groupAtInfoList","nextMessageSeq","selfInfo"],ET=function(e,t){return Bd(e)?{lastTime:0,lastSequence:0,fromAccount:"",payload:null,type:"",messageForShow:"",nick:"",version:0,cloudCustomData:"",isRevoked:!1,revoker:null}:{lastTime:e.time||0,lastSequence:e.sequence||0,fromAccount:e.from||"",payload:e.payload||null,type:e.type||"",messageForShow:Pd(e.type,e.payload,t),nick:e.nick||"",version:e.version||0,cloudCustomData:e.cloudCustomData||"",isRevoked:e.isRevoked||!1,revoker:e.revoker||null}},MT=function(){function e(t,n){i(this,e),this.topicID="",this.topicName="",this.avatar="",this.introduction="",this.notification="",this.unreadCount=0,this.muteAllMembers=!1,this.customData="",this.groupAtInfoList=[],this.nextMessageSeq=0,this.lastMessage=ET(t.lastMessage,n),this.selfInfo={muteTime:0,readedSequence:0,messageRemindType:"",excludedUnreadSequenceList:void 0},this._initTopic(t)}return a(e,[{key:"_initTopic",value:function(e){for(var t in e)ST.indexOf(t)<0||("selfInfo"===t?this.updateSelfInfo(e[t]):this[t]="muteAllMembers"===t?1===e[t]:e[t])}},{key:"updateUnreadCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.unreadCount=e}},{key:"updateNextMessageSeq",value:function(e){this.nextMessageSeq=e}},{key:"updateLastMessage",value:function(e){this.lastMessage=ET(e)}},{key:"updateGroupAtInfoList",value:function(e){this.groupAtInfoList=JSON.parse(JSON.stringify(e))}},{key:"updateTopic",value:function(e){Zl(e.selfInfo)||this.updateSelfInfo(e.selfInfo),Zl(e.muteAllMembers)||(this.muteAllMembers=1===e.muteAllMembers),ad(this,e,["groupID","lastMessageTime","selfInfo","muteAllMembers","lastMsg"])}},{key:"updateSelfInfo",value:function(e){return 0!==ad(this.selfInfo,e,[],[""])}},{key:"reduceUnreadCount",value:function(){return this.unreadCount>=1&&(this.unreadCount-=1,!0)}},{key:"isLastMessageRevoked",value:function(e){return e.sequence===this.lastMessage.lastSequence}},{key:"setLastMessageRevoked",value:function(e){this.lastMessage.isRevoked=e}},{key:"setLastMessageRevoker",value:function(e){this.lastMessage.revoker=e}}]),e}(),kT=function(e){c(r,e);var t=m(r);function r(e){var n;return i(this,r),(n=t.call(this,e))._n="TopicModule",n._topicMap=new Map,n._getTopicTimeMap=new Map,n.TOPIC_CACHE_TIME=300,n.TOPIC_LAST_ACTIVE_TIME=3600,n.getInnerEmitterInstance().on(xI,n._onCloudConfigUpdated,g(n)),n}return a(r,[{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("topic_cache_time"),t=this.getCloudConfig("topic_last_active_time");Zl(e)||(this.TOPIC_CACHE_TIME=Number(e)),Zl(t)||(this.TOPIC_LAST_ACTIVE_TIME=Number(t))}},{key:"onTopicCreated",value:function(e){var t=e.groupID;this.resetGetTopicTime(t),this.emitOuterEvent(yi.TOPIC_CREATED,e)}},{key:"onTopicDeleted",value:function(e){var t=this,n=e.groupID,r=e.topicIDList;(void 0===r?[]:r).forEach((function(e){t._deleteLocalTopic(n,e)})),this.emitOuterEvent(yi.TOPIC_DELETED,e)}},{key:"onTopicMessageRemindTypeUpdated",value:function(e){var t=e.groupID,n=e.topicID,r=e.messageRemindType,i=this.getLocalTopic(t,n);if(i){var o=i.updateSelfInfo({messageRemindType:r});o&&this.emitOuterEvent(yi.TOPIC_UPDATED,{groupID:t,topic:i}),Ll.d("".concat(this._n,".onTopicMessageRemindTypeUpdated topicID:").concat(n)+" messageRemindType:".concat(r," isTopicUpdated:").concat(o))}}},{key:"onTopicProfileUpdated",value:function(e){var t=e.groupID,n=e.topicID,r=this.getLocalTopic(t,n);r&&(r.updateTopic(e),this.emitOuterEvent(yi.TOPIC_UPDATED,{groupID:t,topic:r}))}},{key:"onConversationProxy",value:function(e){var t=e.topicID,n=e.unreadCount,r=e.groupAtInfoList,i=Nd(t),o=this.getLocalTopic(i,t),a=!1;o&&(Zl(n)||o.unreadCount===n||(o.updateUnreadCount(n),a=!0),Zl(r)||(o.updateGroupAtInfoList(r),a=!0)),a&&this.emitOuterEvent(yi.TOPIC_UPDATED,{groupID:i,topic:o})}},{key:"onMessageSent",value:function(e){var t=e.groupID,n=e.topicID,r=e.lastMessage,i=this.getLocalTopic(t,n);i&&(i.nextMessageSeq+=1,i.updateLastMessage(r),this.emitOuterEvent(yi.TOPIC_UPDATED,{groupID:t,topic:i}))}},{key:"onMessageModified",value:function(e){var t=e.to,n=e.time,r=e.sequence,i=e.elements,o=e.cloudCustomData,a=e.messageVersion,s=Nd(t),c=this.getLocalTopic(s,t);if(c){var u=c.lastMessage;Ll.d("".concat(this._n,".onMessageModified topicID:").concat(t," lastMessage:"),JSON.stringify(u),"options:",JSON.stringify(e)),u&&(null===u.payload||u.lastTime===n&&u.lastSequence===r&&u.version!==a)&&(u.type=i[0].type,u.payload=i[0].content,u.messageForShow=Pd(u.type,u.payload,this.isIntl()),u.cloudCustomData=o,u.version=a,u.lastSequence=r,u.lastTime=n,this.emitOuterEvent(yi.TOPIC_UPDATED,{groupID:s,topic:c}))}}},{key:"onMessageRevoked",value:function(e){var t=this;if(0!==e.length){var n=null,r=null,i=!1;e.forEach((function(e){var o=e.to;r=Nd(o),(n=t.getLocalTopic(r,o))&&(n.reduceUnreadCount()&&(i=!0),n.isLastMessageRevoked(e)&&(n.setLastMessageRevoked(!0),n.setLastMessageRevoker(e.revoker),i=!0))})),i&&this.emitOuterEvent(yi.TOPIC_UPDATED,{groupID:r,topic:n})}}},{key:"isLastMessageRevoked",value:function(e){var t=e.topicID,n=e.sequence,r=Nd(t),i=this.getLocalTopic(r,t),o=!1;return i&&(o=i.isLastMessageRevoked({sequence:n})),o}},{key:"getJoinedCommunityList",value:function(){return this.getModule(jf).getGroupList({isGroupWithTopicOnly:!0}).then((function(e){var t=e.data.groupList;return lI({groupList:void 0===t?[]:t})})).catch((function(e){return gI(e)}))}},{key:"createTopicInCommunity",value:function(e){var t=this,r="".concat(this._n,".").concat("createTopicInCommunity"),i=e.topicID;if(!Zl(i)&&!bd(i))return gI({code:Gm});if(e.topicName&&!1===this._filterProfanity("topicName",e))return gI({code:Fm});if(e.introduction&&!1===this._filterProfanity("introduction",e))return gI({code:Fm});if(e.notification&&!1===this._filterProfanity("notification",e))return gI({code:Fm});var o=new a_("createTopicInCommunity");return this.request({protocolName:ev,requestData:n({},e)}).then((function(i){var a=i.data.topicID;return o.setMessage("topicID:".concat(a)).setNetworkType(t.getNetworkType()).end(),Ll.l("".concat(r," ok")),t._updateTopicMap([n(n({},e),{},{topicID:a})]),lI({topicID:a})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];o.setError(e,r,i).end()})),Ll.e("".concat(r," failed. error:"),e),gI(e)}))}},{key:"deleteTopicFromCommunity",value:function(e){var t=this,n="".concat(this._n,".").concat("deleteTopicFromCommunity"),r=e.groupID,i=e.topicIDList,o=void 0===i?[]:i,a=new a_("deleteTopicFromCommunity");return a.setMessage("groupID:".concat(r," topicIDList:").concat(o)),this.request({protocolName:tv,requestData:{groupID:r,topicIDList:o}}).then((function(e){var n=e.data.resultList,i=[],o=[];(void 0===n?[]:n).forEach((function(e){var t=e.topicID,n=e.errorCode,r=e.errorInfo;0===n?i.push({topicID:t}):o.push({topicID:t,code:n,message:r})}));var s="success count:".concat(i.length,", fail count:").concat(o.length);return a.setMoreMessage("".concat(s)).setNetworkType(t.getNetworkType()).end(),Ll.l("".concat(s)),i.forEach((function(e){t._deleteLocalTopic(r,e.topicID)})),lI({successTopicList:i,failureTopicList:o})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];a.setError(e,r,i).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"updateTopicProfile",value:function(e){var t=this,r="".concat(this._n,".").concat("updateTopicProfile");if(Ll.l("".concat(r," options:"),e),e.topicName&&!1===this._filterProfanity("topicName",e))return gI({code:Fm});if(e.introduction&&!1===this._filterProfanity("introduction",e))return gI({code:Fm});if(e.notification&&!1===this._filterProfanity("notification",e))return gI({code:Fm});var i=new a_("updateTopicProfile");return i.setMessage("groupID:".concat(e.groupID," topicID:").concat(e.topicID)),Zl(e.muteAllMembers)||(e.muteAllMembers=!0===e.muteAllMembers?"On":"Off"),this.request({protocolName:nv,requestData:n({},e)}).then((function(){return i.setNetworkType(t.getNetworkType()).end(),Ll.l("".concat(r," ok")),t._updateTopicMap([e]),lI({topic:t.getLocalTopic(e.groupID,e.topicID)})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],o=n[1];i.setError(e,r,o).end()})),Ll.e("".concat(r," failed. error:"),e),gI(e)}))}},{key:"getTopicList",value:function(e){var t=this,r="".concat(this._n,".").concat("getTopicList"),i=e.groupID,o=e.topicIDList,a=void 0===o?[]:o,s=0===a.length,c=new a_("getTopicList");if(c.setMessage("groupID:".concat(i)),this._getTopicTimeMap.has(i)){var u=this._getTopicTimeMap.get(i),l=u.isGetAll,d=u.time;if((l||!l&&!s)&&Date.now()-d<1e3*this.TOPIC_CACHE_TIME){var p=this._getLocalTopicList(i,a);if(s||p.length===a.length)return c.setNetworkType(this.getNetworkType()).setMoreMessage("from cache, topic count:".concat(p.length)).end(),Ll.l("".concat(r," groupID:").concat(i," from cache, topic count:").concat(p.length)),hI({successTopicList:p,failureTopicList:[]})}}return this.request({protocolName:rv,requestData:{groupID:i,topicIDList:a}}).then((function(e){var o=e.data.topicInfoList,a=[],u=[],l=[];(void 0===o?[]:o).forEach((function(e){var t=e.topic,r=e.selfInfo,i=e.errorCode,o=e.errorInfo,s=t.topicID;0===i?(a.push(n(n({},t),{},{selfInfo:r})),u.push(s)):l.push({topicID:s,code:i,message:o})})),t._updateTopicMap(a),t._handleTopicAtInfo(a);var d="success count:".concat(u.length,", fail count:").concat(l.length);c.setNetworkType(t.getNetworkType()).setMoreMessage("".concat(d)).end(),Ll.l("".concat(r," groupID:").concat(i," from remote, ").concat(d));var p=[];return Bd(u)||(t._getTopicTimeMap.set(i,{time:Date.now(),isGetAll:s}),p=t._getLocalTopicList(i,u)),lI({successTopicList:p,failureTopicList:l})})).catch((function(e){return t.probeNetwork(e).then((function(t){var n=_(t,2),r=n[0],i=n[1];c.setError(e,r,i).end()})),Ll.e("".concat(r," failed. error:"),e),gI(e)}))}},{key:"hasLocalTopic",value:function(e,t){return!!this._topicMap.has(e)&&this._topicMap.get(e).has(t)}},{key:"getLocalTopic",value:function(e,t){var n=null;return this._topicMap.has(e)&&(n=this._topicMap.get(e).get(t)),n}},{key:"_getLocalTopicList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this._topicMap.get(e),r=[];return n&&(r=y(n.values())),0===t.length?r:r.filter((function(e){return t.includes(e.topicID)}))}},{key:"_deleteLocalTopic",value:function(e,t){this._topicMap.has(e)&&(this._topicMap.get(e).delete(t),Ll.l("".concat(this._n,"._deleteLocalTopic groupID:").concat(e," topicID:").concat(t)))}},{key:"_updateTopicMap",value:function(e){var t=this,n=[];e.forEach((function(e){var r=e.groupID,i=e.topicID,o=null;t._topicMap.has(r)||t._topicMap.set(r,new Map),t._topicMap.get(r).has(i)?(o=t._topicMap.get(r).get(i)).updateTopic(e):(t._getTopicLastMessage(e),o=new MT(e,t.isIntl()),t._topicMap.get(r).set(i,o));var a=t._computeUnreadCount(o);o.updateUnreadCount(a),n.push({conversationID:"".concat(bi.CONV_GROUP).concat(i),type:bi.CONV_TOPIC,unreadCount:a})})),n.length>0&&this.getModule(Ff).updateTopicConversation(n)}},{key:"resetGetTopicTime",value:function(e){var t=this;Zl(e)?y(this._getTopicTimeMap.keys()).forEach((function(e){t._getTopicTimeMap.set(e,0)})):this._getTopicTimeMap.set(e,0)}},{key:"getTopicListOnReconnected",value:function(){var e=this,t=y(this._topicMap.keys()),n=[];t.forEach((function(t){var r=[];e._getLocalTopicList(t).forEach((function(t){var n=t.lastMessage.lastTime,i=void 0===n?0:n;Date.now()-1e3*i<1e3*e.TOPIC_LAST_ACTIVE_TIME&&r.push(t.topicID)})),r.length>0&&n.push({groupID:t,topicIDList:r})})),Ll.l("".concat(this._n,".getTopicListOnReconnected. active community count:").concat(n.length)),this._relayGetTopicList(n)}},{key:"_relayGetTopicList",value:function(e){var t=this;if(0!==e.length){var n=e.shift(),r=n.topicIDList.length>5?"topicIDList.length:".concat(n.topicIDList.length):"topicIDList:".concat(n.topicIDList),i=new a_("relayGetTopicList");i.setMessage(r),Ll.l("".concat(this._n,"._relayGetTopicList. ").concat(r)),this.getTopicList(n).then((function(){i.setNetworkType(t.getNetworkType()).end(),t._relayGetTopicList(e)})).catch((function(n){t.probeNetwork().then((function(e){var t=_(e,2),r=t[0],o=t[1];i.setError(n,r,o).end()})),t._relayGetTopicList(e)}))}}},{key:"_handleTopicAtInfo",value:function(e){var t=this;0!==e.length&&e.forEach((function(e){var r=e.groupID,i=e.topicID,o=e.groupAtInfoList,a=[];Zl(o)||(o.forEach((function(e){a.push(n(n({},e),{},{groupID:r,topicID:i}))})),t.getModule(Ff).onNewGroupAtTips({dataList:a}))}))}},{key:"_getTopicLastMessage",value:function(e){if(!Zl(e.lastMsg)){var t={time:e.lastMsg.time,sequence:e.lastMsg.sequence,from:e.lastMsg.from,payload:e.lastMsg.elements[0]?e.lastMsg.elements[0].content:null,type:e.lastMsg.elements[0]?e.lastMsg.elements[0].type:"",nick:e.lastMsg.nick,version:e.lastMsg.messageVersion,cloudCustomData:e.lastMsg.cloudCustomData,isRevoked:2===e.lastMsg.isPlaceMessage,revoker:Bd(e.lastMsg.revokerInfo)?null:e.lastMsg.revokerInfo.revoker};e.lastMessage=t}}},{key:"deleteTopicListInCommunity",value:function(e){var t=this,n=this._getLocalTopicList(e),r=this.getModule(Ff);n.forEach((function(n){var i=n.topicID;t._deleteLocalTopic(e,i),t._getTopicTimeMap.delete(e),r.deleteLocalConversation("".concat(bi.CONV_GROUP).concat(i))}))}},{key:"_computeUnreadCount",value:function(e){var t=e.selfInfo,n=t.excludedUnreadSequenceList,r=t.readedSequence,i=e.nextMessageSeq-e.selfInfo.readedSequence-1;if(Xl(n)){var o=0;n.forEach((function(t){t>=r&&t<=e.nextMessageSeq-1&&(o+=1)})),o>=1&&(i-=o)}return i<0?0:i}},{key:"_filterProfanity",value:function(e,t){var n=this.getModule(oh);if(!n)return!0;var r=n.filterText(t[e],Fu),i=r.isAllowedToSend,o=r.modifiedText;return!0===i&&(t[e]=o,!0)}},{key:"updateLastMessage",value:function(e,t){var n=Nd(e),r=this.getLocalTopic(n,e);if(r){var i=t.sequence+1;r.updateNextMessageSeq(i),r.updateLastMessage(t),this.emitOuterEvent(yi.TOPIC_UPDATED,{groupID:n,topic:r})}}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset")),this._topicMap.clear(),this._getTopicTimeMap.clear(),this.TOPIC_CACHE_TIME=300,this.TOPIC_LAST_ACTIVE_TIME=3600}}]),r}(uh),wT=function(){function e(t){i(this,e),this._userModule=t,this._n="ProfileHandler",this.TAG="profile",this.accountProfileMap=new Map,this.expirationTime=864e5}return a(e,[{key:"setExpirationTime",value:function(e){this.expirationTime=e}},{key:"getUserProfile",value:function(e){var t=this,n=e.userIDList;e.fromAccount=this._userModule.getMyAccount(),n.length>100&&(Ll.w("".concat(this._n,".getUserProfile ").concat(Vd(100))),n.length=100);for(var r,i=[],o=[],a=0,s=n.length;a<s;a++)r=n[a],this._userModule.isMyFriend(r)&&this._containsAccount(r)?o.push(this._getProfileFromMap(r)):i.push(r);if(0===i.length)return hI(o);e.toAccount=i;var c=e.bFromGetMyProfile||!1,u=[];e.toAccount.forEach((function(e){u.push({toAccount:e,standardSequence:0,customSequence:0})})),e.userItem=u;var l=new a_("getUserProfile");return l.setMessage(n.length>5?"userIDList.length:".concat(n.length):"userIDList:".concat(n)),this._userModule.request({protocolName:_h,requestData:e}).then((function(e){l.setNetworkType(t._userModule.getNetworkType()).end(),Ll.i("".concat(t._n,".getUserProfile ok"));var n=t._handleResponse(e).concat(o);return lI(c?n[0]:n)})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];l.setError(e,r,i).end()})),Ll.e("".concat(t._n,".getUserProfile failed. error:"),e),gI(e)}))}},{key:"getMyProfile",value:function(){var e=this._userModule.getMyAccount();if(Ll.l("".concat(this._n,".getMyProfile myAccount:").concat(e)),this._fillMap(),this._containsAccount(e)){var t=this._getProfileFromMap(e);return Ll.d("".concat(this._n,".getMyProfile from cache, myProfile:")+JSON.stringify(t)),hI(t)}return this.getUserProfile({fromAccount:e,userIDList:[e],bFromGetMyProfile:!0})}},{key:"_handleResponse",value:function(e){for(var t,n,r=od(),i=e.data.userProfileItem,o=[],a=0,s=i.length;a<s;a++)"@TLS#NOT_FOUND"!==i[a].to&&""!==i[a].to&&(t=i[a].to,n=this._updateMap(t,this._getLatestProfileFromResponse(t,i[a].profileItem)),o.push(n));return Ll.l("".concat(this._n,"._handleResponse cost ").concat(od()-r," ms")),o}},{key:"_getLatestProfileFromResponse",value:function(e,t){var n={};if(n.userID=e,n.profileCustomField=[],!Bd(t))for(var r=0,i=t.length;r<i;r++)if(t[r].tag.indexOf("Tag_Profile_Custom")>-1)n.profileCustomField.push({key:t[r].tag,value:t[r].value});else switch(t[r].tag){case Pl.NICK:n.nick=t[r].value;break;case Pl.GENDER:n.gender=t[r].value;break;case Pl.BIRTHDAY:n.birthday=t[r].value;break;case Pl.LOCATION:n.location=t[r].value;break;case Pl.SELFSIGNATURE:n.selfSignature=t[r].value;break;case Pl.ALLOWTYPE:n.allowType=t[r].value;break;case Pl.LANGUAGE:n.language=t[r].value;break;case Pl.AVATAR:n.avatar=t[r].value;break;case Pl.MESSAGESETTINGS:n.messageSettings=t[r].value;break;case Pl.ADMINFORBIDTYPE:n.adminForbidType=t[r].value;break;case Pl.LEVEL:n.level=t[r].value;break;case Pl.ROLE:n.role=t[r].value;break;default:Ll.w("".concat(this._n,"._handleResponse unknown tag:"),t[r].tag,t[r].value)}return n}},{key:"updateMyProfile",value:function(e){var t=this,n="".concat(this._n,".updateMyProfile");if(e.nick&&!1===this._userModule.filterProfanity("nick",e))return gI({code:Fm});if(e.selfSignature&&!1===this._userModule.filterProfanity("selfSignature",e))return gI({code:Fm});var r=new a_("updateMyProfile");r.setMessage(JSON.stringify(e));var i=(new BI).validate(e);if(!i.valid)return r.setCode(bm).setMoreMessage("updateMyProfile info:".concat(i.tips)).setNetworkType(this._userModule.getNetworkType()).end(),Ll.e("".concat(n," info:").concat(i.tips)),gI({code:bm});var o=[];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&("profileCustomField"===a?e.profileCustomField.forEach((function(e){o.push({tag:e.key,value:e.value})})):o.push({tag:Pl[a.toUpperCase()],value:e[a]}));if(0===o.length){var s=new dI({code:Im});return r.setError(s,!0,this._userModule.getNetworkType()).end(),Ll.e("".concat(n," failed. error:"),s),gI(s)}return this._userModule.request({protocolName:yh,requestData:{fromAccount:this._userModule.getMyAccount(),profileItem:o}}).then((function(i){r.setNetworkType(t._userModule.getNetworkType()).end(),Ll.i("".concat(n," ok"));var o=t._updateMap(t._userModule.getMyAccount(),e);return t._userModule.emitOuterEvent(yi.PROFILE_UPDATED,[o]),hI(o)})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=_(t,2),i=n[0],o=n[1];r.setError(e,i,o).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"onProfileModified",value:function(e){var t=e.dataList;if(!Bd(t)){var n,r,i=t.length;Ll.d("".concat(this._n,".onProfileModified count:").concat(i," dataList:"),e.dataList);for(var o=[],a=0;a<i;a++)n=t[a].userID,r=this._updateMap(n,this._getLatestProfileFromResponse(n,t[a].profileList)),o.push(r);o.length>0&&(this._userModule.emitInnerEvent(LI,o),this._userModule.emitOuterEvent(yi.PROFILE_UPDATED,o))}}},{key:"_fillMap",value:function(){if(0===this.accountProfileMap.size){for(var e=this._getCachedProfiles(),t=Date.now(),n=0,r=e.length;n<r;n++)t-e[n].lastUpdatedTime<this.expirationTime&&this.accountProfileMap.set(e[n].userID,e[n]);Ll.l("".concat(this._n,"._fillMap from cache, map.size:").concat(this.accountProfileMap.size))}}},{key:"_updateMap",value:function(e,t){var n,r=Date.now();return this._containsAccount(e)?(n=this._getProfileFromMap(e),t.profileCustomField&&vd(n.profileCustomField,t.profileCustomField),ad(n,t,["profileCustomField"]),n.lastUpdatedTime=r):(n=new BI(t),(this._userModule.isMyFriend(e)||e===this._userModule.getMyAccount())&&(n.lastUpdatedTime=r,this.accountProfileMap.set(e,n))),this._flushMap(e===this._userModule.getMyAccount()),n}},{key:"_flushMap",value:function(e){var t=y(this.accountProfileMap.values()),n=this._userModule.getStorageModule();Ll.d("".concat(this._n,"._flushMap length:").concat(t.length," flushAtOnce:").concat(e)),n.setItem(this.TAG,t,e)}},{key:"_containsAccount",value:function(e){return this.accountProfileMap.has(e)}},{key:"_getProfileFromMap",value:function(e){return this.accountProfileMap.get(e)}},{key:"_getCachedProfiles",value:function(){var e=this._userModule.getStorageModule().getItem(this.TAG);return Bd(e)?[]:e}},{key:"onConversationsProfileUpdated",value:function(e){for(var t,n,r,i=[],o=0,a=e.length;o<a;o++)n=(t=e[o]).userID,this._userModule.isMyFriend(n)||(this._containsAccount(n)?(r=this._getProfileFromMap(n),ad(r,t)>0&&i.push(n)):i.push(t.userID));0!==i.length&&(Ll.i("".concat(this._n,".onConversationsProfileUpdated toAccountList:").concat(i)),this.getUserProfile({userIDList:i}))}},{key:"getNickAndAvatarByUserID",value:function(e){if(this._containsAccount(e)){var t=this._getProfileFromMap(e);return{nick:t.nick,avatar:t.avatar}}return{nick:"",avatar:""}}},{key:"reset",value:function(){this._flushMap(!0),this.accountProfileMap.clear()}}]),e}(),OT=a((function e(t){i(this,e),Bd||(this.userID=t.userID||"",this.timeStamp=t.timeStamp||0)})),DT=function(){function e(t){i(this,e),this._userModule=t,this._n="BlacklistHandler",this._blacklistMap=new Map,this.startIndex=0,this.maxLimited=100,this.currentSequence=0}return a(e,[{key:"getLocalBlacklist",value:function(){return y(this._blacklistMap.keys())}},{key:"getBlacklist",value:function(){var e=this,t="".concat(this._n,".getBlacklist"),n={fromAccount:this._userModule.getMyAccount(),maxLimited:this.maxLimited,startIndex:0,lastSequence:this.currentSequence},r=new a_("getBlacklist");return this._userModule.request({protocolName:bh,requestData:n}).then((function(n){var i=n.data,o=i.blackListItem,a=i.currentSequence,s=Bd(o)?0:o.length;r.setNetworkType(e._userModule.getNetworkType()).setMessage("count:".concat(s)).end(),Ll.i("".concat(t," ok")),e.currentSequence=a,e._handleResponse(o,!0),e._userModule.emitOuterEvent(yi.BLACKLIST_UPDATED,y(e._blacklistMap.keys()))})).catch((function(n){return e._userModule.probeNetwork().then((function(e){var t=_(e,2),i=t[0],o=t[1];r.setError(n,i,o).end()})),Ll.e("".concat(t," failed. error:"),n),gI(n)}))}},{key:"addBlacklist",value:function(e){var t=this,n=new a_("addToBlacklist"),r="".concat(this._n,".addBlacklist"),i=this._userModule.getMyAccount();if(1===e.userIDList.length&&e.userIDList[0]===i){var o=Tm,a=this._userModule.getErrorMessage(o);n.setCode(o).setMessage(a).setNetworkType(this._userModule.getNetworkType()).end();var s=new dI({code:o});return Ll.e("".concat(r," failed. error:"),s),gI(s)}return e.userIDList.includes(i)&&(e.userIDList=e.userIDList.filter((function(e){return e!==i}))),e.fromAccount=this._userModule.getMyAccount(),e.toAccount=e.userIDList,this._userModule.request({protocolName:Ih,requestData:e}).then((function(i){return n.setNetworkType(t._userModule.getNetworkType()).setMessage(e.userIDList.length>5?"userIDList.length:".concat(e.userIDList.length):"userIDList:".concat(e.userIDList)).end(),Ll.i("".concat(r," ok")),t._handleResponse(i.resultItem,!0),lI(y(t._blacklistMap.keys()))})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var r=_(t,2),i=r[0],o=r[1];n.setError(e,i,o).end()})),Ll.e("".concat(r," failed. error:"),e),gI(e)}))}},{key:"_handleResponse",value:function(e,t){if(!Bd(e))for(var n,r,i,o=0,a=e.length;o<a;o++)r=e[o].to,i=e[o].resultCode,(Zl(i)||0===i)&&(t?((n=this._blacklistMap.has(r)?this._blacklistMap.get(r):new OT).userID=r,!Bd(e[o].addBlackTimeStamp)&&(n.timeStamp=e[o].addBlackTimeStamp),this._blacklistMap.set(r,n)):this._blacklistMap.has(r)&&(n=this._blacklistMap.get(r),this._blacklistMap.delete(r)));Ll.l("".concat(this._n,"._handleResponse total:").concat(this._blacklistMap.size," bAdd:").concat(t))}},{key:"deleteBlacklist",value:function(e){var t=this,n="".concat(this._n,".deleteBlacklist"),r=new a_("removeFromBlacklist");return e.fromAccount=this._userModule.getMyAccount(),e.toAccount=e.userIDList,this._userModule.request({protocolName:Th,requestData:e}).then((function(i){return r.setNetworkType(t._userModule.getNetworkType()).setMessage(e.userIDList.length>5?"userIDList.length:".concat(e.userIDList.length):"userIDList:".concat(e.userIDList)).end(),Ll.i("".concat(n," ok")),t._handleResponse(i.data.resultItem,!1),lI(y(t._blacklistMap.keys()))})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=_(t,2),i=n[0],o=n[1];r.setError(e,i,o).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"onAccountDeleted",value:function(e){for(var t,n=[],r=0,i=e.length;r<i;r++)t=e[r],this._blacklistMap.has(t)&&(this._blacklistMap.delete(t),n.push(t));n.length>0&&(Ll.l("".concat(this._n,".onAccountDeleted count:").concat(n.length," userIDList:"),n),this._userModule.emitOuterEvent(yi.BLACKLIST_UPDATED,y(this._blacklistMap.keys())))}},{key:"onAccountAdded",value:function(e){for(var t,n=[],r=0,i=e.length;r<i;r++)t=e[r],this._blacklistMap.has(t)||(this._blacklistMap.set(t,new OT({userID:t})),n.push(t));n.length>0&&(Ll.l("".concat(this._n,".onAccountAdded count:").concat(n.length," userIDList:"),n),this._userModule.emitOuterEvent(yi.BLACKLIST_UPDATED,y(this._blacklistMap.keys())))}},{key:"reset",value:function(){this._blacklistMap.clear(),this.startIndex=0,this.maxLimited=100,this.currentSequence=0}}]),e}(),AT=function(e){var t=String(e).replace(/[=]+$/,""),n="";if(t.length%4==1)return"";for(var r,i,o=0,a=0;i=t.charAt(a++);~i&&(r=o%4?64*r+i:i,o++%4)?n+=String.fromCharCode(255&r>>(-2*o&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);try{return decodeURIComponent(escape(n))}catch(Lk){return""}},RT=function(){function e(t){i(this,e),this._userModule=t,this._n="UserStatusHandler",this.MAX_QUERY_USER_COUNT=500,this.MAX_SUBSCRIBE_USER_COUNT=100,this.MAX_UNSUBSCRIBE_USER_COUNT=100,this._userModule.getInnerEmitterInstance().on(xI,this._onCloudConfigUpdated,this)}return a(e,[{key:"_onCloudConfigUpdated",value:function(){var e=this._userModule.getCloudConfig("status_query_count"),t=this._userModule.getCloudConfig("status_sub_count"),n=this._userModule.getCloudConfig("status_unsub_count");Ll.l("".concat(this._n,"._onCloudConfigUpdated statusQueryCount:").concat(e," statusSubscribeCount:").concat(t)+" statusUnsubscribeCount:".concat(n)),Zl(e)||(this.MAX_QUERY_USER_COUNT=parseInt(e,10)),Zl(e)||(this.MAX_SUBSCRIBE_USER_COUNT=parseInt(t,10)),Zl(e)||(this.MAX_UNSUBSCRIBE_USER_COUNT=parseInt(n,10))}},{key:"onUserStatusUpdated",value:function(e){var t=e.dataList,n=this._userModule.getMyUserID(),r=this._userModule.getModule(Bf),i=t.map((function(e){var t=e.to,i=e.statusType,o=e.customStatus,a=AT(o);return t===n&&r.setCustomStatus(a),{userID:t,statusType:i,customStatus:a}}));this._userModule.emitOuterEvent(yi.USER_STATUS_UPDATED,i)}},{key:"setSelfStatus",value:function(e){var t=this,n="".concat(this._n,".setSelfStatus");if(!1===this._userModule.filterProfanity("customStatus",e))return gI({code:Fm});var r=new a_("setSelfStatus"),i=e.customStatus;return this._userModule.request({protocolName:iv,requestData:{customStatus:i}}).then((function(e){return r.setNetworkType(t._userModule.getNetworkType()).setMessage("customStatus:".concat(i)).end(),Ll.l("".concat(n," ok. customStatus:").concat(i)),t._userModule.getModule(Bf).setCustomStatus(i),lI({userID:t._userModule.getMyUserID(),statusType:1,customStatus:i})})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=_(t,2),i=n[0],o=n[1];r.setError(e,i,o).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"getUserStatus",value:function(e){var t=this,n="".concat(this._n,".getUserStatus"),r=e.userIDList,i=void 0===r?[]:r,o=this._userModule.getMyUserID(),a=y(i),s=void 0,c=a.indexOf(o);if(c>-1){a.splice(c,1);var u=this._userModule.getModule(Bf).getCustomStatus();s={userID:o,statusType:1,customStatus:u}}if(0===a.length)return hI({successUserList:[s],failureUserList:[]});if(!this._userModule.canIUse(Nu.USER_STATUS))return gI({code:Vm});a.length>this.MAX_QUERY_USER_COUNT&&(Ll.w("".concat(n," ").concat(Vd(this.MAX_QUERY_USER_COUNT))),a=i.slice(0,this.MAX_QUERY_USER_COUNT));var l=new a_("getUserStatus");return this._userModule.request({protocolName:ov,requestData:{userIDList:a}}).then((function(e){var r=e.data,o=r.successUserList,a=void 0===o?[]:o,c=r.failureUserList,u=void 0===c?[]:c,d=a.map((function(e){var t=e.userID,n=e.statusType,r=e.customStatus;return{userID:t,statusType:n,customStatus:AT(r)}})),p=u.map((function(e){var t=e.userID,n=e.invalidUserID,r=e.errorCode,i=e.errorInfo;return{userID:Bd(n)?t:n,code:r,message:i}}));Zl(s)||d.unshift(s);var f="userID count:".concat(i.length,", success count:").concat(d.length,", fail count:").concat(p.length);return l.setNetworkType(t._userModule.getNetworkType()).setMessage("".concat(f)).end(),Ll.l("".concat(n," ok. ").concat(f,".")),lI({successUserList:d,failureUserList:p})})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=_(t,2),r=n[0],o=n[1];l.setMessage("userID count:".concat(i.length)).setError(e,r,o).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"subscribeUserStatus",value:function(e){var t=this;if(!this._userModule.canIUse(Nu.USER_STATUS))return gI({code:Vm});var n="".concat(this._n,".subscribeUserStatus"),r=e.userIDList,i=void 0===r?[]:r,o=y(i);o.length>this.MAX_SUBSCRIBE_USER_COUNT&&(Ll.w("".concat(n," ").concat(Vd(this.MAX_SUBSCRIBE_USER_COUNT))),o=i.slice(0,this.MAX_SUBSCRIBE_USER_COUNT));var a=new a_("subscribeUserStatus"),s="userID count:".concat(i.length);return Ll.l("".concat(n," ").concat(s)),this._userModule.request({protocolName:av,requestData:{userIDList:o}}).then((function(e){var r=e.data.failureUserList,i=(void 0===r?[]:r).map((function(e){var t=e.userID,n=e.invalidUserID,r=e.errorCode,i=e.errorInfo;return{userID:Bd(n)?t:n,code:r,message:i}}));return a.setNetworkType(t._userModule.getNetworkType()).setMessage("".concat(s," fail count:").concat(i.length)).end(),Ll.l("".concat(n," ok. fail count:").concat(i.length,".")),lI({failureUserList:i})})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];a.setMessage("".concat(s)).setError(e,r,i).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"unsubscribeUserStatus",value:function(e){var t=this;if(!this._userModule.canIUse(Nu.USER_STATUS))return gI({code:Vm});var n="".concat(this._n,".unsubscribeUserStatus"),r=(e||{}).userIDList,i=void 0===r?[]:r,o=y(i);i.length>this.MAX_UNSUBSCRIBE_USER_COUNT&&(Ll.w("".concat(n," ").concat(Vd(this.MAX_UNSUBSCRIBE_USER_COUNT))),o=i.slice(0,this.MAX_UNSUBSCRIBE_USER_COUNT));var a=new a_("unsubscribeUserStatus"),s="userID count:".concat(i.length);Ll.l("".concat(n," ").concat(s));var c={userIDList:o};return 0===o.length&&(c.userIDList=void 0,c.unsubscribeAll=1),this._userModule.request({protocolName:sv,requestData:c}).then((function(e){var r=e.data.failureUserList,i=(void 0===r?[]:r).map((function(e){var t=e.userID,n=e.invalidUserID,r=e.errorCode,i=e.errorInfo;return{userID:Bd(n)?t:n,code:r,message:i}}));return a.setNetworkType(t._userModule.getNetworkType()).setMessage("".concat(s," fail count:").concat(i.length)).end(),Ll.l("".concat(n," ok. fail count:").concat(i.length,".")),lI({failureUserList:i})})).catch((function(e){return t._userModule.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];a.setMessage("".concat(s)).setError(e,r,i).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"reset",value:function(){this.MAX_QUERY_USER_COUNT=500,this.MAX_SUBSCRIBE_USER_COUNT=100,this.MAX_UNSUBSCRIBE_USER_COUNT=100}}]),e}(),xT=function(e){c(n,e);var t=m(n);function n(e){var r;return i(this,n),(r=t.call(this,e))._n="UserModule",r._profileHandler=new wT(g(r)),r._blacklistHandler=new DT(g(r)),r._userStatusHandler=new RT(g(r)),r.getInnerEmitterInstance().on(RI,r.onContextUpdated,g(r)),r}return a(n,[{key:"onContextUpdated",value:function(e){this._profileHandler.getMyProfile(),this._blacklistHandler.getBlacklist()}},{key:"onProfileModified",value:function(e){this._profileHandler.onProfileModified(e)}},{key:"onRelationChainModified",value:function(e){var t=e.dataList;if(!Bd(t)){var n=[];t.forEach((function(e){e.blackListDelAccount&&n.push.apply(n,y(e.blackListDelAccount))})),n.length>0&&this._blacklistHandler.onAccountDeleted(n);var r=[];t.forEach((function(e){e.blackListAddAccount&&r.push.apply(r,y(e.blackListAddAccount))})),r.length>0&&this._blacklistHandler.onAccountAdded(r)}}},{key:"onConversationsProfileUpdated",value:function(e){this._profileHandler.onConversationsProfileUpdated(e)}},{key:"getMyAccount",value:function(){return this.getMyUserID()}},{key:"getMyProfile",value:function(){return this._profileHandler.getMyProfile()}},{key:"getStorageModule",value:function(){return this.getModule(qf)}},{key:"filterProfanity",value:function(e,t){var n=this.getModule(oh);if(!n)return!0;var r=n.filterText(t[e],Vu),i=r.isAllowedToSend,o=r.modifiedText;return!0===i&&(t[e]=o,!0)}},{key:"isMyFriend",value:function(e){var t=this.getModule(Uf);return!!t&&t.isMyFriend(e)}},{key:"getUserProfile",value:function(e){return this._profileHandler.getUserProfile(e)}},{key:"updateMyProfile",value:function(e){return this._profileHandler.updateMyProfile(e)}},{key:"getNickAndAvatarByUserID",value:function(e){return this._profileHandler.getNickAndAvatarByUserID(e)}},{key:"getLocalBlacklist",value:function(){var e=this._blacklistHandler.getLocalBlacklist();return hI(e)}},{key:"addBlacklist",value:function(e){return this._blacklistHandler.addBlacklist(e)}},{key:"deleteBlacklist",value:function(e){return this._blacklistHandler.deleteBlacklist(e)}},{key:"onUserStatusUpdated",value:function(e){this._userStatusHandler.onUserStatusUpdated(e)}},{key:"setSelfStatus",value:function(e){return this._userStatusHandler.setSelfStatus(e)}},{key:"getUserStatus",value:function(e){return this._userStatusHandler.getUserStatus(e)}},{key:"subscribeUserStatus",value:function(e){return this._userStatusHandler.subscribeUserStatus(e)}},{key:"unsubscribeUserStatus",value:function(e){return this._userStatusHandler.unsubscribeUserStatus(e)}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset")),this._profileHandler.reset(),this._blacklistHandler.reset(),this._userStatusHandler.reset()}}]),n}(uh),LT=function(){function e(t,n){i(this,e),this._m=t,this._isLoggedIn=!1,this._SDKAppID=n.SDKAppID,this._userID=n.userID||"",this._userSig=n.userSig||"",this._version="2.26.6",this._a2Key="",this._tinyID="",this._customStatus="",this._contentType="json",this._unlimitedAVChatRoom=n.unlimitedAVChatRoom,this._scene=n.scene||"",this._oversea=n.oversea,this._instanceID=n.instanceID,this._statusInstanceID=0,this._isDevMode=n.devMode,this._proxyServer=n.proxyServer}return a(e,[{key:"isLoggedIn",value:function(){return this._isLoggedIn}},{key:"isOversea",value:function(){return this._oversea}},{key:"isPrivateNetWork",value:function(){return this._proxyServer}},{key:"isDevMode",value:function(){return this._isDevMode}},{key:"isSingaporeSite",value:function(){return this._SDKAppID>=2e7&&this._SDKAppID<3e7||this._SDKAppID>=172e7&&this._SDKAppID<173e7}},{key:"isKoreaSite",value:function(){return this._SDKAppID>=3e7&&this._SDKAppID<4e7||this._SDKAppID>=173e7&&this._SDKAppID<174e7}},{key:"isGermanySite",value:function(){return this._SDKAppID>=4e7&&this._SDKAppID<5e7||this._SDKAppID>=174e7&&this._SDKAppID<175e7}},{key:"isIndiaSite",value:function(){return this._SDKAppID>=5e7&&this._SDKAppID<6e7||this._SDKAppID>=175e7&&this._SDKAppID<176e7}},{key:"isJapanSite",value:function(){return this._SDKAppID>=6e7&&this._SDKAppID<7e7||this._SDKAppID>=176e7&&this._SDKAppID<177e7}},{key:"isUSASite",value:function(){return this._SDKAppID>=7e7&&this._SDKAppID<8e7||this._SDKAppID>=177e7&&this._SDKAppID<178e7}},{key:"isIntl",value:function(){return 0===(e=this._SDKAppID)||e>=2e7&&e<8e7||e>=172e7&&e<178e7;var e}},{key:"isUnlimitedAVChatRoom",value:function(){return this._unlimitedAVChatRoom}},{key:"setUserID",value:function(e){this._userID=e}},{key:"getUserID",value:function(){return this._userID}},{key:"setUserSig",value:function(e){this._userSig=e}},{key:"getUserSig",value:function(){return this._userSig}},{key:"getSDKAppID",value:function(){return this._SDKAppID}},{key:"setTinyID",value:function(e){this._tinyID=e,this._isLoggedIn=!0}},{key:"getTinyID",value:function(){return this._tinyID}},{key:"setCustomStatus",value:function(e){this._customStatus=e}},{key:"getCustomStatus",value:function(){return this._customStatus}},{key:"getScene",value:function(){return Il?window.tencent_cloud_im_csig_flutter_for_web_25F_cy:this._isTUIKit()?"tuikit":this._scene}},{key:"getInstanceID",value:function(){return this._instanceID}},{key:"getStatusInstanceID",value:function(){return this._statusInstanceID}},{key:"setStatusInstanceID",value:function(e){this._statusInstanceID=e}},{key:"getVersion",value:function(){return this._version}},{key:"getA2Key",value:function(){return this._a2Key}},{key:"setA2Key",value:function(e){this._a2Key=e}},{key:"getContentType",value:function(){return this._contentType}},{key:"getProxyServer",value:function(){return this._proxyServer}},{key:"_isTUIKit",value:function(){var e=!1,t=!1,n=!1,r=!1,i=[];Qu&&(i=Object.keys(tl)),el&&(i=Zu?Object.keys(uni):Object.keys(window));for(var o=0,a=i.length;o<a;o++)if(i[o].toLowerCase().includes("uikit")){e=!0;break}if(i=null,Qu&&!ed(tl.createGamePortal)&&!Zl(getApp())){var s=getApp().globalData;$l(s)&&!0===s.isTUIKit&&(t=!0)}!0===this._m.getModule(qf).getStorageSync("TIM_".concat(this._SDKAppID,"_isTUIKit"))&&(n=!0);var c=null;if(Ku&&!Yu&&"undefined"==typeof uni&&__wxConfig&&(c=__wxConfig.pages),Wu&&"undefined"==typeof uni&&__qqConfig&&(c=__qqConfig.pages),Xl(c)&&c.length>0){for(var u=0,l=c.length;u<l;u++)if(c[u].toLowerCase().includes("tui")){r=!0;break}c=null}return e||t||n||r}},{key:"reset",value:function(){this._isLoggedIn=!1,this._userSig="",this._a2Key="",this._tinyID="",this._customStatus="",this._statusInstanceID=0}}]),e}(),NT=function(e){c(n,e);var t=m(n);function n(e){var r;return i(this,n),(r=t.call(this,e))._n="SignModule",r._helloInterval=120,r._lastLoginTs=0,r._lastWsHelloTs=0,r._isWebUniapp=0,NI.mixin(g(r)),r}return a(n,[{key:"onCheckTimer",value:function(e){this.isLoggedIn()&&e%this._helloInterval==0&&this._hello()}},{key:"login",value:function(e){var t="";if(this.isLoggedIn()){var n=this.getMyUserID();return(t=this.getErrorMessage("RepeatLogin",n))&&Ll.w(t),hI({actionStatus:"OK",errorCode:0,errorInfo:t,repeatLogin:!0})}if(Date.now()-this._lastLoginTs<=15e3)return this.outputWarning("LoggingIn",e.userID),gI({code:yv});Ll.l("".concat(this._n,".login userID:").concat(e.userID));var r=this._checkLoginInfo(e);if(0!==r.code)return gI(r);var i=this.getModule(Bf),o=e.userID,a=e.userSig;return i.setUserID(o),i.setUserSig(a),this.getModule($f).updateProtocolConfig(),this._login()}},{key:"_login",value:function(){var e=this,t=this.getModule(Bf),n=t.getScene(),r=0,i=new a_("login");i.setMessage("".concat(n)).setMoreMessage("identifier:".concat(this.getMyUserID())),Zu?"tuikit"===n?i.setUIPlatform(4):i.setUIPlatform(3):Qu?"tuikit"===n?i.setUIPlatform(12):i.setUIPlatform(11):el&&(Il?"flutter_web_uikit"===n?i.setUIPlatform(21):i.setUIPlatform(20):this._isReactUIKit()?bl?i.setUIPlatform(25):i.setUIPlatform(24):bl?"tuikit"===n?i.setUIPlatform(17):i.setUIPlatform(16):"tuikit"===n?i.setUIPlatform(14):i.setUIPlatform(13));var o=this.getModule(ih);if(o.canIUseOfflinePush()){this._isWebUniapp=o.getUniAppPlatform();var a=this._getStatusInstanceID();t.setStatusInstanceID(a),this.getModule($f).updateProtocolConfig(),r=o.getDeviceBrand()}var s="".concat(this._n,"._login");return this._lastLoginTs=Date.now(),this.request({protocolName:lh,requestData:{deviceBrand:r,isWebUniapp:this._isWebUniapp}}).then((function(r){e._lastLoginTs=0;var o=Date.now(),a=null,c=r.data,u=c.a2Key,l=c.tinyID,d=c.helloInterval,p=c.instanceID,f=c.timeStamp,h=c.customStatus,g=void 0===h?"":h;Ll.l("".concat(s," ok. scene:").concat(n," helloInterval:").concat(d," instanceID:").concat(p," timeStamp:").concat(f));var v=1e3*f,m=o-i.getStartTs(),_=v+parseInt(m/2)-o,y=i.getStartTs()+_;if(i.start(y),function(e,t){kl=t;var n=new Date;n.setTime(e),Ll.i("baseTime from server:".concat(n," offset:").concat(kl))}(v,_),!l)throw a=new dI({code:vv}),i.setError(a,!0,e.getNetworkType()).end(),a;if(!u)throw a=new dI({code:mv}),i.setError(a,!0,e.getNetworkType()).end(),a;var b=AT(g);i.setNetworkType(e.getNetworkType()).setMoreMessage("helloInterval:".concat(d," instanceID:").concat(p," offset:").concat(_," customStatus:").concat(b)).end(),t.setA2Key(u),t.setTinyID(l),t.setStatusInstanceID(p),t.setCustomStatus(b),e.getModule($f).updateProtocolConfig(),e.emitInnerEvent(RI),e._helloInterval=d,e.triggerReady();var I=e.getModule(ih);return I.canIUseOfflinePush()&&(uni.setStorageSync("timUniAppInstanceID",p),I.init()),e._fetchCloudControlConfig(),e.getModule(oh).init(),r})).catch((function(t){return e.probeNetwork().then((function(e){var n=_(e,2),r=n[0],o=n[1];i.setError(t,r,o).end(!0)})),e._m.setNotReadyReason(xm),Ll.e("".concat(s," failed. error:"),t),e._lastLoginTs=0,e._m.onLoginFailed(),gI(t)}))}},{key:"logout",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.isLoggedIn())return gI({code:_v});var n=new a_("logout");n.setNetworkType(this.getNetworkType()).setMessage("identifier:".concat(this.getMyUserID())).end(!0);var r="".concat(this._n,".logout");return Ll.i("".concat(r," type:").concat(t)),0===t&&this._m.setNotReadyReason(jm),this.request({protocolName:dh,requestData:{type:t}}).then((function(){return e.resetReady(),hI({})})).catch((function(t){return Ll.e("".concat(r," error:"),t),e.resetReady(),hI({})}))}},{key:"_fetchCloudControlConfig",value:function(){this.getModule(Qf).fetchConfig()}},{key:"_getStatusInstanceID",value:function(){return uni.getStorageSync("timUniAppInstanceID")}},{key:"_hello",value:function(){var e=this;this._lastWsHelloTs=Date.now(),this.request({protocolName:ph,requestData:{isWebUniapp:this._isWebUniapp}}).catch((function(t){Ll.w("".concat(e._n,"._hello error:"),t)}))}},{key:"getLastWsHelloTs",value:function(){return this._lastWsHelloTs}},{key:"_checkLoginInfo",value:function(e){var t=0;return Bd(this.getModule(Bf).getSDKAppID())?t=fv:Bd(e.userID)?t=hv:Bd(e.userSig)&&(t=gv),{code:t}}},{key:"_isReactUIKit",value:function(){return el&&void 0!==window.tencent_cloud_im_csig_react_uikit_23F_xa}},{key:"onMultipleAccountKickedOut",value:function(e){var t=this;new a_("kickedOut").setNetworkType(this.getNetworkType()).setMessage("type:".concat(bi.KICKED_OUT_MULT_ACCOUNT," newInstanceInfo:").concat(JSON.stringify(e))).end(!0),Ll.w("".concat(this._n,".onMultipleAccountKickedOut userID:").concat(this.getMyUserID()," newInstanceInfo:"),e),this.logout(1).then((function(){t.emitOuterEvent(yi.KICKED_OUT,{type:bi.KICKED_OUT_MULT_ACCOUNT}),t._m.setNotReadyReason(Nm),t._m.reset()}))}},{key:"onMultipleDeviceKickedOut",value:function(e){var t=this;new a_("kickedOut").setNetworkType(this.getNetworkType()).setMessage("type:".concat(bi.KICKED_OUT_MULT_DEVICE," newInstanceInfo:").concat(JSON.stringify(e))).end(!0),Ll.w("".concat(this._n,".onMultipleDeviceKickedOut userID:").concat(this.getMyUserID()," newInstanceInfo:"),e),this.logout(1).then((function(){t.emitOuterEvent(yi.KICKED_OUT,{type:bi.KICKED_OUT_MULT_DEVICE}),t._m.setNotReadyReason(Lm),t._m.reset()}))}},{key:"onUserSigExpired",value:function(){new a_("kickedOut").setNetworkType(this.getNetworkType()).setMessage(bi.KICKED_OUT_USERSIG_EXPIRED).end(!0),Ll.w("".concat(this._n,".onUserSigExpired: userSig expired")),0!==this.getModule(Bf).getStatusInstanceID()&&(this.emitOuterEvent(yi.KICKED_OUT,{type:bi.KICKED_OUT_USERSIG_EXPIRED}),this._m.setNotReadyReason(Pm),this._m.reset())}},{key:"onRestApiKickedOut",value:function(e){new a_("kickedOut").setNetworkType(this.getNetworkType()).setMessage("type:".concat(bi.KICKED_OUT_REST_API," newInstanceInfo:").concat(JSON.stringify(e))).end(!0),Ll.w("".concat(this._n,".onRestApiKickedOut userID:").concat(this.getMyUserID()," newInstanceInfo:"),e),0!==this.getModule(Bf).getStatusInstanceID()&&(this.emitOuterEvent(yi.KICKED_OUT,{type:bi.KICKED_OUT_REST_API}),this._m.setNotReadyReason(Um),this._m.reset(),this.getModule(Xf).onRestApiKickedOut())}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset")),this.resetReady(),this._helloInterval=120,this._lastLoginTs=0,this._lastWsHelloTs=0,this._isWebUniapp=0}}]),n}(uh),PT=rt.f;function jT(){return null}rn({target:"Object",stat:!0,forced:Object.defineProperty!==PT,sham:!x},{defineProperty:PT});var UT=function(){function e(t){i(this,e),this._m=t,this._n="StorageModule",this._storageQueue=new Map,this._errorTolerantHandle()}return a(e,[{key:"_errorTolerantHandle",value:function(){Qu||!Zl(window)&&this._canIUseCookies()||(this.getItem=jT,this.setItem=jT,this.removeItem=jT,this.clear=jT)}},{key:"onCheckTimer",value:function(e){if(e%20==0){if(0===this._storageQueue.size)return;this._doFlush()}}},{key:"_doFlush",value:function(){try{var e,t=E(this._storageQueue);try{for(t.s();!(e=t.n()).done;){var n=_(e.value,2),r=n[0],i=n[1];this._setStorageSync(this._getKey(r),i)}}catch(a){t.e(a)}finally{t.f()}this._storageQueue.clear()}catch(Lk){Ll.w("".concat(this._n,"._doFlush error:"),Lk)}}},{key:"_getPrefix",value:function(){var e=this._m.getModule(Bf);return"TIM_".concat(e.getSDKAppID(),"_").concat(e.getUserID(),"_")}},{key:"_getKey",value:function(e){return"".concat(this._getPrefix()).concat(e)}},{key:"getItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var n=t?this._getKey(e):e;return this.getStorageSync(n)}catch(Lk){return Ll.w("".concat(this._n,".getItem error:"),Lk),{}}}},{key:"setItem",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(n){var i=r?this._getKey(e):e;this._setStorageSync(i,t)}else this._storageQueue.set(e,t)}},{key:"clear",value:function(){try{Qu?tl.clearStorageSync():this._canIUseCookies()&&localStorage.clear()}catch(Lk){Ll.w("".concat(this._n,".clear error:"),Lk)}}},{key:"removeItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var n=t?this._getKey(e):e;this._removeStorageSync(n)}catch(Lk){Ll.w("".concat(this._n,".removeItem error:"),Lk)}}},{key:"getSize",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"b";try{var r={size:0,limitSize:5242880,unit:n};if(Object.defineProperty(r,"leftSize",{enumerable:!0,get:function(){return r.limitSize-r.size}}),Qu&&(r.limitSize=1024*tl.getStorageInfoSync().limitSize),e)r.size=JSON.stringify(this.getItem(e)).length+this._getKey(e).length;else if(Qu){var i=tl.getStorageInfoSync(),o=i.keys;o.forEach((function(e){r.size+=JSON.stringify(t.getStorageSync(e)).length+t._getKey(e).length}))}else if(this._canIUseCookies())for(var a in localStorage)localStorage.hasOwnProperty(a)&&(r.size+=localStorage.getItem(a).length+a.length);return this._convertUnit(r)}catch(Lk){Ll.w("".concat(this._n," error:"),Lk)}}},{key:"_convertUnit",value:function(e){var t={},n=e.unit;for(var r in t.unit=n,e)"number"==typeof e[r]&&("kb"===n.toLowerCase()?t[r]=Math.round(e[r]/1024):"mb"===n.toLowerCase()?t[r]=Math.round(e[r]/1024/1024):t[r]=e[r]);return t}},{key:"_setStorageSync",value:function(e,t){Qu?$u?my.setStorageSync({key:e,data:t}):tl.setStorageSync(e,t):this._canIUseCookies()&&localStorage.setItem(e,JSON.stringify(t))}},{key:"getStorageSync",value:function(e){return Qu?$u?my.getStorageSync({key:e}).data:tl.getStorageSync(e):this._canIUseCookies()?JSON.parse(localStorage.getItem(e)):{}}},{key:"_removeStorageSync",value:function(e){Qu?$u?my.removeStorageSync({key:e}):tl.removeStorageSync(e):this._canIUseCookies()&&localStorage.removeItem(e)}},{key:"_canIUseCookies",value:function(){return navigator&&navigator.cookieEnabled&&localStorage}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset")),this._doFlush()}}]),e}(),GT=function(){function e(t){i(this,e),this._n="SSOLogBody",this._report=[]}return a(e,[{key:"pushIn",value:function(e){Ll.d("".concat(this._n,".pushIn"),this._report.length,e),this._report.push(e)}},{key:"backfill",value:function(e){var t;Xl(e)&&0!==e.length&&(Ll.d("".concat(this._n,".backfill"),this._report.length,e.length),(t=this._report).unshift.apply(t,y(e)))}},{key:"getLogsNumInMemory",value:function(){return this._report.length}},{key:"isEmpty",value:function(){return 0===this._report.length}},{key:"_reset",value:function(){this._report.length=0,this._report=[]}},{key:"getLogsInMemory",value:function(){var e=this._report.slice();return this._reset(),e}}]),e}(),VT=function(e){var t=e.getModule(Bf);return{SDKType:10,SDKAppID:t.getSDKAppID(),SDKVersion:t.getVersion(),tinyID:Number(t.getTinyID()),userID:t.getUserID(),platform:e.getPlatform(),instanceID:t.getInstanceID(),traceID:wl()}},FT=function(e){c(r,e);var t=m(r);function r(e){var n;i(this,r),(n=t.call(this,e))._n="EventStatModule",n.TAG="im-ssolog-event",n._reportBody=new GT,n.MIN_THRESHOLD=20,n.MAX_THRESHOLD=100,n.WAITING_TIME=6e4,n.REPORT_LEVEL=[4,5,6],n.REPORT_SDKAPPID_BLACKLIST=[],n.REPORT_TINYID_WHITELIST=[],n._lastReportTime=Date.now();var o=n.getInnerEmitterInstance();return o.on(RI,n._onLoginSuccess,g(n)),o.on(xI,n._onCloudConfigUpdated,g(n)),n}return a(r,[{key:"reportAtOnce",value:function(){Ll.d("".concat(this._n,".reportAtOnce")),this._report()}},{key:"_onLoginSuccess",value:function(){var e=this,t=this.getModule(qf),n=t.getItem(this.TAG,!1);!Bd(n)&&ed(n.forEach)&&(Ll.l("".concat(this._n,"._onLoginSuccess get ssolog in storage, count:").concat(n.length)),n.forEach((function(t){e._reportBody.pushIn(t)})),t.removeItem(this.TAG,!1))}},{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("evt_rpt_threshold"),t=this.getCloudConfig("evt_rpt_waiting"),n=this.getCloudConfig("evt_rpt_level"),r=this.getCloudConfig("evt_rpt_sdkappid_bl"),i=this.getCloudConfig("evt_rpt_tinyid_wl");Zl(e)||(this.MIN_THRESHOLD=Number(e)),Zl(t)||(this.WAITING_TIME=Number(t)),Zl(n)||(this.REPORT_LEVEL=n.split(",").map((function(e){return Number(e)}))),Zl(r)||(this.REPORT_SDKAPPID_BLACKLIST=r.split(",").map((function(e){return Number(e)}))),Zl(i)||(this.REPORT_TINYID_WHITELIST=i.split(","))}},{key:"pushIn",value:function(e){e instanceof a_&&(e.updateTimeStamp(),this._reportBody.pushIn(e),this._reportBody.getLogsNumInMemory()>=this.MIN_THRESHOLD&&this._report())}},{key:"onCheckTimer",value:function(){Date.now()<this._lastReportTime+this.WAITING_TIME||this._reportBody.isEmpty()||this._report()}},{key:"_filterLogs",value:function(e){var t=this,n=this.getModule(Bf),r=n.getSDKAppID(),i=n.getTinyID();return xd(this.REPORT_SDKAPPID_BLACKLIST,r)&&!Ld(this.REPORT_TINYID_WHITELIST,i)?[]:e.filter((function(e){return t.REPORT_LEVEL.includes(e.level)}))}},{key:"_report",value:function(){var e=this;if(!this._reportBody.isEmpty()){var t=this._reportBody.getLogsInMemory(),r=this._filterLogs(t);if(0!==r.length){var i={header:VT(this),event:r};this.request({protocolName:Fg,requestData:n({},i)}).then((function(){e._lastReportTime=Date.now()})).catch((function(n){Ll.w("".concat(e._n,".report failed. networkType:").concat(e.getNetworkType()," error:"),n),e._reportBody.backfill(t),e._reportBody.getLogsNumInMemory()>e.MAX_THRESHOLD&&e._flushAtOnce()}))}else this._lastReportTime=Date.now()}}},{key:"_flushAtOnce",value:function(){var e=this.getModule(qf),t=e.getItem(this.TAG,!1),n=this._reportBody.getLogsInMemory(),r="".concat(this._n,"._flushAtOnce");if(Bd(t))Ll.l("".concat(r," count:").concat(n.length)),e.setItem(this.TAG,n,!0,!1);else{var i=n.concat(t);i.length>this.MAX_THRESHOLD&&(i=i.slice(0,this.MAX_THRESHOLD)),Ll.l("".concat(r," count:").concat(i.length)),e.setItem(this.TAG,i,!0,!1)}}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset")),this._lastReportTime=0,this._report(),this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[]}}]),r}(uh),BT="none",qT="online",HT=[wm,zm],zT=function(){function e(t){i(this,e),this._m=t,this._networkType="",this._n="NetMonitorModule",this.MAX_WAIT_TIME=3e3,this._mpNetworkStatusCallback=null,this._webOnlineCallback=null,this._webOfflineCallback=null}return a(e,[{key:"start",value:function(){var e=this;Qu?(tl.getNetworkType({success:function(t){e._networkType=t.networkType,t.networkType===BT?Ll.w("".concat(e._n,".start no network, please check!")):Ll.i("".concat(e._n,".start networkType:").concat(t.networkType))}}),this._mpNetworkStatusCallback=this._onNetworkStatusChange.bind(this),tl.onNetworkStatusChange(this._mpNetworkStatusCallback)):(this._networkType=qT,this._webOnlineCallback=this._onWebOnline.bind(this),this._webOfflineCallback=this._onWebOffline.bind(this),window&&(window.addEventListener("online",this._webOnlineCallback),window.addEventListener("offline",this._webOfflineCallback)))}},{key:"_onWebOnline",value:function(){this._onNetworkStatusChange({isConnected:!0,networkType:qT})}},{key:"_onWebOffline",value:function(){this._onNetworkStatusChange({isConnected:!1,networkType:BT})}},{key:"_onNetworkStatusChange",value:function(e){var t=e.isConnected,n=e.networkType,r="".concat(this._n,"._onNetworkStatusChange"),i=!1;t?(Ll.i("".concat(r," previous:").concat(this._networkType," current:").concat(n)),this._networkType!==n&&(i=!0,this._m.getModule(Xf).reConnect(!0))):this._networkType!==n&&(i=!0,Ll.w("".concat(r," no network, please check!")),this._m.getModule(Xf).offline()),i&&(new a_("networkChange").setMessage("isConnected:".concat(t," previousNetworkType:").concat(this._networkType," networkType:").concat(n)).end(),this._networkType=n)}},{key:"probe",value:function(e){var t=this;if(!Zl(e)&&HT.includes(e.code))return Promise.resolve([!0,this._networkType]);var n="".concat(this._n,".probe");return new Promise((function(e,r){Qu?tl.getNetworkType({success:function(r){t._networkType=r.networkType,r.networkType===BT?(Ll.w("".concat(n," no network, please check!")),e([!1,r.networkType])):(Ll.i("".concat(n," networkType:").concat(r.networkType)),e([!0,r.networkType]))}}):t._networkType===BT?e([!1,BT]):e([!0,qT])}))}},{key:"getNetworkType",value:function(){return this._networkType}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset")),Qu?null!==this._mpNetworkStatusCallback&&(tl.offNetworkStatusChange&&(Xu||Yu?tl.offNetworkStatusChange(this._mpNetworkStatusCallback):tl.offNetworkStatusChange()),this._mpNetworkStatusCallback=null):window&&(null!==this._webOnlineCallback&&(window.removeEventListener("online",this._webOnlineCallback),this._webOnlineCallback=null),null!==this._onWebOffline&&(window.removeEventListener("offline",this._webOfflineCallback),this._webOfflineCallback=null))}}]),e}(),KT=k((function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var c,u,l=this._events[s],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,i),!0;case 5:return l.fn.call(l.context,t,r,i,o),!0;case 6:return l.fn.call(l.context,t,r,i,o,a),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var p,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,i);break;default:if(!c)for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];l[u].fn.apply(l[u].context,c)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var c=0,u=[],l=s.length;c<l;c++)(s[c].fn!==t||i&&!s[c].once||r&&s[c].context!==r)&&u.push(s[c]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s})),WT=function(e){c(n,e);var t=m(n);function n(e){var r;return i(this,n),(r=t.call(this,e))._n="BigDataChannelModule",r.FILETYPE={SOUND:2106,FILE:2107,VIDEO:2113},r._bdh_download_server="grouptalk.c2c.qq.com",r._BDHBizID=10001,r._authKey="",r._expireTime=0,r.getInnerEmitterInstance().on(RI,r._getAuthKey,g(r)),r}return a(n,[{key:"_getAuthKey",value:function(){var e=this;this.isIntl()||this.request({protocolName:gh}).then((function(t){t.data.authKey&&(e._authKey=t.data.authKey,e._expireTime=parseInt(t.data.expireTime))}))}},{key:"_isFromOlderVersion",value:function(e){return!(!e.content||2===e.content.downloadFlag)}},{key:"parseElements",value:function(e,t){if(!Xl(e)||!t)return[];for(var n=[],r=null,i=0;i<e.length;i++)r=e[i],this._needParse(r)?n.push(this._parseElement(r,t)):n.push(e[i]);return n}},{key:"_needParse",value:function(e){return!e.cloudCustomData&&!(!this._isFromOlderVersion(e)||e.type!==bi.MSG_AUDIO&&e.type!==bi.MSG_FILE&&e.type!==bi.MSG_VIDEO)}},{key:"_parseElement",value:function(e,t){switch(e.type){case bi.MSG_AUDIO:return this._parseAudioElement(e,t);case bi.MSG_FILE:return this._parseFileElement(e,t);case bi.MSG_VIDEO:return this._parseVideoElement(e,t)}}},{key:"_parseAudioElement",value:function(e,t){return e.content.url=this._genAudioUrl(e.content.uuid,t),e}},{key:"_parseFileElement",value:function(e,t){return e.content.url=this._genFileUrl(e.content.uuid,t,e.content.fileName),e}},{key:"_parseVideoElement",value:function(e,t){return e.content.url=this._genVideoUrl(e.content.uuid,t),e}},{key:"_genAudioUrl",value:function(e,t){if(""===this._authKey)return"";var n=this.getModule(Bf).getSDKAppID();return"https://".concat(this._bdh_download_server,"/asn.com/stddownload_common_file?authkey=").concat(this._authKey,"&bid=").concat(this._BDHBizID,"&subbid=").concat(n,"&fileid=").concat(e,"&filetype=").concat(this.FILETYPE.SOUND,"&openid=").concat(t,"&ver=0")}},{key:"_genFileUrl",value:function(e,t,n){if(""===this._authKey)return"";n||(n="".concat(Math.floor(1e5*Math.random()),"-").concat(Date.now()));var r=this.getModule(Bf).getSDKAppID();return"https://".concat(this._bdh_download_server,"/asn.com/stddownload_common_file?authkey=").concat(this._authKey,"&bid=").concat(this._BDHBizID,"&subbid=").concat(r,"&fileid=").concat(e,"&filetype=").concat(this.FILETYPE.FILE,"&openid=").concat(t,"&ver=0&filename=").concat(encodeURIComponent(n))}},{key:"_genVideoUrl",value:function(e,t){if(""===this._authKey)return"";var n=this.getModule(Bf).getSDKAppID();return"https://".concat(this._bdh_download_server,"/asn.com/stddownload_common_file?authkey=").concat(this._authKey,"&bid=").concat(this._BDHBizID,"&subbid=").concat(n,"&fileid=").concat(e,"&filetype=").concat(this.FILETYPE.VIDEO,"&openid=").concat(t,"&ver=0")}},{key:"reset",value:function(){this._authKey="",this.expireTime=0}}]),n}(uh),YT=["requestSnapshotUrl"],JT=function(e){c(r,e);var t=m(r);function r(e){var n;return i(this,r),(n=t.call(this,e))._n="UploadModule",n.TIMUploadPlugin=null,n.timUploadPlugin=null,n.COSSDK=null,n._cosUploadMethod=null,n.expiredTimeLimit=600,n.appid=0,n.bucketName="",n.ciUrl="",n.directory="",n.downloadUrl="",n.uploadUrl="",n.region="ap-shanghai",n.cos=null,n.cosOptions={secretId:"",secretKey:"",sessionToken:"",expiredTime:0},n.uploadFileType="",n.duration=900,n.tryCount=0,n.getInnerEmitterInstance().on(RI,n._init,g(n)),n}return a(r,[{key:"_init",value:function(){var e=this.getModule(Yf);if(this.TIMUploadPlugin=e.getPlugin("tim-upload-plugin"),this.TIMUploadPlugin)this._initUploaderMethod();else{var t=Qu?"cos-wx-sdk":"cos-js-sdk";this.COSSDK=e.getPlugin(t),this.COSSDK?(this._getAuthorizationKey(),this.outputWarning("CosReplacement",t)):this.outputWarning("PluginUndetected")}}},{key:"_getAuthorizationKey",value:function(){var e=this,t="".concat(this._n,".").concat("_getAuthorizationKey"),n=new a_("_getAuthorizationKey"),r=Math.ceil(Date.now()/1e3);this.request({protocolName:Ug,requestData:{duration:this.expiredTimeLimit}}).then((function(i){var o=i.data;Ll.l("".concat(t," ok. data:"),o);var a=o.expiredTime-r;n.setMessage("requestId:".concat(o.requestId," requestTime:").concat(r," expiredTime:").concat(o.expiredTime," diff:").concat(a,"s")).setNetworkType(e.getNetworkType()).end(),!Qu&&o.region&&(e.region=o.region),e.appid=o.appid,e.bucketName=o.bucketName,e.ciUrl=o.ciUrl,e.directory=o.directory,e.downloadUrl=o.downloadUrl,e.uploadUrl=o.uploadUrl,e.cosOptions={secretId:o.secretId,secretKey:o.secretKey,sessionToken:o.sessionToken,expiredTime:o.expiredTime},Ll.l("".concat(t," ok. region:").concat(e.region," bucketName:").concat(e.bucketName)),e._initUploaderMethod()})).catch((function(r){e.probeNetwork().then((function(e){var t=_(e,2),i=t[0],o=t[1];n.setError(r,i,o).end()})),Ll.w("".concat(t," failed. error:"),r)}))}},{key:"_getCosPreSigUrl",value:function(e){var t=this,n="".concat(this._n,".").concat("_getCosPreSigUrl"),r=Math.ceil(Date.now()/1e3),i=new a_("_getCosPreSigUrl");return this.request({protocolName:Gg,requestData:{fileType:e.fileType,fileName:e.fileName,uploadMethod:e.uploadMethod,duration:e.duration}}).then((function(e){t.tryCount=0;var o=e.data||{},a=o.expiredTime-r;return Ll.l("".concat(n," ok. data:"),o),i.setMessage("requestId:".concat(o.requestId," expiredTime:").concat(o.expiredTime," diff:").concat(a,"s")).setNetworkType(t.getNetworkType()).end(),o})).catch((function(r){return-1===r.code&&(r.code=Iv),t.probeNetwork().then((function(e){var t=_(e,2),n=t[0],o=t[1];i.setError(r,n,o).end()})),Ll.w("".concat(n," failed. error:"),r),t.tryCount<1?(t.tryCount++,t._getCosPreSigUrl(e)):(t.tryCount=0,gI({code:Iv}))}))}},{key:"_initUploaderMethod",value:function(){var e=this;if(this.TIMUploadPlugin)return this.timUploadPlugin=new this.TIMUploadPlugin,void(this._cosUploadMethod=function(t,n){e.timUploadPlugin.uploadFile(t,n)});this.appid&&(this.cos=Qu?new this.COSSDK({ForcePathStyle:!0,getAuthorization:this._getAuthorization.bind(this)}):new this.COSSDK({getAuthorization:this._getAuthorization.bind(this)}),this._cosUploadMethod=Qu?function(t,n){e.cos.postObject(t,n)}:function(t,n){e.cos.uploadFiles(t,n)})}},{key:"onCheckTimer",value:function(e){this.COSSDK&&(this.TIMUploadPlugin||this.isLoggedIn()&&e%60==0&&Math.ceil(Date.now()/1e3)>=this.cosOptions.expiredTime-120&&this._getAuthorizationKey())}},{key:"_getAuthorization",value:function(e,t){t({TmpSecretId:this.cosOptions.secretId,TmpSecretKey:this.cosOptions.secretKey,XCosSecurityToken:this.cosOptions.sessionToken,ExpiredTime:this.cosOptions.expiredTime})}},{key:"upload",value:function(e){if(!0===e.getRelayFlag())return Promise.resolve();var t=this.getModule(nh);switch(e.type){case bi.MSG_IMAGE:return t.addTotalCount(Zm),this._uploadImage(e);case bi.MSG_FILE:return t.addTotalCount(Zm),this._uploadFile(e);case bi.MSG_AUDIO:return t.addTotalCount(Zm),this._uploadAudio(e);case bi.MSG_VIDEO:return t.addTotalCount(Zm),this._uploadVideo(e);default:return Promise.resolve()}}},{key:"_uploadImage",value:function(e){var t=this,r=this.getModule(xf),i=e.getElements()[0],o=r.getMessageOption(e.clientSequence);return this.doUploadImage({file:o.payload.file,to:o.to,onProgress:function(e){if(i.updatePercent(e),ed(o.onProgress))try{o.onProgress(e)}catch(n){return gI({code:kv})}}}).then((function(r){var o=r.location,a=r.fileType,s=r.fileSize,c=r.width,u=r.height,l=t.isPrivateNetWork()?o:hd(o);i.updateImageFormat(a);var d=Od({originUrl:l,originWidth:c,originHeight:u,min:198}),p=Od({originUrl:l,originWidth:c,originHeight:u,min:720});return i.updateImageInfoArray([{size:s,url:l,width:c,height:u},n({},p),n({},d)]),e}))}},{key:"_uploadFile",value:function(e){var t=this,n=this.getModule(xf),r=e.getElements()[0],i=n.getMessageOption(e.clientSequence);return this.doUploadFile({file:i.payload.file,to:i.to,onProgress:function(e){if(r.updatePercent(e),ed(i.onProgress))try{i.onProgress(e)}catch(t){return gI({code:kv})}}}).then((function(n){var i=n.location,o=t.isPrivateNetWork()?i:hd(i);return r.updateFileUrl(o),e}))}},{key:"_uploadAudio",value:function(e){var t=this,n=this.getModule(xf),r=e.getElements()[0],i=n.getMessageOption(e.clientSequence);return this.doUploadAudio({file:i.payload.file,to:i.to,onProgress:function(e){if(r.updatePercent(e),ed(i.onProgress))try{i.onProgress(e)}catch(t){return gI({code:kv})}}}).then((function(n){var i=n.location,o=t.isPrivateNetWork()?i:hd(i);return r.updateAudioUrl(o),e}))}},{key:"_uploadVideo",value:function(e){var t=this,n=this.getModule(xf),r=e.getElements()[0],i=n.getMessageOption(e.clientSequence);return this.doUploadVideo({file:i.payload.file,to:i.to,onProgress:function(e){if(r.updatePercent(e),ed(i.onProgress))try{i.onProgress(e)}catch(t){return gI({code:kv})}}}).then((function(n){var i=n.location,o=n.snapshotInfo,a=t.isPrivateNetWork()?i:hd(i);return r.updateVideoUrl(a),Bd(o)||r.updateSnapshotInfo(o),e}))}},{key:"doUploadImage",value:function(e){var t=this;if(!e.file)return gI({code:Nv});var n=this._checkImageType(e.file);if(!0!==n)return n;var r=this._checkImageSize(e.file);if(!0!==r)return r;var i=null;return this._setUploadFileType(UI),this.uploadByCOS(e).then((function(e){return i=e,t.isPrivateNetWork()?Ed(e.location):Ed("https://".concat(e.location))})).then((function(e){return i.width=e.width,i.height=e.height,Promise.resolve(i)}))}},{key:"_checkImageType",value:function(e){var t="";return t=Qu?e.url.slice(e.url.lastIndexOf(".")+1):e.files[0].name.slice(e.files[0].name.lastIndexOf(".")+1),PI.indexOf(t.toLowerCase())>=0||gI({code:Pv})}},{key:"_checkImageSize",value:function(e){var t=0;return 0===(t=Qu?e.size:e.files[0].size)?gI({code:Mv}):t<20971520||gI({code:jv})}},{key:"doUploadFile",value:function(e){return e.file?e.file.files[0].size>104857600?gI({code:zv}):0===e.file.files[0].size?gI({code:Mv}):(this._setUploadFileType(FI),this.uploadByCOS(e)):gI({code:Hv})}},{key:"doUploadVideo",value:function(e){return e.file.videoFile.size>104857600?gI({code:Fv}):0===e.file.videoFile.size?gI({code:Mv}):-1===jI.indexOf(e.file.videoFile.type)?gI({code:Bv}):(this._setUploadFileType(GI),Qu?this.handleVideoUpload({file:e.file.videoFile,onProgress:e.onProgress}):el?this.handleVideoUpload(e):void 0)}},{key:"handleVideoUpload",value:function(e){var t=this;return new Promise((function(n,r){t.uploadByCOS(e).then((function(e){n(e)})).catch((function(){t.uploadByCOS(e).then((function(e){n(e)})).catch((function(){r(new dI({code:Vv}))}))}))}))}},{key:"doUploadAudio",value:function(e){return e.file?e.file.size>20971520?gI({code:Gv}):0===e.file.size?gI({code:Mv}):(this._setUploadFileType(VI),this.uploadByCOS(e)):gI({code:Uv})}},{key:"uploadByCOS",value:function(e){var t=this,n="".concat(this._n,".uploadByCOS");if(!ed(this._cosUploadMethod))return this.outputWarning("PluginUndetected"),gI({code:bv});if(this.timUploadPlugin)return this._uploadWithPreSigUrl(e);var r=new a_("upload"),i=Date.now(),o=this._getFile(e);return new Promise((function(a,s){var c=Qu?t._createCosOptionsWXMiniApp(e):t._createCosOptionsWeb(e),u=t;t._cosUploadMethod(c,(function(e,c){var l=Object.create(null);if(c){if(e||Xl(c.files)&&c.files[0].error){var d=new dI({code:qv});return r.setError(d,!0,t.getNetworkType()).end(),Ll.l("".concat(n," failed. error:"),c.files[0].error),403===c.files[0].error.statusCode&&(Ll.w("".concat(n," failed. cos AccessKeyId was invalid, regain auth key!")),t._getAuthorizationKey()),void s(d)}l.fileName=o.name,l.fileSize=o.size,l.fileType=o.type.slice(o.type.indexOf("/")+1).toLowerCase(),l.location=Qu?c.Location:c.files[0].data.Location;var p=Date.now()-i,f=u._formatFileSize(o.size),h=u._formatSpeed(1e3*o.size/p),g="size:".concat(f," time:").concat(p,"ms speed:").concat(h);Ll.l("".concat(n," success. name:").concat(o.name," ").concat(g)),a(l);var v=t.getModule(nh);return v.addCost(Zm,p),v.addFileSize(Zm,o.size),void r.setNetworkType(t.getNetworkType()).setMessage(g).end()}var m=new dI({code:qv});r.setError(m,!0,u.getNetworkType()).end(),Ll.w("".concat(n," failed. error:"),e),403===e.statusCode&&(Ll.w("".concat(n," failed. cos AccessKeyId was invalid, regain auth key!")),t._getAuthorizationKey()),s(m)}))}))}},{key:"_uploadWithPreSigUrl",value:function(e){var t=this,n="".concat(this._n,"._uploadWithPreSigUrl"),r=this._getFile(e);return this._createCosOptionsPreSigUrl(e).then((function(e){return new Promise((function(i,o){var a=new a_("upload"),s=e.requestSnapshotUrl,c=void 0===s?void 0:s,u=h(e,YT),l=Date.now();t._cosUploadMethod(u,(function(e,s){var u=Object.create(null);if(e||403===s.statusCode)return a.setError(new dI(e),!0,t.getNetworkType()).end(),Ll.l("".concat(n," failed, error:"),e),void o(new dI({code:qv}));var d=s.data.location||"";t.isPrivateNetWork()||0!==d.indexOf("https://")&&0!==d.indexOf("http://")||(d=d.split("//")[1]),u.fileName=r.name,u.fileSize=r.size,u.fileType=r.type.slice(r.type.indexOf("/")+1).toLowerCase(),u.location=d;var p=Date.now()-l,f=t._formatFileSize(r.size),h=t._formatSpeed(1e3*r.size/p),g="size:".concat(f,",time:").concat(p,"ms,speed:").concat(h," res:").concat(JSON.stringify(s.data));Ll.l("".concat(n," success name:").concat(r.name,",").concat(g)),a.setNetworkType(t.getNetworkType()).setMessage(g).end();var v=t.getModule(nh);if(v.addCost(Zm,p),v.addFileSize(Zm,r.size),!Bd(c))return t._getSnapshotInfoByUrl(c).then((function(e){u.snapshotInfo=e,i(u)}));i(u)}))}))}))}},{key:"_getFile",value:function(e){var t;return Xl(e.file.files)||(t=e.file.files,"filelist"===nd(t))?e.file.files[0]:e.file}},{key:"_formatFileSize",value:function(e){return e<1024?e+"B":e<1048576?Math.floor(e/1024)+"KB":Math.floor(e/1048576)+"MB"}},{key:"_formatSpeed",value:function(e){return e<=1048576?Rd(e/1024,1)+"KB/s":Rd(e/1048576,1)+"MB/s"}},{key:"_createCosOptionsWeb",value:function(e){var t=this._getFile(e),n=t.name,r=n.slice(n.lastIndexOf(".")),i=this._genFileName("".concat(ud(999999)).concat(r));return{files:[{Bucket:"".concat(this.bucketName,"-").concat(this.appid),Region:this.region,Key:"".concat(this.directory,"/").concat(i),Body:t}],SliceSize:1048576,onProgress:function(t){if("function"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){Ll.w("onProgress callback error:",n)}},onFileFinish:function(e,t,n){}}}},{key:"_createCosOptionsWXMiniApp",value:function(e){var t=this._getFile(e),n=this._genFileName(t.name),r=t.url;return{Bucket:"".concat(this.bucketName,"-").concat(this.appid),Region:this.region,Key:"".concat(this.directory,"/").concat(n),FilePath:r,onProgress:function(t){if(Ll.l(JSON.stringify(t)),"function"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){Ll.w("onProgress callback error:",n)}}}}},{key:"_createCosOptionsPreSigUrl",value:function(e){var t=this,n="",r="",i=0,o=this._getFile(e);if(Qu)n=this._genFileName(o.name),r=o.url,i=1;else{var a=o.name,s=a.slice(a.lastIndexOf("."));n=this._genFileName("".concat(ud(999999)).concat(s)),r=o,i=0}return this._getCosPreSigUrl({fileType:this.uploadFileType,fileName:n,uploadMethod:i,duration:this.duration}).then((function(i){var o=i.uploadUrl,a=i.downloadUrl,s=i.requestSnapshotUrl,c=void 0===s?void 0:s;return{url:o,fileType:t.uploadFileType,fileName:n,resources:r,downloadUrl:a,requestSnapshotUrl:c,onProgress:function(t){if("function"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){Ll.w("onProgress callback error:",n),Ll.e(n)}}}}))}},{key:"_genFileName",value:function(e){return"".concat(Md(),"-").concat(e)}},{key:"_setUploadFileType",value:function(e){this.uploadFileType=e}},{key:"_getSnapshotInfoByUrl",value:function(e){var t=this,n=new a_("getSnapshotInfo");return this.request({protocolName:Vg,requestData:{platform:this.getPlatform(),coverName:this._genFileName(ud(99999)),requestSnapshotUrl:e}}).then((function(e){var t=(e.data||{}).snapshotUrl;return n.setMessage("snapshotUrl:".concat(t)).end(),Bd(t)?{}:Ed(t).then((function(e){return{snapshotUrl:t,snapshotWidth:e.width,snapshotHeight:e.height}}))})).catch((function(e){return Ll.w("".concat(t._n,"._getSnapshotInfoByUrl failed. error:"),e),n.setCode(e.errorCode).setMessage(e.errorInfo).end(),{}}))}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset"))}}]),r}(uh),$T=["downloadKey","pbDownloadKey","messageList"],XT=function(){function e(t){i(this,e),this._n="MergerMessageHandler",this._messageModule=t}return a(e,[{key:"uploadMergerMessage",value:function(e,t){var n=this,r="".concat(this._n,".").concat("uploadMergerMessage");Ll.d("".concat(r," message:"),e,"messageBytes:".concat(t));var i=e.payload.messageList,o=i.length,a=new a_("uploadMergerMessage");return this._messageModule.request({protocolName:Wg,requestData:{messageList:i}}).then((function(e){Ll.d("".concat(r," ok. response:"),e.data);var i=e.data,s=i.pbDownloadKey,c=i.downloadKey,u={pbDownloadKey:s,downloadKey:c,messageNumber:o};return a.setNetworkType(n._messageModule.getNetworkType()).setMessage("".concat(o,"-").concat(t,"-").concat(c)).end(),u})).catch((function(e){throw Ll.w("".concat(r," failed. error:"),e),n._messageModule.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];a.setError(e,r,i).end()})),e}))}},{key:"downloadMergerMessage",value:function(e){var t=this,r="".concat(this._n,".").concat("downloadMergerMessage");Ll.d("".concat(r," message:"),e);var i=e.payload.downloadKey,o=new a_("downloadMergerMessage");return o.setMessage("downloadKey:".concat(i)),this._messageModule.request({protocolName:Yg,requestData:{downloadKey:i}}).then((function(i){if(Ll.d("".concat(r," ok. response:"),i.data),ed(e.clearElement)){var a=e.payload,s=(a.downloadKey,a.pbDownloadKey,a.messageList,h(a,$T));e.clearElement(),e.setElement({type:e.type,content:n({messageList:i.data.messageList},s)})}else{var c=[];i.data.messageList.forEach((function(e){if(!Bd(e)){var t=new aI(e);c.push(t)}})),e.payload.messageList=c,e.payload.downloadKey="",e.payload.pbDownloadKey=""}return o.setNetworkType(t._messageModule.getNetworkType()).end(),e})).catch((function(e){throw Ll.w("".concat(r," failed. key:").concat(i," error:"),e),t._messageModule.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];o.setError(e,r,i).end()})),e}))}},{key:"createMergerMessagePack",value:function(e,t,n){return e.conversationType===bi.CONV_C2C?this._createC2CMergerMessagePack(e,t,n):this._createGroupMergerMessagePack(e,t,n)}},{key:"_createC2CMergerMessagePack",value:function(e,t,n){var r=null;t&&(t.offlinePushInfo&&(r=t.offlinePushInfo),!0===t.onlineUserOnly&&(r?r.disablePush=!0:r={disablePush:!0}));var i=[];if($l(t)&&$l(t.messageControlInfo)){var o=t.messageControlInfo,a=o.excludedFromUnreadCount,s=o.excludedFromLastMessage,c=o.excludedFromContentModeration;!0===a&&i.push("NoUnread"),!0===s&&i.push("NoLastMsg"),!0===c&&i.push("NoMsgCheck")}var u="";Yl(e.cloudCustomData)&&e.cloudCustomData.length>0&&(u=e.cloudCustomData);var l=n.pbDownloadKey,d=n.downloadKey,p=n.messageNumber,f=e.payload,h=f.title,g=f.abstractList,v=f.compatibleText,m=this._messageModule.getModule(Pf),_=m&&m.isOnlineMessage(e,t)?0:void 0;return{protocolName:vh,tjgID:this._messageModule.generateTjgID(e),requestData:{fromAccount:this._messageModule.getMyUserID(),toAccount:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:l,downloadKey:d,title:h,abstractList:g,compatibleText:v,messageNumber:p}}],cloudCustomData:u,clientTime:e.clientTime,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:_,offlinePushInfo:r?{pushFlag:!0===r.disablePush?1:0,title:r.title||"",desc:r.description||"",ext:r.extension||"",apnsInfo:{badgeMode:!0===r.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:r.androidOPPOChannelID||""}}:void 0,messageControlInfo:0!==_?i:void 0,isSupportExtension:!0===e.isSupportExtension?1:0}}}},{key:"_createGroupMergerMessagePack",value:function(e,t,n){var r=null;t&&t.offlinePushInfo&&(r=t.offlinePushInfo);var i=[];if($l(t)&&$l(t.messageControlInfo)){var o=t.messageControlInfo,a=o.excludedFromUnreadCount,s=o.excludedFromLastMessage,c=o.excludedFromContentModeration;!0===a&&i.push("NoUnread"),!0===s&&i.push("NoLastMsg"),!0===c&&i.push("NoMsgCheck")}var u="";Yl(e.cloudCustomData)&&e.cloudCustomData.length>0&&(u=e.cloudCustomData);var l=n.pbDownloadKey,d=n.downloadKey,p=n.messageNumber,f=e.payload,h=f.title,g=f.abstractList,v=f.compatibleText,m=this._messageModule.getModule(jf),_=m&&m.isOnlineMessage(e,t)?1:0;return{protocolName:mh,tjgID:this._messageModule.generateTjgID(e),requestData:{fromAccount:this._messageModule.getMyUserID(),groupID:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:l,downloadKey:d,title:h,abstractList:g,compatibleText:v,messageNumber:p}}],random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:void 0,cloudCustomData:u,onlineOnlyFlag:_,offlinePushInfo:r?{pushFlag:!0===r.disablePush?1:0,title:r.title||"",desc:r.description||"",ext:r.extension||"",apnsInfo:{badgeMode:!0===r.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:r.androidOPPOChannelID||""}}:void 0,clientTime:e.clientTime,needReadReceipt:!0!==e.needReadReceipt||m.isMessageFromOrToAVChatroom(e.to)?0:1,messageControlInfo:0===_?i:void 0,isSupportExtension:!0===e.isSupportExtension?1:0}}}}]),e}(),ZT={ERR_SVR_COMM_SENSITIVE_TEXT:80001,ERR_SVR_COMM_BODY_SIZE_LIMIT:80002,OPEN_SERVICE_OVERLOAD_ERROR:60022,ERR_SVR_MSG_PKG_PARSE_FAILED:20001,ERR_SVR_MSG_INTERNAL_AUTH_FAILED:20002,ERR_SVR_MSG_INVALID_ID:20003,ERR_SVR_MSG_PUSH_DENY:20006,ERR_SVR_MSG_IN_PEER_BLACKLIST:20007,ERR_SVR_MSG_BOTH_NOT_FRIEND:20009,ERR_SVR_MSG_NOT_PEER_FRIEND:20010,ERR_SVR_MSG_NOT_SELF_FRIEND:20011,ERR_SVR_MSG_SHUTUP_DENY:20012,ERR_SVR_GROUP_INVALID_PARAMETERS:10004,ERR_SVR_GROUP_PERMISSION_DENY:10007,ERR_SVR_GROUP_NOT_FOUND:10010,ERR_SVR_GROUP_INVALID_GROUPID:10015,ERR_SVR_GROUP_REJECT_FROM_THIRDPARTY:10016,ERR_SVR_GROUP_SHUTUP_DENY:10017,MESSAGE_SEND_FAIL:2100,OVER_FREQUENCY_LIMIT:2996},QT=[kv,Nv,Pv,Mv,jv,Hv,zv,Fv,Bv,Uv,Gv,bv];function eC(e){var t=!1;return Object.values(ZT).includes(e)&&(t=!0),(e>=120001&&e<=13e4||e>=10100&&e<=10200)&&(t=!0),t}var tC,nC=function(e){c(r,e);var t=m(r);function r(e){var n;return i(this,r),(n=t.call(this,e))._n="MessageModule",n._messageOptionsMap=new Map,n._mergerMessageHandler=new XT(g(n)),n}return a(r,[{key:"createTextMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=new uI(e),r="string"==typeof e.payload?e.payload:e.payload.text,i=new p_({text:r}),o=this._getNickAndAvatarByUserID(t);return n.setElement(i),n.setNickAndAvatar(o),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:"createImageMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=new uI(e);if(Qu){var r=e.payload.file;if(Kl(r))return void this.outputWarning("FileUnsupportedInMP","createImageMessage");var i=r.tempFiles[0].path||r.tempFiles[0].tempFilePath,o={url:i,name:i.slice(i.lastIndexOf("/")+1),size:r.tempFiles&&r.tempFiles[0].size||1,type:i.slice(i.lastIndexOf(".")+1).toLowerCase()};e.payload.file=o}else if(el)if(Kl(e.payload.file)){var a=e.payload.file;e.payload.file={files:[a]}}else if($l(e.payload.file)&&"undefined"!=typeof uni){var s=e.payload.file.tempFiles[0];e.payload.file={files:[s]}}var c=new Hb({imageFormat:Nl.UNKNOWN,uuid:this._generateUUID(e.payload.file),file:e.payload.file}),u=this._getNickAndAvatarByUserID(t);return n.setElement(c),n.setNickAndAvatar(u),n.setNameCard(this._getNameCardByGroupID(n)),this._messageOptionsMap.set(n.clientSequence,e),n}},{key:"createAudioMessage",value:function(e){var t=e.payload.file;if(Qu){var n={url:t.tempFilePath,name:t.tempFilePath.slice(t.tempFilePath.lastIndexOf("/")+1),size:t.fileSize,second:parseInt(t.duration)/1e3,type:t.tempFilePath.slice(t.tempFilePath.lastIndexOf(".")+1).toLowerCase()};e.payload.file=n}var r=this.getMyUserID();e.currentUser=r,e.senderTinyID=this.getMyTinyID();var i=new uI(e),o=new Kb({second:Math.floor(t.duration/1e3),size:t.fileSize||t.size,url:t.tempFilePath,uuid:this._generateUUID(e.payload.file)}),a=this._getNickAndAvatarByUserID(r);return i.setElement(o),i.setNickAndAvatar(a),i.setNameCard(this._getNameCardByGroupID(i)),this._messageOptionsMap.set(i.clientSequence,e),i}},{key:"createVideoMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID(),e.payload.file.thumbUrl="",e.payload.file.thumbSize=0;var n={};if(Qu){if($u)return void this.outputWarning("VideoUnsupportedInAlipay");if(Kl(e.payload.file))return void this.outputWarning("FileUnsupportedInMP","createVideoMessage");var r=e.payload.file;Xl(r.tempFiles)&&(r=r.tempFiles[0]),n.url=r.tempFilePath,n.name=r.tempFilePath.slice(r.tempFilePath.lastIndexOf("/")+1),n.size=r.size,n.second=r.duration,n.type=r.tempFilePath.slice(r.tempFilePath.lastIndexOf(".")+1).toLowerCase()}else if(el){if(Kl(e.payload.file)){var i=e.payload.file;e.payload.file.files=[i]}else if($l(e.payload.file)&&"undefined"!=typeof uni){var o=e.payload.file.tempFile;e.payload.file.files=[o]}var a=e.payload.file;n.url=window.URL.createObjectURL(a.files[0]),n.name=a.files[0].name,n.size=a.files[0].size,n.second=a.files[0].duration||0,n.type=a.files[0].type.split("/")[1]}e.payload.file.videoFile=n;var s=new uI(e),c=new iI({videoFormat:n.type,videoSecond:Rd(n.second,0),videoSize:n.size,remoteVideoUrl:"",videoUrl:n.url,videoUUID:this._generateUUID(e.payload.file.videoFile),thumbUUID:this._generateUUID(e.payload.file.videoFile),thumbWidth:e.payload.file.width||200,thumbHeight:e.payload.file.height||200,thumbUrl:e.payload.file.thumbUrl,thumbSize:e.payload.file.thumbSize,thumbFormat:e.payload.file.thumbUrl.slice(e.payload.file.thumbUrl.lastIndexOf(".")+1).toLowerCase()}),u=this._getNickAndAvatarByUserID(t);return s.setElement(c),s.setNickAndAvatar(u),s.setNameCard(this._getNameCardByGroupID(s)),this._messageOptionsMap.set(s.clientSequence,e),s}},{key:"createCustomMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=new uI(e),r=new rI({data:e.payload.data,description:e.payload.description,extension:e.payload.extension}),i=this._getNickAndAvatarByUserID(t);return n.setElement(r),n.setNickAndAvatar(i),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:"createFaceMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=new uI(e),r=new zb(e.payload),i=this._getNickAndAvatarByUserID(t);return n.setElement(r),n.setNickAndAvatar(i),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:"createMergerMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=this._getNickAndAvatarByUserID(t),r=new uI(e),i=new sI(e.payload);return r.setElement(i),r.setNickAndAvatar(n),r.setNameCard(this._getNameCardByGroupID(r)),r.setRelayFlag(!0),r}},{key:"createForwardMessage",value:function(e){var t=e.to,n=e.conversationType,r=e.priority,i=e.payload,o=e.needReadReceipt,a=e.receiverList,s=this.getMyUserID(),c=this._getNickAndAvatarByUserID(s);if(i.type===bi.MSG_GRP_TIP)return gI({code:$v});var u={to:t,conversationType:n,conversationID:"".concat(n).concat(t),priority:r,isPlaceMessage:0,status:jp.UNSEND,currentUser:s,senderTinyID:this.getMyTinyID(),cloudCustomData:e.cloudCustomData||i.cloudCustomData||"",needReadReceipt:o,receiverList:a,isSupportExtension:e.isSupportExtension||!1},l=new uI(u);return l.setElement(i.getElements()[0]),l.setNickAndAvatar(c),l.setNameCard(this._getNameCardByGroupID(i)),l.setRelayFlag(!0),l}},{key:"downloadMergerMessage",value:function(e){return this._mergerMessageHandler.downloadMergerMessage(e)}},{key:"createFileMessage",value:function(e){if(Qu){if(!Ku&&!Wu&&!Xu)return;var t=tl.getSystemInfoSync().SDKVersion;if(Ku&&wd(t,"2.5.0")<0)return void this.outputWarning("WXChooseMessageFile");if(Wu&&wd(t,"1.18.0")<0)return void this.outputWarning("QQChooseMessageFile")}if(el||Xu){if(Kl(e.payload.file)){var r=e.payload.file;e.payload.file={files:[r]}}else if($l(e.payload.file)&&"undefined"!=typeof uni){var i=e.payload.file,o=i.tempFiles,a=i.files,s=null;Xl(o)?s=o[0]:Xl(a)&&(s=a[0]),e.payload.file={files:[s]}}}else if(Ku||Wu){var c=e.payload.file.tempFiles,u=n(n({},c[0]),{},{url:c[0].path});e.payload.file={files:[u]}}var l=this.getMyUserID();e.currentUser=l,e.senderTinyID=this.getMyTinyID();var d=new uI(e),p=new nI({uuid:this._generateUUID(e.payload.file),file:e.payload.file}),f=this._getNickAndAvatarByUserID(l);return d.setElement(p),d.setNickAndAvatar(f),d.setNameCard(this._getNameCardByGroupID(d)),this._messageOptionsMap.set(d.clientSequence,e),d}},{key:"createLocationMessage",value:function(e){var t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();var n=new uI(e),r=new oI(e.payload),i=this._getNickAndAvatarByUserID(t);return n.setElement(r),n.setNickAndAvatar(i),n.setNameCard(this._getNameCardByGroupID(n)),n}},{key:"_onCannotFindModule",value:function(){return gI({code:Dm})}},{key:"sendMessageInstance",value:function(e,t){var n=this;if(!1===this.getModule(oh).filterMessage(e,t))return this._onSendMessageFailed(e,new dI({code:Fm}));var r,i=null;switch(e.conversationType){case bi.CONV_C2C:if(!(i=this.getModule(Pf)))return this._onCannotFindModule();break;case bi.CONV_GROUP:if(!(i=this.getModule(jf)))return this._onCannotFindModule();if(yd({groupID:e.to})){var o=i.getLocalGroupProfile(e.to);if(o&&o.isSupportTopic)return gI({code:Rv})}break;default:return gI({code:Ev})}var a=this.getModule(Wf),s=this.getModule(jf);return a.upload(e).then((function(){return n._getSendMessageSpecifiedKey(e)===Xm&&n.getModule(nh).addSuccessCount(Zm),s.guardForAVChatRoom(e).then((function(){if(!e.isSendable())return gI({code:Kv});n._addSendMessageTotalCount(e),r=Date.now();var o=function(e){var t="utf-8";el&&document&&(t=document.charset.toLowerCase());var n,r,i=0;if(r=e.length,"utf-8"===t||"utf8"===t)for(var o=0;o<r;o++)(n=e.codePointAt(o))<=127?i+=1:n<=2047?i+=2:n<=65535?i+=3:(i+=4,o++);else if("utf-16"===t||"utf16"===t)for(var a=0;a<r;a++)(n=e.codePointAt(a))<=65535?i+=2:(i+=4,a++);else i=e.replace(/[^\x00-\xff]/g,"aa").length;return i}(JSON.stringify(e));return e.type===bi.MSG_MERGER&&o>11264?n._mergerMessageHandler.uploadMergerMessage(e,o).then((function(r){var i=n._mergerMessageHandler.createMergerMessagePack(e,t,r);return n.request(i)})):(n.getModule(Ff).setMessageRandom(e),e.conversationType===bi.CONV_C2C||e.conversationType===bi.CONV_GROUP?i.sendMessage(e,t):void 0)})).then((function(o){var a=o.data,s=a.time,c=a.sequence,u=a.readReceiptCode;Wl(u)&&0!==u&&(new a_("sendMessageWithReceipt").setMessage("from:".concat(e.from," to:").concat(e.to," sequence:").concat(c," readReceiptCode:").concat(u)).end(),Ll.w("".concat(n._n,".sendMessageInstance readReceiptCode:").concat(u," message:").concat(n.getErrorMessage(u)))),n._addSendMessageSuccessCount(e,r),n._messageOptionsMap.delete(e.clientSequence);var l=n.getModule(Ff);e.status=jp.SUCCESS,e.time=s;var d=!1;if(e.conversationType===bi.CONV_GROUP)e.sequence=c;else if(e.conversationType===bi.CONV_C2C){var p=l.getLatestMessageSentByMe(e.conversationID);if(p){var f=p.nick,h=p.avatar;f===e.nick&&h===e.avatar||(d=!0)}}if(d&&l.modifyMessageSentByMe({conversationID:e.conversationID,latestNick:e.nick,latestAvatar:e.avatar}),i.isOnlineMessage(e,t))e._onlineOnlyFlag=!0;else{l.appendToMessageList(e);var g=e;$l(t)&&$l(t.messageControlInfo)&&(!0===t.messageControlInfo.excludedFromLastMessage&&(e._isExcludedFromLastMessage=!0,g=""),!0===t.messageControlInfo.excludedFromUnreadCount&&(e._isExcludedFromUnreadCount=!0));var v=e.conversationType;bd(e.to)&&(v=bi.CONV_TOPIC,n.getModule(Vf).onMessageSent({groupID:Nd(e.to),topicID:e.to,lastMessage:g})),l.onMessageSent({conversationOptionsList:[{conversationID:e.conversationID,unreadCount:0,type:v,subType:e.conversationSubType,lastMessage:g}]})}return e.getRelayFlag()||"TIMImageElem"!==e.type||Dd(e.payload.imageInfoArray),lI({message:e})}))})).catch((function(t){return n._onSendMessageFailed(e,t)}))}},{key:"_onSendMessageFailed",value:function(e,t){e.status=jp.FAIL,this.getModule(Ff).deleteMessageRandom(e),this._addSendMessageFailCountOnUser(e,t);var n=new a_("sendMessage");return n.setMessage("tjg_id:".concat(this.generateTjgID(e)," type:").concat(e.type," from:").concat(e.from," to:").concat(e.to)),this.probeNetwork().then((function(e){var r=_(e,2),i=r[0],o=r[1];n.setError(t,i,o).end()})),Ll.e("".concat(this._n,"._onSendMessageFailed error:"),t),gI(new dI({code:t&&t.code?t.code:Tv,message:t&&t.message?t.message:void 0,data:{message:e}}))}},{key:"_getSendMessageSpecifiedKey",value:function(e){if([bi.MSG_IMAGE,bi.MSG_AUDIO,bi.MSG_VIDEO,bi.MSG_FILE].includes(e.type))return Xm;if(e.conversationType===bi.CONV_C2C)return Ym;if(e.conversationType===bi.CONV_GROUP){var t=this.getModule(jf).getLocalGroupProfile(e.to);if(!t)return;var n=t.type;return _d(n)?$m:Jm}}},{key:"_addSendMessageTotalCount",value:function(e){var t=this._getSendMessageSpecifiedKey(e);t&&this.getModule(nh).addTotalCount(t)}},{key:"_addSendMessageSuccessCount",value:function(e,t){var n=Math.abs(Date.now()-t),r=this._getSendMessageSpecifiedKey(e);if(r){var i=this.getModule(nh);i.addSuccessCount(r),i.addCost(r,n)}}},{key:"_addSendMessageFailCountOnUser",value:function(e,t){var n,r,i=t.code,o=void 0===i?-1:i,a=this.getModule(nh),s=this._getSendMessageSpecifiedKey(e);s===Xm&&(n=o,r=!1,QT.includes(n)&&(r=!0),r)?a.addFailedCountOfUserSide(Zm):eC(o)&&s&&a.addFailedCountOfUserSide(s)}},{key:"resendMessage",value:function(e){return e.isResend=!0,e.status=jp.UNSEND,this.sendMessageInstance(e)}},{key:"revokeMessage",value:function(e){var t=this,n=null;if(e.conversationType===bi.CONV_C2C?n=this.getModule(Pf):e.conversationType===bi.CONV_GROUP&&(n=this.getModule(jf)),!n)return this._onCannotFindModule();var r=new a_("revokeMessage");r.setMessage("tjg_id:".concat(this.generateTjgID(e)," type:").concat(e.type," from:").concat(e.from," to:").concat(e.to));var i="".concat(this._n,".").concat("revokeMessage");return n.revokeMessage(e).then((function(n){var o=n.data.recallRetList;if(!Bd(o)&&0!==o[0].retCode){var a=new dI({code:o[0].retCode,data:{message:e}});return r.setCode(a.code).setMoreMessage(a.message).end(),gI(a)}return Ll.i("".concat(i," ok. ID:").concat(e.ID)),e.isRevoked=!0,r.end(),t.getModule(Ff).onMessageRevoked([e]),lI({message:e})})).catch((function(n){t.probeNetwork().then((function(e){var t=_(e,2),i=t[0],o=t[1];r.setError(n,i,o).end()}));var o=new dI({code:n&&n.code?n.code:wv,message:n&&n.message?n.message:void 0,data:{message:e}});return Ll.w("".concat(i," failed. error:"),n),gI(o)}))}},{key:"deleteMessage",value:function(e){var t=this,n=null,r=e[0],i=r.conversationID,o="",a=[],s=[];if(r.conversationType===bi.CONV_C2C)n=this.getModule(Pf),o=i.replace(bi.CONV_C2C,""),e.forEach((function(e){e&&e.status===jp.SUCCESS&&e.conversationID===i&&(e._onlineOnlyFlag||a.push("".concat(e.sequence,"_").concat(e.random,"_").concat(e.time)),s.push(e))}));else if(r.conversationType===bi.CONV_GROUP)n=this.getModule(jf),o=i.replace(bi.CONV_GROUP,""),e.forEach((function(e){e&&e.status===jp.SUCCESS&&e.conversationID===i&&(e._onlineOnlyFlag||a.push("".concat(e.sequence)),s.push(e))}));else if(r.conversationType===bi.CONV_SYSTEM)return gI({code:xv});if(!n)return this._onCannotFindModule();if(0===a.length)return this._onMessageDeleted(s);a.length>30&&(a=a.slice(0,30),s=s.slice(0,30));var c=new a_("deleteMessage");c.setMessage("to:".concat(o," count:").concat(a.length));var u="".concat(this._n,".").concat("deleteMessage");return n.deleteMessage({to:o,keyList:a}).then((function(e){return c.end(),Ll.i("".concat(u," ok")),t._onMessageDeleted(s)})).catch((function(e){t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];c.setError(e,r,i).end()})),Ll.w("".concat(u," failed. error:"),e);var n=new dI({code:e&&e.code?e.code:Ov,message:e&&e.message?e.message:void 0});return gI(n)}))}},{key:"_onMessageDeleted",value:function(e){return this.getModule(Ff).onMessageDeleted(e),hI({messageList:e})}},{key:"translateText",value:function(e){var t="".concat(this._n,".").concat("translateText"),r=e.sourceTextList,i=e.sourceLanguage,o=e.targetLanguage,a=new a_("translateText");return a.setMessage("sourceLanguage:".concat(i," targetLanguage:").concat(o)),this.request({protocolName:pv,requestData:{sourceTextList:r,source:i||"auto",target:o,from:this.getMyTinyID(),SDKAppID:this.getSDKAppID()}}).then((function(e){var r=e.data,i=r.error,o=r.requestID,s=r.translatedTextList;if(0===i.code)return a.end(),Ll.i("".concat(t," ok. requestID:").concat(o)),lI({translatedTextList:s});throw n(n({},i),{},{requestID:o})})).catch((function(e){return a.setCode(e.code).setMoreMessage(e.requestID).end(),Ll.w("".concat(t," failed. error:"),e),gI({code:Lv})}))}},{key:"modifyRemoteMessage",value:function(e){var t=this,n=null,r=e.conversationType,i=e.to;if(this.getModule(jf).isMessageFromOrToAVChatroom(i))return gI({code:Zv,data:{message:e}});if(!1===this.getModule(oh).filterMessage(e))return gI({code:Fm,data:{message:e}});r===bi.CONV_C2C?n=this.getModule(Pf):r===bi.CONV_GROUP&&(n=this.getModule(jf));var o=new a_("modifyMessage");o.setMessage("to:".concat(i));var a="".concat(this._n,".modifyRemoteMessage");return n.modifyRemoteMessage(e).then((function(n){o.end(),Ll.i("".concat(a," ok"));var r=t._onModifyRemoteMessageResp(e,n.data);return lI({message:r})})).catch((function(n){if(o.setCode(n.code).setMoreMessage(n.message).end(),Ll.w("".concat(a," failed. error:"),n),20027===n.code){var r=t._onModifyRemoteMessageResp(e,n.data);return gI({code:Xv,data:{message:r}})}return gI({code:n.code,message:n.message,data:{message:e}})}))}},{key:"_onModifyRemoteMessageResp",value:function(e,t){Ll.d("".concat(this._n,"._onModifyRemoteMessageResp options:"),t);var n=e.conversationType,r=e.from,i=e.to,o=e.random,a=e.sequence,s=e.time,c=t.elements,u=t.messageVersion,l=t.cloudCustomData,d=void 0===l?"":l;return this.getModule(Ff).onMessageModified({conversationType:n,from:r,to:i,time:s,random:o,sequence:a,elements:c,cloudCustomData:d,messageVersion:u})}},{key:"_generateUUID",value:function(e){var t=this.getModule(Bf),n="".concat(t.getSDKAppID(),"-").concat(t.getUserID(),"-").concat(function(){for(var e="",t=32;t>0;--t)e+=ld[Math.floor(Math.random()*dd)];return e}()),r=e.name||e.value||e.url||e.tempFilePath,i=r&&r.slice(r.lastIndexOf(".")+1);return i&&(n="".concat(n,".").concat(i)),n}},{key:"getMessageOption",value:function(e){return this._messageOptionsMap.get(e)}},{key:"_getNickAndAvatarByUserID",value:function(e){return this.getModule(Nf).getNickAndAvatarByUserID(e)}},{key:"_getNameCardByGroupID",value:function(e){if(e.conversationType===bi.CONV_GROUP){var t=this.getModule(jf);if(t)return t.getMyNameCardByGroupID(e.to)}return""}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset")),this._messageOptionsMap.clear()}}]),r}(uh),rC=function(e){c(n,e);var t=m(n);function n(e){var r;return i(this,n),(r=t.call(this,e))._n="MessageExtensionModule",r.messageExtensionMap=new Map,r.globalSeqMap=new Map,r.getMessageExtensionsMap=new Map,r}return a(n,[{key:"onMessageExtensionNotify",value:function(e){var t=this,n=e.dataList,r=n.messageInfo,i=n.operateType,o=n.operateResultList,a=n.tinyID,s=n.globalSequence,c=r.clientTime,u=r.random,l="".concat(a,"-").concat(c,"-").concat(u),d=[],p=[];Ll.l("".concat(this._n,".onMessageExtensionNotify messageID:").concat(l," operateType:").concat(i," globalSequence:").concat(s)),this._updateGlobalSequence(l,s);var f=!1,h=!1;o.forEach((function(e){var n=e.extensions,r=void 0===n?[]:n,o=e.clearSequence;1===i?(f=!0,r.forEach((function(e){d.push({key:e.key,value:e.value})})),t._updateLocalExtension(l,r)):2===i?(h=!0,r.forEach((function(e){p.push(e.key)})),t._updateLocalExtension(l,r)):3===i&&(h=!0,t._hasLocalExtension(l)&&t._getLocalExtension(l).forEach((function(e,t){e.seq<=o&&!Bd(e.value)&&p.push(t)})),t._clearLocalExtension(l,o))})),f&&this.emitOuterEvent(yi.MESSAGE_EXTENSIONS_UPDATED,{messageID:l,extensions:d}),h&&this.emitOuterEvent(yi.MESSAGE_EXTENSIONS_DELETED,{messageID:l,keyList:p})}},{key:"setMessageExtensions",value:function(e,t){var n=this;if(!this.canIUse(Nu.MSG_EXT))return gI({code:Vm});var r="".concat(this._n,".").concat("setMessageExtensions"),i=e.ID,o=e.conversationID,a=e.sequence,s=e.time,c=y(t);t.length>20&&(c=t.slice(0,20),Ll.w("".concat(r,". the length of extensions cannot exceed 20.")));var u="conversationID:".concat(o," messageID:").concat(i," sequence:").concat(a," time:").concat(s," count:").concat(c.length),l=new a_("setMessageExtensions");return l.setMessage(u),Ll.l("".concat(r," ").concat(u)),this._modifyMessageExtensions(e,c).then((function(e){var t=e.resultList,n=e.successCount,i=e.failureCount,o="success count:".concat(n," fail count:").concat(i);return l.setMoreMessage(o).end(),Ll.l("".concat(r," ok. ").concat(o)),lI({extensions:t})})).catch((function(e){return n.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];l.setError(e,r,i).end()})),Ll.e("".concat(r," failed. error:"),e),gI(e)}))}},{key:"getMessageExtensions",value:function(e){var t=this;if(!this.canIUse(Nu.MSG_EXT))return gI({code:Vm});var n="".concat(this._n,".").concat("getMessageExtensions"),r=e.ID,i=e.conversationID,o=e.sequence,a=e.time,s="conversationID:".concat(i," messageID:").concat(r," sequence:").concat(o," time:").concat(a),c=new a_("getMessageExtensions");c.setMessage(s),Ll.l("".concat(n," ").concat(s));var u=void 0;return this.getMessageExtensionsMap.has(r)&&(u=this._getGlobalSequence(r)),this._getMessageExtensions(e,u).then((function(e){return c.end(),Ll.l("".concat(n," ok. total count:").concat(e.length)),Zl(u)&&e.length>0&&t.getMessageExtensionsMap.set(r,1),lI({extensions:e})})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];c.setError(e,r,i).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"deleteMessageExtensions",value:function(e,t){var n=this;if(!this.canIUse(Nu.MSG_EXT))return gI({code:Vm});var r="".concat(this._n,".").concat("deleteMessageExtensions"),i=[],o=3;Bd(t)||(o=2,t.forEach((function(e){i.push({key:e,value:"",seq:0})})));var a=e.ID,s=e.conversationID,c=e.sequence,u=e.time,l="conversationID:".concat(s," messageID:").concat(a," sequence:").concat(c," time:").concat(u," operateType:").concat(o),d=new a_("deleteMessageExtensions");return d.setMessage(l),Ll.l("".concat(r," ").concat(l)),this._modifyMessageExtensions(e,i,o).then((function(e){var t=e.resultList,n=e.successCount,i=e.failureCount,a="";return 2===o&&(a="success count:".concat(n," fail count:").concat(i)),d.setMoreMessage("".concat(a)).end(),Ll.l("".concat(r," ok. ").concat(a)),lI({extensions:t})})).catch((function(e){return n.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];d.setError(e,r,i).end()})),Ll.e("".concat(r," failed. error:"),e),gI(e)}))}},{key:"_modifyMessageExtensions",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=e.conversationType,o=void 0;3!==r&&(o=this._getRequestExtensions(e,t));var a=null;switch(i){case bi.CONV_C2C:a=this.getModule(Pf);break;case bi.CONV_GROUP:a=this.getModule(jf);break;default:return gI({code:Dm})}return a.modifyMessageExtensions(e,o,r).then((function(t){var r=t.data,i=r.extensions,o=r.seq,a=[],s=0,c=0,u=[];return(i=Bd(i)?[]:i).forEach((function(e){var t=e.errorCode,n=e.extension,r=n.key,i=n.value,o=n.seq;a.push({code:t,key:r,value:i}),0===t?s++:c++,u.push({key:r,value:i,seq:o})})),n._updateGlobalSequence(e.ID,o),u.length>0&&(n._updateLocalExtension(e.ID,u),u=null),{resultList:a,successCount:s,failureCount:c}})).catch((function(e){return gI(e)}))}},{key:"_getRequestExtensions",value:function(e,t){var n=[];if(this._hasLocalExtension(e.ID)){var r=this._getLocalExtension(e.ID);return t.forEach((function(e){var t=e.key,i=e.value,o=0;r.has(t)&&(o=r.get(t).seq),n.push({key:t,value:i,seq:o})})),n}return t.forEach((function(e){var t=e.key,r=e.value;n.push({key:t,value:r,seq:0})})),n}},{key:"_getMessageExtensions",value:function(e,t){var n=this,r="".concat(this._n,"._getMessageExtensions"),i=e.ID,o=null;switch(e.conversationType){case bi.CONV_C2C:o=this.getModule(Pf);break;case bi.CONV_GROUP:o=this.getModule(jf);break;default:return gI({code:Dm})}return o.getMessageExtensions(e,t).then((function(t){var o=t.data,a=o.extensions,s=o.completeFlag,c=o.globalSequence,u=o.clearSequence;if(a=Bd(a)?[]:a,Ll.l("".concat(r," ok. completeFlag:").concat(s," globalSequence:").concat(c," clearSequence:").concat(u," count:").concat(a.length)),n._updateLocalExtension(i,a),n._clearLocalExtension(i,u),n._updateGlobalSequence(i,c),1!==s){var l=a.slice(-1)[0].seq+1;return n._getMessageExtensions(e,l)}return n._getLocalExtensions(i)})).catch((function(e){return gI(e)}))}},{key:"_hasLocalExtension",value:function(e){return this.messageExtensionMap.has(e)}},{key:"_getLocalExtension",value:function(e){return this.messageExtensionMap.get(e)}},{key:"_updateLocalExtension",value:function(e,t){this._hasLocalExtension(e)||this.messageExtensionMap.set(e,new Map);var n=this._getLocalExtension(e);t.forEach((function(e){var t=e.key,r=e.value,i=void 0===r?"":r,o=e.seq;n.set(t,{value:i,seq:o})}))}},{key:"_clearLocalExtension",value:function(e,t){if(!(t<=0)&&this._hasLocalExtension(e)){var n=this._getLocalExtension(e);n.forEach((function(e,r){e.seq<=t&&n.delete(r)}))}}},{key:"_getLocalExtensions",value:function(e){var t=[];return this._hasLocalExtension(e)&&this._getLocalExtension(e).forEach((function(e,n){var r=e.value;Bd(r)||t.push({key:n,value:r})})),t}},{key:"_getGlobalSequence",value:function(e){return this.globalSeqMap.get(e)}},{key:"_updateGlobalSequence",value:function(e,t){this.globalSeqMap.set(e,t)}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset")),this.messageExtensionMap.clear(),this.globalSeqMap.clear(),this.getMessageExtensionsMap.clear()}}]),n}(uh),iC=function(e){c(n,e);var t=m(n);function n(e){var r;return i(this,n),(r=t.call(this,e))._n="ComboMessageModule",r}return a(n,[{key:"sendMessage",value:function(e){var t=this,n=this._constructMessageInstance(e);if(null===n)return gI({code:Tv});this._addSendMessageTotalCount(n);var r=Date.now();return this.getModule(Ff).setMessageRandom(n),this._sendComboMessage(n,e).then((function(e){var i=e.data,o=i.time,a=i.sequence,s=i.readReceiptCode;Wl(s)&&0!==s&&(new a_("sendMessageWithReceipt").setMessage("from:".concat(n.from," to:").concat(n.to," sequence:").concat(a," readReceiptCode:").concat(s)).end(),Ll.w("".concat(t._n,".sendMessage readReceiptCode:").concat(s," message:").concat(t.getErrorMessage(s)))),t._addSendMessageSuccessCount(n,r);var c=t.getModule(Ff);n.status=jp.SUCCESS,n.time=o,n.conversationType===bi.CONV_GROUP&&(n.sequence=a),c.appendToMessageList(n);var u=n;return!0===n._isExcludedFromLastMessage&&(u=""),c.onMessageSent({conversationOptionsList:[{conversationID:n.conversationID,unreadCount:0,type:n.conversationType,subType:n.conversationSubType,lastMessage:u}]}),lI({message:n})})).catch((function(e){return t._onSendMessageFailed(n,e)}))}},{key:"_sendComboMessage",value:function(e,t){var n=this._m.getModule($f),r="";return e.conversationType===bi.CONV_C2C&&(r="".concat(Lu.NAME.OPEN_IM,".").concat(Lu.CMD.SEND_MESSAGE)),e.conversationType===bi.CONV_GROUP&&(r="".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.SEND_GROUP_MESSAGE)),n.sendComboMessage({servcmd:r,data:t})}},{key:"_constructMessageInstance",value:function(e){var t="".concat(this._n,"._constructMessageInstance"),n=null;try{var r=this.getMyUserID(),i={};if(i.senderTinyID=this.getMyTinyID(),i.currentUser=r,i.from=e.From_Account||r,e.GroupId?(i.conversationID="".concat(bi.CONV_GROUP).concat(e.GroupId),i.conversationType=bi.CONV_GROUP,i.to=e.GroupId):e.To_Account&&(i.conversationID="".concat(bi.CONV_C2C).concat(e.To_Account),i.conversationType=bi.CONV_C2C,i.to=e.To_Account),i.time=e.MsgTimeStamp||0,i.random=e.Random||e.MsgRandom||0,i.priority=e.MsgPriority,Yl(e.CloudCustomData)&&e.CloudCustomData.length>0&&(i.cloudCustomData=e.CloudCustomData),Xl(e.SendMsgControl)&&(i.messageControlInfo={},e.SendMsgControl.includes("NoUnread")&&(i.messageControlInfo.excludedFromUnreadCount=1),e.SendMsgControl.includes("NoLastMsg")&&(i.messageControlInfo.excludedFromLastMessage=1)),i.conversationType===bi.CONV_GROUP&&Xl(e.To_Account)&&e.To_Account.length>0){var o=e.To_Account;e.To_Account.length>50&&(o=e.To_Account.slice(0,50),Ll.w("".concat(t," To_Account must be less than or equal to 50."))),i.receiverList=y(o),e.To_Account=y(o)}1!==e.IsNeedReadReceipt&&1!==e.NeedReadReceipt||(i.needReadReceipt=!0),1===e.SupportMessageExtension&&(i.isSupportExtension=!0),(n=new uI(i)).status=jp.UNSEND,e.MsgClientTime=n.clientTime,n.conversationType===bi.CONV_C2C&&(e.MsgSeq=n.sequence);for(var a,s=e.MsgBody.length,c=0;c<s;c++)"TIMTextElem"===(a=e.MsgBody[c]).MsgType?n.setTextElement(a.MsgContent.Text):"TIMCustomElem"===a.MsgType?n.setCustomElement({data:a.MsgContent.Data||"",description:a.MsgContent.Desc||"",extension:a.MsgContent.Ext||""}):"TIMFaceElem"===a.MsgType&&n.setFaceElement({index:a.MsgContent.Index,data:a.MsgContent.Data});var u=n.getElements();n.payload=u[0].content,n.type=u[0].type}catch(Lk){n=null,Ll.e("".concat(t," failed. error:"),Lk)}return n}},{key:"_onSendMessageFailed",value:function(e,t){e.status=jp.FAIL,this.getModule(Ff).deleteMessageRandom(e),this._addSendMessageFailCountOnUser(e,t);var n=new a_("sendMessage");return n.setMessage("tjg_id:".concat(this.generateTjgID(e)," type:").concat(e.type," from:").concat(e.from," to:").concat(e.to)),this.probeNetwork().then((function(e){var r=_(e,2),i=r[0],o=r[1];n.setError(t,i,o).end()})),Ll.e("".concat(this._n,"._onSendMessageFailed error:"),t),gI(new dI({code:t&&t.code?t.code:Tv,message:t&&t.message?t.message:void 0,data:{message:e}}))}},{key:"_getSendMessageSpecifiedKey",value:function(e){if(e.conversationType===bi.CONV_C2C)return Ym;if(e.conversationType===bi.CONV_GROUP){var t=this.getModule(jf).getLocalGroupProfile(e.to);if(!t)return;var n=t.type;return _d(n)?$m:Jm}}},{key:"_addSendMessageTotalCount",value:function(e){var t=this._getSendMessageSpecifiedKey(e);t&&this.getModule(nh).addTotalCount(t)}},{key:"_addSendMessageSuccessCount",value:function(e,t){var n=Math.abs(Date.now()-t),r=this._getSendMessageSpecifiedKey(e);if(r){var i=this.getModule(nh);i.addSuccessCount(r),i.addCost(r,n)}}},{key:"_addSendMessageFailCountOnUser",value:function(e,t){var n=t.code,r=void 0===n?-1:n,i=this.getModule(nh),o=this._getSendMessageSpecifiedKey(e);eC(r)&&o&&i.addFailedCountOfUserSide(o)}}]),n}(uh),oC=function(e){c(n,e);var t=m(n);function n(e){var r;return i(this,n),(r=t.call(this,e))._n="PluginModule",r.plugins={},r}return a(n,[{key:"registerPlugin",value:function(e){var t=this;Object.keys(e).forEach((function(n){t.plugins[n]=e[n]})),new a_("registerPlugin").setMessage("".concat(Object.keys(e))).end()}},{key:"getPlugin",value:function(e){return this.plugins[e]}},{key:"reset",value:function(){}}]),n}(uh),aC=function(e){c(r,e);var t=m(r);function r(e){var n;return i(this,r),(n=t.call(this,e))._n="SyncUnreadMessageModule",n._cookie="",n._onlineSyncFlag=!1,n.getInnerEmitterInstance().on(RI,n._onLoginSuccess,g(n)),n}return a(r,[{key:"_onLoginSuccess",value:function(e){this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:0})}},{key:"_startSync",value:function(e){var t=this,r=e.cookie,i=e.syncFlag,o=e.isOnlineSync,a="".concat(this._n,"._startSync");Ll.l("".concat(a," cookie:").concat(r," syncFlag:").concat(i," isOnlineSync:").concat(o)),this.request({protocolName:hh,requestData:{cookie:r,syncFlag:i,isOnlineSync:o}}).then((function(e){var r=e.data,i=r.cookie,o=r.syncFlag;t._cookie=i,Bd(i)||(0===o||1===o?(t._dispatchUnreadMessage(n(n({},e.data),{},{isSyncingEnded:!1})),t._startSync({cookie:i,syncFlag:o,isOnlineSync:0})):2===o&&t._dispatchUnreadMessage(n(n({},e.data),{},{isSyncingEnded:!0})))})).catch((function(e){Ll.e("".concat(a," failed. error:"),e)}))}},{key:"_dispatchUnreadMessage",value:function(e){e.eventArray&&this.getModule($f).onMessage({head:{},body:{eventArray:e.eventArray,isInstantMessage:this._onlineSyncFlag,isSyncingEnded:e.isSyncingEnded}}),this.getModule(Pf).onNewC2CMessage({dataList:e.messageList,isInstantMessage:!!e.isSyncingEnded&&this._onlineSyncFlag,C2CRemainingUnreadList:e.C2CRemainingUnreadList,C2CPairUnreadList:e.C2CPairUnreadList})}},{key:"startOnlineSync",value:function(){Ll.l("".concat(this._n,".startOnlineSync")),this._onlineSyncFlag=!0,this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:1})}},{key:"startSyncOnReconnected",value:function(){Ll.l("".concat(this._n,".startSyncOnReconnected.")),this._onlineSyncFlag=!0,this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:0})}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset")),this._onlineSyncFlag=!1,this._cookie=""}}]),r}(uh),sC={request:{toAccount:"To_Account",fromAccount:"From_Account",to:"To_Account",from:"From_Account",groupID:"GroupId",groupAtUserID:"GroupAt_Account",extension:"Ext",data:"Data",description:"Desc",elements:"MsgBody",sizeType:"Type",downloadFlag:"Download_Flag",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",videoUrl:"",imageUrl:"URL",fileUrl:"Url",uuid:"UUID",priority:"MsgPriority",receiverUserID:"To_Account",receiverGroupID:"GroupId",messageSender:"SenderId",messageReceiver:"ReceiverId",nick:"From_AccountNick",avatar:"From_AccountHeadurl",messageNumber:"MsgNum",pbDownloadKey:"PbMsgKey",downloadKey:"JsonMsgKey",applicationType:"PendencyType",userIDList:"To_Account",groupNameList:"GroupName",userID:"To_Account",groupAttributeList:"GroupAttr",mainSequence:"AttrMainSeq",avChatRoomKey:"BytesKey",attributeControl:"AttrControl",sequence:"seq",messageControlInfo:"SendMsgControl",updateSequence:"UpdateSeq",clientTime:"MsgClientTime",sequenceList:"MsgSeqList",topicID:"TopicId",customData:"CustomString",isSupportTopic:"SupportTopic",isWebUniapp:"is_web_uniapp",isSupportExtension:"SupportMessageExtension",messageSequence:"MsgSeq",messageKey:"MsgKey",startSequence:"startSeq"},response:{MsgPriority:"priority",ThumbUUID:"thumbUUID",VideoUUID:"videoUUID",Download_Flag:"downloadFlag",GroupId:"groupID",Member_Account:"userID",MsgList:"messageList",SyncFlag:"syncFlag",To_Account:"to",From_Account:"from",MsgSeq:"sequence",MsgRandom:"random",MsgTime:"time",MsgTimeStamp:"time",MsgContent:"content",MsgBody:"elements",From_AccountNick:"nick",From_AccountHeadurl:"avatar",GroupWithdrawInfoArray:"revokedInfos",GroupReadInfoArray:"groupMessageReadNotice",LastReadMsgSeq:"lastMessageSeq",WithdrawC2cMsgNotify:"c2cMessageRevokedNotify",C2cWithdrawInfoArray:"revokedInfos",C2cReadedReceipt:"c2cMessageReadReceipt",ReadC2cMsgNotify:"c2cMessageReadNotice",LastReadTime:"peerReadTime",MsgRand:"random",MsgType:"type",MsgShow:"messageShow",NextMsgSeq:"nextMessageSeq",FaceUrl:"avatar",ProfileDataMod:"profileModify",Profile_Account:"userID",ValueBytes:"value",ValueNum:"value",NoticeSeq:"noticeSequence",NotifySeq:"notifySequence",MsgFrom_AccountExtraInfo:"messageFromAccountExtraInformation",Operator_Account:"operatorID",OpType:"operationType",ReportType:"operationType",UserId:"userID",User_Account:"userID",List_Account:"userIDList",MsgOperatorMemberExtraInfo:"operatorInfo",MsgMemberExtraInfo:"memberInfoList",ImageUrl:"avatar",NickName:"nick",MsgGroupNewInfo:"newGroupProfile",MsgAppDefinedData:"groupCustomField",Owner_Account:"ownerID",GroupFaceUrl:"avatar",GroupIntroduction:"introduction",GroupNotification:"notification",GroupApplyJoinOption:"joinOption",MsgKey:"messageKey",GroupInfo:"groupProfile",ShutupTime:"muteTime",Desc:"description",Ext:"extension",GroupAt_Account:"groupAtUserID",MsgNum:"messageNumber",PbMsgKey:"pbDownloadKey",JsonMsgKey:"downloadKey",MsgModifiedFlag:"isModified",PendencyItem:"applicationItem",PendencyType:"applicationType",AddTime:"time",AddSource:"source",AddWording:"wording",ProfileImImage:"avatar",PendencyAdd:"friendApplicationAdded",FrienPencydDel_Account:"friendApplicationDeletedUserIDList",Peer_Account:"userID",GroupAttr:"groupAttributeList",GroupAttrAry:"groupAttributeList",AttrMainSeq:"mainSequence",seq:"sequence",GroupAttrOption:"groupAttributeOption",BytesChangedKeys:"changedKeyList",GroupAttrInfo:"groupAttributeList",GroupAttrSeq:"mainSequence",PushChangedAttrValFlag:"isWithChangedAttributeInfo",SubKeySeq:"sequence",Val:"value",MsgGroupFromCardName:"senderNameCard",MsgGroupFromNickName:"senderNick",C2cNick:"peerNick",C2cImage:"peerAvatar",SendMsgControl:"messageControlInfo",NoLastMsg:"excludedFromLastMessage",NoUnread:"excludedFromUnreadCount",UpdateSeq:"updateSequence",MuteNotifications:"muteFlag",MsgClientTime:"clientTime",TinyId:"tinyID",GroupMsgReceiptList:"readReceiptList",ReadNum:"readCount",UnreadNum:"unreadCount",TopicId:"topicID",MillionGroupFlag:"communityType",SupportTopic:"isSupportTopic",MsgTopicNewInfo:"newTopicInfo",ShutupAll:"muteAllMembers",CustomString:"customData",TopicFaceUrl:"avatar",TopicIntroduction:"introduction",TopicNotification:"notification",TopicIdArray:"topicIDList",MsgVersion:"messageVersion",C2cMsgModNotifys:"c2cMessageModified",GroupMsgModNotifys:"groupMessageModified",ApplyJoinOption:"joinOption",MsgFlag:"messageRemindType",AtInfoList:"groupAtInfoList",AtFlagList:"groupAtType",AtMsgSeq:"sequence",BanDuration:"duration",BanDescription:"reason",NotVisible:"invisible",BytesTag:"tag",BytesValue:"value",RptBytesValue:"value",LatestSeq:"globalSequence",ClearSeq:"clearSequence",SupportMessageExtension:"isSupportExtension",ExtensionList:"extensions",GroupCounter:"counterList",Revoker_Account:"revoker"},ignoreKeyWord:["C2C","ID","USP"]},cC=Mt.PROPER,uC=yn.trim;function lC(e,t){if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");var n;return t=Object.assign({pascalCase:!1},t),0===(e=Array.isArray(e)?e.map((function(e){return e.trim()})).filter((function(e){return e.length})).join("-"):e.trim()).length?"":1===e.length?t.pascalCase?e.toUpperCase():e.toLowerCase():(e!==e.toLowerCase()&&(e=dC(e)),e=e.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(function(e,t){return t.toUpperCase()})).replace(/\d+(\w|$)/g,(function(e){return e.toUpperCase()})),n=e,t.pascalCase?n.charAt(0).toUpperCase()+n.slice(1):n)}rn({target:"String",proto:!0,forced:(tC="trim",R((function(){return!!fn[tC]()||"​᠎"!=="​᠎"[tC]()||cC&&fn[tC].name!==tC})))},{trim:function(){return uC(this)}});var dC=function(e){for(var t=!1,n=!1,r=!1,i=0;i<e.length;i++){var o=e[i];t&&/[a-zA-Z]/.test(o)&&o.toUpperCase()===o?(e=e.slice(0,i)+"-"+e.slice(i),t=!1,r=n,n=!0,i++):n&&r&&/[a-zA-Z]/.test(o)&&o.toLowerCase()===o?(e=e.slice(0,i-1)+"-"+e.slice(i-1),r=n,n=!1,t=!0):(t=o.toLowerCase()===o&&o.toUpperCase()!==o,r=n,n=o.toUpperCase()===o&&o.toLowerCase()!==o)}return e};function pC(e,t){var n=0;return function e(t,r){if(++n>100)return n--,t;if(Xl(t)){var i=t.map((function(t){return Jl(t)?e(t,r):t}));return n--,i}if(Jl(t)){var o=(a=t,s=function(e,t){if(!rd(t))return!1;if((i=t)!==lC(i))for(var n=0;n<sC.ignoreKeyWord.length&&!t.includes(sC.ignoreKeyWord[n]);n++);var i;return Zl(r[t])?function(e){return"OPPOChannelID"===e?e:e[0].toUpperCase()+lC(e).slice(1)}(t):r[t]},c=Object.create(null),Object.keys(a).forEach((function(e){var t=s(a[e],e);t&&(c[t]=a[e])})),c);return o=Sd(o,(function(t,n){return Xl(t)||Jl(t)?e(t,r):t})),n--,o}var a,s,c}(e,t)}function fC(e,t){if(Xl(e))return e.map((function(e){return Jl(e)?fC(e,t):e}));if(Jl(e)){var n=(r=e,i=function(e,n){return Zl(t[n])?lC(n):t[n]},o={},Object.keys(r).forEach((function(e){o[i(r[e],e)]=r[e]})),o);return Sd(n,(function(e){return Xl(e)||Jl(e)?fC(e,t):e}))}var r,i,o}var hC="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,gC=A.RangeError,vC=function(e){if(void 0===e)return 0;var t=Dt(e),n=Nt(t);if(t!==n)throw gC("Wrong length or index");return n},mC=A.Array,_C=Math.abs,yC=Math.pow,bC=Math.floor,IC=Math.log,TC=Math.LN2,CC=function(e,t,n){var r,i,o,a=mC(n),s=8*n-t-1,c=(1<<s)-1,u=c>>1,l=23===t?yC(2,-24)-yC(2,-77):0,d=e<0||0===e&&1/e<0?1:0,p=0;for((e=_C(e))!=e||1/0===e?(i=e!=e?1:0,r=c):(r=bC(IC(e)/TC),e*(o=yC(2,-r))<1&&(r--,o*=2),(e+=r+u>=1?l/o:l*yC(2,1-u))*o>=2&&(r++,o/=2),r+u>=c?(i=0,r=c):r+u>=1?(i=(e*o-1)*yC(2,t),r+=u):(i=e*yC(2,u-1)*yC(2,t),r=0));t>=8;)a[p++]=255&i,i/=256,t-=8;for(r=r<<t|i,s+=t;s>0;)a[p++]=255&r,r/=256,s-=8;return a[--p]|=128*d,a},SC=function(e,t){var n,r=e.length,i=8*r-t-1,o=(1<<i)-1,a=o>>1,s=i-7,c=r-1,u=e[c--],l=127&u;for(u>>=7;s>0;)l=256*l+e[c--],s-=8;for(n=l&(1<<-s)-1,l>>=-s,s+=t;s>0;)n=256*n+e[c--],s-=8;if(0===l)l=1-a;else{if(l===o)return n?NaN:u?-1/0:1/0;n+=yC(2,t),l-=a}return(u?-1:1)*n*yC(2,l-t)},EC=function(e){for(var t=ke(this),n=Pt(t),r=arguments.length,i=xt(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,a=void 0===o?n:xt(o,n);a>i;)t[i++]=e;return t},MC=Ht.f,kC=rt.f,wC=Mt.PROPER,OC=Mt.CONFIGURABLE,DC=Tt.get,AC=Tt.set,RC=A.ArrayBuffer,xC=RC,LC=xC&&xC.prototype,NC=A.DataView,PC=NC&&NC.prototype,jC=Object.prototype,UC=A.Array,GC=A.RangeError,VC=z(EC),FC=z([].reverse),BC=CC,qC=SC,HC=function(e){return[255&e]},zC=function(e){return[255&e,e>>8&255]},KC=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},WC=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},YC=function(e){return BC(e,23,4)},JC=function(e){return BC(e,52,8)},$C=function(e,t){kC(e.prototype,t,{get:function(){return DC(this)[t]}})},XC=function(e,t,n,r){var i=vC(n),o=DC(e);if(i+t>o.byteLength)throw GC("Wrong index");var a=DC(o.buffer).bytes,s=i+o.byteOffset,c=as(a,s,s+t);return r?c:FC(c)},ZC=function(e,t,n,r,i,o){var a=vC(n),s=DC(e);if(a+t>s.byteLength)throw GC("Wrong index");for(var c=DC(s.buffer).bytes,u=a+s.byteOffset,l=r(+i),d=0;d<t;d++)c[u+d]=l[o?d:t-d-1]};if(hC){var QC=wC&&"ArrayBuffer"!==RC.name;if(R((function(){RC(1)}))&&R((function(){new RC(-1)}))&&!R((function(){return new RC,new RC(1.5),new RC(NaN),QC&&!OC})))QC&&OC&&it(RC,"name","ArrayBuffer");else{(xC=function(e){return Ds(this,LC),new RC(vC(e))}).prototype=LC;for(var eS,tS=MC(RC),nS=0;tS.length>nS;)(eS=tS[nS++])in xC||it(xC,eS,RC[eS]);LC.constructor=xC}ci&&$r(PC)!==jC&&ci(PC,jC);var rS=new NC(new xC(2)),iS=z(PC.setInt8);rS.setInt8(0,2147483648),rS.setInt8(1,2147483649),!rS.getInt8(0)&&rS.getInt8(1)||Ms(PC,{setInt8:function(e,t){iS(this,e,t<<24>>24)},setUint8:function(e,t){iS(this,e,t<<24>>24)}},{unsafe:!0})}else LC=(xC=function(e){Ds(this,LC);var t=vC(e);AC(this,{bytes:VC(UC(t),0),byteLength:t}),x||(this.byteLength=t)}).prototype,PC=(NC=function(e,t,n){Ds(this,PC),Ds(e,LC);var r=DC(e).byteLength,i=Dt(t);if(i<0||i>r)throw GC("Wrong offset");if(i+(n=void 0===n?r-i:Nt(n))>r)throw GC("Wrong length");AC(this,{buffer:e,byteLength:n,byteOffset:i}),x||(this.buffer=e,this.byteLength=n,this.byteOffset=i)}).prototype,x&&($C(xC,"byteLength"),$C(NC,"buffer"),$C(NC,"byteLength"),$C(NC,"byteOffset")),Ms(PC,{getInt8:function(e){return XC(this,1,e)[0]<<24>>24},getUint8:function(e){return XC(this,1,e)[0]},getInt16:function(e){var t=XC(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=XC(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return WC(XC(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return WC(XC(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return qC(XC(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return qC(XC(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){ZC(this,1,e,HC,t)},setUint8:function(e,t){ZC(this,1,e,HC,t)},setInt16:function(e,t){ZC(this,2,e,zC,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){ZC(this,2,e,zC,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){ZC(this,4,e,KC,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){ZC(this,4,e,KC,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){ZC(this,4,e,YC,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){ZC(this,8,e,JC,t,arguments.length>2?arguments[2]:void 0)}});ni(xC,"ArrayBuffer"),ni(NC,"DataView");var oS={ArrayBuffer:xC,DataView:NC},aS=oS.ArrayBuffer,sS=oS.DataView,cS=sS.prototype,uS=z(aS.prototype.slice),lS=z(cS.getUint8),dS=z(cS.setUint8),pS=R((function(){return!new aS(2).slice(1,void 0).byteLength}));rn({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:pS},{slice:function(e,t){if(uS&&void 0===t)return uS(Ze(this),e);for(var n=Ze(this).byteLength,r=xt(e,n),i=xt(void 0===t?n:t,n),o=new(Us(this,aS))(Nt(i-r)),a=new sS(this),s=new sS(o),c=0;r<i;)dS(s,c++,lS(a,r++));return o}});var fS,hS,gS,vS=rt.f,mS=A.Int8Array,_S=mS&&mS.prototype,yS=A.Uint8ClampedArray,bS=yS&&yS.prototype,IS=mS&&$r(mS),TS=_S&&$r(_S),CS=Object.prototype,SS=A.TypeError,ES=Ue("toStringTag"),MS=xe("TYPED_ARRAY_TAG"),kS=xe("TYPED_ARRAY_CONSTRUCTOR"),wS=hC&&!!ci&&"Opera"!==ln(A.opera),OS=!1,DS={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},AS={BigInt64Array:8,BigUint64Array:8},RS=function(e){if(!ne(e))return!1;var t=ln(e);return Oe(DS,t)||Oe(AS,t)};for(fS in DS)(gS=(hS=A[fS])&&hS.prototype)?it(gS,kS,hS):wS=!1;for(fS in AS)(gS=(hS=A[fS])&&hS.prototype)&&it(gS,kS,hS);if((!wS||!te(IS)||IS===Function.prototype)&&(IS=function(){throw SS("Incorrect invocation")},wS))for(fS in DS)A[fS]&&ci(A[fS],IS);if((!wS||!TS||TS===CS)&&(TS=IS.prototype,wS))for(fS in DS)A[fS]&&ci(A[fS].prototype,TS);if(wS&&$r(bS)!==TS&&ci(bS,TS),x&&!Oe(TS,ES))for(fS in OS=!0,vS(TS,ES,{get:function(){return ne(this)?this[MS]:void 0}}),DS)A[fS]&&it(A[fS],MS,fS);var xS={NATIVE_ARRAY_BUFFER_VIEWS:wS,TYPED_ARRAY_CONSTRUCTOR:kS,TYPED_ARRAY_TAG:OS&&MS,aTypedArray:function(e){if(RS(e))return e;throw SS("Target is not a typed array")},aTypedArrayConstructor:function(e){if(te(e)&&(!ci||oe(IS,e)))return e;throw SS(me(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,r){if(x){if(n)for(var i in DS){var o=A[i];if(o&&Oe(o.prototype,e))try{delete o.prototype[e]}catch(Lk){try{o.prototype[e]=t}catch(s){}}}TS[e]&&!n||kt(TS,e,n?t:wS&&_S[e]||t,r)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(x){if(ci){if(n)for(r in DS)if((i=A[r])&&Oe(i,e))try{delete i[e]}catch(Lk){}if(IS[e]&&!n)return;try{return kt(IS,e,n?t:wS&&IS[e]||t)}catch(Lk){}}for(r in DS)!(i=A[r])||i[e]&&!n||kt(i,e,t)}},isView:function(e){if(!ne(e))return!1;var t=ln(e);return"DataView"===t||Oe(DS,t)||Oe(AS,t)},isTypedArray:RS,TypedArray:IS,TypedArrayPrototype:TS},LS=xS.NATIVE_ARRAY_BUFFER_VIEWS,NS=A.ArrayBuffer,PS=A.Int8Array,jS=!LS||!R((function(){PS(1)}))||!R((function(){new PS(-1)}))||!Pr((function(e){new PS,new PS(null),new PS(1.5),new PS(e)}),!0)||R((function(){return 1!==new PS(new NS(2),1,void 0).length})),US=Math.floor,GS=Number.isInteger||function(e){return!ne(e)&&isFinite(e)&&US(e)===e},VS=A.RangeError,FS=A.RangeError,BS=function(e,t){var n=function(e){var t=Dt(e);if(t<0)throw VS("The argument can't be less than 0");return t}(e);if(n%t)throw FS("Wrong offset");return n},qS=xS.aTypedArrayConstructor,HS=function(e){var t,n,r,i,o,a,s=Ps(this),c=ke(e),u=arguments.length,l=u>1?arguments[1]:void 0,d=void 0!==l,p=kr(c);if(p&&!Sr(p))for(a=(o=Or(c,p)).next,c=[];!(i=P(a,o)).done;)c.push(i.value);for(d&&u>2&&(l=zn(l,arguments[2])),n=Pt(c),r=new(qS(s))(n),t=0;n>t;t++)r[t]=d?l(c[t],t):c[t];return r};k((function(e){var t=Ht.f,n=sr.forEach,r=Tt.get,i=Tt.set,o=rt.f,a=Ye.f,s=Math.round,c=A.RangeError,u=oS.ArrayBuffer,l=u.prototype,d=oS.DataView,p=xS.NATIVE_ARRAY_BUFFER_VIEWS,f=xS.TYPED_ARRAY_CONSTRUCTOR,h=xS.TYPED_ARRAY_TAG,g=xS.TypedArray,v=xS.TypedArrayPrototype,m=xS.aTypedArrayConstructor,_=xS.isTypedArray,y=function(e,t){m(e);for(var n=0,r=t.length,i=new e(r);r>n;)i[n]=t[n++];return i},b=function(e,t){o(e,t,{get:function(){return r(this)[t]}})},I=function(e){var t;return oe(l,e)||"ArrayBuffer"==(t=ln(e))||"SharedArrayBuffer"==t},T=function(e,t){return _(e)&&!ge(t)&&t in e&&GS(+t)&&t>=0},C=function(e,t){return t=Be(t),T(e,t)?V(2,e[t]):a(e,t)},S=function(e,t,n){return t=Be(t),!(T(e,t)&&ne(n)&&Oe(n,"value"))||Oe(n,"get")||Oe(n,"set")||n.configurable||Oe(n,"writable")&&!n.writable||Oe(n,"enumerable")&&!n.enumerable?o(e,t,n):(e[t]=n.value,e)};x?(p||(Ye.f=C,rt.f=S,b(v,"buffer"),b(v,"byteOffset"),b(v,"byteLength"),b(v,"length")),rn({target:"Object",stat:!0,forced:!p},{getOwnPropertyDescriptor:C,defineProperty:S}),e.exports=function(e,a,l){var m=e.match(/\d+$/)[0]/8,b=e+(l?"Clamped":"")+"Array",T="get"+e,C="set"+e,S=A[b],E=S,M=E&&E.prototype,k={},w=function(e,t){o(e,t,{get:function(){return function(e,t){var n=r(e);return n.view[T](t*m+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,n){var i=r(e);l&&(n=(n=s(n))<0?0:n>255?255:255&n),i.view[C](t*m+i.byteOffset,n,!0)}(this,t,e)},enumerable:!0})};p?jS&&(E=a((function(e,t,n,r){return Ds(e,M),ji(ne(t)?I(t)?void 0!==r?new S(t,BS(n,m),r):void 0!==n?new S(t,BS(n,m)):new S(t):_(t)?y(E,t):P(HS,E,t):new S(vC(t)),e,E)})),ci&&ci(E,g),n(t(S),(function(e){e in E||it(E,e,S[e])})),E.prototype=M):(E=a((function(e,t,n,r){Ds(e,M);var o,a,s,l=0,p=0;if(ne(t)){if(!I(t))return _(t)?y(E,t):P(HS,E,t);o=t,p=BS(n,m);var f=t.byteLength;if(void 0===r){if(f%m)throw c("Wrong length");if((a=f-p)<0)throw c("Wrong length")}else if((a=Nt(r)*m)+p>f)throw c("Wrong length");s=a/m}else s=vC(t),o=new u(a=s*m);for(i(e,{buffer:o,byteOffset:p,byteLength:a,length:s,view:new d(o)});l<s;)w(e,l++)})),ci&&ci(E,g),M=E.prototype=qn(v)),M.constructor!==E&&it(M,"constructor",E),it(M,f,E),h&&it(M,h,b),k[b]=E,rn({global:!0,forced:E!=S,sham:!p},k),"BYTES_PER_ELEMENT"in E||it(E,"BYTES_PER_ELEMENT",m),"BYTES_PER_ELEMENT"in M||it(M,"BYTES_PER_ELEMENT",m),ws(b)}):e.exports=function(){}}))("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var zS=Math.min,KS=z([].copyWithin||function(e,t){var n=ke(this),r=Pt(n),i=xt(e,r),o=xt(t,r),a=arguments.length>2?arguments[2]:void 0,s=zS((void 0===a?r:xt(a,r))-o,r-i),c=1;for(o<i&&i<o+s&&(c=-1,o+=s-1,i+=s-1);s-- >0;)o in n?n[i]=n[o]:delete n[i],i+=c,o+=c;return n}),WS=xS.aTypedArray;(0,xS.exportTypedArrayMethod)("copyWithin",(function(e,t){return KS(WS(this),e,t,arguments.length>2?arguments[2]:void 0)}));var YS=sr.every,JS=xS.aTypedArray;(0,xS.exportTypedArrayMethod)("every",(function(e){return YS(JS(this),e,arguments.length>1?arguments[1]:void 0)}));var $S=xS.aTypedArray;(0,xS.exportTypedArrayMethod)("fill",(function(e){var t=arguments.length;return P(EC,$S(this),e,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}));var XS=xS.TYPED_ARRAY_CONSTRUCTOR,ZS=xS.aTypedArrayConstructor,QS=function(e){return ZS(Us(e,e[XS]))},eE=function(e,t){return function(e,t){for(var n=0,r=Pt(t),i=new e(r);r>n;)i[n]=t[n++];return i}(QS(e),t)},tE=sr.filter,nE=xS.aTypedArray;(0,xS.exportTypedArrayMethod)("filter",(function(e){var t=tE(nE(this),e,arguments.length>1?arguments[1]:void 0);return eE(this,t)}));var rE=sr.find,iE=xS.aTypedArray;(0,xS.exportTypedArrayMethod)("find",(function(e){return rE(iE(this),e,arguments.length>1?arguments[1]:void 0)}));var oE=sr.findIndex,aE=xS.aTypedArray;(0,xS.exportTypedArrayMethod)("findIndex",(function(e){return oE(aE(this),e,arguments.length>1?arguments[1]:void 0)}));var sE=sr.forEach,cE=xS.aTypedArray;(0,xS.exportTypedArrayMethod)("forEach",(function(e){sE(cE(this),e,arguments.length>1?arguments[1]:void 0)}));var uE=Ut.includes,lE=xS.aTypedArray;(0,xS.exportTypedArrayMethod)("includes",(function(e){return uE(lE(this),e,arguments.length>1?arguments[1]:void 0)}));var dE=Ut.indexOf,pE=xS.aTypedArray;(0,xS.exportTypedArrayMethod)("indexOf",(function(e){return dE(pE(this),e,arguments.length>1?arguments[1]:void 0)}));var fE=Ue("iterator"),hE=A.Uint8Array,gE=z(Va.values),vE=z(Va.keys),mE=z(Va.entries),_E=xS.aTypedArray,yE=xS.exportTypedArrayMethod,bE=hE&&hE.prototype,IE=!R((function(){bE[fE].call([1])})),TE=!!bE&&bE.values&&bE[fE]===bE.values&&"values"===bE.values.name,CE=function(){return gE(_E(this))};yE("entries",(function(){return mE(_E(this))}),IE),yE("keys",(function(){return vE(_E(this))}),IE),yE("values",CE,IE||!TE,{name:"values"}),yE(fE,CE,IE||!TE,{name:"values"});var SE=xS.aTypedArray,EE=xS.exportTypedArrayMethod,ME=z([].join);EE("join",(function(e){return ME(SE(this),e)}));var kE=xS.aTypedArray;(0,xS.exportTypedArrayMethod)("lastIndexOf",(function(e){var t=arguments.length;return ba(tI,kE(this),t>1?[e,arguments[1]]:[e])}));var wE=sr.map,OE=xS.aTypedArray;(0,xS.exportTypedArrayMethod)("map",(function(e){return wE(OE(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(QS(e))(t)}))}));var DE=A.TypeError,AE=function(e){return function(t,n,r,i){ye(n);var o=ke(t),a=X(o),s=Pt(o),c=e?s-1:0,u=e?-1:1;if(r<2)for(;;){if(c in a){i=a[c],c+=u;break}if(c+=u,e?c<0:s<=c)throw DE("Reduce of empty array with no initial value")}for(;e?c>=0:s>c;c+=u)c in a&&(i=n(i,a[c],c,o));return i}},RE={left:AE(!1),right:AE(!0)},xE=RE.left,LE=xS.aTypedArray;(0,xS.exportTypedArrayMethod)("reduce",(function(e){var t=arguments.length;return xE(LE(this),e,t,t>1?arguments[1]:void 0)}));var NE=RE.right,PE=xS.aTypedArray;(0,xS.exportTypedArrayMethod)("reduceRight",(function(e){var t=arguments.length;return NE(PE(this),e,t,t>1?arguments[1]:void 0)}));var jE=xS.aTypedArray,UE=xS.exportTypedArrayMethod,GE=Math.floor;UE("reverse",(function(){for(var e,t=jE(this).length,n=GE(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this}));var VE=A.RangeError,FE=A.Int8Array,BE=FE&&FE.prototype,qE=BE&&BE.set,HE=xS.aTypedArray,zE=xS.exportTypedArrayMethod,KE=!R((function(){var e=new Uint8ClampedArray(2);return P(qE,e,{length:1,0:3},1),3!==e[1]})),WE=KE&&xS.NATIVE_ARRAY_BUFFER_VIEWS&&R((function(){var e=new FE(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));zE("set",(function(e){HE(this);var t=BS(arguments.length>1?arguments[1]:void 0,1),n=ke(e);if(KE)return P(qE,this,n,t);var r=this.length,i=Pt(n),o=0;if(i+t>r)throw VE("Wrong length");for(;o<i;)this[t+o]=n[o++]}),!KE||WE);var YE=xS.aTypedArray;(0,xS.exportTypedArrayMethod)("slice",(function(e,t){for(var n=kn(YE(this),e,t),r=QS(this),i=0,o=n.length,a=new r(o);o>i;)a[i]=n[i++];return a}),R((function(){new Int8Array(1).slice()})));var JE=sr.some,$E=xS.aTypedArray;(0,xS.exportTypedArrayMethod)("some",(function(e){return JE($E(this),e,arguments.length>1?arguments[1]:void 0)}));var XE=A.Array,ZE=xS.aTypedArray,QE=xS.exportTypedArrayMethod,eM=A.Uint16Array,tM=eM&&z(eM.prototype.sort),nM=!(!tM||R((function(){tM(new eM(2),null)}))&&R((function(){tM(new eM(2),{})}))),rM=!!tM&&!R((function(){if(de)return de<74;if(_I)return _I<67;if(yI)return!0;if(II)return II<602;var e,t,n=new eM(516),r=XE(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(tM(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0}));QE("sort",(function(e){return void 0!==e&&ye(e),rM?tM(this,e):G_(ZE(this),function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e))}),!rM||nM);var iM=xS.aTypedArray;(0,xS.exportTypedArrayMethod)("subarray",(function(e,t){var n=iM(this),r=n.length,i=xt(e,r);return new(QS(n))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,Nt((void 0===t?r:xt(t,r))-i))}));var oM=A.Int8Array,aM=xS.aTypedArray,sM=xS.exportTypedArrayMethod,cM=[].toLocaleString,uM=!!oM&&R((function(){cM.call(new oM(1))}));sM("toLocaleString",(function(){return ba(cM,uM?kn(aM(this)):aM(this),kn(arguments))}),R((function(){return[1,2].toLocaleString()!=new oM([1,2]).toLocaleString()}))||!R((function(){oM.prototype.toLocaleString.call([1,2])})));var lM=xS.exportTypedArrayMethod,dM=A.Uint8Array,pM=dM&&dM.prototype||{},fM=[].toString,hM=z([].join);R((function(){fM.call({})}))&&(fM=function(){return hM(this)});var gM=pM.toString!=fM;lM("toString",fM,gM);var vM=A.RangeError,mM=String.fromCharCode,_M=String.fromCodePoint,yM=z([].join),bM=!!_M&&1!=_M.length;rn({target:"String",stat:!0,forced:bM},{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,i=0;r>i;){if(t=+arguments[i++],xt(t,1114111)!==t)throw vM(t+" is not a valid code point");n[i]=t<65536?mM(t):mM(55296+((t-=65536)>>10),t%1024+56320)}return yM(n,"")}});var IM=String.fromCharCode,TM=function(e){var t=0|e.charCodeAt(0);if(55296<=t)if(t<56320){var n=0|e.charCodeAt(1);if(56320<=n&&n<=57343){if((t=(t<<10)+n-56613888|0)>65535)return IM(240|t>>>18,128|t>>>12&63,128|t>>>6&63,128|63&t)}else t=65533}else t<=57343&&(t=65533);return t<=2047?IM(192|t>>>6,128|63&t):IM(224|t>>>12,128|t>>>6&63,128|63&t)},CM=function(e){for(var t=void 0===e?"":(""+e).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,TM),n=0|t.length,r=new Uint8Array(n),i=0;i<n;i=i+1|0)r[i]=0|t.charCodeAt(i);return r},SM=function(e){for(var t=new Uint8Array(e),n="",r=0,i=t.length;r<i;){var o=t[r],a=0,s=0;if(o<=127?(a=0,s=255&o):o<=223?(a=1,s=31&o):o<=239?(a=2,s=15&o):o<=244&&(a=3,s=7&o),i-r-a>0)for(var c=0;c<a;)s=s<<6|63&(o=t[r+c+1]),c+=1;else s=65533,a=i-r;n+=String.fromCodePoint(s),r+=a+1}return n},EM=function(){function e(t){i(this,e),this._handler=t;var n=t.getURL();if(this._socket=null,this._workerSocket=null,this._id=ud(),this._handler.getIsWorkerEnabled()){var r=URL.createObjectURL(new Blob([';let _socket = null;onmessage = function(event) {  if (event.data.cmd === "start") {    const url = event.data.url;    _socket = new WebSocket(url);    _socket.binaryType = "arraybuffer";    _socket.onopen = function() {      postMessage({ callback: "onOpen" });    };    _socket.onclose = function(e) {      postMessage({ callback: "onOpen", e: { code: e.code, reason: e.reason } });    };    _socket.onmessage = function(e) {      postMessage({ callback: "onMessage", data: e.data });    };    _socket.onerror = function(e) {      postMessage({ callback: "onError", e: { isTrusted: "true" } });    };  } else if (event.data.cmd === "sendMessage") {    if (_socket !== null) {      _socket.send(event.data.data);    }  } else if (event.data.cmd === "stop") {    if (_socket !== null) {      _socket.close(event.data.code);      _socket = null;    }  }};'],{type:"application/javascript; charset=utf-8"}));this._workerSocket=new Worker(r);var o=this;this._workerSocket.onmessage=function(e){var t=e.data,n=t.callback,r=t.e;"onOpen"===n?o._onOpen():"onClose"===n?o._onClose(r):"onError"===n?o._onError(r):"onMessage"===n&&o._onMessage(e.data)},this._workerSocket.postMessage({cmd:"start",id:this._id,url:n})}else Qu?$u?(tl.connectSocket({url:n,header:{"content-type":"application/json"}}),tl.onSocketClose(this._onClose.bind(this)),tl.onSocketOpen(this._onOpen.bind(this)),tl.onSocketMessage(this._onMessage.bind(this)),tl.onSocketError(this._onError.bind(this))):(this._socket=tl.connectSocket({url:n,header:{"content-type":"application/json"},complete:function(){}}),this._socket.onClose(this._onClose.bind(this)),this._socket.onOpen(this._onOpen.bind(this)),this._socket.onMessage(this._onMessage.bind(this)),this._socket.onError(this._onError.bind(this))):el&&(this._socket=new WebSocket(n),this._socket.binaryType="arraybuffer",this._socket.onopen=this._onOpen.bind(this),this._socket.onmessage=this._onMessage.bind(this),this._socket.onclose=this._onClose.bind(this),this._socket.onerror=this._onError.bind(this));this._canIUseBinaryFrame=t.canIUseBinaryFrame()}return a(e,[{key:"getID",value:function(){return this._id}},{key:"_onOpen",value:function(){this._handler.onOpen({id:this._id})}},{key:"_onClose",value:function(e){this._handler.onClose({id:this._id,e:e})}},{key:"_onMessage",value:function(e){this._handler.onMessage({data:this._canIUseBinaryFrame?SM(e.data):e.data})}},{key:"_onError",value:function(e){this._handler.onError({id:this._id,e:e})}},{key:"setIsWorkerEnabled",value:function(e){this._isWorkerEnabled=!0}},{key:"close",value:function(e){if(this._workerSocket&&(this._workerSocket.postMessage({cmd:"stop",code:e}),this._workerSocket.terminate(),this._workerSocket=null),$u)return tl.offSocketClose(),tl.offSocketMessage(),tl.offSocketOpen(),tl.offSocketError(),void tl.closeSocket();this._socket&&(Qu?(this._socket.onClose((function(){})),this._socket.onOpen((function(){})),this._socket.onMessage((function(){})),this._socket.onError((function(){}))):el&&(this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null),Ju?this._socket.close({code:e}):this._socket.close(e),this._socket=null)}},{key:"send",value:function(e){if(this._workerSocket)this._workerSocket.postMessage({cmd:"sendMessage",data:this._canIUseBinaryFrame?CM(e.data).buffer:e.data});else{if($u)return void tl.sendSocketMessage({data:e.data,fail:function(){e.fail&&e.requestID&&e.fail(e.requestID)}});this._socket&&(Qu?this._socket.send({data:this._canIUseBinaryFrame?CM(e.data).buffer:e.data,fail:function(){e.fail&&e.requestID&&e.fail(e.requestID)}}):el&&this._socket.send(this._canIUseBinaryFrame?CM(e.data).buffer:e.data))}}}]),e}(),MM=4e3,kM=4001,wM=["keyMap"],OM=["keyMap"],DM="connected",AM="connecting",RM="disconnected",xM=function(){function e(t){i(this,e),this._channelModule=t,this._n="SocketHandler",this._promiseMap=new Map,this._readyState=RM,this._simpleRequestMap=new Map,this.MAX_SIZE=100,this._startSequence=ud(),this._startTs=0,this._reConnectFlag=!1,this._nextPingTs=0,this._reConnectCount=0,this.MAX_RECONNECT_COUNT=3,this._socketID=-1,this._random=0,this._socket=null,this._url="",this._onOpenTs=0,this._canIUseBinaryFrame=!0,this._isWorkerEnabled=!0,this._setWebsocketHost(),this._initConnection()}return a(e,[{key:"_setWebsocketHost",value:function(){var e=this._channelModule.getModule(Bf),t=Mu;this._channelModule.isOversea()&&(t=ku),e.isSingaporeSite()?t=wu:e.isKoreaSite()?t=Ou:e.isGermanySite()?t=Du:e.isIndiaSite()?t=Au:e.isJapanSite()?t=Ru:e.isUSASite()&&(t=xu),Lu.HOST.setCurrent(t)}},{key:"_initConnection",value:function(){Zl(Lu.HOST.CURRENT.BACKUP)||""===this._url?this._url=Lu.HOST.CURRENT.DEFAULT:this._url===Lu.HOST.CURRENT.DEFAULT?this._url=Lu.HOST.CURRENT.BACKUP:this._url===Lu.HOST.CURRENT.BACKUP&&(this._url=Lu.HOST.CURRENT.DEFAULT);var e=this._channelModule.getModule(Bf).getProxyServer();Bd(e)||(this._url=e),this._connect(),this._nextPingTs=0}},{key:"onCheckTimer",value:function(e){e%1==0&&this._checkPromiseMap()}},{key:"_checkPromiseMap",value:function(){var e=this;0!==this._promiseMap.size&&this._promiseMap.forEach((function(t,n){var r=t.reject,i=t.timestamp,o=15e3;-1!==n.indexOf(lh)&&(o=9e4),Date.now()-i>=o&&(Ll.l("".concat(e._n,"._checkPromiseMap request timeout, delete requestID:").concat(n)),e._promiseMap.delete(n),r(new dI({code:Sm})),e._channelModule.onRequestTimeout(n))}))}},{key:"onOpen",value:function(e){if(""!==this._readyState){this._onOpenTs=Date.now();var t=e.id;this._socketID=t;var n=Date.now()-this._startTs;Ll.l("".concat(this._n,"._onOpen cost ").concat(n," ms. socketID:").concat(t)),new a_("wsOnOpen").setMessage(n).setCostTime(n).setMoreMessage("socketID:".concat(t)).end(),e.id===this._socketID&&(this._readyState=DM,this._reConnectCount=0,this._resend(),!0===this._reConnectFlag&&(this._channelModule.onReconnected(),this._reConnectFlag=!1),this._channelModule.onOpen())}}},{key:"onClose",value:function(e){var t=new a_("wsOnClose"),n=e.id,r=e.e,i="sourceSocketID:".concat(n," currentSocketID:").concat(this._socketID," code:").concat(r.code," reason:").concat(r.reason),o=0;0!==this._onOpenTs&&(o=Date.now()-this._onOpenTs),t.setMessage(o).setCostTime(o).setMoreMessage(i).setCode(r.code).end(),Ll.l("".concat(this._n,"._onClose ").concat(i," onlineTime:").concat(o)),n===this._socketID&&(this._readyState=RM,o<1e3?this._channelModule.onReconnectFailed():this._channelModule.onClose())}},{key:"onError",value:function(e){var t=e.id,n=e.e,r="sourceSocketID:".concat(t," currentSocketID:").concat(this._socketID);new a_("wsOnError").setMessage(n.errMsg||sd(n)).setMoreMessage(r).setLevel("error").end(),Ll.w("".concat(this._n,"._onError"),n,r),t===this._socketID&&(this._readyState="",this._channelModule.onError())}},{key:"onMessage",value:function(e){var t;try{t=JSON.parse(e.data)}catch(Lk){new a_("jsonParseError").setMessage(e.data).end()}if(t&&t.head){var n=this._getRequestIDFromHead(t.head),r=t.body;if(!n.startsWith(Lu.NAME.TUIROOM_SVR)){var i=Ad(t.head);r=fC(t.body,this._getResponseKeyMap(i))}if(Ll.d("".concat(this._n,".onMessage ret:").concat(JSON.stringify(r)," requestID:").concat(n," has:").concat(this._promiseMap.has(n))),this._setNextPingTs(),this._promiseMap.has(n)){var o=this._promiseMap.get(n),a=o.resolve,s=o.reject,c=o.timestamp;return this._promiseMap.delete(n),this._calcRTT(c),void(r.errorCode&&0!==r.errorCode?(this._channelModule.onErrorCodeNotZero(r),s(new dI({code:r.errorCode,message:r.errorInfo||"",data:n.includes(Dh)||n.includes(yg)?{elements:r.elements,messageVersion:r.messageVersion,cloudCustomData:r.cloudCustomData}:void 0}))):a(lI(r)))}this._channelModule.onMessage({head:t.head,body:r})}}},{key:"_calcRTT",value:function(e){var t=Date.now()-e;this._channelModule.getModule(nh).addRTT(t)}},{key:"_connect",value:function(){this._startTs=Date.now(),this._onOpenTs=0,this._socket=new EM(this),this._socketID=this._socket.getID(),this._readyState=AM,Ll.l("".concat(this._n,"._connect isWorkerEnabled:").concat(this.getIsWorkerEnabled()," socketID:").concat(this._socketID," url:").concat(this.getURL())),new a_("wsConnect").setMessage("socketID:".concat(this._socketID," url:").concat(this.getURL())).end()}},{key:"getURL",value:function(){this._channelModule.isDevMode()&&(this._canIUseBinaryFrame=!1);var e=kd();($u||Ku&&"windows"===e||Xu)&&(this._canIUseBinaryFrame=!1);var t=-1;"ios"===e?t=ul||-1:"android"===e&&(t=dl||-1);var n=this._channelModule.getModule(Bf),r=this._channelModule.getPlatform(),i=n.getSDKAppID(),o=n.getInstanceID(),a="sdkappid=".concat(i,"&instanceid=").concat(o,"&random=").concat(this._getRandom(),"&platform=").concat(r,"&host=").concat(e,"&version=").concat(t);return this._canIUseBinaryFrame?"".concat(this._url,"/binfo?").concat(a):"".concat(this._url,"/info?").concat(a)}},{key:"_closeConnection",value:function(e){Ll.l("".concat(this._n,"._closeConnection socketID:").concat(this._socketID)),this._socket&&(this._socket.close(e),this._socketID=-1,this._socket=null,this._readyState=RM)}},{key:"_resend",value:function(){var e=this;if(Ll.l("".concat(this._n,"._resend reConnectFlag:").concat(this._reConnectFlag),"promiseMap.size:".concat(this._promiseMap.size," simpleRequestMap.size:").concat(this._simpleRequestMap.size)),this._promiseMap.size>0&&this._promiseMap.forEach((function(t,n){var r=t.uplinkData,i=t.resolve,o=t.reject;e._promiseMap.set(n,{resolve:i,reject:o,timestamp:Date.now(),uplinkData:r}),e._execute(n,r)})),this._simpleRequestMap.size>0){var t,n=E(this._simpleRequestMap);try{for(n.s();!(t=n.n()).done;){var r=_(t.value,2),i=r[0],o=r[1];this._execute(i,o)}}catch(s){n.e(s)}finally{n.f()}this._simpleRequestMap.clear()}}},{key:"send",value:function(e){var t=this;e.head.seq=this._getSequence(),e.head.reqtime=Math.floor(Date.now()/1e3),e.keyMap;var n=h(e,wM),r=this._getRequestIDFromHead(e.head),i=JSON.stringify(n);return new Promise((function(e,o){t._promiseMap.set(r,{resolve:e,reject:o,timestamp:Date.now(),uplinkData:i}),Ll.d("".concat(t._n,".send uplinkData:").concat(JSON.stringify(n)," requestID:").concat(r," readyState:").concat(t._readyState)),t._readyState!==DM?t._reConnect():(t._execute(r,i),t._channelModule.getModule(nh).addRequestCount())}))}},{key:"simplySend",value:function(e){e.head.seq=this._getSequence(),e.head.reqtime=Math.floor(Date.now()/1e3),e.keyMap;var t=h(e,OM),n=this._getRequestIDFromHead(e.head),r=JSON.stringify(t);this._readyState!==DM?(this._simpleRequestMap.size<this.MAX_SIZE?this._simpleRequestMap.set(n,r):Ll.l("".concat(this._n,".simplySend. simpleRequestMap is full, drop request!")),this._reConnect()):this._execute(n,r)}},{key:"_execute",value:function(e,t){this._socket.send({data:t,fail:Qu?this._onSendFail.bind(this):void 0,requestID:e})}},{key:"_onSendFail",value:function(e){Ll.l("".concat(this._n,"._onSendFail requestID:").concat(e))}},{key:"_getSequence",value:function(){var e;if(this._startSequence<2415919103)return e=this._startSequence,this._startSequence+=1,2415919103===this._startSequence&&(this._startSequence=ud()),e}},{key:"_getRequestIDFromHead",value:function(e){return e.servcmd+e.seq}},{key:"_getResponseKeyMap",value:function(e){var t=this._channelModule.getKeyMap(e);return n(n({},sC.response),t.response)}},{key:"_reConnect",value:function(){this._readyState!==DM&&this._readyState!==AM&&this.forcedReconnect()}},{key:"forcedReconnect",value:function(){var e=this,t="".concat(this._n,".forcedReconnect");Ll.l("".concat(t," count:").concat(this._reConnectCount," readyState:").concat(this._readyState)),this._reConnectFlag=!0,this._resetRandom(),this._reConnectCount<this.MAX_RECONNECT_COUNT?(this._reConnectCount+=1,this._closeConnection(kM),this._initConnection()):(this._reConnectCount=0,this._channelModule.probeNetwork().then((function(n){var r=_(n,2),i=r[0];r[1],i?(Ll.w("".concat(t," disconnected from wsserver but network is ok, continue...")),e._closeConnection(kM),e._initConnection()):e._channelModule.onReconnectFailed()})))}},{key:"getReconnectFlag",value:function(){return this._reConnectFlag}},{key:"_setNextPingTs",value:function(){this._nextPingTs=Date.now()+1e4}},{key:"getNextPingTs",value:function(){return this._nextPingTs}},{key:"isConnected",value:function(){return this._readyState===DM}},{key:"canIUseBinaryFrame",value:function(){return this._canIUseBinaryFrame}},{key:"setIsWorkerEnabled",value:function(e){Ll.l("".concat(this._n,".setIsWorkerEnabled flag:").concat(e)),this._isWorkerEnabled=e}},{key:"getIsWorkerEnabled",value:function(){return this._isWorkerEnabled&&yl}},{key:"_getRandom",value:function(){return 0===this._random&&(this._random=Math.random()),this._random}},{key:"_resetRandom",value:function(){this._random=0}},{key:"close",value:function(){Ll.l("".concat(this._n,".close")),this._closeConnection(MM),this._promiseMap.clear(),this._startSequence=ud(),this._readyState=RM,this._simpleRequestMap.clear(),this._reConnectFlag=!1,this._reConnectCount=0,this._onOpenTs=0,this._url="",this._random=0,this._canIUseBinaryFrame=!0,this._isWorkerEnabled=!0}}]),e}(),LM=function(e){c(n,e);var t=m(n);function n(e){var r;if(i(this,n),(r=t.call(this,e))._n="ChannelModule",r._socketHandler=new xM(g(r)),r._probing=!1,r._isAppShowing=!0,r._previousState=bi.NET_STATE_CONNECTED,Qu&&"function"==typeof tl.onAppShow&&"function"==typeof tl.onAppHide){var o=r._onAppHide.bind(g(r)),a=r._onAppShow.bind(g(r));"function"==typeof tl.offAppHide&&tl.offAppHide(o),"function"==typeof tl.offAppShow&&tl.offAppShow(a),tl.onAppHide(o),tl.onAppShow(a)}return r._timerForNotLoggedIn=-1,r._timerForNotLoggedIn=setInterval(r.onCheckTimer.bind(g(r)),1e3),r._fatalErrorFlag=!1,r}return a(n,[{key:"onCheckTimer",value:function(e){this._socketHandler&&(this.isLoggedIn()?(this._timerForNotLoggedIn>0&&(clearInterval(this._timerForNotLoggedIn),this._timerForNotLoggedIn=-1),this._socketHandler.onCheckTimer(e)):this._socketHandler.onCheckTimer(1),this._checkNextPing())}},{key:"onErrorCodeNotZero",value:function(e){this.getModule($f).onErrorCodeNotZero(e)}},{key:"onMessage",value:function(e){this.getModule($f).onMessage(e)}},{key:"send",value:function(e){return this._socketHandler?this._previousState!==bi.NET_STATE_CONNECTED&&e.head.servcmd.includes(Fg)?(this.reConnect(),this._sendLogViaHTTP(e)):this._socketHandler.send(e):Promise.reject()}},{key:"_sendLogViaHTTP",value:function(e){var t=Lu.HOST.CURRENT.STAT;return new Promise((function(n,r){var i="".concat(t,"/v4/imopenstat/tim_web_report_v2?sdkappid=").concat(e.head.sdkappid,"&reqtime=").concat(Date.now()),o=JSON.stringify(e.body),a="application/x-www-form-urlencoded;charset=UTF-8";if(Qu)tl.request({url:i,data:o,method:"POST",timeout:3e3,header:{"content-type":a},success:function(){n()},fail:function(){r(new dI({code:Cm}))}});else{var s=new XMLHttpRequest,c=setTimeout((function(){s.abort(),r(new dI({code:Sm}))}),3e3);s.onreadystatechange=function(){4===s.readyState&&(clearTimeout(c),200===s.status||304===s.status?n():r(new dI({code:Cm})))},s.open("POST",i,!0),s.setRequestHeader("Content-type",a),s.send(o)}}))}},{key:"simplySend",value:function(e){return this._socketHandler?this._socketHandler.simplySend(e):Promise.reject()}},{key:"onOpen",value:function(){this._ping()}},{key:"onClose",value:function(){this._socketHandler&&this._socketHandler.getReconnectFlag()&&this._emitNetStateChangeEvent(bi.NET_STATE_DISCONNECTED),this.reConnect()}},{key:"onError",value:function(){Qu&&!Xu&&this.outputWarning("DomainNameInMP"),this._emitNetStateChangeEvent(bi.NET_STATE_DISCONNECTED)}},{key:"getKeyMap",value:function(e){return this.getModule($f).getKeyMap(e)}},{key:"_onAppHide",value:function(){this._isAppShowing=!1}},{key:"_onAppShow",value:function(){this._isAppShowing=!0}},{key:"onRequestTimeout",value:function(e){}},{key:"onReconnected",value:function(){Ll.l("".concat(this._n,".onReconnected")),this._m.restartTimer(),this.getModule($f).onReconnected(),this._emitNetStateChangeEvent(bi.NET_STATE_CONNECTED)}},{key:"onReconnectFailed",value:function(){Ll.l("".concat(this._n,".onReconnectFailed")),this._emitNetStateChangeEvent(bi.NET_STATE_DISCONNECTED)}},{key:"setIsWorkerEnabled",value:function(e){this._socketHandler&&this._socketHandler.setIsWorkerEnabled(!1)}},{key:"offline",value:function(){this._emitNetStateChangeEvent(bi.NET_STATE_DISCONNECTED)}},{key:"reConnect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!1;this._socketHandler&&(t=this._socketHandler.getReconnectFlag());var n="forcedFlag:".concat(e," fatalErrorFlag:").concat(this._fatalErrorFlag," previousState:").concat(this._previousState," reconnectFlag:").concat(t);if(Ll.l("".concat(this._n,".reConnect ").concat(n)),!this._fatalErrorFlag&&this._socketHandler){if(!0===e)this._socketHandler.forcedReconnect();else{if(this._previousState===bi.NET_STATE_CONNECTING&&t)return;this._socketHandler.forcedReconnect()}this._emitNetStateChangeEvent(bi.NET_STATE_CONNECTING)}}},{key:"_emitNetStateChangeEvent",value:function(e){this._previousState!==e&&(Ll.l("".concat(this._n,"._emitNetStateChangeEvent from ").concat(this._previousState," to ").concat(e)),this._previousState=e,this.emitOuterEvent(yi.NET_STATE_CHANGE,{state:e}))}},{key:"_ping",value:function(){var e=this;if(!0!==this._probing){this._probing=!0;var t=this.getModule($f).getProtocolData({protocolName:Bg});this.send(t).then((function(){e._probing=!1})).catch((function(t){if(Ll.w("".concat(e._n,"._ping failed. error:"),t),e._probing=!1,t&&60002===t.code)return new a_("error").setMessage("code:".concat(t.code," message:").concat(t.message)).setNetworkType(e.getModule(zf).getNetworkType()).end(),e._fatalErrorFlag=!0,void e._emitNetStateChangeEvent(bi.NET_STATE_DISCONNECTED);e.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];Ll.l("".concat(e._n,"._ping failed. probe network, isAppShowing:").concat(e._isAppShowing," online:").concat(r," networkType:").concat(i)),r?e.reConnect():e._emitNetStateChangeEvent(bi.NET_STATE_DISCONNECTED)}))}))}}},{key:"_checkNextPing",value:function(){this._socketHandler&&this._socketHandler.isConnected()&&Date.now()>=this._socketHandler.getNextPingTs()&&this._ping()}},{key:"dealloc",value:function(){this._socketHandler&&(this._socketHandler.close(),this._socketHandler=null),this._timerForNotLoggedIn>-1&&clearInterval(this._timerForNotLoggedIn)}},{key:"onRestApiKickedOut",value:function(){this._socketHandler&&(this._socketHandler.close(),this.reConnect(!0))}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset")),this._previousState=bi.NET_STATE_CONNECTED,this._probing=!1,this._fatalErrorFlag=!1,this._timerForNotLoggedIn=setInterval(this.onCheckTimer.bind(this),1e3)}}]),n}(uh),NM=["a2","tinyid"],PM=["a2","tinyid"],jM=function(){function e(t){i(this,e),this._n="ProtocolHandler",this._sessionModule=t,this._configMap=new Map,this._fillConfigMap()}return a(e,[{key:"_fillConfigMap",value:function(){this._configMap.clear();var e=this._sessionModule.genCommonHead(),t=this._sessionModule.genCosSpecifiedHead(),r=this._sessionModule.genSSOReportHead(),i=this._sessionModule.isIntl();this._configMap.set(lh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.IM_OPEN_STATUS,".").concat(Lu.CMD.LOGIN)}),body:{state:"Online",isWebUniapp:0,deviceBrand:0},keyMap:{request:{deviceBrand:"InstType"},response:{InstId:"instanceID",HelloInterval:"helloInterval"}}}}(e)),this._configMap.set(dh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.IM_OPEN_STATUS,".").concat(Lu.CMD.LOGOUT)}),body:{type:0},keyMap:{request:{type:"wslogout_type"}}}}(e)),this._configMap.set(ph,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.IM_OPEN_STATUS,".").concat(Lu.CMD.HELLO)}),body:{isWebUniapp:0},keyMap:{response:{NewInstInfo:"newInstanceInfo"}}}}(e)),this._configMap.set(fh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.STAT_SERVICE,".").concat(Lu.CMD.KICK_OTHER)}),body:{}}}(e)),this._configMap.set(Ug,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.IM_COS_SIGN,".").concat(Lu.CMD.COS_SIGN)}),body:{cmd:"open_im_cos_svc",subCmd:"get_cos_token",duration:300,version:2},keyMap:{request:{userSig:"usersig",subCmd:"sub_cmd",cmd:"cmd",duration:"duration",version:"version"},response:{expired_time:"expiredTime",bucket_name:"bucketName",session_token:"sessionToken",tmp_secret_id:"secretId",tmp_secret_key:"secretKey"}}}}(t)),this._configMap.set(Gg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.CUSTOM_UPLOAD,".").concat(Lu.CMD.COS_PRE_SIG)}),body:{fileType:void 0,fileName:void 0,uploadMethod:0,duration:900},keyMap:{request:{userSig:"usersig",fileType:"file_type",fileName:"file_name",uploadMethod:"upload_method"},response:{expired_time:"expiredTime",request_id:"requestId",head_url:"headUrl",upload_url:"uploadUrl",download_url:"downloadUrl",ci_url:"ciUrl",snapshot_url:"requestSnapshotUrl"}}}}(t)),this._configMap.set(Vg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.CUSTOM_UPLOAD,".").concat(Lu.CMD.VIDEO_COVER)}),body:{version:1,platform:void 0,coverName:void 0,requestSnapshotUrl:void 0},keyMap:{request:{version:"version",platform:"platform",coverName:"cover_name",requestSnapshotUrl:"snapshot_url"},response:{error_code:"errorCode",error_msg:"errorInfo",download_url:"snapshotUrl"}}}}(t)),this._configMap.set(Xg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.IM_CONFIG_MANAGER,".").concat(Lu.CMD.FETCH_COMMERCIAL_CONFIG)}),body:{SDKAppID:0},keyMap:{request:{SDKAppID:"uint32_sdkappid"},response:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_purchase_bits:"purchaseBits",uint32_expired_time:"expiredTime"}}}}(e)),this._configMap.set(Zg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.IM_CONFIG_MANAGER,".").concat(Lu.CMD.PUSHED_COMMERCIAL_CONFIG)}),body:{},keyMap:{response:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_purchase_bits:"purchaseBits",uint32_expired_time:"expiredTime"}}}}(e)),this._configMap.set(Jg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.IM_CONFIG_MANAGER,".").concat(Lu.CMD.FETCH_CLOUD_CONTROL_CONFIG)}),body:{SDKAppID:0,version:0},keyMap:{request:{SDKAppID:"uint32_sdkappid",version:"uint64_version"},response:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_json_config:"cloudControlConfig",uint32_expired_time:"expiredTime",uint32_sdkappid:"SDKAppID",uint64_version:"version"}}}}(e)),this._configMap.set($g,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.IM_CONFIG_MANAGER,".").concat(Lu.CMD.PUSHED_CLOUD_CONTROL_CONFIG)}),body:{},keyMap:{response:{int32_error_code:"errorCode",str_error_message:"errorMessage",str_json_config:"cloudControlConfig",uint32_expired_time:"expiredTime",uint32_sdkappid:"SDKAppID",uint64_version:"version"}}}}(e)),this._configMap.set(Qg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.OVERLOAD_PUSH,".").concat(Lu.CMD.OVERLOAD_NOTIFY)}),body:{},keyMap:{response:{OverLoadServCmd:"overloadCommand",DelaySecs:"waitingTime"}}}}(e)),this._configMap.set(hh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.OPEN_IM,".").concat(Lu.CMD.GET_MESSAGES)}),body:{cookie:"",syncFlag:0,needAbstract:1,isOnlineSync:0,needSignaling:1},keyMap:{request:{fromAccount:"From_Account",toAccount:"To_Account",from:"From_Account",to:"To_Account",time:"MsgTimeStamp",sequence:"MsgSeq",random:"MsgRandom",elements:"MsgBody"},response:{MsgList:"messageList",SyncFlag:"syncFlag",To_Account:"to",From_Account:"from",ClientSeq:"clientSequence",MsgSeq:"sequence",NoticeSeq:"noticeSequence",NotifySeq:"notifySequence",MsgRandom:"random",MsgTimeStamp:"time",MsgContent:"content",ToGroupId:"to",MsgKey:"messageKey",GroupTips:"groupTips",MsgBody:"elements",MsgType:"type",C2CRemainingUnreadCount:"C2CRemainingUnreadList",C2CPairUnreadCount:"C2CPairUnreadList"}}}}(e)),i||(this._configMap.set(gh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.OPEN_IM,".").concat(Lu.CMD.BIG_DATA_HALLWAY_AUTH_KEY)}),body:{}}}(e)),this._configMap.set(dv,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.IM_MSG_AUDIT_MGR,".").concat(Lu.CMD.GET_RPOFANITY_LIST)}),body:{version:0,deviceID:"",startIndex:void 0},keyMap:{request:{version:"uint64_version",deviceID:"str_device_id",startIndex:"uint64_start_index"},response:{msg_cmd_error_code:"errorInfo",str_err_msg:"errorMessage",uint32_code:"errorCode",msg_scene_ctl_config:"filterConfig",uint64_c2c_custom_msg_flag:"c2c_custom_message",uint64_c2c_text_msg_flag:"c2c_text_message",uint64_group_custom_msg_flag:"group_custom_message",uint64_group_text_msg_flag:"group_text_message",uint64_group_info_flag:"group_profile",uint64_group_member_info_flag:"group_member_profile",uint64_relation_chain_flag:"sns",uint64_user_info_flag:"user_profile",rpt_msg_dirty_word:"lexicon",str_dirty_word:"profanity",str_replaced_content:"replacement",uint64_filter_type:"filterType",uint64_id:"id",uint64_word_type:"profanityType",uint64_complete_flag:"completeFlag",uint64_next_start_index:"nextStartIndex",uint64_version:"version",uint64_expired_time:"expiredTime"}}}}(e))),this._configMap.set(vh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.OPEN_IM,".").concat(Lu.CMD.SEND_MESSAGE)}),body:{fromAccount:"",toAccount:"",msgSeq:0,msgRandom:0,msgBody:[],cloudCustomData:void 0,nick:"",avatar:"",msgLifeTime:void 0,offlinePushInfo:{pushFlag:0,title:"",desc:"",ext:"",apnsInfo:{badgeMode:0,isVoipPush:void 0},androidInfo:{OPPOChannelID:""}},messageControlInfo:void 0,clientTime:void 0,needReadReceipt:0,isSupportExtension:0},keyMap:{request:{fromAccount:"From_Account",toAccount:"To_Account",msgTimeStamp:"MsgTimeStamp",msgSeq:"MsgSeq",msgRandom:"MsgRandom",msgBody:"MsgBody",count:"MaxCnt",lastMessageTime:"LastMsgTime",messageKey:"MsgKey",peerAccount:"Peer_Account",data:"Data",description:"Desc",extension:"Ext",type:"MsgType",content:"MsgContent",sizeType:"Type",uuid:"UUID",url:"",imageUrl:"URL",fileUrl:"Url",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",videoUrl:"",downloadFlag:"Download_Flag",nick:"From_AccountNick",avatar:"From_AccountHeadurl",from:"From_Account",time:"MsgTimeStamp",messageRandom:"MsgRandom",messageSequence:"MsgSeq",elements:"MsgBody",clientSequence:"ClientSeq",payload:"MsgContent",messageList:"MsgList",messageNumber:"MsgNum",abstractList:"AbstractList",messageBody:"MsgBody",needReadReceipt:"IsNeedReadReceipt"}}}}(e)),this._configMap.set(mh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.SEND_GROUP_MESSAGE)}),body:{fromAccount:"",groupID:"",random:0,clientSequence:0,priority:"",msgBody:[],cloudCustomData:void 0,onlineOnlyFlag:0,offlinePushInfo:{pushFlag:0,title:"",desc:"",ext:"",apnsInfo:{badgeMode:0,isVoipPush:void 0},androidInfo:{OPPOChannelID:""}},groupAtInfo:[],messageControlInfo:void 0,clientTime:void 0,needReadReceipt:0,topicID:void 0,receiverList:void 0,isSupportExtension:0},keyMap:{request:{to:"GroupId",extension:"Ext",data:"Data",description:"Desc",random:"Random",sequence:"ReqMsgSeq",count:"ReqMsgNumber",type:"MsgType",priority:"MsgPriority",content:"MsgContent",elements:"MsgBody",sizeType:"Type",uuid:"UUID",url:"",imageUrl:"URL",fileUrl:"Url",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",videoUrl:"",downloadFlag:"Download_Flag",clientSequence:"ClientSeq",from:"From_Account",time:"MsgTimeStamp",messageRandom:"MsgRandom",messageSequence:"MsgSeq",payload:"MsgContent",messageList:"MsgList",messageNumber:"MsgNum",abstractList:"AbstractList",messageBody:"MsgBody",needReadReceipt:"NeedReadReceipt",receiverList:"To_Account"},response:{MsgTime:"time",MsgSeq:"sequence"}}}}(e)),this._configMap.set(Ch,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.OPEN_IM,".").concat(Lu.CMD.REVOKE_C2C_MESSAGE)}),body:{msgInfo:{fromAccount:"",toAccount:"",msgTimeStamp:0,msgSeq:0,msgRandom:0}},keyMap:{request:{msgInfo:"MsgInfo",msgTimeStamp:"MsgTimeStamp",msgSeq:"MsgSeq",msgRandom:"MsgRandom"}}}}(e)),this._configMap.set(og,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.REVOKE_GROUP_MESSAGE)}),body:{groupID:"",msgSeqList:void 0,topicID:""},keyMap:{request:{msgSeqList:"MsgSeqList",msgSeq:"MsgSeq"}}}}(e)),this._configMap.set(kh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.OPEN_IM,".").concat(Lu.CMD.GET_C2C_ROAM_MESSAGES)}),body:{peerAccount:"",count:15,lastMessageTime:0,messageKey:"",withRecalledMessage:1,direction:0},keyMap:{request:{messageKey:"MsgKey",peerAccount:"Peer_Account",count:"MaxCnt",lastMessageTime:"LastMsgTime",withRecalledMessage:"WithRecalledMsg",direction:"GetDirection"},response:{LastMsgTime:"lastMessageTime",IsNeedReadReceipt:"needReadReceipt",IsPeerRead:"readReceiptSentByPeer"}}}}(e)),this._configMap.set(Dh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.OPEN_IM,".").concat(Lu.CMD.MODIFY_C2C_MESSAGE)}),body:{from:"",to:"",sequence:0,random:0,time:0,version:0,elements:void 0,cloudCustomData:void 0},keyMap:{request:{sequence:"MsgSeq",random:"MsgRandom",time:"MsgTime",version:"MsgVersion",type:"MsgType",content:"MsgContent"}}}}(e)),this._configMap.set(cg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.GET_GROUP_ROAM_MESSAGES)}),body:{withRecalledMsg:1,groupID:"",count:15,sequence:"",topicID:void 0},keyMap:{request:{sequence:"ReqMsgSeq",count:"ReqMsgNumber",withRecalledMessage:"WithRecalledMsg"},response:{Random:"random",MsgTime:"time",MsgSeq:"sequence",ReqMsgSeq:"sequence",RspMsgList:"messageList",IsPlaceMsg:"isPlaceMessage",IsSystemMsg:"isSystemMessage",ToGroupId:"to",EnumFrom_AccountType:"fromAccountType",EnumTo_AccountType:"toAccountType",GroupCode:"groupCode",MsgPriority:"priority",MsgBody:"elements",MsgType:"type",MsgContent:"content",IsFinished:"complete",Download_Flag:"downloadFlag",ClientSeq:"clientSequence",ThumbUUID:"thumbUUID",VideoUUID:"videoUUID",ToTopicId:"topicID",InvisibleMsgSeq:"invisibleSequenceList"}}}}(e)),this._configMap.set(Sh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.OPEN_IM,".").concat(Lu.CMD.SET_C2C_MESSAGE_READ)}),body:{C2CMsgReaded:void 0},keyMap:{request:{lastMessageTime:"LastedMsgTime"}}}}(e)),this._configMap.set(Eh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.OPEN_IM,".").concat(Lu.CMD.SET_C2C_PEER_MUTE_NOTIFICATIONS)}),body:{userIDList:void 0,muteFlag:0},keyMap:{request:{userIDList:"Peer_Account",muteFlag:"Mute_Notifications"}}}}(e)),this._configMap.set(Mh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.OPEN_IM,".").concat(Lu.CMD.GET_C2C_PEER_MUTE_NOTIFICATIONS)}),body:{updateSequence:0},keyMap:{response:{MuteNotificationsList:"muteFlagList"}}}}(e)),this._configMap.set(ag,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.SET_GROUP_MESSAGE_READ)}),body:{groupID:void 0,messageReadSeq:void 0,topicID:void 0},keyMap:{request:{messageReadSeq:"MsgReadedSeq"}}}}(e)),this._configMap.set(sg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.OPEN_IM,".").concat(Lu.CMD.SET_ALL_MESSAGE_READ)}),body:{readAllC2CMessage:0,groupMessageReadInfoList:[]},keyMap:{request:{readAllC2CMessage:"C2CReadAllMsg",groupMessageReadInfoList:"GroupReadInfo",messageSequence:"MsgSeq"},response:{C2CReadAllMsg:"readAllC2CMessage",GroupReadInfoArray:"groupMessageReadInfoList"}}}}(e)),this._configMap.set(Oh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.OPEN_IM,".").concat(Lu.CMD.DELETE_C2C_MESSAGE)}),body:{fromAccount:"",to:"",keyList:void 0},keyMap:{request:{keyList:"MsgKeyList"}}}}(e)),this._configMap.set(_g,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.DELETE_GROUP_MESSAGE)}),body:{groupID:"",deleter:"",keyList:void 0,topicID:void 0},keyMap:{request:{deleter:"Deleter_Account",keyList:"Seqs"}}}}(e)),this._configMap.set(pv,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.IM_OPEN_TRANSLATE,".").concat(Lu.CMD.TRANSLATE_TEXT)}),body:{sourceTextList:void 0,SDKAppID:0,from:0,source:"",target:""},keyMap:{request:{sourceTextList:"SourceText",SDKAppID:"SdkAppId",from:"FromAccount"},response:{TargetText:"translatedTextList",RequestId:"requestID",CmdErrorCode:"error",ErrorCode:"code",ErrorInfo:"message"}}}}(e)),this._configMap.set(yg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.OPEN_IM,".").concat(Lu.CMD.MODIFY_GROUP_MESSAGE)}),body:{groupID:"",topicID:void 0,sequence:0,version:0,elements:void 0,cloudCustomData:void 0},keyMap:{request:{sequence:"MsgSeq",version:"MsgVersion",type:"MsgType",content:"MsgContent"}}}}(e)),this._configMap.set(ug,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.GET_READ_RECEIPT)}),body:{groupID:"",sequenceList:void 0},keyMap:{request:{sequence:"MsgSeq"}}}}(e)),this._configMap.set(dg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.OPEN_IM,".").concat(Lu.CMD.SEND_C2C_READ_RECEIPT)}),body:{peerAccount:"",messageInfoList:void 0},keyMap:{request:{peerAccount:"Peer_Account",messageInfoList:"C2CMsgInfo",fromAccount:"From_Account",toAccount:"To_Account",sequence:"MsgSeq",random:"MsgRandom",time:"MsgTime",clientTime:"MsgClientTime"}}}}(e)),this._configMap.set(lg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.SEND_READ_RECEIPT)}),body:{groupID:"",sequenceList:void 0},keyMap:{request:{sequenceList:"MsgSeqList",sequence:"MsgSeq"}}}}(e)),this._configMap.set(pg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.GET_READ_RECEIPT_DETAIL)}),body:{groupID:"",sequence:void 0,flag:0,cursor:0,count:0},keyMap:{request:{sequence:"MsgSeq",count:"Num"},response:{ReadList:"readUserIDList",Read_Account:"userID",UnreadList:"unreadUserIDList",Unread_Account:"userID",IsFinish:"isCompleted"}}}}(e)),this._configMap.set(Ah,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.OPEN_IM_MSG_EXT,".").concat(Lu.CMD.MODIFY_C2C_MESSAGE_EXTENSIONS)}),body:{from:void 0,to:void 0,messageKey:void 0,operateType:void 0,extensionList:void 0}}}(e)),this._configMap.set(Rh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.OPEN_IM_MSG_EXT,".").concat(Lu.CMD.GET_C2C_MESSAGE_EXTENSIONS)}),body:{from:void 0,to:void 0,messageKey:void 0,startSequence:void 0}}}(e)),this._configMap.set(Eg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.OPEN_IM_MSG_EXT,".").concat(Lu.CMD.MODIFY_GROUP_MESSAGE_EXTENSIONS)}),body:{groupID:void 0,messageSequence:void 0,operateType:void 0,extensionList:void 0}}}(e)),this._configMap.set(Mg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.OPEN_IM_MSG_EXT,".").concat(Lu.CMD.GET_GROUP_MESSAGE_EXTENSIONS)}),body:{groupID:void 0,messageSequence:void 0,startSequence:void 0}}}(e)),this._configMap.set(wh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.OPEN_IM,".").concat(Lu.CMD.GET_PEER_READ_TIME)}),body:{userIDList:void 0},keyMap:{request:{userIDList:"To_Account"},response:{ReadTime:"peerReadTimeList"}}}}(e)),this._configMap.set(Lh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.RECENT_CONTACT,".").concat(Lu.CMD.GET_CONVERSATION_LIST)}),body:{fromAccount:void 0,count:0},keyMap:{request:{},response:{SessionItem:"conversations",ToAccount:"groupID",To_Account:"userID",UnreadMsgCount:"unreadCount",MsgGroupReadedSeq:"messageReadSeq",C2cPeerReadTime:"c2cPeerReadTime"}}}}(e)),this._configMap.set(xh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.RECENT_CONTACT,".").concat(Lu.CMD.PAGING_GET_CONVERSATION_LIST)}),body:{fromAccount:void 0,timeStamp:void 0,startIndex:void 0,pinnedTimeStamp:void 0,pinnedStartIndex:void 0,orderType:void 0,messageAssistFlag:4,assistFlag:15},keyMap:{request:{messageAssistFlag:"MsgAssistFlags",assistFlag:"AssistFlags",pinnedTimeStamp:"TopTimeStamp",pinnedStartIndex:"TopStartIndex"},response:{SessionItem:"conversations",ToAccount:"groupID",To_Account:"userID",UnreadMsgCount:"unreadCount",MsgGroupReadedSeq:"messageReadSeq",C2cPeerReadTime:"c2cPeerReadTime",LastMsgFlags:"lastMessageFlag",TopFlags:"isPinned",TopTimeStamp:"pinnedTimeStamp",TopStartIndex:"pinnedStartIndex",GroupId:"convGroupID"}}}}(e)),this._configMap.set(Nh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.RECENT_CONTACT,".").concat(Lu.CMD.DELETE_CONVERSATION)}),body:{fromAccount:"",toAccount:void 0,type:1,toGroupID:void 0,clearHistoryMessage:1},keyMap:{request:{toGroupID:"ToGroupid",clearHistoryMessage:"ClearRamble"}}}}(e)),this._configMap.set(Ph,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.RECENT_CONTACT,".").concat(Lu.CMD.CLEAR_HISTORY_MESSAGE)}),body:{fromAccount:"",toAccount:void 0,type:1,toGroupID:void 0},keyMap:{request:{toGroupID:"ToGroupid"}}}}(e)),this._configMap.set(jh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.RECENT_CONTACT,".").concat(Lu.CMD.PIN_CONVERSATION)}),body:{fromAccount:"",operationType:1,itemList:void 0},keyMap:{request:{itemList:"RecentContactItem"}}}}(e)),this._configMap.set(Uh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.OPEN_IM,".").concat(Lu.CMD.DELETE_GROUP_AT_TIPS)}),body:{messageListToDelete:void 0},keyMap:{request:{messageListToDelete:"DelMsgList",messageSeq:"MsgSeq",messageRandom:"MsgRandom"}}}}(e)),this._configMap.set(Gh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.RECENT_CONTACT,".").concat(Lu.CMD.MARK_CONVERSATION)}),body:{fromAccount:"",itemList:void 0},keyMap:{request:{itemList:"MarkItem",operationType:"OptType",groupID:"ToGroupId"},response:{ToGroupId:"groupID",OptType:"operationType"}}}}(e)),this._configMap.set(Vh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.RECENT_CONTACT,".").concat(Lu.CMD.MARK_CONVERSATION)}),body:{fromAccount:"",itemList:void 0},keyMap:{request:{itemList:"MarkItem",operationType:"OptType",groupID:"ToGroupId"},response:{ToGroupId:"groupID",OptType:"operationType"}}}}(e)),this._configMap.set(Fh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.RECENT_CONTACT,".").concat(Lu.CMD.CREATE_CONVERSATION_GROUP)}),body:{fromAccount:"",itemList:void 0},keyMap:{request:{itemList:"GroupContactItem",groupID:"ToGroupId"},response:{GroupId:"convGroupID",ToGroupId:"groupID",OptType:"operationType"}}}}(e)),this._configMap.set(Bh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.RECENT_CONTACT,".").concat(Lu.CMD.DELETE_CONVERSATION_GROUP)}),body:{fromAccount:"",groupName:void 0},keyMap:{request:{},response:{GroupId:"convGroupID"}}}}(e)),this._configMap.set(qh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.RECENT_CONTACT,".").concat(Lu.CMD.UPDATE_CONVERSATION_GROUP)}),body:{fromAccount:"",updateType:void 0,updateGroup:void 0},keyMap:{request:{oldName:"OldGroupName",newName:"NewGroupName",groupID:"ToGroupId",operationType:"ContactOptType",groupName:"OldGroupName",updateItem:"ContactUpdateItem"},response:{ContactOptType:"operationType",ToGroupId:"groupID",GroupId:"convGroupID"}}}}(e)),this._configMap.set(Hh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.RECENT_CONTACT,".").concat(Lu.CMD.UPDATE_CONVERSATION_GROUP)}),body:{fromAccount:"",updateType:void 0,updateGroup:{groupName:void 0,updateGroupType:void 0,updateItem:void 0}},keyMap:{request:{},response:{}}}}(e)),this._configMap.set(zh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.RECENT_CONTACT,".").concat(Lu.CMD.UPDATE_CONVERSATION_GROUP)}),body:{fromAccount:"",updateType:void 0,updateGroup:void 0},keyMap:{request:{},response:{}}}}(e)),this._configMap.set(Kh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.RECENT_CONTACT,".").concat(Lu.CMD.GET_CONVERSATION_GROUP_LIST)}),body:{fromAccount:"",startTime:void 0,startIndex:void 0},keyMap:{request:{},response:{GroupId:"convGroupID",ToGroupId:"groupID",OptType:"operationType",CustomMark:"customData",ContactGroupId:"convGroupIDList"}}}}(e)),this._configMap.set(_h,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.PROFILE,".").concat(Lu.CMD.PORTRAIT_GET)}),body:{fromAccount:"",userItem:[]},keyMap:{request:{toAccount:"To_Account",standardSequence:"StandardSequence",customSequence:"CustomSequence"}}}}(e)),this._configMap.set(yh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.PROFILE,".").concat(Lu.CMD.PORTRAIT_SET)}),body:{fromAccount:"",profileItem:[{tag:Pl.NICK,value:""},{tag:Pl.GENDER,value:""},{tag:Pl.ALLOWTYPE,value:""},{tag:Pl.AVATAR,value:""}]},keyMap:{request:{toAccount:"To_Account",standardSequence:"StandardSequence",customSequence:"CustomSequence"}}}}(e)),this._configMap.set(bh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.FRIEND,".").concat(Lu.CMD.GET_BLACKLIST)}),body:{fromAccount:"",startIndex:0,maxLimited:30,lastSequence:0},keyMap:{response:{CurruentSequence:"currentSequence"}}}}(e)),this._configMap.set(Ih,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.FRIEND,".").concat(Lu.CMD.ADD_BLACKLIST)}),body:{fromAccount:"",toAccount:[]}}}(e)),this._configMap.set(Th,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.FRIEND,".").concat(Lu.CMD.DELETE_BLACKLIST)}),body:{fromAccount:"",toAccount:[]}}}(e)),this._configMap.set(iv,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.IM_OPEN_STATUS,".").concat(Lu.CMD.SET_SELF_STATUS)}),body:{customStatus:""},keyMap:{}}}(e)),this._configMap.set(ov,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.IM_OPEN_STATUS,".").concat(Lu.CMD.GET_USER_STATUS)}),body:{userIDList:void 0},keyMap:{response:{UserStatusList:"successUserList",ErrorList:"failureUserList",To_Account:"userID",Invalid_Account:"invalidUserID",Status:"statusType"}}}}(e)),this._configMap.set(av,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.IM_OPEN_STATUS,".").concat(Lu.CMD.SUBSCRIBE_USER_STATUS)}),body:{userIDList:void 0},keyMap:{response:{ErrorList:"failureUserList",To_Account:"userID",Invalid_Account:"invalidUserID"}}}}(e)),this._configMap.set(sv,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.IM_OPEN_STATUS,".").concat(Lu.CMD.UNSUBSCRIBE_USER_STATUS)}),body:{userIDList:void 0,unsubscribeAll:void 0},keyMap:{response:{ErrorList:"failureUserList",To_Account:"userID",Invalid_Account:"invalidUserID"}}}}(e)),this._configMap.set(Wh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.GET_JOINED_GROUPS)}),body:{memberAccount:"",limit:void 0,offset:void 0,groupType:void 0,responseFilter:{groupBaseInfoFilter:void 0,selfInfoFilter:void 0},isSupportTopic:0},keyMap:{request:{memberAccount:"Member_Account"},response:{GroupIdList:"groups",NoUnreadSeqList:"excludedUnreadSequenceList",MsgSeq:"readedSequence",LastRecallTime:"_lastRevokedTime"}}}}(e)),this._configMap.set(Yh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.GET_GROUP_INFO)}),body:{groupIDList:void 0,responseFilter:{groupBaseInfoFilter:["Type","Name","Introduction","Notification","FaceUrl","Owner_Account","CreateTime","InfoSeq","LastInfoTime","LastMsgTime","MemberNum","MaxMemberNum","ApplyJoinOption","NextMsgSeq","ShutUpAllMember"],groupCustomFieldFilter:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0}},keyMap:{request:{groupIDList:"GroupIdList",groupCustomField:"AppDefinedData",memberCustomField:"AppMemberDefinedData",groupCustomFieldFilter:"AppDefinedDataFilter_Group",memberCustomFieldFilter:"AppDefinedDataFilter_GroupMember"},response:{GroupIdList:"groups",AppDefinedData:"groupCustomField",AppMemberDefinedData:"memberCustomField",AppDefinedDataFilter_Group:"groupCustomFieldFilter",AppDefinedDataFilter_GroupMember:"memberCustomFieldFilter",InfoSeq:"infoSequence",MemberList:"members",GroupInfo:"groups",ShutUpUntil:"muteUntil",ShutUpAllMember:"muteAllMembers"}}}}(e)),this._configMap.set(Jh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.CREATE_GROUP)}),body:{type:void 0,name:void 0,groupID:void 0,ownerID:void 0,introduction:void 0,notification:void 0,maxMemberNum:void 0,joinOption:void 0,memberList:void 0,groupCustomField:void 0,memberCustomField:void 0,webPushFlag:1,avatar:"",isSupportTopic:void 0},keyMap:{request:{ownerID:"Owner_Account",userID:"Member_Account",avatar:"FaceUrl",maxMemberNum:"MaxMemberCount",joinOption:"ApplyJoinOption",groupCustomField:"AppDefinedData",memberCustomField:"AppMemberDefinedData"},response:{HugeGroupFlag:"avChatRoomFlag",OverJoinedGroupLimit_Account:"overLimitUserIDList"}}}}(e)),this._configMap.set($h,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.DESTROY_GROUP)}),body:{groupID:void 0}}}(e)),this._configMap.set(Xh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.MODIFY_GROUP_INFO)}),body:{groupID:void 0,name:void 0,introduction:void 0,notification:void 0,avatar:void 0,joinOption:void 0,groupCustomField:void 0,muteAllMembers:void 0},keyMap:{request:{groupCustomField:"AppDefinedData",muteAllMembers:"ShutUpAllMember",joinOption:"ApplyJoinOption",avatar:"FaceUrl"},response:{AppDefinedData:"groupCustomField",ShutUpAllMember:"muteAllMembers"}}}}(e)),this._configMap.set(Zh,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.APPLY_JOIN_GROUP)}),body:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0,webPushFlag:1,historyMessageFlag:void 0},keyMap:{request:{applyMessage:"ApplyMsg",historyMessageFlag:"HugeGroupHistoryMsgFlag"},response:{HugeGroupFlag:"avChatRoomFlag",AVChatRoomKey:"avChatRoomKey",RspMsgList:"messageList",ToGroupId:"to"}}}}(e)),this._configMap.set(Qh,function(e){return e.a2,e.tinyid,{head:n(n({},h(e,NM)),{},{servcmd:"".concat(Lu.NAME.BIG_GROUP_NO_AUTH,".").concat(Lu.CMD.APPLY_JOIN_GROUP)}),body:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0,webPushFlag:1},keyMap:{request:{applyMessage:"ApplyMsg"},response:{HugeGroupFlag:"avChatRoomFlag"}}}}(e)),this._configMap.set(eg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.QUIT_GROUP)}),body:{groupID:void 0}}}(e)),this._configMap.set(tg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.SEARCH_GROUP_BY_ID)}),body:{groupIDList:void 0,responseFilter:{groupBasePublicInfoFilter:["Type","Name","Introduction","Notification","FaceUrl","CreateTime","Owner_Account","LastInfoTime","LastMsgTime","NextMsgSeq","MemberNum","MaxMemberNum","ApplyJoinOption"]}},keyMap:{response:{}}}}(e)),this._configMap.set(ng,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.CHANGE_GROUP_OWNER)}),body:{groupID:void 0,newOwnerID:void 0},keyMap:{request:{newOwnerID:"NewOwner_Account"}}}}(e)),this._configMap.set(rg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.HANDLE_APPLY_JOIN_GROUP)}),body:{groupID:void 0,applicant:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMap:{request:{applicant:"Applicant_Account",handleAction:"HandleMsg",handleMessage:"ApprovalMsg",messageKey:"MsgKey"}}}}(e)),this._configMap.set(ig,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.HANDLE_GROUP_INVITATION)}),body:{groupID:void 0,inviter:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMap:{request:{inviter:"Inviter_Account",handleAction:"HandleMsg",handleMessage:"ApprovalMsg",messageKey:"MsgKey"}}}}(e)),this._configMap.set(fg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.GET_GROUP_APPLICATION)}),body:{startTime:void 0,limit:void 0,handleAccount:void 0},keyMap:{request:{handleAccount:"Handle_Account"}}}}(e)),this._configMap.set(hg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.OPEN_IM,".").concat(Lu.CMD.DELETE_GROUP_SYSTEM_MESSAGE)}),body:{messageListToDelete:void 0},keyMap:{request:{messageListToDelete:"DelMsgList",messageSeq:"MsgSeq",messageRandom:"MsgRandom"}}}}(e)),this._configMap.set(gg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.BIG_GROUP_LONG_POLLING,".").concat(Lu.CMD.AVCHATROOM_LONG_POLL)}),body:{USP:1,startSeq:1,startBroadcastSeq:void 0,holdTime:90,key:void 0},keyMap:{request:{USP:"USP"},response:{ToGroupId:"groupID",RspBroadcastMsgList:"broadcastMessageList",IsSystemMsg:"isSystemMessage"}}}}(e)),this._configMap.set(vg,function(e){return e.a2,e.tinyid,{head:n(n({},h(e,PM)),{},{servcmd:"".concat(Lu.NAME.BIG_GROUP_LONG_POLLING_NO_AUTH,".").concat(Lu.CMD.AVCHATROOM_LONG_POLL)}),body:{USP:1,startSeq:1,holdTime:90,key:void 0},keyMap:{request:{USP:"USP"},response:{ToGroupId:"groupID"}}}}(e)),this._configMap.set(mg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.GET_ONLINE_MEMBER_NUM)}),body:{groupID:void 0}}}(e)),this._configMap.set(bg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.SET_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]},keyMap:{request:{key:"key",value:"value"}}}}(e)),this._configMap.set(Ig,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.MODIFY_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]},keyMap:{request:{key:"key",value:"value"}}}}(e)),this._configMap.set(Tg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.DELETE_GROUP_ATTRIBUTES)}),body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]},keyMap:{request:{key:"key"}}}}(e)),this._configMap.set(Cg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.CLEAR_GROUP_ATTRIBUTES)}),body:{groupID:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:["RaceConflict"]}}}(e)),this._configMap.set(Sg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP_ATTR,".").concat(Lu.CMD.GET_GROUP_ATTRIBUTES)}),body:{groupID:void 0,avChatRoomKey:void 0,groupType:1},keyMap:{request:{avChatRoomKey:"Key",groupType:"GroupType"}}}}(e)),this._configMap.set(kg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.GET_GROUP_NOTIFY)}),body:{notifyType:1,groupID:"",beginTime:0,endTime:0,limit:20},keyMap:{request:{},response:{NextMsgTime:"nextRevokedTime",NotifyMsgList:"notifyList"}}}}(e)),this._configMap.set(wg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.UPDATE_GROUP_COUNTER)}),body:{groupID:void 0,counterList:void 0,avChatRoomKey:void 0,mode:void 0},keyMap:{request:{counterList:"GroupCounter"}}}}(e)),this._configMap.set(Og,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.GET_GROUP_COUNTER)}),body:{groupID:void 0,keyList:[],avChatRoomKey:void 0},keyMap:{request:{keyList:"GroupCounterKeys"}}}}(e)),this._configMap.set(ev,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP_COMMUNITY,".").concat(Lu.CMD.CREATE_TOPIC)}),body:{groupID:void 0,topicName:void 0,avatar:void 0,customData:void 0,topicID:void 0,notification:void 0,introduction:void 0},keyMap:{request:{avatar:"FaceUrl"}}}}(e)),this._configMap.set(tv,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP_COMMUNITY,".").concat(Lu.CMD.DELETE_TOPIC)}),body:{groupID:void 0,topicIDList:void 0},keyMap:{request:{topicIDList:"TopicIdList"},response:{DestroyResultItem:"resultList"}}}}(e)),this._configMap.set(nv,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP_COMMUNITY,".").concat(Lu.CMD.UPDATE_TOPIC_PROFILE)}),body:{groupID:void 0,topicID:void 0,avatar:void 0,customData:void 0,notification:void 0,introduction:void 0,muteAllMembers:void 0,topicName:void 0},keyMap:{request:{avatar:"FaceUrl",muteAllMembers:"ShutUpAllMember"}}}}(e)),this._configMap.set(rv,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP_COMMUNITY,".").concat(Lu.CMD.GET_TOPIC_LIST)}),body:{groupID:void 0,topicIDList:void 0,MemberInfoFilter:["NoUnreadSeqList"]},keyMap:{request:{topicIDList:"TopicIdList"},response:{TopicAndSelfInfo:"topicInfoList",TopicInfo:"topic",GroupID:"groupID",ShutUpTime:"muteTime",ShutUpAllFlag:"muteAllMembers",LastMsgTime:"lastMessageTime",MsgSeq:"readedSequence",LastMsgSeq:"sequence",NoUnreadSeqList:"excludedUnreadSequenceList"}}}}(e)),this._configMap.set(Dg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.GET_GROUP_MEMBER_LIST)}),body:{groupID:void 0,limit:0,offset:void 0,next:void 0,memberRoleFilter:void 0,memberInfoFilter:["Role","NameCard","ShutUpUntil","JoinTime"],memberCustomFieldFilter:void 0},keyMap:{request:{memberCustomFieldFilter:"AppDefinedDataFilter_GroupMember"},response:{AppMemberDefinedData:"memberCustomField",AppDefinedDataFilter_GroupMember:"memberCustomFieldFilter",MemberList:"members",ShutUpUntil:"muteUntil"}}}}(e)),this._configMap.set(Ag,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP_AVCHATROOM,".").concat(Lu.CMD.GET_AVCHATROOM_MEMBER_LIST)}),body:{groupID:void 0,offset:void 0,filter:void 0},keyMap:{request:{offset:"Timestamp",filter:"Mark"},response:{NextTimestamp:"offset"}}}}(e)),this._configMap.set(Rg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.GET_GROUP_MEMBER_INFO)}),body:{groupID:void 0,userIDList:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0},keyMap:{request:{userIDList:"Member_List_Account",memberCustomFieldFilter:"AppDefinedDataFilter_GroupMember"},response:{MemberList:"members",ShutUpUntil:"muteUntil",AppDefinedDataFilter_GroupMember:"memberCustomFieldFilter",AppMemberDefinedData:"memberCustomField"}}}}(e)),this._configMap.set(xg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.ADD_GROUP_MEMBER)}),body:{groupID:void 0,silence:void 0,userIDList:void 0},keyMap:{request:{userID:"Member_Account",userIDList:"MemberList"},response:{MemberList:"members"}}}}(e)),this._configMap.set(Lg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.DELETE_GROUP_MEMBER)}),body:{groupID:void 0,userIDList:void 0,reason:void 0},keyMap:{request:{userIDList:"MemberToDel_Account"}}}}(e)),this._configMap.set(Ng,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.BAN_AVCHATROOM_MEMBER)}),body:{groupID:void 0,userIDList:void 0,duration:void 0,reason:""},keyMap:{request:{userIDList:"Members_Account",duration:"Duration",reason:"Description"}}}}(e)),this._configMap.set(Pg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP,".").concat(Lu.CMD.MODIFY_GROUP_MEMBER_INFO)}),body:{groupID:void 0,topicID:void 0,userID:void 0,messageRemindType:void 0,nameCard:void 0,role:void 0,memberCustomField:void 0,muteTime:void 0},keyMap:{request:{userID:"Member_Account",memberCustomField:"AppMemberDefinedData",muteTime:"ShutUpTime",messageRemindType:"MsgFlag"}}}}(e)),this._configMap.set(jg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.GROUP_AVCHATROOM,".").concat(Lu.CMD.MARK_AVCHATROOM_MEMBER_INFO)}),body:{groupID:void 0,operationType:1,memberList:[]},keyMap:{request:{operationType:"CommandType",memberList:"MemberList",markType:"Marks",userID:"Member_Account"},response:{CommandType:"operationType",Marks:"markType",Member_Account:"userID"}}}}(e)),this._configMap.set(Fg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.IM_OPEN_STAT,".").concat(Lu.CMD.TIM_WEB_REPORT_V2)}),body:{header:{},event:[],quality:[]},keyMap:{request:{SDKType:"sdk_type",SDKVersion:"sdk_version",deviceType:"device_type",platform:"platform",instanceID:"instance_id",traceID:"trace_id",SDKAppID:"sdk_app_id",userID:"user_id",tinyID:"tiny_id",extension:"extension",timestamp:"timestamp",networkType:"network_type",eventType:"event_type",code:"error_code",message:"error_message",moreMessage:"more_message",duplicate:"duplicate",costTime:"cost_time",level:"level",qualityType:"quality_type",reportIndex:"report_index",wholePeriod:"whole_period",totalCount:"total_count",rttCount:"success_count_business",successRateOfRequest:"percent_business",countLessThan1Second:"success_count_business",percentOfCountLessThan1Second:"percent_business",countLessThan3Second:"success_count_platform",percentOfCountLessThan3Second:"percent_platform",successCountOfBusiness:"success_count_business",successRateOfBusiness:"percent_business",successCountOfPlatform:"success_count_platform",successRateOfPlatform:"percent_platform",successCountOfMessageReceived:"success_count_business",successRateOfMessageReceived:"percent_business",avgRTT:"average_value",avgDelay:"average_value",avgValue:"average_value",uiPlatform:"ui_platform"}}}}(r)),this._configMap.set(Bg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.HEARTBEAT,".").concat(Lu.CMD.ALIVE)}),body:{}}}(e)),this._configMap.set(qg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.IM_OPEN_PUSH,".").concat(Lu.CMD.MESSAGE_PUSH)}),body:{},keyMap:{response:{C2cMsgArray:"C2CMessageArray",GroupMsgArray:"groupMessageArray",GroupTips:"groupTips",C2cNotifyMsgArray:"C2CNotifyMessageArray",C2cMsgInfo:"C2CReadReceiptArray",ClientSeq:"clientSequence",MsgPriority:"priority",NoticeSeq:"noticeSequence",MsgContent:"content",MsgType:"type",MsgBody:"elements",ToGroupId:"to",Desc:"description",Ext:"extension",IsSyncMsg:"isSyncMessage",Flag:"needSync",NeedAck:"needAck",PendencyAdd_Account:"userID",ProfileImNick:"nick",PendencyType:"applicationType",C2CReadAllMsg:"readAllC2CMessage",IsNeedReadReceipt:"needReadReceipt",Status:"statusType",MsgExtensionNotify:"messageExtensionNotify",ExtensionC2cMsgInfo:"messageInfo",ExtensionGroupMsgInfo:"messageInfo",MsgOptType:"operateType",SetKVInfo:"operateResultList",DeleteKVInfo:"operateResultList",ClearKVInfo:"operateResultList",MsgKeyValue:"extensions",ClearMsgSeq:"clearSequence",MsgLastSeq:"globalSequence"}}}}(e)),this._configMap.set(Hg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.IM_OPEN_PUSH,".").concat(Lu.CMD.MULTI_MESSAGE_PUSH)}),body:{},keyMap:{response:{GroupMsgArray:"groupMessageArray",GroupTips:"groupTips",ClientSeq:"clientSequence",MsgPriority:"priority",NoticeSeq:"noticeSequence",MsgContent:"content",MsgType:"type",MsgBody:"elements",ToGroupId:"to",Desc:"description",Ext:"extension",IsSyncMsg:"isSyncMessage",Flag:"needSync",NeedAck:"needAck",PendencyType:"applicationType"}}}}(e)),this._configMap.set(zg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.OPEN_IM,".").concat(Lu.CMD.MESSAGE_PUSH_ACK)}),body:{sessionData:void 0},keyMap:{request:{sessionData:"SessionData"}}}}(e)),this._configMap.set(Kg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.IM_OPEN_STATUS,".").concat(Lu.CMD.STATUS_FORCE_OFFLINE)}),body:{},keyMap:{response:{C2cNotifyMsgArray:"C2CNotifyMessageArray",NoticeSeq:"noticeSequence",KickoutMsgNotify:"kickoutMsgNotify",NewInstInfo:"newInstanceInfo"}}}}(e)),this._configMap.set(Yg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.IM_LONG_MESSAGE,".").concat(Lu.CMD.DOWNLOAD_MERGER_MESSAGE)}),body:{downloadKey:""},keyMap:{response:{Data:"data",Desc:"description",Ext:"extension",Download_Flag:"downloadFlag",ThumbUUID:"thumbUUID",VideoUUID:"videoUUID"}}}}(e)),this._configMap.set(Wg,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.IM_LONG_MESSAGE,".").concat(Lu.CMD.UPLOAD_MERGER_MESSAGE)}),body:{messageList:[]},keyMap:{request:{fromAccount:"From_Account",toAccount:"To_Account",msgTimeStamp:"MsgTimeStamp",msgSeq:"MsgSeq",msgRandom:"MsgRandom",msgBody:"MsgBody",type:"MsgType",content:"MsgContent",data:"Data",description:"Desc",extension:"Ext",sizeType:"Type",uuid:"UUID",url:"",imageUrl:"URL",fileUrl:"Url",remoteAudioUrl:"Url",remoteVideoUrl:"VideoUrl",thumbUUID:"ThumbUUID",videoUUID:"VideoUUID",videoUrl:"",downloadFlag:"Download_Flag",from:"From_Account",time:"MsgTimeStamp",messageRandom:"MsgRandom",messageSequence:"MsgSeq",elements:"MsgBody",clientSequence:"ClientSeq",payload:"MsgContent",messageList:"MsgList",messageNumber:"MsgNum",abstractList:"AbstractList",messageBody:"MsgBody"}}}}(e)),this._configMap.set(lv,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.IM_OPEN_STATUS,".").concat(Lu.CMD.SET_TOKEN)}),body:{tokenID:"",pushMsg:0,sdkAppID:0,businessID:"",deviceBrand:"",deviceToken:"",isTpns:0,isWebUniapp:0},keyMap:{request:{tokenID:"TokenID",pushMsg:"PushMsg",sdkAppID:"EnterVersion",businessID:"BusiID",deviceBrand:"InstType",deviceToken:"VarToken",isTpns:"IsTpns"}}}}(e)),this._configMap.set(uv,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.IM_OPEN_STATUS,".").concat(Lu.CMD.STAT_FOREGROUND)}),body:{isWebUniapp:0}}}(e)),this._configMap.set(cv,function(e){return{head:n(n({},e),{},{servcmd:"".concat(Lu.NAME.IM_OPEN_STATUS,".").concat(Lu.CMD.STAT_BACKGROUND)}),body:{C2CUnread:0,GroupUnread:0,isWebUniapp:0},keyMap:{request:{c2cUnreadCount:"C2cUnread",groupUnreadCount:"GrpUnread"}}}}(e))}},{key:"has",value:function(e){return this._configMap.has(e)}},{key:"get",value:function(e){return this._configMap.get(e)}},{key:"update",value:function(){this._fillConfigMap()}},{key:"getKeyMap",value:function(e){return this.has(e)?this.get(e).keyMap||{}:(Ll.w("".concat(this._n,".getKeyMap unknown protocolName:").concat(e)),{})}},{key:"getProtocolData",value:function(e){var t=e.protocolName,n=e.requestData,r=this.get(t),i=null;if(n){var o=this._simpleDeepCopy(r),a=this._updateService(n,o),s=a.body,c=Object.create(null);for(var u in s)if(Object.prototype.hasOwnProperty.call(s,u)){if(c[u]=s[u],void 0===n[u])continue;c[u]=n[u]}a.body=c,i=this._getUplinkData(a)}else i=this._getUplinkData(r);return i}},{key:"_getUplinkData",value:function(e){var t=this._requestDataCleaner(e),n=Ad(t.head),r=pC(t.body,this._getRequestKeyMap(n));return t.body=r,t}},{key:"_updateService",value:function(e,t){var n=Ad(t.head);if(this._isFromGroupRequest(t)){var r=e.type,i=e.groupID,o=void 0===i?void 0:i,a=e.groupIDList,s=void 0===a?[]:a;Zl(o)&&(o=s[0]||""),yd({type:r,groupID:o})&&(t.head.servcmd="".concat(Lu.NAME.GROUP_COMMUNITY,".").concat(n))}return t}},{key:"_isFromGroupRequest",value:function(e){return e.head.servcmd.includes(Lu.NAME.GROUP)||e.head.servcmd.includes(Lu.NAME.GROUP_ATTR)}},{key:"_getRequestKeyMap",value:function(e){var t=this.getKeyMap(e);return n(n({},sC.request),t.request)}},{key:"_requestDataCleaner",value:function(e){var t=Array.isArray(e)?[]:Object.create(null);for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&rd(n)&&null!==e[n]&&void 0!==e[n]&&("object"!==r(e[n])?t[n]=e[n]:t[n]=this._requestDataCleaner.bind(this)(e[n]));return t}},{key:"_simpleDeepCopy",value:function(e){for(var t,n=Object.keys(e),r={},i=0,o=n.length;i<o;i++)t=n[i],Xl(e[t])?r[t]=Array.from(e[t]):Jl(e[t])?r[t]=this._simpleDeepCopy(e[t]):r[t]=e[t];return r}}]),e}(),UM=[zg],GM=function(){function e(t){i(this,e),this._sessionModule=t,this._n="DownlinkHandler",this._eventHandlerMap=new Map,this._eventHandlerMap.set("C2CMessageArray",this._c2cMessageArrayHandler.bind(this)),this._eventHandlerMap.set("groupMessageArray",this._groupMessageArrayHandler.bind(this)),this._eventHandlerMap.set("groupTips",this._groupTipsHandler.bind(this)),this._eventHandlerMap.set("C2CNotifyMessageArray",this._C2CNotifyMessageArrayHandler.bind(this)),this._eventHandlerMap.set("C2CReadReceiptArray",this._C2CReadReceiptArrayHandler.bind(this)),this._eventHandlerMap.set("profileModify",this._profileHandler.bind(this)),this._eventHandlerMap.set("friendListMod",this._relationChainHandler.bind(this)),this._eventHandlerMap.set("recentContactMod",this._recentContactHandler.bind(this)),this._eventHandlerMap.set("readAllC2CMessage",this._allMessageReadHandler.bind(this)),this._eventHandlerMap.set("c2cMessageModified",this._c2cMessageModifiedHandler.bind(this)),this._eventHandlerMap.set("groupMessageModified",this._groupMessageModifiedHandler.bind(this)),this._eventHandlerMap.set("userStatusList",this._userStatusListHandler.bind(this)),this._eventHandlerMap.set("messageExtensionNotify",this._messageExtensionNotifyHandler.bind(this)),this._keys=y(this._eventHandlerMap.keys())}return a(e,[{key:"_c2cMessageArrayHandler",value:function(e){var t=this._sessionModule.getModule(Pf);t&&(e.dataList.forEach((function(e){if(1===e.isSyncMessage){var t=e.from;e.from=e.to,e.to=t}})),1===e.needSync&&this._sessionModule.getModule(Jf).startOnlineSync(),t.onNewC2CMessage({dataList:e.dataList,isInstantMessage:!0}))}},{key:"_c2cMessageModifiedHandler",value:function(e){var t=this._sessionModule.getModule(Pf);t&&t.onC2CMessageModified(e)}},{key:"_groupMessageArrayHandler",value:function(e){var t=this._sessionModule.getModule(jf);t&&t.onNewGroupMessage({event:e.event,dataList:e.dataList,isInstantMessage:!0})}},{key:"_groupMessageModifiedHandler",value:function(e){var t=this._sessionModule.getModule(jf);t&&t.onGroupMessageModified(e)}},{key:"_groupTipsHandler",value:function(e){var t=this._sessionModule.getModule(jf);if(t){var n=e.event,r=e.dataList,i=e.isInstantMessage,o=void 0===i||i,a=e.isSyncingEnded;switch(n){case 4:case 6:t.onNewGroupTips({event:n,dataList:r});break;case 5:for(var s=0;s<r.length;s++)if(Xl(r[s].elements.revokedInfos))t.onGroupMessageRevoked({dataList:r});else if(Xl(r[s].elements.groupMessageReadNotice))t.onGroupMessageReadNotice({dataList:r});else{if(!Xl(r[s].elements.readReceiptList)){t.onNewGroupSystemNotice({dataList:r,isInstantMessage:o,isSyncingEnded:a});break}t.onReadReceiptList({dataList:r})}break;case 12:this._sessionModule.getModule(Ff).onNewGroupAtTips({dataList:r});break;default:Ll.l("".concat(this._n,"._groupTipsHandler unknown event:").concat(n," dataList:"),r)}}}},{key:"_C2CNotifyMessageArrayHandler",value:function(e){var t=this,n=e.dataList;if(Xl(n)){var r=this._sessionModule.getModule(Pf);n.forEach((function(e){if($l(e))if(e.hasOwnProperty("kickoutMsgNotify")){var i=e.kickoutMsgNotify,o=i.kickType,a=i.newInstanceInfo,s=void 0===a?{}:a;1===o?t._sessionModule.onMultipleAccountKickedOut(s):2===o?t._sessionModule.onMultipleDeviceKickedOut(s):3===o&&t._sessionModule.onRestApiKickedOut(s)}else e.hasOwnProperty("c2cMessageRevokedNotify")?r&&r.onC2CMessageRevoked({dataList:n}):e.hasOwnProperty("c2cMessageReadReceipt")?r&&r.onC2CMessageReadReceipt({dataList:n}):e.hasOwnProperty("c2cMessageReadNotice")?r&&r.onC2CMessageReadNotice({dataList:n}):e.hasOwnProperty("muteNotificationsSync")&&t._sessionModule.getModule(Ff).onC2CMessageRemindTypeSynced({dataList:n})}))}}},{key:"_C2CReadReceiptArrayHandler",value:function(e){this._sessionModule.getModule(Pf).onReadReceiptList(e)}},{key:"_profileHandler",value:function(e){this._sessionModule.getModule(Nf).onProfileModified({dataList:e.dataList});var t=this._sessionModule.getModule(Uf);t&&t.onFriendProfileModified({dataList:e.dataList})}},{key:"_relationChainHandler",value:function(e){this._sessionModule.getModule(Nf).onRelationChainModified({dataList:e.dataList});var t=this._sessionModule.getModule(Uf);t&&t.onRelationChainModified({dataList:e.dataList})}},{key:"_recentContactHandler",value:function(e){var t=e.dataList;if(Xl(t)){var n=this._sessionModule.getModule(Ff);n&&t.forEach((function(e){var t=e.pushType;if(1===t){var r=e.recentContactDeleteItem;n.onConversationDeleted(r.recentContactList)}else if(2===t){var i=e.recentContactTopItem;n.onConversationPinned(i.recentContactList)}else if(3===t){var o=e.recentContactTopItem;n.onConversationUnpinned(o.recentContactList)}else if(4===t){var a=e.recentContactMarkContact;n.onConversationMarkUpdated(a.recentContactMarkContactItem)}else if(5===t){var s=e.recentContactCreateContactGroup;n.onConversationGroupCreated(s.msgContactGroupContactItem)}else if(6===t){var c=e.recentContactDelContactGroup;n.onConversationGroupDeleted(c.msgGroupItem)}else if(7===t){var u=e.recentContactUpdateContactGroup,l=u.updateType,d=u.msgUpdateGroup,p=u.msgUpdateContact;if(1===l){var f=d.updateGroupType;1===f?n.onConversationGroupNameUpdated(d):2===f&&n.onConversationInGroupUpdated(d)}else 2===l&&n.onConversationAddedToOrDeletedFromGroup(p)}}))}}},{key:"_allMessageReadHandler",value:function(e){var t=e.dataList,n=this._sessionModule.getModule(Ff);n&&n.onPushedAllMessageRead(t)}},{key:"_userStatusListHandler",value:function(e){this._sessionModule.getModule(Nf).onUserStatusUpdated(e)}},{key:"_messageExtensionNotifyHandler",value:function(e){this._sessionModule.getModule(Lf).onMessageExtensionNotify(e)}},{key:"onMessage",value:function(e){var t=this,n=e.body;if(this._filterMessageFromIMOpenPush(e)){var r=n.eventArray,i=n.isInstantMessage,o=n.isSyncingEnded,a=n.needSync;if(Xl(r))for(var s=null,c=null,u=0,l=0,d=r.length;l<d;l++){u=(s=r[l]).event;var p=Object.keys(s).find((function(e){return-1!==t._keys.indexOf(e)}));p?(c=14===u?{readAllC2CMessage:s[p],groupMessageReadInfoList:s.groupMessageReadNotice||[]}:16===u?{userID:s.userID,readReceiptList:s[p]}:s[p],this._eventHandlerMap.get(p)({event:u,dataList:c,isInstantMessage:i,isSyncingEnded:o,needSync:a})):Ll.l("".concat(this._n,".onMessage unknown eventItem:").concat(s))}}}},{key:"_filterMessageFromIMOpenPush",value:function(e){var t=e.head,n=e.body,r=t.servcmd,i=!1;if(Zl(r)||(i=r.includes(Lu.NAME.IM_CONFIG_MANAGER)||r.includes(Lu.NAME.OVERLOAD_PUSH)||r.includes(Lu.NAME.STAT_SERVICE)),!i)return!0;if(r.includes(Lu.CMD.PUSHED_CLOUD_CONTROL_CONFIG))this._sessionModule.getModule(Qf).onPushedCloudControlConfig(n);else if(r.includes(Lu.CMD.PUSHED_COMMERCIAL_CONFIG))this._sessionModule.getModule(rh).onPushedConfig(n);else if(r.includes(Lu.CMD.OVERLOAD_NOTIFY))this._sessionModule.onPushedServerOverload(n);else if(r.includes(Lu.CMD.KICK_OTHER)){var o=Date.now();this._sessionModule.reLoginOnKickOther();var a=new a_("kickOther"),s=this._sessionModule.getModule(Rf).getLastWsHelloTs(),c=o-s;a.setMessage("last wshello time:".concat(s," diff:").concat(c,"ms")).setNetworkType(this._sessionModule.getNetworkType()).end()}return!1}}]),e}(),VM=[{cmd:Lu.CMD.GET_GROUP_INFO,interval:1,count:20},{cmd:Lu.CMD.GET_AVCHATROOM_MEMBER_LIST,interval:3,count:1},{cmd:Lu.CMD.GET_GROUP_APPLICATION,interval:1,count:1},{cmd:Lu.CMD.GET_TOPIC_LIST,interval:1,count:10},{cmd:Lu.CMD.SET_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:Lu.CMD.MODIFY_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:Lu.CMD.DELETE_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:Lu.CMD.CLEAR_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:Lu.CMD.GET_GROUP_ATTRIBUTES,interval:5,count:20},{cmd:Lu.CMD.UPDATE_GROUP_COUNTER,interval:5,count:20},{cmd:Lu.CMD.GET_GROUP_COUNTER,interval:5,count:20},{cmd:Lu.CMD.SET_ALL_MESSAGE_READ,interval:1,count:1},{cmd:Lu.CMD.GET_USER_STATUS,interval:5,count:20},{cmd:Lu.CMD.SUBSCRIBE_USER_STATUS,interval:5,count:20},{cmd:Lu.CMD.UNSUBSCRIBE_USER_STATUS,interval:5,count:20}],FM=function(e){c(r,e);var t=m(r);function r(e){var n;return i(this,r),(n=t.call(this,e))._n="SessionModule",n._platform=n.getPlatform(),n._protocolHandler=new jM(g(n)),n._messageDispatcher=new GM(g(n)),n._commandFrequencyLimitMap=new Map,n._commandRequestInfoMap=new Map,n._serverOverloadInfoMap=new Map,n._init(),n.getInnerEmitterInstance().on(xI,n._onCloudConfigUpdated,g(n)),n}return a(r,[{key:"_init",value:function(){this._updateCommandFrequencyLimitMap(VM)}},{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("cmd_frequency_limit");Zl(e)||(e=JSON.parse(e),this._updateCommandFrequencyLimitMap(e))}},{key:"_updateCommandFrequencyLimitMap",value:function(e){var t=this;e.forEach((function(e){t._commandFrequencyLimitMap.set(e.cmd,{interval:e.interval,count:e.count})}))}},{key:"updateProtocolConfig",value:function(){this._protocolHandler.update()}},{key:"request",value:function(e){Ll.d("".concat(this._n,".request options:"),e);var t=e.protocolName,n=e.tjgID;if(!this._protocolHandler.has(t))return Ll.w("".concat(this._n,".request unknown protocol:").concat(t)),gI({code:Om});var r=this.getProtocolData(e),i=r.head.servcmd;if(this._isFrequencyOverLimit(i))return gI({code:wm});if(this._isServerOverload(i))return gI({code:zm});Bd(n)||(r.head.tjgID=n);var o=this.getModule(Xf);return UM.includes(t)?o.simplySend(r):o.send(r)}},{key:"getKeyMap",value:function(e){return this._protocolHandler.getKeyMap(e)}},{key:"genCommonHead",value:function(){var e=this.getModule(Bf);return{ver:"v4",platform:this._platform,websdkappid:Eu,websdkversion:Su,a2:e.getA2Key()||void 0,tinyid:e.getTinyID()||void 0,status_instid:e.getStatusInstanceID(),sdkappid:e.getSDKAppID(),contenttype:e.getContentType(),reqtime:0,identifier:e.getA2Key()?void 0:e.getUserID(),usersig:e.getA2Key()?void 0:e.getUserSig(),sdkability:192371,tjgID:""}}},{key:"genCosSpecifiedHead",value:function(){var e=this.getModule(Bf);return{ver:"v4",platform:this._platform,websdkappid:Eu,websdkversion:Su,sdkappid:e.getSDKAppID(),contenttype:e.getContentType(),reqtime:0,identifier:e.getUserID(),usersig:e.getUserSig(),status_instid:e.getStatusInstanceID(),sdkability:192371}}},{key:"genSSOReportHead",value:function(){var e=this.getModule(Bf);return{ver:"v4",platform:this._platform,websdkappid:Eu,websdkversion:Su,sdkappid:e.getSDKAppID(),contenttype:"",reqtime:0,identifier:"",usersig:"",status_instid:e.getStatusInstanceID(),sdkability:192371}}},{key:"getProtocolData",value:function(e){return this._protocolHandler.getProtocolData(e)}},{key:"trans",value:function(e){var t=e.servcmd,r=e.data,i={head:n(n({},this.genCommonHead()),{},{servcmd:t}),body:r};return this.getModule(Xf).send(i)}},{key:"sendComboMessage",value:function(e){var t=e.servcmd,r=e.data,i={head:n(n({},this.genCommonHead()),{},{servcmd:t}),body:r};return this.getModule(Xf).send(i)}},{key:"onErrorCodeNotZero",value:function(e){var t=e.errorCode;if(t===Hm){var n=e.kickType,r=e.newInstanceInfo,i=void 0===r?{}:r;1===n?this.onMultipleAccountKickedOut(i):2===n?this.onMultipleDeviceKickedOut(i):3===n&&this.onRestApiKickedOut(i)}t!==Bm&&t!==qm||(this._onUserSigExpired(),this.getModule(Xf).reConnect())}},{key:"onMessage",value:function(e){var t=e.body,n=t.needAck,r=void 0===n?0:n,i=t.sessionData;1===r&&this._sendACK(i),this._messageDispatcher.onMessage(e)}},{key:"onReconnected",value:function(){this._reLoginOnReconnected()}},{key:"reLoginOnKickOther",value:function(){Ll.l("".concat(this._n,".reLoginOnKickOther")),this._reLogin()}},{key:"_reLoginOnReconnected",value:function(){Ll.l("".concat(this._n,"._reLoginOnReconnected")),this._reLogin()}},{key:"_reLogin",value:function(){var e=this;if(this.isLoggedIn()){var t=0,n=this.getModule(ih);n.canIUseOfflinePush()&&(t=n.getUniAppPlatform()),this.request({protocolName:lh,requestData:{isWebUniapp:t}}).then((function(t){var n=t.data.instanceID;e.getModule(Bf).setStatusInstanceID(n),Ll.l("".concat(e._n,"._reLogin ok. start to sync unread messages")),e.getModule(Ff).syncConversationList().then((function(){e.getModule(th).start()})),e.getModule(jf).updateLocalMainSequenceOnReconnected();var r=e.getModule(Vf);r.resetGetTopicTime(),r.getTopicListOnReconnected()}))}}},{key:"onMultipleAccountKickedOut",value:function(e){this.getModule(Rf).onMultipleAccountKickedOut(e)}},{key:"onMultipleDeviceKickedOut",value:function(e){this.getModule(Rf).onMultipleDeviceKickedOut(e)}},{key:"_onUserSigExpired",value:function(){this.getModule(Rf).onUserSigExpired()}},{key:"onRestApiKickedOut",value:function(e){this.getModule(Rf).onRestApiKickedOut(e)}},{key:"_sendACK",value:function(e){this.request({protocolName:zg,requestData:{sessionData:e}})}},{key:"_isFrequencyOverLimit",value:function(e){var t=e.split(".")[1];if(!this._commandFrequencyLimitMap.has(t))return!1;if(!this._commandRequestInfoMap.has(t))return this._commandRequestInfoMap.set(t,{startTime:Date.now(),requestCount:1}),!1;var n=this._commandFrequencyLimitMap.get(t),r=n.count,i=n.interval,o=this._commandRequestInfoMap.get(t),a=o.startTime,s=o.requestCount;if(Date.now()-a>1e3*i)return this._commandRequestInfoMap.set(t,{startTime:Date.now(),requestCount:1}),!1;s+=1,this._commandRequestInfoMap.set(t,{startTime:a,requestCount:s});var c=!1;return s>r&&(c=!0),c}},{key:"_isServerOverload",value:function(e){if(!this._serverOverloadInfoMap.has(e))return!1;var t=this._serverOverloadInfoMap.get(e),n=t.overloadTime,r=t.waitingTime,i=!1;return Date.now()-n<=1e3*r?i=!0:(this._serverOverloadInfoMap.delete(e),i=!1),i}},{key:"onPushedServerOverload",value:function(e){var t=e.overloadCommand,n=e.waitingTime;this._serverOverloadInfoMap.set(t,{overloadTime:Date.now(),waitingTime:n}),Ll.w("".concat(this._n,".onPushedServerOverload waitingTime:").concat(n,"s"))}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset")),this._updateCommandFrequencyLimitMap(VM),this._commandRequestInfoMap.clear(),this._serverOverloadInfoMap.clear()}}]),r}(uh),BM=function(e){c(n,e);var t=m(n);function n(e){var r;return i(this,n),(r=t.call(this,e))._n="MessageLossDetectionModule",r._maybeLostSequencesMap=new Map,r._firstRoundRet=[],r}return a(n,[{key:"onMessageMaybeLost",value:function(e,t,n){this._maybeLostSequencesMap.has(e)||this._maybeLostSequencesMap.set(e,[]);for(var r=this._maybeLostSequencesMap.get(e),i=0;i<n;i++)-1===r.indexOf(t+i)&&r.push(t+i)}},{key:"detectFirstRound",value:function(e,t){var n=this._maybeLostSequencesMap.get(e);if(!Bd(n)&&!Bd(t)){var r=n.filter((function(e){return-1===t.indexOf(e)}));0===r.length?Ll.i("".concat(this._n,".detectFirstRound no message loss. conversationID:").concat(e)):this._firstRoundRet=this._firstRoundRet.concat(r),n.length=0}}},{key:"detectSecondRound",value:function(e,t){if(!Bd(this._firstRoundRet)&&!Bd(t)){var n=this._firstRoundRet.filter((function(e){return-1===t.indexOf(e)}));this._firstRoundRet.length=0;var r,i=n.length;0!==i&&(i<=5?r=e+"-"+n.join("-"):(n.sort((function(e,t){return e-t})),r=e+" start:"+n[0]+" end:"+n[i-1]+" count:"+i),new a_("messageLoss").setMessage(r).setNetworkType(this.getNetworkType()).setLevel("warning").end(),Ll.i("".concat(this._n,".detectSecondRound message loss detected. conversationID:").concat(e," lostSequences:").concat(n)))}}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset")),this._maybeLostSequencesMap.clear(),this._firstRoundRet.length=0}}]),n}(uh),qM=function(e){c(n,e);var t=m(n);function n(e){var r;return i(this,n),(r=t.call(this,e))._n="CloudControlModule",r._cloudConfig=new Map,r._expiredTime=0,r._version=0,r._isFetching=!1,r}return a(n,[{key:"getCloudConfig",value:function(e){return Zl(e)?this._cloudConfig:this._cloudConfig.has(e)?this._cloudConfig.get(e):void 0}},{key:"_canFetchConfig",value:function(){return this.isLoggedIn()&&!this._isFetching&&Date.now()>=this._expiredTime}},{key:"fetchConfig",value:function(){var e=this,t=this._canFetchConfig();if(Ll.l("".concat(this._n,".fetchConfig canFetchConfig:").concat(t)),t){var n=new a_("fetchCloudControlConfig"),r=this.getModule(Bf).getSDKAppID();this._isFetching=!0,this.request({protocolName:Jg,requestData:{SDKAppID:r,version:this._version}}).then((function(t){e._isFetching=!1,n.setMessage("version:".concat(e._version," newVersion:").concat(t.data.version," config:").concat(t.data.cloudControlConfig)).setNetworkType(e.getNetworkType()).end(),Ll.l("".concat(e._n,".fetchConfig ok")),e._parseCloudControlConfig(t.data)})).catch((function(t){e._isFetching=!1,e.probeNetwork().then((function(e){var r=_(e,2),i=r[0],o=r[1];n.setError(t,i,o).end()})),Ll.l("".concat(e._n,".fetchConfig failed. error:"),t),e._setExpiredTimeOnResponseError(12e4)}))}}},{key:"onPushedCloudControlConfig",value:function(e){Ll.l("".concat(this._n,".onPushedCloudControlConfig")),new a_("pushedCloudControlConfig").setNetworkType(this.getNetworkType()).setMessage("newVersion:".concat(e.version," config:").concat(e.cloudControlConfig)).end(),this._parseCloudControlConfig(e)}},{key:"onCheckTimer",value:function(e){this._canFetchConfig()&&this.fetchConfig()}},{key:"_parseCloudControlConfig",value:function(e){var t=this,n="".concat(this._n,"._parseCloudControlConfig"),r=e.errorCode,i=e.errorMessage,o=e.cloudControlConfig,a=e.version,s=e.expiredTime;if(0===r){if(this._version!==a){var c=null;try{c=JSON.parse(o)}catch(Lk){this.isPrivateNetWork()||Ll.e("".concat(n," JSON parse error. cloudControlConfig:"),o)}c&&(this._cloudConfig.clear(),Object.keys(c).forEach((function(e){t._cloudConfig.set(e,c[e])})),this._version=a,this.emitInnerEvent(xI))}this._expiredTime=Date.now()+1e3*s}else Zl(r)?(Ll.l("".concat(n," failed. Invalid message format:"),e),this._setExpiredTimeOnResponseError(36e5)):(Ll.e("".concat(n," errorCode:").concat(r," errorMessage:").concat(i)),this._setExpiredTimeOnResponseError(12e4))}},{key:"_setExpiredTimeOnResponseError",value:function(e){this._expiredTime=Date.now()+e}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset")),this._cloudConfig.clear(),this._expiredTime=0,this._version=0,this._isFetching=!1}}]),n}(uh),HM=function(e){c(n,e);var t=m(n);function n(e){var r;return i(this,n),(r=t.call(this,e))._n="RecoverMessageModule",r.PULL_LIMIT_COUNT=15,r}return a(n,[{key:"start",value:function(){this._recoverGroupChat(),this._recoverC2CChat()}},{key:"_recoverGroupChat",value:function(){var e,t,n=this,r=this._getLocalConversationList().filter((function(e){return e.type===bi.CONV_GROUP&&e.groupProfile.type!==bi.GRP_AVCHATROOM})),i=this.getModule(Ff),o=0,a=0,s=0;r.forEach((function(r){var c=r.conversationID,u=r.lastMessage;t=c.replace(bi.CONV_GROUP,""),e=i.getLocalLastMessage(c),u&&0!==u.lastSequence&&e?(a=u.lastSequence,o=e.sequence,s=a-o,o>0&&s>=1&&s<300?n._recoverGroupMessage({groupID:t,localLastMessageSequence:o,remoteLastMessageSequence:a}):n._getGroupNotify(t)):n._getGroupNotify(t)}))}},{key:"_recoverC2CChat",value:function(){var e,t=this,n=this._getLocalConversationList().filter((function(e){return e.type===bi.CONV_C2C})),r=this.getModule(Ff),i=0,o=0,a=0,s=[Promise.resolve()];n.forEach((function(n){var c=n.conversationID,u=n.lastMessage;e=r.getLocalLastMessage(c),u&&0!==u.lastTime&&e&&(o=u.lastTime,i=e.time,a=o-i,i>0&&a>=1&&a<=600&&s.push(t._recoverC2CMessage({conversationID:c,localLastMessageTime:i,remoteLastMessageTime:o})))})),Promise.all(s).then((function(){Ll.l("".concat(t._n,"._recoverC2CChat all promise fulfilled, start to sync unread messages")),t.getModule(Jf).startSyncOnReconnected()}))}},{key:"_getLocalConversationList",value:function(){return this.getModule(Ff).getLocalConversationList()}},{key:"_recoverGroupMessage",value:function(e){var t=this,n="".concat(this._n,"._recoverGroupMessage");Ll.l("".concat(n," options:"),e);var r=e.groupID,i=e.localLastMessageSequence,o=e.remoteLastMessageSequence;this._getGroupRomaingMessage({groupID:r,sequence:i}).then((function(e){var i=e.data,a=i.complete,s=i.messageList;if(!Zl(s)){var c=s[0].sequence;Ll.l("".concat(n," pkgLastMessageSequence:").concat(c," complete:").concat(a)),c<o&&2!==a&&t._recoverGroupMessage({groupID:r,localLastMessageSequence:c,remoteLastMessageSequence:o}),new a_("recoverMessage").setNetworkType(t.getNetworkType()).setMessage("groupID:".concat(r," complete:").concat(a," messageList length:").concat(s.length)).end(),t.getModule(jf).onNewGroupMessage({dataList:s,isInstantMessage:!1,updateUnreadCount:!1}),t._getGroupNotify(r)}}))}},{key:"_getGroupNotify",value:function(e){this.getModule(jf).getGroupNotify(e)}},{key:"_getGroupRomaingMessage",value:function(e){var t=e.groupID,n=e.sequence;return this.request({protocolName:cg,requestData:{groupID:t,count:this.PULL_LIMIT_COUNT,sequence:n+this.PULL_LIMIT_COUNT-1}})}},{key:"_recoverC2CMessage",value:function(e){var t=this,n="".concat(this._n,"._recoverC2CMessage");Ll.l("".concat(this._n,"._recoverC2CMessage options:"),e);var r=e.conversationID,i=e.localLastMessageTime,o=e.remoteLastMessageTime;return this._getC2CRoamingMessage({conversationID:r,time:i}).then((function(e){var i=e.data,a=i.complete,s=i.messageList;if(!Zl(s)){new a_("recoverMessage").setNetworkType(t.getNetworkType()).setMessage("".concat(r," complete:").concat(a," messageList length:").concat(c)).end(),t.getModule(Pf).onNewC2CMessage({dataList:s,isInstantMessage:!0});var c=s.length,u=s[c-1].time;if(Ll.l("".concat(n," pkgLastMessageTime:").concat(u," complete:").concat(a)),u<o&&1!==a)return t._recoverC2CMessage({conversationID:r,localLastMessageTime:u,remoteLastMessageTime:o})}}))}},{key:"_getC2CRoamingMessage",value:function(e){var t=e.conversationID,n=e.time;return this.request({protocolName:kh,requestData:{peerAccount:t.replace(bi.CONV_C2C,""),count:this.PULL_LIMIT_COUNT+1,lastMessageTime:n,direction:1}})}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset"))}}]),n}(uh),zM=function(){function e(){i(this,e),this._n="AvgE2EDelay",this._e2eDelayArray=[]}return a(e,[{key:"addMessageDelay",value:function(e){var t=Dl()-e;t>=0&&this._e2eDelayArray.push(t)}},{key:"_calcAvg",value:function(e,t){if(0===t)return 0;var n=0;return e.forEach((function(e){n+=e})),Rd(n/t,1)}},{key:"_calcCountWithLimit",value:function(e){var t=e.e2eDelayArray,n=e.min,r=e.max;return t.filter((function(e){return n<=e&&e<r})).length}},{key:"_calcPercent",value:function(e,t){var n=Rd(e/t*100,2);return n>100&&(n=100),n}},{key:"_checkE2EDelayException",value:function(e,t){var n=e.filter((function(e){return e>t}));if(n.length>0){var r=n.length,i=Math.min.apply(Math,y(n)),o=Math.max.apply(Math,y(n)),a=this._calcAvg(n,r),s=Rd(r/e.length*100,2);s>50&&new a_("messageE2EDelayException").setMessage("count:".concat(r," min:").concat(i," max:").concat(o," avg:").concat(a," percent:").concat(s)).setLevel("warning").end()}}},{key:"getStatResult",value:function(){var e=this._e2eDelayArray.length;if(0===e)return null;var t=y(this._e2eDelayArray),n=this._calcCountWithLimit({e2eDelayArray:t,min:0,max:1}),r=this._calcCountWithLimit({e2eDelayArray:t,min:1,max:3}),i=this._calcPercent(n,e),o=this._calcPercent(r,e),a=this._calcAvg(t,e);return this._checkE2EDelayException(t,3),t.length=0,this.reset(),{totalCount:e,countLessThan1Second:n,percentOfCountLessThan1Second:i,countLessThan3Second:r,percentOfCountLessThan3Second:o,avgDelay:a}}},{key:"reset",value:function(){this._e2eDelayArray.length=0}}]),e}(),KM=function(){function e(){i(this,e),this._n="AvgRTT",this._requestCount=0,this._rttArray=[]}return a(e,[{key:"addRequestCount",value:function(){this._requestCount+=1}},{key:"addRTT",value:function(e){this._rttArray.push(e)}},{key:"_calcTotalCount",value:function(){return this._requestCount}},{key:"_calcRTTCount",value:function(e){return e.length}},{key:"_calcSuccessRateOfRequest",value:function(e,t){if(0===t)return 0;var n=Rd(e/t*100,2);return n>100&&(n=100),n}},{key:"_calcAvg",value:function(e,t){if(0===t)return 0;var n=0;return e.forEach((function(e){n+=e})),parseInt(n/t)}},{key:"_calcMax",value:function(){return Math.max.apply(Math,y(this._rttArray))}},{key:"_calcMin",value:function(){return Math.min.apply(Math,y(this._rttArray))}},{key:"getStatResult",value:function(){var e=this._calcTotalCount(),t=y(this._rttArray);if(0===e)return null;var n=this._calcRTTCount(t),r=this._calcSuccessRateOfRequest(n,e),i=this._calcAvg(t,n);return Ll.l("".concat(this._n,".getStatResult max:").concat(this._calcMax()," min:").concat(this._calcMin()," avg:").concat(i)),this.reset(),{totalCount:e,rttCount:n,successRateOfRequest:r,avgRTT:i}}},{key:"reset",value:function(){this._requestCount=0,this._rttArray.length=0}}]),e}(),WM=function(){function e(){i(this,e),this._map=new Map}return a(e,[{key:"initMap",value:function(e){var t=this;e.forEach((function(e){t._map.set(e,{totalCount:0,successCount:0,failedCountOfUserSide:0,costArray:[],fileSizeArray:[]})}))}},{key:"addTotalCount",value:function(e){return!(Zl(e)||!this._map.has(e))&&(this._map.get(e).totalCount+=1,!0)}},{key:"addSuccessCount",value:function(e){return!(Zl(e)||!this._map.has(e))&&(this._map.get(e).successCount+=1,!0)}},{key:"addFailedCountOfUserSide",value:function(e){return!(Zl(e)||!this._map.has(e))&&(this._map.get(e).failedCountOfUserSide+=1,!0)}},{key:"addCost",value:function(e,t){return!(Zl(e)||!this._map.has(e))&&(this._map.get(e).costArray.push(t),!0)}},{key:"addFileSize",value:function(e,t){return!(Zl(e)||!this._map.has(e))&&(this._map.get(e).fileSizeArray.push(t),!0)}},{key:"_calcSuccessRateOfBusiness",value:function(e){if(Zl(e)||!this._map.has(e))return-1;var t=this._map.get(e),n=Rd(t.successCount/t.totalCount*100,2);return n>100&&(n=100),n}},{key:"_calcSuccessRateOfPlatform",value:function(e){if(Zl(e)||!this._map.has(e))return-1;var t=this._map.get(e),n=this._calcSuccessCountOfPlatform(e)/t.totalCount*100;return(n=Rd(n,2))>100&&(n=100),n}},{key:"_calcTotalCount",value:function(e){return Zl(e)||!this._map.has(e)?-1:this._map.get(e).totalCount}},{key:"_calcSuccessCountOfBusiness",value:function(e){return Zl(e)||!this._map.has(e)?-1:this._map.get(e).successCount}},{key:"_calcSuccessCountOfPlatform",value:function(e){if(Zl(e)||!this._map.has(e))return-1;var t=this._map.get(e);return t.successCount+t.failedCountOfUserSide}},{key:"_calcAvg",value:function(e){return Zl(e)||!this._map.has(e)?-1:e===Zm?this._calcAvgSpeed(e):this._calcAvgCost(e)}},{key:"_calcAvgCost",value:function(e){var t=this._map.get(e).costArray.length;if(0===t)return 0;var n=0;return this._map.get(e).costArray.forEach((function(e){n+=e})),parseInt(n/t)}},{key:"_calcAvgSpeed",value:function(e){var t=0,n=0;return this._map.get(e).costArray.forEach((function(e){t+=e})),this._map.get(e).fileSizeArray.forEach((function(e){n+=e})),parseInt(1e3*n/t)}},{key:"getStatResult",value:function(e){var t=this._calcTotalCount(e);if(0===t)return null;var n=this._calcSuccessCountOfBusiness(e),r=this._calcSuccessRateOfBusiness(e),i=this._calcSuccessCountOfPlatform(e),o=this._calcSuccessRateOfPlatform(e),a=this._calcAvg(e);return this.reset(e),{totalCount:t,successCountOfBusiness:n,successRateOfBusiness:r,successCountOfPlatform:i,successRateOfPlatform:o,avgValue:a}}},{key:"reset",value:function(e){Zl(e)?this._map.clear():this._map.set(e,{totalCount:0,successCount:0,failedCountOfUserSide:0,costArray:[],fileSizeArray:[]})}}]),e}(),YM=function(){function e(){i(this,e),this._lastMap=new Map,this._currentMap=new Map}return a(e,[{key:"initMap",value:function(e){var t=this;e.forEach((function(e){t._lastMap.set(e,new Map),t._currentMap.set(e,new Map)}))}},{key:"addMessageSequence",value:function(e){var t=e.key,n=e.message;if(Zl(t)||!this._lastMap.has(t)||!this._currentMap.has(t))return!1;var r=n.conversationID,i=n.sequence,o=r.replace(bi.CONV_GROUP,"");if(0===this._lastMap.get(t).size)this._addCurrentMap(e);else if(this._lastMap.get(t).has(o)){var a=this._lastMap.get(t).get(o),s=a.length-1;i>a[0]&&i<a[s]?(a.push(i),a.sort(),this._lastMap.get(t).set(o,a)):this._addCurrentMap(e)}else this._addCurrentMap(e);return!0}},{key:"_addCurrentMap",value:function(e){var t=e.key,n=e.message,r=n.conversationID,i=n.sequence,o=r.replace(bi.CONV_GROUP,"");this._currentMap.get(t).has(o)||this._currentMap.get(t).set(o,[]),this._currentMap.get(t).get(o).push(i)}},{key:"_copyData",value:function(e){if(!Zl(e)){this._lastMap.set(e,new Map);var t,n=this._lastMap.get(e),r=E(this._currentMap.get(e));try{for(r.s();!(t=r.n()).done;){var i=_(t.value,2),o=i[0],a=i[1];n.set(o,a)}}catch(c){r.e(c)}finally{r.f()}n=null,this._currentMap.set(e,new Map)}}},{key:"getStatResult",value:function(e){if(Zl(this._currentMap.get(e))||Zl(this._lastMap.get(e)))return null;if(0===this._lastMap.get(e).size)return this._copyData(e),null;var t=0,n=0;if(this._lastMap.get(e).forEach((function(e,r){var i=y(e.values()),o=i.length,a=i[o-1]-i[0]+1;t+=a,n+=o})),0===t)return null;var r=Rd(n/t*100,2);return r>100&&(r=100),this._copyData(e),{totalCount:t,successCountOfMessageReceived:n,successRateOfMessageReceived:r}}},{key:"reset",value:function(){this._currentMap.clear(),this._lastMap.clear()}}]),e}(),JM=function(e){c(r,e);var t=m(r);function r(e){var n;i(this,r),(n=t.call(this,e))._n="QualityStatModule",n.TAG="im-ssolog-quality-stat",n.reportIndex=0,n.wholePeriod=!1,n._qualityItems=[Km,Wm,Ym,Jm,$m,Xm,Zm,Qm,e_,t_],n._messageSentItems=[Ym,Jm,$m,Xm,Zm],n._messageReceivedItems=[Qm,e_,t_],n.REPORT_INTERVAL=120,n.REPORT_SDKAPPID_BLACKLIST=[],n.REPORT_TINYID_WHITELIST=[],n._statInfoArr=[],n._avgRTT=new KM,n._avgE2EDelay=new zM,n._rateMessageSent=new WM,n._rateMessageReceived=new YM;var o=n.getInnerEmitterInstance();return o.on(RI,n._onLoginSuccess,g(n)),o.on(xI,n._onCloudConfigUpdated,g(n)),n}return a(r,[{key:"_onLoginSuccess",value:function(){var e=this;this._rateMessageSent.initMap(this._messageSentItems),this._rateMessageReceived.initMap(this._messageReceivedItems);var t=this.getModule(qf),n=t.getItem(this.TAG,!1);!Bd(n)&&ed(n.forEach)&&(Ll.l("".concat(this._n,"._onLoginSuccess get quality stat logs from local storage, count:").concat(n.length)),n.forEach((function(t){e._statInfoArr.push(t)})),t.removeItem(this.TAG,!1))}},{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("q_rpt_interval"),t=this.getCloudConfig("q_rpt_sdkappid_bl"),n=this.getCloudConfig("q_rpt_tinyid_wl");Zl(e)||(this.REPORT_INTERVAL=Number(e)),Zl(t)||(this.REPORT_SDKAPPID_BLACKLIST=t.split(",").map((function(e){return Number(e)}))),Zl(n)||(this.REPORT_TINYID_WHITELIST=n.split(","))}},{key:"onCheckTimer",value:function(e){this.isLoggedIn()&&e%this.REPORT_INTERVAL==0&&(this.wholePeriod=!0,this._report())}},{key:"addRequestCount",value:function(){this._avgRTT.addRequestCount()}},{key:"addRTT",value:function(e){this._avgRTT.addRTT(e)}},{key:"addMessageDelay",value:function(e){this._avgE2EDelay.addMessageDelay(e)}},{key:"addTotalCount",value:function(e){this._rateMessageSent.addTotalCount(e)||Ll.w("".concat(this._n,".addTotalCount invalid key:"),e)}},{key:"addSuccessCount",value:function(e){this._rateMessageSent.addSuccessCount(e)||Ll.w("".concat(this._n,".addSuccessCount invalid key:"),e)}},{key:"addFailedCountOfUserSide",value:function(e){this._rateMessageSent.addFailedCountOfUserSide(e)||Ll.w("".concat(this._n,".addFailedCountOfUserSide invalid key:"),e)}},{key:"addCost",value:function(e,t){this._rateMessageSent.addCost(e,t)||Ll.w("".concat(this._n,".addCost invalid key or cost:"),e,t)}},{key:"addFileSize",value:function(e,t){this._rateMessageSent.addFileSize(e,t)||Ll.w("".concat(this._n,".addFileSize invalid key or size:"),e,t)}},{key:"addMessageSequence",value:function(e){this._rateMessageReceived.addMessageSequence(e)||Ll.w("".concat(this._n,".addMessageSequence invalid key:"),e.key)}},{key:"_getQualityItem",value:function(e){var t={},r=i_[this.getNetworkType()];Zl(r)&&(r=8);var i={qualityType:n_[e],timestamp:wl(),networkType:r,extension:""};switch(e){case Km:t=this._avgRTT.getStatResult();break;case Wm:t=this._avgE2EDelay.getStatResult();break;case Ym:case Jm:case $m:case Xm:case Zm:t=this._rateMessageSent.getStatResult(e);break;case Qm:case e_:case t_:t=this._rateMessageReceived.getStatResult(e)}return null===t?null:n(n({},i),t)}},{key:"_report",value:function(e){var t=this,n=[],r=null;Zl(e)?this._qualityItems.forEach((function(e){null!==(r=t._getQualityItem(e))&&(r.reportIndex=t.reportIndex,r.wholePeriod=t.wholePeriod,n.push(r))})):null!==(r=this._getQualityItem(e))&&(r.reportIndex=this.reportIndex,r.wholePeriod=this.wholePeriod,n.push(r)),Ll.d("".concat(this._n,"._report"),n),this._statInfoArr.length>0&&(n=n.concat(this._statInfoArr),this._statInfoArr=[]);var i=this.getModule(Bf),o=i.getSDKAppID(),a=i.getTinyID();xd(this.REPORT_SDKAPPID_BLACKLIST,o)&&!Ld(this.REPORT_TINYID_WHITELIST,a)&&(n=[]),n.length>0&&this._doReport(n)}},{key:"_doReport",value:function(e){var t=this,r={header:VT(this),quality:e};this.request({protocolName:Fg,requestData:n({},r)}).then((function(){t.reportIndex++,t.wholePeriod=!1})).catch((function(n){Ll.w("".concat(t._n,"._doReport, online:").concat(t.getNetworkType()," error:"),n),t._statInfoArr=t._statInfoArr.concat(e),t._flushAtOnce()}))}},{key:"_flushAtOnce",value:function(){var e=this.getModule(qf),t=e.getItem(this.TAG,!1),n=this._statInfoArr,r="".concat(this._n,"._flushAtOnce");if(Bd(t))Ll.l("".concat(r," count:").concat(n.length)),e.setItem(this.TAG,n,!0,!1);else{var i=n.concat(t);i.length>10&&(i=i.slice(0,10)),Ll.l("".concat(r," count:").concat(i.length)),e.setItem(this.TAG,i,!0,!1)}this._statInfoArr=[]}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset")),this._report(),this.reportIndex=0,this.wholePeriod=!1,this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[],this._avgRTT.reset(),this._avgE2EDelay.reset(),this._rateMessageSent.reset(),this._rateMessageReceived.reset()}}]),r}(uh),$M=function(e){c(n,e);var t=m(n);function n(e){var r;return i(this,n),(r=t.call(this,e))._n="WorkerTimerModule",r._isWorkerEnabled=!0,r._workerTimer=null,r._init(),r.getInnerEmitterInstance().on(xI,r._onCloudConfigUpdated,g(r)),r}return a(n,[{key:"isWorkerEnabled",value:function(){return this._isWorkerEnabled&&yl}},{key:"startWorkerTimer",value:function(){Ll.l("".concat(this._n,".startWorkerTimer")),this._workerTimer&&this._workerTimer.postMessage("start")}},{key:"stopWorkerTimer",value:function(){Ll.l("".concat(this._n,".stopWorkerTimer")),this._workerTimer&&this._workerTimer.postMessage("stop")}},{key:"_init",value:function(){if(yl){var e=URL.createObjectURL(new Blob(['let interval = -1;onmessage = function(event) {  if (event.data === "start") {    if (interval > 0) {      clearInterval(interval);    }    interval = setInterval(() => {      postMessage("");    }, 1000)  } else if (event.data === "stop") {    clearInterval(interval);    interval = -1;  }};'],{type:"application/javascript; charset=utf-8"}));this._workerTimer=new Worker(e);var t=this;this._workerTimer.onmessage=function(){t._m.onCheckTimer()}}}},{key:"_onCloudConfigUpdated",value:function(){var e=this.getCloudConfig("enable_worker");Ll.l("".concat(this._n,"._onCloudConfigUpdated enableWorker:").concat(e)),Zl(e)||"1"===e?!this._isWorkerEnabled&&yl&&(this._isWorkerEnabled=!0,this.startWorkerTimer(),this._m.onWorkerTimerEnabled()):this._isWorkerEnabled&&yl&&(this._isWorkerEnabled=!1,this.stopWorkerTimer(),this._m.onWorkerTimerDisabled())}},{key:"terminate",value:function(){Ll.l("".concat(this._n,".terminate")),this._workerTimer&&(this._workerTimer.terminate(),this._workerTimer=null)}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset"))}}]),n}(uh),XM=function(){function e(){i(this,e),this._n="PurchasedFeatureHandler",this._purchasedFeatureMap=new Map}return a(e,[{key:"isValidPurchaseBits",value:function(e){return e&&"string"==typeof e&&e.length>=1&&e.length<=64&&/[01]{1,64}/.test(e)}},{key:"parsePurchaseBits",value:function(e){var t="".concat(this._n,".parsePurchaseBits");if(this.isValidPurchaseBits(e)){this._purchasedFeatureMap.clear();for(var n=null,r=e.length-1,i=0;r>=0;r--,i++)n=i<32?new Iu(0,Math.pow(2,i)).toString():new Iu(Math.pow(2,i-32),0).toString(),"1"===e[r]?this._purchasedFeatureMap.set(n,!0):this._purchasedFeatureMap.set(n,!1)}else Ll.w("".concat(t," invalid purchase bits:").concat(e))}},{key:"hasPurchasedFeature",value:function(e){return!!this._purchasedFeatureMap.get(e)}},{key:"isFeatureEnabled",value:function(e){for(var t=parseInt(e).toString(2),n=void 0,r=!0,i=t.length-1,o=0;i>=0;i--,o++)if("1"===t.charAt(i)&&(n=o<32?new Iu(0,Math.pow(2,o)).toString():new Iu(Math.pow(2,o-32),0).toString(),!this._purchasedFeatureMap.get(n))){r=!1;break}return Ll.l("".concat(this._n,".isFeatureEnabled decimalNumber:").concat(e," binaryString:").concat(t," ret:").concat(r)),hI({enabled:r})}},{key:"clear",value:function(){this._purchasedFeatureMap.clear()}}]),e}(),ZM=function(){function e(t){i(this,e),this._m=t,this._n="CommercialConfigModule",this._expiredTime=0,this._isFetching=!1,this._purchasedFeatureHandler=new XM}return a(e,[{key:"_canFetch",value:function(){return this._getModule(Bf).isLoggedIn()?!this._isFetching&&Date.now()>=this._expiredTime:(this._expiredTime=Date.now()+2e3,!1)}},{key:"onCheckTimer",value:function(e){this._canFetch()&&this.fetchConfig()}},{key:"fetchConfig",value:function(){var e=this,t=this._canFetch(),n="".concat(this._n,".fetchConfig");if(Ll.l("".concat(n," canFetch:").concat(t)),t){var r=this._getModule(zf),i=new a_("fetchCommercialConfig");i.setNetworkType(r.getNetworkType());var o=this._getModule(Bf).getSDKAppID(),a=this._getModule($f);this._isFetching=!0,a.request({protocolName:Xg,requestData:{SDKAppID:o}}).then((function(t){i.setMessage("purchaseBits:".concat(t.data.purchaseBits)).end(),Ll.l("".concat(n," ok.")),e._parseConfig(t.data),e._isFetching=!1})).catch((function(t){r.probe().then((function(e){var n=_(e,2),r=n[0],o=n[1];i.setError(t,r,o).end()})),e._isFetching=!1}))}}},{key:"onPushedConfig",value:function(e){var t="".concat(this._n,".onPushedConfig");Ll.l("".concat(t)),new a_("pushedCommercialConfig").setNetworkType(this._getModule(zf).getNetworkType()).setMessage("purchaseBits:".concat(e.purchaseBits)).end(),this._parseConfig(e)}},{key:"_parseConfig",value:function(e){var t="".concat(this._n,"._parseConfig"),n=e.errorCode,r=e.errorMessage,i=e.purchaseBits,o=e.expiredTime;0===n?(this._purchasedFeatureHandler.parsePurchaseBits(i),this._expiredTime=Date.now()+1e3*o):Zl(n)?(Ll.l("".concat(t," failed. Invalid message format:"),e),this._setExpiredTimeOnResponseError(36e5)):(Ll.e("".concat(t," errorCode:").concat(n," errorMessage:").concat(r)),this._setExpiredTimeOnResponseError(12e4))}},{key:"_setExpiredTimeOnResponseError",value:function(e){this._expiredTime=Date.now()+e}},{key:"canIUse",value:function(e){return this._purchasedFeatureHandler.hasPurchasedFeature(e)}},{key:"isFeatureEnabled",value:function(e){return this._purchasedFeatureHandler.isFeatureEnabled(e)}},{key:"_getModule",value:function(e){return this._m.getModule(e)}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset")),this._expiredTime=0,this._isFetching=!1,this._purchasedFeatureHandler.clear()}}]),e}(),QM=function(e){c(n,e);var t=m(n);function n(e){var r;return i(this,n),(r=t.call(this,e))._m=e,r._n="OfflinePushModule",r._offlinePushPlugin=void 0,r._androidPushConfig={huaweiPushBussinessId:"",xiaomiPushBussinessId:"",xiaomiPushAppId:"",xiaomiPushAppKey:"",meizuPushBussinessId:"",meizuPushAppId:"",meizuPushAppKey:"",vivoPushBussinessId:"",fcmPushBussinessId:"",oppoPushBussinessId:"",oppoPushAppKey:"",oppoPushAppSecret:"",honorPushBussinessId:""},r._deviceToken="",r._businessID=0,r._iosBusinessID=0,r._c2cUnreadCount=0,r._groupUnreadCount=0,r._isWebUniapp=0,r}return a(n,[{key:"registerPlugin",value:function(e){if(Xu){this._offlinePushPlugin=e["tim-offline-push-plugin"];var t=e.offlinePushConfig||{},n=t.huaweiBusinessID,r=t.xiaomiBusinessID,i=t.xiaomiAppID,o=t.xiaomiAppKey,a=t.meizuBusinessID,s=t.meizuAppID,c=t.meizuAppKey,u=t.vivoBusinessID,l=t.oppoBusinessID,d=t.oppoAppKey,p=t.oppoAppSecret,f=t.honorBusinessID,h=t.iosBusinessID;this._androidPushConfig.huaweiPushBussinessId=n,this._androidPushConfig.xiaomiPushBussinessId=r,this._androidPushConfig.xiaomiPushAppId=i,this._androidPushConfig.xiaomiPushAppKey=o,this._androidPushConfig.meizuPushBussinessId=a,this._androidPushConfig.meizuPushAppId=s,this._androidPushConfig.meizuPushAppKey=c,this._androidPushConfig.vivoPushBussinessId=u,this._androidPushConfig.oppoPushBussinessId=l,this._androidPushConfig.oppoPushAppKey=d,this._androidPushConfig.oppoPushAppSecret=p,this._androidPushConfig.honorPushBussinessId=f,new a_("registerPlugin").setMessage("tim-offline-push-plugin").setMoreMessage("isExist:".concat(!Zl(this._offlinePushPlugin))).end(!0),Ll.l("".concat(this._n,".").concat("registerPlugin"," ok. offlinePushConfig:").concat(JSON.stringify(e.offlinePushConfig))),this._iosBusinessID=h,this._setAppShowListener()}else this.outputWarning("OfflinePushInUniapp")}},{key:"init",value:function(){this._isWebUniapp=this.getUniAppPlatform(),this._getDeviceToken()}},{key:"_getDeviceToken",value:function(){var e=this,t="".concat(this._n,".").concat("_getDeviceToken");if(ed(this._offlinePushPlugin.getDeviceToken)){var n="androidPushConfig:".concat(JSON.stringify(this._androidPushConfig),", iosBusinessID:").concat(this._iosBusinessID);Ll.l("".concat(t," start. ").concat(n)),new a_("_getDeviceToken").setMessage("".concat(n)).end(!0),this._offlinePushPlugin.getDeviceToken(this._androidPushConfig,(function(r){var i=new a_("getDeviceTokenRes"),o=r.code,a=r.msg;if(0===o){var s=r.data,c=s.deviceToken,u=s.deviceBrand,l=s.deviceType,d=s.bussinessId;e._deviceToken=c,e._businessID=d||e._iosBusinessID,n="deviceToken:".concat(c,", deviceBrand:").concat(u||l,", businessID:").concat(e._businessID),Ll.l("".concat(t," ok. ").concat(n)),i.setMessage(n).end(!0),e._setToken()}else i.setMessage("code:".concat(o,", msg:").concat(a)).end(!0),Ll.e("".concat(t," failed. error:"),r)}))}else Ll.e("".concat(t," getDeviceToken is not a function"))}},{key:"canIUseOfflinePush",value:function(){return Xu&&!Zl(this._offlinePushPlugin)}},{key:"_setAppShowListener",value:function(){var e=this,t="".concat(this._n,".").concat("_setAppShowListener");Zl(this._offlinePushPlugin)?Ll.e("".concat(t," offlinePushPlugin is undefined")):ed(this._offlinePushPlugin.setAppShowListener)?(new a_("_setAppShowListener").end(!0),Ll.l("".concat(t," start")),this._offlinePushPlugin.setAppShowListener((function(n){var r=(n||{}).appShow;new a_("setAppShowListenerRes").setMessage("appShow:".concat(r)).end(!0),Ll.l("".concat(t," ok. appShow:").concat(r)),e._m.isReady()&&(0===r?(e._getConvUnreadCount(),e._onBackground()):1===r&&e._onForeground())}))):Ll.e("".concat(t," setAppShowListener is not a function"))}},{key:"getDeviceBrand",value:function(){if(!Zl(this._offlinePushPlugin)&&ed(this._offlinePushPlugin.getDeviceType)){var e=(this._offlinePushPlugin.getDeviceType()||{}).deviceType;return Ll.l("".concat(this._n,".getDeviceBrand ok. deviceType:").concat(e)),e}}},{key:"_setToken",value:function(){var e,t=this,n="".concat(this._n,"._setToken"),r=this.getModule(Bf),i=1,o="",a="";Bd(this._deviceToken)&&(i=0);var s=this.getUniAppPlatform(),c=this.getDeviceBrand();s===Cu.IOS||s===Cu.IPAD||s===Cu.MAC?a=this._deviceToken:s===Cu.ANDROID&&(o=this._deviceToken);var u=new a_("offlinePushSetToken");return e="deviceToken:".concat(a||o,", businessID:").concat(this._businessID,", ")+"deviceBrand:".concat(c,", isWebUniapp:").concat(this._isWebUniapp,", pushMsg:").concat(i,", platform:").concat(s),u.setMessage("".concat(e)),Ll.l("".concat(n," ").concat(e)),this.request({protocolName:lv,requestData:{tokenID:o,pushMsg:i,sdkAppID:r.getSDKAppID(),businessID:parseInt(this._businessID),deviceBrand:c,deviceToken:a,isWebUniapp:this._isWebUniapp}}).then((function(e){return u.end(),Ll.l("".concat(n," ok")),e})).catch((function(e){return t.probeNetwork().then((function(t){var n=_(t,2),r=n[0],i=n[1];u.setError(e,r,i).end()})),Ll.e("".concat(n," failed. error:"),e),gI(e)}))}},{key:"_getConvUnreadCount",value:function(){var e=this;this._c2cUnreadCount=0,this._groupUnreadCount=0,this.getModule(Ff).getLocalConversationList().forEach((function(t){t.type===bi.CONV_C2C&&(e._c2cUnreadCount+=t.unreadCount),t.type===bi.CONV_GROUP&&(e._groupUnreadCount+=t.unreadCount)}))}},{key:"_onBackground",value:function(){var e=this,t="".concat(this._n,".").concat("_onBackground"),n=new a_("_onBackground");this.request({protocolName:cv,requestData:{c2cUnreadCount:this._c2cUnreadCount,groupUnreadCount:this._groupUnreadCount,isWebUniapp:this._isWebUniapp}}).then((function(r){return n.setMessage("c2cUnreadCount: ".concat(e._c2cUnreadCount,", groupUnreadCount: ").concat(e._groupUnreadCount)).end(),Ll.l("".concat(t," ok")),r})).catch((function(r){e.probeNetwork().then((function(e){var t=_(e,2),i=t[0],o=t[1];n.setError(r,i,o).end()})),Ll.e("".concat(t," failed. error:"),r)}))}},{key:"_onForeground",value:function(){var e=this,t="".concat(this._n,".").concat("_onForeground"),n=new a_("_onForeground");this.request({protocolName:uv,requestData:{isWebUniapp:this._isWebUniapp}}).then((function(e){return n.end(),Ll.l("".concat(t," ok")),e})).catch((function(r){e.probeNetwork().then((function(e){var t=_(e,2),i=t[0],o=t[1];n.setError(r,i,o).end()})),Ll.e("".concat(t," failed. error:"),r)}))}},{key:"getUniAppPlatform",value:function(){var e=uni.getSystemInfoSync().platform,t=this.getDeviceBrand();return"ios"===e?Cu.IOS:"android"===e?Cu.ANDROID:1002===t?Cu.IPAD:1001===t?Cu.MAC:void 0}},{key:"reset",value:function(){this._deviceToken="",this._businessID=0,this._c2cUnreadCount=0,this._groupUnreadCount=0,this._isWebUniapp=0,Ll.l("".concat(this._n,".reset"))}}]),n}(uh),ek=function(e){c(n,e);var t=m(n);function n(e){var r;return i(this,n),(r=t.call(this,e))._n="ProfanityFilterModule",r._plugin=null,r._filterConfigMap=new Map,r._startIndex=0,r._version=0,r._canIUseLexicon=!1,r._isFetching=!1,r._expiredTime=0,r}return a(n,[{key:"init",value:function(){var e=this.getModule(Yf).getPlugin("tim-profanity-filter-plugin");e?(this._plugin=new e({logger:Ll,isArray:Xl,isMap:zl,isDevMode:this.isDevMode()}),this._getLexicon()):this.outputWarning("ProfanityPluginNotFound")}},{key:"onCheckTimer",value:function(){this._plugin&&this._canIUseLexicon&&this.isLoggedIn()&&!this._isFetching&&Date.now()>=this._expiredTime&&this._getLexicon()}},{key:"filterMessage",value:function(e,t){var n=!0;if(!this._plugin||!this._canIUseLexicon)return n;if(t&&t.messageControlInfo&&!0===t.messageControlInfo.excludedFromContentModeration)return n;var r=e.type,i=e.conversationType;if(r!==bi.MSG_TEXT&&r!==bi.MSG_CUSTOM)return n;var o,a="".concat(this._n,".filterMessage");if(Ll.l("".concat(a)),r===bi.MSG_TEXT){if(i===bi.CONV_C2C?o=Pu:i===bi.CONV_GROUP&&(o=Uu),!this._isConfigOn(o))return n;var s=this._plugin.filter(e.payload.text),c=s.type,u=s.modifiedText;1===c?n=!1:2===c&&(e.payload.text=u)}else if(r===bi.MSG_CUSTOM){if(i===bi.CONV_C2C?o=ju:i===bi.CONV_GROUP&&(o=Gu),!this._isConfigOn(o))return n;var l=this._plugin.filter(e.payload.data),d=this._plugin.filter(e.payload.description),p=this._plugin.filter(e.payload.extension);1===l.type||1===d.type||1===p.type?n=!1:(2===l.type&&(e.payload.data=l.modifiedText),2===d.type&&(e.payload.description=d.modifiedText),2===p.type&&(e.payload.extension=p.modifiedText))}return Ll.l("".concat(a," done. isAllowedToSend:").concat(n)),n}},{key:"filterText",value:function(e,t){var n="".concat(this._n,".filterText"),r={isAllowedToSend:!0,modifiedText:e};if(!this._plugin||!this._canIUseLexicon)return r;if(!this._isConfigOn(t))return r;Ll.l("".concat(n));var i=this._plugin.filter(e),o=i.type,a=i.modifiedText;return 1===o?r.isAllowedToSend=!1:2===o&&(r.modifiedText=a),Ll.l("".concat(n," done. ret:"),r),r}},{key:"_getLexicon",value:function(){var e=this,t=new a_("profanityFilter"),n="".concat(this._n,"._getLexicon");this._isFetching=!0,this.request({protocolName:dv,requestData:{startIndex:this._startIndex,version:this._version}}).then((function(r){var i=r.data,o=i.errorInfo,a=i.filterConfig,s=i.lexicon,c=i.strToken,u=i.completeFlag,l=i.nextStartIndex,d=i.version,p=i.expiredTime,f=o.errorCode,h=o.errorMessage;return 0!==f?(e._isFetching=!1,Ll.w("".concat(n," failed. error:"),o),void t.setCode(f).setMessage(h).end()):(e._onFilterConfig(a),e._getToken(c),1===u?(Ll.l("".concat(n," done. version:").concat(d," expiredTime:").concat(p)),e._version=d,e._canIUseLexicon=!0,e._isFetching=!1,e._expiredTime=Date.now()+1e3*p,void e._plugin.onLexiconCompleted(s)):(e._startIndex=l,e._plugin.onLexiconSliced(s),void e._getLexicon()))})).catch((function(r){e.probeNetwork().then((function(e){var n=_(e,2),i=n[0],o=n[1];t.setError(r,i,o).end()})),e._isFetching=!1,Ll.l("".concat(n," failed. error:"),r)}))}},{key:"_onFilterConfig",value:function(e){var t=this;Bd(e)||(this._filterConfigMap.clear(),Object.keys(e).forEach((function(n){t._filterConfigMap.set(n,e[n])})),Ll.l("".concat(this._n,"._onFilterConfig. keys:").concat(Array.from(this._filterConfigMap.keys())," values:").concat(Array.from(this._filterConfigMap.values()))))}},{key:"_isConfigOn",value:function(e){return 1===this._filterConfigMap.get(e)}},{key:"_getToken",value:function(e){if(Yl(e)){var t=e.length,n="";if(t%2==0)for(var r=0;r<=t-1;r+=2)n+=e[r+1],n+=e[r];else{for(var i=0;i<t-1;i+=2)n+=e[i+1],n+=e[i];n+=e[t-1]}this._plugin.onToken(n)}}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset")),this._plugin&&(this._plugin.reset(),this._plugin=null),this._filterConfigMap.clear(),this._startIndex=0,this._version=0,this._canIUseLexicon=!1,this._isFetching=!1,this._expiredTime=0}}]),n}(uh),tk=function(){function e(t){i(this,e),this._m=t,this._n="TransCmdModule"}return a(e,[{key:"sendTRTCCustomData",value:function(e){return this._trans(n({serv:Lu.NAME.TUIROOM_SVR},e))}},{key:"_trans",value:function(e){Ll.d("".concat(this._n,"._trans. options:").concat(JSON.stringify(e)));var t=e.serv,n=e.data;return this._m.getModule($f).trans({servcmd:"".concat(t,".*"),data:Yl(n)?JSON.parse(n):n})}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset"))}}]),e}(),nk=rt.f,rk=Ht.f,ik=Tt.enforce,ok=Ue("match"),ak=A.RegExp,sk=ak.prototype,ck=A.SyntaxError,uk=z(to),lk=z(sk.exec),dk=z("".charAt),pk=z("".replace),fk=z("".indexOf),hk=z("".slice),gk=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,vk=/a/g,mk=/a/g,_k=new ak(vk)!==vk,yk=oo.MISSED_STICKY,bk=oo.UNSUPPORTED_Y,Ik=x&&(!_k||yk||so||uo||R((function(){return mk[ok]=!1,ak(vk)!=vk||ak(mk)==mk||"/a/i"!=ak(vk,"i")})));if(tn("RegExp",Ik)){for(var Tk=function(e,t){var n,r,i,o,a,s,c=oe(sk,this),u=Ko(e),l=void 0===t,d=[],p=e;if(!c&&u&&l&&e.constructor===Tk)return e;if((u||oe(sk,e))&&(e=e.source,l&&(t="flags"in p?p.flags:uk(p))),e=void 0===e?"":pn(e),t=void 0===t?"":pn(t),p=e,so&&"dotAll"in vk&&(r=!!t&&fk(t,"s")>-1)&&(t=pk(t,/s/g,"")),n=t,yk&&"sticky"in vk&&(i=!!t&&fk(t,"y")>-1)&&bk&&(t=pk(t,/y/g,"")),uo&&(e=(o=function(e){for(var t,n=e.length,r=0,i="",o=[],a={},s=!1,c=!1,u=0,l="";r<=n;r++){if("\\"===(t=dk(e,r)))t+=dk(e,++r);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:lk(gk,hk(e,r+1))&&(r+=2,c=!0),i+=t,u++;continue;case">"===t&&c:if(""===l||Oe(a,l))throw new ck("Invalid capture group name");a[l]=!0,o[o.length]=[l,u],c=!1,l="";continue}c?l+=t:i+=t}return[i,o]}(e))[0],d=o[1]),a=ji(ak(e,t),c?this:sk,Tk),(r||i||d.length)&&(s=ik(a),r&&(s.dotAll=!0,s.raw=Tk(function(e){for(var t,n=e.length,r=0,i="",o=!1;r<=n;r++)"\\"!==(t=dk(e,r))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+dk(e,++r);return i}(e),n)),i&&(s.sticky=!0),d.length&&(s.groups=d)),e!==p)try{it(a,"source",""===p?"(?:)":p)}catch(Lk){}return a},Ck=function(e){e in Tk||nk(Tk,e,{configurable:!0,get:function(){return ak[e]},set:function(t){ak[e]=t}})},Sk=rk(ak),Ek=0;Sk.length>Ek;)Ck(Sk[Ek++]);sk.constructor=Tk,Tk.prototype=sk,kt(A,"RegExp",Tk)}ws("RegExp");var Mk=function(){function e(t){i(this,e),this._m=t,this._n="ErrorMessageModule",this.TIM_ERROR_ASSISTANCE="tim_error_assistance",this.STORAGE_EXPIRES_TIME=6048e5,this._map=new Map,this._init()}return a(e,[{key:"_init",value:function(){var e=this._getStorageModule().getItem(this.TIM_ERROR_ASSISTANCE,!1);if(e){var t=JSON.parse(e);this._needToUpdate(t)?this._fetch():this._fillMap(t.message)}else this._fetch()}},{key:"_needToUpdate",value:function(e){var t=e.localSavedTime,n=e.localSavedVersion,r=t&&(new Date).getTime()-t>=this.STORAGE_EXPIRES_TIME,i=!n||"2.26.6"!==n;return Ll.l("".concat(this._n,"._needToUpdate isTimeout:").concat(r," isDifferentVersion:").concat(i)),r||i}},{key:"_fetch",value:function(){if(!this._m.getModule(Bf).isPrivateNetWork()){var e="https://web.sdk.qcloud.com/im/download/error-message/0.0.1/tim-error-message.txt",t="application/x-www-form-urlencoded;charset=UTF-8",n="".concat(this._n,"._fetch ok in"),r=this;if(Qu)tl.request({url:e,method:"GET",timeout:3e3,header:{"content-type":t},dataType:"text",success:function(e){r._fillAndSave(e.data),Ll.l("".concat(n," mini program"))},fail:function(){}});else{var i=new XMLHttpRequest,o=setTimeout((function(){i.abort()}),3e3);i.onreadystatechange=function(){4===i.readyState&&(clearTimeout(o),200!==i.status&&304!==i.status||(Ll.l("".concat(n," browser")),r._fillAndSave(i.responseText)))},i.open("GET",e,!0),i.setRequestHeader("Content-type",t),i.send()}}}},{key:"_fillAndSave",value:function(e){this._fillMap(e),this._getStorageModule().setItem(this.TIM_ERROR_ASSISTANCE,JSON.stringify({message:e,localSavedTime:(new Date).getTime(),localSavedVersion:"2.26.6"}),!0,!1)}},{key:"_getStorageModule",value:function(){return this._m.getModule(qf)}},{key:"_fillMap",value:function(e){this._map.clear();for(var t,n,r,i=e.split(";\n"),o=i.length,a=new RegExp(/'/g),s=0;s<o;s++)if(t=i[s].indexOf(":"),n=i[s].slice(0,t),r=i[s].slice(t+1,i[s].length),!n.startsWith("//")){if(Zl(r))continue;this._map.set(n,r.replace(a,""))}}},{key:"get",value:function(e){var t=e.isIntl,n=e.key,r=e.replacement1,i=e.replacement2,o="".concat(n,t?"_en":"_cn");!this._map.has(o)&&this._map.has(n)&&(o=n);var a="";return this._map.has(o)?(a=this._map.get(o),Zl(r)||(a=a.replace("$replacement1",r)),Zl(i)||(a=a.replace("$replacement2",i)),a):a}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset"))}}]),e}(),kk=function(){function e(t){i(this,e);var n=new a_("sdkConstruct");this._n="ModuleManager",this._isReady=!1,this._reason=_v,this._startLoginTs=0,this._moduleMap=new Map,this._innerEmitter=null,this._outerEmitter=null,this._checkCount=0,this._checkTimer=-1,this._moduleMap.set(Bf,new LT(this,t)),this._moduleMap.set(rh,new ZM(this)),this._moduleMap.set(Qf,new qM(this)),this._moduleMap.set(eh,new $M(this)),this._moduleMap.set(nh,new JM(this)),this._moduleMap.set(Xf,new LM(this)),this._moduleMap.set($f,new FM(this)),this._moduleMap.set(Rf,new NT(this)),this._moduleMap.set(xf,new nC(this)),this._moduleMap.set(Lf,new rC(this)),this._moduleMap.set(sh,new iC(this)),this._moduleMap.set(Nf,new xT(this)),this._moduleMap.set(Pf,new vI(this)),this._moduleMap.set(Ff,new tT(this)),this._moduleMap.set(jf,new IT(this)),this._moduleMap.set(Gf,new CT(this)),this._moduleMap.set(Vf,new kT(this)),this._moduleMap.set(qf,new UT(this)),this._moduleMap.set(ch,new Mk(this)),this._moduleMap.set(Hf,new FT(this)),this._moduleMap.set(zf,new zT(this)),this._moduleMap.set(Kf,new WT(this)),this._moduleMap.set(Wf,new JT(this)),this._moduleMap.set(Yf,new oC(this)),this._moduleMap.set(Jf,new aC(this)),this._moduleMap.set(Zf,new BM(this)),this._moduleMap.set(th,new HM(this)),this._moduleMap.set(ih,new QM(this)),this._moduleMap.set(oh,new ek(this)),this._moduleMap.set(ah,new tk(this)),this._eventThrottleMap=new Map;var r=t.instanceID,o=t.oversea,a=t.SDKAppID,s="instanceID:".concat(r," SDKAppID:").concat(a," host:").concat(kd()," oversea:").concat(o," inBrowser:").concat(el," inMiniApp:").concat(Qu)+" workerAvailable:".concat(yl," UserAgent:").concat(rl);a_.bindEventStatModule(this._moduleMap.get(Hf)),n.setMessage("".concat(s," ").concat(function(){var e="";if(Qu)try{var t=tl.getSystemInfoSync(),n=t.model,r=t.version,i=t.system,o=t.platform,a=t.SDKVersion;e="model:".concat(n," version:").concat(r," system:").concat(i," platform:").concat(o," SDKVersion:").concat(a)}catch(Lk){e=""}return e}())).end(),Ll.i("SDK ".concat(s)),dI.prototype._getErrorMessage=this.getErrorMessage.bind(this),this._readyList=void 0,this._ssoLogForReady=null,this._initReadyList()}return a(e,[{key:"_startTimer",value:function(){var e=this._moduleMap.get(eh),t=e.isWorkerEnabled();Ll.l("".concat(this._n,".startTimer isWorkerEnabled:").concat(t," seed:").concat(this._checkTimer)),t?e.startWorkerTimer():this._startMainThreadTimer()}},{key:"_startMainThreadTimer",value:function(){this._checkTimer<0&&(this._checkTimer=setInterval(this.onCheckTimer.bind(this),1e3)),Ll.l("".concat(this._n,"._startMainThreadTimer seed:").concat(this._checkTimer))}},{key:"stopTimer",value:function(){var e=this._moduleMap.get(eh),t=e.isWorkerEnabled();Ll.l("".concat(this._n,".stopTimer isWorkerEnabled:").concat(t," seed:").concat(this._checkTimer)),t?e.stopWorkerTimer():this._stopMainThreadTimer()}},{key:"_stopMainThreadTimer",value:function(){Ll.l("".concat(this._n,"._stopMainThreadTimer")),this._checkTimer>0&&(clearInterval(this._checkTimer),this._checkTimer=-1,this._checkCount=0)}},{key:"_stopMainThreadSocket",value:function(){Ll.l("".concat(this._n,"._stopMainThreadSocket"));var e=this._moduleMap.get(Xf);e.setIsWorkerEnabled(!0),e.reConnect()}},{key:"_startMainThreadSocket",value:function(){Ll.l("".concat(this._n,"._startMainThreadSocket"));var e=this._moduleMap.get(Xf);e.setIsWorkerEnabled(!1),e.reConnect()}},{key:"onWorkerTimerEnabled",value:function(){Ll.l("".concat(this._n,".onWorkerTimerEnabled, disable main thread timer and socket")),this._stopMainThreadTimer(),this._stopMainThreadSocket()}},{key:"onWorkerTimerDisabled",value:function(){Ll.l("".concat(this._n,".onWorkerTimerDisabled, enable main thread timer and socket")),this._startMainThreadTimer(),this._startMainThreadSocket()}},{key:"onCheckTimer",value:function(){this._checkCount+=1;var e,t=E(this._moduleMap);try{for(t.s();!(e=t.n()).done;){var n=_(e.value,2)[1];n.onCheckTimer&&n.onCheckTimer(this._checkCount)}}catch(i){t.e(i)}finally{t.f()}}},{key:"_initReadyList",value:function(){var e=this;this._readyList=[this._moduleMap.get(Rf),this._moduleMap.get(Ff)],this._readyList.forEach((function(t){t.ready((function(){return e._onModuleReady()}))}))}},{key:"_onModuleReady",value:function(){var e=!0;if(this._readyList.forEach((function(t){t.isReady()||(e=!1)})),e&&!this._isReady){this._isReady=!0,this._outerEmitter.emit(yi.SDK_READY);var t=Date.now()-this._startLoginTs;Ll.w("SDK is ready. cost ".concat(t," ms")),this._startLoginTs=Date.now();var n=this._moduleMap.get(zf).getNetworkType(),r=this._ssoLogForReady.getStartTs()+kl;this._ssoLogForReady.setNetworkType(n).setMessage(t).start(r).end()}}},{key:"login",value:function(){0===this._startLoginTs&&(Ol(),this._startLoginTs=Date.now(),this._startTimer(),this._moduleMap.get(zf).start(),this._ssoLogForReady=new a_("sdkReady"),this._reason=Rm)}},{key:"onLoginFailed",value:function(){this._startLoginTs=0}},{key:"getOuterEmitterInstance",value:function(){return null===this._outerEmitter&&(this._outerEmitter=new KT,fI(this._outerEmitter),this._outerEmitter._emit=this._outerEmitter.emit,this._outerEmitter.emit=function(e,t){var n=this;if(e===yi.CONVERSATION_LIST_UPDATED||e===yi.FRIEND_LIST_UPDATED||e===yi.GROUP_LIST_UPDATED||e===yi.TOTAL_UNREAD_MESSAGE_COUNT_UPDATED)if(this._eventThrottleMap.has(e)){var r=Date.now(),i=this._eventThrottleMap.get(e);r-i.last<1e3?(i.timeoutID&&clearTimeout(i.timeoutID),i.timeoutID=setTimeout((function(){i.last=r,n._outerEmitter._emit.apply(n._outerEmitter,[e,{name:e,data:n._getEventData(e)}])}),500)):(i.last=r,this._outerEmitter._emit.apply(this._outerEmitter,[e,{name:e,data:this._getEventData(e)}]))}else this._eventThrottleMap.set(e,{last:Date.now(),timeoutID:-1}),this._outerEmitter._emit.apply(this._outerEmitter,[e,{name:e,data:this._getEventData(e)}]);else this._outerEmitter._emit.apply(this._outerEmitter,[e,{name:e,data:arguments[1]}])}.bind(this)),this._outerEmitter}},{key:"_getEventData",value:function(e){return e===yi.CONVERSATION_LIST_UPDATED?this._moduleMap.get(Ff).getLocalConversationList():e===yi.FRIEND_LIST_UPDATED?this._moduleMap.get(Uf).getLocalFriendList(!1):e===yi.GROUP_LIST_UPDATED?this._moduleMap.get(jf).getLocalGroupList():e===yi.TOTAL_UNREAD_MESSAGE_COUNT_UPDATED?this._moduleMap.get(Ff).getTotalUnreadMessageCount():void 0}},{key:"getInnerEmitterInstance",value:function(){return null===this._innerEmitter&&(this._innerEmitter=new KT,this._innerEmitter._emit=this._innerEmitter.emit,this._innerEmitter.emit=function(e,t){var n;n=$l(arguments[1])&&arguments[1].data?[e,{name:arguments[0],data:arguments[1].data}]:[e,{name:arguments[0],data:arguments[1]}],this._innerEmitter._emit.apply(this._innerEmitter,n)}.bind(this)),this._innerEmitter}},{key:"hasModule",value:function(e){return this._moduleMap.has(e)}},{key:"getModule",value:function(e){return this._moduleMap.get(e)}},{key:"isReady",value:function(){return this._isReady}},{key:"isIntl",value:function(){return this.getModule(Bf).isIntl()}},{key:"getNotReadyReason",value:function(){return this._reason}},{key:"setNotReadyReason",value:function(e){this._reason=e}},{key:"getErrorMessage",value:function(e,t,n){return this._moduleMap.get(ch).get({key:e,replacement1:t,replacement2:n,isIntl:this.isIntl()})}},{key:"outputWarning",value:function(e,t,n){var r=this.getErrorMessage(e,t,n);r&&Ll.w(r)}},{key:"onError",value:function(e){var t="code:".concat(e.code," message:").concat(e.message);Ll.w("Oops! ".concat(t)),new a_("error").setMessage(t).setNetworkType(this.getModule(zf).getNetworkType()).setLevel("error").end(),this.getOuterEmitterInstance().emit(yi.ERROR,e)}},{key:"restartTimer",value:function(){Ll.l("".concat(this._n,".restartTimer")),this.stopTimer(),this._startTimer(),this.getModule(jf).restartPolling()}},{key:"reset",value:function(){Ll.l("".concat(this._n,".reset")),Ol();var e,t=E(this._moduleMap);try{for(t.s();!(e=t.n()).done;){var n=_(e.value,2)[1];n.reset&&n.reset()}}catch(s){t.e(s)}finally{t.f()}this._startLoginTs=0,this._initReadyList(),this._isReady=!1,this.stopTimer(),this._outerEmitter.emit(yi.SDK_NOT_READY);var r,i=E(this._eventThrottleMap);try{for(i.s();!(r=i.n()).done;){var o=_(r.value,2)[1];o.timeoutID&&clearTimeout(o.timeoutID)}}catch(s){i.e(s)}finally{i.f()}this._eventThrottleMap.clear()}}]),e}(),wk=function(){function e(t){i(this,e),this._funcMap=new Map,this._m=t}return a(e,[{key:"defense",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if("string"!=typeof e)return null;if(0===e.length)return null;if("function"!=typeof t)return null;if(this._funcMap.has(e)&&this._funcMap.get(e).has(t))return this._funcMap.get(e).get(t);this._funcMap.has(e)||this._funcMap.set(e,new Map);var r=null;return this._funcMap.get(e).has(t)?r=this._funcMap.get(e).get(t):(r=this._pack(e,t,n),this._funcMap.get(e).set(t,r)),r}},{key:"defenseOnce",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return"function"!=typeof t?null:this._pack(e,t,n)}},{key:"find",value:function(e,t){return"string"!=typeof e||0===e.length||"function"!=typeof t?null:this._funcMap.has(e)&&this._funcMap.get(e).has(t)?this._funcMap.get(e).get(t):(this._m.outputWarning("ListenerFnNotFound",e),null)}},{key:"delete",value:function(e,t){return"function"==typeof t&&!!this._funcMap.has(e)&&!!this._funcMap.get(e).has(t)&&(this._funcMap.get(e).delete(t),0===this._funcMap.get(e).size&&this._funcMap.delete(e),!0)}},{key:"_pack",value:function(e,t,n){var r=this;return function(){try{t.apply(n,Array.from(arguments))}catch(u){var i=Object.values(yi).indexOf(e),o="CallbackError";if(-1!==i){var a=Object.keys(yi)[i];r._m.outputWarning(o,a,u)}var s=new a_(o);s.setMessage("eventName:".concat(e)).setMoreMessage(u.message).end()}}}}]),e}(),Ok=function(){function e(t){i(this,e);var n={SDKAppID:t.SDKAppID,unlimitedAVChatRoom:t.unlimitedAVChatRoom||!1,scene:t.scene||"",oversea:t.oversea||!1,instanceID:Md(),devMode:t.devMode||!1,proxyServer:t.proxyServer||void 0};this._m=new kk(n),this._safetyCallbackFactory=new wk(this._m)}return a(e,[{key:"onError",value:function(e){this._m.onError(e)}},{key:"login",value:function(e){return this._m.login(),this._getModule(Rf).login(e)}},{key:"logout",value:function(){var e=this;return this._getModule(Rf).logout().then((function(t){return e._m.reset(),t}))}},{key:"isReady",value:function(){return this._m.isReady()}},{key:"isIntl",value:function(){return this._m.isIntl()}},{key:"getNotReadyReason",value:function(){return this._m.getNotReadyReason()}},{key:"getErrorMessage",value:function(e,t,n){return this._m.getErrorMessage(e,t,n)}},{key:"_getModule",value:function(e){return this._m.getModule(e)}},{key:"destroy",value:function(){var e=this;return this.logout().finally((function(){e._m.stopTimer(),e._getModule(eh).terminate(),e._getModule(Xf).dealloc();var t=e._m.getOuterEmitterInstance(),n=e._getModule(Bf);t.emit(yi.SDK_DESTROY,{SDKAppID:n.getSDKAppID()})}))}},{key:"on",value:function(e,t,n){Ll.d("on","eventName:".concat(e)),this._m.getOuterEmitterInstance().on(e,this._safetyCallbackFactory.defense(e,t,n),n)}},{key:"once",value:function(e,t,n){Ll.d("once","eventName:".concat(e)),this._m.getOuterEmitterInstance().once(e,this._safetyCallbackFactory.defenseOnce(e,t,n),n||this)}},{key:"off",value:function(e,t,n,r){Ll.d("off","eventName:".concat(e));var i=this._safetyCallbackFactory.find(e,t);null!==i&&(this._m.getOuterEmitterInstance().off(e,i,n,r),this._safetyCallbackFactory.delete(e,t))}},{key:"registerPlugin",value:function(e){Zl(e["tim-offline-push-plugin"])?this._getModule(Yf).registerPlugin(e):this._getModule(ih).registerPlugin(e)}},{key:"setLogLevel",value:function(e){if(e<=0){var t=this.getErrorMessage("TIM_ASCII_ART");t&&console.log(t);var n=this.getErrorMessage("API_REFER");n&&(Gd()?console.log("%c ".concat("IM SDK API ->"," %c"),"background:#ff9d00; padding:1px; border-radius:3px; color: #fff","background:transparent",n):console.log("IM SDK API ->",n));var r=this.getErrorMessage("DOCS_GUIDE");r&&console.log(r)}Ll.setLevel(e)}},{key:"createTextMessage",value:function(e){return this._getModule(xf).createTextMessage(e)}},{key:"createTextAtMessage",value:function(e){return this._getModule(xf).createTextMessage(e)}},{key:"createImageMessage",value:function(e){return this._getModule(xf).createImageMessage(e)}},{key:"createAudioMessage",value:function(e){return this._getModule(xf).createAudioMessage(e)}},{key:"createVideoMessage",value:function(e){return this._getModule(xf).createVideoMessage(e)}},{key:"createCustomMessage",value:function(e){return this._getModule(xf).createCustomMessage(e)}},{key:"createFaceMessage",value:function(e){return this._getModule(xf).createFaceMessage(e)}},{key:"createFileMessage",value:function(e){return this._getModule(xf).createFileMessage(e)}},{key:"createLocationMessage",value:function(e){return this._getModule(xf).createLocationMessage(e)}},{key:"createMergerMessage",value:function(e){return this._getModule(xf).createMergerMessage(e)}},{key:"downloadMergerMessage",value:function(e){return e.type!==bi.MSG_MERGER?gI({code:Wv}):Bd(e.payload.downloadKey)?gI({code:Yv}):this._getModule(xf).downloadMergerMessage(e).catch((function(e){return gI({code:Jv})}))}},{key:"createForwardMessage",value:function(e){return this._getModule(xf).createForwardMessage(e)}},{key:"sendMessage",value:function(e,t){return e instanceof uI?this._getModule(xf).sendMessageInstance(e,t):gI({code:Sv})}},{key:"callExperimentalAPI",value:function(e,t){return"sendComboMessage"===e?this._getModule(sh).sendMessage(t):"handleGroupInvitation"===e?this._getModule(jf).handleGroupInvitation(t):"isCommercialAbilityEnabled"===e?this._getModule(rh).isFeatureEnabled(t):"isIntl"===e?this.isIntl():"sendTRTCCustomData"===e?this._getModule(ah).sendTRTCCustomData(t):gI({code:km})}},{key:"revokeMessage",value:function(e){return this._getModule(xf).revokeMessage(e)}},{key:"resendMessage",value:function(e){return this._getModule(xf).resendMessage(e)}},{key:"deleteMessage",value:function(e){return this._getModule(xf).deleteMessage(e)}},{key:"translateText",value:function(e){return this._getModule(xf).translateText(e)}},{key:"setMessageExtensions",value:function(e,t){return this._getModule(Lf).setMessageExtensions(e,t)}},{key:"getMessageExtensions",value:function(e){return this._getModule(Lf).getMessageExtensions(e)}},{key:"deleteMessageExtensions",value:function(e,t){return this._getModule(Lf).deleteMessageExtensions(e,t)}},{key:"modifyMessage",value:function(e){return this._getModule(xf).modifyRemoteMessage(e)}},{key:"getMessageList",value:function(e){return this._getModule(Ff).getMessageList(e)}},{key:"getMessageListHopping",value:function(e){return this._getModule(Ff).getMessageListHopping(e)}},{key:"sendMessageReadReceipt",value:function(e){return this._getModule(Ff).sendReadReceipt(e)}},{key:"getMessageReadReceiptList",value:function(e){return this._getModule(Ff).getReadReceiptList(e)}},{key:"getGroupMessageReadMemberList",value:function(e){return this._getModule(jf).getReadReceiptDetail(e)}},{key:"findMessage",value:function(e){return this._getModule(Ff).findMessage(e)}},{key:"setMessageRead",value:function(e){return this._getModule(Ff).setMessageRead(e)}},{key:"getConversationList",value:function(e){return this._getModule(Ff).getConversationList(e)}},{key:"getConversationProfile",value:function(e){return this._getModule(Ff).getConversationProfile(e)}},{key:"deleteConversation",value:function(e){return this._getModule(Ff).deleteConversation(e)}},{key:"clearHistoryMessage",value:function(e){return this._getModule(Ff).clearHistoryMessage(e)}},{key:"pinConversation",value:function(e){return this._getModule(Ff).pinConversation(e)}},{key:"setAllMessageRead",value:function(e){return this._getModule(Ff).setAllMessageRead(e)}},{key:"setMessageRemindType",value:function(e){return this._getModule(Ff).setMessageRemindType(e)}},{key:"getTotalUnreadMessageCount",value:function(){return this._getModule(Ff).getTotalUnreadMessageCount()}},{key:"setConversationCustomData",value:function(e){return this._getModule(Ff).setConversationCustomData(e)}},{key:"markConversation",value:function(e){return this._getModule(Ff).markConversation(e)}},{key:"getConversationGroupList",value:function(){return this._getModule(Ff).getConversationGroupList()}},{key:"createConversationGroup",value:function(e){return this._getModule(Ff).createConversationGroup(e)}},{key:"deleteConversationGroup",value:function(e){return this._getModule(Ff).deleteConversationGroup(e)}},{key:"renameConversationGroup",value:function(e){return this._getModule(Ff).renameConversationGroup(e)}},{key:"addConversationsToGroup",value:function(e){return this._getModule(Ff).addConversationsToGroup(e)}},{key:"deleteConversationsFromGroup",value:function(e){return this._getModule(Ff).deleteConversationsFromGroup(e)}},{key:"getMyProfile",value:function(){return this._getModule(Nf).getMyProfile()}},{key:"getUserProfile",value:function(e){return this._getModule(Nf).getUserProfile(e)}},{key:"updateMyProfile",value:function(e){return this._getModule(Nf).updateMyProfile(e)}},{key:"getBlacklist",value:function(){return this._getModule(Nf).getLocalBlacklist()}},{key:"addToBlacklist",value:function(e){return this._getModule(Nf).addBlacklist(e)}},{key:"removeFromBlacklist",value:function(e){return this._getModule(Nf).deleteBlacklist(e)}},{key:"setSelfStatus",value:function(e){return this._getModule(Nf).setSelfStatus(e)}},{key:"getUserStatus",value:function(e){return this._getModule(Nf).getUserStatus(e)}},{key:"subscribeUserStatus",value:function(e){return this._getModule(Nf).subscribeUserStatus(e)}},{key:"unsubscribeUserStatus",value:function(e){return this._getModule(Nf).unsubscribeUserStatus(e)}},{key:"getFriendList",value:function(){var e=this._getModule(Uf);return e?e.getLocalFriendList():gI({code:Dm})}},{key:"addFriend",value:function(e){var t=this._getModule(Uf);return t?t.addFriend(e):gI({code:Dm})}},{key:"deleteFriend",value:function(e){var t=this._getModule(Uf);return t?t.deleteFriend(e):gI({code:Dm})}},{key:"checkFriend",value:function(e){var t=this._getModule(Uf);return t?t.checkFriend(e):gI({code:Dm})}},{key:"getFriendProfile",value:function(e){var t=this._getModule(Uf);return t?t.getFriendProfile(e):gI({code:Dm})}},{key:"updateFriend",value:function(e){var t=this._getModule(Uf);return t?t.updateFriend(e):gI({code:Dm})}},{key:"getFriendApplicationList",value:function(){var e=this._getModule(Uf);return e?e.getLocalFriendApplicationList():gI({code:Dm})}},{key:"acceptFriendApplication",value:function(e){var t=this._getModule(Uf);return t?t.acceptFriendApplication(e):gI({code:Dm})}},{key:"refuseFriendApplication",value:function(e){var t=this._getModule(Uf);return t?t.refuseFriendApplication(e):gI({code:Dm})}},{key:"deleteFriendApplication",value:function(e){var t=this._getModule(Uf);return t?t.deleteFriendApplication(e):gI({code:Dm})}},{key:"setFriendApplicationRead",value:function(){var e=this._getModule(Uf);return e?e.setFriendApplicationRead():gI({code:Dm})}},{key:"getFriendGroupList",value:function(){var e=this._getModule(Uf);return e?e.getLocalFriendGroupList():gI({code:Dm})}},{key:"createFriendGroup",value:function(e){var t=this._getModule(Uf);return t?t.createFriendGroup(e):gI({code:Dm})}},{key:"deleteFriendGroup",value:function(e){var t=this._getModule(Uf);return t?t.deleteFriendGroup(e):gI({code:Dm})}},{key:"addToFriendGroup",value:function(e){var t=this._getModule(Uf);return t?t.addToFriendGroup(e):gI({code:Dm})}},{key:"removeFromFriendGroup",value:function(e){var t=this._getModule(Uf);return t?t.removeFromFriendGroup(e):gI({code:Dm})}},{key:"renameFriendGroup",value:function(e){var t=this._getModule(Uf);return t?t.renameFriendGroup(e):gI({code:Dm})}},{key:"getGroupList",value:function(e){return this._getModule(jf).getGroupList(e)}},{key:"getGroupProfile",value:function(e){return this._getModule(jf).getGroupProfile(e)}},{key:"createGroup",value:function(e){return this._getModule(jf).createGroup(e)}},{key:"dismissGroup",value:function(e){return this._getModule(jf).dismissGroup(e)}},{key:"updateGroupProfile",value:function(e){return this._getModule(jf).updateGroupProfile(e)}},{key:"joinGroup",value:function(e){return this._getModule(jf).joinGroup(e)}},{key:"quitGroup",value:function(e){return this._getModule(jf).quitGroup(e)}},{key:"searchGroupByID",value:function(e){return this._getModule(jf).searchGroupByID(e)}},{key:"getGroupOnlineMemberCount",value:function(e){return this._getModule(jf).getGroupOnlineMemberCount(e)}},{key:"changeGroupOwner",value:function(e){return this._getModule(jf).changeGroupOwner(e)}},{key:"getGroupApplicationList",value:function(){return this._getModule(jf).getGroupApplicationList()}},{key:"handleGroupApplication",value:function(e){return this._getModule(jf).handleGroupApplication(e)}},{key:"initGroupAttributes",value:function(e){return this._getModule(jf).initGroupAttributes(e)}},{key:"setGroupAttributes",value:function(e){return this._getModule(jf).setGroupAttributes(e)}},{key:"deleteGroupAttributes",value:function(e){return this._getModule(jf).deleteGroupAttributes(e)}},{key:"getGroupAttributes",value:function(e){return this._getModule(jf).getGroupAttributes(e)}},{key:"setGroupCounters",value:function(e){return this._getModule(jf).setGroupCounters(e)}},{key:"increaseGroupCounter",value:function(e){return this._getModule(jf).increaseGroupCounter(e)}},{key:"decreaseGroupCounter",value:function(e){return this._getModule(jf).decreaseGroupCounter(e)}},{key:"getGroupCounters",value:function(e){return this._getModule(jf).getGroupCounters(e)}},{key:"getGroupMemberList",value:function(e){return this._getModule(Gf).getGroupMemberList(e)}},{key:"getGroupMemberProfile",value:function(e){return this._getModule(Gf).getGroupMemberProfile(e)}},{key:"addGroupMember",value:function(e){return this._getModule(Gf).addGroupMember(e)}},{key:"deleteGroupMember",value:function(e){return this._getModule(Gf).deleteGroupMember(e)}},{key:"setGroupMemberMuteTime",value:function(e){return this._getModule(Gf).setGroupMemberMuteTime(e)}},{key:"setGroupMemberRole",value:function(e){return this._getModule(Gf).setGroupMemberRole(e)}},{key:"setGroupMemberNameCard",value:function(e){return this._getModule(Gf).setGroupMemberNameCard(e)}},{key:"setGroupMemberCustomField",value:function(e){return this._getModule(Gf).setGroupMemberCustomField(e)}},{key:"markGroupMemberList",value:function(e){return this._getModule(Gf).markGroupMemberList(e)}},{key:"getJoinedCommunityList",value:function(){return this._getModule(Vf).getJoinedCommunityList()}},{key:"createTopicInCommunity",value:function(e){return this._getModule(Vf).createTopicInCommunity(e)}},{key:"deleteTopicFromCommunity",value:function(e){return this._getModule(Vf).deleteTopicFromCommunity(e)}},{key:"updateTopicProfile",value:function(e){return this._getModule(Vf).updateTopicProfile(e)}},{key:"getTopicList",value:function(e){return this._getModule(Vf).getTopicList(e)}}]),e}(),Dk={login:1,logout:1,destroy:1,on:1,off:1,ready:1,setLogLevel:1,joinGroup:1,quitGroup:1,registerPlugin:1,getGroupOnlineMemberCount:1};function Ak(e,t){if(e.isReady()||1===Dk[t])return!0;var n=e.getNotReadyReason(),r={code:n,message:"".concat(e.getErrorMessage(n)," | ").concat(t," | ").concat(e.getErrorMessage(Am))};return e.onError(r),r}var Rk={},xk={create:function(e){var t=0,r=e.SDKAppID;if(Wl(r))t=r;else if(t=parseInt(r),isNaN(r))return Ll.e("".concat("TIM.create"," failed. Failed to parse the SDKAppID, please check the arguments")),null;if(t&&Rk[t])return Rk[t];Ll.l("".concat("TIM.create"));var i=new Ok(n(n({},e),{},{SDKAppID:t}));i.on(yi.SDK_DESTROY,(function(e){Rk[e.data.SDKAppID]=null,delete Rk[e.data.SDKAppID]}));var o=function(e){var t=Object.create(null);return Object.keys(hf).forEach((function(n){if(e[n]){var r=new Ei;t[n]=function(){var t=Array.from(arguments);return r.use((function(t,r){var i=Ak(e,n);return!0===i?r():gI(i)})).use((function(e,t){if(!0===qd(e,ff[n],n))return t()})).use((function(t,r){return e[n].apply(e,t)})),r.run(t)}}})),t}(i);return Rk[t]=o,ff.hookGetAPITips(i.getErrorMessage.bind(i)),Ll.l("".concat("TIM.create"," ok")),o}};return xk.TYPES=bi,xk.EVENT=yi,xk.VERSION="2.26.6",Ll.l("TIM.VERSION:".concat(xk.VERSION)),xk}))}).call(this,n("c8ba"))},e260:function(e,t,n){"use strict";var r=n("fc6a"),i=n("44d2"),o=n("3f8c"),a=n("69f3"),s=n("9bf2").f,c=n("7dd0"),u=n("c430"),l=n("83ab"),d="Array Iterator",p=a.set,f=a.getterFor(d);e.exports=c(Array,"Array",(function(e,t){p(this,{type:d,target:r(e),index:0,kind:t})}),(function(){var e=f(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");var h=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!u&&l&&"values"!==h.name)try{s(h,"name",{value:"values"})}catch(g){}},e27c:function(e,t,n){"use strict";var r=n("c199"),i=n("5642"),o=Object(r["a"])(i["b"]);t["a"]=o},e2cc:function(e,t,n){var r=n("6eeb");e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},e323:function(e,t,n){"use strict";var r=n("23e7"),i=n("e330"),o=n("1d80"),a=n("5926"),s=n("577e"),c=i("".slice),u=Math.max,l=Math.min,d=!"".substr||"b"!=="ab".substr(-1);r({target:"String",proto:!0,forced:d},{substr:function(e,t){var n,r,i=s(o(this)),d=i.length,p=a(e);return p===1/0&&(p=0),p<0&&(p=u(d+p,0)),n=void 0===t?d:a(t),n<=0||n===1/0?"":(r=l(p+n,d),p>=r?"":c(i,p,r))}})},e330:function(e,t){var n=Function.prototype,r=n.bind,i=n.call,o=r&&r.bind(i);e.exports=r?function(e){return e&&o(i,e)}:function(e){return e&&function(){return i.apply(e,arguments)}}},e3b3:function(e,t,n){},e41f:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n("c199"),i=n("7a23"),o=n("f827"),a=n("f344"),s=n("f691"),c=n("fe7e"),u=n("8da3"),l=n("7e3e"),d=n("b1d2"),p=n("7f9b"),f=n("4eda"),h=n("cdd8"),g=n("4a89"),v=0,m="van-overflow-hidden";function _(e,t){var n=Object(h["a"])(),r=t=>{n.move(t);var r=n.deltaY.value>0?"10":"01",i=Object(p["c"])(t.target,e.value),{scrollHeight:o,offsetHeight:a,scrollTop:s}=i,c="11";0===s?c=a>=o?"00":"01":s+a>=o&&(c="10"),"11"===c||!n.isVertical()||parseInt(c,2)&parseInt(r,2)||Object(g["e"])(t,!0)},o=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",r,{passive:!1}),v||document.body.classList.add(m),v++},a=()=>{v&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",r),v--,v||document.body.classList.remove(m))},s=()=>t()&&o(),c=()=>t()&&a();Object(p["d"])(s),Object(i["B"])(c),Object(i["z"])(c),Object(i["X"])(t,e=>{e?o():a()})}var y=n("d0c2"),b=n("1c51"),I=n("ad06"),T=n("6e47"),C=Object(a["a"])({},o["b"],{round:Boolean,position:Object(s["e"])("center"),closeIcon:Object(s["e"])("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:Object(s["e"])("top-right"),safeAreaInsetBottom:Boolean}),[S,E]=Object(c["a"])("popup"),M=2e3,k=Object(i["n"])({name:S,inheritAttrs:!1,props:C,emits:["open","close","opened","closed","update:show","click-overlay","click-close-icon"],setup(e,t){var n,r,{emit:o,attrs:a,slots:s}=t,c=Object(i["K"])(),h=Object(i["K"])(),g=Object(y["a"])(()=>e.show||!e.lazyRender),v=Object(i["e"])(()=>{var t={zIndex:c.value};if(Object(u["b"])(e.duration)){var n="center"===e.position?"animationDuration":"transitionDuration";t[n]=e.duration+"s"}return t}),m=()=>{n||(void 0!==e.zIndex&&(M=+e.zIndex),n=!0,c.value=++M,o("open"))},C=()=>{n&&Object(l["a"])(e.beforeClose,{done(){n=!1,o("close"),o("update:show",!1)}})},S=t=>{o("click-overlay",t),e.closeOnClickOverlay&&C()},k=()=>{if(e.overlay)return Object(i["m"])(T["a"],{show:e.show,class:e.overlayClass,zIndex:c.value,duration:e.duration,customStyle:e.overlayStyle,onClick:S},{default:s["overlay-content"]})},w=e=>{o("click-close-icon",e),C()},O=()=>{if(e.closeable)return Object(i["m"])(I["a"],{role:"button",tabindex:0,name:e.closeIcon,class:[E("close-icon",e.closeIconPosition),d["i"]],classPrefix:e.iconPrefix,onClick:w},null)},D=()=>o("opened"),A=()=>o("closed"),R=g(()=>{var{round:t,position:n,safeAreaInsetBottom:r}=e;return Object(i["ab"])(Object(i["m"])("div",Object(i["t"])({ref:h,style:v.value,class:[E({round:t,[n]:n}),{"van-safe-area-bottom":r}]},a),[null==s.default?void 0:s.default(),O()]),[[i["W"],e.show]])}),x=()=>{var{position:t,transition:n,transitionAppear:r}=e,o="center"===t?"van-fade":"van-popup-slide-"+t;return Object(i["m"])(i["d"],{name:n||o,appear:r,onAfterEnter:D,onAfterLeave:A},{default:R})};return Object(i["X"])(()=>e.show,e=>{e?m():(n=!1,o("close"))}),Object(f["a"])({popupRef:h}),_(h,()=>e.show&&e.lockScroll),Object(p["j"])("popstate",()=>{e.closeOnPopstate&&(C(),r=!1)}),Object(i["C"])(()=>{e.show&&m()}),Object(i["x"])(()=>{r&&(o("update:show",!0),r=!1)}),Object(i["B"])(()=>{e.show&&(C(),r=!0)}),Object(i["H"])(b["a"],()=>e.show),()=>e.teleport?Object(i["m"])(i["c"],{to:e.teleport},{default:()=>[k(),x()]}):Object(i["m"])(i["a"],null,[k(),x()])}}),w=Object(r["a"])(k);t["b"]=w},e439:function(e,t,n){var r=n("23e7"),i=n("d039"),o=n("fc6a"),a=n("06cf").f,s=n("83ab"),c=i((function(){a(1)})),u=!s||c;r({target:"Object",stat:!0,forced:u,sham:!s},{getOwnPropertyDescriptor:function(e,t){return a(o(e),t)}})},e538:function(e,t,n){var r=n("b622");t.f=r},e667:function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},e683:function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},e6cf:function(e,t,n){"use strict";var r,i,o,a,s=n("23e7"),c=n("c430"),u=n("da84"),l=n("d066"),d=n("c65b"),p=n("fea9"),f=n("6eeb"),h=n("e2cc"),g=n("d2bb"),v=n("d44e"),m=n("2626"),_=n("59ed"),y=n("1626"),b=n("861d"),I=n("19aa"),T=n("8925"),C=n("2266"),S=n("1c7e"),E=n("4840"),M=n("2cf4").set,k=n("b575"),w=n("cdf9"),O=n("44de"),D=n("f069"),A=n("e667"),R=n("01b4"),x=n("69f3"),L=n("94ca"),N=n("b622"),P=n("6069"),j=n("605d"),U=n("2d00"),G=N("species"),V="Promise",F=x.getterFor(V),B=x.set,q=x.getterFor(V),H=p&&p.prototype,z=p,K=H,W=u.TypeError,Y=u.document,J=u.process,$=D.f,X=$,Z=!!(Y&&Y.createEvent&&u.dispatchEvent),Q=y(u.PromiseRejectionEvent),ee="unhandledrejection",te="rejectionhandled",ne=0,re=1,ie=2,oe=1,ae=2,se=!1,ce=L(V,(function(){var e=T(z),t=e!==String(z);if(!t&&66===U)return!0;if(c&&!K["finally"])return!0;if(U>=51&&/native code/.test(e))return!1;var n=new z((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))},i=n.constructor={};return i[G]=r,se=n.then((function(){}))instanceof r,!se||!t&&P&&!Q})),ue=ce||!S((function(e){z.all(e)["catch"]((function(){}))})),le=function(e){var t;return!(!b(e)||!y(t=e.then))&&t},de=function(e,t){var n,r,i,o=t.value,a=t.state==re,s=a?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{s?(a||(t.rejection===ae&&ve(t),t.rejection=oe),!0===s?n=o:(l&&l.enter(),n=s(o),l&&(l.exit(),i=!0)),n===e.promise?u(W("Promise-chain cycle")):(r=le(n))?d(r,n,c,u):c(n)):u(o)}catch(p){l&&!i&&l.exit(),u(p)}},pe=function(e,t){e.notified||(e.notified=!0,k((function(){var n,r=e.reactions;while(n=r.get())de(n,e);e.notified=!1,t&&!e.rejection&&he(e)})))},fe=function(e,t,n){var r,i;Z?(r=Y.createEvent("Event"),r.promise=t,r.reason=n,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:n},!Q&&(i=u["on"+e])?i(r):e===ee&&O("Unhandled promise rejection",n)},he=function(e){d(M,u,(function(){var t,n=e.facade,r=e.value,i=ge(e);if(i&&(t=A((function(){j?J.emit("unhandledRejection",r,n):fe(ee,n,r)})),e.rejection=j||ge(e)?ae:oe,t.error))throw t.value}))},ge=function(e){return e.rejection!==oe&&!e.parent},ve=function(e){d(M,u,(function(){var t=e.facade;j?J.emit("rejectionHandled",t):fe(te,t,e.value)}))},me=function(e,t,n){return function(r){e(t,r,n)}},_e=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=ie,pe(e,!0))},ye=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw W("Promise can't be resolved itself");var r=le(t);r?k((function(){var n={done:!1};try{d(r,t,me(ye,n,e),me(_e,n,e))}catch(i){_e(n,i,e)}})):(e.value=t,e.state=re,pe(e,!1))}catch(i){_e({done:!1},i,e)}}};if(ce&&(z=function(e){I(this,K),_(e),d(r,this);var t=F(this);try{e(me(ye,t),me(_e,t))}catch(n){_e(t,n)}},K=z.prototype,r=function(e){B(this,{type:V,done:!1,notified:!1,parent:!1,reactions:new R,rejection:!1,state:ne,value:void 0})},r.prototype=h(K,{then:function(e,t){var n=q(this),r=$(E(this,z));return n.parent=!0,r.ok=!y(e)||e,r.fail=y(t)&&t,r.domain=j?J.domain:void 0,n.state==ne?n.reactions.add(r):k((function(){de(r,n)})),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r,t=F(e);this.promise=e,this.resolve=me(ye,t),this.reject=me(_e,t)},D.f=$=function(e){return e===z||e===o?new i(e):X(e)},!c&&y(p)&&H!==Object.prototype)){a=H.then,se||(f(H,"then",(function(e,t){var n=this;return new z((function(e,t){d(a,n,e,t)})).then(e,t)}),{unsafe:!0}),f(H,"catch",K["catch"],{unsafe:!0}));try{delete H.constructor}catch(be){}g&&g(H,K)}s({global:!0,wrap:!0,forced:ce},{Promise:z}),v(z,V,!1,!0),m(V),o=l(V),s({target:V,stat:!0,forced:ce},{reject:function(e){var t=$(this);return d(t.reject,void 0,e),t.promise}}),s({target:V,stat:!0,forced:c||ce},{resolve:function(e){return w(c&&this===o?z:this,e)}}),s({target:V,stat:!0,forced:ue},{all:function(e){var t=this,n=$(t),r=n.resolve,i=n.reject,o=A((function(){var n=_(t.resolve),o=[],a=0,s=1;C(e,(function(e){var c=a++,u=!1;s++,d(n,t,e).then((function(e){u||(u=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=$(t),r=n.reject,i=A((function(){var i=_(t.resolve);C(e,(function(e){d(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},e7e5:function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("e3b3"),n("a71a"),n("4d75"),n("b258")},e893:function(e,t,n){var r=n("1a2d"),i=n("56ef"),o=n("06cf"),a=n("9bf2");e.exports=function(e,t,n){for(var s=i(t),c=a.f,u=o.f,l=0;l<s.length;l++){var d=s[l];r(e,d)||n&&r(n,d)||c(e,d,u(t,d))}}},e8b5:function(e,t,n){var r=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}},e930:function(e,t,n){"use strict";n("68ef"),n("cb51"),n("3743"),n("09fe"),n("e3b3"),n("a71a"),n("4d75"),n("8270"),n("786d"),n("504b"),n("bcd3")},e95a:function(e,t,n){var r=n("b622"),i=n("3f8c"),o=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},e9c4:function(e,t,n){var r=n("23e7"),i=n("da84"),o=n("d066"),a=n("2ba4"),s=n("e330"),c=n("d039"),u=i.Array,l=o("JSON","stringify"),d=s(/./.exec),p=s("".charAt),f=s("".charCodeAt),h=s("".replace),g=s(1..toString),v=/[\uD800-\uDFFF]/g,m=/^[\uD800-\uDBFF]$/,_=/^[\uDC00-\uDFFF]$/,y=function(e,t,n){var r=p(n,t-1),i=p(n,t+1);return d(m,e)&&!d(_,i)||d(_,e)&&!d(m,r)?"\\u"+g(f(e,0),16):e},b=c((function(){return'"\\udf06\\ud834"'!==l("\udf06\ud834")||'"\\udead"'!==l("\udead")}));l&&r({target:"JSON",stat:!0,forced:b},{stringify:function(e,t,n){for(var r=0,i=arguments.length,o=u(i);r<i;r++)o[r]=arguments[r];var s=a(l,null,o);return"string"==typeof s?h(s,v,y):s}})},ea82:function(e,t,n){},ee83:function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f344"),s=n("4eda"),c=n("f691"),u=n("8405"),l=n("96b0"),d=n("f253"),[p]=Object(o["a"])("time-picker"),f=Object(i["n"])({name:p,props:Object(a["a"])({},l["e"],{minHour:Object(c["c"])(0),maxHour:Object(c["c"])(23),minMinute:Object(c["c"])(0),maxMinute:Object(c["c"])(59),modelValue:String}),emits:["confirm","cancel","change","update:modelValue"],setup(e,t){var{emit:n,slots:r}=t,o=t=>{var{minHour:n,maxHour:r,maxMinute:i,minMinute:o}=e;t||(t=Object(u["h"])(n)+":"+Object(u["h"])(o));var[a,s]=t.split(":");return a=Object(u["h"])(Object(u["c"])(+a,+n,+r)),s=Object(u["h"])(Object(u["c"])(+s,+o,+i)),a+":"+s},c=Object(i["K"])(),p=Object(i["K"])(o(e.modelValue)),f=Object(i["e"])(()=>[{type:"hour",range:[+e.minHour,+e.maxHour]},{type:"minute",range:[+e.minMinute,+e.maxMinute]}]),h=Object(i["e"])(()=>f.value.map(t=>{var{type:n,range:r}=t,i=Object(l["f"])(r[1]-r[0]+1,e=>Object(u["h"])(r[0]+e));return e.filter&&(i=e.filter(n,i)),{type:n,values:i}})),g=Object(i["e"])(()=>h.value.map(t=>({values:t.values.map(n=>e.formatter(t.type,n))}))),v=()=>{var t=p.value.split(":"),n=[e.formatter("hour",t[0]),e.formatter("minute",t[1])];Object(i["u"])(()=>{var e;null==(e=c.value)||e.setValues(n)})},m=()=>{var[e,t]=c.value.getIndexes(),[n,r]=h.value,i=n.values[e]||n.values[0],a=r.values[t]||r.values[0];p.value=o(i+":"+a),v()},_=()=>n("confirm",p.value),y=()=>n("cancel"),b=()=>{m(),Object(i["u"])(()=>{Object(i["u"])(()=>n("change",p.value))})};return Object(i["C"])(()=>{v(),Object(i["u"])(m)}),Object(i["X"])(g,v),Object(i["X"])(()=>[e.filter,e.maxHour,e.minMinute,e.maxMinute],m),Object(i["X"])(()=>e.minHour,()=>{Object(i["u"])(m)}),Object(i["X"])(p,e=>n("update:modelValue",e)),Object(i["X"])(()=>e.modelValue,e=>{e=o(e),e!==p.value&&(p.value=e,v())}),Object(s["a"])({getPicker:()=>c.value&&Object(l["d"])(c.value,m)}),()=>Object(i["m"])(d["a"],Object(i["t"])({ref:c,columns:g.value,onChange:b,onCancel:y,onConfirm:_},Object(a["e"])(e,l["c"])),r)}}),h=n("8da3"),g=(new Date).getFullYear(),[v]=Object(o["a"])("date-picker"),m=Object(i["n"])({name:v,props:Object(a["a"])({},l["e"],{type:Object(c["e"])("datetime"),modelValue:Date,minDate:{type:Date,default:()=>new Date(g-10,0,1),validator:h["a"]},maxDate:{type:Date,default:()=>new Date(g+10,11,31),validator:h["a"]}}),emits:["confirm","cancel","change","update:modelValue"],setup(e,t){var{emit:n,slots:r}=t,o=t=>{if(Object(h["a"])(t)){var n=Object(u["c"])(t.getTime(),e.minDate.getTime(),e.maxDate.getTime());return new Date(n)}},c=Object(i["K"])(),p=Object(i["K"])(o(e.modelValue)),f=(t,n)=>{var r=e[t+"Date"],i=r.getFullYear(),o=1,a=1,s=0,c=0;return"max"===t&&(o=12,a=Object(l["a"])(n.getFullYear(),n.getMonth()+1),s=23,c=59),n.getFullYear()===i&&(o=r.getMonth()+1,n.getMonth()+1===o&&(a=r.getDate(),n.getDate()===a&&(s=r.getHours(),n.getHours()===s&&(c=r.getMinutes())))),{[t+"Year"]:i,[t+"Month"]:o,[t+"Date"]:a,[t+"Hour"]:s,[t+"Minute"]:c}},g=Object(i["e"])(()=>{var{maxYear:t,maxDate:n,maxMonth:r,maxHour:i,maxMinute:o}=f("max",p.value||e.minDate),{minYear:a,minDate:s,minMonth:c,minHour:u,minMinute:l}=f("min",p.value||e.minDate),d=[{type:"year",range:[a,t]},{type:"month",range:[c,r]},{type:"day",range:[s,n]},{type:"hour",range:[u,i]},{type:"minute",range:[l,o]}];switch(e.type){case"date":d=d.slice(0,3);break;case"year-month":d=d.slice(0,2);break;case"month-day":d=d.slice(1,3);break;case"datehour":d=d.slice(0,4);break}if(e.columnsOrder){var h=e.columnsOrder.concat(d.map(e=>e.type));d.sort((e,t)=>h.indexOf(e.type)-h.indexOf(t.type))}return d}),v=Object(i["e"])(()=>g.value.map(t=>{var{type:n,range:r}=t,i=Object(l["f"])(r[1]-r[0]+1,e=>Object(u["h"])(r[0]+e));return e.filter&&(i=e.filter(n,i)),{type:n,values:i}})),m=Object(i["e"])(()=>v.value.map(t=>({values:t.values.map(n=>e.formatter(t.type,n))}))),_=()=>{var t=p.value||e.minDate,{formatter:n}=e,r=v.value.map(e=>{switch(e.type){case"year":return n("year",""+t.getFullYear());case"month":return n("month",Object(u["h"])(t.getMonth()+1));case"day":return n("day",Object(u["h"])(t.getDate()));case"hour":return n("hour",Object(u["h"])(t.getHours()));case"minute":return n("minute",Object(u["h"])(t.getMinutes()));default:return""}});Object(i["u"])(()=>{var e;null==(e=c.value)||e.setValues(r)})},y=()=>{var t,n,r,{type:i}=e,a=c.value.getIndexes(),s=e=>{var t=0;v.value.forEach((n,r)=>{e===n.type&&(t=r)});var{values:n}=v.value[t];return Object(l["b"])(n[a[t]])};"month-day"===i?(t=(p.value||e.minDate).getFullYear(),n=s("month"),r=s("day")):(t=s("year"),n=s("month"),r="year-month"===i?1:s("day"));var u=Object(l["a"])(t,n);r=r>u?u:r;var d=0,f=0;"datehour"===i&&(d=s("hour")),"datetime"===i&&(d=s("hour"),f=s("minute"));var h=new Date(t,n-1,r,d,f);p.value=o(h)},b=()=>{n("update:modelValue",p.value),n("confirm",p.value)},I=()=>n("cancel"),T=()=>{y(),Object(i["u"])(()=>{Object(i["u"])(()=>n("change",p.value))})};return Object(i["C"])(()=>{_(),Object(i["u"])(y)}),Object(i["X"])(m,_),Object(i["X"])(p,(e,t)=>n("update:modelValue",t?e:null)),Object(i["X"])(()=>[e.filter,e.maxDate],y),Object(i["X"])(()=>e.minDate,()=>{Object(i["u"])(y)}),Object(i["X"])(()=>e.modelValue,e=>{var t;e=o(e),e&&e.valueOf()!==(null==(t=p.value)?void 0:t.valueOf())&&(p.value=e)}),Object(s["a"])({getPicker:()=>c.value&&Object(l["d"])(c.value,y)}),()=>Object(i["m"])(d["a"],Object(i["t"])({ref:c,columns:m.value,onChange:T,onCancel:I,onConfirm:b},Object(a["e"])(e,l["c"])),r)}}),[_,y]=Object(o["a"])("datetime-picker"),b=Object.keys(f.props),I=Object.keys(m.props),T=Object(a["a"])({},f.props,m.props,{modelValue:[String,Date]}),C=Object(i["n"])({name:_,props:T,setup(e,t){var{attrs:n,slots:r}=t,o=Object(i["K"])();return Object(s["a"])({getPicker:()=>{var e;return null==(e=o.value)?void 0:e.getPicker()}}),()=>{var t="time"===e.type,s=t?f:m,c=Object(a["e"])(e,t?b:I);return Object(i["m"])(s,Object(i["t"])({ref:o,class:y()},c,n),r)}}}),S=Object(r["a"])(C);t["a"]=S},efa0:function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("ad06"),c=n("b650"),[u,l,d]=Object(o["a"])("submit-bar"),p={tip:String,label:String,price:Number,tipIcon:String,loading:Boolean,currency:Object(a["e"])("¥"),disabled:Boolean,textAlign:String,buttonText:String,buttonType:Object(a["e"])("danger"),buttonColor:String,suffixLabel:String,decimalLength:Object(a["c"])(2),safeAreaInsetBottom:a["g"]},f=Object(i["n"])({name:u,props:p,emits:["submit"],setup(e,t){var{emit:n,slots:r}=t,o=()=>{var{price:t,label:n,currency:r,textAlign:o,suffixLabel:a,decimalLength:s}=e;if("number"===typeof t){var c=(t/100).toFixed(+s).split("."),u=s?"."+c[1]:"";return Object(i["m"])("div",{class:l("text"),style:{textAlign:o}},[Object(i["m"])("span",null,[n||d("label")]),Object(i["m"])("span",{class:l("price")},[r,Object(i["m"])("span",{class:l("price-integer")},[c[0]]),u]),a&&Object(i["m"])("span",{class:l("suffix-label")},[a])])}},a=()=>{var{tip:t,tipIcon:n}=e;if(r.tip||t)return Object(i["m"])("div",{class:l("tip")},[n&&Object(i["m"])(s["a"],{class:l("tip-icon"),name:n},null),t&&Object(i["m"])("span",{class:l("tip-text")},[t]),null==r.tip?void 0:r.tip()])},u=()=>n("submit"),p=()=>r.button?r.button():Object(i["m"])(c["a"],{round:!0,type:e.buttonType,text:e.buttonText,class:l("button",e.buttonType),color:e.buttonColor,loading:e.loading,disabled:e.disabled,onClick:u},null);return()=>Object(i["m"])("div",{class:[l(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[null==r.top?void 0:r.top(),a(),Object(i["m"])("div",{class:l("bar")},[null==r.default?void 0:r.default(),o(),p()])])}}),h=Object(r["a"])(f);t["a"]=h},f032:function(e,t,n){},f069:function(e,t,n){"use strict";var r=n("59ed"),i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},f0ca:function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("8405"),c="van-empty-network-",u=(e,t,n)=>Object(i["m"])("stop",{"stop-color":e,offset:t+"%","stop-opacity":n},null),l=Object(i["m"])("svg",{viewBox:"0 0 160 160"},[Object(i["m"])("defs",null,[Object(i["m"])("linearGradient",{id:c+"1",x1:"64%",y1:"100%",x2:"64%"},[u("#FFF",0,.5),u("#F2F3F5",100)]),Object(i["m"])("linearGradient",{id:c+"2",x1:"50%",x2:"50%",y2:"84%"},[u("#EBEDF0",0),u("#DCDEE0",100,0)]),Object(i["m"])("linearGradient",{id:c+"3",x1:"100%",x2:"100%",y2:"100%"},[u("#EAEDF0",0),u("#DCDEE0",100)]),Object(i["m"])("radialGradient",{id:c+"4",cx:"50%",cy:"0%",fx:"50%",fy:"0%",r:"100%",gradientTransform:"matrix(0 1 -.54 0 .5 -.5)"},[u("#EBEDF0",0),u("#FFF",100,0)])]),Object(i["m"])("g",{fill:"none"},[Object(i["m"])("g",{opacity:".8"},[Object(i["m"])("path",{d:"M36 131V53H16v20H2v58h34z",fill:"url(#"+c+"1)"},null),Object(i["m"])("path",{d:"M123 15h22v14h9v77h-31V15z",fill:"url(#"+c+"1)"},null)]),Object(i["m"])("path",{fill:"url(#"+c+"4)",d:"M0 139h160v21H0z"},null),Object(i["m"])("path",{d:"M80 54a7 7 0 0 1 3 13v27l-2 2h-2a2 2 0 0 1-2-2V67a7 7 0 0 1 3-13z",fill:"url(#"+c+"2)"},null),Object(i["m"])("g",{opacity:".6","stroke-linecap":"round","stroke-width":"7"},[Object(i["m"])("path",{d:"M64 47a19 19 0 0 0-5 13c0 5 2 10 5 13",stroke:"url(#"+c+"3)"},null),Object(i["m"])("path",{d:"M53 36a34 34 0 0 0 0 48",stroke:"url(#"+c+"3)"},null),Object(i["m"])("path",{d:"M95 73a19 19 0 0 0 6-13c0-5-2-9-6-13",stroke:"url(#"+c+"3)"},null),Object(i["m"])("path",{d:"M106 84a34 34 0 0 0 0-48",stroke:"url(#"+c+"3)"},null)]),Object(i["m"])("g",{transform:"translate(31 105)"},[Object(i["m"])("rect",{fill:"#EBEDF0",width:"98",height:"34",rx:"2"},null),Object(i["m"])("rect",{fill:"#FFF",x:"9",y:"8",width:"80",height:"18",rx:"1.1"},null),Object(i["m"])("rect",{fill:"#EBEDF0",x:"15",y:"12",width:"18",height:"6",rx:"1.1"},null)])])]),[d,p]=Object(o["a"])("empty"),f=["error","search","default"],h={image:Object(a["e"])("default"),imageSize:a["f"],description:String},g=Object(i["n"])({name:d,props:h,setup(e,t){var{slots:n}=t,r=()=>{if(n.image)return n.image();var{image:t}=e;return"network"===t?l:(f.includes(t)&&(t="https://img.yzcdn.cn/vant/empty-image-"+t+".png"),Object(i["m"])("img",{src:t},null))},o=()=>{var t=n.description?n.description():e.description;if(t)return Object(i["m"])("p",{class:p("description")},[t])},a=()=>{if(n.default)return Object(i["m"])("div",{class:p("bottom")},[n.default()])};return()=>Object(i["m"])("div",{class:p()},[Object(i["m"])("div",{class:p("image"),style:Object(s["e"])(e.imageSize)},[r()]),o(),a()])}}),v=Object(r["a"])(g);t["a"]=v},f183:function(e,t,n){var r=n("23e7"),i=n("e330"),o=n("d012"),a=n("861d"),s=n("1a2d"),c=n("9bf2").f,u=n("241c"),l=n("057f"),d=n("4fad"),p=n("90e3"),f=n("bb2f"),h=!1,g=p("meta"),v=0,m=function(e){c(e,g,{value:{objectID:"O"+v++,weakData:{}}})},_=function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,g)){if(!d(e))return"F";if(!t)return"E";m(e)}return e[g].objectID},y=function(e,t){if(!s(e,g)){if(!d(e))return!0;if(!t)return!1;m(e)}return e[g].weakData},b=function(e){return f&&h&&d(e)&&!s(e,g)&&m(e),e},I=function(){T.enable=function(){},h=!0;var e=u.f,t=i([].splice),n={};n[g]=1,e(n).length&&(u.f=function(n){for(var r=e(n),i=0,o=r.length;i<o;i++)if(r[i]===g){t(r,i,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},T=e.exports={enable:I,fastKey:_,getWeakData:y,onFreeze:b};o[g]=!0},f1dc:function(e,t,n){"use strict";n("68ef"),n("a71a")},f253:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("c199"),i=n("d3fb"),o=Object(r["a"])(i["a"]);t["b"]=o},f319:function(e,t,n){},f344:function(e,t,n){"use strict";function r(){}n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return s}));var i=Object.assign,o="undefined"!==typeof window;function a(e,t){var n=t.split("."),r=e;return n.forEach(e=>{var t;r=null!=(t=r[e])?t:""}),r}function s(e,t,n){return t.reduce((t,r)=>(n&&void 0===e[r]||(t[r]=e[r]),t),{})}},f36a:function(e,t,n){var r=n("e330");e.exports=r([].slice)},f4d1:function(e,t,n){"use strict";n.d(t,"a",(function(){return ui})),n.d(t,"b",(function(){return Fi}));var r=n("3653");n.d(t,"c",(function(){return r["TUICallType"]}));var i=n("7a23");(function(){try{if("undefined"!=typeof document){var e=document.createElement("style");e.appendChild(document.createTextNode('.tui-call-kit[data-v-fe5ee432]{width:100%;height:100%;position:relative;border-radius:inherit}.calling-wrapper[data-v-fe5ee432]{position:relative;width:100%;height:100%;border-radius:inherit;background:rgba(0,24,60,.7);backdrop-filter:blur(34px);display:flex;flex-direction:column;justify-content:center;overflow:hidden;z-index:12}.calling-wrapper[data-v-fe5ee432]:hover{z-index:inherit;transition:all .5s ease-in-out}.dialing-wrapper[data-v-fe5ee432]{background:#00183C;color:#fff;opacity:.7;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;border-radius:inherit;top:0;left:0;z-index:10;overflow:hidden}.dialing-local[data-v-fe5ee432]{position:absolute;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.dialing-content[data-v-fe5ee432]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;position:relative;top:-3rem}#local-dialing[data-v-fe5ee432],#local-group[data-v-fe5ee432]{background:black;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLWRhc2hhcnJheT0iMTUiIHN0cm9rZS1kYXNob2Zmc2V0PSIxNSIKCQlzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEyIDNDMTYuOTcwNiAzIDIxIDcuMDI5NDQgMjEgMTIiPgoJCTxhbmltYXRlIGZpbGw9ImZyZWV6ZSIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLWRhc2hvZmZzZXQiIGR1cj0iMC4zcyIgdmFsdWVzPSIxNTswIiAvPgoJCTxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgZHVyPSIxLjVzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIKCQkJdHlwZT0icm90YXRlIiB2YWx1ZXM9IjAgMTIgMTI7MzYwIDEyIDEyIiAvPgoJPC9wYXRoPgo8L3N2Zz4=);background-repeat:no-repeat;background-size:auto;background-position-x:center;background-position-y:calc(50% + 10px)}.dialing-user-id[data-v-fe5ee432]{font-style:normal;font-weight:600;font-size:40px;width:100%;line-height:56px;display:flex;align-items:center;justify-content:center}.dialing-info[data-v-fe5ee432]{font-style:normal;font-weight:400;font-size:14px;line-height:20px}.control-wrapper[data-v-fe5ee432]{transform:translate(-50%);position:absolute;bottom:0;padding-bottom:40px;left:50%;width:100%;color:#fff;border-radius:inherit;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,rgba(0,0,0,.4) 100%);display:flex;flex-direction:column;flex-wrap:wrap;align-items:center;z-index:11;user-select:none}.panel-button-area[data-v-fe5ee432]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;margin:30px 0}.panel-dialing-info[data-v-fe5ee432]{text-align:center}.control-wrapper[data-v-fe5ee432]:hover{z-index:13}.control-item[data-v-fe5ee432]{display:flex;flex-direction:column;width:100px;margin:0 20px}.control-item-h5[data-v-fe5ee432]{display:flex;flex-direction:column;width:100px;margin:0}.control-item-text[data-v-fe5ee432]{margin-top:5px;white-space:nowrap;font-weight:400;font-size:14px;line-height:20px;text-align:center}.control-item-icon[data-v-fe5ee432]{width:100%;display:flex;flex-direction:row;justify-content:center;align-items:center;position:relative}.control-item-icon-container-small[data-v-fe5ee432]{background:rgba(218,218,218,.3);border-radius:40px;width:40px;height:40px;margin:8px;cursor:pointer}.control-item-icon-container-medium[data-v-fe5ee432]{background:rgba(0,0,0,.3);border-radius:56px;width:56px;height:56px;margin:8px;cursor:pointer}.control-item-icon-container-large[data-v-fe5ee432]{background:rgba(0,0,0,.3);border-radius:68px;width:68px;height:68px;margin:8px;cursor:pointer}.control-item-summary[data-v-fe5ee432]{height:40px;width:12px;right:0;display:flex;justify-content:center;align-items:center;cursor:pointer}.control-item-summary[data-v-fe5ee432]:hover{background:rgba(0,0,0,.4)}.control-item-detail[data-v-fe5ee432]{width:300px;border-radius:4px;background:#FEFEFF;box-shadow:#0000003d 0 3px 8px;color:#000;padding:20px;position:absolute;transform:translate(28px);bottom:110%}.control-item-detail-row[data-v-fe5ee432]{margin-bottom:6px;font-size:16px}.device-select[data-v-fe5ee432]{height:32px;width:100%;border:1px solid #DEE0E3;padding-left:6px;padding-top:6px;padding-bottom:6px;margin-top:10px;margin-bottom:10px;font-size:14px;color:#596174}.control-item-detail[data-v-fe5ee432]:before{content:"";width:0;height:0;border-width:10px;border-style:solid;border-color:#FEFEFF transparent transparent;bottom:-3px;margin-left:-9px;position:absolute;left:50%;border-color:#fff;border-radius:4px;transform:rotate(60deg) skew(30deg)}.tag[data-v-fe5ee432]{color:#fff;z-index:inherit;background:rgba(0,0,0,.6);padding:2px 10px;border-top-right-radius:inherit;border-bottom-left-radius:inherit;font-size:14px;position:absolute;left:0;bottom:0;z-index:11;display:flex;align-items:center}.tag .microphone-icon-container[data-v-fe5ee432]{margin-left:0;margin-right:2px;width:20px;background-color:transparent}.switch-large-small[data-v-fe5ee432]{position:absolute;right:12px;top:12px;width:16px;height:16px;z-index:inherit;cursor:pointer}.small-h5[data-v-fe5ee432]{position:absolute;width:94px;height:160px;min-height:100px;max-height:60%;top:30px;right:10px;z-index:2;overflow:hidden;background:#000;border-radius:4px}.small[data-v-fe5ee432]{position:absolute;width:260px;height:170px;min-height:100px;max-height:60%;top:30px;left:30px;z-index:2;overflow:hidden;resize:both;background:#000;border-radius:4px}.large[data-v-fe5ee432]{min-height:100px;width:100%;height:100%;z-index:1;border-radius:inherit;overflow:hidden}.large .switch-large-small[data-v-fe5ee432]{display:none}.group-calling-container[data-v-fe5ee432]{width:100%;height:100%;display:flex;flex-wrap:wrap;justify-content:center}.group-user-view[data-v-fe5ee432]{width:33.333%;height:33.333%;position:relative;background:rgba(32,32,32,.45);backdrop-filter:blur(34px);color:#fff;overflow:hidden}.user-view-text-container[data-v-fe5ee432]{position:absolute;left:0;top:0;width:100%;height:100%;z-index:11;display:flex;flex-direction:column;justify-content:center;align-items:center;transform:translateY(-20px)}.user-view-user-id[data-v-fe5ee432]{font-family:PingFang SC;font-style:normal;font-weight:600;font-size:24px;line-height:34px}.user-view-info[data-v-fe5ee432]{font-family:PingFang SC;font-style:normal;font-weight:400;font-size:12px;line-height:17px}.page-turn[data-v-fe5ee432]{width:40px;height:86px;border-radius:4.21px;background:rgba(0,0,0,.2);position:absolute;top:50%;transform:translateY(-50%);z-index:11;display:flex;justify-content:center;align-items:center;cursor:pointer}.turn-icon-container[data-v-fe5ee432]{width:14px;height:23px}.right[data-v-fe5ee432]{right:0}.microphone-icon-container[data-v-fe5ee432]{width:24px;height:24px;background:rgba(0,0,0,.4);border-radius:12px;display:flex;justify-content:center;align-items:center;margin-left:8px}.group-user-view-1[data-v-fe5ee432]{width:100%;height:100%}.group-calling-container-1[data-v-fe5ee432]{height:100%}.group-user-view-2[data-v-fe5ee432]{width:50%;height:100%}.group-calling-container-2[data-v-fe5ee432]{height:50%}.group-user-view-3[data-v-fe5ee432],.group-user-view-4[data-v-fe5ee432]{width:50%;height:50%}.group-calling-container-3[data-v-fe5ee432],.group-calling-container-4[data-v-fe5ee432]{height:100%}.group-user-view-5[data-v-fe5ee432],.group-user-view-6[data-v-fe5ee432]{width:33.333%;height:50%}.group-calling-container-5[data-v-fe5ee432],.group-calling-container-6[data-v-fe5ee432]{height:66%}.user-view-user-id-1[data-v-fe5ee432]{font-size:24px}.user-view-user-id-2[data-v-fe5ee432],.user-view-user-id-3[data-v-fe5ee432],.user-view-user-id-4[data-v-fe5ee432]{font-size:22px}.user-view-user-id-5[data-v-fe5ee432],.user-view-user-id-6[data-v-fe5ee432],.user-view-user-id-7[data-v-fe5ee432],.user-view-user-id-8[data-v-fe5ee432],.user-view-user-id-9[data-v-fe5ee432]{font-size:18px}.float-control-panel[data-v-fe5ee432]{width:168px;height:56px;background:white;z-index:13;position:fixed;top:20px;right:20px;display:flex;flex-wrap:nowrap;justify-content:center;border-radius:40px;box-shadow:#00000029 0 3px 6px,#0000003b 0 3px 6px}.function-buttons[data-v-fe5ee432]{position:absolute;right:12px;top:12px;z-index:13;cursor:pointer;display:flex;flex-direction:row;justify-content:flex-start}.minimize[data-v-fe5ee432]{margin-left:10px}.float-control-item-icon[data-v-fe5ee432]{display:flex;flex-direction:row;justify-content:center;align-items:center;width:56px;height:56px;position:relative}.float-control-item-icon-container[data-v-fe5ee432]{border-radius:40px;width:40px;height:40px;margin:.5rem;cursor:pointer;display:flex;flex-direction:row;justify-content:center;align-items:center}.float-control-item-icon-container[data-v-fe5ee432]:hover{background:rgba(218,218,218,.3)}.tui-call-kit[data-v-5cd745e1]{width:100%;height:100%;position:relative;border-radius:inherit}.calling-wrapper[data-v-5cd745e1]{position:relative;width:100%;height:100%;border-radius:inherit;background:rgba(0,24,60,.7);backdrop-filter:blur(34px);display:flex;flex-direction:column;justify-content:center;overflow:hidden;z-index:12}.calling-wrapper[data-v-5cd745e1]:hover{z-index:inherit;transition:all .5s ease-in-out}.dialing-wrapper[data-v-5cd745e1]{background:#00183C;color:#fff;opacity:.7;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;border-radius:inherit;top:0;left:0;z-index:10;overflow:hidden}.dialing-local[data-v-5cd745e1]{position:absolute;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.dialing-content[data-v-5cd745e1]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;position:relative;top:-3rem}#local-dialing[data-v-5cd745e1],#local-group[data-v-5cd745e1]{background:black;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLWRhc2hhcnJheT0iMTUiIHN0cm9rZS1kYXNob2Zmc2V0PSIxNSIKCQlzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEyIDNDMTYuOTcwNiAzIDIxIDcuMDI5NDQgMjEgMTIiPgoJCTxhbmltYXRlIGZpbGw9ImZyZWV6ZSIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLWRhc2hvZmZzZXQiIGR1cj0iMC4zcyIgdmFsdWVzPSIxNTswIiAvPgoJCTxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgZHVyPSIxLjVzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIKCQkJdHlwZT0icm90YXRlIiB2YWx1ZXM9IjAgMTIgMTI7MzYwIDEyIDEyIiAvPgoJPC9wYXRoPgo8L3N2Zz4=);background-repeat:no-repeat;background-size:auto;background-position-x:center;background-position-y:calc(50% + 10px)}.dialing-user-id[data-v-5cd745e1]{font-style:normal;font-weight:600;font-size:40px;width:100%;line-height:56px;display:flex;align-items:center;justify-content:center}.dialing-info[data-v-5cd745e1]{font-style:normal;font-weight:400;font-size:14px;line-height:20px}.control-wrapper[data-v-5cd745e1]{transform:translate(-50%);position:absolute;bottom:0;padding-bottom:40px;left:50%;width:100%;color:#fff;border-radius:inherit;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,rgba(0,0,0,.4) 100%);display:flex;flex-direction:column;flex-wrap:wrap;align-items:center;z-index:11;user-select:none}.panel-button-area[data-v-5cd745e1]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;margin:30px 0}.panel-dialing-info[data-v-5cd745e1]{text-align:center}.control-wrapper[data-v-5cd745e1]:hover{z-index:13}.control-item[data-v-5cd745e1]{display:flex;flex-direction:column;width:100px;margin:0 20px}.control-item-h5[data-v-5cd745e1]{display:flex;flex-direction:column;width:100px;margin:0}.control-item-text[data-v-5cd745e1]{margin-top:5px;white-space:nowrap;font-weight:400;font-size:14px;line-height:20px;text-align:center}.control-item-icon[data-v-5cd745e1]{width:100%;display:flex;flex-direction:row;justify-content:center;align-items:center;position:relative}.control-item-icon-container-small[data-v-5cd745e1]{background:rgba(218,218,218,.3);border-radius:40px;width:40px;height:40px;margin:8px;cursor:pointer}.control-item-icon-container-medium[data-v-5cd745e1]{background:rgba(0,0,0,.3);border-radius:56px;width:56px;height:56px;margin:8px;cursor:pointer}.control-item-icon-container-large[data-v-5cd745e1]{background:rgba(0,0,0,.3);border-radius:68px;width:68px;height:68px;margin:8px;cursor:pointer}.control-item-summary[data-v-5cd745e1]{height:40px;width:12px;right:0;display:flex;justify-content:center;align-items:center;cursor:pointer}.control-item-summary[data-v-5cd745e1]:hover{background:rgba(0,0,0,.4)}.control-item-detail[data-v-5cd745e1]{width:300px;border-radius:4px;background:#FEFEFF;box-shadow:#0000003d 0 3px 8px;color:#000;padding:20px;position:absolute;transform:translate(28px);bottom:110%}.control-item-detail-row[data-v-5cd745e1]{margin-bottom:6px;font-size:16px}.device-select[data-v-5cd745e1]{height:32px;width:100%;border:1px solid #DEE0E3;padding-left:6px;padding-top:6px;padding-bottom:6px;margin-top:10px;margin-bottom:10px;font-size:14px;color:#596174}.control-item-detail[data-v-5cd745e1]:before{content:"";width:0;height:0;border-width:10px;border-style:solid;border-color:#FEFEFF transparent transparent;bottom:-3px;margin-left:-9px;position:absolute;left:50%;border-color:#fff;border-radius:4px;transform:rotate(60deg) skew(30deg)}.tag[data-v-5cd745e1]{color:#fff;z-index:inherit;background:rgba(0,0,0,.6);padding:2px 10px;border-top-right-radius:inherit;border-bottom-left-radius:inherit;font-size:14px;position:absolute;left:0;bottom:0;z-index:11;display:flex;align-items:center}.tag .microphone-icon-container[data-v-5cd745e1]{margin-left:0;margin-right:2px;width:20px;background-color:transparent}.switch-large-small[data-v-5cd745e1]{position:absolute;right:12px;top:12px;width:16px;height:16px;z-index:inherit;cursor:pointer}.small-h5[data-v-5cd745e1]{position:absolute;width:94px;height:160px;min-height:100px;max-height:60%;top:30px;right:10px;z-index:2;overflow:hidden;background:#000;border-radius:4px}.small[data-v-5cd745e1]{position:absolute;width:260px;height:170px;min-height:100px;max-height:60%;top:30px;left:30px;z-index:2;overflow:hidden;resize:both;background:#000;border-radius:4px}.large[data-v-5cd745e1]{min-height:100px;width:100%;height:100%;z-index:1;border-radius:inherit;overflow:hidden}.large .switch-large-small[data-v-5cd745e1]{display:none}.group-calling-container[data-v-5cd745e1]{width:100%;height:100%;display:flex;flex-wrap:wrap;justify-content:center}.group-user-view[data-v-5cd745e1]{width:33.333%;height:33.333%;position:relative;background:rgba(32,32,32,.45);backdrop-filter:blur(34px);color:#fff;overflow:hidden}.user-view-text-container[data-v-5cd745e1]{position:absolute;left:0;top:0;width:100%;height:100%;z-index:11;display:flex;flex-direction:column;justify-content:center;align-items:center;transform:translateY(-20px)}.user-view-user-id[data-v-5cd745e1]{font-family:PingFang SC;font-style:normal;font-weight:600;font-size:24px;line-height:34px}.user-view-info[data-v-5cd745e1]{font-family:PingFang SC;font-style:normal;font-weight:400;font-size:12px;line-height:17px}.page-turn[data-v-5cd745e1]{width:40px;height:86px;border-radius:4.21px;background:rgba(0,0,0,.2);position:absolute;top:50%;transform:translateY(-50%);z-index:11;display:flex;justify-content:center;align-items:center;cursor:pointer}.turn-icon-container[data-v-5cd745e1]{width:14px;height:23px}.right[data-v-5cd745e1]{right:0}.microphone-icon-container[data-v-5cd745e1]{width:24px;height:24px;background:rgba(0,0,0,.4);border-radius:12px;display:flex;justify-content:center;align-items:center;margin-left:8px}.group-user-view-1[data-v-5cd745e1]{width:100%;height:100%}.group-calling-container-1[data-v-5cd745e1]{height:100%}.group-user-view-2[data-v-5cd745e1]{width:50%;height:100%}.group-calling-container-2[data-v-5cd745e1]{height:50%}.group-user-view-3[data-v-5cd745e1],.group-user-view-4[data-v-5cd745e1]{width:50%;height:50%}.group-calling-container-3[data-v-5cd745e1],.group-calling-container-4[data-v-5cd745e1]{height:100%}.group-user-view-5[data-v-5cd745e1],.group-user-view-6[data-v-5cd745e1]{width:33.333%;height:50%}.group-calling-container-5[data-v-5cd745e1],.group-calling-container-6[data-v-5cd745e1]{height:66%}.user-view-user-id-1[data-v-5cd745e1]{font-size:24px}.user-view-user-id-2[data-v-5cd745e1],.user-view-user-id-3[data-v-5cd745e1],.user-view-user-id-4[data-v-5cd745e1]{font-size:22px}.user-view-user-id-5[data-v-5cd745e1],.user-view-user-id-6[data-v-5cd745e1],.user-view-user-id-7[data-v-5cd745e1],.user-view-user-id-8[data-v-5cd745e1],.user-view-user-id-9[data-v-5cd745e1]{font-size:18px}.float-control-panel[data-v-5cd745e1]{width:168px;height:56px;background:white;z-index:13;position:fixed;top:20px;right:20px;display:flex;flex-wrap:nowrap;justify-content:center;border-radius:40px;box-shadow:#00000029 0 3px 6px,#0000003b 0 3px 6px}.function-buttons[data-v-5cd745e1]{position:absolute;right:12px;top:12px;z-index:13;cursor:pointer;display:flex;flex-direction:row;justify-content:flex-start}.minimize[data-v-5cd745e1]{margin-left:10px}.float-control-item-icon[data-v-5cd745e1]{display:flex;flex-direction:row;justify-content:center;align-items:center;width:56px;height:56px;position:relative}.float-control-item-icon-container[data-v-5cd745e1]{border-radius:40px;width:40px;height:40px;margin:.5rem;cursor:pointer;display:flex;flex-direction:row;justify-content:center;align-items:center}.float-control-item-icon-container[data-v-5cd745e1]:hover{background:rgba(218,218,218,.3)}.tui-call-kit[data-v-974fb4e2]{width:100%;height:100%;position:relative;border-radius:inherit}.calling-wrapper[data-v-974fb4e2]{position:relative;width:100%;height:100%;border-radius:inherit;background:rgba(0,24,60,.7);backdrop-filter:blur(34px);display:flex;flex-direction:column;justify-content:center;overflow:hidden;z-index:12}.calling-wrapper[data-v-974fb4e2]:hover{z-index:inherit;transition:all .5s ease-in-out}.dialing-wrapper[data-v-974fb4e2]{background:#00183C;color:#fff;opacity:.7;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;border-radius:inherit;top:0;left:0;z-index:10;overflow:hidden}.dialing-local[data-v-974fb4e2]{position:absolute;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.dialing-content[data-v-974fb4e2]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;position:relative;top:-3rem}#local-dialing[data-v-974fb4e2],#local-group[data-v-974fb4e2]{background:black;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLWRhc2hhcnJheT0iMTUiIHN0cm9rZS1kYXNob2Zmc2V0PSIxNSIKCQlzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEyIDNDMTYuOTcwNiAzIDIxIDcuMDI5NDQgMjEgMTIiPgoJCTxhbmltYXRlIGZpbGw9ImZyZWV6ZSIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLWRhc2hvZmZzZXQiIGR1cj0iMC4zcyIgdmFsdWVzPSIxNTswIiAvPgoJCTxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgZHVyPSIxLjVzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIKCQkJdHlwZT0icm90YXRlIiB2YWx1ZXM9IjAgMTIgMTI7MzYwIDEyIDEyIiAvPgoJPC9wYXRoPgo8L3N2Zz4=);background-repeat:no-repeat;background-size:auto;background-position-x:center;background-position-y:calc(50% + 10px)}.dialing-user-id[data-v-974fb4e2]{font-style:normal;font-weight:600;font-size:40px;width:100%;line-height:56px;display:flex;align-items:center;justify-content:center}.dialing-info[data-v-974fb4e2]{font-style:normal;font-weight:400;font-size:14px;line-height:20px}.control-wrapper[data-v-974fb4e2]{transform:translate(-50%);position:absolute;bottom:0;padding-bottom:40px;left:50%;width:100%;color:#fff;border-radius:inherit;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,rgba(0,0,0,.4) 100%);display:flex;flex-direction:column;flex-wrap:wrap;align-items:center;z-index:11;user-select:none}.panel-button-area[data-v-974fb4e2]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;margin:30px 0}.panel-dialing-info[data-v-974fb4e2]{text-align:center}.control-wrapper[data-v-974fb4e2]:hover{z-index:13}.control-item[data-v-974fb4e2]{display:flex;flex-direction:column;width:100px;margin:0 20px}.control-item-h5[data-v-974fb4e2]{display:flex;flex-direction:column;width:100px;margin:0}.control-item-text[data-v-974fb4e2]{margin-top:5px;white-space:nowrap;font-weight:400;font-size:14px;line-height:20px;text-align:center}.control-item-icon[data-v-974fb4e2]{width:100%;display:flex;flex-direction:row;justify-content:center;align-items:center;position:relative}.control-item-icon-container-small[data-v-974fb4e2]{background:rgba(218,218,218,.3);border-radius:40px;width:40px;height:40px;margin:8px;cursor:pointer}.control-item-icon-container-medium[data-v-974fb4e2]{background:rgba(0,0,0,.3);border-radius:56px;width:56px;height:56px;margin:8px;cursor:pointer}.control-item-icon-container-large[data-v-974fb4e2]{background:rgba(0,0,0,.3);border-radius:68px;width:68px;height:68px;margin:8px;cursor:pointer}.control-item-summary[data-v-974fb4e2]{height:40px;width:12px;right:0;display:flex;justify-content:center;align-items:center;cursor:pointer}.control-item-summary[data-v-974fb4e2]:hover{background:rgba(0,0,0,.4)}.control-item-detail[data-v-974fb4e2]{width:300px;border-radius:4px;background:#FEFEFF;box-shadow:#0000003d 0 3px 8px;color:#000;padding:20px;position:absolute;transform:translate(28px);bottom:110%}.control-item-detail-row[data-v-974fb4e2]{margin-bottom:6px;font-size:16px}.device-select[data-v-974fb4e2]{height:32px;width:100%;border:1px solid #DEE0E3;padding-left:6px;padding-top:6px;padding-bottom:6px;margin-top:10px;margin-bottom:10px;font-size:14px;color:#596174}.control-item-detail[data-v-974fb4e2]:before{content:"";width:0;height:0;border-width:10px;border-style:solid;border-color:#FEFEFF transparent transparent;bottom:-3px;margin-left:-9px;position:absolute;left:50%;border-color:#fff;border-radius:4px;transform:rotate(60deg) skew(30deg)}.tag[data-v-974fb4e2]{color:#fff;z-index:inherit;background:rgba(0,0,0,.6);padding:2px 10px;border-top-right-radius:inherit;border-bottom-left-radius:inherit;font-size:14px;position:absolute;left:0;bottom:0;z-index:11;display:flex;align-items:center}.tag .microphone-icon-container[data-v-974fb4e2]{margin-left:0;margin-right:2px;width:20px;background-color:transparent}.switch-large-small[data-v-974fb4e2]{position:absolute;right:12px;top:12px;width:16px;height:16px;z-index:inherit;cursor:pointer}.small-h5[data-v-974fb4e2]{position:absolute;width:94px;height:160px;min-height:100px;max-height:60%;top:30px;right:10px;z-index:2;overflow:hidden;background:#000;border-radius:4px}.small[data-v-974fb4e2]{position:absolute;width:260px;height:170px;min-height:100px;max-height:60%;top:30px;left:30px;z-index:2;overflow:hidden;resize:both;background:#000;border-radius:4px}.large[data-v-974fb4e2]{min-height:100px;width:100%;height:100%;z-index:1;border-radius:inherit;overflow:hidden}.large .switch-large-small[data-v-974fb4e2]{display:none}.group-calling-container[data-v-974fb4e2]{width:100%;height:100%;display:flex;flex-wrap:wrap;justify-content:center}.group-user-view[data-v-974fb4e2]{width:33.333%;height:33.333%;position:relative;background:rgba(32,32,32,.45);backdrop-filter:blur(34px);color:#fff;overflow:hidden}.user-view-text-container[data-v-974fb4e2]{position:absolute;left:0;top:0;width:100%;height:100%;z-index:11;display:flex;flex-direction:column;justify-content:center;align-items:center;transform:translateY(-20px)}.user-view-user-id[data-v-974fb4e2]{font-family:PingFang SC;font-style:normal;font-weight:600;font-size:24px;line-height:34px}.user-view-info[data-v-974fb4e2]{font-family:PingFang SC;font-style:normal;font-weight:400;font-size:12px;line-height:17px}.page-turn[data-v-974fb4e2]{width:40px;height:86px;border-radius:4.21px;background:rgba(0,0,0,.2);position:absolute;top:50%;transform:translateY(-50%);z-index:11;display:flex;justify-content:center;align-items:center;cursor:pointer}.turn-icon-container[data-v-974fb4e2]{width:14px;height:23px}.right[data-v-974fb4e2]{right:0}.microphone-icon-container[data-v-974fb4e2]{width:24px;height:24px;background:rgba(0,0,0,.4);border-radius:12px;display:flex;justify-content:center;align-items:center;margin-left:8px}.group-user-view-1[data-v-974fb4e2]{width:100%;height:100%}.group-calling-container-1[data-v-974fb4e2]{height:100%}.group-user-view-2[data-v-974fb4e2]{width:50%;height:100%}.group-calling-container-2[data-v-974fb4e2]{height:50%}.group-user-view-3[data-v-974fb4e2],.group-user-view-4[data-v-974fb4e2]{width:50%;height:50%}.group-calling-container-3[data-v-974fb4e2],.group-calling-container-4[data-v-974fb4e2]{height:100%}.group-user-view-5[data-v-974fb4e2],.group-user-view-6[data-v-974fb4e2]{width:33.333%;height:50%}.group-calling-container-5[data-v-974fb4e2],.group-calling-container-6[data-v-974fb4e2]{height:66%}.user-view-user-id-1[data-v-974fb4e2]{font-size:24px}.user-view-user-id-2[data-v-974fb4e2],.user-view-user-id-3[data-v-974fb4e2],.user-view-user-id-4[data-v-974fb4e2]{font-size:22px}.user-view-user-id-5[data-v-974fb4e2],.user-view-user-id-6[data-v-974fb4e2],.user-view-user-id-7[data-v-974fb4e2],.user-view-user-id-8[data-v-974fb4e2],.user-view-user-id-9[data-v-974fb4e2]{font-size:18px}.float-control-panel[data-v-974fb4e2]{width:168px;height:56px;background:white;z-index:13;position:fixed;top:20px;right:20px;display:flex;flex-wrap:nowrap;justify-content:center;border-radius:40px;box-shadow:#00000029 0 3px 6px,#0000003b 0 3px 6px}.function-buttons[data-v-974fb4e2]{position:absolute;right:12px;top:12px;z-index:13;cursor:pointer;display:flex;flex-direction:row;justify-content:flex-start}.minimize[data-v-974fb4e2]{margin-left:10px}.float-control-item-icon[data-v-974fb4e2]{display:flex;flex-direction:row;justify-content:center;align-items:center;width:56px;height:56px;position:relative}.float-control-item-icon-container[data-v-974fb4e2]{border-radius:40px;width:40px;height:40px;margin:.5rem;cursor:pointer;display:flex;flex-direction:row;justify-content:center;align-items:center}.float-control-item-icon-container[data-v-974fb4e2]:hover{background:rgba(218,218,218,.3)}.tui-call-kit[data-v-3f247d2e]{width:100%;height:100%;position:relative;border-radius:inherit}.calling-wrapper[data-v-3f247d2e]{position:relative;width:100%;height:100%;border-radius:inherit;background:rgba(0,24,60,.7);backdrop-filter:blur(34px);display:flex;flex-direction:column;justify-content:center;overflow:hidden;z-index:12}.calling-wrapper[data-v-3f247d2e]:hover{z-index:inherit;transition:all .5s ease-in-out}.dialing-wrapper[data-v-3f247d2e]{background:#00183C;color:#fff;opacity:.7;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;border-radius:inherit;top:0;left:0;z-index:10;overflow:hidden}.dialing-local[data-v-3f247d2e]{position:absolute;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.dialing-content[data-v-3f247d2e]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;position:relative;top:-3rem}#local-dialing[data-v-3f247d2e],#local-group[data-v-3f247d2e]{background:black;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLWRhc2hhcnJheT0iMTUiIHN0cm9rZS1kYXNob2Zmc2V0PSIxNSIKCQlzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEyIDNDMTYuOTcwNiAzIDIxIDcuMDI5NDQgMjEgMTIiPgoJCTxhbmltYXRlIGZpbGw9ImZyZWV6ZSIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLWRhc2hvZmZzZXQiIGR1cj0iMC4zcyIgdmFsdWVzPSIxNTswIiAvPgoJCTxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgZHVyPSIxLjVzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIKCQkJdHlwZT0icm90YXRlIiB2YWx1ZXM9IjAgMTIgMTI7MzYwIDEyIDEyIiAvPgoJPC9wYXRoPgo8L3N2Zz4=);background-repeat:no-repeat;background-size:auto;background-position-x:center;background-position-y:calc(50% + 10px)}.dialing-user-id[data-v-3f247d2e]{font-style:normal;font-weight:600;font-size:40px;width:100%;line-height:56px;display:flex;align-items:center;justify-content:center}.dialing-info[data-v-3f247d2e]{font-style:normal;font-weight:400;font-size:14px;line-height:20px}.control-wrapper[data-v-3f247d2e]{transform:translate(-50%);position:absolute;bottom:0;padding-bottom:40px;left:50%;width:100%;color:#fff;border-radius:inherit;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,rgba(0,0,0,.4) 100%);display:flex;flex-direction:column;flex-wrap:wrap;align-items:center;z-index:11;user-select:none}.panel-button-area[data-v-3f247d2e]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;margin:30px 0}.panel-dialing-info[data-v-3f247d2e]{text-align:center}.control-wrapper[data-v-3f247d2e]:hover{z-index:13}.control-item[data-v-3f247d2e]{display:flex;flex-direction:column;width:100px;margin:0 20px}.control-item-h5[data-v-3f247d2e]{display:flex;flex-direction:column;width:100px;margin:0}.control-item-text[data-v-3f247d2e]{margin-top:5px;white-space:nowrap;font-weight:400;font-size:14px;line-height:20px;text-align:center}.control-item-icon[data-v-3f247d2e]{width:100%;display:flex;flex-direction:row;justify-content:center;align-items:center;position:relative}.control-item-icon-container-small[data-v-3f247d2e]{background:rgba(218,218,218,.3);border-radius:40px;width:40px;height:40px;margin:8px;cursor:pointer}.control-item-icon-container-medium[data-v-3f247d2e]{background:rgba(0,0,0,.3);border-radius:56px;width:56px;height:56px;margin:8px;cursor:pointer}.control-item-icon-container-large[data-v-3f247d2e]{background:rgba(0,0,0,.3);border-radius:68px;width:68px;height:68px;margin:8px;cursor:pointer}.control-item-summary[data-v-3f247d2e]{height:40px;width:12px;right:0;display:flex;justify-content:center;align-items:center;cursor:pointer}.control-item-summary[data-v-3f247d2e]:hover{background:rgba(0,0,0,.4)}.control-item-detail[data-v-3f247d2e]{width:300px;border-radius:4px;background:#FEFEFF;box-shadow:#0000003d 0 3px 8px;color:#000;padding:20px;position:absolute;transform:translate(28px);bottom:110%}.control-item-detail-row[data-v-3f247d2e]{margin-bottom:6px;font-size:16px}.device-select[data-v-3f247d2e]{height:32px;width:100%;border:1px solid #DEE0E3;padding-left:6px;padding-top:6px;padding-bottom:6px;margin-top:10px;margin-bottom:10px;font-size:14px;color:#596174}.control-item-detail[data-v-3f247d2e]:before{content:"";width:0;height:0;border-width:10px;border-style:solid;border-color:#FEFEFF transparent transparent;bottom:-3px;margin-left:-9px;position:absolute;left:50%;border-color:#fff;border-radius:4px;transform:rotate(60deg) skew(30deg)}.tag[data-v-3f247d2e]{color:#fff;z-index:inherit;background:rgba(0,0,0,.6);padding:2px 10px;border-top-right-radius:inherit;border-bottom-left-radius:inherit;font-size:14px;position:absolute;left:0;bottom:0;z-index:11;display:flex;align-items:center}.tag .microphone-icon-container[data-v-3f247d2e]{margin-left:0;margin-right:2px;width:20px;background-color:transparent}.switch-large-small[data-v-3f247d2e]{position:absolute;right:12px;top:12px;width:16px;height:16px;z-index:inherit;cursor:pointer}.small-h5[data-v-3f247d2e]{position:absolute;width:94px;height:160px;min-height:100px;max-height:60%;top:30px;right:10px;z-index:2;overflow:hidden;background:#000;border-radius:4px}.small[data-v-3f247d2e]{position:absolute;width:260px;height:170px;min-height:100px;max-height:60%;top:30px;left:30px;z-index:2;overflow:hidden;resize:both;background:#000;border-radius:4px}.large[data-v-3f247d2e]{min-height:100px;width:100%;height:100%;z-index:1;border-radius:inherit;overflow:hidden}.large .switch-large-small[data-v-3f247d2e]{display:none}.group-calling-container[data-v-3f247d2e]{width:100%;height:100%;display:flex;flex-wrap:wrap;justify-content:center}.group-user-view[data-v-3f247d2e]{width:33.333%;height:33.333%;position:relative;background:rgba(32,32,32,.45);backdrop-filter:blur(34px);color:#fff;overflow:hidden}.user-view-text-container[data-v-3f247d2e]{position:absolute;left:0;top:0;width:100%;height:100%;z-index:11;display:flex;flex-direction:column;justify-content:center;align-items:center;transform:translateY(-20px)}.user-view-user-id[data-v-3f247d2e]{font-family:PingFang SC;font-style:normal;font-weight:600;font-size:24px;line-height:34px}.user-view-info[data-v-3f247d2e]{font-family:PingFang SC;font-style:normal;font-weight:400;font-size:12px;line-height:17px}.page-turn[data-v-3f247d2e]{width:40px;height:86px;border-radius:4.21px;background:rgba(0,0,0,.2);position:absolute;top:50%;transform:translateY(-50%);z-index:11;display:flex;justify-content:center;align-items:center;cursor:pointer}.turn-icon-container[data-v-3f247d2e]{width:14px;height:23px}.right[data-v-3f247d2e]{right:0}.microphone-icon-container[data-v-3f247d2e]{width:24px;height:24px;background:rgba(0,0,0,.4);border-radius:12px;display:flex;justify-content:center;align-items:center;margin-left:8px}.group-user-view-1[data-v-3f247d2e]{width:100%;height:100%}.group-calling-container-1[data-v-3f247d2e]{height:100%}.group-user-view-2[data-v-3f247d2e]{width:50%;height:100%}.group-calling-container-2[data-v-3f247d2e]{height:50%}.group-user-view-3[data-v-3f247d2e],.group-user-view-4[data-v-3f247d2e]{width:50%;height:50%}.group-calling-container-3[data-v-3f247d2e],.group-calling-container-4[data-v-3f247d2e]{height:100%}.group-user-view-5[data-v-3f247d2e],.group-user-view-6[data-v-3f247d2e]{width:33.333%;height:50%}.group-calling-container-5[data-v-3f247d2e],.group-calling-container-6[data-v-3f247d2e]{height:66%}.user-view-user-id-1[data-v-3f247d2e]{font-size:24px}.user-view-user-id-2[data-v-3f247d2e],.user-view-user-id-3[data-v-3f247d2e],.user-view-user-id-4[data-v-3f247d2e]{font-size:22px}.user-view-user-id-5[data-v-3f247d2e],.user-view-user-id-6[data-v-3f247d2e],.user-view-user-id-7[data-v-3f247d2e],.user-view-user-id-8[data-v-3f247d2e],.user-view-user-id-9[data-v-3f247d2e]{font-size:18px}.float-control-panel[data-v-3f247d2e]{width:168px;height:56px;background:white;z-index:13;position:fixed;top:20px;right:20px;display:flex;flex-wrap:nowrap;justify-content:center;border-radius:40px;box-shadow:#00000029 0 3px 6px,#0000003b 0 3px 6px}.function-buttons[data-v-3f247d2e]{position:absolute;right:12px;top:12px;z-index:13;cursor:pointer;display:flex;flex-direction:row;justify-content:flex-start}.minimize[data-v-3f247d2e]{margin-left:10px}.float-control-item-icon[data-v-3f247d2e]{display:flex;flex-direction:row;justify-content:center;align-items:center;width:56px;height:56px;position:relative}.float-control-item-icon-container[data-v-3f247d2e]{border-radius:40px;width:40px;height:40px;margin:.5rem;cursor:pointer;display:flex;flex-direction:row;justify-content:center;align-items:center}.float-control-item-icon-container[data-v-3f247d2e]:hover{background:rgba(218,218,218,.3)}.tui-call-kit[data-v-f5cadefc]{width:100%;height:100%;position:relative;border-radius:inherit}.calling-wrapper[data-v-f5cadefc]{position:relative;width:100%;height:100%;border-radius:inherit;background:rgba(0,24,60,.7);backdrop-filter:blur(34px);display:flex;flex-direction:column;justify-content:center;overflow:hidden;z-index:12}.calling-wrapper[data-v-f5cadefc]:hover{z-index:inherit;transition:all .5s ease-in-out}.dialing-wrapper[data-v-f5cadefc]{background:#00183C;color:#fff;opacity:.7;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;border-radius:inherit;top:0;left:0;z-index:10;overflow:hidden}.dialing-local[data-v-f5cadefc]{position:absolute;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.dialing-content[data-v-f5cadefc]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;position:relative;top:-3rem}#local-dialing[data-v-f5cadefc],#local-group[data-v-f5cadefc]{background:black;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLWRhc2hhcnJheT0iMTUiIHN0cm9rZS1kYXNob2Zmc2V0PSIxNSIKCQlzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEyIDNDMTYuOTcwNiAzIDIxIDcuMDI5NDQgMjEgMTIiPgoJCTxhbmltYXRlIGZpbGw9ImZyZWV6ZSIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLWRhc2hvZmZzZXQiIGR1cj0iMC4zcyIgdmFsdWVzPSIxNTswIiAvPgoJCTxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgZHVyPSIxLjVzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIKCQkJdHlwZT0icm90YXRlIiB2YWx1ZXM9IjAgMTIgMTI7MzYwIDEyIDEyIiAvPgoJPC9wYXRoPgo8L3N2Zz4=);background-repeat:no-repeat;background-size:auto;background-position-x:center;background-position-y:calc(50% + 10px)}.dialing-user-id[data-v-f5cadefc]{font-style:normal;font-weight:600;font-size:40px;width:100%;line-height:56px;display:flex;align-items:center;justify-content:center}.dialing-info[data-v-f5cadefc]{font-style:normal;font-weight:400;font-size:14px;line-height:20px}.control-wrapper[data-v-f5cadefc]{transform:translate(-50%);position:absolute;bottom:0;padding-bottom:40px;left:50%;width:100%;color:#fff;border-radius:inherit;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,rgba(0,0,0,.4) 100%);display:flex;flex-direction:column;flex-wrap:wrap;align-items:center;z-index:11;user-select:none}.panel-button-area[data-v-f5cadefc]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;margin:30px 0}.panel-dialing-info[data-v-f5cadefc]{text-align:center}.control-wrapper[data-v-f5cadefc]:hover{z-index:13}.control-item[data-v-f5cadefc]{display:flex;flex-direction:column;width:100px;margin:0 20px}.control-item-h5[data-v-f5cadefc]{display:flex;flex-direction:column;width:100px;margin:0}.control-item-text[data-v-f5cadefc]{margin-top:5px;white-space:nowrap;font-weight:400;font-size:14px;line-height:20px;text-align:center}.control-item-icon[data-v-f5cadefc]{width:100%;display:flex;flex-direction:row;justify-content:center;align-items:center;position:relative}.control-item-icon-container-small[data-v-f5cadefc]{background:rgba(218,218,218,.3);border-radius:40px;width:40px;height:40px;margin:8px;cursor:pointer}.control-item-icon-container-medium[data-v-f5cadefc]{background:rgba(0,0,0,.3);border-radius:56px;width:56px;height:56px;margin:8px;cursor:pointer}.control-item-icon-container-large[data-v-f5cadefc]{background:rgba(0,0,0,.3);border-radius:68px;width:68px;height:68px;margin:8px;cursor:pointer}.control-item-summary[data-v-f5cadefc]{height:40px;width:12px;right:0;display:flex;justify-content:center;align-items:center;cursor:pointer}.control-item-summary[data-v-f5cadefc]:hover{background:rgba(0,0,0,.4)}.control-item-detail[data-v-f5cadefc]{width:300px;border-radius:4px;background:#FEFEFF;box-shadow:#0000003d 0 3px 8px;color:#000;padding:20px;position:absolute;transform:translate(28px);bottom:110%}.control-item-detail-row[data-v-f5cadefc]{margin-bottom:6px;font-size:16px}.device-select[data-v-f5cadefc]{height:32px;width:100%;border:1px solid #DEE0E3;padding-left:6px;padding-top:6px;padding-bottom:6px;margin-top:10px;margin-bottom:10px;font-size:14px;color:#596174}.control-item-detail[data-v-f5cadefc]:before{content:"";width:0;height:0;border-width:10px;border-style:solid;border-color:#FEFEFF transparent transparent;bottom:-3px;margin-left:-9px;position:absolute;left:50%;border-color:#fff;border-radius:4px;transform:rotate(60deg) skew(30deg)}.tag[data-v-f5cadefc]{color:#fff;z-index:inherit;background:rgba(0,0,0,.6);padding:2px 10px;border-top-right-radius:inherit;border-bottom-left-radius:inherit;font-size:14px;position:absolute;left:0;bottom:0;z-index:11;display:flex;align-items:center}.tag .microphone-icon-container[data-v-f5cadefc]{margin-left:0;margin-right:2px;width:20px;background-color:transparent}.switch-large-small[data-v-f5cadefc]{position:absolute;right:12px;top:12px;width:16px;height:16px;z-index:inherit;cursor:pointer}.small-h5[data-v-f5cadefc]{position:absolute;width:94px;height:160px;min-height:100px;max-height:60%;top:30px;right:10px;z-index:2;overflow:hidden;background:#000;border-radius:4px}.small[data-v-f5cadefc]{position:absolute;width:260px;height:170px;min-height:100px;max-height:60%;top:30px;left:30px;z-index:2;overflow:hidden;resize:both;background:#000;border-radius:4px}.large[data-v-f5cadefc]{min-height:100px;width:100%;height:100%;z-index:1;border-radius:inherit;overflow:hidden}.large .switch-large-small[data-v-f5cadefc]{display:none}.group-calling-container[data-v-f5cadefc]{width:100%;height:100%;display:flex;flex-wrap:wrap;justify-content:center}.group-user-view[data-v-f5cadefc]{width:33.333%;height:33.333%;position:relative;background:rgba(32,32,32,.45);backdrop-filter:blur(34px);color:#fff;overflow:hidden}.user-view-text-container[data-v-f5cadefc]{position:absolute;left:0;top:0;width:100%;height:100%;z-index:11;display:flex;flex-direction:column;justify-content:center;align-items:center;transform:translateY(-20px)}.user-view-user-id[data-v-f5cadefc]{font-family:PingFang SC;font-style:normal;font-weight:600;font-size:24px;line-height:34px}.user-view-info[data-v-f5cadefc]{font-family:PingFang SC;font-style:normal;font-weight:400;font-size:12px;line-height:17px}.page-turn[data-v-f5cadefc]{width:40px;height:86px;border-radius:4.21px;background:rgba(0,0,0,.2);position:absolute;top:50%;transform:translateY(-50%);z-index:11;display:flex;justify-content:center;align-items:center;cursor:pointer}.turn-icon-container[data-v-f5cadefc]{width:14px;height:23px}.right[data-v-f5cadefc]{right:0}.microphone-icon-container[data-v-f5cadefc]{width:24px;height:24px;background:rgba(0,0,0,.4);border-radius:12px;display:flex;justify-content:center;align-items:center;margin-left:8px}.group-user-view-1[data-v-f5cadefc]{width:100%;height:100%}.group-calling-container-1[data-v-f5cadefc]{height:100%}.group-user-view-2[data-v-f5cadefc]{width:50%;height:100%}.group-calling-container-2[data-v-f5cadefc]{height:50%}.group-user-view-3[data-v-f5cadefc],.group-user-view-4[data-v-f5cadefc]{width:50%;height:50%}.group-calling-container-3[data-v-f5cadefc],.group-calling-container-4[data-v-f5cadefc]{height:100%}.group-user-view-5[data-v-f5cadefc],.group-user-view-6[data-v-f5cadefc]{width:33.333%;height:50%}.group-calling-container-5[data-v-f5cadefc],.group-calling-container-6[data-v-f5cadefc]{height:66%}.user-view-user-id-1[data-v-f5cadefc]{font-size:24px}.user-view-user-id-2[data-v-f5cadefc],.user-view-user-id-3[data-v-f5cadefc],.user-view-user-id-4[data-v-f5cadefc]{font-size:22px}.user-view-user-id-5[data-v-f5cadefc],.user-view-user-id-6[data-v-f5cadefc],.user-view-user-id-7[data-v-f5cadefc],.user-view-user-id-8[data-v-f5cadefc],.user-view-user-id-9[data-v-f5cadefc]{font-size:18px}.float-control-panel[data-v-f5cadefc]{width:168px;height:56px;background:white;z-index:13;position:fixed;top:20px;right:20px;display:flex;flex-wrap:nowrap;justify-content:center;border-radius:40px;box-shadow:#00000029 0 3px 6px,#0000003b 0 3px 6px}.function-buttons[data-v-f5cadefc]{position:absolute;right:12px;top:12px;z-index:13;cursor:pointer;display:flex;flex-direction:row;justify-content:flex-start}.minimize[data-v-f5cadefc]{margin-left:10px}.float-control-item-icon[data-v-f5cadefc]{display:flex;flex-direction:row;justify-content:center;align-items:center;width:56px;height:56px;position:relative}.float-control-item-icon-container[data-v-f5cadefc]{border-radius:40px;width:40px;height:40px;margin:.5rem;cursor:pointer;display:flex;flex-direction:row;justify-content:center;align-items:center}.float-control-item-icon-container[data-v-f5cadefc]:hover{background:rgba(218,218,218,.3)}.tui-call-kit[data-v-be0037c8]{width:100%;height:100%;position:relative;border-radius:inherit}.calling-wrapper[data-v-be0037c8]{position:relative;width:100%;height:100%;border-radius:inherit;background:rgba(0,24,60,.7);backdrop-filter:blur(34px);display:flex;flex-direction:column;justify-content:center;overflow:hidden;z-index:12}.calling-wrapper[data-v-be0037c8]:hover{z-index:inherit;transition:all .5s ease-in-out}.dialing-wrapper[data-v-be0037c8]{background:#00183C;color:#fff;opacity:.7;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;border-radius:inherit;top:0;left:0;z-index:10;overflow:hidden}.dialing-local[data-v-be0037c8]{position:absolute;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.dialing-content[data-v-be0037c8]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;position:relative;top:-3rem}#local-dialing[data-v-be0037c8],#local-group[data-v-be0037c8]{background:black;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLWRhc2hhcnJheT0iMTUiIHN0cm9rZS1kYXNob2Zmc2V0PSIxNSIKCQlzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEyIDNDMTYuOTcwNiAzIDIxIDcuMDI5NDQgMjEgMTIiPgoJCTxhbmltYXRlIGZpbGw9ImZyZWV6ZSIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLWRhc2hvZmZzZXQiIGR1cj0iMC4zcyIgdmFsdWVzPSIxNTswIiAvPgoJCTxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgZHVyPSIxLjVzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIKCQkJdHlwZT0icm90YXRlIiB2YWx1ZXM9IjAgMTIgMTI7MzYwIDEyIDEyIiAvPgoJPC9wYXRoPgo8L3N2Zz4=);background-repeat:no-repeat;background-size:auto;background-position-x:center;background-position-y:calc(50% + 10px)}.dialing-user-id[data-v-be0037c8]{font-style:normal;font-weight:600;font-size:40px;width:100%;line-height:56px;display:flex;align-items:center;justify-content:center}.dialing-info[data-v-be0037c8]{font-style:normal;font-weight:400;font-size:14px;line-height:20px}.control-wrapper[data-v-be0037c8]{transform:translate(-50%);position:absolute;bottom:0;padding-bottom:40px;left:50%;width:100%;color:#fff;border-radius:inherit;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,rgba(0,0,0,.4) 100%);display:flex;flex-direction:column;flex-wrap:wrap;align-items:center;z-index:11;user-select:none}.panel-button-area[data-v-be0037c8]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;margin:30px 0}.panel-dialing-info[data-v-be0037c8]{text-align:center}.control-wrapper[data-v-be0037c8]:hover{z-index:13}.control-item[data-v-be0037c8]{display:flex;flex-direction:column;width:100px;margin:0 20px}.control-item-h5[data-v-be0037c8]{display:flex;flex-direction:column;width:100px;margin:0}.control-item-text[data-v-be0037c8]{margin-top:5px;white-space:nowrap;font-weight:400;font-size:14px;line-height:20px;text-align:center}.control-item-icon[data-v-be0037c8]{width:100%;display:flex;flex-direction:row;justify-content:center;align-items:center;position:relative}.control-item-icon-container-small[data-v-be0037c8]{background:rgba(218,218,218,.3);border-radius:40px;width:40px;height:40px;margin:8px;cursor:pointer}.control-item-icon-container-medium[data-v-be0037c8]{background:rgba(0,0,0,.3);border-radius:56px;width:56px;height:56px;margin:8px;cursor:pointer}.control-item-icon-container-large[data-v-be0037c8]{background:rgba(0,0,0,.3);border-radius:68px;width:68px;height:68px;margin:8px;cursor:pointer}.control-item-summary[data-v-be0037c8]{height:40px;width:12px;right:0;display:flex;justify-content:center;align-items:center;cursor:pointer}.control-item-summary[data-v-be0037c8]:hover{background:rgba(0,0,0,.4)}.control-item-detail[data-v-be0037c8]{width:300px;border-radius:4px;background:#FEFEFF;box-shadow:#0000003d 0 3px 8px;color:#000;padding:20px;position:absolute;transform:translate(28px);bottom:110%}.control-item-detail-row[data-v-be0037c8]{margin-bottom:6px;font-size:16px}.device-select[data-v-be0037c8]{height:32px;width:100%;border:1px solid #DEE0E3;padding-left:6px;padding-top:6px;padding-bottom:6px;margin-top:10px;margin-bottom:10px;font-size:14px;color:#596174}.control-item-detail[data-v-be0037c8]:before{content:"";width:0;height:0;border-width:10px;border-style:solid;border-color:#FEFEFF transparent transparent;bottom:-3px;margin-left:-9px;position:absolute;left:50%;border-color:#fff;border-radius:4px;transform:rotate(60deg) skew(30deg)}.tag[data-v-be0037c8]{color:#fff;z-index:inherit;background:rgba(0,0,0,.6);padding:2px 10px;border-top-right-radius:inherit;border-bottom-left-radius:inherit;font-size:14px;position:absolute;left:0;bottom:0;z-index:11;display:flex;align-items:center}.tag .microphone-icon-container[data-v-be0037c8]{margin-left:0;margin-right:2px;width:20px;background-color:transparent}.switch-large-small[data-v-be0037c8]{position:absolute;right:12px;top:12px;width:16px;height:16px;z-index:inherit;cursor:pointer}.small-h5[data-v-be0037c8]{position:absolute;width:94px;height:160px;min-height:100px;max-height:60%;top:30px;right:10px;z-index:2;overflow:hidden;background:#000;border-radius:4px}.small[data-v-be0037c8]{position:absolute;width:260px;height:170px;min-height:100px;max-height:60%;top:30px;left:30px;z-index:2;overflow:hidden;resize:both;background:#000;border-radius:4px}.large[data-v-be0037c8]{min-height:100px;width:100%;height:100%;z-index:1;border-radius:inherit;overflow:hidden}.large .switch-large-small[data-v-be0037c8]{display:none}.group-calling-container[data-v-be0037c8]{width:100%;height:100%;display:flex;flex-wrap:wrap;justify-content:center}.group-user-view[data-v-be0037c8]{width:33.333%;height:33.333%;position:relative;background:rgba(32,32,32,.45);backdrop-filter:blur(34px);color:#fff;overflow:hidden}.user-view-text-container[data-v-be0037c8]{position:absolute;left:0;top:0;width:100%;height:100%;z-index:11;display:flex;flex-direction:column;justify-content:center;align-items:center;transform:translateY(-20px)}.user-view-user-id[data-v-be0037c8]{font-family:PingFang SC;font-style:normal;font-weight:600;font-size:24px;line-height:34px}.user-view-info[data-v-be0037c8]{font-family:PingFang SC;font-style:normal;font-weight:400;font-size:12px;line-height:17px}.page-turn[data-v-be0037c8]{width:40px;height:86px;border-radius:4.21px;background:rgba(0,0,0,.2);position:absolute;top:50%;transform:translateY(-50%);z-index:11;display:flex;justify-content:center;align-items:center;cursor:pointer}.turn-icon-container[data-v-be0037c8]{width:14px;height:23px}.right[data-v-be0037c8]{right:0}.microphone-icon-container[data-v-be0037c8]{width:24px;height:24px;background:rgba(0,0,0,.4);border-radius:12px;display:flex;justify-content:center;align-items:center;margin-left:8px}.group-user-view-1[data-v-be0037c8]{width:100%;height:100%}.group-calling-container-1[data-v-be0037c8]{height:100%}.group-user-view-2[data-v-be0037c8]{width:50%;height:100%}.group-calling-container-2[data-v-be0037c8]{height:50%}.group-user-view-3[data-v-be0037c8],.group-user-view-4[data-v-be0037c8]{width:50%;height:50%}.group-calling-container-3[data-v-be0037c8],.group-calling-container-4[data-v-be0037c8]{height:100%}.group-user-view-5[data-v-be0037c8],.group-user-view-6[data-v-be0037c8]{width:33.333%;height:50%}.group-calling-container-5[data-v-be0037c8],.group-calling-container-6[data-v-be0037c8]{height:66%}.user-view-user-id-1[data-v-be0037c8]{font-size:24px}.user-view-user-id-2[data-v-be0037c8],.user-view-user-id-3[data-v-be0037c8],.user-view-user-id-4[data-v-be0037c8]{font-size:22px}.user-view-user-id-5[data-v-be0037c8],.user-view-user-id-6[data-v-be0037c8],.user-view-user-id-7[data-v-be0037c8],.user-view-user-id-8[data-v-be0037c8],.user-view-user-id-9[data-v-be0037c8]{font-size:18px}.float-control-panel[data-v-be0037c8]{width:168px;height:56px;background:white;z-index:13;position:fixed;top:20px;right:20px;display:flex;flex-wrap:nowrap;justify-content:center;border-radius:40px;box-shadow:#00000029 0 3px 6px,#0000003b 0 3px 6px}.function-buttons[data-v-be0037c8]{position:absolute;right:12px;top:12px;z-index:13;cursor:pointer;display:flex;flex-direction:row;justify-content:flex-start}.minimize[data-v-be0037c8]{margin-left:10px}.float-control-item-icon[data-v-be0037c8]{display:flex;flex-direction:row;justify-content:center;align-items:center;width:56px;height:56px;position:relative}.float-control-item-icon-container[data-v-be0037c8]{border-radius:40px;width:40px;height:40px;margin:.5rem;cursor:pointer;display:flex;flex-direction:row;justify-content:center;align-items:center}.float-control-item-icon-container[data-v-be0037c8]:hover{background:rgba(218,218,218,.3)}.tui-call-kit[data-v-5cd78d8d]{width:100%;height:100%;position:relative;border-radius:inherit}.calling-wrapper[data-v-5cd78d8d]{position:relative;width:100%;height:100%;border-radius:inherit;background:rgba(0,24,60,.7);backdrop-filter:blur(34px);display:flex;flex-direction:column;justify-content:center;overflow:hidden;z-index:12}.calling-wrapper[data-v-5cd78d8d]:hover{z-index:inherit;transition:all .5s ease-in-out}.dialing-wrapper[data-v-5cd78d8d]{background:#00183C;color:#fff;opacity:.7;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;border-radius:inherit;top:0;left:0;z-index:10;overflow:hidden}.dialing-local[data-v-5cd78d8d]{position:absolute;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.dialing-content[data-v-5cd78d8d]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;position:relative;top:-3rem}#local-dialing[data-v-5cd78d8d],#local-group[data-v-5cd78d8d]{background:black;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLWRhc2hhcnJheT0iMTUiIHN0cm9rZS1kYXNob2Zmc2V0PSIxNSIKCQlzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEyIDNDMTYuOTcwNiAzIDIxIDcuMDI5NDQgMjEgMTIiPgoJCTxhbmltYXRlIGZpbGw9ImZyZWV6ZSIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLWRhc2hvZmZzZXQiIGR1cj0iMC4zcyIgdmFsdWVzPSIxNTswIiAvPgoJCTxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgZHVyPSIxLjVzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIKCQkJdHlwZT0icm90YXRlIiB2YWx1ZXM9IjAgMTIgMTI7MzYwIDEyIDEyIiAvPgoJPC9wYXRoPgo8L3N2Zz4=);background-repeat:no-repeat;background-size:auto;background-position-x:center;background-position-y:calc(50% + 10px)}.dialing-user-id[data-v-5cd78d8d]{font-style:normal;font-weight:600;font-size:40px;width:100%;line-height:56px;display:flex;align-items:center;justify-content:center}.dialing-info[data-v-5cd78d8d]{font-style:normal;font-weight:400;font-size:14px;line-height:20px}.control-wrapper[data-v-5cd78d8d]{transform:translate(-50%);position:absolute;bottom:0;padding-bottom:40px;left:50%;width:100%;color:#fff;border-radius:inherit;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,rgba(0,0,0,.4) 100%);display:flex;flex-direction:column;flex-wrap:wrap;align-items:center;z-index:11;user-select:none}.panel-button-area[data-v-5cd78d8d]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;margin:30px 0}.panel-dialing-info[data-v-5cd78d8d]{text-align:center}.control-wrapper[data-v-5cd78d8d]:hover{z-index:13}.control-item[data-v-5cd78d8d]{display:flex;flex-direction:column;width:100px;margin:0 20px}.control-item-h5[data-v-5cd78d8d]{display:flex;flex-direction:column;width:100px;margin:0}.control-item-text[data-v-5cd78d8d]{margin-top:5px;white-space:nowrap;font-weight:400;font-size:14px;line-height:20px;text-align:center}.control-item-icon[data-v-5cd78d8d]{width:100%;display:flex;flex-direction:row;justify-content:center;align-items:center;position:relative}.control-item-icon-container-small[data-v-5cd78d8d]{background:rgba(218,218,218,.3);border-radius:40px;width:40px;height:40px;margin:8px;cursor:pointer}.control-item-icon-container-medium[data-v-5cd78d8d]{background:rgba(0,0,0,.3);border-radius:56px;width:56px;height:56px;margin:8px;cursor:pointer}.control-item-icon-container-large[data-v-5cd78d8d]{background:rgba(0,0,0,.3);border-radius:68px;width:68px;height:68px;margin:8px;cursor:pointer}.control-item-summary[data-v-5cd78d8d]{height:40px;width:12px;right:0;display:flex;justify-content:center;align-items:center;cursor:pointer}.control-item-summary[data-v-5cd78d8d]:hover{background:rgba(0,0,0,.4)}.control-item-detail[data-v-5cd78d8d]{width:300px;border-radius:4px;background:#FEFEFF;box-shadow:#0000003d 0 3px 8px;color:#000;padding:20px;position:absolute;transform:translate(28px);bottom:110%}.control-item-detail-row[data-v-5cd78d8d]{margin-bottom:6px;font-size:16px}.device-select[data-v-5cd78d8d]{height:32px;width:100%;border:1px solid #DEE0E3;padding-left:6px;padding-top:6px;padding-bottom:6px;margin-top:10px;margin-bottom:10px;font-size:14px;color:#596174}.control-item-detail[data-v-5cd78d8d]:before{content:"";width:0;height:0;border-width:10px;border-style:solid;border-color:#FEFEFF transparent transparent;bottom:-3px;margin-left:-9px;position:absolute;left:50%;border-color:#fff;border-radius:4px;transform:rotate(60deg) skew(30deg)}.tag[data-v-5cd78d8d]{color:#fff;z-index:inherit;background:rgba(0,0,0,.6);padding:2px 10px;border-top-right-radius:inherit;border-bottom-left-radius:inherit;font-size:14px;position:absolute;left:0;bottom:0;z-index:11;display:flex;align-items:center}.tag .microphone-icon-container[data-v-5cd78d8d]{margin-left:0;margin-right:2px;width:20px;background-color:transparent}.switch-large-small[data-v-5cd78d8d]{position:absolute;right:12px;top:12px;width:16px;height:16px;z-index:inherit;cursor:pointer}.small-h5[data-v-5cd78d8d]{position:absolute;width:94px;height:160px;min-height:100px;max-height:60%;top:30px;right:10px;z-index:2;overflow:hidden;background:#000;border-radius:4px}.small[data-v-5cd78d8d]{position:absolute;width:260px;height:170px;min-height:100px;max-height:60%;top:30px;left:30px;z-index:2;overflow:hidden;resize:both;background:#000;border-radius:4px}.large[data-v-5cd78d8d]{min-height:100px;width:100%;height:100%;z-index:1;border-radius:inherit;overflow:hidden}.large .switch-large-small[data-v-5cd78d8d]{display:none}.group-calling-container[data-v-5cd78d8d]{width:100%;height:100%;display:flex;flex-wrap:wrap;justify-content:center}.group-user-view[data-v-5cd78d8d]{width:33.333%;height:33.333%;position:relative;background:rgba(32,32,32,.45);backdrop-filter:blur(34px);color:#fff;overflow:hidden}.user-view-text-container[data-v-5cd78d8d]{position:absolute;left:0;top:0;width:100%;height:100%;z-index:11;display:flex;flex-direction:column;justify-content:center;align-items:center;transform:translateY(-20px)}.user-view-user-id[data-v-5cd78d8d]{font-family:PingFang SC;font-style:normal;font-weight:600;font-size:24px;line-height:34px}.user-view-info[data-v-5cd78d8d]{font-family:PingFang SC;font-style:normal;font-weight:400;font-size:12px;line-height:17px}.page-turn[data-v-5cd78d8d]{width:40px;height:86px;border-radius:4.21px;background:rgba(0,0,0,.2);position:absolute;top:50%;transform:translateY(-50%);z-index:11;display:flex;justify-content:center;align-items:center;cursor:pointer}.turn-icon-container[data-v-5cd78d8d]{width:14px;height:23px}.right[data-v-5cd78d8d]{right:0}.microphone-icon-container[data-v-5cd78d8d]{width:24px;height:24px;background:rgba(0,0,0,.4);border-radius:12px;display:flex;justify-content:center;align-items:center;margin-left:8px}.group-user-view-1[data-v-5cd78d8d]{width:100%;height:100%}.group-calling-container-1[data-v-5cd78d8d]{height:100%}.group-user-view-2[data-v-5cd78d8d]{width:50%;height:100%}.group-calling-container-2[data-v-5cd78d8d]{height:50%}.group-user-view-3[data-v-5cd78d8d],.group-user-view-4[data-v-5cd78d8d]{width:50%;height:50%}.group-calling-container-3[data-v-5cd78d8d],.group-calling-container-4[data-v-5cd78d8d]{height:100%}.group-user-view-5[data-v-5cd78d8d],.group-user-view-6[data-v-5cd78d8d]{width:33.333%;height:50%}.group-calling-container-5[data-v-5cd78d8d],.group-calling-container-6[data-v-5cd78d8d]{height:66%}.user-view-user-id-1[data-v-5cd78d8d]{font-size:24px}.user-view-user-id-2[data-v-5cd78d8d],.user-view-user-id-3[data-v-5cd78d8d],.user-view-user-id-4[data-v-5cd78d8d]{font-size:22px}.user-view-user-id-5[data-v-5cd78d8d],.user-view-user-id-6[data-v-5cd78d8d],.user-view-user-id-7[data-v-5cd78d8d],.user-view-user-id-8[data-v-5cd78d8d],.user-view-user-id-9[data-v-5cd78d8d]{font-size:18px}.float-control-panel[data-v-5cd78d8d]{width:168px;height:56px;background:white;z-index:13;position:fixed;top:20px;right:20px;display:flex;flex-wrap:nowrap;justify-content:center;border-radius:40px;box-shadow:#00000029 0 3px 6px,#0000003b 0 3px 6px}.function-buttons[data-v-5cd78d8d]{position:absolute;right:12px;top:12px;z-index:13;cursor:pointer;display:flex;flex-direction:row;justify-content:flex-start}.minimize[data-v-5cd78d8d]{margin-left:10px}.float-control-item-icon[data-v-5cd78d8d]{display:flex;flex-direction:row;justify-content:center;align-items:center;width:56px;height:56px;position:relative}.float-control-item-icon-container[data-v-5cd78d8d]{border-radius:40px;width:40px;height:40px;margin:.5rem;cursor:pointer;display:flex;flex-direction:row;justify-content:center;align-items:center}.float-control-item-icon-container[data-v-5cd78d8d]:hover{background:rgba(218,218,218,.3)}.tui-call-kit[data-v-9c84be0f]{width:100%;height:100%;position:relative;border-radius:inherit}.calling-wrapper[data-v-9c84be0f]{position:relative;width:100%;height:100%;border-radius:inherit;background:rgba(0,24,60,.7);backdrop-filter:blur(34px);display:flex;flex-direction:column;justify-content:center;overflow:hidden;z-index:12}.calling-wrapper[data-v-9c84be0f]:hover{z-index:inherit;transition:all .5s ease-in-out}.dialing-wrapper[data-v-9c84be0f]{background:#00183C;color:#fff;opacity:.7;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;border-radius:inherit;top:0;left:0;z-index:10;overflow:hidden}.dialing-local[data-v-9c84be0f]{position:absolute;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.dialing-content[data-v-9c84be0f]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;position:relative;top:-3rem}#local-dialing[data-v-9c84be0f],#local-group[data-v-9c84be0f]{background:black;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLWRhc2hhcnJheT0iMTUiIHN0cm9rZS1kYXNob2Zmc2V0PSIxNSIKCQlzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEyIDNDMTYuOTcwNiAzIDIxIDcuMDI5NDQgMjEgMTIiPgoJCTxhbmltYXRlIGZpbGw9ImZyZWV6ZSIgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLWRhc2hvZmZzZXQiIGR1cj0iMC4zcyIgdmFsdWVzPSIxNTswIiAvPgoJCTxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgZHVyPSIxLjVzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIKCQkJdHlwZT0icm90YXRlIiB2YWx1ZXM9IjAgMTIgMTI7MzYwIDEyIDEyIiAvPgoJPC9wYXRoPgo8L3N2Zz4=);background-repeat:no-repeat;background-size:auto;background-position-x:center;background-position-y:calc(50% + 10px)}.dialing-user-id[data-v-9c84be0f]{font-style:normal;font-weight:600;font-size:40px;width:100%;line-height:56px;display:flex;align-items:center;justify-content:center}.dialing-info[data-v-9c84be0f]{font-style:normal;font-weight:400;font-size:14px;line-height:20px}.control-wrapper[data-v-9c84be0f]{transform:translate(-50%);position:absolute;bottom:0;padding-bottom:40px;left:50%;width:100%;color:#fff;border-radius:inherit;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,rgba(0,0,0,.4) 100%);display:flex;flex-direction:column;flex-wrap:wrap;align-items:center;z-index:11;user-select:none}.panel-button-area[data-v-9c84be0f]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;margin:30px 0}.panel-dialing-info[data-v-9c84be0f]{text-align:center}.control-wrapper[data-v-9c84be0f]:hover{z-index:13}.control-item[data-v-9c84be0f]{display:flex;flex-direction:column;width:100px;margin:0 20px}.control-item-h5[data-v-9c84be0f]{display:flex;flex-direction:column;width:100px;margin:0}.control-item-text[data-v-9c84be0f]{margin-top:5px;white-space:nowrap;font-weight:400;font-size:14px;line-height:20px;text-align:center}.control-item-icon[data-v-9c84be0f]{width:100%;display:flex;flex-direction:row;justify-content:center;align-items:center;position:relative}.control-item-icon-container-small[data-v-9c84be0f]{background:rgba(218,218,218,.3);border-radius:40px;width:40px;height:40px;margin:8px;cursor:pointer}.control-item-icon-container-medium[data-v-9c84be0f]{background:rgba(0,0,0,.3);border-radius:56px;width:56px;height:56px;margin:8px;cursor:pointer}.control-item-icon-container-large[data-v-9c84be0f]{background:rgba(0,0,0,.3);border-radius:68px;width:68px;height:68px;margin:8px;cursor:pointer}.control-item-summary[data-v-9c84be0f]{height:40px;width:12px;right:0;display:flex;justify-content:center;align-items:center;cursor:pointer}.control-item-summary[data-v-9c84be0f]:hover{background:rgba(0,0,0,.4)}.control-item-detail[data-v-9c84be0f]{width:300px;border-radius:4px;background:#FEFEFF;box-shadow:#0000003d 0 3px 8px;color:#000;padding:20px;position:absolute;transform:translate(28px);bottom:110%}.control-item-detail-row[data-v-9c84be0f]{margin-bottom:6px;font-size:16px}.device-select[data-v-9c84be0f]{height:32px;width:100%;border:1px solid #DEE0E3;padding-left:6px;padding-top:6px;padding-bottom:6px;margin-top:10px;margin-bottom:10px;font-size:14px;color:#596174}.control-item-detail[data-v-9c84be0f]:before{content:"";width:0;height:0;border-width:10px;border-style:solid;border-color:#FEFEFF transparent transparent;bottom:-3px;margin-left:-9px;position:absolute;left:50%;border-color:#fff;border-radius:4px;transform:rotate(60deg) skew(30deg)}.tag[data-v-9c84be0f]{color:#fff;z-index:inherit;background:rgba(0,0,0,.6);padding:2px 10px;border-top-right-radius:inherit;border-bottom-left-radius:inherit;font-size:14px;position:absolute;left:0;bottom:0;z-index:11;display:flex;align-items:center}.tag .microphone-icon-container[data-v-9c84be0f]{margin-left:0;margin-right:2px;width:20px;background-color:transparent}.switch-large-small[data-v-9c84be0f]{position:absolute;right:12px;top:12px;width:16px;height:16px;z-index:inherit;cursor:pointer}.small-h5[data-v-9c84be0f]{position:absolute;width:94px;height:160px;min-height:100px;max-height:60%;top:30px;right:10px;z-index:2;overflow:hidden;background:#000;border-radius:4px}.small[data-v-9c84be0f]{position:absolute;width:260px;height:170px;min-height:100px;max-height:60%;top:30px;left:30px;z-index:2;overflow:hidden;resize:both;background:#000;border-radius:4px}.large[data-v-9c84be0f]{min-height:100px;width:100%;height:100%;z-index:1;border-radius:inherit;overflow:hidden}.large .switch-large-small[data-v-9c84be0f]{display:none}.group-calling-container[data-v-9c84be0f]{width:100%;height:100%;display:flex;flex-wrap:wrap;justify-content:center}.group-user-view[data-v-9c84be0f]{width:33.333%;height:33.333%;position:relative;background:rgba(32,32,32,.45);backdrop-filter:blur(34px);color:#fff;overflow:hidden}.user-view-text-container[data-v-9c84be0f]{position:absolute;left:0;top:0;width:100%;height:100%;z-index:11;display:flex;flex-direction:column;justify-content:center;align-items:center;transform:translateY(-20px)}.user-view-user-id[data-v-9c84be0f]{font-family:PingFang SC;font-style:normal;font-weight:600;font-size:24px;line-height:34px}.user-view-info[data-v-9c84be0f]{font-family:PingFang SC;font-style:normal;font-weight:400;font-size:12px;line-height:17px}.page-turn[data-v-9c84be0f]{width:40px;height:86px;border-radius:4.21px;background:rgba(0,0,0,.2);position:absolute;top:50%;transform:translateY(-50%);z-index:11;display:flex;justify-content:center;align-items:center;cursor:pointer}.turn-icon-container[data-v-9c84be0f]{width:14px;height:23px}.right[data-v-9c84be0f]{right:0}.microphone-icon-container[data-v-9c84be0f]{width:24px;height:24px;background:rgba(0,0,0,.4);border-radius:12px;display:flex;justify-content:center;align-items:center;margin-left:8px}.group-user-view-1[data-v-9c84be0f]{width:100%;height:100%}.group-calling-container-1[data-v-9c84be0f]{height:100%}.group-user-view-2[data-v-9c84be0f]{width:50%;height:100%}.group-calling-container-2[data-v-9c84be0f]{height:50%}.group-user-view-3[data-v-9c84be0f],.group-user-view-4[data-v-9c84be0f]{width:50%;height:50%}.group-calling-container-3[data-v-9c84be0f],.group-calling-container-4[data-v-9c84be0f]{height:100%}.group-user-view-5[data-v-9c84be0f],.group-user-view-6[data-v-9c84be0f]{width:33.333%;height:50%}.group-calling-container-5[data-v-9c84be0f],.group-calling-container-6[data-v-9c84be0f]{height:66%}.user-view-user-id-1[data-v-9c84be0f]{font-size:24px}.user-view-user-id-2[data-v-9c84be0f],.user-view-user-id-3[data-v-9c84be0f],.user-view-user-id-4[data-v-9c84be0f]{font-size:22px}.user-view-user-id-5[data-v-9c84be0f],.user-view-user-id-6[data-v-9c84be0f],.user-view-user-id-7[data-v-9c84be0f],.user-view-user-id-8[data-v-9c84be0f],.user-view-user-id-9[data-v-9c84be0f]{font-size:18px}.float-control-panel[data-v-9c84be0f]{width:168px;height:56px;background:white;z-index:13;position:fixed;top:20px;right:20px;display:flex;flex-wrap:nowrap;justify-content:center;border-radius:40px;box-shadow:#00000029 0 3px 6px,#0000003b 0 3px 6px}.function-buttons[data-v-9c84be0f]{position:absolute;right:12px;top:12px;z-index:13;cursor:pointer;display:flex;flex-direction:row;justify-content:flex-start}.minimize[data-v-9c84be0f]{margin-left:10px}.float-control-item-icon[data-v-9c84be0f]{display:flex;flex-direction:row;justify-content:center;align-items:center;width:56px;height:56px;position:relative}.float-control-item-icon-container[data-v-9c84be0f]{border-radius:40px;width:40px;height:40px;margin:.5rem;cursor:pointer;display:flex;flex-direction:row;justify-content:center;align-items:center}.float-control-item-icon-container[data-v-9c84be0f]:hover{background:rgba(218,218,218,.3)}')),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();var o=Object.defineProperty,a=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,s=(e,t,n)=>(a(e,"symbol"!=typeof t?t+"":t,n),n),c=(e=>(e.CONTAIN="contain",e.COVER="cover",e.FILL="fill",e))(c||{}),u=(e=>(e.RESOLUTION_480P="480p",e.RESOLUTION_720P="720p",e.RESOLUTION_1080P="1080p",e))(u||{});let l,d=0;const p=Object(i["K"])("");function f(){return 0===d&&(l=setInterval(()=>{d+=1,p.value=g()},1e3),!0)}function h(){clearInterval(l),d=0}function g(){const e=Math.floor(d/3600),t=Math.floor(d/60%60),n=Math.floor(d%60);let r=""+n;return n<10&&(r="0"+n),r=`${t}:${r}`,t<10&&(r="0"+r),e>10?r=`${e}:${r}`:e>0&&(r=`0${e}:${r}`),r}const v={IDLE:"idle",BE_INVITED:"be-invited",DIALING_C2C:"dialing-c2c",DIALING_GROUP:"dialing-group",CALLING_C2C_AUDIO:"calling-c2c-audio",CALLING_C2C_VIDEO:"calling-c2c-video",CALLING_GROUP_AUDIO:"calling-group-audio",CALLING_GROUP_VIDEO:"calling-group-video"},m={REJECT:"change-status-because-of-rejected",NO_RESPONSE:"change-status-because-of-no-response",LINE_BUSY:"change-status-because-of-line-busy",CALLING_CANCEL:"change-status-because-of-calling-cancel",CALLING_TIMEOUT:"change-status-because-of-calling-timeout",CALL_TYPE_CHANGED:" call-type-changed"},_={VIDEO:"call-type-string-video",AUDIO:"call-type-string-audio"},y={en:{call:"call","video-call":"video call","audio-call":"audio call",search:"search","search-result":"search result","no-user":"user not found","member-not-added":"member not added","input-phone-userID":"phone number or userID","not-login":"not logged in","login-status-expire":"login status is invalid, please refresh the page and try again","experience-multi-call":"experience multi-person calls, please download the full-featured demo: ","not-support-multi-call":"multi-person call interface is not open",userID:"userID","already-enter":"entered the call",waiting:"Calling...",hangup:"Hang up",reject:"Decline",accept:"Accept","camera-opened":"Camera on","camera-closed":"Camera off","microphone-opened":"Mic on","microphone-closed":"Mic off",camera:"Camera",microphone:"Microphone","image-resolution":"Resolution","default-image-resolution":"Default","invited-person":"Invite","video-to-audio":"Switch to audio",me:"(me)","start-voice-call":"Audio call from ","start-video-call":"Video call from ","be-rejected":"Call declined, ","be-no-response":"No response, ","be-line-busy":"Line busy, ","be-canceled":"The call is canceled, ",timeout:"The call timed out","voice-call-end":"Voice call ended","video-call-end":"Video call ended","method-call-failed":"Failed to sync the operation","failed-to-obtain-permission":"Failed to obtain permissions","environment-detection-failed":"Failed to check the environment","call-failed":"call method failed","microphone-unavailable":"No mic found","ban-device":"Device access denied","not-supported-webrtc":"Your current environment does not support WebRTC","is-already-calling":"TUICallKit is already on a call","need-init":"Before initiating a call with TUICallKit, ensure that the TUICallKitServer.init() method has executed successfully. ","can't call yourself":"Can't call yourself","Use-phone-and-computer":"Use your mobile phone and computer to experience video calls","Wechat scan right QR code":"Wechat scan right QR code",try:"try","Scan the QR code above":"Scan the QR code above","Make video calls yourself":"Make video calls yourself"},"zh-cn":{call:"通话","video-call":"视频通话","audio-call":"音频通话",search:"搜索","search-result":"搜索结果","Wechat scan right QR code":"微信扫右二维码","Use-phone-and-computer":"用手机与电脑互打体验视频通话",try:"试试","Scan the QR code above":"扫描上方二维码","Make video calls yourself":"自己玩转视频通话","no-user":"未搜索到用户","member-not-added":"未添加成员","not-login":"未登录","login-status-expire":"登录状态已失效，请刷新网页重试","experience-multi-call":"体验多人通话请下载全功能demo:","not-support-multi-call":"多人通话接口未开放","input-phone-userID":"请输入手机号/用户ID",userID:"用户ID","already-enter":"已经进入当前通话",waiting:"等待接听...",hangup:"挂断",reject:"拒绝",accept:"接受","camera-opened":"摄像头已开","camera-closed":"摄像头已关","microphone-opened":"麦克风已开","microphone-closed":"麦克风已关",camera:"摄像头",microphone:"麦克风","image-resolution":"分辨率","default-image-resolution":"默认分辨率","invited-person":"添加成员","video-to-audio":"视频转语音",me:"（我）","start-voice-call":"发起的语音通话","start-video-call":"发起的视频通话","be-rejected":"对方已拒绝，","be-no-response":"对方无应答，","be-line-busy":"对方忙线中，","be-canceled":"对方已取消",timeout:"本次通话超时未应答","voice-call-end":"语音通话结束","video-call-end":"视频通话结束","method-call-failed":"同步操作失败","failed-to-obtain-permission":"权限获取失败","environment-detection-failed":"环境检测失败","call-failed":"调用失败","microphone-unavailable":"没有可用的麦克风设备","ban-device":"用户禁止使用设备","not-supported-webrtc":"当前环境不支持 WebRTC","is-already-calling":"TUICallKit 已在通话状态","need-init":"TUICallKit 发起通话前需保证 TUICallKitServer.init() 方法执行成功","can't call yourself":"不能呼叫自己"}},b=Object(i["K"])("zh-cn"),I=Object(i["K"])(c.COVER),T=Object(i["K"])(u.RESOLUTION_480P),C=Object(i["K"])([]),S=Object(i["K"])([]),E=Object(i["K"])(""),M=Object(i["K"])(""),k=Object(i["K"])(new Set),w=Object(i["K"])(v.IDLE),O=Object(i["K"])(!1),D=Object(i["K"])("waiting"),A=Object(i["K"])(),R=Object(i["K"])(!1),x=Object(i["K"])([]),L=Object(i["K"])(new Map),N=Object(i["K"])({userID:"",isEntered:!0,microphone:!0,camera:!0});function P(e){b.value=e}function j(e){var t;for(const r in y)if(r===b.value){const t=y[r];for(const n in t)if(n===e)return t[n]}const n=null==(t=e.en)?void 0:t.key;return console.error("translation is not found: ",e),n}function U(e,t="",n=0){if(console.log("TUICallKit changeStatus",e,t,n),w.value!==e){switch(t!==m.CALL_TYPE_CHANGED&&(console.log("TUICallKit timerClear"),h()),t){case m.REJECT:H(`${j("be-rejected")}${A.value===_.AUDIO?j("voice-call-end"):j("video-call-end")}`);break;case m.NO_RESPONSE:H(`${j("be-no-response")}${A.value===_.AUDIO?j("voice-call-end"):j("video-call-end")}`);break;case m.LINE_BUSY:H(`${j("be-line-busy")}${A.value===_.AUDIO?j("voice-call-end"):j("video-call-end")}`);break;case m.CALLING_CANCEL:H(j("be-canceled"));break;case m.CALLING_TIMEOUT:H(j("timeout"));break;default:H("");break}setTimeout(()=>{Fi.statusChanged&&Fi.statusChanged({oldStatus:w.value,newStatus:e}),console.log(`TUICallKit status changed: ${w.value} -> ${e}`),w.value=e},n)}else console.log("TUICallKit already be this status: "+e)}function G(e){const t=x.value.findIndex(t=>t.userID===e);t>=0?x.value[t].isEntered=!0:Y([...x.value,{userID:e,isEntered:!0}])}function V(e){let t=x.value.findIndex(t=>t.userID===e);if(t>=0){const e=x.value;e.splice(t,1),Y([...e])}return k.value.delete(e),x.value.length}function F(e,t,n){const r=x.value.findIndex(t=>t.userID===e);r>=0&&(t===_.VIDEO?x.value[r].camera=n:t===_.AUDIO&&(x.value[r].microphone=n))}function B(e,t){const n=x.value.findIndex(t=>t.userID===e);n>=0&&(x.value[n].isReadyRender=t)}function q(e){e.forEach(e=>{const{userId:t,audioVolume:n}=e;L.value.set(t,n)})}function H(e){D.value=e}function z(e){switch(e){case r["TUICallType"].AUDIO_CALL:A.value=_.AUDIO;break;case r["TUICallType"].VIDEO_CALL:A.value=_.VIDEO;break;default:return void console.error("TUICallKit changeCallType: unknown call type value ",e)}w.value===v.CALLING_C2C_VIDEO&&A.value===_.AUDIO&&U(v.CALLING_C2C_AUDIO,m.CALL_TYPE_CHANGED),w.value===v.CALLING_C2C_AUDIO&&A.value===_.VIDEO&&U(v.CALLING_C2C_VIDEO,m.CALL_TYPE_CHANGED),w.value===v.BE_INVITED&&H(A.value===_.AUDIO?j("start-voice-call"):j("start-video-call"))}function K(e){R.value=e}async function W(e){const t=Fi.getTim();if(!t)return console.warn("TUICallKit request nick name error, reason: tim is empty/null"),e;let n=e;const{data:r}=await t.getUserProfile({userIDList:[e]})||{};return r&&r.length>0&&(n=r[0].nick),""===n&&(n=e),n}async function Y(e){x.value=e;for(const t of x.value)null!=t&&t.nick||(t.nick=await W(t.userID),Object(i["T"])(x))}async function J(e){N.value=e,N.value.nick=await W(e.userID),Object(i["T"])(N)}function $(e){O.value=e}function X(e){return L.value.get(e)||0}Object(i["X"])(p,()=>{H(p.value)}),Object(i["X"])(w,()=>{w.value===v.BE_INVITED&&H(A.value===_.AUDIO?j("start-voice-call"):j("start-video-call")),"dialing"===w.value.split("-")[0]&&H(j("waiting")),"calling"===w.value.split("-")[0]&&(H(""),f()),w.value===v.IDLE&&(N.value.microphone=!0,N.value.camera=!0,O.value=!1,H(""),Y([]),Fi.afterCalling&&Fi.afterCalling())});const Z="@tencentcloud/call-uikit-vue",Q="2.0.1",ee="dist/tuicall-uikit-vue.umd.js",te="dist/tuicall-uikit-vue.es.js",ne="dist/types/src/index.d.ts",re="An Open-source Voice & Video Calling UI Component Based on Tencent Cloud Service.",ie="https://cloud.tencent.com/document/product/647/78731",oe="longyuqi <longyuqi@tencent.com>",ae="ISC",se={type:"git",url:"https://github.com/tencentyun/TUICallKit.git",directory:"Web"},ce={build:"vite build && npm run build:types","build-only":"vite build","build:types":"vue-tsc --project tsconfig.build-types.json --declaration --emitDeclarationOnly --outDir dist/types",typecheck:"vue-tsc --project tsconfig.build-types.json --noEmit",npm:"npm publish --access public"},ue={url:"https://github.com/tencentyun/TUICallKit/issues"},le=["uikit","call","vue3","tencent","chat","vue","vue2","video","audio","voice","语音","视频","电话","通话"],de={"tim-js-sdk":"^2.26.6","trtc-js-sdk":"^4.15.5",tsignaling:"^1.0.5","tuicall-engine-webrtc":"^1.3.7"},pe={"@babel/types":"^7.20.7","@types/node":"^18.11.18","@vitejs/plugin-vue":"^4.0.0","@vue/tsconfig":"^0.1.3",sass:"^1.57.1",typescript:"^4.9.5",vite:"^4.0.4","vite-plugin-css-injected-by-js":"^2.4.0",vue:"^3.2.47","vue-tsc":"^1.0.24"},fe={name:Z,version:Q,main:ee,module:te,types:ne,description:re,homepage:ie,author:oe,license:ae,repository:se,scripts:ce,bugs:ue,keywords:le,dependencies:de,devDependencies:pe};let he=class{constructor(){s(this,"SDKAppID"),s(this,"tuiCallEngine"),s(this,"TUICore"),s(this,"version"),s(this,"beforeCalling"),s(this,"afterCalling"),s(this,"onMinimized"),s(this,"onMessageSentByMe"),s(this,"statusChanged"),s(this,"error"),s(this,"tim"),this.TUICore=null,this.tuiCallEngine=null,this.SDKAppID=0,this.version=fe.version,console.log("TUICallKit version: "+this.version)}async init(e){let{SDKAppID:t,tim:n}=e;const{userID:i,userSig:o,assetsPath:a}=e;this.TUICore&&(t=this.TUICore.SDKAppID,n=this.TUICore.tim),this.tim=n,this.SDKAppID=t;try{this.tuiCallEngine=r["TUICallEngine"].createInstance({SDKAppID:t,tim:n}),this.bindTIMEvent(),await this.tuiCallEngine.login({userID:i,userSig:o,assetsPath:a}),J(Object.assign(N.value,{userID:i})),console.log("TUICallKit init successful")}catch(s){throw console.error("TUICallKit init failed",null==s?void 0:s.message),s}}async call(e){this.checkStatus();const{userID:t,type:n,timeout:i,offlinePushInfo:o}=e;try{Y([{userID:t,isEntered:!1}]),z(n),K(!1),U(v.DIALING_C2C),await this.tuiCallEngine.call({userID:t,type:n,timeout:i,offlinePushInfo:o}),await this.setDefaultDevice({camera:n===r["TUICallType"].VIDEO_CALL}),await this.renderLocal(),this.beforeCalling&&this.beforeCalling("call")}catch(a){throw this.error&&this.beforeCalling&&this.beforeCalling("call",this.error),this.error=null,U(v.IDLE),console.error("TUICallKit call error: ",a.code,"+",null==a?void 0:a.message),a}}async groupCall(e){this.checkStatus();const{userIDList:t,type:n,groupID:i,timeout:o,offlinePushInfo:a,roomID:s}=e;try{const e=t.map(e=>({userID:e,isEntered:!1}));Y(e),z(n),K(!0),U(v.DIALING_GROUP),await this.tuiCallEngine.groupCall({userIDList:t,type:n,groupID:i,timeout:o,offlinePushInfo:a,roomID:s}),await this.setDefaultDevice({camera:n===r["TUICallType"].VIDEO_CALL}),await this.renderLocal(),this.beforeCalling&&this.beforeCalling("groupCall")}catch(c){throw this.error&&this.beforeCalling&&this.beforeCalling("groupCall",this.error),this.error=null,console.error("TUICallKit groupCall error: "+(null==c?void 0:c.message)),c}}async joinInGroupCall(e){const{roomID:t,type:n,groupID:r}=e;await this.tuiCallEngine.joinInGroupCall({roomID:t,type:n,groupID:r}),this.beforeCalling&&this.beforeCalling("groupCall"),U(v.DIALING_GROUP),z(n),K(!0),this.getIntoCallingStatus()}checkStatus(){if(w.value!==v.IDLE)throw console.error("TUICallKit groupCall error:",j("is-already-calling")),new Error(j("is-already-calling"));if(!this.tuiCallEngine)throw console.error("TUICallKit groupCall error:",j("need-init")),new Error(j("need-init"))}async updateCameraList(){C.value=await this.tuiCallEngine.getDeviceList("camera"),console.log("TUICallKit updateDevice camera",C.value)}async updateMicrophoneList(){S.value=await this.tuiCallEngine.getDeviceList("microphones"),console.log("TUICallKit updateDevice microphones",S.value)}async setDefaultDevice(e){var t,n;try{await this.updateMicrophoneList(),S.value.length>0&&(-1===S.value.findIndex(e=>e.deviceId===E.value)||""===M.value)&&await this.switchDevice("audio",null==(t=S.value[0])?void 0:t.deviceId)}catch(r){console.error("TUICallKit set default microphone error",null==r?void 0:r.message)}try{if(!e.camera)return;await this.updateCameraList(),C.value.length>0&&(-1===C.value.findIndex(e=>e.deviceId===E.value)||""===E.value)&&await this.switchDevice("video",null==(n=C.value[0])?void 0:n.deviceId)}catch(r){console.error("TUICallKit set default camera error",null==r?void 0:r.message)}}async switchDevice(e,t){console.log("TUICallKit switchDevice deviceType deviceId",e,t);try{await this.tuiCallEngine.switchDevice({deviceType:e,deviceId:t}),"video"===e&&(E.value=t),"audio"===e&&(M.value=t),await this.setVideoQuality(T.value)}catch(n){console.error("TUICallKit switchDevice error",null==n?void 0:n.message)}}bindTUICore(e){this.TUICore=e}setCallback(e){const{beforeCalling:t,afterCalling:n,onMinimized:r,onMessageSentByMe:i}=e;t&&(this.beforeCalling=t),n&&(this.afterCalling=n),r&&(this.onMinimized=r),i&&(this.onMessageSentByMe=i)}setLanguage(e){console.log("TUICallKit change language: ",e),"en"!==e&&"zh-cn"!==e&&(console.warn("TUICallKit change language warning: ",e+" in not supported, has changed to default English"),e="en"),P(e)}toggleMinimize(){console.log("TUICallKit toggleMinimize called",O.value,"->",!O.value),this.onMinimized&&this.onMinimized(O.value,!O.value),$(!O.value)}async accept(){try{await this.tuiCallEngine.accept(),this.getIntoCallingStatus(),await this.setDefaultDevice({camera:A.value===_.VIDEO})}catch(e){console.error("TUICallKit accept error catch: ",null==e?void 0:e.message),U(v.IDLE)}}async reject(){try{await this.tuiCallEngine.reject()}catch(e){console.error("TUICallKit reject error catch: ",null==e?void 0:e.message)}U(v.IDLE)}async startLocalView(e){console.log("TUICallKit startLocalView"),await this.tuiCallEngine.startLocalView({userID:N.value.userID,videoViewDomID:e})}async stopLocalView(){await this.tuiCallEngine.stopLocalView({userID:N.value.userID})}async startRemoteView(e){if(e)if(document.getElementById(e))try{await this.tuiCallEngine.startRemoteView({userID:e,videoViewDomID:e,options:{objectFit:I.value}}),console.log("TUICallKit startRemoteView success",e)}catch(t){console.warn("TUICallKit startRemoteView error",t,e)}else console.log("TUICallKit startRemoteView can't find HTMLElement id =",e);else console.log("TUICallKit startRemoteView userID is empty")}async stopRemoteView(e){await this.tuiCallEngine.stopRemoteView({userID:e})}async hangup(){await this.tuiCallEngine.hangup(),U(v.IDLE)}async renderLocal(){if(w.value!==v.IDLE){if(N.value.microphone?this.openMicrophone():this.closeMicrophone(),A.value===_.VIDEO){let e=R.value?"local-group":"local-c2c";w.value===v.DIALING_C2C&&(e="local-dialing"),N.value.camera?this.openCamera(e):this.closeCamera()}}else console.log("TUICallKit renderLocal not working because status is idle")}async renderRemoteWaitList(){for(console.log("TUICallKit renderRemoteWaitList",k.value);k.value.size>0;){const e=k.value.values().next().value;await this.startRemoteView(e),k.value.delete(e)}}async renderRemoteList(e){console.log("TUICallKit renderRemoteList",e);for(let t=0;t<e.length;t++){const{userID:n,isEntered:r,isReadyRender:i}=e[t];r&&i&&await this.startRemoteView(n)}}async openCamera(e){console.log("TUICallKit openCamera",e);try{await this.tuiCallEngine.openCamera(e),J(Object.assign(N.value,{camera:!0}))}catch(t){console.error("TUICallKit openCamera error:",t),J(Object.assign(N.value,{camera:!1}))}}async closeCamera(){try{await this.tuiCallEngine.closeCamera(),J(Object.assign(N.value,{camera:!1}))}catch(e){console.error("TUICallKit closeCamera error:",null==e?void 0:e.message)}}async openMicrophone(){try{await this.tuiCallEngine.openMicrophone(),J(Object.assign(N.value,{microphone:!0}))}catch(e){console.error("TUICallKit openMicrophone error:",e),J(Object.assign(N.value,{microphone:!1}))}}async closeMicrophone(){try{await this.tuiCallEngine.closeMicrophone(),J(Object.assign(N.value,{microphone:!1}))}catch(e){console.error("TUICallKit closeMicrophone error:",null==e?void 0:e.message)}}async setVideoQuality(e){await this.tuiCallEngine.setVideoQuality(e),T.value=e}async switchCallMediaType(){console.log("TUICallKit switchCallMediaType",r["TUICallType"].AUDIO_CALL);try{await this.tuiCallEngine.switchCallMediaType(r["TUICallType"].AUDIO_CALL)}catch(e){console.error("TUICallKit switchCallMediaType error:",null==e?void 0:e.message)}}onStatusChanged(e){this.statusChanged=e}async enableAIVoice(e){try{this.tuiCallEngine.enableAIVoice(e),console.log("TUICallKit enableAIVoice:",e)}catch(t){console.error("TUICallKit enableAIVoice failed",t.message)}}async inviteUser(e){const{userIDList:t=[]}=e;console.log("TUICallKit inviteUser",e);try{const n=this.tuiCallEngine&&await this.tuiCallEngine.inviteUser(e),r=x.value;t.forEach(e=>{r.push({userID:e,isEntered:!1})}),Y(r),console.log("TUICallKit inviteUser success: ",n)}catch(n){throw console.error("TUICallKit inviteUser error: "+(null==n?void 0:n.message)),n}}getTim(){return this.tim?this.tim:this.tuiCallEngine?this.tuiCallEngine.tim:void console.warn("TUICallKit getTim warning: tuiCallEngine Instance is not available")}async destroyed(){this.unbindTIMEvent(),U(v.IDLE);try{this.tuiCallEngine&&await this.tuiCallEngine.destroyInstance(),console.log("TUICallKit destroyInstance success")}catch(e){throw console.error("TUICallKit destroyed error:",e),e}}getIntoCallingStatus(){!R.value&&A.value===_.AUDIO&&U(v.CALLING_C2C_AUDIO),!R.value&&A.value===_.VIDEO&&U(v.CALLING_C2C_VIDEO),R.value&&A.value===_.AUDIO&&U(v.CALLING_GROUP_AUDIO),R.value&&A.value===_.VIDEO&&U(v.CALLING_GROUP_VIDEO)}bindTIMEvent(){this.tuiCallEngine.on(r["TUICallEvent"].ERROR,this.handleError,this),this.tuiCallEngine.on(r["TUICallEvent"].SDK_READY,this.handleSDKReady,this),this.tuiCallEngine.on(r["TUICallEvent"].INVITED,this.handleInvited,this),this.tuiCallEngine.on(r["TUICallEvent"].USER_ACCEPT,this.handleUserAccept,this),this.tuiCallEngine.on(r["TUICallEvent"].USER_ENTER,this.handleUserEnter,this),this.tuiCallEngine.on(r["TUICallEvent"].USER_LEAVE,this.handleUserLeave,this),this.tuiCallEngine.on(r["TUICallEvent"].REJECT,this.handleReject,this),this.tuiCallEngine.on(r["TUICallEvent"].NO_RESP,this.handleNoResponse,this),this.tuiCallEngine.on(r["TUICallEvent"].LINE_BUSY,this.handleLineBusy,this),this.tuiCallEngine.on(r["TUICallEvent"].CALLING_CANCEL,this.handleCallingCancel,this),this.tuiCallEngine.on(r["TUICallEvent"].KICKED_OUT,this.handleKickedOut,this),this.tuiCallEngine.on(r["TUICallEvent"].CALLING_TIMEOUT,this.handleCallingTimeOut,this),this.tuiCallEngine.on(r["TUICallEvent"].CALLING_END,this.handleCallingEnd,this),this.tuiCallEngine.on(r["TUICallEvent"].USER_VIDEO_AVAILABLE,this.handleUserVideoAvailable,this),this.tuiCallEngine.on(r["TUICallEvent"].USER_AUDIO_AVAILABLE,this.handleUserAudioAvailable,this),this.tuiCallEngine.on(r["TUICallEvent"].USER_VOICE_VOLUME,this.handleUserVoiceVolume,this),this.tuiCallEngine.on(r["TUICallEvent"].CALL_TYPE_CHANGED,this.handleCallTypeChanged,this),this.tuiCallEngine.on(r["TUICallEvent"].MESSAGE_SENT_BY_ME,this.handleMessageSentByMe,this)}unbindTIMEvent(){this.tuiCallEngine.off(r["TUICallEvent"].ERROR,this.handleError,this),this.tuiCallEngine.off(r["TUICallEvent"].SDK_READY,this.handleSDKReady,this),this.tuiCallEngine.off(r["TUICallEvent"].INVITED,this.handleInvited),this.tuiCallEngine.off(r["TUICallEvent"].USER_ACCEPT,this.handleUserAccept),this.tuiCallEngine.off(r["TUICallEvent"].USER_ENTER,this.handleUserEnter,this),this.tuiCallEngine.off(r["TUICallEvent"].USER_LEAVE,this.handleUserLeave,this),this.tuiCallEngine.off(r["TUICallEvent"].REJECT,this.handleReject,this),this.tuiCallEngine.off(r["TUICallEvent"].NO_RESP,this.handleNoResponse,this),this.tuiCallEngine.off(r["TUICallEvent"].LINE_BUSY,this.handleLineBusy,this),this.tuiCallEngine.off(r["TUICallEvent"].CALLING_CANCEL,this.handleCallingCancel,this),this.tuiCallEngine.off(r["TUICallEvent"].KICKED_OUT,this.handleKickedOut,this),this.tuiCallEngine.off(r["TUICallEvent"].CALLING_TIMEOUT,this.handleCallingTimeOut,this),this.tuiCallEngine.off(r["TUICallEvent"].CALLING_END,this.handleCallingEnd,this),this.tuiCallEngine.off(r["TUICallEvent"].USER_VIDEO_AVAILABLE,this.handleUserVideoAvailable,this),this.tuiCallEngine.off(r["TUICallEvent"].USER_AUDIO_AVAILABLE,this.handleUserAudioAvailable,this),this.tuiCallEngine.off(r["TUICallEvent"].USER_VOICE_VOLUME,this.handleUserVoiceVolume,this),this.tuiCallEngine.off(r["TUICallEvent"].CALL_TYPE_CHANGED,this.handleCallTypeChanged,this),this.tuiCallEngine.off(r["TUICallEvent"].MESSAGE_SENT_BY_ME,this.handleMessageSentByMe,this)}handleError(e){const{code:t}=e;switch(this.error={code:t,type:"",message:""},t){case 60001:this.error.type=j("method-call-failed"),this.error.message="switchToAudioCall "+j("call-failed");break;case 60002:this.error.type=j("method-call-failed"),this.error.message="switchToVideoCall "+j("call-failed");break;case 60003:this.error.type=j("failed-to-obtain-permission"),this.error.message=j("microphone-unavailable");break;case 60004:this.error.type=j("failed-to-obtain-permission"),this.error.message=j("camera-unavailable");break;case 60005:this.error.type=j("failed-to-obtain-permission"),this.error.message=j("ban-device");break;case 60006:this.error.type=j("environment-detection-failed"),this.error.message=j("not-supported-webrtc");break}console.error("TUICallKit Error",JSON.stringify(this.error)),w.value===v.BE_INVITED&&this.beforeCalling&&this.beforeCalling("invited",this.error),U(v.IDLE)}handleSDKReady(e){console.log("TUICallKit SDK is ready.",e)}handleKickedOut(e){console.error("TUICallKit Kicked Out",JSON.stringify(e))}async handleUserVideoAvailable(e){console.log("TUICallKit handleUserVideoAvailable",e);const{userID:t,isVideoAvailable:n}=e;B(t,!0),F(t,_.VIDEO,n),n&&(document.getElementById(t)?await this.startRemoteView(t):(console.log("TUICallKit add remoteWaitList",t),k.value.add(t)))}handleUserAudioAvailable(e){console.log("TUICallKit handleUserAudioAvailable",e);const{userID:t,isAudioAvailable:n}=e;F(t,_.AUDIO,n)}handleUserVoiceVolume(e){const{volumeMap:t}=e;q(t)}handleInvited(e){if(console.log("TUICallKit handleInvited",e),this.beforeCalling&&this.beforeCalling("invited",this.error),this.error)return this.reject(),void(this.error=null);const{sponsor:t,isFromGroup:n,inviteData:r}=e,{callType:i}=r;U(v.BE_INVITED),Y([{userID:t,isEntered:!1}]),z(i),K(n)}handleUserAccept(e){console.log("TUICallKit handleUserAccept",e);const{userID:t}=e;w.value!==v.BE_INVITED?this.getIntoCallingStatus():console.log(`TUICallKit userID=${t} accept the call`)}handleUserEnter(e){console.log("TUICallKit handleUserEnter",e);const{userID:t}=e;G(t)}handleUserLeave(e){console.log("TUICallKit handleUserLeave",e);const{userID:t}=e;V(t)}handleReject(e){console.log("TUICallKit handleReject",e);const{userID:t}=e;if(w.value!==v.BE_INVITED){if(w.value===v.CALLING_GROUP_AUDIO||w.value===v.CALLING_GROUP_VIDEO||w.value===v.DIALING_GROUP)return void V(t);U(v.IDLE,m.REJECT,1e3)}}handleNoResponse(e){console.log("TUICallKit handleNoResponse",e);const{userIDList:t}=e;t.forEach(e=>{V(e)<=0&&U(v.IDLE,m.NO_RESPONSE,R.value?0:1e3)})}handleLineBusy(e){console.log("TUICallKit handleLineBusy",e);const{userID:t}=e;V(t)<=0&&U(v.IDLE,m.LINE_BUSY,R.value?0:1e3)}handleCallingCancel(e){console.log("TUICallKit handleCallingCancel",e),U(v.IDLE,m.CALLING_CANCEL,1e3)}handleCallingTimeOut(e){console.log("TUICallKit handleCallingTimeOut",e);const{userIDList:t}=e;t.forEach(e=>{(V(e)<=0||e===N.value.userID)&&U(v.IDLE,m.CALLING_TIMEOUT,R.value?0:1e3)})}handleCallingEnd(e){console.log("TUICallKit handleCallingEnd",e),U(v.IDLE)}handleCallTypeChanged(e){console.log("TUICallKit handleCallTypeChanged",e);const{newCallType:t}=e;z(t)}handleMessageSentByMe(e){const t=null==e?void 0:e.data;console.log("TUICallKit MessageSentByMe",t),this.onMessageSentByMe&&this.onMessageSentByMe(t)}};const ge=e=>(Object(i["I"])("data-v-fe5ee432"),e=e(),Object(i["G"])(),e),ve={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16",class:"design-iconfont"},me={key:0},_e=ge(()=>Object(i["j"])("path",{d:"M8.62462 7.17395C8.90076 7.17395 9.12462 7.38807 9.12462 7.65221C9.12462 7.89434 8.93651 8.09444 8.69246 8.12611L8.62462 8.13047H7.3335C7.05735 8.13047 6.8335 7.91635 6.8335 7.65221C6.8335 7.41009 7.0216 7.20998 7.26565 7.17832L7.3335 7.17395H8.62462Z",fill:"#43D92B"},null,-1)),ye=[_e],be={key:1},Ie=ge(()=>Object(i["j"])("path",{d:"M8.62462 5.57971C8.90076 5.57971 9.12462 5.79384 9.12462 6.05797C9.12462 6.3001 8.93651 6.5002 8.69246 6.53187L8.62462 6.53623H7.3335C7.05735 6.53623 6.8335 6.32211 6.8335 6.05797C6.8335 5.81585 7.0216 5.61575 7.26565 5.58408L7.3335 5.57971H8.62462Z",fill:"#43D92B"},null,-1)),Te=[Ie],Ce={key:2},Se=ge(()=>Object(i["j"])("path",{d:"M8.62462 3.98547C8.90076 3.98547 9.12462 4.1996 9.12462 4.46373C9.12462 4.70586 8.93651 4.90596 8.69246 4.93763L8.62462 4.942H7.3335C7.05735 4.942 6.8335 4.72787 6.8335 4.46373C6.8335 4.22161 7.0216 4.02151 7.26565 3.98984L7.3335 3.98547H8.62462Z",fill:"#43D92B"},null,-1)),Ee=[Se],Me=ge(()=>Object(i["j"])("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.3301 3.45938C11.2517 1.89175 9.77808 0.658081 8 0.658081C6.17253 0.658081 4.66667 1.96123 4.66667 3.59077V7.72539L4.66994 7.85678C4.7483 9.42442 6.22192 10.6581 8 10.6581C9.82747 10.6581 11.3333 9.35493 11.3333 7.72539V3.59077L11.3301 3.45938ZM6.0035 3.54179C6.06337 2.69234 6.92083 1.99146 8.00016 1.99146C9.11947 1.99146 10.0002 2.74521 10.0002 3.63675V7.67949L9.99682 7.77446C9.93695 8.62391 9.07949 9.32479 8.00016 9.32479C6.88086 9.32479 6.00016 8.57103 6.00016 7.67949V3.63675L6.0035 3.54179ZM8.33333 15.3333C8.51743 15.3333 8.66667 15.1841 8.66667 15V13.2964C11.5402 12.9793 14 10.6655 14 8.27322V7.68092C14 7.49682 13.8508 7.34758 13.6667 7.34758H13C12.8159 7.34758 12.6667 7.49682 12.6667 7.68092V8.27322L12.6634 8.39309C12.5681 10.1524 10.3982 11.9979 8.00396 12C8.00264 12 8.00132 12 8 12C7.99868 12 7.99736 12 7.99604 12C5.54737 11.9979 3.33333 10.0675 3.33333 8.27322L3.33043 7.65652C3.32956 7.47164 3.17839 7.32278 2.99352 7.32477L2.32975 7.33191C2.14706 7.33387 2 7.48252 2 7.66522V8.27322L2.00292 8.4162C2.09825 10.757 4.51708 12.9856 7.33333 13.2964V15C7.33333 15.1841 7.48257 15.3333 7.66667 15.3333H8.33333Z",fill:"#fff"},null,-1)),ke=Object(i["n"])({__name:"MicrophoneIcon",props:{volume:null},setup(e){const t=e,{volume:n}=Object(i["S"])(t);return(e,t)=>(Object(i["F"])(),Object(i["i"])("svg",ve,[Object(i["U"])(n)&&Object(i["U"])(n)>0?(Object(i["F"])(),Object(i["i"])("g",me,ye)):Object(i["h"])("",!0),Object(i["U"])(n)&&Object(i["U"])(n)>5?(Object(i["F"])(),Object(i["i"])("g",be,Te)):Object(i["h"])("",!0),Object(i["U"])(n)&&Object(i["U"])(n)>10?(Object(i["F"])(),Object(i["i"])("g",Ce,Ee)):Object(i["h"])("",!0),Me]))}}),we=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},Oe=we(ke,[["__scopeId","data-v-fe5ee432"]]),De={},Ae={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16",class:"design-iconfont"},Re=Object(i["j"])("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.82825 12.4759C5.58172 12.9048 6.43742 13.1978 7.33333 13.2967V15.0002C7.33333 15.1843 7.48257 15.3335 7.66667 15.3335H8.33333C8.51743 15.3335 8.66667 15.1843 8.66667 15.0002V13.2967C11.5402 12.9796 14 10.6658 14 8.27347V7.68116C14 7.49707 13.8508 7.34783 13.6667 7.34783H13C12.8159 7.34783 12.6667 7.49707 12.6667 7.68116V8.27347L12.6634 8.39333C12.5681 10.1526 10.3982 11.9982 8.00396 12.0002L8 12.0002L7.99604 12.0002C7.22514 11.9996 6.47749 11.8078 5.81487 11.4893L4.82825 12.4759ZM6.83168 10.4725C7.196 10.5927 7.5899 10.6583 8 10.6583C9.82747 10.6583 11.3333 9.35517 11.3333 7.72563V5.97083L6.83168 10.4725ZM10.9068 2.1547L4.73629 8.32524C4.70043 8.17327 4.67793 8.01689 4.66994 7.85702L4.66667 7.72563V3.59102C4.66667 1.96148 6.17253 0.658325 8 0.658325C9.24072 0.658325 10.3332 1.25901 10.9068 2.1547ZM3.62455 9.43698L2.64622 10.4153C2.26208 9.78985 2.03108 9.10804 2.00292 8.41644L2 8.27347V7.66546C2 7.48277 2.14706 7.33411 2.32975 7.33215L2.99352 7.32502C3.17839 7.32303 3.32956 7.47188 3.33043 7.65676L3.33333 8.27347C3.33333 8.66191 3.4371 9.05672 3.62455 9.43698Z",fill:"#fff"},null,-1),xe=Object(i["j"])("rect",{x:".609863",y:"13.4514",width:"19.0127",height:"1.5",rx:".75",transform:"rotate(-45 .609863 13.4514)",fill:"#FE3C44"},null,-1),Le=[Re,xe];function Ne(e,t){return Object(i["F"])(),Object(i["i"])("svg",Ae,Le)}const Pe=we(De,[["render",Ne]]),je=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),Ue=()=>{},Ge=(Object.assign,Array.isArray),Ve=e=>"function"==typeof e;let Fe;function Be(e,t=Fe){t&&t.active&&t.effects.push(e)}const qe=e=>{const t=new Set(e);return t.w=0,t.n=0,t},He=e=>(e.w&Je)>0,ze=e=>(e.n&Je)>0,Ke=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Je},We=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];He(i)&&!ze(i)?i.delete(e):t[n++]=i,i.w&=~Je,i.n&=~Je}t.length=n}};let Ye=0,Je=1;const $e=30;let Xe;Symbol(""),Symbol("");class Ze{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,Be(this,n)}run(){if(!this.active)return this.fn();let e=Xe,t=et;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Xe,Xe=this,et=!0,Je=1<<++Ye,Ye<=$e?Ke(this):Qe(this),this.fn()}finally{Ye<=$e&&We(this),Je=1<<--Ye,Xe=this.parent,et=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Xe===this?this.deferStop=!0:this.active&&(Qe(this),this.onStop&&this.onStop(),this.active=!1)}}function Qe(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let et=!0;function tt(e,t){let n=!1;Ye<=$e?ze(e)||(e.n|=Je,n=!He(e)):n=!e.has(Xe),n&&(e.add(Xe),Xe.deps.push(e))}function nt(e,t){const n=Ge(e)?e:[...e];for(const r of n)r.computed&&rt(r,t);for(const r of n)r.computed||rt(r,t)}function rt(e,t){(e!==Xe||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function it(e){const t=e&&e.__v_raw;return t?it(t):e}function ot(e){et&&Xe&&(e=it(e),tt(e.dep||(e.dep=qe())))}function at(e,t){e=it(e);const n=e.dep;n&&nt(n)}var st;class ct{constructor(e,t,n,r){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[st]=!1,this._dirty=!0,this.effect=new Ze(e,()=>{this._dirty||(this._dirty=!0,at(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=n}get value(){const e=it(this);return ot(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function ut(e,t,n=!1){let r,i;const o=Ve(e);o?(r=e,i=Ue):(r=e.get,i=e.set);const a=new ct(r,i,o||!i,n);return a}st="__v_isReadonly";const lt={key:0,id:"local-dialing",class:"dialing-local"},dt={key:1,class:"dialing-content"},pt={class:"dialing-user-id"},ft={key:1,class:"microphone-icon-container"},ht={class:"dialing-info"},gt=Object(i["n"])({__name:"Dialing",setup(e){const t=ut(()=>w.value===v.DIALING_C2C&&A.value===_.VIDEO?"1":"0.7");return(e,n)=>{var r,o;return Object(i["F"])(),Object(i["i"])("div",{class:"dialing-wrapper",style:Object(i["w"])("opacity: "+Object(i["U"])(t))},[Object(i["U"])(w)===Object(i["U"])(v).DIALING_C2C&&Object(i["U"])(A)===Object(i["U"])(_).VIDEO?(Object(i["F"])(),Object(i["i"])("div",lt)):Object(i["h"])("",!0),Object(i["U"])(je)&&Object(i["U"])(w)!==Object(i["U"])(v).BE_INVITED&&Object(i["U"])(w)!==Object(i["U"])(v).CALLING_C2C_AUDIO?Object(i["h"])("",!0):(Object(i["F"])(),Object(i["i"])("div",dt,[Object(i["j"])("div",pt,[Object(i["U"])(x).length>=1?(Object(i["F"])(),Object(i["i"])(i["a"],{key:0},[Object(i["l"])(Object(i["R"])(null==(r=Object(i["U"])(x)[0])?void 0:r.nick),1)],64)):Object(i["h"])("",!0),Object(i["U"])(w)===Object(i["U"])(v).CALLING_C2C_AUDIO?(Object(i["F"])(),Object(i["i"])("div",ft,[null!=(o=Object(i["U"])(x)[0])&&o.microphone?(Object(i["F"])(),Object(i["g"])(Oe,{key:0,volume:Object(i["U"])(X)(Object(i["U"])(x)[0].userID)},null,8,["volume"])):(Object(i["F"])(),Object(i["g"])(Pe,{key:1}))])):Object(i["h"])("",!0)]),Object(i["j"])("div",ht,Object(i["R"])(Object(i["U"])(D)),1)]))],4)}}}),vt=we(gt,[["__scopeId","data-v-5cd745e1"]]),mt={},_t={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 12 12",class:"design-iconfont"},yt=Object(i["j"])("path",{opacity:".01",transform:"matrix(1 0 0 -1 0 12)",fill:"#000",d:"M0 0H12V12H0z"},null,-1),bt=Object(i["j"])("path",{d:"M9.14646 7.14643C9.46144 7.46141 9.23835 7.99998 8.7929 7.99998L3.20712 7.99998C2.76167 7.99998 2.53859 7.4614 2.85357 7.14642L5.6465 4.35355C5.84177 4.15829 6.15835 4.15829 6.35361 4.35355L9.14646 7.14643Z",fill:"#fff"},null,-1),It=[yt,bt];function Tt(e,t){return Object(i["F"])(),Object(i["i"])("svg",_t,It)}const Ct=we(mt,[["render",Tt]]),St={class:"control-item-icon"},Et={class:"control-item-detail"},Mt={class:"control-item-text"},kt=Object(i["n"])({__name:"ControlPanelItem",props:{action:null,hasDetail:{type:Boolean,default:!1},size:{default:"small"},isMobile:{type:Boolean,default:!1}},setup(e){const t=e,n=Object(i["K"])(!1),{action:r,hasDetail:o,isMobile:a,size:s}=Object(i["S"])(t),c=Object(i["e"])(()=>"control-item-icon-container-"+s.value);async function u(){await Object(i["u"])();const e=document.getElementsByClassName("control-item-detail");for(let t=0;t<e.length;t++)e[t].addEventListener("click",e=>e.stopPropagation())}async function l(e){e.stopPropagation(),u(),n.value=!n.value}return Object(i["C"])(()=>{document.documentElement.addEventListener("click",e=>{n.value=!1})}),(e,t)=>(Object(i["F"])(),Object(i["i"])("div",{class:Object(i["v"])(Object(i["U"])(a)?"control-item-h5":"control-item")},[Object(i["j"])("div",St,[Object(i["j"])("div",{class:Object(i["v"])(Object(i["U"])(c)),onClick:t[0]||(t[0]=(...e)=>Object(i["U"])(r)&&Object(i["U"])(r)(...e))},[Object(i["M"])(e.$slots,"icon",{},void 0,!0)],2),Object(i["U"])(o)?(Object(i["F"])(),Object(i["i"])("div",{key:0,class:"control-item-summary",onClick:l},[Object(i["m"])(Ct)])):Object(i["h"])("",!0),Object(i["ab"])(Object(i["j"])("div",Et,[Object(i["M"])(e.$slots,"detail",{},void 0,!0)],512),[[i["W"],n.value]])]),Object(i["j"])("div",Mt,[Object(i["M"])(e.$slots,"text",{},void 0,!0)])],2))}}),wt=we(kt,[["__scopeId","data-v-974fb4e2"]]),Ot={},Dt={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 40 40",class:"design-iconfont"},At=Object(i["j"])("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 20C0 8.95431 8.95431 0 20 0C31.0457 0 40 8.95431 40 20C40 31.0457 31.0457 40 20 40C8.95431 40 0 31.0457 0 20Z",fill:"#FE3C44"},null,-1),Rt=Object(i["j"])("path",{d:"M25.4437 20.449C25.4437 22.1142 25.2336 23.3515 28.5089 23.7126C31.7875 24.0737 31.3666 21.6794 31.3662 20.0669C31.3649 18.2061 27.0602 15.619 20.2726 15.6173C13.4866 15.6173 9.1789 18.205 9.17888 20.067C9.17887 21.68 8.75621 24.0726 12.0332 23.7123C15.3101 23.3537 15.1 22.1155 15.0984 20.4495C15.1013 19.2862 17.7587 19.0316 20.2725 19.0298C22.7863 19.0281 25.4454 19.2844 25.4437 20.449Z",fill:"#fff"},null,-1),xt=[At,Rt];function Lt(e,t){return Object(i["F"])(),Object(i["i"])("svg",Dt,xt)}const Nt=we(Ot,[["render",Lt]]),Pt={},jt={width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ut=Object(i["j"])("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 20C0 8.95431 8.95431 0 20 0V0C31.0457 0 40 8.95431 40 20V20C40 31.0457 31.0457 40 20 40V40C8.95431 40 0 31.0457 0 20V20Z",fill:"#19D255"},null,-1),Gt=Object(i["j"])("path",{d:"M23.5397 16.9535C24.7172 18.131 25.4436 19.1544 28.0149 17.0938C30.5885 15.0308 28.5979 13.6354 27.4573 12.4955C26.1407 11.1806 21.2674 12.3951 16.4667 17.1935C11.6683 21.9919 10.4521 26.8677 11.7687 28.1844C12.9092 29.3249 14.3022 31.3156 16.3646 28.7437C18.4282 26.173 17.4041 25.446 16.2248 24.2691C15.4043 23.4444 17.1034 21.3853 18.8797 19.6066C20.656 17.8278 22.7174 16.1288 23.5397 16.9535Z",fill:"white"},null,-1),Vt=[Ut,Gt];function Ft(e,t){return Object(i["F"])(),Object(i["i"])("svg",jt,Vt)}const Bt=we(Pt,[["render",Ft]]),qt={},Ht={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 40 40",class:"design-iconfont"},zt=Object(i["j"])("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 20C0 8.95431 8.95431 0 20 0C31.0457 0 40 8.95431 40 20C40 31.0457 31.0457 40 20 40C8.95431 40 0 31.0457 0 20Z",fill:"#19D255"},null,-1),Kt=Object(i["j"])("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24.0421 14.8129C23.8814 14.0792 23.3684 13.5231 22.7291 13.3902C21.6674 13.2126 20.3495 13 17.6667 13C14.7319 13 13.5011 13.2009 12.5263 13.3669C11.9235 13.5295 11.4484 14.0688 11.2926 14.7675C11.153 15.6419 11 17.8298 11 19.6667C11 21.4724 11.1481 23.6461 11.2912 24.5205C11.4519 25.2542 11.9649 25.8103 12.6042 25.9431C13.666 26.1207 14.9839 26.3333 17.6667 26.3333C20.3495 26.3333 21.6674 26.1207 22.7305 25.9522C23.3726 25.8194 23.8891 25.26 24.0512 24.5231C24.1853 23.6461 24.3333 21.4724 24.3333 19.6667C24.3333 17.8609 24.1853 15.6872 24.0421 14.8129ZM12.6667 15.5C12.6667 15.0398 13.0398 14.6667 13.5 14.6667H14.3333C14.7936 14.6667 15.1667 15.0398 15.1667 15.5C15.1667 15.9602 14.7936 16.3333 14.3333 16.3333H13.5C13.0398 16.3333 12.6667 15.9602 12.6667 15.5ZM28.5 14.6667C27.0942 14.6667 26 16.547 26 17.6429V21.6905C26 22.9804 26.8008 24.6667 28.5 24.6667C29.2858 24.6667 29.3333 21.4524 29.3333 19.6667C29.3333 17.881 29.3333 14.6667 28.5 14.6667Z",fill:"#fff"},null,-1),Wt=[zt,Kt];function Yt(e,t){return Object(i["F"])(),Object(i["i"])("svg",Ht,Wt)}const Jt=we(qt,[["render",Yt]]),$t={},Xt={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 40 40",class:"design-iconfont"},Zt=Object(i["j"])("rect",{width:"40",height:"40",rx:"20",fill:"#DADADA","fill-opacity":".3"},null,-1),Qt=Object(i["j"])("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24.0164 14.5395C23.8498 13.7141 23.3182 13.0884 22.6556 12.939C21.5553 12.7392 20.1895 12.5 17.4091 12.5C14.3676 12.5 13.092 12.726 12.0818 12.9127C11.4571 13.0957 10.9647 13.7024 10.8033 14.4884C10.6585 15.4721 10.5 17.9335 10.5 20C10.5 22.0315 10.6535 24.4769 10.8018 25.4605C10.9684 26.2859 11.5 26.9116 12.1625 27.061C13.2629 27.2608 14.6287 27.5 17.4091 27.5C20.1895 27.5 21.5553 27.2608 22.6571 27.0712C23.3225 26.9218 23.8578 26.2925 24.0258 25.4634C24.1647 24.4769 24.3182 22.0315 24.3182 20C24.3182 17.9685 24.1647 15.5231 24.0164 14.5395ZM12.2273 15.2083C12.2273 14.7481 12.6004 14.375 13.0606 14.375H13.9848C14.4451 14.375 14.8182 14.7481 14.8182 15.2083V15.4167C14.8182 15.8769 14.4451 16.25 13.9848 16.25H13.0606C12.6004 16.25 12.2273 15.8769 12.2273 15.4167V15.2083ZM28.6364 14.375C27.1794 14.375 26.0455 16.4904 26.0455 17.7232V22.2768C26.0455 23.7279 26.8754 25.625 28.6364 25.625C29.4508 25.625 29.5 22.0089 29.5 20C29.5 17.9911 29.5 14.375 28.6364 14.375Z",fill:"#fff"},null,-1),en=[Zt,Qt];function tn(e,t){return Object(i["F"])(),Object(i["i"])("svg",Xt,en)}const nn=we($t,[["render",tn]]),rn={},on={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 40 40",class:"design-iconfont"},an=Object(i["j"])("rect",{width:"40",height:"40",rx:"20",fill:"#DADADA","fill-opacity":".3"},null,-1),sn=Object(i["j"])("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.6665 14.1667C16.6665 12.3284 18.1615 10.8334 19.9998 10.8334C21.8382 10.8334 23.3332 12.3284 23.3332 14.1667V19.1667C23.3332 21.005 21.8382 22.5 19.9998 22.5C18.1615 22.5 16.6665 21.005 16.6665 19.1667V14.1667ZM16.6665 28.3334C16.6665 27.8725 17.0398 27.5 17.4998 27.5H22.4998C22.9607 27.5 23.3332 27.8725 23.3332 28.3334C23.3332 28.7942 22.9607 29.1667 22.4998 29.1667H17.4998C17.0398 29.1667 16.6665 28.7942 16.6665 28.3334Z",fill:"#fff"},null,-1),cn=Object(i["j"])("path",{d:"M25.8332 18.3512V19.5083C25.8332 22.0811 23.2215 25 19.9998 25C16.7782 25 14.1665 22.0811 14.1665 19.5083V18.3334",stroke:"#fff","stroke-width":"1.66667","stroke-linecap":"round"},null,-1),un=[an,sn,cn];function ln(e,t){return Object(i["F"])(),Object(i["i"])("svg",on,un)}const dn=we(rn,[["render",ln]]),pn={},fn={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 40 40",class:"design-iconfont"},hn=Object(i["j"])("rect",{width:"40",height:"40",rx:"20",fill:"#DADADA","fill-opacity":".3"},null,-1),gn=Object(i["j"])("path",{d:"M17.7311 15.7485C17.7311 15.4339 18.1333 15.289 18.3596 15.507L22.9808 19.6831C23.1314 19.828 23.1314 20.0453 22.9808 20.166L18.3341 24.3435C18.1086 24.5608 17.7063 24.3917 17.7063 24.102V22.3396C17.7063 22.1464 17.5303 22.0016 17.3296 22.0016C14.2147 22.074 12.4319 22.8707 10.649 24.5366C10.3726 24.778 9.89538 24.5366 10.0205 24.1986C11.1007 21.1565 12.9345 18.4042 17.7311 17.8006V15.7485Z",fill:"#fff"},null,-1),vn=Object(i["j"])("path",{d:"M24.7603 17.0411C26.4103 18.6911 26.4328 21.3438 24.8106 22.9661C24.5788 23.1978 24.1999 23.1946 23.9642 22.9589C23.7284 22.7232 23.7252 22.3442 23.957 22.1124C25.1157 20.9537 25.0996 19.0589 23.9211 17.8803C23.6853 17.6446 23.6821 17.2656 23.9139 17.0339C24.1456 16.8021 24.5246 16.8053 24.7603 17.0411Z",fill:"#fff"},null,-1),mn=Object(i["j"])("path",{d:"M26.8765 14.925C29.7051 17.7536 29.7437 22.3011 26.9627 25.0821C26.731 25.3138 26.352 25.3106 26.1163 25.0749C25.8806 24.8392 25.8773 24.4602 26.1091 24.2285C28.4266 21.911 28.3944 18.1214 26.0373 15.7642C25.8016 15.5285 25.7983 15.1495 26.0301 14.9178C26.2618 14.686 26.6408 14.6893 26.8765 14.925Z",fill:"#fff"},null,-1),_n=[hn,gn,vn,mn];function yn(e,t){return Object(i["F"])(),Object(i["i"])("svg",fn,_n)}const bn=we(pn,[["render",yn]]),In={},Tn={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 40 40",class:"design-iconfont"},Cn=Object(i["j"])("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 20C0 8.95431 8.95431 0 20 0C31.0457 0 40 8.95431 40 20C40 31.0457 31.0457 40 20 40C8.95431 40 0 31.0457 0 20Z",fill:"#FE3C44"},null,-1),Sn=Object(i["j"])("path",{d:"M25.4437 20.449C25.4437 22.1142 25.2336 23.3515 28.5089 23.7126C31.7875 24.0737 31.3666 21.6794 31.3662 20.0669C31.3649 18.2061 27.0602 15.619 20.2726 15.6173C13.4866 15.6173 9.1789 18.205 9.17888 20.067C9.17887 21.68 8.75621 24.0726 12.0332 23.7123C15.3101 23.3537 15.1 22.1155 15.0984 20.4495C15.1013 19.2862 17.7587 19.0316 20.2725 19.0298C22.7863 19.0281 25.4454 19.2844 25.4437 20.449Z",fill:"#fff"},null,-1),En=[Cn,Sn];function Mn(e,t){return Object(i["F"])(),Object(i["i"])("svg",Tn,En)}const kn=we(In,[["render",Mn]]),wn={},On={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 40 40",class:"design-iconfont"},Dn=Object(i["j"])("rect",{opacity:".3",width:"40",height:"40",rx:"20",fill:"#fff"},null,-1),An=Object(i["j"])("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M20 11.5C18.0697 11.5 16.5 12.9678 16.5 14.7727V19.6818C16.5 20.2623 16.6623 20.8078 16.9468 21.281L23.4997 14.7281C23.4741 12.9437 21.9143 11.5 20 11.5ZM23.5 18.9704L19.5436 22.9269C19.693 22.9451 19.8453 22.9545 20 22.9545C21.9303 22.9545 23.5 21.4867 23.5 19.6818V18.9704ZM15.7321 22.4957C15.1207 21.7452 14.75 20.8727 14.75 20.0171V18.8636L14.7432 18.761C14.6892 18.3575 14.3211 18.0454 13.875 18.0454C13.3918 18.0454 13 18.4117 13 18.8636V20.0171L13.0047 20.2215C13.0611 21.4647 13.6284 22.6883 14.5245 23.7033L15.7321 22.4957ZM16.9482 25.5222L18.2094 24.261C18.7777 24.4715 19.3834 24.5909 20 24.5909C22.6589 24.5909 25.1138 22.3716 25.2445 20.1981L25.25 20.0171V18.8811C25.25 18.4293 25.6418 18.0629 26.125 18.0629C26.5711 18.0629 26.9392 18.3751 26.9932 18.7785L27 18.8811V20.0171C27 23.1518 23.6976 26.2272 20 26.2272C18.9256 26.2272 17.8845 25.9676 16.9482 25.5222ZM16.5 28.6818C16.5 28.2294 16.892 27.8636 17.375 27.8636H22.625C23.1089 27.8636 23.5 28.2294 23.5 28.6818C23.5 29.1343 23.1089 29.5 22.625 29.5H17.375C16.892 29.5 16.5 29.1343 16.5 28.6818Z",fill:"#fff"},null,-1),Rn=Object(i["j"])("rect",{x:"27.249",y:"11.7688",width:"1.5",height:"22",rx:".75",transform:"rotate(45 27.249 11.7688)",fill:"#FE3C44"},null,-1),xn=[Dn,An,Rn];function Ln(e,t){return Object(i["F"])(),Object(i["i"])("svg",On,xn)}const Nn=we(wn,[["render",Ln]]),Pn={},jn={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 40 40",class:"design-iconfont"},Un=Object(i["j"])("rect",{width:"40",height:"40",rx:"20",fill:"#DADADA","fill-opacity":".3"},null,-1),Gn=Object(i["j"])("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M22.7221 12.9557C22.7001 12.9496 22.6779 12.944 22.6556 12.939C21.5553 12.7392 20.1895 12.5 17.4091 12.5C14.3676 12.5 13.092 12.726 12.0818 12.9127C11.4571 13.0957 10.9647 13.7024 10.8033 14.4884C10.6585 15.4721 10.5 17.9335 10.5 20C10.5 21.7343 10.6118 23.7703 10.7369 24.9409L22.7221 12.9557ZM12.755 27.1654C13.7704 27.3355 15.1033 27.5 17.4091 27.5C20.1658 27.5 21.5319 27.2649 22.6289 27.0761L22.6571 27.0712C23.3225 26.9218 23.8578 26.2925 24.0258 25.4634C24.1647 24.4769 24.3182 22.0315 24.3182 20C24.3182 18.5797 24.2432 16.957 24.1473 15.773L12.755 27.1654ZM13.0606 14.375C12.6004 14.375 12.2273 14.7481 12.2273 15.2083V15.4167C12.2273 15.8769 12.6004 16.25 13.0606 16.25H13.9848C14.4451 16.25 14.8182 15.8769 14.8182 15.4167V15.2083C14.8182 14.7481 14.4451 14.375 13.9848 14.375H13.0606ZM26.0455 17.7232C26.0455 16.4904 27.1794 14.375 28.6364 14.375C29.5 14.375 29.5 17.9911 29.5 20C29.5 22.0089 29.4508 25.625 28.6364 25.625C26.8754 25.625 26.0455 23.7279 26.0455 22.2768V17.7232Z",fill:"#fff"},null,-1),Vn=Object(i["j"])("rect",{x:"24.8574",y:"11.8564",width:"1.5",height:"22",rx:".75",transform:"rotate(45 24.8574 11.8564)",fill:"#FE3C44"},null,-1),Fn=[Un,Gn,Vn];function Bn(e,t){return Object(i["F"])(),Object(i["i"])("svg",jn,Fn)}const qn=we(Pn,[["render",Bn]]),Hn={class:"control-wrapper"},zn={key:0},Kn={class:"panel-button-area"},Wn={class:"control-item-detail-row"},Yn={value:"",selected:"",disabled:"",hidden:""},Jn=["value"],$n={key:0},Xn={value:"",selected:"",disabled:"",hidden:""},Zn=["value"],Qn=["value"],er=["value"],tr={value:"",selected:"",disabled:"",hidden:""},nr=["value"],rr={key:1,class:"panel-hangup"},ir=Object(i["n"])({__name:"ControlPanel",setup(e){const t=Object(i["K"])(!1),n=Object(i["K"])(!1);async function r(){await Fi.hangup()}function o(){Fi.switchDevice("video",E.value),t.value=!1}function a(){Fi.switchDevice("audio",M.value),n.value=!1}async function s(){var e;if(null!=(e=N.value)&&e.camera)await Fi.closeCamera();else{const e=R.value?"local-group":"local-c2c";await Fi.openCamera(e)}}async function c(){var e;null!=(e=N.value)&&e.microphone?await Fi.closeMicrophone():await Fi.openMicrophone()}async function l(){await Fi.setVideoQuality(T.value)}async function d(){await Fi.switchCallMediaType()}function p(){Fi.accept()}function f(){Fi.reject()}return Object(i["C"])(()=>{document.documentElement.addEventListener("click",e=>{t.value=!1,n.value=!1})}),(e,t)=>(Object(i["F"])(),Object(i["i"])("div",Hn,[Object(i["U"])(je)&&Object(i["U"])(w)!==Object(i["U"])(v).CALLING_C2C_AUDIO?(Object(i["F"])(),Object(i["i"])("div",zn,Object(i["R"])(Object(i["U"])(D)),1)):Object(i["h"])("",!0),Object(i["j"])("div",Kn,[Object(i["U"])(w)===Object(i["U"])(v).BE_INVITED?(Object(i["F"])(),Object(i["i"])(i["a"],{key:0},[Object(i["m"])(wt,{action:f,isMobile:Object(i["U"])(je),size:Object(i["U"])(je)?"medium":"small"},{text:Object(i["Z"])(()=>[Object(i["l"])(Object(i["R"])(Object(i["U"])(j)("reject")),1)]),icon:Object(i["Z"])(()=>[Object(i["m"])(Nt)]),_:1},8,["isMobile","size"]),Object(i["m"])(wt,{action:p,isMobile:Object(i["U"])(je),size:Object(i["U"])(je)?"medium":"small"},{text:Object(i["Z"])(()=>[Object(i["l"])(Object(i["R"])(Object(i["U"])(j)("accept")),1)]),icon:Object(i["Z"])(()=>[Object(i["U"])(A)===Object(i["U"])(_).AUDIO?(Object(i["F"])(),Object(i["g"])(Bt,{key:0})):Object(i["U"])(A)===Object(i["U"])(_).VIDEO?(Object(i["F"])(),Object(i["g"])(Jt,{key:1})):Object(i["h"])("",!0)]),_:1},8,["isMobile","size"])],64)):"idle"!==Object(i["U"])(w)?(Object(i["F"])(),Object(i["i"])(i["a"],{key:1},[Object(i["U"])(A)===Object(i["U"])(_).VIDEO?(Object(i["F"])(),Object(i["g"])(wt,{key:0,action:s,hasDetail:!Object(i["U"])(je),isMobile:Object(i["U"])(je),size:Object(i["U"])(je)?"medium":"small"},{text:Object(i["Z"])(()=>{var e;return[Object(i["l"])(Object(i["R"])(null!=(e=Object(i["U"])(N))&&e.camera?Object(i["U"])(j)("camera-opened"):Object(i["U"])(j)("camera-closed")),1)]}),icon:Object(i["Z"])(()=>{var e,t;return[null!=(e=Object(i["U"])(N))&&e.camera?(Object(i["F"])(),Object(i["g"])(nn,{key:0})):Object(i["h"])("",!0),null!=(t=Object(i["U"])(N))&&t.camera?Object(i["h"])("",!0):(Object(i["F"])(),Object(i["g"])(qn,{key:1}))]}),detail:Object(i["Z"])(()=>{var e;return[Object(i["j"])("div",Wn,[Object(i["j"])("div",null,Object(i["R"])(Object(i["U"])(j)("camera")),1),Object(i["ab"])(Object(i["j"])("select",{class:"device-select","onUpdate:modelValue":t[0]||(t[0]=e=>Object(i["r"])(E)?E.value=e:null),onChange:o,onClick:t[1]||(t[1]=e=>Object(i["U"])(Fi).updateCameraList())},[Object(i["j"])("option",Yn,Object(i["R"])(Object(i["U"])(C)&&(null==(e=Object(i["U"])(C)[0])?void 0:e.label)),1),(Object(i["F"])(!0),Object(i["i"])(i["a"],null,Object(i["L"])(Object(i["U"])(C),e=>(Object(i["F"])(),Object(i["i"])("option",{value:e.deviceId,key:e.deviceId},Object(i["R"])(e.label),9,Jn))),128))],544),[[i["V"],Object(i["U"])(E)]])]),Object(i["U"])(w)===Object(i["U"])(v).DIALING_C2C?(Object(i["F"])(),Object(i["i"])("div",$n,[Object(i["j"])("div",null,Object(i["R"])(Object(i["U"])(j)("image-resolution")),1),Object(i["ab"])(Object(i["j"])("select",{class:"device-select","onUpdate:modelValue":t[2]||(t[2]=e=>Object(i["r"])(T)?T.value=e:null),onChange:l},[Object(i["j"])("option",Xn,Object(i["R"])(Object(i["U"])(j)("default-image-resolution")),1),Object(i["j"])("option",{value:Object(i["U"])(u).RESOLUTION_480P,selected:""}," 480p ",8,Zn),Object(i["j"])("option",{value:Object(i["U"])(u).RESOLUTION_720P,selected:""}," 720p ",8,Qn),Object(i["j"])("option",{value:Object(i["U"])(u).RESOLUTION_1080P,selected:""}," 1080p ",8,er)],544),[[i["V"],Object(i["U"])(T)]])])):Object(i["h"])("",!0)]}),_:1},8,["hasDetail","isMobile","size"])):Object(i["h"])("",!0),Object(i["m"])(wt,{action:c,hasDetail:!Object(i["U"])(je),isMobile:Object(i["U"])(je),size:Object(i["U"])(je)?"medium":"small"},{text:Object(i["Z"])(()=>{var e;return[Object(i["l"])(Object(i["R"])(null!=(e=Object(i["U"])(N))&&e.microphone?Object(i["U"])(j)("microphone-opened"):Object(i["U"])(j)("microphone-closed")),1)]}),icon:Object(i["Z"])(()=>{var e,t;return[null!=(e=Object(i["U"])(N))&&e.microphone?(Object(i["F"])(),Object(i["g"])(dn,{key:0})):Object(i["h"])("",!0),null!=(t=Object(i["U"])(N))&&t.microphone?Object(i["h"])("",!0):(Object(i["F"])(),Object(i["g"])(Nn,{key:1}))]}),detail:Object(i["Z"])(()=>{var e;return[Object(i["j"])("div",null,[Object(i["l"])(Object(i["R"])(Object(i["U"])(j)("microphone"))+" ",1),Object(i["ab"])(Object(i["j"])("select",{class:"device-select","onUpdate:modelValue":t[3]||(t[3]=e=>Object(i["r"])(M)?M.value=e:null),onChange:a,onClick:t[4]||(t[4]=e=>Object(i["U"])(Fi).updateMicrophoneList())},[Object(i["j"])("option",tr,Object(i["R"])(Object(i["U"])(S)&&(null==(e=Object(i["U"])(S)[0])?void 0:e.label)),1),(Object(i["F"])(!0),Object(i["i"])(i["a"],null,Object(i["L"])(Object(i["U"])(S),e=>(Object(i["F"])(),Object(i["i"])("option",{value:e.deviceId,key:e.deviceId},Object(i["R"])(e.label),9,nr))),128))],544),[[i["V"],Object(i["U"])(M)]])])]}),_:1},8,["hasDetail","isMobile","size"]),Object(i["h"])("",!0),"calling-c2c-video"===Object(i["U"])(w)?Object(i["ab"])((Object(i["F"])(),Object(i["g"])(wt,{key:2,action:d},{text:Object(i["Z"])(()=>[Object(i["l"])(Object(i["R"])(Object(i["U"])(j)("video-to-audio")),1)]),icon:Object(i["Z"])(()=>[Object(i["m"])(bn)]),_:1},512)),[[i["W"],!Object(i["U"])(je)]]):Object(i["h"])("",!0),Object(i["ab"])(Object(i["m"])(wt,{action:r},{text:Object(i["Z"])(()=>[Object(i["l"])(Object(i["R"])(Object(i["U"])(je)?"":Object(i["U"])(j)("hangup")),1)]),icon:Object(i["Z"])(()=>[Object(i["m"])(kn)]),_:1},512),[[i["W"],!Object(i["U"])(je)]])],64)):Object(i["h"])("",!0)]),Object(i["U"])(w)!==Object(i["U"])(v).IDLE&&Object(i["U"])(w)!==Object(i["U"])(v).BE_INVITED?(Object(i["F"])(),Object(i["i"])("div",rr,[Object(i["ab"])(Object(i["m"])(wt,{action:r,size:Object(i["U"])(je)?"large":"small"},{text:Object(i["Z"])(()=>[Object(i["l"])(Object(i["R"])(Object(i["U"])(je)?"":Object(i["U"])(j)("hangup")),1)]),icon:Object(i["Z"])(()=>[Object(i["m"])(kn)]),_:1},8,["size"]),[[i["W"],Object(i["U"])(je)]])])):Object(i["h"])("",!0)]))}}),or=we(ir,[["__scopeId","data-v-3f247d2e"]]),ar={},sr={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 15 24",class:"design-iconfont"},cr=Object(i["j"])("path",{d:"M13.8431 1.14248C14.6564 1.93792 14.7145 3.1923 14.0174 4.0533L13.8431 4.24463L5.91455 11.9997L13.8431 19.7554C14.6564 20.5508 14.7145 21.8052 14.0174 22.6662L13.8431 22.8575C13.0299 23.653 11.7475 23.7098 10.8672 23.028L10.6716 22.8575L1.15685 13.5511C0.343607 12.7556 0.285517 11.5013 0.982587 10.6402L1.15685 10.4489L10.6716 1.14248C11.5474 0.285841 12.9673 0.285841 13.8431 1.14248Z",fill:"#fff"},null,-1),ur=[cr];function lr(e,t){return Object(i["F"])(),Object(i["i"])("svg",sr,ur)}const dr=we(ar,[["render",lr]]),pr={},fr={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 15 24",class:"design-iconfont"},hr=Object(i["j"])("path",{d:"M1.15685 1.14248C0.343606 1.93792 0.285517 3.1923 0.982587 4.0533L1.15685 4.24463L9.08545 11.9997L1.15685 19.7554C0.343606 20.5508 0.285517 21.8052 0.982587 22.6662L1.15685 22.8575C1.9701 23.653 3.25255 23.7098 4.13282 23.028L4.32843 22.8575L13.8431 13.5511C14.6564 12.7556 14.7145 11.5013 14.0174 10.6402L13.8431 10.4489L4.32843 1.14248C3.45262 0.285841 2.03266 0.285841 1.15685 1.14248Z",fill:"#fff"},null,-1),gr=[hr];function vr(e,t){return Object(i["F"])(),Object(i["i"])("svg",fr,gr)}const mr=we(pr,[["render",vr]]),_r={class:"calling-wrapper"},yr={class:"turn-icon-container"},br={class:"turn-icon-container"},Ir={class:"tag"},Tr={class:"microphone-icon-container"},Cr=["id"],Sr={key:0,class:"user-view-text-container"},Er={class:"user-view-info"},Mr={class:"tag"},kr={class:"microphone-icon-container"},wr=Object(i["n"])({__name:"Calling-Group",setup(e){const t=Object(i["K"])(1),n=Object(i["K"])([]),r=Object(i["K"])("group-user-view"),o=Object(i["K"])("group-calling-container"),a=Object(i["K"])("user-view-user-id");async function s(){let e=[];for(let n=8*(t.value-1);n<8*t.value&&n<x.value.length;n++)e.push(x.value[n]);n.value=e}function c(){t.value>1&&t.value--}function u(){t.value<Math.floor((x.value.length-1)/8+1)&&t.value++}return Object(i["C"])(async()=>{(w.value===v.CALLING_GROUP_VIDEO||w.value===v.CALLING_GROUP_AUDIO)&&await Fi.renderLocal(),await Fi.renderRemoteWaitList()}),Object(i["X"])(n,async()=>{const e=n.value.length+1;r.value="group-user-view group-user-view-"+e,o.value="group-calling-container group-calling-container-"+e,a.value="user-view-user-id user-view-user-id-"+e,Fi.renderRemoteList(n.value)},{flush:"post",deep:!0}),Object(i["Y"])(async()=>{await s()}),(e,t)=>{var s,l;return Object(i["F"])(),Object(i["i"])("div",_r,[Object(i["U"])(x).length>8?(Object(i["F"])(),Object(i["i"])(i["a"],{key:0},[Object(i["j"])("div",{class:"page-turn left",onClick:c},[Object(i["j"])("div",yr,[Object(i["m"])(dr)])]),Object(i["j"])("div",{class:"page-turn right",onClick:u},[Object(i["j"])("div",br,[Object(i["m"])(mr)])])],64)):Object(i["h"])("",!0),Object(i["j"])("div",{class:Object(i["v"])(o.value)},[Object(i["j"])("div",{id:"local-group",class:Object(i["v"])(r.value)},[Object(i["j"])("span",Ir,[Object(i["j"])("div",Tr,[null!=(s=Object(i["U"])(N))&&s.microphone?(Object(i["F"])(),Object(i["g"])(Oe,{key:0,volume:Object(i["U"])(X)(Object(i["U"])(N).userID)},null,8,["volume"])):(Object(i["F"])(),Object(i["g"])(Pe,{key:1}))]),Object(i["l"])(" "+Object(i["R"])(`${null==(l=Object(i["U"])(N))?void 0:l.nick} ${Object(i["U"])(j)("me")}`),1)])],2),(Object(i["F"])(!0),Object(i["i"])(i["a"],null,Object(i["L"])(n.value,e=>(Object(i["F"])(),Object(i["i"])("div",{class:Object(i["v"])(r.value),id:e.userID,key:e.userID},[!e.isEntered||Object(i["U"])(R)&&Object(i["U"])(A)===Object(i["U"])(_).AUDIO?(Object(i["F"])(),Object(i["i"])("div",Sr,[Object(i["j"])("div",{class:Object(i["v"])(a.value)},Object(i["R"])(null==e?void 0:e.nick),3),Object(i["j"])("div",Er,Object(i["R"])(e.isEntered?Object(i["U"])(j)("already-enter"):Object(i["U"])(j)("waiting")),1)])):Object(i["h"])("",!0),Object(i["j"])("span",Mr,[Object(i["j"])("div",kr,[null!=e&&e.microphone?(Object(i["F"])(),Object(i["g"])(Oe,{key:0,volume:Object(i["U"])(X)(null==e?void 0:e.userID)},null,8,["volume"])):(Object(i["F"])(),Object(i["g"])(Pe,{key:1}))]),Object(i["l"])(" "+Object(i["R"])(null==e?void 0:e.nick),1)])],10,Cr))),128))],2)])}}}),Or=we(wr,[["__scopeId","data-v-f5cadefc"]]),Dr={},Ar={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16",class:"design-iconfont"},Rr=Object(i["j"])("path",{d:"M13.733 6.99996C13.7997 6.99996 13.933 6.99996 13.9997 6.93329C14.133 6.86663 14.2663 6.73329 14.333 6.59996C14.3997 6.46663 14.3997 6.26663 14.333 6.06663C14.2663 5.99996 14.2663 5.93329 14.1997 5.86663L10.1997 1.86663C9.93301 1.59996 9.53301 1.59996 9.26634 1.86663C8.99967 2.13329 8.99967 2.53329 9.26634 2.79996L12.133 5.66663H1.99967C1.59967 5.66663 1.33301 5.93329 1.33301 6.33329C1.33301 6.73329 1.59967 6.99996 1.99967 6.99996H13.733ZM13.9997 8.99996H2.26634C2.19967 8.99996 2.06634 8.99996 1.99967 9.06663C1.86634 9.13329 1.73301 9.26663 1.66634 9.39996C1.59967 9.53329 1.59967 9.73329 1.66634 9.93329C1.73301 9.99996 1.73301 10.0666 1.79967 10.1333L5.79967 14.1333C5.93301 14.2666 6.13301 14.3333 6.26634 14.3333C6.39967 14.3333 6.59967 14.2666 6.73301 14.1333C6.99967 13.8666 6.99967 13.4666 6.73301 13.2L3.86634 10.3333H13.9997C14.3997 10.3333 14.6663 10.0666 14.6663 9.66663C14.6663 9.26663 14.3997 8.99996 13.9997 8.99996Z",fill:"#fff"},null,-1),xr=[Rr];function Lr(e,t){return Object(i["F"])(),Object(i["i"])("svg",Ar,xr)}const Nr=we(Dr,[["render",Lr]]),Pr={class:"calling-wrapper"},jr={class:"tag"},Ur={class:"microphone-icon-container"},Gr=["id"],Vr={class:"tag"},Fr={class:"microphone-icon-container"},Br=Object(i["n"])({__name:"Calling-C2CVideo",setup(e){Object(i["C"])(async()=>{await Fi.renderLocal(),await Fi.renderRemoteWaitList()});const t=Object(i["K"])("small"),n=Object(i["K"])("small-h5"),r=Object(i["K"])("large"),o=async()=>{if(je)[n.value,r.value]=[r.value,n.value];else{[t.value,r.value]=[r.value,t.value],await Object(i["u"])();const e=document.getElementsByClassName("large")[0],n=document.getElementsByClassName("small")[0];n.style.height="170px",n.style.width="260px",e.style.height="100%",e.style.width="100%"}},a=async()=>{je&&o()};return(e,s)=>{var c,u,l,d,p;return Object(i["F"])(),Object(i["i"])("div",Pr,[Object(i["j"])("div",{id:"local-c2c",class:Object(i["v"])(Object(i["U"])(je)?n.value:t.value),onClick:a},[Object(i["ab"])(Object(i["j"])("span",jr,[Object(i["j"])("div",Ur,[null!=(c=Object(i["U"])(N))&&c.microphone?(Object(i["F"])(),Object(i["g"])(Oe,{key:0,volume:Object(i["U"])(X)(Object(i["U"])(N).userID)},null,8,["volume"])):(Object(i["F"])(),Object(i["g"])(Pe,{key:1}))]),Object(i["l"])(" "+Object(i["R"])(`${null==(u=Object(i["U"])(N))?void 0:u.nick} ${Object(i["U"])(j)("me")}`),1)],512),[[i["W"],!Object(i["U"])(je)]]),Object(i["ab"])(Object(i["j"])("div",{class:"switch-large-small",onClick:o},[Object(i["m"])(Nr)],512),[[i["W"],!Object(i["U"])(je)]])],2),Object(i["U"])(x).length>=1?(Object(i["F"])(),Object(i["i"])("div",{key:0,id:Object(i["U"])(x)[0].userID,class:Object(i["v"])(r.value),onClick:a},[Object(i["ab"])(Object(i["j"])("span",Vr,[Object(i["j"])("div",Fr,[null!=(l=Object(i["U"])(x)[0])&&l.microphone?(Object(i["F"])(),Object(i["g"])(Oe,{key:0,volume:Object(i["U"])(X)(null==(d=Object(i["U"])(x)[0])?void 0:d.userID)},null,8,["volume"])):(Object(i["F"])(),Object(i["g"])(Pe,{key:1}))]),Object(i["l"])(" "+Object(i["R"])(null==(p=Object(i["U"])(x)[0])?void 0:p.nick),1)],512),[[i["W"],!Object(i["U"])(je)]]),Object(i["ab"])(Object(i["j"])("div",{class:"switch-large-small",onClick:o},[Object(i["m"])(Nr)],512),[[i["W"],!Object(i["U"])(je)]])],10,Gr)):Object(i["h"])("",!0)])}}}),qr=we(Br,[["__scopeId","data-v-be0037c8"]]),Hr={},zr={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Kr=Object(i["j"])("rect",{x:"0.769231",y:"0.769231",width:"18.4615",height:"18.4615",rx:"0.769231",stroke:"white","stroke-width":"1.53846"},null,-1),Wr=Object(i["j"])("path",{d:"M11.5385 12.3077C11.5385 11.8829 11.8829 11.5385 12.3077 11.5385H19.2308V18.4615C19.2308 18.8864 18.8864 19.2308 18.4616 19.2308H11.5385V12.3077Z",stroke:"white","stroke-width":"1.53846"},null,-1),Yr=Object(i["j"])("path",{d:"M0.769287 0.769226L8.9723 8.92412",stroke:"white","stroke-width":"1.53846"},null,-1),Jr=Object(i["j"])("path",{d:"M9.4967 4.71716V9.4486H4.74146",stroke:"white","stroke-width":"1.53846","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),$r=[Kr,Wr,Yr,Jr];function Xr(e,t){return Object(i["F"])(),Object(i["i"])("svg",zr,$r)}const Zr=we(Hr,[["render",Xr]]),Qr={},ei={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ti=Object(i["j"])("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.66683 9.33337H3.3335V4.00004C3.3335 3.63185 3.63197 3.33337 4.00016 3.33337L9.3335 3.33337V4.66671H5.60963L9.8049 8.86199L8.86209 9.8048L4.66683 5.60952V9.33337ZM15.3333 10.6667H16.6667V16C16.6667 16.3682 16.3682 16.6667 16 16.6667L10.6667 16.6667L10.6667 15.3333H14.3905L10.1953 11.138L11.1381 10.1952L15.3333 14.3905V10.6667Z",fill:"white"},null,-1),ni=Object(i["j"])("path",{d:"M0.666667 1.33333C0.666667 0.965144 0.965144 0.666667 1.33333 0.666667H18.6667C19.0349 0.666667 19.3333 0.965144 19.3333 1.33333V18.6667C19.3333 19.0349 19.0349 19.3333 18.6667 19.3333H1.33333C0.965143 19.3333 0.666667 19.0349 0.666667 18.6667V1.33333Z",stroke:"white","stroke-width":"1.33333"},null,-1),ri=[ti,ni];function ii(e,t){return Object(i["F"])(),Object(i["i"])("svg",ei,ri)}const oi=we(Qr,[["render",ii]]),ai={key:0,class:"tui-call-kit",id:"tui-call-kit-id"},si={class:"function-buttons"},ci=Object(i["n"])({__name:"TUICallKit",props:{beforeCalling:null,afterCalling:null,onMinimized:null,onMessageSentByMe:null,allowedMinimized:{type:Boolean,default:!1},allowedFullScreen:{type:Boolean,default:!0},videoDisplayMode:{default:c.COVER},videoResolution:{default:u.RESOLUTION_480P},lang:{default:"zh-cn"}},setup(e){const t=e,{beforeCalling:n,afterCalling:r,onMinimized:o,onMessageSentByMe:a,allowedMinimized:s,allowedFullScreen:c,videoDisplayMode:u,videoResolution:l}=Object(i["S"])(t);function d(){document.fullscreenElement&&document.exitFullscreen(),Fi.toggleMinimize()}function p(){let e=document.getElementById("tui-call-kit-id");document.fullscreenElement?document.exitFullscreen():e.requestFullscreen().catch(e=>{alert(`Error attempting to enable fullscreen mode: ${e.message} (${e.name})`)})}return Object(i["Y"])(()=>{Fi.setCallback({beforeCalling:n&&n.value,afterCalling:r&&r.value,onMinimized:o&&o.value,onMessageSentByMe:a&&a.value}),I.value=u.value,T.value=l.value}),(e,t)=>Object(i["U"])(w)!==Object(i["U"])(v).IDLE?Object(i["ab"])((Object(i["F"])(),Object(i["i"])("div",ai,[Object(i["j"])("div",si,[Object(i["U"])(w)!==Object(i["U"])(v).IDLE&&!0===Object(i["U"])(s)&&Object(i["U"])(w)!==Object(i["U"])(v).DIALING_C2C&&Object(i["U"])(w)!==Object(i["U"])(v).DIALING_GROUP&&Object(i["U"])(w)!==Object(i["U"])(v).BE_INVITED?(Object(i["F"])(),Object(i["i"])("div",{key:0,class:"minimize",onClick:d},[Object(i["m"])(Zr)])):Object(i["h"])("",!0),!0===Object(i["U"])(c)?(Object(i["F"])(),Object(i["i"])("div",{key:1,class:"minimize",onClick:p},[Object(i["m"])(oi)])):Object(i["h"])("",!0)]),Object(i["U"])(w)===Object(i["U"])(v).BE_INVITED||Object(i["U"])(w)===Object(i["U"])(v).DIALING_C2C||Object(i["U"])(w)===Object(i["U"])(v).CALLING_C2C_AUDIO?(Object(i["F"])(),Object(i["g"])(vt,{key:0})):Object(i["h"])("",!0),Object(i["U"])(w)===Object(i["U"])(v).CALLING_C2C_VIDEO?(Object(i["F"])(),Object(i["g"])(qr,{key:1})):Object(i["h"])("",!0),Object(i["U"])(w)===Object(i["U"])(v).DIALING_GROUP||Object(i["U"])(w)===Object(i["U"])(v).CALLING_GROUP_AUDIO||Object(i["U"])(w)===Object(i["U"])(v).CALLING_GROUP_VIDEO?(Object(i["F"])(),Object(i["g"])(Or,{key:2})):Object(i["h"])("",!0),Object(i["U"])(w)!==Object(i["U"])(v).IDLE?(Object(i["F"])(),Object(i["g"])(or,{key:3})):Object(i["h"])("",!0)],512)),[[i["W"],!Object(i["U"])(O)]]):Object(i["h"])("",!0)}}),ui=we(ci,[["__scopeId","data-v-5cd78d8d"]]),li={},di={width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},pi=Object(i["j"])("path",{d:"M18.4437 12.449C18.4437 14.1142 18.2336 15.3515 21.5089 15.7126C24.7875 16.0737 24.3666 13.6794 24.3662 12.0669C24.3649 10.2061 20.0602 7.61895 13.2726 7.6173C6.48662 7.61735 2.1789 10.205 2.17888 12.067C2.17887 13.68 1.75621 16.0726 5.03315 15.7123C8.31009 15.3537 8.10005 14.1155 8.09837 12.4495C8.10134 11.2862 10.7587 11.0316 13.2725 11.0298C15.7863 11.0281 18.4454 11.2844 18.4437 12.449Z",fill:"#FE3C44"},null,-1),fi=[pi];function hi(e,t){return Object(i["F"])(),Object(i["i"])("svg",di,fi)}const gi=we(li,[["render",hi]]),vi={},mi={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_i=Object(i["j"])("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.66666 4.16668C6.66666 2.32834 8.16166 0.833344 9.99999 0.833344C11.8383 0.833344 13.3333 2.32834 13.3333 4.16668V9.16668C13.3333 11.005 11.8383 12.5 9.99999 12.5C8.16166 12.5 6.66666 11.005 6.66666 9.16668V4.16668ZM6.66666 18.3333C6.66666 17.8725 7.03999 17.5 7.49999 17.5H12.5C12.9608 17.5 13.3333 17.8725 13.3333 18.3333C13.3333 18.7942 12.9608 19.1667 12.5 19.1667H7.49999C7.03999 19.1667 6.66666 18.7942 6.66666 18.3333Z",fill:"#101419"},null,-1),yi=Object(i["j"])("path",{d:"M15.8333 8.3512V9.50825C15.8333 12.081 13.2217 15 9.99999 15C6.77833 15 4.16666 12.081 4.16666 9.50825V8.33334",stroke:"#101419","stroke-width":"1.66667","stroke-linecap":"round"},null,-1),bi=[_i,yi];function Ii(e,t){return Object(i["F"])(),Object(i["i"])("svg",mi,bi)}const Ti=we(vi,[["render",Ii]]),Ci={},Si={width:"15",height:"21",viewBox:"0 0 15 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ei=Object(i["j"])("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.6247 0.719168C14.1934 0.374158 13.5641 0.44408 13.2191 0.875342L10.8168 3.83203C10.1789 3.02455 9.15387 2.50004 8.00001 2.50004C6.06976 2.50004 4.50001 3.96785 4.50001 5.77276V10.6819C4.50001 10.9563 4.5363 11.2229 4.60463 11.4778L3.388 12.9752C2.98449 12.3433 2.75001 11.6522 2.75001 10.9717V9.81819L2.74319 9.71556C2.6892 9.31213 2.32108 9.00001 1.87501 9.00001C1.39176 9.00001 1.00001 9.36632 1.00001 9.81819V10.9717L1.00466 11.1761C1.05557 12.2968 1.52161 13.4016 2.26939 14.3519L0.219137 16.8753L0.146861 16.9782C-0.112977 17.4017 -0.0227767 17.9624 0.375311 18.2809C0.806573 18.6259 1.43587 18.556 1.78088 18.1247L3.71661 15.7423C3.71849 15.7437 3.72038 15.745 3.72227 15.7464L4.2997 15.0246L8.28088 10.1247L14.7809 2.12473L14.8532 2.02191C15.113 1.59834 15.0228 1.03764 14.6247 0.719168ZM7.72499 13.9446L11.5 9.22582V10.6819C11.5 12.4868 9.93026 13.9546 8.00001 13.9546C7.90746 13.9546 7.81575 13.9512 7.72499 13.9446ZM6.60445 15.3453L5.50798 16.7159C6.29225 17.0136 7.13532 17.1818 8.00001 17.1818C11.6976 17.1818 15 14.1064 15 10.9717V9.83572L14.9932 9.73309C14.9392 9.32966 14.5711 9.01754 14.125 9.01754C13.6418 9.01754 13.25 9.38385 13.25 9.83572V10.9717L13.2445 11.1527C13.1138 13.3262 10.6589 15.5455 8.00001 15.5455C7.52424 15.5455 7.05501 15.4744 6.60445 15.3453ZM5.37501 18.8637C4.89201 18.8637 4.50001 19.2294 4.50001 19.6819C4.50001 20.1343 4.89201 20.5 5.37501 20.5H10.625C11.1089 20.5 11.5 20.1343 11.5 19.6819C11.5 19.2294 11.1089 18.8637 10.625 18.8637H5.37501Z",fill:"#101419"},null,-1),Mi=[Ei];function ki(e,t){return Object(i["F"])(),Object(i["i"])("svg",Si,Mi)}const wi=we(Ci,[["render",ki]]),Oi={},Di={width:"21",height:"21",viewBox:"0 0 21 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ai=Object(i["j"])("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.33337 9.33331H0.333374V0.99998C0.333374 0.63179 0.631851 0.333313 1.00004 0.333313L9.33338 0.333313V2.33331H3.74758L10.0405 8.62624L8.62627 10.0404L2.33337 3.74753V9.33331ZM18.3331 11.3333H20.3331V19.6666C20.3331 20.0348 20.0347 20.3333 19.6665 20.3333L11.3331 20.3333L11.3331 18.3333H16.9189L10.626 12.0403L12.0402 10.6261L18.3331 16.919V11.3333Z",fill:"#101419"},null,-1),Ri=[Ai];function xi(e,t){return Object(i["F"])(),Object(i["i"])("svg",Di,Ri)}const Li=we(Oi,[["render",xi]]),Ni={key:0,class:"float-control-panel"},Pi={class:"float-control-item-icon"},ji={class:"float-control-item-icon"},Ui={class:"float-control-item-icon"},Gi=Object(i["n"])({__name:"TUICallKitMini",setup(e){function t(){Fi.toggleMinimize()}async function n(){await Fi.hangup()}async function r(){var e;null!=(e=N.value)&&e.microphone?await Fi.closeMicrophone():await Fi.openMicrophone()}return(e,o)=>{var a,s;return Object(i["U"])(w)!==Object(i["U"])(v).IDLE?Object(i["ab"])((Object(i["F"])(),Object(i["i"])("div",Ni,[Object(i["j"])("div",Pi,[Object(i["j"])("div",{class:"float-control-item-icon-container",onClick:n},[Object(i["m"])(gi)])]),Object(i["j"])("div",ji,[Object(i["j"])("div",{class:"float-control-item-icon-container",onClick:r},[null!=(a=Object(i["U"])(N))&&a.microphone?(Object(i["F"])(),Object(i["g"])(Ti,{key:0})):Object(i["h"])("",!0),null!=(s=Object(i["U"])(N))&&s.microphone?Object(i["h"])("",!0):(Object(i["F"])(),Object(i["g"])(wi,{key:1}))])]),Object(i["j"])("div",Ui,[Object(i["j"])("div",{class:"float-control-item-icon-container",onClick:t},[Object(i["m"])(Li)])])],512)),[[i["W"],Object(i["U"])(O)]]):Object(i["h"])("",!0)}}}),Vi=we(Gi,[["__scopeId","data-v-9c84be0f"]]),Fi=new he,Bi=e=>(e.component("TUICallKit",{server:Fi}),e.component("TUICallKitMini",{server:Fi}),Fi.bindTUICore(e),ui),qi=e=>{e.component("TUICallKitMini",Vi),e.component("TUICallKit",ui),console.log("TUICallKit&mini installed",e)};ui.plugin=Bi,ui.install=qi;Fi.version},f5df:function(e,t,n){var r=n("da84"),i=n("00ee"),o=n("1626"),a=n("c6b6"),s=n("b622"),c=s("toStringTag"),u=r.Object,l="Arguments"==a(function(){return arguments}()),d=function(e,t){try{return e[t]}catch(n){}};e.exports=i?a:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=d(t=u(e),c))?n:l?a(t):"Object"==(r=a(t))&&o(t.callee)?"Arguments":r}},f600:function(e,t,n){"use strict";var r=n("c199"),i=n("7a23"),o=n("fe7e"),a=n("f691"),s=n("8405"),[c,u]=Object(o["a"])("progress"),l={color:String,inactive:Boolean,pivotText:String,textColor:String,showPivot:a["g"],pivotColor:String,trackColor:String,strokeWidth:a["f"],percentage:{type:a["f"],default:0,validator:e=>e>=0&&e<=100}},d=Object(i["n"])({name:c,props:l,setup(e){var t=Object(i["e"])(()=>e.inactive?void 0:e.color),n=()=>{var{textColor:n,pivotText:r,pivotColor:o,percentage:a}=e,s=null!=r?r:a+"%";if(e.showPivot&&s){var c={color:n,left:+a+"%",transform:"translate(-"+ +a+"%,-50%)",background:o||t.value};return Object(i["m"])("span",{style:c,class:u("pivot",{inactive:e.inactive})},[s])}};return()=>{var{trackColor:r,percentage:o,strokeWidth:a}=e,c={background:r,height:Object(s["a"])(a)},l={width:o+"%",background:t.value};return Object(i["m"])("div",{class:u(),style:c},[Object(i["m"])("span",{class:u("portion",{inactive:e.inactive}),style:l},null),n()])}}}),p=Object(r["a"])(d);t["a"]=p},f691:function(e,t,n){"use strict";n.d(t,"h",(function(){return r})),n.d(t,"f",(function(){return i})),n.d(t,"g",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return l}));var r=null,i=[Number,String],o={type:Boolean,default:!0},a=e=>({type:e,required:!0}),s=()=>({type:Array,default:()=>[]}),c=e=>({type:Number,default:e}),u=e=>({type:i,default:e}),l=e=>({type:String,default:e})},f6b4:function(e,t,n){"use strict";var r=n("c532");function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},f772:function(e,t,n){var r=n("5692"),i=n("90e3"),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},f827:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n("f691"),i={show:Boolean,zIndex:r["f"],overlay:r["g"],duration:r["f"],teleport:[String,Object],lockScroll:r["g"],lazyRender:r["g"],beforeClose:Function,overlayStyle:Object,overlayClass:r["h"],transitionAppear:Boolean,closeOnClickOverlay:r["g"]},o=Object.keys(i)},f8c9:function(e,t,n){var r=n("23e7"),i=n("da84"),o=n("d44e");r({global:!0},{Reflect:{}}),o(i.Reflect,"Reflect",!0)},f9ae:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("7a23"),i=n("1e52");function o(e,t){var n=Object(i["a"])(e);return e=>Object(r["m"])("div",{class:t("placeholder"),style:{height:n.value?n.value+"px":void 0}},[e()])}},fb6a:function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("e8b5"),a=n("68ee"),s=n("861d"),c=n("23cb"),u=n("07fa"),l=n("fc6a"),d=n("8418"),p=n("b622"),f=n("1dde"),h=n("f36a"),g=f("slice"),v=p("species"),m=i.Array,_=Math.max;r({target:"Array",proto:!0,forced:!g},{slice:function(e,t){var n,r,i,p=l(this),f=u(p),g=c(e,f),y=c(void 0===t?f:t,f);if(o(p)&&(n=p.constructor,a(n)&&(n===m||o(n.prototype))?n=void 0:s(n)&&(n=n[v],null===n&&(n=void 0)),n===m||void 0===n))return h(p,g,y);for(r=new(void 0===n?m:n)(_(y-g,0)),i=0;g<y;g++,i++)g in p&&d(r,i,p[g]);return r.length=i,r}})},fc6a:function(e,t,n){var r=n("44ad"),i=n("1d80");e.exports=function(e){return r(i(e))}},fce3:function(e,t,n){var r=n("d039"),i=n("da84"),o=i.RegExp;e.exports=r((function(){var e=o(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(e,t,n){var r=n("4930");e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fe7e:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n("f344"),i=n("8405"),o=n("8da3"),a=n("7a23"),{hasOwnProperty:s}=Object.prototype;function c(e,t,n){var r=t[n];Object(o["b"])(r)&&(s.call(e,n)&&Object(o["f"])(r)?e[n]=u(Object(e[n]),r):e[n]=r)}function u(e,t){return Object.keys(t).forEach(n=>{c(e,t,n)}),e}var l={name:"姓名",tel:"电话",save:"保存",confirm:"确认",cancel:"取消",delete:"删除",loading:"加载中...",noCoupon:"暂无优惠券",nameEmpty:"请填写姓名",telInvalid:"请填写正确的电话",vanCalendar:{end:"结束",start:"开始",title:"日期选择",confirm:"确定",startEnd:"开始/结束",weekdays:["日","一","二","三","四","五","六"],monthTitle:(e,t)=>e+"年"+t+"月",rangePrompt:e=>"最多选择 "+e+" 天"},vanCascader:{select:"请选择"},vanContactCard:{addText:"添加联系人"},vanContactList:{addText:"新建联系人"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计："},vanCoupon:{unlimited:"无使用门槛",discount:e=>e+"折",condition:e=>"满"+e+"元可用"},vanCouponCell:{title:"优惠券",count:e=>e+"张可用"},vanCouponList:{exchange:"兑换",close:"不使用优惠券",enable:"可用",disabled:"不可用",placeholder:"请输入优惠码"},vanAddressEdit:{area:"地区",postal:"邮政编码",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",postalEmpty:"邮政编码不正确",defaultAddress:"设为默认收货地址"},vanAddressEditDetail:{label:"详细地址",placeholder:"街道门牌信息"},vanAddressList:{add:"新增地址"}},d=Object(a["K"])("zh-CN"),p=Object(a["J"])({"zh-CN":l}),f={messages(){return p[d.value]},use(e,t){d.value=e,this.add({[e]:t})},add(e){void 0===e&&(e={}),u(p,e)}},h=f;function g(e){var t=Object(i["b"])(e)+".";return function(e){for(var n=h.messages(),i=Object(r["b"])(n,t+e)||Object(r["b"])(n,e),a=arguments.length,s=new Array(a>1?a-1:0),c=1;c<a;c++)s[c-1]=arguments[c];return Object(o["c"])(i)?i(...s):i}}function v(e,t){return t?"string"===typeof t?" "+e+"--"+t:Array.isArray(t)?t.reduce((t,n)=>t+v(e,n),""):Object.keys(t).reduce((n,r)=>n+(t[r]?v(e,r):""),""):""}function m(e){return(t,n)=>(t&&"string"!==typeof t&&(n=t,t=""),t=t?e+"__"+t:e,""+t+v(t,n))}function _(e){var t="van-"+e;return[t,m(t),g(t)]}},fe86:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("7a23"),i=n("fe7e"),o=n("f691"),a=n("8405"),s=n("4a89"),c=n("7f9b"),u=n("cdd8"),l=n("4eda"),d=n("1c51"),[p,f]=Object(i["a"])("swipe"),h={loop:o["g"],width:o["f"],height:o["f"],vertical:Boolean,autoplay:Object(o["c"])(0),duration:Object(o["c"])(500),touchable:o["g"],lazyRender:Boolean,initialSwipe:Object(o["c"])(0),indicatorColor:String,showIndicators:o["g"],stopPropagation:o["g"]},g=Symbol(p);t["b"]=Object(r["n"])({name:p,props:h,emits:["change"],setup(e,t){var n,i,{emit:o,slots:p}=t,h=Object(r["K"])(),v=Object(r["J"])({rect:null,width:0,height:0,offset:0,active:0,swiping:!1}),m=Object(u["a"])(),{children:_,linkChildren:y}=Object(c["f"])(g),b=Object(r["e"])(()=>_.length),I=Object(r["e"])(()=>v[e.vertical?"height":"width"]),T=Object(r["e"])(()=>e.vertical?m.deltaY.value:m.deltaX.value),C=Object(r["e"])(()=>{if(v.rect){var t=e.vertical?v.rect.height:v.rect.width;return t-I.value*b.value}return 0}),S=Object(r["e"])(()=>Math.ceil(Math.abs(C.value)/I.value)),E=Object(r["e"])(()=>b.value*I.value),M=Object(r["e"])(()=>(v.active+b.value)%b.value),k=Object(r["e"])(()=>{var t=e.vertical?"vertical":"horizontal";return m.direction.value===t}),w=Object(r["e"])(()=>{var t={transitionDuration:(v.swiping?0:e.duration)+"ms",transform:"translate"+(e.vertical?"Y":"X")+"("+v.offset+"px)"};if(I.value){var n=e.vertical?"height":"width",r=e.vertical?"width":"height";t[n]=E.value+"px",t[r]=e[r]?e[r]+"px":""}return t}),O=t=>{var{active:n}=v;return t?e.loop?Object(a["c"])(n+t,-1,b.value):Object(a["c"])(n+t,0,S.value):n},D=function(t,n){void 0===n&&(n=0);var r=t*I.value;e.loop||(r=Math.min(r,-C.value));var i=n-r;return e.loop||(i=Object(a["c"])(i,C.value,0)),i},A=t=>{var{pace:n=0,offset:r=0,emitChange:i}=t;if(!(b.value<=1)){var{active:a}=v,s=O(n),c=D(s,r);if(e.loop){if(_[0]&&c!==C.value){var u=c<C.value;_[0].setOffset(u?E.value:0)}if(_[b.value-1]&&0!==c){var l=c>0;_[b.value-1].setOffset(l?-E.value:0)}}v.active=s,v.offset=c,i&&s!==a&&o("change",M.value)}},R=()=>{v.swiping=!0,v.active<=-1?A({pace:b.value}):v.active>=b.value&&A({pace:-b.value})},x=()=>{R(),m.reset(),Object(c["b"])(()=>{v.swiping=!1,A({pace:-1,emitChange:!0})})},L=()=>{R(),m.reset(),Object(c["b"])(()=>{v.swiping=!1,A({pace:1,emitChange:!0})})},N=()=>clearTimeout(n),P=()=>{N(),e.autoplay>0&&b.value>1&&(n=setTimeout(()=>{L(),P()},+e.autoplay))},j=function(t){if(void 0===t&&(t=+e.initialSwipe),h.value){if(!Object(s["d"])(h)){var n,r,i={width:h.value.offsetWidth,height:h.value.offsetHeight};v.rect=i,v.width=+(null!=(n=e.width)?n:i.width),v.height=+(null!=(r=e.height)?r:i.height)}b.value&&(t=Math.min(b.value-1,t)),v.active=t,v.swiping=!0,v.offset=D(t),_.forEach(e=>{e.setOffset(0)}),P()}},U=()=>j(v.active),G=t=>{e.touchable&&(m.start(t),i=Date.now(),N(),R())},V=t=>{if(e.touchable&&v.swiping){m.move(t);var n=k.value||m.offsetY.value>m.offsetX.value===e.vertical;n&&Object(s["e"])(t,e.stopPropagation),k.value&&A({offset:T.value})}},F=()=>{if(e.touchable&&v.swiping){var t=Date.now()-i,n=T.value/t,r=Math.abs(n)>.25||Math.abs(T.value)>I.value/2;if(r&&k.value){var o=e.vertical?m.offsetY.value:m.offsetX.value,a=0;a=e.loop?o>0?T.value>0?-1:1:0:-Math[T.value>0?"ceil":"floor"](T.value/I.value),A({pace:a,emitChange:!0})}else T.value&&A({pace:0});v.swiping=!1,P()}},B=function(t,n){void 0===n&&(n={}),R(),m.reset(),Object(c["b"])(()=>{var r;r=e.loop&&t===b.value?0===v.active?0:t:t%b.value,n.immediate?Object(c["b"])(()=>{v.swiping=!1}):v.swiping=!1,A({pace:r-v.active,emitChange:!0})})},q=(t,n)=>{var i=n===M.value,o=i?{backgroundColor:e.indicatorColor}:void 0;return Object(r["m"])("i",{style:o,class:f("indicator",{active:i})},null)},H=()=>p.indicator?p.indicator({active:M.value}):e.showIndicators&&b.value>1?Object(r["m"])("div",{class:f("indicators",{vertical:e.vertical})},[Array(b.value).fill("").map(q)]):void 0;return Object(l["a"])({prev:x,next:L,state:v,resize:U,swipeTo:B}),y({size:I,props:e,count:b,activeIndicator:M}),Object(r["X"])(()=>e.initialSwipe,e=>j(+e)),Object(r["X"])(b,()=>j(v.active)),Object(r["X"])(()=>e.autoplay,P),Object(r["X"])([s["k"],s["j"]],U),Object(r["X"])(Object(c["k"])(),e=>{"visible"===e?P():N()}),Object(r["C"])(j),Object(r["x"])(()=>j(v.active)),Object(d["b"])(()=>j(v.active)),Object(r["B"])(N),Object(r["z"])(N),()=>Object(r["m"])("div",{ref:h,class:f()},[Object(r["m"])("div",{style:w.value,class:f("track",{vertical:e.vertical}),onTouchstart:G,onTouchmove:V,onTouchend:F,onTouchcancel:F},[null==p.default?void 0:p.default()]),H()])}})},fea9:function(e,t,n){var r=n("da84");e.exports=r.Promise}}]);